/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{var t={6668:t=>{t.exports={externals:[{module:"react",root:"React",dist:"react/umd/react.production.min.js"},{module:"react-dom",dependencies:["react"],root:"ReactDOM",dist:"react-dom/umd/react-dom.production.min.js"},{module:"vue",root:"Vue",dist:"vue/dist/vue.min.js"},{module:"echarts",root:"echarts",dist:"echarts/dist/echarts.min.js"},{module:"echarts-gl",root:"echarts-gl",dependencies:["echarts"],dist:"echarts-gl/dist/echarts-gl.min.js"},{module:"highcharts",root:"Highcharts",dist:"highcharts/highcharts.js"},{module:"highcharts/highstock",root:"Highcharts",dist:"highcharts/highstock.js"},{module:"highcharts/highcharts-more",dependencies:["highcharts"],dist:"highcharts/highcharts-more.js"},{module:"highcharts/highcharts-3d",dependencies:["highcharts"],dist:"highcharts/highcharts-3d.js"},{module:"highcharts/modules/funnel3d",dependencies:["highcharts"],dist:"highcharts/modules/funnel3d.js"},{module:"highcharts/modules/cylinder",dependencies:["highcharts"],dist:"highcharts/modules/cylinder.js"},{module:"highcharts/modules/treemap",dependencies:["highcharts"],dist:"highcharts/modules/treemap.js"},{module:"bizcharts",root:"BizCharts",dist:"bizcharts/umd/BizCharts.min.js"},{module:"react-highcharts",dependencies:["highcharts"],root:"ReactHighcharts",dist:"react-highcharts/ReactHighcharts.js"},{module:"snapsvg",root:"Snap",dist:"snapsvg/dist/snap.svg-min.js"},{module:"@antv/data-set",root:"DataSet",dist:"@antv/data-set/dist/data-set.js"},{module:"@ant-design/icons",root:"icons",dependencies:["antd"],dist:"@ant-design/icons/dist/index.umd.min.js"},{module:"moment/locale/zh-cn",root:"moment_locale_zh-cn",dist:"moment/locale/zh-cn.js",dependencies:["moment"]},{module:"moment",root:"moment",dist:"moment/min/moment-with-locales.min.js"},{module:"antd/dist/antd.css",root:"antd_css"},{module:"antd/dist/antd-with-locales",root:"antd"},{module:"antd",root:"antd",dependencies:["react","react-dom","moment"],dist:"antd/dist/antd.min.js",style:"antd/dist/antd.variable.min.css"},{module:"lodash",root:"_",dist:"lodash/lodash.min.js"},{module:"axios",root:"axios",dist:"axios/dist/axios.min.js"},{module:"html2canvas",root:"html2canvas",dist:"html2canvas/dist/html2canvas.min.js"},{module:"@douyinfe/semi-ui",root:"SemiUI",dependencies:["react","react-dom"],style:"@douyinfe/semi-ui/dist/css/semi.min.css",dist:"@douyinfe/semi-ui/dist/umd/semi-ui.min.js"}]}},42:(t,e)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&t.push(s)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var a in n)r.call(n,a)&&n[a]&&t.push(a)}}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},7053:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".semi-modal-footer {\n  margin: 5px 0 15px 0;\n}\n.editor-wrapper {\n  width: 750px;\n  height: 320px;\n  overflow: auto;\n  position: relative;\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n}\n.code-error-banner {\n  position: absolute;\n  top: 360px;\n  width: 750px;\n  padding: 8px;\n}\n",""]);const a=s},2696:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".component-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  border-radius: 4px;\n  height: 90px;\n  background-color: var(--semi-color-tertiary-light-default);\n}\n.component-container img {\n  width: 90%;\n  height: 90%;\n}\n",""]);const a=s},7318:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".variable-value {\n  position: relative;\n  display: flex;\n}\n.variable-value .action-edit {\n  display: none;\n  position: absolute;\n  right: 20px;\n  top: 4px;\n}\n.variable-value .action-delete {\n  margin-top: 4px;\n  margin-left: 2px;\n  visibility: hidden;\n}\n.variable-value:hover .action-edit {\n  display: inherit;\n}\n.variable-value:hover .action-delete {\n  visibility: visible;\n}\n",""]);const a=s},1439:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,"html,\nbody {\n  overflow: hidden;\n  user-select: none;\n}\n::-webkit-scrollbar,\n::-webkit-scrollbar-thumb {\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  background-clip: padding-box;\n  border: 2px solid transparent;\n  color: var(--semi-color-bg-0);\n}\n::-webkit-scrollbar-thumb:hover {\n  color: var(--semi-color-fill-0);\n}\n::-webkit-scrollbar-thumb:active {\n  color: var(--semi-color-fill-0);\n}\n::-webkit-scrollbar-thumb {\n  box-shadow: inset 0 0 0 10px;\n}\n::-webkit-scrollbar-corner {\n  display: none;\n}\n.semi-input-wrapper .semi-input {\n  padding-left: 6px;\n  padding-right: 6px;\n}\n.semi-input-wrapper .semi-input-append {\n  padding: 0 5px;\n}\n.workspace {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: var(--semi-color-fill-0);\n}\n.workspace .viewport-container {\n  background: var(--semi-color-bg-0);\n}\n.status-drag-over {\n  background-color: var(--semi-color-primary-light-default);\n  border: 2px dashed var(--semi-color-primary);\n}\nslot {\n  position: relative;\n}\n",""]);const a=s},7312:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".movable-panel {\n  position: absolute;\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n  padding: 4px;\n  border-radius: 5px;\n  z-index: 1000;\n}\n.movable-panel .semi-icon-handle {\n  position: absolute;\n  top: 8px;\n}\n.movable-panel .panel-btns {\n  position: absolute;\n  right: 10px;\n  top: 0;\n  display: none;\n}\n.movable-panel .panel-content {\n  height: 100%;\n}\n.movable-panel .semi-tabs {\n  height: 100%;\n}\n.movable-panel .semi-tabs .semi-tabs-bar {\n  padding-left: 16px;\n}\n.movable-panel .semi-tabs .semi-tabs-bar .semi-tabs-tab {\n  padding: 3px 5px;\n}\n.movable-panel .semi-tabs .semi-tabs-bar .semi-tabs-tab.semi-tabs-tab-active {\n  padding: 3px 5px;\n}\n.movable-panel .semi-tabs .semi-tabs-content {\n  height: calc(100% - 24px);\n}\n.movable-panel .semi-tabs .semi-tabs-content .semi-tabs-pane {\n  height: 100%;\n}\n.movable-panel .semi-tabs .semi-tabs-content .semi-tabs-pane .semi-tabs-pane-motion-overlay {\n  height: 100%;\n}\n.movable-panel .semi-table-container .semi-table-thead th.semi-table-row-head {\n  padding: 2px 5px;\n}\n.movable-panel .semi-table-container td.semi-table-row-cell {\n  padding: 2px 5px;\n}\n",""]);const a=s},1162:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".variable-list {\n  height: 100%;\n}\n.variable-list .item-list {\n  height: calc(100% - 24px);\n  overflow: overlay;\n  background-color: var(--semi-color-bg-2);\n}\n.variable-list .item {\n  border-bottom: 1px solid var(--semi-color-fill-0);\n  padding: 3px 8px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  font-size: 14px;\n  line-height: 20px;\n  font-family: Inter, -apple-system, BlinkMacSystemFont, Segoe UI, PingFang SC, Hiragino Sans GB, Microsoft YaHei, Helvetica Neue, Helvetica, Arial, sans-serif;\n  word-break: break-word;\n  color: var(--semi-color-text-0);\n  gap: 4px;\n  transition: background-color var(--semi-transition_duration-none) var(--semi-transition_function-easeIn) var(--semi-transition_delay-none);\n}\n.variable-list .item:hover {\n  background-color: var(--semi-color-fill-0);\n}\n.variable-list .item:hover .semi-icon {\n  visibility: visible;\n}\n.variable-list .item.selected {\n  background-color: var(--semi-color-success-light-default);\n}\n.variable-list .item .name {\n  flex: 1;\n}\n.variable-list .item .value {\n  flex: 2;\n  height: 22px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.variable-list .item .semi-icon {\n  visibility: hidden;\n}\n.variable-list .item .edit-line {\n  display: flex;\n}\n.variable-list .item .edit-line .edit-name {\n  flex: 1;\n}\n.variable-list .item .edit-line .edit-value {\n  flex: 2;\n}\n.variable-list .bottom-bar {\n  height: 24px;\n  display: flex;\n  align-items: center;\n  background-color: var(--semi-color-fill-0);\n}\n.variable-list .bottom-bar .semi-icon {\n  cursor: pointer;\n  margin: 0 5px;\n  color: var(--semi-color-text-1);\n}\n.variable-list .bottom-bar .semi-icon:hover {\n  color: var(--semi-color-text-0);\n}\n",""]);const a=s},7056:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".object-form {\n  padding: 0 8px;\n  height: 100%;\n  overflow-y: overlay;\n}\n.object-form .semi-form .semi-form-field-label {\n  margin-bottom: 0;\n  margin-right: 0;\n  padding-top: 0px;\n  line-height: 24px;\n  padding-bottom: 0px;\n  font-weight: normal;\n  color: var(--semi-color-text-2);\n}\n.object-form .semi-form .row {\n  display: flex;\n}\n.object-form .semi-form .row .semi-form-field {\n  padding: 5px 0;\n  width: 100%;\n}\n.object-form .semi-form .row .semi-form-field .event-edit {\n  position: relative;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .action-add {\n  position: absolute;\n  right: 5px;\n  top: -30px;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .event-action-config {\n  background-color: var(--semi-color-tertiary-light-default);\n  border-radius: 5px;\n  padding: 8px;\n  margin-top: 5px;\n  position: relative;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .event-action-config .action-delete {\n  position: absolute;\n  right: 10px;\n  cursor: pointer;\n  color: var(--semi-color-text-2);\n}\n.object-form .semi-form .row .semi-form-field .event-edit .action-field {\n  display: flex;\n  padding: 3px 0;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .action-field .action-label {\n  width: 48px;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .action-field .semi-input-textarea-wrapper {\n  width: auto;\n  flex: 1;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .action-field .semi-input-textarea-wrapper textarea {\n  height: 48px;\n}\n.object-form .semi-form .row .col-12 {\n  display: flex;\n}\n.object-form .semi-form .row .col-12 .semi-form-field {\n  width: 100px;\n}\n.object-form .semi-form .row .col-12 .semi-form-field-label {\n  width: 24px;\n}\n.object-form .semi-form .with-code-expr {\n  display: flex;\n}\n.object-form .semi-form .with-code-expr .semi-button-tertiary {\n  visibility: hidden;\n}\n.object-form .semi-form .with-code-expr .semi-button-tertiary.is-open {\n  visibility: initial;\n}\n.object-form .semi-form .with-code-expr:hover .semi-button-tertiary {\n  visibility: initial;\n}\n.object-form .semi-form .semi-form-field-main > .semi-checkbox {\n  padding: 2px;\n}\n",""]);const a=s},1171:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,"html,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nmenu,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmain,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  box-sizing: border-box;\n}\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmain,\nmenu,\nnav,\nsection {\n  display: block;\n}\n/* HTML5 hidden-attribute fix for newer browsers */\n*[hidden] {\n  display: none;\n}\nbody {\n  line-height: 1;\n}\nmenu,\nol,\nul {\n  list-style: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: '';\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n}\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n}\n.component-add-panel .package-tab {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  padding: 0 2px;\n}\n.component-add-panel .semi-tabs-bar-button .semi-tabs-tab {\n  padding: 8px 3px;\n}\n.component-add-panel .package-tab img {\n  width: 24px;\n  height: 24px;\n}\n.dialog-resource {\n  width: 80%;\n}\n",""]);const a=s},2378:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".moveable-control {\r\n  width: 8px!important;\r\n  height: 8px!important;\r\n  border: 1px solid var(--semi-color-primary)!important;\r\n  box-sizing: border-box;\r\n  border-radius: 0!important;\r\n  background: #fff!important;\r\n  margin-top: -4px!important;\r\n  margin-left: -4px!important;\r\n  z-index: 10;\r\n}\r\n.moveable-control-box {\r\n  z-index: 100!important;\r\n}\r\n\r\n.moveable-line {\r\n  background: var(--semi-color-primary)!important;\r\n}\r\n\r\n.workspace-movable .moveable-control {\r\n  opacity: 0;\r\n}\r\n\r\n.workspace-movable .moveable-line {\r\n  opacity: 0;\r\n}",""]);const a=s},7543:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,"/* shadow */\n/* sizing */\n/* spacing */\n.semi-icon {\n  display: inline-block;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  text-rendering: optimizeLegibility;\n  fill: currentColor;\n}\n\n.semi-icon-extra-small {\n  font-size: 8px;\n}\n\n.semi-icon-small {\n  font-size: 12px;\n}\n\n.semi-icon-default {\n  font-size: 16px;\n}\n\n.semi-icon-large {\n  font-size: 20px;\n}\n\n.semi-icon-extra-large {\n  font-size: 24px;\n}\n\n.semi-icon-spinning {\n  animation: 0.6s linear infinite semi-icon-animation-rotate;\n  animation-fill-mode: forwards;\n}\n\n@keyframes semi-icon-animation-rotate {\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}",""]);const a=s},3476:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<t.length;c++){var u=[].concat(t[c]);r&&s[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),e.push(u))}},e}},4933:t=>{"use strict";t.exports=function(t){return t[1]}},6292:(t,e,n)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(i=r))})),e.splice(i,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(9374)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},9374:(t,e,n)=>{t.exports=function(t){function e(t){let n,i,o,s=null;function a(...t){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=e.formatters[i];if("function"==typeof o){const e=t[s];n=o.call(r,e),t.splice(s,1),s--}return n})),e.formatArgs.call(r,t),(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==e.namespaces&&(i=e.namespaces,o=e.enabled(t)),o),set:t=>{s=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,n){const r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(i),...e.skips.map(i).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(8628),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},6051:function(t,e){var n,r;void 0===(r="function"==typeof(n=function(){var t=function(){},e={},n={},r={};function i(t,e){if(t){var i=r[t];if(n[t]=e,i)for(;i.length;)i[0](t,e),i.splice(0,1)}}function o(e,n){e.call&&(e={success:e}),n.length?(e.error||t)(n):(e.success||t)(e)}function s(e,n,r,i){var o,a,l=document,c=r.async,u=(r.numRetries||0)+1,h=r.before||t,f=e.replace(/[\?|#].*$/,""),d=e.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(f)?((a=l.createElement("link")).rel="stylesheet",a.href=d,(o="hideFocus"in a)&&a.relList&&(o=0,a.rel="preload",a.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(f)?(a=l.createElement("img")).src=d:((a=l.createElement("script")).src=e,a.async=void 0===c||c),a.onload=a.onerror=a.onbeforeload=function(t){var l=t.type[0];if(o)try{a.sheet.cssText.length||(l="e")}catch(t){18!=t.code&&(l="e")}if("e"==l){if((i+=1)<u)return s(e,n,r,i)}else if("preload"==a.rel&&"style"==a.as)return a.rel="stylesheet";n(e,l,t.defaultPrevented)},!1!==h(e,a)&&l.head.appendChild(a)}function a(t,n,r){var a,l;if(n&&n.trim&&(a=n),l=(a?r:n)||{},a){if(a in e)throw"LoadJS";e[a]=!0}function c(e,n){!function(t,e,n){var r,i,o=(t=t.push?t:[t]).length,a=o,l=[];for(r=function(t,n,r){if("e"==n&&l.push(t),"b"==n){if(!r)return;l.push(t)}--o||e(l)},i=0;i<a;i++)s(t[i],r,n)}(t,(function(t){o(l,t),e&&o({success:e,error:n},t),i(a,t)}),l)}if(l.returnPromise)return new Promise(c);c()}return a.ready=function(t,e){return function(t,e){t=t.push?t:[t];var i,o,s,a=[],l=t.length,c=l;for(i=function(t,n){n.length&&a.push(t),--c||e(a)};l--;)o=t[l],(s=n[o])?i(o,s):(r[o]=r[o]||[]).push(i)}(t,(function(t){o(e,t)})),a},a.done=function(t){i(t,[])},a.reset=function(){e={},n={},r={}},a.isDefined=function(t){return t in e},a})?n.apply(e,[]):n)||(t.exports=r)},927:(t,e,n)=>{t.exports=function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){return i(e[s][1][t]||t)}),c,c.exports,t,e,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,r){(function(t){"use strict";var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,s=new i(u),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var l=new t.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var t,e;r=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}r=!1}e.exports=function(t){1!==c.push(t)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var r=t(1);function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==i&&d(this,t)}function u(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){r((function(){var r;try{r=e(n)}catch(e){return o.reject(t,e)}r===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,r)}))}function f(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var n=!1;function r(e){n||(n=!0,o.reject(t,e))}function i(e){n||(n=!0,o.resolve(t,e))}var s=p((function(){e(i,r)}));"error"===s.status&&r(s.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(i);return this.state!==l?h(n,this.state===a?t:e,this.outcome):this.queue.push(new u(n,t,e)),n},u.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){o.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=p(f,e);if("error"===n.status)return o.reject(t,n.value);var r=n.value;if(r)d(t,r);else{t.state=a,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:o.resolve(new this(i),t)},c.reject=function(t){var e=new this(i);return o.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,l=-1,c=new this(i);++l<n;)u(t[l],l);return c;function u(t,i){e.resolve(t).then((function(t){s[i]=t,++a!==n||r||(r=!0,o.resolve(c,s))}),(function(t){r||(r=!0,o.reject(c,t))}))}},c.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n,r=t.length,s=!1;if(!r)return this.resolve([]);for(var a=-1,l=new this(i);++a<r;)n=t[a],e.resolve(n).then((function(t){s||(s=!0,o.resolve(l,t))}),(function(t){s||(s=!0,o.reject(l,t))}));return l}},{1:1}],3:[function(t,e,r){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function o(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var s=Promise;function a(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function l(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function c(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function u(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",f=void 0,d={},p=Object.prototype.toString,g="readonly",m="readwrite";function O(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function v(t){return"boolean"==typeof f?s.resolve(f):function(t){return new s((function(e){var n=t.transaction(h,m),r=o([""]);n.objectStore(h).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}(t).then((function(t){return f=t}))}function b(t){var e=d[t.name],n={};n.promise=new s((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function y(t){var e=d[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function w(t,e){var n=d[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function x(t,e){return new s((function(n,r){if(d[t.name]=d[t.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},t.db){if(!e)return n(t.db);b(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var s=i.open.apply(i,o);e&&(s.onupgradeneeded=function(e){var n=s.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(h)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),s.onerror=function(t){t.preventDefault(),r(s.error)},s.onsuccess=function(){var e=s.result;e.onversionchange=function(t){t.target.close()},n(e),y(t)}}))}function S(t){return x(t,!1)}function k(t){return x(t,!0)}function C(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,i=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||n){if(n){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}function Q(t){return o([O(atob(t.data))],{type:t.type})}function _(t){return t&&t.__local_forage_encoded_blob}function P(t){var e=this,n=e._initReady().then((function(){var t=d[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return l(n,t,t),n}function E(t,e,n,r){void 0===r&&(r=1);try{var i=t.db.transaction(t.storeName,e);n(null,i)}catch(i){if(r>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return s.resolve().then((function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),k(t)})).then((function(){return function(t){b(t);for(var e=d[t.name],n=e.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return t.db=null,S(t).then((function(e){return t.db=e,C(t)?k(t):e})).then((function(r){t.db=e.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(e){throw w(t,e),e}))}(t).then((function(){E(t,e,n,r-1)}))})).catch(n);n(i)}}var T={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var i=d[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},d[n.name]=i),i.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=P);var o=[];function a(){return s.resolve()}for(var l=0;l<i.forages.length;l++){var c=i.forages[l];c!==e&&o.push(c._initReady().catch(a))}var u=i.forages.slice(0);return s.all(o).then((function(){return n.db=i.db,S(n)})).then((function(t){return n.db=t,C(n,e._defaultConfig.version)?k(n):t})).then((function(t){n.db=i.db=t,e._dbInfo=n;for(var r=0;r<u.length;r++){var o=u[r];o!==e&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},_support:function(){try{if(!i||!i.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=new s((function(e,r){n.ready().then((function(){E(n._dbInfo,g,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;_(r)&&(r=Q(r));var i=t(r,n.key,a++);void 0!==i?e(i):n.continue()}else e()},s.onerror=function(){r(s.error)}}catch(t){r(t)}}))})).catch(r)}));return a(r,e),r},getItem:function(t,e){var n=this;t=c(t);var r=new s((function(e,r){n.ready().then((function(){E(n._dbInfo,g,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).get(t);s.onsuccess=function(){var t=s.result;void 0===t&&(t=null),_(t)&&(t=Q(t)),e(t)},s.onerror=function(){r(s.error)}}catch(t){r(t)}}))})).catch(r)}));return a(r,e),r},setItem:function(t,e,n){var r=this;t=c(t);var i=new s((function(n,i){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===p.call(e)?v(o.db).then((function(t){return t?e:(n=e,new s((function(t,e){var r=new FileReader;r.onerror=e,r.onloadend=function(e){var r=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):e})).then((function(e){E(r._dbInfo,m,(function(o,s){if(o)return i(o);try{var a=s.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var l=a.put(e,t);s.oncomplete=function(){void 0===e&&(e=null),n(e)},s.onabort=s.onerror=function(){var t=l.error?l.error:l.transaction.error;i(t)}}catch(t){i(t)}}))})).catch(i)}));return a(i,n),i},removeItem:function(t,e){var n=this;t=c(t);var r=new s((function(e,r){n.ready().then((function(){E(n._dbInfo,m,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){r(s.error)},o.onabort=function(){var t=s.error?s.error:s.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return a(r,e),r},clear:function(t){var e=this,n=new s((function(t,n){e.ready().then((function(){E(e._dbInfo,m,(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){var t=o.error?o.error:o.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return a(n,t),n},length:function(t){var e=this,n=new s((function(t,n){e.ready().then((function(){E(e._dbInfo,g,(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).count();o.onsuccess=function(){t(o.result)},o.onerror=function(){n(o.error)}}catch(t){n(t)}}))})).catch(n)}));return a(n,t),n},key:function(t,e){var n=this,r=new s((function(e,r){t<0?e(null):n.ready().then((function(){E(n._dbInfo,g,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName),a=!1,l=s.openKeyCursor();l.onsuccess=function(){var n=l.result;n?0===t||a?e(n.key):(a=!0,n.advance(t)):e(null)},l.onerror=function(){r(l.error)}}catch(t){r(t)}}))})).catch(r)}));return a(r,e),r},keys:function(t){var e=this,n=new s((function(t,n){e.ready().then((function(){E(e._dbInfo,g,(function(r,i){if(r)return n(r);try{var o=i.objectStore(e._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var e=o.result;e?(s.push(e.key),e.continue()):t(s)},o.onerror=function(){n(o.error)}}catch(t){n(t)}}))})).catch(n)}));return a(n,t),n},dropInstance:function(t,e){e=u.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,o=this;if(t.name){var l=t.name===n.name&&o._dbInfo.db?s.resolve(o._dbInfo.db):S(t).then((function(e){var n=d[t.name],r=n.forages;n.db=e;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=e;return e}));r=t.storeName?l.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;b(t);var r=d[t.name],o=r.forages;e.close();for(var a=0;a<o.length;a++){var l=o[a];l._dbInfo.db=null,l._dbInfo.version=n}var c=new s((function(e,r){var o=i.open(t.name,n);o.onerror=function(t){o.result.close(),r(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}}));return c.then((function(t){r.db=t;for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=t,y(n._dbInfo)}})).catch((function(e){throw(w(t,e)||s.resolve()).catch((function(){})),e}))}})):l.then((function(e){b(t);var n=d[t.name],r=n.forages;e.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;var a=new s((function(e,n){var r=i.deleteDatabase(t.name);r.onerror=function(){var t=r.result;t&&t.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}}));return a.then((function(t){n.db=t;for(var e=0;e<r.length;e++)y(r[e]._dbInfo)})).catch((function(e){throw(w(t,e)||s.resolve()).catch((function(){})),e}))}))}else r=s.reject("Invalid arguments");return a(r,e),r}};var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=/^~~local_forage_type~([^~]+)~/,M="__lfsc__:",A=M.length,D="arbf",j="blob",q="si08",X="ui08",V="uic8",U="si16",Z="si32",I="ur16",N="ui32",B="fl32",z="fl64",W=A+D.length,L=Object.prototype.toString;function G(t){var e,n,r,i,o,s=.75*t.length,a=t.length,l=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),u=new Uint8Array(c);for(e=0;e<a;e+=4)n=$.indexOf(t[e]),r=$.indexOf(t[e+1]),i=$.indexOf(t[e+2]),o=$.indexOf(t[e+3]),u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&o;return c}function F(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=$[n[e]>>2],r+=$[(3&n[e])<<4|n[e+1]>>4],r+=$[(15&n[e+1])<<2|n[e+2]>>6],r+=$[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var Y={serialize:function(t,e){var n="";if(t&&(n=L.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===L.call(t.buffer))){var r,i=M;t instanceof ArrayBuffer?(r=t,i+=D):(r=t.buffer,"[object Int8Array]"===n?i+=q:"[object Uint8Array]"===n?i+=X:"[object Uint8ClampedArray]"===n?i+=V:"[object Int16Array]"===n?i+=U:"[object Uint16Array]"===n?i+=I:"[object Int32Array]"===n?i+=Z:"[object Uint32Array]"===n?i+=N:"[object Float32Array]"===n?i+=B:"[object Float64Array]"===n?i+=z:e(new Error("Failed to get type for BinaryArray"))),e(i+F(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+t.type+"~"+F(this.result);e("__lfsc__:blob"+n)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}},deserialize:function(t){if(t.substring(0,A)!==M)return JSON.parse(t);var e,n=t.substring(W),r=t.substring(A,W);if(r===j&&R.test(n)){var i=n.match(R);e=i[1],n=n.substring(i[0].length)}var s=G(n);switch(r){case D:return s;case j:return o([s],{type:e});case q:return new Int8Array(s);case X:return new Uint8Array(s);case V:return new Uint8ClampedArray(s);case U:return new Int16Array(s);case I:return new Uint16Array(s);case Z:return new Int32Array(s);case N:return new Uint32Array(s);case B:return new Float32Array(s);case z:return new Float64Array(s);default:throw new Error("Unkown type: "+r)}},stringToBuffer:G,bufferToString:F};function H(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function J(t,e,n,r,i,o){t.executeSql(n,r,i,(function(t,s){s.code===s.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,a){a.rows.length?o(t,s):H(t,e,(function(){t.executeSql(n,r,i,o)}),o)}),o):o(t,s)}),o)}function K(t,e,n,r){var i=this;t=c(t);var o=new s((function(o,s){i.ready().then((function(){void 0===e&&(e=null);var a=e,l=i._dbInfo;l.serializer.serialize(e,(function(e,c){c?s(c):l.db.transaction((function(n){J(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){o(a)}),(function(t,e){s(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void o(K.apply(i,[t,a,n,r-1]));s(e)}}))}))})).catch(s)}));return a(o,n),o}function tt(t){return new s((function(e,n){t.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);e({db:t,storeNames:i})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}var et={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!=typeof t[r]?t[r].toString():t[r];var i=new s((function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return r(t)}n.db.transaction((function(i){H(i,n,(function(){e._dbInfo=n,t()}),(function(t,e){r(e)}))}),r)}));return n.serializer=Y,i},_support:"function"==typeof openDatabase,iterate:function(t,e){var n=this,r=new s((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){J(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var o=r.rows,s=o.length,a=0;a<s;a++){var l=o.item(a),c=l.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=t(c,l.key,a+1)))return void e(c)}e()}),(function(t,e){r(e)}))}))})).catch(r)}));return a(r,e),r},getItem:function(t,e){var n=this;t=c(t);var r=new s((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){J(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return a(r,e),r},setItem:function(t,e,n){return K.apply(this,[t,e,n,1])},removeItem:function(t,e){var n=this;t=c(t);var r=new s((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){J(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){r(e)}))}))})).catch(r)}));return a(r,e),r},clear:function(t){var e=this,n=new s((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){J(e,r,"DELETE FROM "+r.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return a(n,t),n},length:function(t){var e=this,n=new s((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){J(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return a(n,t),n},key:function(t,e){var n=this,r=new s((function(e,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){J(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return a(r,e),r},keys:function(t){var e=this,n=new s((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){J(e,r,"SELECT key FROM "+r.storeName,[],(function(e,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return a(n,t),n},dropInstance:function(t,e){e=u.apply(this,arguments);var n=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,i=this;return a(r=t.name?new s((function(e){var r;r=t.name===n.name?i._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(tt(r))})).then((function(t){return new s((function(e,n){t.db.transaction((function(r){function i(t){return new s((function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var o=[],a=0,l=t.storeNames.length;a<l;a++)o.push(i(t.storeNames[a]));s.all(o).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):s.reject("Invalid arguments"),e),r}};function nt(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function rt(){return!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}()||localStorage.length>0}var it={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=nt(t,this._defaultConfig),rt()?(this._dbInfo=e,e.serializer=Y,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(t,e){var n=this,r=n.ready().then((function(){for(var e=n._dbInfo,r=e.keyPrefix,i=r.length,o=localStorage.length,s=1,a=0;a<o;a++){var l=localStorage.key(a);if(0===l.indexOf(r)){var c=localStorage.getItem(l);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,l.substring(i),s++)))return c}}}));return a(r,e),r},getItem:function(t,e){var n=this;t=c(t);var r=n.ready().then((function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r}));return a(r,e),r},setItem:function(t,e,n){var r=this;t=c(t);var i=r.ready().then((function(){void 0===e&&(e=null);var n=e;return new s((function(i,o){var s=r._dbInfo;s.serializer.serialize(e,(function(e,r){if(r)o(r);else try{localStorage.setItem(s.keyPrefix+t,e),i(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}}))}))}));return a(i,n),i},removeItem:function(t,e){var n=this;t=c(t);var r=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return a(r,e),r},clear:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}}));return a(n,t),n},length:function(t){var e=this.keys().then((function(t){return t.length}));return a(e,t),e},key:function(t,e){var n=this,r=n.ready().then((function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e}));return a(r,e),r},keys:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(t.keyPrefix)&&r.push(o.substring(t.keyPrefix.length))}return r}));return a(n,t),n},dropInstance:function(t,e){if(e=u.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,i=this;return r=t.name?new s((function(e){t.storeName?e(nt(t,i._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}})):s.reject("Invalid arguments"),a(r,e),r}},ot=function(t,e){for(var n=t.length,r=0;r<n;){if((i=t[r])===(o=e)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;r++}var i,o;return!1},st=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},at={},lt={},ct={INDEXEDDB:T,WEBSQL:et,LOCALSTORAGE:it},ut=[ct.INDEXEDDB._driver,ct.WEBSQL._driver,ct.LOCALSTORAGE._driver],ht=["dropInstance"],ft=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ht),dt={description:"",driver:ut.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function pt(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function gt(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(st(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var mt=function(){function t(e){for(var n in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ct)if(ct.hasOwnProperty(n)){var r=ct[n],i=r._driver;this[n]=i,at[i]||this.defineDriver(r)}this._defaultConfig=gt({},dt),this._config=gt({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new s((function(e,n){try{var r=t._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(i);for(var o=ft.concat("_initStorage"),l=0,c=o.length;l<c;l++){var u=o[l];if((!ot(ht,u)||t[u])&&"function"!=typeof t[u])return void n(i)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=s.reject(e);return a(n,arguments[arguments.length-1]),n}},n=0,r=ht.length;n<r;n++){var i=ht[n];t[i]||(t[i]=e(i))}}();var h=function(n){at[r]&&console.info("Redefining LocalForage driver: "+r),at[r]=t,lt[r]=n,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(h,n):h(!!t._support):h(!0)}catch(t){n(t)}}));return l(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=at[t]?s.resolve(at[t]):s.reject(new Error("Driver not found."));return l(r,e,n),r},t.prototype.getSerializer=function(t){var e=s.resolve(Y);return l(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return l(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;st(t)||(t=[t]);var i=this._getSupportedDrivers(t);function o(){r._config.driver=r.driver()}function a(t){return r._extend(t),o(),r._ready=r._initStorage(r._config),r._ready}var c=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve();return this._driverSet=c.then((function(){var t=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then((function(t){r._driver=t._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var i=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(a).catch(n)}o();var l=new Error("No available storage method found.");return r._driverSet=s.reject(l),r._driverSet}()}}(i)}))})).catch((function(){o();var t=new Error("No available storage method found.");return r._driverSet=s.reject(t),r._driverSet})),l(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!lt[t]},t.prototype._extend=function(t){gt(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];this.supports(i)&&e.push(i)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=ft.length;t<e;t++)pt(this,ft[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),Ot=new mt;e.exports=Ot},{3:3}]},{},[4])(4)},6586:(t,e,n)=>{var r=n(7753),i=n(2452),o=n(2115),s=n(8256),a=n(7426);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},6301:(t,e,n)=>{var r=n(9417),i=n(2470),o=n(6165),s=n(1873),a=n(2556);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},4538:(t,e,n)=>{var r=n(1822)(n(7400),"Map");t.exports=r},4554:(t,e,n)=>{var r=n(9448),i=n(7738),o=n(6575),s=n(7238),a=n(8738);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},6539:(t,e,n)=>{var r=n(7400).Symbol;t.exports=r},9349:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},8213:(t,e,n)=>{var r=n(4701),i=n(2900),o=n(9785),s=n(3854),a=n(2383),l=n(8519),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),u=!n&&i(t),h=!n&&!u&&s(t),f=!n&&!u&&!h&&l(t),d=n||u||h||f,p=d?r(t.length,String):[],g=p.length;for(var m in t)!e&&!c.call(t,m)||d&&("length"==m||h&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||p.push(m);return p}},6070:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},7141:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},6446:t=>{t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},5630:t=>{t.exports=function(t){return t.split("")}},585:t=>{var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(e)||[]}},1928:(t,e,n)=>{var r=n(8799),i=n(5638),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&i(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},3382:(t,e,n)=>{var r=n(5638);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},8799:(t,e,n)=>{var r=n(2630);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},8419:(t,e,n)=>{var r=n(9729);t.exports=function(t,e){for(var n=-1,i=e.length,o=Array(i),s=null==t;++n<i;)o[n]=s?void 0:r(t,e[n]);return o}},5372:t=>{t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},3545:(t,e,n)=>{var r=n(7141),i=n(2889);t.exports=function t(e,n,o,s,a){var l=-1,c=e.length;for(o||(o=i),a||(a=[]);++l<c;){var u=e[l];n>0&&o(u)?n>1?t(u,n-1,o,s,a):r(a,u):s||(a[a.length]=u)}return a}},9867:(t,e,n)=>{var r=n(6747),i=n(7948);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},9736:(t,e,n)=>{var r=n(6539),i=n(4840),o=n(1258),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},8817:(t,e,n)=>{var r=n(5372),i=n(1129),o=n(8263);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},5829:(t,e,n)=>{var r=n(9736),i=n(2360);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},1129:t=>{t.exports=function(t){return t!=t}},6729:(t,e,n)=>{var r=n(8338),i=n(9678),o=n(1611),s=n(6532),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,f=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:a).test(s(t))}},6972:(t,e,n)=>{var r=n(9736),i=n(4194),o=n(2360),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},186:(t,e,n)=>{var r=n(6016),i=n(962),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},9464:(t,e,n)=>{var r=n(1611),i=n(6016),o=n(1586),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},7646:t=>{t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},1197:(t,e,n)=>{var r=n(1137),i=n(1871),o=n(3132);t.exports=function(t,e){return o(i(t,e,r),t+"")}},4459:(t,e,n)=>{var r=n(551),i=n(2630),o=n(1137),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},5733:t=>{t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},4701:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},4282:(t,e,n)=>{var r=n(6539),i=n(6070),o=n(9785),s=n(5193),a=r?r.prototype:void 0,l=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(s(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},4833:(t,e,n)=>{var r=n(6127),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},9334:t=>{t.exports=function(t){return function(e){return t(e)}}},2231:(t,e,n)=>{var r=n(6070);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},6747:(t,e,n)=>{var r=n(9785),i=n(318),o=n(3419),s=n(5567);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(s(t))}},9158:(t,e,n)=>{var r=n(5733);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},4159:(t,e,n)=>{var r=n(8817);t.exports=function(t,e){for(var n=t.length;n--&&r(e,t[n],0)>-1;);return n}},3574:(t,e,n)=>{var r=n(8817);t.exports=function(t,e){for(var n=-1,i=t.length;++n<i&&r(e,t[n],0)>-1;);return n}},5159:(t,e,n)=>{var r=n(1928),i=n(8799);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,l=e.length;++a<l;){var c=e[a],u=o?o(n[c],t[c],c,n,t):void 0;void 0===u&&(u=t[c]),s?i(n,c,u):r(n,c,u)}return n}},4937:(t,e,n)=>{var r=n(7400)["__core-js_shared__"];t.exports=r},7270:(t,e,n)=>{var r=n(1197),i=n(7535);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var l=n[r];l&&t(e,l,r,s)}return e}))}},2690:(t,e,n)=>{var r=n(9158),i=n(5348),o=n(3528),s=n(5567);t.exports=function(t){return function(e){e=s(e);var n=i(e)?o(e):void 0,a=n?n[0]:e.charAt(0),l=n?r(n,1).join(""):e.slice(1);return a[t]()+l}}},8267:(t,e,n)=>{var r=n(6446),i=n(9689),o=n(3254),s=RegExp("['’]","g");t.exports=function(t){return function(e){return r(o(i(e).replace(s,"")),t,"")}}},7e3:(t,e,n)=>{var r=n(5638),i=Object.prototype,o=i.hasOwnProperty;t.exports=function(t,e,n,s){return void 0===t||r(t,i[n])&&!o.call(s,n)?e:t}},4248:(t,e,n)=>{var r=n(7646)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});t.exports=r},2630:(t,e,n)=>{var r=n(1822),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},5022:(t,e,n)=>{var r=n(7646)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});t.exports=r},7308:t=>{var e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};t.exports=function(t){return"\\"+e[t]}},4288:(t,e,n)=>{var r=n(9754),i=n(1871),o=n(3132);t.exports=function(t){return o(i(t,void 0,r),t+"")}},9120:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},5899:(t,e,n)=>{var r=n(4479);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},1822:(t,e,n)=>{var r=n(6729),i=n(5371);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},2173:(t,e,n)=>{var r=n(8023)(Object.getPrototypeOf,Object);t.exports=r},4840:(t,e,n)=>{var r=n(6539),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},5371:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},5348:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},3909:t=>{var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return e.test(t)}},7753:(t,e,n)=>{var r=n(5718);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},2452:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},2115:(t,e,n)=>{var r=n(5718),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},8256:(t,e,n)=>{var r=n(5718),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},7426:(t,e,n)=>{var r=n(5718);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},2889:(t,e,n)=>{var r=n(6539),i=n(2900),o=n(9785),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(s&&t&&t[s])}},2383:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},7535:(t,e,n)=>{var r=n(5638),i=n(68),o=n(2383),s=n(1611);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},318:(t,e,n)=>{var r=n(9785),i=n(5193),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||s.test(t)||!o.test(t)||null!=e&&t in Object(e)}},4479:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},9678:(t,e,n)=>{var r,i=n(4937),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},6016:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},9417:t=>{t.exports=function(){this.__data__=[],this.size=0}},2470:(t,e,n)=>{var r=n(3382),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},6165:(t,e,n)=>{var r=n(3382);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},1873:(t,e,n)=>{var r=n(3382);t.exports=function(t){return r(this.__data__,t)>-1}},2556:(t,e,n)=>{var r=n(3382);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},9448:(t,e,n)=>{var r=n(6586),i=n(6301),o=n(4538);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7738:(t,e,n)=>{var r=n(5899);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},6575:(t,e,n)=>{var r=n(5899);t.exports=function(t){return r(this,t).get(t)}},7238:(t,e,n)=>{var r=n(5899);t.exports=function(t){return r(this,t).has(t)}},8738:(t,e,n)=>{var r=n(5899);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},2941:(t,e,n)=>{var r=n(6651);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},5718:(t,e,n)=>{var r=n(1822)(Object,"create");t.exports=r},962:(t,e,n)=>{var r=n(8023)(Object.keys,Object);t.exports=r},1586:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},8125:(t,e,n)=>{t=n.nmd(t);var r=n(9120),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a},1258:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},8023:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},1871:(t,e,n)=>{var r=n(9349),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),l=Array(a);++s<a;)l[s]=o[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=o[s];return c[e]=n(l),r(t,this,c)}}},9886:t=>{t.exports=/<%-([\s\S]+?)%>/g},1321:t=>{t.exports=/<%([\s\S]+?)%>/g},8611:t=>{t.exports=/<%=([\s\S]+?)%>/g},7400:(t,e,n)=>{var r=n(9120),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},3132:(t,e,n)=>{var r=n(4459),i=n(9591)(r);t.exports=i},9591:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},8263:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},3528:(t,e,n)=>{var r=n(5630),i=n(5348),o=n(4890);t.exports=function(t){return i(t)?o(t):r(t)}},3419:(t,e,n)=>{var r=n(2941),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=s},7948:(t,e,n)=>{var r=n(5193);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},6532:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},6127:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},4890:t=>{var e="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+e+"|"+n+")?",a="[\\ufe0e\\ufe0f]?",l=a+s+"(?:\\u200d(?:"+[r,i,o].join("|")+")"+a+s+")*",c="(?:"+[r+e+"?",e,i,o,"[\\ud800-\\udfff]"].join("|")+")",u=RegExp(n+"(?="+n+")|"+c+l,"g");t.exports=function(t){return t.match(u)||[]}},7025:t=>{var e="a-z\\xdf-\\xf6\\xf8-\\xff",n="A-Z\\xc0-\\xd6\\xd8-\\xde",r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+r+"]",o="\\d+",s="["+e+"]",a="[^\\ud800-\\udfff"+r+o+"\\u2700-\\u27bf"+e+n+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",u="["+n+"]",h="(?:"+s+"|"+a+")",f="(?:"+u+"|"+a+")",d="(?:['’](?:d|ll|m|re|s|t|ve))?",p="(?:['’](?:D|LL|M|RE|S|T|VE))?",g="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",m="[\\ufe0e\\ufe0f]?",O=m+g+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",l,c].join("|")+")"+m+g+")*",v="(?:"+["[\\u2700-\\u27bf]",l,c].join("|")+")"+O,b=RegExp([u+"?"+s+"+"+d+"(?="+[i,u,"$"].join("|")+")",f+"+"+p+"(?="+[i,u+h,"$"].join("|")+")",u+"?"+h+"+"+d,u+"+"+p,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,v].join("|"),"g");t.exports=function(t){return t.match(b)||[]}},1827:(t,e,n)=>{var r=n(5159),i=n(7270),o=n(3893),s=i((function(t,e,n,i){r(e,o(e),t,i)}));t.exports=s},1939:(t,e,n)=>{var r=n(8419),i=n(4288)(r);t.exports=i},7636:(t,e,n)=>{var r=n(9349),i=n(1197),o=n(5446),s=i((function(t,e){try{return r(t,void 0,e)}catch(t){return o(t)?t:new Error(t)}}));t.exports=s},7429:(t,e,n)=>{var r=n(8052),i=n(8267)((function(t,e,n){return e=e.toLowerCase(),t+(n?r(e):e)}));t.exports=i},8052:(t,e,n)=>{var r=n(5567),i=n(6744);t.exports=function(t){return i(r(t).toLowerCase())}},551:t=>{t.exports=function(t){return function(){return t}}},9689:(t,e,n)=>{var r=n(4248),i=n(5567),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=i(t))&&t.replace(o,r).replace(s,"")}},5638:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},4565:(t,e,n)=>{var r=n(5022),i=n(5567),o=/[&<>"']/g,s=RegExp(o.source);t.exports=function(t){return(t=i(t))&&s.test(t)?t.replace(o,r):t}},9754:(t,e,n)=>{var r=n(3545);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},9729:(t,e,n)=>{var r=n(9867);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},1137:t=>{t.exports=function(t){return t}},2900:(t,e,n)=>{var r=n(5829),i=n(2360),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=l},9785:t=>{var e=Array.isArray;t.exports=e},68:(t,e,n)=>{var r=n(8338),i=n(4194);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},3854:(t,e,n)=>{t=n.nmd(t);var r=n(7400),i=n(7714),o=e&&!e.nodeType&&e,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.Buffer:void 0,l=(a?a.isBuffer:void 0)||i;t.exports=l},5446:(t,e,n)=>{var r=n(9736),i=n(2360),o=n(861);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!o(t)}},8338:(t,e,n)=>{var r=n(9736),i=n(1611);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},4194:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},1611:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},2360:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},861:(t,e,n)=>{var r=n(9736),i=n(2173),o=n(2360),s=Function.prototype,a=Object.prototype,l=s.toString,c=a.hasOwnProperty,u=l.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},5193:(t,e,n)=>{var r=n(9736),i=n(2360);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},8519:(t,e,n)=>{var r=n(6972),i=n(9334),o=n(8125),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},98:(t,e,n)=>{var r=n(8213),i=n(186),o=n(68);t.exports=function(t){return o(t)?r(t):i(t)}},3893:(t,e,n)=>{var r=n(8213),i=n(9464),o=n(68);t.exports=function(t){return o(t)?r(t,!0):i(t)}},8784:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",l=32,c=128,u=1/0,h=9007199254740991,f=NaN,d=4294967295,p=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],g="[object Arguments]",m="[object Array]",O="[object Boolean]",v="[object Date]",b="[object Error]",y="[object Function]",w="[object GeneratorFunction]",x="[object Map]",S="[object Number]",k="[object Object]",C="[object Promise]",Q="[object RegExp]",_="[object Set]",P="[object String]",E="[object Symbol]",T="[object WeakMap]",$="[object ArrayBuffer]",R="[object DataView]",M="[object Float32Array]",A="[object Float64Array]",D="[object Int8Array]",j="[object Int16Array]",q="[object Int32Array]",X="[object Uint8Array]",V="[object Uint8ClampedArray]",U="[object Uint16Array]",Z="[object Uint32Array]",I=/\b__p \+= '';/g,N=/\b(__p \+=) '' \+/g,B=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,L=RegExp(z.source),G=RegExp(W.source),F=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,H=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,K=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,ut=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,Ot=/^(?:0|[1-9]\d*)$/,vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,yt=/['\n\r\u2028\u2029\\]/g,wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="a-z\\xdf-\\xf6\\xf8-\\xff",St="A-Z\\xc0-\\xd6\\xd8-\\xde",kt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ct="["+kt+"]",Qt="["+wt+"]",_t="\\d+",Pt="["+xt+"]",Et="[^\\ud800-\\udfff"+kt+_t+"\\u2700-\\u27bf"+xt+St+"]",Tt="\\ud83c[\\udffb-\\udfff]",$t="[^\\ud800-\\udfff]",Rt="(?:\\ud83c[\\udde6-\\uddff]){2}",Mt="[\\ud800-\\udbff][\\udc00-\\udfff]",At="["+St+"]",Dt="(?:"+Pt+"|"+Et+")",jt="(?:"+At+"|"+Et+")",qt="(?:['’](?:d|ll|m|re|s|t|ve))?",Xt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Vt="(?:"+Qt+"|"+Tt+")?",Ut="[\\ufe0e\\ufe0f]?",Zt=Ut+Vt+"(?:\\u200d(?:"+[$t,Rt,Mt].join("|")+")"+Ut+Vt+")*",It="(?:"+["[\\u2700-\\u27bf]",Rt,Mt].join("|")+")"+Zt,Nt="(?:"+[$t+Qt+"?",Qt,Rt,Mt,"[\\ud800-\\udfff]"].join("|")+")",Bt=RegExp("['’]","g"),zt=RegExp(Qt,"g"),Wt=RegExp(Tt+"(?="+Tt+")|"+Nt+Zt,"g"),Lt=RegExp([At+"?"+Pt+"+"+qt+"(?="+[Ct,At,"$"].join("|")+")",jt+"+"+Xt+"(?="+[Ct,At+Dt,"$"].join("|")+")",At+"?"+Dt+"+"+qt,At+"+"+Xt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_t,It].join("|"),"g"),Gt=RegExp("[\\u200d\\ud800-\\udfff"+wt+"\\ufe0e\\ufe0f]"),Ft=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ht=-1,Jt={};Jt[M]=Jt[A]=Jt[D]=Jt[j]=Jt[q]=Jt[X]=Jt[V]=Jt[U]=Jt[Z]=!0,Jt[g]=Jt[m]=Jt[$]=Jt[O]=Jt[R]=Jt[v]=Jt[b]=Jt[y]=Jt[x]=Jt[S]=Jt[k]=Jt[Q]=Jt[_]=Jt[P]=Jt[T]=!1;var Kt={};Kt[g]=Kt[m]=Kt[$]=Kt[R]=Kt[O]=Kt[v]=Kt[M]=Kt[A]=Kt[D]=Kt[j]=Kt[q]=Kt[x]=Kt[S]=Kt[k]=Kt[Q]=Kt[_]=Kt[P]=Kt[E]=Kt[X]=Kt[V]=Kt[U]=Kt[Z]=!0,Kt[b]=Kt[y]=Kt[T]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ie="object"==typeof self&&self&&self.Object===Object&&self,oe=re||ie||Function("return this")(),se=e&&!e.nodeType&&e,ae=se&&t&&!t.nodeType&&t,le=ae&&ae.exports===se,ce=le&&re.process,ue=function(){try{return ae&&ae.require&&ae.require("util").types||ce&&ce.binding&&ce.binding("util")}catch(t){}}(),he=ue&&ue.isArrayBuffer,fe=ue&&ue.isDate,de=ue&&ue.isMap,pe=ue&&ue.isRegExp,ge=ue&&ue.isSet,me=ue&&ue.isTypedArray;function Oe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ve(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function be(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function ye(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function we(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function xe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Se(t,e){return!(null==t||!t.length)&&Me(t,e,0)>-1}function ke(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ce(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Qe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function _e(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Pe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ee(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Te=qe("length");function $e(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Re(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Me(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Re(t,De,n)}function Ae(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function De(t){return t!=t}function je(t,e){var n=null==t?0:t.length;return n?Ue(t,e)/n:f}function qe(t){return function(e){return null==e?i:e[t]}}function Xe(t){return function(e){return null==t?i:t[e]}}function Ve(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ue(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function Ze(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ie(t){return t?t.slice(0,an(t)+1).replace(rt,""):t}function Ne(t){return function(e){return t(e)}}function Be(t,e){return Ce(e,(function(e){return t[e]}))}function ze(t,e){return t.has(e)}function We(t,e){for(var n=-1,r=t.length;++n<r&&Me(e,t[n],0)>-1;);return n}function Le(t,e){for(var n=t.length;n--&&Me(e,t[n],0)>-1;);return n}function Ge(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Fe=Xe({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Ye=Xe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function He(t){return"\\"+te[t]}function Je(t){return Gt.test(t)}function Ke(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return Je(t)?function(t){for(var e=Wt.lastIndex=0;Wt.test(t);)++e;return e}(t):Te(t)}function sn(t){return Je(t)?function(t){return t.match(Wt)||[]}(t):function(t){return t.split("")}(t)}function an(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var ln=Xe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cn=function t(e){var n,r=(e=null==e?oe:cn.defaults(oe.Object(),e,cn.pick(oe,Yt))).Array,it=e.Date,wt=e.Error,xt=e.Function,St=e.Math,kt=e.Object,Ct=e.RegExp,Qt=e.String,_t=e.TypeError,Pt=r.prototype,Et=xt.prototype,Tt=kt.prototype,$t=e["__core-js_shared__"],Rt=Et.toString,Mt=Tt.hasOwnProperty,At=0,Dt=(n=/[^.]+$/.exec($t&&$t.keys&&$t.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",jt=Tt.toString,qt=Rt.call(kt),Xt=oe._,Vt=Ct("^"+Rt.call(Mt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=le?e.Buffer:i,Zt=e.Symbol,It=e.Uint8Array,Nt=Ut?Ut.allocUnsafe:i,Wt=tn(kt.getPrototypeOf,kt),Gt=kt.create,te=Tt.propertyIsEnumerable,re=Pt.splice,ie=Zt?Zt.isConcatSpreadable:i,se=Zt?Zt.iterator:i,ae=Zt?Zt.toStringTag:i,ce=function(){try{var t=co(kt,"defineProperty");return t({},"",{}),t}catch(t){}}(),ue=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,Te=it&&it.now!==oe.Date.now&&it.now,Xe=e.setTimeout!==oe.setTimeout&&e.setTimeout,un=St.ceil,hn=St.floor,fn=kt.getOwnPropertySymbols,dn=Ut?Ut.isBuffer:i,pn=e.isFinite,gn=Pt.join,mn=tn(kt.keys,kt),On=St.max,vn=St.min,bn=it.now,yn=e.parseInt,wn=St.random,xn=Pt.reverse,Sn=co(e,"DataView"),kn=co(e,"Map"),Cn=co(e,"Promise"),Qn=co(e,"Set"),_n=co(e,"WeakMap"),Pn=co(kt,"create"),En=_n&&new _n,Tn={},$n=Vo(Sn),Rn=Vo(kn),Mn=Vo(Cn),An=Vo(Qn),Dn=Vo(_n),jn=Zt?Zt.prototype:i,qn=jn?jn.valueOf:i,Xn=jn?jn.toString:i;function Vn(t){if(na(t)&&!zs(t)&&!(t instanceof Nn)){if(t instanceof In)return t;if(Mt.call(t,"__wrapped__"))return Uo(t)}return new In(t)}var Un=function(){function t(){}return function(e){if(!ea(e))return{};if(Gt)return Gt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Zn(){}function In(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Nn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Bn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function zn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ln(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Wn;++e<n;)this.add(t[e])}function Gn(t){var e=this.__data__=new zn(t);this.size=e.size}function Fn(t,e){var n=zs(t),r=!n&&Bs(t),i=!n&&!r&&Fs(t),o=!n&&!r&&!i&&ua(t),s=n||r||i||o,a=s?Ze(t.length,Qt):[],l=a.length;for(var c in t)!e&&!Mt.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Oo(c,l))||a.push(c);return a}function Yn(t){var e=t.length;return e?t[Wr(0,e-1)]:i}function Hn(t,e){return Ao(_i(t),sr(e,0,t.length))}function Jn(t){return Ao(_i(t))}function Kn(t,e,n){(n!==i&&!Zs(t[e],n)||n===i&&!(e in t))&&ir(t,e,n)}function tr(t,e,n){var r=t[e];Mt.call(t,e)&&Zs(r,n)&&(n!==i||e in t)||ir(t,e,n)}function er(t,e){for(var n=t.length;n--;)if(Zs(t[n][0],e))return n;return-1}function nr(t,e,n,r){return hr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function rr(t,e){return t&&Pi(e,Ra(e),t)}function ir(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:_a(t,e[n]);return s}function sr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,s){var a,l=1&e,c=2&e,u=4&e;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!ea(t))return t;var h=zs(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return _i(t,a)}else{var f=fo(t),d=f==y||f==w;if(Fs(t))return wi(t,l);if(f==k||f==g||d&&!o){if(a=c||d?{}:go(t),!l)return c?function(t,e){return Pi(t,ho(t),e)}(t,function(t,e){return t&&Pi(e,Ma(e),t)}(a,t)):function(t,e){return Pi(t,uo(t),e)}(t,rr(a,t))}else{if(!Kt[f])return o?t:{};a=function(t,e,n){var r,i=t.constructor;switch(e){case $:return xi(t);case O:case v:return new i(+t);case R:return function(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case M:case A:case D:case j:case q:case X:case V:case U:case Z:return Si(t,n);case x:return new i;case S:case P:return new i(t);case Q:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case _:return new i;case E:return r=t,qn?kt(qn.call(r)):{}}}(t,f,l)}}s||(s=new Gn);var p=s.get(t);if(p)return p;s.set(t,a),aa(t)?t.forEach((function(r){a.add(ar(r,e,n,r,t,s))})):ra(t)&&t.forEach((function(r,i){a.set(i,ar(r,e,n,i,t,s))}));var m=h?i:(u?c?no:eo:c?Ma:Ra)(t);return be(m||t,(function(r,i){m&&(r=t[i=r]),tr(a,i,ar(r,e,n,i,t,s))})),a}function lr(t,e,n){var r=n.length;if(null==t)return!r;for(t=kt(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function cr(t,e,n){if("function"!=typeof t)throw new _t(o);return To((function(){t.apply(i,n)}),e)}function ur(t,e,n,r){var i=-1,o=Se,s=!0,a=t.length,l=[],c=e.length;if(!a)return l;n&&(e=Ce(e,Ne(n))),r?(o=ke,s=!1):e.length>=200&&(o=ze,s=!1,e=new Ln(e));t:for(;++i<a;){var u=t[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,s&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;l.push(u)}else o(e,h,r)||l.push(u)}return l}Vn.templateSettings={escape:F,evaluate:Y,interpolate:H,variable:"",imports:{_:Vn}},Vn.prototype=Zn.prototype,Vn.prototype.constructor=Vn,In.prototype=Un(Zn.prototype),In.prototype.constructor=In,Nn.prototype=Un(Zn.prototype),Nn.prototype.constructor=Nn,Bn.prototype.clear=function(){this.__data__=Pn?Pn(null):{},this.size=0},Bn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Bn.prototype.get=function(t){var e=this.__data__;if(Pn){var n=e[t];return n===s?i:n}return Mt.call(e,t)?e[t]:i},Bn.prototype.has=function(t){var e=this.__data__;return Pn?e[t]!==i:Mt.call(e,t)},Bn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Pn&&e===i?s:e,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(t){var e=this.__data__,n=er(e,t);return!(n<0||(n==e.length-1?e.pop():re.call(e,n,1),--this.size,0))},zn.prototype.get=function(t){var e=this.__data__,n=er(e,t);return n<0?i:e[n][1]},zn.prototype.has=function(t){return er(this.__data__,t)>-1},zn.prototype.set=function(t,e){var n=this.__data__,r=er(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Wn.prototype.clear=function(){this.size=0,this.__data__={hash:new Bn,map:new(kn||zn),string:new Bn}},Wn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Wn.prototype.get=function(t){return ao(this,t).get(t)},Wn.prototype.has=function(t){return ao(this,t).has(t)},Wn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Ln.prototype.add=Ln.prototype.push=function(t){return this.__data__.set(t,s),this},Ln.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.clear=function(){this.__data__=new zn,this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Gn.prototype.get=function(t){return this.__data__.get(t)},Gn.prototype.has=function(t){return this.__data__.has(t)},Gn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof zn){var r=n.__data__;if(!kn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Wn(r)}return n.set(t,e),this.size=n.size,this};var hr=$i(br),fr=$i(yr,!0);function dr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function pr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(l===i?a==a&&!ca(a):n(a,l)))var l=a,c=s}return c}function gr(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function mr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=mo),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?mr(a,e-1,n,r,i):Qe(i,a):r||(i[i.length]=a)}return i}var Or=Ri(),vr=Ri(!0);function br(t,e){return t&&Or(t,e,Ra)}function yr(t,e){return t&&vr(t,e,Ra)}function wr(t,e){return xe(e,(function(e){return Js(t[e])}))}function xr(t,e){for(var n=0,r=(e=Oi(e,t)).length;null!=t&&n<r;)t=t[Xo(e[n++])];return n&&n==r?t:i}function Sr(t,e,n){var r=e(t);return zs(t)?r:Qe(r,n(t))}function kr(t){return null==t?t===i?"[object Undefined]":"[object Null]":ae&&ae in kt(t)?function(t){var e=Mt.call(t,ae),n=t[ae];try{t[ae]=i;var r=!0}catch(t){}var o=jt.call(t);return r&&(e?t[ae]=n:delete t[ae]),o}(t):function(t){return jt.call(t)}(t)}function Cr(t,e){return t>e}function Qr(t,e){return null!=t&&Mt.call(t,e)}function _r(t,e){return null!=t&&e in kt(t)}function Pr(t,e,n){for(var o=n?ke:Se,s=t[0].length,a=t.length,l=a,c=r(a),u=1/0,h=[];l--;){var f=t[l];l&&e&&(f=Ce(f,Ne(e))),u=vn(f.length,u),c[l]=!n&&(e||s>=120&&f.length>=120)?new Ln(l&&f):i}f=t[0];var d=-1,p=c[0];t:for(;++d<s&&h.length<u;){var g=f[d],m=e?e(g):g;if(g=n||0!==g?g:0,!(p?ze(p,m):o(h,m,n))){for(l=a;--l;){var O=c[l];if(!(O?ze(O,m):o(t[l],m,n)))continue t}p&&p.push(m),h.push(g)}}return h}function Er(t,e,n){var r=null==(t=Qo(t,e=Oi(e,t)))?t:t[Xo(Ho(e))];return null==r?i:Oe(r,t,n)}function Tr(t){return na(t)&&kr(t)==g}function $r(t,e,n,r,o){return t===e||(null==t||null==e||!na(t)&&!na(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=zs(t),l=zs(e),c=a?m:fo(t),u=l?m:fo(e),h=(c=c==g?k:c)==k,f=(u=u==g?k:u)==k,d=c==u;if(d&&Fs(t)){if(!Fs(e))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new Gn),a||ua(t)?Ki(t,e,n,r,o,s):function(t,e,n,r,i,o,s){switch(n){case R:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $:return!(t.byteLength!=e.byteLength||!o(new It(t),new It(e)));case O:case v:case S:return Zs(+t,+e);case b:return t.name==e.name&&t.message==e.message;case Q:case P:return t==e+"";case x:var a=Ke;case _:var l=1&r;if(a||(a=nn),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var u=Ki(a(t),a(e),r,i,o,s);return s.delete(t),u;case E:if(qn)return qn.call(t)==qn.call(e)}return!1}(t,e,c,n,r,o,s);if(!(1&n)){var p=h&&Mt.call(t,"__wrapped__"),y=f&&Mt.call(e,"__wrapped__");if(p||y){var w=p?t.value():t,C=y?e.value():e;return s||(s=new Gn),o(w,C,n,r,s)}}return!!d&&(s||(s=new Gn),function(t,e,n,r,o,s){var a=1&n,l=eo(t),c=l.length;if(c!=eo(e).length&&!a)return!1;for(var u=c;u--;){var h=l[u];if(!(a?h in e:Mt.call(e,h)))return!1}var f=s.get(t),d=s.get(e);if(f&&d)return f==e&&d==t;var p=!0;s.set(t,e),s.set(e,t);for(var g=a;++u<c;){var m=t[h=l[u]],O=e[h];if(r)var v=a?r(O,m,h,e,t,s):r(m,O,h,t,e,s);if(!(v===i?m===O||o(m,O,n,r,s):v)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,r,o,s))}(t,e,n,r,$r,o))}function Rr(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=kt(t);o--;){var l=n[o];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<s;){var c=(l=n[o])[0],u=t[c],h=l[1];if(a&&l[2]){if(u===i&&!(c in t))return!1}else{var f=new Gn;if(r)var d=r(u,h,c,t,e,f);if(!(d===i?$r(h,u,3,r,f):d))return!1}}return!0}function Mr(t){return!(!ea(t)||(e=t,Dt&&Dt in e))&&(Js(t)?Vt:gt).test(Vo(t));var e}function Ar(t){return"function"==typeof t?t:null==t?il:"object"==typeof t?zs(t)?Vr(t[0],t[1]):Xr(t):dl(t)}function Dr(t){if(!xo(t))return mn(t);var e=[];for(var n in kt(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function jr(t,e){return t<e}function qr(t,e){var n=-1,i=Ls(t)?r(t.length):[];return hr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Xr(t){var e=lo(t);return 1==e.length&&e[0][2]?ko(e[0][0],e[0][1]):function(n){return n===t||Rr(n,t,e)}}function Vr(t,e){return bo(t)&&So(e)?ko(Xo(t),e):function(n){var r=_a(n,t);return r===i&&r===e?Pa(n,t):$r(e,r,3)}}function Ur(t,e,n,r,o){t!==e&&Or(e,(function(s,a){if(o||(o=new Gn),ea(s))!function(t,e,n,r,o,s,a){var l=Po(t,n),c=Po(e,n),u=a.get(c);if(u)Kn(t,n,u);else{var h=s?s(l,c,n+"",t,e,a):i,f=h===i;if(f){var d=zs(c),p=!d&&Fs(c),g=!d&&!p&&ua(c);h=c,d||p||g?zs(l)?h=l:Gs(l)?h=_i(l):p?(f=!1,h=wi(c,!0)):g?(f=!1,h=Si(c,!0)):h=[]:oa(c)||Bs(c)?(h=l,Bs(l)?h=va(l):ea(l)&&!Js(l)||(h=go(c))):f=!1}f&&(a.set(c,h),o(h,c,r,s,a),a.delete(c)),Kn(t,n,h)}}(t,e,a,n,Ur,r,o);else{var l=r?r(Po(t,a),s,a+"",t,e,o):i;l===i&&(l=s),Kn(t,a,l)}}),Ma)}function Zr(t,e){var n=t.length;if(n)return Oo(e+=e<0?n:0,n)?t[e]:i}function Ir(t,e,n){e=e.length?Ce(e,(function(t){return zs(t)?function(e){return xr(e,1===t.length?t[0]:t)}:t})):[il];var r=-1;e=Ce(e,Ne(so()));var i=qr(t,(function(t,n,i){var o=Ce(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var l=ki(i[r],o[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Nr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=xr(t,s);n(a,s)&&Hr(o,Oi(s,t),a)}return o}function Br(t,e,n,r){var i=r?Ae:Me,o=-1,s=e.length,a=t;for(t===e&&(e=_i(e)),n&&(a=Ce(t,Ne(n)));++o<s;)for(var l=0,c=e[o],u=n?n(c):c;(l=i(a,u,l,r))>-1;)a!==t&&re.call(a,l,1),re.call(t,l,1);return t}function zr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;Oo(i)?re.call(t,i,1):ci(t,i)}}return t}function Wr(t,e){return t+hn(wn()*(e-t+1))}function Lr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=hn(e/2))&&(t+=t)}while(e);return n}function Gr(t,e){return $o(Co(t,e,il),t+"")}function Fr(t){return Yn(Za(t))}function Yr(t,e){var n=Za(t);return Ao(n,sr(e,0,n.length))}function Hr(t,e,n,r){if(!ea(t))return t;for(var o=-1,s=(e=Oi(e,t)).length,a=s-1,l=t;null!=l&&++o<s;){var c=Xo(e[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var h=l[c];(u=r?r(h,c,l):i)===i&&(u=ea(h)?h:Oo(e[o+1])?[]:{})}tr(l,c,u),l=l[c]}return t}var Jr=En?function(t,e){return En.set(t,e),t}:il,Kr=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:il;function ti(t){return Ao(Za(t))}function ei(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function ni(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ri(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!ca(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ii(t,e,il,n)}function ii(t,e,n,r){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,l=null===e,c=ca(e),u=e===i;o<s;){var h=hn((o+s)/2),f=n(t[h]),d=f!==i,p=null===f,g=f==f,m=ca(f);if(a)var O=r||g;else O=u?g&&(r||d):l?g&&d&&(r||!p):c?g&&d&&!p&&(r||!m):!p&&!m&&(r?f<=e:f<e);O?o=h+1:s=h}return vn(s,4294967294)}function oi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!Zs(a,l)){var l=a;o[i++]=0===s?0:s}}return o}function si(t){return"number"==typeof t?t:ca(t)?f:+t}function ai(t){if("string"==typeof t)return t;if(zs(t))return Ce(t,ai)+"";if(ca(t))return Xn?Xn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function li(t,e,n){var r=-1,i=Se,o=t.length,s=!0,a=[],l=a;if(n)s=!1,i=ke;else if(o>=200){var c=e?null:Li(t);if(c)return nn(c);s=!1,i=ze,l=new Ln}else l=e?[]:a;t:for(;++r<o;){var u=t[r],h=e?e(u):u;if(u=n||0!==u?u:0,s&&h==h){for(var f=l.length;f--;)if(l[f]===h)continue t;e&&l.push(h),a.push(u)}else i(l,h,n)||(l!==a&&l.push(h),a.push(u))}return a}function ci(t,e){return null==(t=Qo(t,e=Oi(e,t)))||delete t[Xo(Ho(e))]}function ui(t,e,n,r){return Hr(t,e,n(xr(t,e)),r)}function hi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ei(t,r?0:o,r?o+1:i):ei(t,r?o+1:0,r?i:o)}function fi(t,e){var n=t;return n instanceof Nn&&(n=n.value()),_e(e,(function(t,e){return e.func.apply(e.thisArg,Qe([t],e.args))}),n)}function di(t,e,n){var i=t.length;if(i<2)return i?li(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],l=-1;++l<i;)l!=o&&(s[o]=ur(s[o]||a,t[l],e,n));return li(mr(s,1),e,n)}function pi(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var l=r<s?e[r]:i;n(a,t[r],l)}return a}function gi(t){return Gs(t)?t:[]}function mi(t){return"function"==typeof t?t:il}function Oi(t,e){return zs(t)?t:bo(t,e)?[t]:qo(ba(t))}var vi=Gr;function bi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ei(t,e,n)}var yi=ue||function(t){return oe.clearTimeout(t)};function wi(t,e){if(e)return t.slice();var n=t.length,r=Nt?Nt(n):new t.constructor(n);return t.copy(r),r}function xi(t){var e=new t.constructor(t.byteLength);return new It(e).set(new It(t)),e}function Si(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ki(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=ca(t),a=e!==i,l=null===e,c=e==e,u=ca(e);if(!l&&!u&&!s&&t>e||s&&a&&c&&!l&&!u||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!u&&t<e||u&&n&&o&&!r&&!s||l&&n&&o||!a&&o||!c)return-1}return 0}function Ci(t,e,n,i){for(var o=-1,s=t.length,a=n.length,l=-1,c=e.length,u=On(s-a,0),h=r(c+u),f=!i;++l<c;)h[l]=e[l];for(;++o<a;)(f||o<s)&&(h[n[o]]=t[o]);for(;u--;)h[l++]=t[o++];return h}function Qi(t,e,n,i){for(var o=-1,s=t.length,a=-1,l=n.length,c=-1,u=e.length,h=On(s-l,0),f=r(h+u),d=!i;++o<h;)f[o]=t[o];for(var p=o;++c<u;)f[p+c]=e[c];for(;++a<l;)(d||o<s)&&(f[p+n[a]]=t[o++]);return f}function _i(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Pi(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var l=e[s],c=r?r(n[l],t[l],l,n,t):i;c===i&&(c=t[l]),o?ir(n,l,c):tr(n,l,c)}return n}function Ei(t,e){return function(n,r){var i=zs(n)?ve:nr,o=e?e():{};return i(n,t,so(r,2),o)}}function Ti(t){return Gr((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&vo(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=kt(e);++r<o;){var l=n[r];l&&t(e,l,r,s)}return e}))}function $i(t,e){return function(n,r){if(null==n)return n;if(!Ls(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=kt(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Ri(t){return function(e,n,r){for(var i=-1,o=kt(e),s=r(e),a=s.length;a--;){var l=s[t?a:++i];if(!1===n(o[l],l,o))break}return e}}function Mi(t){return function(e){var n=Je(e=ba(e))?sn(e):i,r=n?n[0]:e.charAt(0),o=n?bi(n,1).join(""):e.slice(1);return r[t]()+o}}function Ai(t){return function(e){return _e(Ja(Ba(e).replace(Bt,"")),t,"")}}function Di(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Un(t.prototype),r=t.apply(n,e);return ea(r)?r:n}}function ji(t){return function(e,n,r){var o=kt(e);if(!Ls(e)){var s=so(n,3);e=Ra(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function qi(t){return to((function(e){var n=e.length,r=n,s=In.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new _t(o);if(s&&!l&&"wrapper"==io(a))var l=new In([],!0)}for(r=l?r:n;++r<n;){var c=io(a=e[r]),u="wrapper"==c?ro(a):i;l=u&&yo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[io(u[0])].apply(l,u[3]):1==a.length&&yo(a)?l[c]():l.thru(a)}return function(){var t=arguments,r=t[0];if(l&&1==t.length&&zs(r))return l.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Xi(t,e,n,o,s,a,l,u,h,f){var d=e&c,p=1&e,g=2&e,m=24&e,O=512&e,v=g?i:Di(t);return function i(){for(var c=arguments.length,b=r(c),y=c;y--;)b[y]=arguments[y];if(m)var w=oo(i),x=Ge(b,w);if(o&&(b=Ci(b,o,s,m)),a&&(b=Qi(b,a,l,m)),c-=x,m&&c<f){var S=en(b,w);return zi(t,e,Xi,i.placeholder,n,b,S,u,h,f-c)}var k=p?n:this,C=g?k[t]:t;return c=b.length,u?b=_o(b,u):O&&c>1&&b.reverse(),d&&h<c&&(b.length=h),this&&this!==oe&&this instanceof i&&(C=v||Di(C)),C.apply(k,b)}}function Vi(t,e){return function(n,r){return function(t,e,n,r){return br(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ui(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=si(n),r=si(r)),o=t(n,r)}return o}}function Zi(t){return to((function(e){return e=Ce(e,Ne(so())),Gr((function(n){var r=this;return t(e,(function(t){return Oe(t,r,n)}))}))}))}function Ii(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?Lr(e,t):e;var r=Lr(e,un(t/on(e)));return Je(e)?bi(sn(r),0,t).join(""):r.slice(0,t)}function Ni(t){return function(e,n,o){return o&&"number"!=typeof o&&vo(e,n,o)&&(n=o=i),e=pa(e),n===i?(n=e,e=0):n=pa(n),function(t,e,n,i){for(var o=-1,s=On(un((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:pa(o),t)}}function Bi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Oa(e),n=Oa(n)),t(e,n)}}function zi(t,e,n,r,o,s,a,c,u,h){var f=8&e;e|=f?l:64,4&(e&=~(f?64:l))||(e&=-4);var d=[t,e,o,f?s:i,f?a:i,f?i:s,f?i:a,c,u,h],p=n.apply(i,d);return yo(t)&&Eo(p,d),p.placeholder=r,Ro(p,t,e)}function Wi(t){var e=St[t];return function(t,n){if(t=Oa(t),(n=null==n?0:vn(ga(n),292))&&pn(t)){var r=(ba(t)+"e").split("e");return+((r=(ba(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Li=Qn&&1/nn(new Qn([,-0]))[1]==u?function(t){return new Qn(t)}:cl;function Gi(t){return function(e){var n=fo(e);return n==x?Ke(e):n==_?rn(e):function(t,e){return Ce(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Fi(t,e,n,s,u,h,f,d){var p=2&e;if(!p&&"function"!=typeof t)throw new _t(o);var g=s?s.length:0;if(g||(e&=-97,s=u=i),f=f===i?f:On(ga(f),0),d=d===i?d:ga(d),g-=u?u.length:0,64&e){var m=s,O=u;s=u=i}var v=p?i:ro(t),b=[t,e,n,s,u,m,O,h,f,d];if(v&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var u=t[3];t[3]=u?Ci(u,l,e[4]):l,t[4]=u?en(t[3],a):e[4]}(l=e[5])&&(u=t[5],t[5]=u?Qi(u,l,e[6]):l,t[6]=u?en(t[5],a):e[6]),(l=e[7])&&(t[7]=l),r&c&&(t[8]=null==t[8]?e[8]:vn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,v),t=b[0],e=b[1],n=b[2],s=b[3],u=b[4],!(d=b[9]=b[9]===i?p?0:t.length:On(b[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||16==e?function(t,e,n){var o=Di(t);return function s(){for(var a=arguments.length,l=r(a),c=a,u=oo(s);c--;)l[c]=arguments[c];var h=a<3&&l[0]!==u&&l[a-1]!==u?[]:en(l,u);return(a-=h.length)<n?zi(t,e,Xi,s.placeholder,i,l,h,i,i,n-a):Oe(this&&this!==oe&&this instanceof s?o:t,this,l)}}(t,e,d):e!=l&&33!=e||u.length?Xi.apply(i,b):function(t,e,n,i){var o=1&e,s=Di(t);return function e(){for(var a=-1,l=arguments.length,c=-1,u=i.length,h=r(u+l),f=this&&this!==oe&&this instanceof e?s:t;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++a];return Oe(f,o?n:this,h)}}(t,e,n,s);else var y=function(t,e,n){var r=1&e,i=Di(t);return function e(){return(this&&this!==oe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Ro((v?Jr:Eo)(y,b),t,e)}function Yi(t,e,n,r){return t===i||Zs(t,Tt[n])&&!Mt.call(r,n)?e:t}function Hi(t,e,n,r,o,s){return ea(t)&&ea(e)&&(s.set(e,t),Ur(t,e,i,Hi,s),s.delete(e)),t}function Ji(t){return oa(t)?i:t}function Ki(t,e,n,r,o,s){var a=1&n,l=t.length,c=e.length;if(l!=c&&!(a&&c>l))return!1;var u=s.get(t),h=s.get(e);if(u&&h)return u==e&&h==t;var f=-1,d=!0,p=2&n?new Ln:i;for(s.set(t,e),s.set(e,t);++f<l;){var g=t[f],m=e[f];if(r)var O=a?r(m,g,f,e,t,s):r(g,m,f,t,e,s);if(O!==i){if(O)continue;d=!1;break}if(p){if(!Ee(e,(function(t,e){if(!ze(p,e)&&(g===t||o(g,t,n,r,s)))return p.push(e)}))){d=!1;break}}else if(g!==m&&!o(g,m,n,r,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function to(t){return $o(Co(t,i,Wo),t+"")}function eo(t){return Sr(t,Ra,uo)}function no(t){return Sr(t,Ma,ho)}var ro=En?function(t){return En.get(t)}:cl;function io(t){for(var e=t.name+"",n=Tn[e],r=Mt.call(Tn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function oo(t){return(Mt.call(Vn,"placeholder")?Vn:t).placeholder}function so(){var t=Vn.iteratee||ol;return t=t===ol?Ar:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function lo(t){for(var e=Ra(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,So(i)]}return e}function co(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Mr(n)?n:i}var uo=fn?function(t){return null==t?[]:(t=kt(t),xe(fn(t),(function(e){return te.call(t,e)})))}:ml,ho=fn?function(t){for(var e=[];t;)Qe(e,uo(t)),t=Wt(t);return e}:ml,fo=kr;function po(t,e,n){for(var r=-1,i=(e=Oi(e,t)).length,o=!1;++r<i;){var s=Xo(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ta(i)&&Oo(s,i)&&(zs(t)||Bs(t))}function go(t){return"function"!=typeof t.constructor||xo(t)?{}:Un(Wt(t))}function mo(t){return zs(t)||Bs(t)||!!(ie&&t&&t[ie])}function Oo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&Ot.test(t))&&t>-1&&t%1==0&&t<e}function vo(t,e,n){if(!ea(n))return!1;var r=typeof e;return!!("number"==r?Ls(n)&&Oo(e,n.length):"string"==r&&e in n)&&Zs(n[e],t)}function bo(t,e){if(zs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ca(t))||K.test(t)||!J.test(t)||null!=e&&t in kt(e)}function yo(t){var e=io(t),n=Vn[e];if("function"!=typeof n||!(e in Nn.prototype))return!1;if(t===n)return!0;var r=ro(n);return!!r&&t===r[0]}(Sn&&fo(new Sn(new ArrayBuffer(1)))!=R||kn&&fo(new kn)!=x||Cn&&fo(Cn.resolve())!=C||Qn&&fo(new Qn)!=_||_n&&fo(new _n)!=T)&&(fo=function(t){var e=kr(t),n=e==k?t.constructor:i,r=n?Vo(n):"";if(r)switch(r){case $n:return R;case Rn:return x;case Mn:return C;case An:return _;case Dn:return T}return e});var wo=$t?Js:Ol;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Tt)}function So(t){return t==t&&!ea(t)}function ko(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in kt(n))}}function Co(t,e,n){return e=On(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=On(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var l=r(e+1);++o<e;)l[o]=i[o];return l[e]=n(a),Oe(t,this,l)}}function Qo(t,e){return e.length<2?t:xr(t,ei(e,0,-1))}function _o(t,e){for(var n=t.length,r=vn(e.length,n),o=_i(t);r--;){var s=e[r];t[r]=Oo(s,n)?o[s]:i}return t}function Po(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Eo=Mo(Jr),To=Xe||function(t,e){return oe.setTimeout(t,e)},$o=Mo(Kr);function Ro(t,e,n){var r=e+"";return $o(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return be(p,(function(n){var r="_."+n[0];e&n[1]&&!Se(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(r),n)))}function Mo(t){var e=0,n=0;return function(){var r=bn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Ao(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=Wr(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Do,jo,qo=(Do=Ds((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ut,"$1"):n||t)})),e}),(function(t){return 500===jo.size&&jo.clear(),t})),jo=Do.cache,Do);function Xo(t){if("string"==typeof t||ca(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Vo(t){if(null!=t){try{return Rt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Uo(t){if(t instanceof Nn)return t.clone();var e=new In(t.__wrapped__,t.__chain__);return e.__actions__=_i(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Zo=Gr((function(t,e){return Gs(t)?ur(t,mr(e,1,Gs,!0)):[]})),Io=Gr((function(t,e){var n=Ho(e);return Gs(n)&&(n=i),Gs(t)?ur(t,mr(e,1,Gs,!0),so(n,2)):[]})),No=Gr((function(t,e){var n=Ho(e);return Gs(n)&&(n=i),Gs(t)?ur(t,mr(e,1,Gs,!0),i,n):[]}));function Bo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=On(r+i,0)),Re(t,so(e,3),i)}function zo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ga(n),o=n<0?On(r+o,0):vn(o,r-1)),Re(t,so(e,3),o,!0)}function Wo(t){return null!=t&&t.length?mr(t,1):[]}function Lo(t){return t&&t.length?t[0]:i}var Go=Gr((function(t){var e=Ce(t,gi);return e.length&&e[0]===t[0]?Pr(e):[]})),Fo=Gr((function(t){var e=Ho(t),n=Ce(t,gi);return e===Ho(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Pr(n,so(e,2)):[]})),Yo=Gr((function(t){var e=Ho(t),n=Ce(t,gi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Pr(n,i,e):[]}));function Ho(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Jo=Gr(Ko);function Ko(t,e){return t&&t.length&&e&&e.length?Br(t,e):t}var ts=to((function(t,e){var n=null==t?0:t.length,r=or(t,e);return zr(t,Ce(e,(function(t){return Oo(t,n)?+t:t})).sort(ki)),r}));function es(t){return null==t?t:xn.call(t)}var ns=Gr((function(t){return li(mr(t,1,Gs,!0))})),rs=Gr((function(t){var e=Ho(t);return Gs(e)&&(e=i),li(mr(t,1,Gs,!0),so(e,2))})),is=Gr((function(t){var e=Ho(t);return e="function"==typeof e?e:i,li(mr(t,1,Gs,!0),i,e)}));function os(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if(Gs(t))return e=On(t.length,e),!0})),Ze(e,(function(e){return Ce(t,qe(e))}))}function ss(t,e){if(!t||!t.length)return[];var n=os(t);return null==e?n:Ce(n,(function(t){return Oe(e,i,t)}))}var as=Gr((function(t,e){return Gs(t)?ur(t,e):[]})),ls=Gr((function(t){return di(xe(t,Gs))})),cs=Gr((function(t){var e=Ho(t);return Gs(e)&&(e=i),di(xe(t,Gs),so(e,2))})),us=Gr((function(t){var e=Ho(t);return e="function"==typeof e?e:i,di(xe(t,Gs),i,e)})),hs=Gr(os),fs=Gr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ss(t,n)}));function ds(t){var e=Vn(t);return e.__chain__=!0,e}function ps(t,e){return e(t)}var gs=to((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return or(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Nn&&Oo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ps,args:[o],thisArg:i}),new In(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),ms=Ei((function(t,e,n){Mt.call(t,n)?++t[n]:ir(t,n,1)})),Os=ji(Bo),vs=ji(zo);function bs(t,e){return(zs(t)?be:hr)(t,so(e,3))}function ys(t,e){return(zs(t)?ye:fr)(t,so(e,3))}var ws=Ei((function(t,e,n){Mt.call(t,n)?t[n].push(e):ir(t,n,[e])})),xs=Gr((function(t,e,n){var i=-1,o="function"==typeof e,s=Ls(t)?r(t.length):[];return hr(t,(function(t){s[++i]=o?Oe(e,t,n):Er(t,e,n)})),s})),Ss=Ei((function(t,e,n){ir(t,n,e)}));function ks(t,e){return(zs(t)?Ce:qr)(t,so(e,3))}var Cs=Ei((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Qs=Gr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&vo(t,e[0],e[1])?e=[]:n>2&&vo(e[0],e[1],e[2])&&(e=[e[0]]),Ir(t,mr(e,1),[])})),_s=Te||function(){return oe.Date.now()};function Ps(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Fi(t,c,i,i,i,i,e)}function Es(t,e){var n;if("function"!=typeof e)throw new _t(o);return t=ga(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ts=Gr((function(t,e,n){var r=1;if(n.length){var i=en(n,oo(Ts));r|=l}return Fi(t,r,e,n,i)})),$s=Gr((function(t,e,n){var r=3;if(n.length){var i=en(n,oo($s));r|=l}return Fi(e,r,t,n,i)}));function Rs(t,e,n){var r,s,a,l,c,u,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new _t(o);function g(e){var n=r,o=s;return r=s=i,h=e,l=t.apply(o,n)}function m(t){return h=t,c=To(v,e),f?g(t):l}function O(t){var n=t-u;return u===i||n>=e||n<0||d&&t-h>=a}function v(){var t=_s();if(O(t))return b(t);c=To(v,function(t){var n=e-(t-u);return d?vn(n,a-(t-h)):n}(t))}function b(t){return c=i,p&&r?g(t):(r=s=i,l)}function y(){var t=_s(),n=O(t);if(r=arguments,s=this,u=t,n){if(c===i)return m(u);if(d)return yi(c),c=To(v,e),g(u)}return c===i&&(c=To(v,e)),l}return e=Oa(e)||0,ea(n)&&(f=!!n.leading,a=(d="maxWait"in n)?On(Oa(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),y.cancel=function(){c!==i&&yi(c),h=0,r=u=s=c=i},y.flush=function(){return c===i?l:b(_s())},y}var Ms=Gr((function(t,e){return cr(t,1,e)})),As=Gr((function(t,e,n){return cr(t,Oa(e)||0,n)}));function Ds(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new _t(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ds.Cache||Wn),n}function js(t){if("function"!=typeof t)throw new _t(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ds.Cache=Wn;var qs=vi((function(t,e){var n=(e=1==e.length&&zs(e[0])?Ce(e[0],Ne(so())):Ce(mr(e,1),Ne(so()))).length;return Gr((function(r){for(var i=-1,o=vn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Oe(t,this,r)}))})),Xs=Gr((function(t,e){var n=en(e,oo(Xs));return Fi(t,l,i,e,n)})),Vs=Gr((function(t,e){var n=en(e,oo(Vs));return Fi(t,64,i,e,n)})),Us=to((function(t,e){return Fi(t,256,i,i,i,e)}));function Zs(t,e){return t===e||t!=t&&e!=e}var Is=Bi(Cr),Ns=Bi((function(t,e){return t>=e})),Bs=Tr(function(){return arguments}())?Tr:function(t){return na(t)&&Mt.call(t,"callee")&&!te.call(t,"callee")},zs=r.isArray,Ws=he?Ne(he):function(t){return na(t)&&kr(t)==$};function Ls(t){return null!=t&&ta(t.length)&&!Js(t)}function Gs(t){return na(t)&&Ls(t)}var Fs=dn||Ol,Ys=fe?Ne(fe):function(t){return na(t)&&kr(t)==v};function Hs(t){if(!na(t))return!1;var e=kr(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!oa(t)}function Js(t){if(!ea(t))return!1;var e=kr(t);return e==y||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ks(t){return"number"==typeof t&&t==ga(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ra=de?Ne(de):function(t){return na(t)&&fo(t)==x};function ia(t){return"number"==typeof t||na(t)&&kr(t)==S}function oa(t){if(!na(t)||kr(t)!=k)return!1;var e=Wt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Rt.call(n)==qt}var sa=pe?Ne(pe):function(t){return na(t)&&kr(t)==Q},aa=ge?Ne(ge):function(t){return na(t)&&fo(t)==_};function la(t){return"string"==typeof t||!zs(t)&&na(t)&&kr(t)==P}function ca(t){return"symbol"==typeof t||na(t)&&kr(t)==E}var ua=me?Ne(me):function(t){return na(t)&&ta(t.length)&&!!Jt[kr(t)]},ha=Bi(jr),fa=Bi((function(t,e){return t<=e}));function da(t){if(!t)return[];if(Ls(t))return la(t)?sn(t):_i(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=fo(t);return(e==x?Ke:e==_?nn:Za)(t)}function pa(t){return t?(t=Oa(t))===u||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ga(t){var e=pa(t),n=e%1;return e==e?n?e-n:e:0}function ma(t){return t?sr(ga(t),0,d):0}function Oa(t){if("number"==typeof t)return t;if(ca(t))return f;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ie(t);var n=pt.test(t);return n||mt.test(t)?ne(t.slice(2),n?2:8):dt.test(t)?f:+t}function va(t){return Pi(t,Ma(t))}function ba(t){return null==t?"":ai(t)}var ya=Ti((function(t,e){if(xo(e)||Ls(e))Pi(e,Ra(e),t);else for(var n in e)Mt.call(e,n)&&tr(t,n,e[n])})),wa=Ti((function(t,e){Pi(e,Ma(e),t)})),xa=Ti((function(t,e,n,r){Pi(e,Ma(e),t,r)})),Sa=Ti((function(t,e,n,r){Pi(e,Ra(e),t,r)})),ka=to(or),Ca=Gr((function(t,e){t=kt(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&vo(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=Ma(s),l=-1,c=a.length;++l<c;){var u=a[l],h=t[u];(h===i||Zs(h,Tt[u])&&!Mt.call(t,u))&&(t[u]=s[u])}return t})),Qa=Gr((function(t){return t.push(i,Hi),Oe(Da,i,t)}));function _a(t,e,n){var r=null==t?i:xr(t,e);return r===i?n:r}function Pa(t,e){return null!=t&&po(t,e,_r)}var Ea=Vi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),t[e]=n}),el(il)),Ta=Vi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),Mt.call(t,e)?t[e].push(n):t[e]=[n]}),so),$a=Gr(Er);function Ra(t){return Ls(t)?Fn(t):Dr(t)}function Ma(t){return Ls(t)?Fn(t,!0):function(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in kt(t))e.push(n);return e}(t);var e=xo(t),n=[];for(var r in t)("constructor"!=r||!e&&Mt.call(t,r))&&n.push(r);return n}(t)}var Aa=Ti((function(t,e,n){Ur(t,e,n)})),Da=Ti((function(t,e,n,r){Ur(t,e,n,r)})),ja=to((function(t,e){var n={};if(null==t)return n;var r=!1;e=Ce(e,(function(e){return e=Oi(e,t),r||(r=e.length>1),e})),Pi(t,no(t),n),r&&(n=ar(n,7,Ji));for(var i=e.length;i--;)ci(n,e[i]);return n})),qa=to((function(t,e){return null==t?{}:function(t,e){return Nr(t,e,(function(e,n){return Pa(t,n)}))}(t,e)}));function Xa(t,e){if(null==t)return{};var n=Ce(no(t),(function(t){return[t]}));return e=so(e),Nr(t,n,(function(t,n){return e(t,n[0])}))}var Va=Gi(Ra),Ua=Gi(Ma);function Za(t){return null==t?[]:Be(t,Ra(t))}var Ia=Ai((function(t,e,n){return e=e.toLowerCase(),t+(n?Na(e):e)}));function Na(t){return Ha(ba(t).toLowerCase())}function Ba(t){return(t=ba(t))&&t.replace(vt,Fe).replace(zt,"")}var za=Ai((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Wa=Ai((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),La=Mi("toLowerCase"),Ga=Ai((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Fa=Ai((function(t,e,n){return t+(n?" ":"")+Ha(e)})),Ya=Ai((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ha=Mi("toUpperCase");function Ja(t,e,n){return t=ba(t),(e=n?i:e)===i?function(t){return Ft.test(t)}(t)?function(t){return t.match(Lt)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var Ka=Gr((function(t,e){try{return Oe(t,i,e)}catch(t){return Hs(t)?t:new wt(t)}})),tl=to((function(t,e){return be(e,(function(e){e=Xo(e),ir(t,e,Ts(t[e],t))})),t}));function el(t){return function(){return t}}var nl=qi(),rl=qi(!0);function il(t){return t}function ol(t){return Ar("function"==typeof t?t:ar(t,1))}var sl=Gr((function(t,e){return function(n){return Er(n,t,e)}})),al=Gr((function(t,e){return function(n){return Er(t,n,e)}}));function ll(t,e,n){var r=Ra(e),i=wr(e,r);null!=n||ea(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=wr(e,Ra(e)));var o=!(ea(n)&&"chain"in n&&!n.chain),s=Js(t);return be(i,(function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=_i(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Qe([this.value()],arguments))})})),t}function cl(){}var ul=Zi(Ce),hl=Zi(we),fl=Zi(Ee);function dl(t){return bo(t)?qe(Xo(t)):function(t){return function(e){return xr(e,t)}}(t)}var pl=Ni(),gl=Ni(!0);function ml(){return[]}function Ol(){return!1}var vl,bl=Ui((function(t,e){return t+e}),0),yl=Wi("ceil"),wl=Ui((function(t,e){return t/e}),1),xl=Wi("floor"),Sl=Ui((function(t,e){return t*e}),1),kl=Wi("round"),Cl=Ui((function(t,e){return t-e}),0);return Vn.after=function(t,e){if("function"!=typeof e)throw new _t(o);return t=ga(t),function(){if(--t<1)return e.apply(this,arguments)}},Vn.ary=Ps,Vn.assign=ya,Vn.assignIn=wa,Vn.assignInWith=xa,Vn.assignWith=Sa,Vn.at=ka,Vn.before=Es,Vn.bind=Ts,Vn.bindAll=tl,Vn.bindKey=$s,Vn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return zs(t)?t:[t]},Vn.chain=ds,Vn.chunk=function(t,e,n){e=(n?vo(t,e,n):e===i)?1:On(ga(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,l=r(un(o/e));s<o;)l[a++]=ei(t,s,s+=e);return l},Vn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Vn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Qe(zs(n)?_i(n):[n],mr(e,1))},Vn.cond=function(t){var e=null==t?0:t.length,n=so();return t=e?Ce(t,(function(t){if("function"!=typeof t[1])throw new _t(o);return[n(t[0]),t[1]]})):[],Gr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Oe(i[0],this,n))return Oe(i[1],this,n)}}))},Vn.conforms=function(t){return function(t){var e=Ra(t);return function(n){return lr(n,t,e)}}(ar(t,1))},Vn.constant=el,Vn.countBy=ms,Vn.create=function(t,e){var n=Un(t);return null==e?n:rr(n,e)},Vn.curry=function t(e,n,r){var o=Fi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Vn.curryRight=function t(e,n,r){var o=Fi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Vn.debounce=Rs,Vn.defaults=Ca,Vn.defaultsDeep=Qa,Vn.defer=Ms,Vn.delay=As,Vn.difference=Zo,Vn.differenceBy=Io,Vn.differenceWith=No,Vn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=n||e===i?1:ga(e))<0?0:e,r):[]},Vn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,0,(e=r-(e=n||e===i?1:ga(e)))<0?0:e):[]},Vn.dropRightWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!0,!0):[]},Vn.dropWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!0):[]},Vn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&vo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ga(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ga(r))<0&&(r+=o),r=n>r?0:ma(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Vn.filter=function(t,e){return(zs(t)?xe:gr)(t,so(e,3))},Vn.flatMap=function(t,e){return mr(ks(t,e),1)},Vn.flatMapDeep=function(t,e){return mr(ks(t,e),u)},Vn.flatMapDepth=function(t,e,n){return n=n===i?1:ga(n),mr(ks(t,e),n)},Vn.flatten=Wo,Vn.flattenDeep=function(t){return null!=t&&t.length?mr(t,u):[]},Vn.flattenDepth=function(t,e){return null!=t&&t.length?mr(t,e=e===i?1:ga(e)):[]},Vn.flip=function(t){return Fi(t,512)},Vn.flow=nl,Vn.flowRight=rl,Vn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Vn.functions=function(t){return null==t?[]:wr(t,Ra(t))},Vn.functionsIn=function(t){return null==t?[]:wr(t,Ma(t))},Vn.groupBy=ws,Vn.initial=function(t){return null!=t&&t.length?ei(t,0,-1):[]},Vn.intersection=Go,Vn.intersectionBy=Fo,Vn.intersectionWith=Yo,Vn.invert=Ea,Vn.invertBy=Ta,Vn.invokeMap=xs,Vn.iteratee=ol,Vn.keyBy=Ss,Vn.keys=Ra,Vn.keysIn=Ma,Vn.map=ks,Vn.mapKeys=function(t,e){var n={};return e=so(e,3),br(t,(function(t,r,i){ir(n,e(t,r,i),t)})),n},Vn.mapValues=function(t,e){var n={};return e=so(e,3),br(t,(function(t,r,i){ir(n,r,e(t,r,i))})),n},Vn.matches=function(t){return Xr(ar(t,1))},Vn.matchesProperty=function(t,e){return Vr(t,ar(e,1))},Vn.memoize=Ds,Vn.merge=Aa,Vn.mergeWith=Da,Vn.method=sl,Vn.methodOf=al,Vn.mixin=ll,Vn.negate=js,Vn.nthArg=function(t){return t=ga(t),Gr((function(e){return Zr(e,t)}))},Vn.omit=ja,Vn.omitBy=function(t,e){return Xa(t,js(so(e)))},Vn.once=function(t){return Es(2,t)},Vn.orderBy=function(t,e,n,r){return null==t?[]:(zs(e)||(e=null==e?[]:[e]),zs(n=r?i:n)||(n=null==n?[]:[n]),Ir(t,e,n))},Vn.over=ul,Vn.overArgs=qs,Vn.overEvery=hl,Vn.overSome=fl,Vn.partial=Xs,Vn.partialRight=Vs,Vn.partition=Cs,Vn.pick=qa,Vn.pickBy=Xa,Vn.property=dl,Vn.propertyOf=function(t){return function(e){return null==t?i:xr(t,e)}},Vn.pull=Jo,Vn.pullAll=Ko,Vn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Br(t,e,so(n,2)):t},Vn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Br(t,e,i,n):t},Vn.pullAt=ts,Vn.range=pl,Vn.rangeRight=gl,Vn.rearg=Us,Vn.reject=function(t,e){return(zs(t)?xe:gr)(t,js(so(e,3)))},Vn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=so(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return zr(t,i),n},Vn.rest=function(t,e){if("function"!=typeof t)throw new _t(o);return Gr(t,e=e===i?e:ga(e))},Vn.reverse=es,Vn.sampleSize=function(t,e,n){return e=(n?vo(t,e,n):e===i)?1:ga(e),(zs(t)?Hn:Yr)(t,e)},Vn.set=function(t,e,n){return null==t?t:Hr(t,e,n)},Vn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Hr(t,e,n,r)},Vn.shuffle=function(t){return(zs(t)?Jn:ti)(t)},Vn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&vo(t,e,n)?(e=0,n=r):(e=null==e?0:ga(e),n=n===i?r:ga(n)),ei(t,e,n)):[]},Vn.sortBy=Qs,Vn.sortedUniq=function(t){return t&&t.length?oi(t):[]},Vn.sortedUniqBy=function(t,e){return t&&t.length?oi(t,so(e,2)):[]},Vn.split=function(t,e,n){return n&&"number"!=typeof n&&vo(t,e,n)&&(e=n=i),(n=n===i?d:n>>>0)?(t=ba(t))&&("string"==typeof e||null!=e&&!sa(e))&&!(e=ai(e))&&Je(t)?bi(sn(t),0,n):t.split(e,n):[]},Vn.spread=function(t,e){if("function"!=typeof t)throw new _t(o);return e=null==e?0:On(ga(e),0),Gr((function(n){var r=n[e],i=bi(n,0,e);return r&&Qe(i,r),Oe(t,this,i)}))},Vn.tail=function(t){var e=null==t?0:t.length;return e?ei(t,1,e):[]},Vn.take=function(t,e,n){return t&&t.length?ei(t,0,(e=n||e===i?1:ga(e))<0?0:e):[]},Vn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ei(t,(e=r-(e=n||e===i?1:ga(e)))<0?0:e,r):[]},Vn.takeRightWhile=function(t,e){return t&&t.length?hi(t,so(e,3),!1,!0):[]},Vn.takeWhile=function(t,e){return t&&t.length?hi(t,so(e,3)):[]},Vn.tap=function(t,e){return e(t),t},Vn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new _t(o);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Rs(t,e,{leading:r,maxWait:e,trailing:i})},Vn.thru=ps,Vn.toArray=da,Vn.toPairs=Va,Vn.toPairsIn=Ua,Vn.toPath=function(t){return zs(t)?Ce(t,Xo):ca(t)?[t]:_i(qo(ba(t)))},Vn.toPlainObject=va,Vn.transform=function(t,e,n){var r=zs(t),i=r||Fs(t)||ua(t);if(e=so(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ea(t)&&Js(o)?Un(Wt(t)):{}}return(i?be:br)(t,(function(t,r,i){return e(n,t,r,i)})),n},Vn.unary=function(t){return Ps(t,1)},Vn.union=ns,Vn.unionBy=rs,Vn.unionWith=is,Vn.uniq=function(t){return t&&t.length?li(t):[]},Vn.uniqBy=function(t,e){return t&&t.length?li(t,so(e,2)):[]},Vn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?li(t,i,e):[]},Vn.unset=function(t,e){return null==t||ci(t,e)},Vn.unzip=os,Vn.unzipWith=ss,Vn.update=function(t,e,n){return null==t?t:ui(t,e,mi(n))},Vn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ui(t,e,mi(n),r)},Vn.values=Za,Vn.valuesIn=function(t){return null==t?[]:Be(t,Ma(t))},Vn.without=as,Vn.words=Ja,Vn.wrap=function(t,e){return Xs(mi(e),t)},Vn.xor=ls,Vn.xorBy=cs,Vn.xorWith=us,Vn.zip=hs,Vn.zipObject=function(t,e){return pi(t||[],e||[],tr)},Vn.zipObjectDeep=function(t,e){return pi(t||[],e||[],Hr)},Vn.zipWith=fs,Vn.entries=Va,Vn.entriesIn=Ua,Vn.extend=wa,Vn.extendWith=xa,ll(Vn,Vn),Vn.add=bl,Vn.attempt=Ka,Vn.camelCase=Ia,Vn.capitalize=Na,Vn.ceil=yl,Vn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=Oa(n))==n?n:0),e!==i&&(e=(e=Oa(e))==e?e:0),sr(Oa(t),e,n)},Vn.clone=function(t){return ar(t,4)},Vn.cloneDeep=function(t){return ar(t,5)},Vn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},Vn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},Vn.conformsTo=function(t,e){return null==e||lr(t,e,Ra(e))},Vn.deburr=Ba,Vn.defaultTo=function(t,e){return null==t||t!=t?e:t},Vn.divide=wl,Vn.endsWith=function(t,e,n){t=ba(t),e=ai(e);var r=t.length,o=n=n===i?r:sr(ga(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Vn.eq=Zs,Vn.escape=function(t){return(t=ba(t))&&G.test(t)?t.replace(W,Ye):t},Vn.escapeRegExp=function(t){return(t=ba(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Vn.every=function(t,e,n){var r=zs(t)?we:dr;return n&&vo(t,e,n)&&(e=i),r(t,so(e,3))},Vn.find=Os,Vn.findIndex=Bo,Vn.findKey=function(t,e){return $e(t,so(e,3),br)},Vn.findLast=vs,Vn.findLastIndex=zo,Vn.findLastKey=function(t,e){return $e(t,so(e,3),yr)},Vn.floor=xl,Vn.forEach=bs,Vn.forEachRight=ys,Vn.forIn=function(t,e){return null==t?t:Or(t,so(e,3),Ma)},Vn.forInRight=function(t,e){return null==t?t:vr(t,so(e,3),Ma)},Vn.forOwn=function(t,e){return t&&br(t,so(e,3))},Vn.forOwnRight=function(t,e){return t&&yr(t,so(e,3))},Vn.get=_a,Vn.gt=Is,Vn.gte=Ns,Vn.has=function(t,e){return null!=t&&po(t,e,Qr)},Vn.hasIn=Pa,Vn.head=Lo,Vn.identity=il,Vn.includes=function(t,e,n,r){t=Ls(t)?t:Za(t),n=n&&!r?ga(n):0;var i=t.length;return n<0&&(n=On(i+n,0)),la(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Me(t,e,n)>-1},Vn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=On(r+i,0)),Me(t,e,i)},Vn.inRange=function(t,e,n){return e=pa(e),n===i?(n=e,e=0):n=pa(n),function(t,e,n){return t>=vn(e,n)&&t<On(e,n)}(t=Oa(t),e,n)},Vn.invoke=$a,Vn.isArguments=Bs,Vn.isArray=zs,Vn.isArrayBuffer=Ws,Vn.isArrayLike=Ls,Vn.isArrayLikeObject=Gs,Vn.isBoolean=function(t){return!0===t||!1===t||na(t)&&kr(t)==O},Vn.isBuffer=Fs,Vn.isDate=Ys,Vn.isElement=function(t){return na(t)&&1===t.nodeType&&!oa(t)},Vn.isEmpty=function(t){if(null==t)return!0;if(Ls(t)&&(zs(t)||"string"==typeof t||"function"==typeof t.splice||Fs(t)||ua(t)||Bs(t)))return!t.length;var e=fo(t);if(e==x||e==_)return!t.size;if(xo(t))return!Dr(t).length;for(var n in t)if(Mt.call(t,n))return!1;return!0},Vn.isEqual=function(t,e){return $r(t,e)},Vn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?$r(t,e,i,n):!!r},Vn.isError=Hs,Vn.isFinite=function(t){return"number"==typeof t&&pn(t)},Vn.isFunction=Js,Vn.isInteger=Ks,Vn.isLength=ta,Vn.isMap=ra,Vn.isMatch=function(t,e){return t===e||Rr(t,e,lo(e))},Vn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Rr(t,e,lo(e),n)},Vn.isNaN=function(t){return ia(t)&&t!=+t},Vn.isNative=function(t){if(wo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(t)},Vn.isNil=function(t){return null==t},Vn.isNull=function(t){return null===t},Vn.isNumber=ia,Vn.isObject=ea,Vn.isObjectLike=na,Vn.isPlainObject=oa,Vn.isRegExp=sa,Vn.isSafeInteger=function(t){return Ks(t)&&t>=-9007199254740991&&t<=h},Vn.isSet=aa,Vn.isString=la,Vn.isSymbol=ca,Vn.isTypedArray=ua,Vn.isUndefined=function(t){return t===i},Vn.isWeakMap=function(t){return na(t)&&fo(t)==T},Vn.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==kr(t)},Vn.join=function(t,e){return null==t?"":gn.call(t,e)},Vn.kebabCase=za,Vn.last=Ho,Vn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ga(n))<0?On(r+o,0):vn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Re(t,De,o,!0)},Vn.lowerCase=Wa,Vn.lowerFirst=La,Vn.lt=ha,Vn.lte=fa,Vn.max=function(t){return t&&t.length?pr(t,il,Cr):i},Vn.maxBy=function(t,e){return t&&t.length?pr(t,so(e,2),Cr):i},Vn.mean=function(t){return je(t,il)},Vn.meanBy=function(t,e){return je(t,so(e,2))},Vn.min=function(t){return t&&t.length?pr(t,il,jr):i},Vn.minBy=function(t,e){return t&&t.length?pr(t,so(e,2),jr):i},Vn.stubArray=ml,Vn.stubFalse=Ol,Vn.stubObject=function(){return{}},Vn.stubString=function(){return""},Vn.stubTrue=function(){return!0},Vn.multiply=Sl,Vn.nth=function(t,e){return t&&t.length?Zr(t,ga(e)):i},Vn.noConflict=function(){return oe._===this&&(oe._=Xt),this},Vn.noop=cl,Vn.now=_s,Vn.pad=function(t,e,n){t=ba(t);var r=(e=ga(e))?on(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Ii(hn(i),n)+t+Ii(un(i),n)},Vn.padEnd=function(t,e,n){t=ba(t);var r=(e=ga(e))?on(t):0;return e&&r<e?t+Ii(e-r,n):t},Vn.padStart=function(t,e,n){t=ba(t);var r=(e=ga(e))?on(t):0;return e&&r<e?Ii(e-r,n)+t:t},Vn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),yn(ba(t).replace(rt,""),e||0)},Vn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&vo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=pa(t),e===i?(e=t,t=0):e=pa(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=wn();return vn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Wr(t,e)},Vn.reduce=function(t,e,n){var r=zs(t)?_e:Ve,i=arguments.length<3;return r(t,so(e,4),n,i,hr)},Vn.reduceRight=function(t,e,n){var r=zs(t)?Pe:Ve,i=arguments.length<3;return r(t,so(e,4),n,i,fr)},Vn.repeat=function(t,e,n){return e=(n?vo(t,e,n):e===i)?1:ga(e),Lr(ba(t),e)},Vn.replace=function(){var t=arguments,e=ba(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Vn.result=function(t,e,n){var r=-1,o=(e=Oi(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[Xo(e[r])];s===i&&(r=o,s=n),t=Js(s)?s.call(t):s}return t},Vn.round=kl,Vn.runInContext=t,Vn.sample=function(t){return(zs(t)?Yn:Fr)(t)},Vn.size=function(t){if(null==t)return 0;if(Ls(t))return la(t)?on(t):t.length;var e=fo(t);return e==x||e==_?t.size:Dr(t).length},Vn.snakeCase=Ga,Vn.some=function(t,e,n){var r=zs(t)?Ee:ni;return n&&vo(t,e,n)&&(e=i),r(t,so(e,3))},Vn.sortedIndex=function(t,e){return ri(t,e)},Vn.sortedIndexBy=function(t,e,n){return ii(t,e,so(n,2))},Vn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ri(t,e);if(r<n&&Zs(t[r],e))return r}return-1},Vn.sortedLastIndex=function(t,e){return ri(t,e,!0)},Vn.sortedLastIndexBy=function(t,e,n){return ii(t,e,so(n,2),!0)},Vn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ri(t,e,!0)-1;if(Zs(t[n],e))return n}return-1},Vn.startCase=Fa,Vn.startsWith=function(t,e,n){return t=ba(t),n=null==n?0:sr(ga(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},Vn.subtract=Cl,Vn.sum=function(t){return t&&t.length?Ue(t,il):0},Vn.sumBy=function(t,e){return t&&t.length?Ue(t,so(e,2)):0},Vn.template=function(t,e,n){var r=Vn.templateSettings;n&&vo(t,e,n)&&(e=i),t=ba(t),e=xa({},e,r,Yi);var o,s,a=xa({},e.imports,r.imports,Yi),l=Ra(a),c=Be(a,l),u=0,h=e.interpolate||bt,f="__p += '",d=Ct((e.escape||bt).source+"|"+h.source+"|"+(h===H?ht:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ht+"]")+"\n";t.replace(d,(function(e,n,r,i,a,l){return r||(r=i),f+=t.slice(u,l).replace(yt,He),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),f+="';\n";var g=Mt.call(e,"variable")&&e.variable;if(g){if(ct.test(g))throw new wt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(I,""):f).replace(N,"$1").replace(B,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Ka((function(){return xt(l,p+"return "+f).apply(i,c)}));if(m.source=f,Hs(m))throw m;return m},Vn.times=function(t,e){if((t=ga(t))<1||t>h)return[];var n=d,r=vn(t,d);e=so(e),t-=d;for(var i=Ze(r,e);++n<t;)e(n);return i},Vn.toFinite=pa,Vn.toInteger=ga,Vn.toLength=ma,Vn.toLower=function(t){return ba(t).toLowerCase()},Vn.toNumber=Oa,Vn.toSafeInteger=function(t){return t?sr(ga(t),-9007199254740991,h):0===t?t:0},Vn.toString=ba,Vn.toUpper=function(t){return ba(t).toUpperCase()},Vn.trim=function(t,e,n){if((t=ba(t))&&(n||e===i))return Ie(t);if(!t||!(e=ai(e)))return t;var r=sn(t),o=sn(e);return bi(r,We(r,o),Le(r,o)+1).join("")},Vn.trimEnd=function(t,e,n){if((t=ba(t))&&(n||e===i))return t.slice(0,an(t)+1);if(!t||!(e=ai(e)))return t;var r=sn(t);return bi(r,0,Le(r,sn(e))+1).join("")},Vn.trimStart=function(t,e,n){if((t=ba(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=sn(t);return bi(r,We(r,sn(e))).join("")},Vn.truncate=function(t,e){var n=30,r="...";if(ea(e)){var o="separator"in e?e.separator:o;n="length"in e?ga(e.length):n,r="omission"in e?ai(e.omission):r}var s=(t=ba(t)).length;if(Je(t)){var a=sn(t);s=a.length}if(n>=s)return t;var l=n-on(r);if(l<1)return r;var c=a?bi(a,0,l).join(""):t.slice(0,l);if(o===i)return c+r;if(a&&(l+=c.length-l),sa(o)){if(t.slice(l).search(o)){var u,h=c;for(o.global||(o=Ct(o.source,ba(ft.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var f=u.index;c=c.slice(0,f===i?l:f)}}else if(t.indexOf(ai(o),l)!=l){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+r},Vn.unescape=function(t){return(t=ba(t))&&L.test(t)?t.replace(z,ln):t},Vn.uniqueId=function(t){var e=++At;return ba(t)+e},Vn.upperCase=Ya,Vn.upperFirst=Ha,Vn.each=bs,Vn.eachRight=ys,Vn.first=Lo,ll(Vn,(vl={},br(Vn,(function(t,e){Mt.call(Vn.prototype,e)||(vl[e]=t)})),vl),{chain:!1}),Vn.VERSION="4.17.21",be(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Vn[t].placeholder=Vn})),be(["drop","take"],(function(t,e){Nn.prototype[t]=function(n){n=n===i?1:On(ga(n),0);var r=this.__filtered__&&!e?new Nn(this):this.clone();return r.__filtered__?r.__takeCount__=vn(n,r.__takeCount__):r.__views__.push({size:vn(n,d),type:t+(r.__dir__<0?"Right":"")}),r},Nn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),be(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Nn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:so(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),be(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Nn.prototype[t]=function(){return this[n](1).value()[0]}})),be(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Nn.prototype[t]=function(){return this.__filtered__?new Nn(this):this[n](1)}})),Nn.prototype.compact=function(){return this.filter(il)},Nn.prototype.find=function(t){return this.filter(t).head()},Nn.prototype.findLast=function(t){return this.reverse().find(t)},Nn.prototype.invokeMap=Gr((function(t,e){return"function"==typeof t?new Nn(this):this.map((function(n){return Er(n,t,e)}))})),Nn.prototype.reject=function(t){return this.filter(js(so(t)))},Nn.prototype.slice=function(t,e){t=ga(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Nn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ga(e))<0?n.dropRight(-e):n.take(e-t)),n)},Nn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Nn.prototype.toArray=function(){return this.take(d)},br(Nn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Vn[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(Vn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,l=e instanceof Nn,c=a[0],u=l||zs(e),h=function(t){var e=o.apply(Vn,Qe([t],a));return r&&f?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,g=l&&!d;if(!s&&u){e=g?e:new Nn(this);var m=t.apply(e,a);return m.__actions__.push({func:ps,args:[h],thisArg:i}),new In(m,f)}return p&&g?t.apply(this,a):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})})),be(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Pt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Vn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(zs(i)?i:[],t)}return this[n]((function(n){return e.apply(zs(n)?n:[],t)}))}})),br(Nn.prototype,(function(t,e){var n=Vn[e];if(n){var r=n.name+"";Mt.call(Tn,r)||(Tn[r]=[]),Tn[r].push({name:e,func:n})}})),Tn[Xi(i,2).name]=[{name:"wrapper",func:i}],Nn.prototype.clone=function(){var t=new Nn(this.__wrapped__);return t.__actions__=_i(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=_i(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=_i(this.__views__),t},Nn.prototype.reverse=function(){if(this.__filtered__){var t=new Nn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Nn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=zs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=vn(e,t+s);break;case"takeRight":t=On(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,l=a-s,c=r?a:s-1,u=this.__iteratees__,h=u.length,f=0,d=vn(l,this.__takeCount__);if(!n||!r&&i==l&&d==l)return fi(t,this.__actions__);var p=[];t:for(;l--&&f<d;){for(var g=-1,m=t[c+=e];++g<h;){var O=u[g],v=O.iteratee,b=O.type,y=v(m);if(2==b)m=y;else if(!y){if(1==b)continue t;break t}}p[f++]=m}return p},Vn.prototype.at=gs,Vn.prototype.chain=function(){return ds(this)},Vn.prototype.commit=function(){return new In(this.value(),this.__chain__)},Vn.prototype.next=function(){this.__values__===i&&(this.__values__=da(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Vn.prototype.plant=function(t){for(var e,n=this;n instanceof Zn;){var r=Uo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Vn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Nn){var e=t;return this.__actions__.length&&(e=new Nn(this)),(e=e.reverse()).__actions__.push({func:ps,args:[es],thisArg:i}),new In(e,this.__chain__)}return this.thru(es)},Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},Vn.prototype.first=Vn.prototype.head,se&&(Vn.prototype[se]=function(){return this}),Vn}();oe._=cn,(r=function(){return cn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},6651:(t,e,n)=>{var r=n(4554);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},7714:t=>{t.exports=function(){return!1}},631:(t,e,n)=>{var r=n(1827),i=n(7636),o=n(2231),s=n(7e3),a=n(7308),l=n(5446),c=n(7535),u=n(98),h=n(8611),f=n(9915),d=n(5567),p=/\b__p \+= '';/g,g=/\b(__p \+=) '' \+/g,m=/(__e\(.*?\)|\b__t\)) \+\n'';/g,O=/[()=,{}\[\]\/\s]/,v=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,b=/($^)/,y=/['\n\r\u2028\u2029\\]/g,w=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var x=f.imports._.templateSettings||f;n&&c(t,e,n)&&(e=void 0),t=d(t),e=r({},e,x,s);var S,k,C=r({},e.imports,x.imports,s),Q=u(C),_=o(C,Q),P=0,E=e.interpolate||b,T="__p += '",$=RegExp((e.escape||b).source+"|"+E.source+"|"+(E===h?v:b).source+"|"+(e.evaluate||b).source+"|$","g"),R=w.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace($,(function(e,n,r,i,o,s){return r||(r=i),T+=t.slice(P,s).replace(y,a),n&&(S=!0,T+="' +\n__e("+n+") +\n'"),o&&(k=!0,T+="';\n"+o+";\n__p += '"),r&&(T+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),P=s+e.length,e})),T+="';\n";var M=w.call(e,"variable")&&e.variable;if(M){if(O.test(M))throw new Error("Invalid `variable` option passed into `_.template`")}else T="with (obj) {\n"+T+"\n}\n";T=(k?T.replace(p,""):T).replace(g,"$1").replace(m,"$1;"),T="function("+(M||"obj")+") {\n"+(M?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(S?", __e = _.escape":"")+(k?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+T+"return __p\n}";var A=i((function(){return Function(Q,R+"return "+T).apply(void 0,_)}));if(A.source=T,l(A))throw A;return A}},9915:(t,e,n)=>{var r=n(4565),i={escape:n(9886),evaluate:n(1321),interpolate:n(8611),variable:"",imports:{_:{escape:r}}};t.exports=i},5567:(t,e,n)=>{var r=n(4282);t.exports=function(t){return null==t?"":r(t)}},5663:(t,e,n)=>{var r=n(4282),i=n(4833),o=n(9158),s=n(4159),a=n(3574),l=n(3528),c=n(5567);t.exports=function(t,e,n){if((t=c(t))&&(n||void 0===e))return i(t);if(!t||!(e=r(e)))return t;var u=l(t),h=l(e),f=a(u,h),d=s(u,h)+1;return o(u,f,d).join("")}},6744:(t,e,n)=>{var r=n(2690)("toUpperCase");t.exports=r},3254:(t,e,n)=>{var r=n(585),i=n(3909),o=n(5567),s=n(7025);t.exports=function(t,e,n){return t=o(t),void 0===(e=n?void 0:e)?i(t)?s(t):r(t):t.match(e)||[]}},3345:(t,e,n)=>{var r;!function(i,o,s){if(i){for(var a,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},c={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},f=1;f<20;++f)l[111+f]="f"+f;for(f=0;f<=9;++f)l[f+96]=f.toString();b.prototype.bind=function(t,e,n){var r=this;return t=t instanceof Array?t:[t],r._bindMultiple.call(r,t,e,n),r},b.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},b.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},b.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},b.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(v(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var n=t.composedPath()[0];n!==t.target&&(e=n)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},b.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},b.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(l[e]=t[e]);a=null},b.init=function(){var t=b(o);for(var e in t)"_"!==e.charAt(0)&&(b[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},b.init(),i.Mousetrap=b,t.exports&&(t.exports=b),void 0===(r=function(){return b}.call(e,n,e,t))||(t.exports=r)}function d(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function p(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return l[t.which]?l[t.which]:c[t.which]?c[t.which]:String.fromCharCode(t.which).toLowerCase()}function g(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function m(t,e,n){return n||(n=function(){if(!a)for(var t in a={},l)t>95&&t<112||l.hasOwnProperty(t)&&(a[l[t]]=t);return a}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function O(t,e){var n,r,i,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),i=0;i<n.length;++i)r=n[i],h[r]&&(r=h[r]),e&&"keypress"!=e&&u[r]&&(r=u[r],o.push("shift")),g(r)&&o.push(r);return{key:r,modifiers:o,action:e=m(r,o,e)}}function v(t,e){return null!==t&&t!==o&&(t===e||v(t.parentNode,e))}function b(t){var e=this;if(t=t||o,!(e instanceof b))return new b(t);e.target=t,e._callbacks={},e._directMap={};var n,r={},i=!1,s=!1,a=!1;function l(t){t=t||{};var e,n=!1;for(e in r)t[e]?n=!0:r[e]=0;n||(a=!1)}function c(t,n,i,o,s,a){var l,c,u,h,f=[],d=i.type;if(!e._callbacks[t])return[];for("keyup"==d&&g(t)&&(n=[t]),l=0;l<e._callbacks[t].length;++l)if(c=e._callbacks[t][l],(o||!c.seq||r[c.seq]==c.level)&&d==c.action&&("keypress"==d&&!i.metaKey&&!i.ctrlKey||(u=n,h=c.modifiers,u.sort().join(",")===h.sort().join(",")))){var p=!o&&c.combo==s,m=o&&c.seq==o&&c.level==a;(p||m)&&e._callbacks[t].splice(l,1),f.push(c)}return f}function u(t,n,r,i){e.stopCallback(n,n.target||n.srcElement,r,i)||!1===t(n,r)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function h(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=p(t);n&&("keyup"!=t.type||i!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):i=!1)}function f(t,o,s,h,d){e._directMap[t+":"+s]=o;var g,m=(t=t.replace(/\s+/g," ")).split(" ");m.length>1?function(t,e,o,s){function c(e){return function(){a=e,++r[t],clearTimeout(n),n=setTimeout(l,1e3)}}function h(e){u(o,e,t),"keyup"!==s&&(i=p(e)),setTimeout(l,10)}r[t]=0;for(var d=0;d<e.length;++d){var g=d+1===e.length?h:c(s||O(e[d+1]).action);f(e[d],g,s,t,d)}}(t,m,o,s):(g=O(t,s),e._callbacks[g.key]=e._callbacks[g.key]||[],c(g.key,g.modifiers,{type:g.action},h,t,d),e._callbacks[g.key][h?"unshift":"push"]({callback:o,modifiers:g.modifiers,action:g.action,seq:h,level:d,combo:t}))}e._handleKey=function(t,e,n){var r,i=c(t,e,n),o={},h=0,f=!1;for(r=0;r<i.length;++r)i[r].seq&&(h=Math.max(h,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=h)continue;f=!0,o[i[r].seq]=1,u(i[r].callback,n,i[r].combo,i[r].seq)}else f||u(i[r].callback,n,i[r].combo);var d="keypress"==n.type&&s;n.type!=a||g(t)||d||l(o),s=f&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var r=0;r<t.length;++r)f(t[r],e,n)},d(t,"keypress",h),d(t,"keydown",h),d(t,"keyup",h)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},8628:t=>{var e=1e3,n=60*e,r=60*n,i=24*r;function o(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,s){s=s||{};var a,l,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(t);if("number"===c&&isFinite(t))return s.long?(a=t,(l=Math.abs(a))>=i?o(a,l,i,"day"):l>=r?o(a,l,r,"hour"):l>=n?o(a,l,n,"minute"):l>=e?o(a,l,e,"second"):a+" ms"):function(t){var o=Math.abs(t);return o>=i?Math.round(t/i)+"d":o>=r?Math.round(t/r)+"h":o>=n?Math.round(t/n)+"m":o>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},3133:t=>{function e(t,e){if(!t)throw new Error(e||"AssertionError")}e.notEqual=function(t,n,r){e(t!=n,r)},e.notOk=function(t,n){e(!t,n)},e.equal=function(t,n,r){e(t==n,r)},e.ok=e,t.exports=e},9103:(t,e,n)=>{var r=n(4270),i=n(1922),o=n(3133);function s(t){if(!(this instanceof s))return new s(t);this._name=t||"nanobus",this._starListeners=[],this._listeners={}}t.exports=s,s.prototype.emit=function(t){o.ok("string"==typeof t||"symbol"==typeof t,"nanobus.emit: eventName should be type string or symbol");for(var e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);var s=i(this._name+"('"+t.toString()+"')"),a=this._listeners[t];return a&&a.length>0&&this._emit(this._listeners[t],e),this._starListeners.length>0&&this._emit(this._starListeners,t,e,s.uuid),s(),this},s.prototype.on=s.prototype.addListener=function(t,e){return o.ok("string"==typeof t||"symbol"==typeof t,"nanobus.on: eventName should be type string or symbol"),o.equal(typeof e,"function","nanobus.on: listener should be type function"),"*"===t?this._starListeners.push(e):(this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)),this},s.prototype.prependListener=function(t,e){return o.ok("string"==typeof t||"symbol"==typeof t,"nanobus.prependListener: eventName should be type string or symbol"),o.equal(typeof e,"function","nanobus.prependListener: listener should be type function"),"*"===t?this._starListeners.unshift(e):(this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].unshift(e)),this},s.prototype.once=function(t,e){o.ok("string"==typeof t||"symbol"==typeof t,"nanobus.once: eventName should be type string or symbol"),o.equal(typeof e,"function","nanobus.once: listener should be type function");var n=this;return this.on(t,(function r(){e.apply(n,arguments),n.removeListener(t,r)})),this},s.prototype.prependOnceListener=function(t,e){o.ok("string"==typeof t||"symbol"==typeof t,"nanobus.prependOnceListener: eventName should be type string or symbol"),o.equal(typeof e,"function","nanobus.prependOnceListener: listener should be type function");var n=this;return this.prependListener(t,(function r(){e.apply(n,arguments),n.removeListener(t,r)})),this},s.prototype.removeListener=function(t,e){return o.ok("string"==typeof t||"symbol"==typeof t,"nanobus.removeListener: eventName should be type string or symbol"),o.equal(typeof e,"function","nanobus.removeListener: listener should be type function"),"*"===t?(this._starListeners=this._starListeners.slice(),n(this._starListeners,e)):(void 0!==this._listeners[t]&&(this._listeners[t]=this._listeners[t].slice()),n(this._listeners[t],e));function n(t,e){if(t){var n=t.indexOf(e);return-1!==n?(r(t,n,1),!0):void 0}}},s.prototype.removeAllListeners=function(t){return t?"*"===t?this._starListeners=[]:this._listeners[t]=[]:(this._starListeners=[],this._listeners={}),this},s.prototype.listeners=function(t){var e="*"!==t?this._listeners[t]:this._starListeners,n=[];if(e)for(var r=e.length,i=0;i<r;i++)n.push(e[i]);return n},s.prototype._emit=function(t,e,n,r){if(void 0!==t&&0!==t.length){void 0===n&&(n=e,e=null),e&&(n=void 0!==r?[e].concat(n,r):[e].concat(n));for(var i=t.length,o=0;o<i;o++){var s=t[o];s.apply(s,n)}}}},1218:(t,e,n)=>{var r=n(3133),i="undefined"!=typeof window;function o(t){this.hasWindow=t,this.hasIdle=this.hasWindow&&window.requestIdleCallback,this.method=this.hasIdle?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}o.prototype.push=function(t){r.equal(typeof t,"function","nanoscheduler.push: cb should be type function"),this.queue.push(t),this.schedule()},o.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var t=this;this.method((function(e){for(;t.queue.length&&e.timeRemaining()>0;)t.queue.shift()(e);t.scheduled=!1,t.queue.length&&t.schedule()}))}},o.prototype.setTimeout=function(t){setTimeout(t,0,{timeRemaining:function(){return 1}})},t.exports=function(){var t;return i?(window._nanoScheduler||(window._nanoScheduler=new o(!0)),t=window._nanoScheduler):t=new o,t}},1922:(t,e,n)=>{var r,i=n(1218)(),o=n(3133);s.disabled=!0;try{r=window.performance,s.disabled="true"===window.localStorage.DISABLE_NANOTIMING||!r.mark}catch(t){}function s(t){if(o.equal(typeof t,"string","nanotiming: name should be type string"),s.disabled)return a;var e=(1e4*r.now()).toFixed()%Number.MAX_SAFE_INTEGER,n="start-"+e+"-"+t;function l(o){var s="end-"+e+"-"+t;r.mark(s),i.push((function(){var i=null;try{var a=t+" ["+e+"]";r.measure(a,n,s),r.clearMarks(n),r.clearMarks(s)}catch(t){i=t}o&&o(i,t)}))}return r.mark(n),l.uuid=e,l}function a(t){t&&i.push((function(){t(new Error("nanotiming: performance API unavailable"))}))}t.exports=s},7634:(t,e,n)=>{"use strict";var r=n(1533);e.s=r.createRoot,r.hydrateRoot},4270:t=>{"use strict";t.exports=function(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){var o=i-(n=e+n>i?i-e:n);for(r=e;r<o;++r)t[r]=t[r+n];t.length=o}}},1892:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},s=[],a=0;a<t.length;a++){var l=t[a],c=r.base?l[0]+r.base:l[0],u=o[c]||0,h="".concat(c," ").concat(u);o[c]=u+1;var f=n(h),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var p=i(d,r);r.byIndex=a,e.splice(a,0,{identifier:h,updater:p,references:1})}s.push(h)}return s}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var l=r(t,i),c=0;c<o.length;c++){var u=n(o[c]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}o=l}}},8311:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},8060:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},8192:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},5760:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4865:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},1533:t=>{"use strict";t.exports=ReactDOM}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.nc=void 0,(()=>{"use strict";const t=React;var e=n.n(t),r=n(7634),i=n(6292),o=n.n(i);const s=SemiUI;function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function l(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(i[n]=t[n]);return i}function c(e){var n=(0,t.useRef)(e),r=(0,t.useRef)((function(t){n.current&&n.current(t)}));return n.current=e,r.current}var u=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t>n?n:t<e?e:t},h=function(t){return"touches"in t},f=function(t){return t&&t.ownerDocument.defaultView||self},d=function(t,e,n){var r=t.getBoundingClientRect(),i=h(e)?function(t,e){for(var n=0;n<t.length;n++)if(t[n].identifier===e)return t[n];return t[0]}(e.touches,n):e;return{left:u((i.pageX-(r.left+f(t).pageXOffset))/r.width),top:u((i.pageY-(r.top+f(t).pageYOffset))/r.height)}},p=function(t){!h(t)&&t.preventDefault()},g=t.memo((function(e){var n=e.onMove,r=e.onKey,i=l(e,["onMove","onKey"]),o=(0,t.useRef)(null),s=c(n),u=c(r),g=(0,t.useRef)(null),m=(0,t.useRef)(!1),O=(0,t.useMemo)((function(){var t=function(t){p(t),(h(t)?t.touches.length>0:t.buttons>0)&&o.current?s(d(o.current,t,g.current)):n(!1)},e=function(){return n(!1)};function n(n){var r=m.current,i=f(o.current),s=n?i.addEventListener:i.removeEventListener;s(r?"touchmove":"mousemove",t),s(r?"touchend":"mouseup",e)}return[function(t){var e=t.nativeEvent,r=o.current;if(r&&(p(e),!function(t,e){return e&&!h(t)}(e,m.current)&&r)){if(h(e)){m.current=!0;var i=e.changedTouches||[];i.length&&(g.current=i[0].identifier)}r.focus(),s(d(r,e,g.current)),n(!0)}},function(t){var e=t.which||t.keyCode;e<37||e>40||(t.preventDefault(),u({left:39===e?.05:37===e?-.05:0,top:40===e?.05:38===e?-.05:0}))},n]}),[u,s]),v=O[0],b=O[1],y=O[2];return(0,t.useEffect)((function(){return y}),[y]),t.createElement("div",a({},i,{onTouchStart:v,onMouseDown:v,className:"react-colorful__interactive",ref:o,onKeyDown:b,tabIndex:0,role:"slider"}))})),m=function(t){return t.filter(Boolean).join(" ")},O=function(e){var n=e.color,r=e.left,i=e.top,o=void 0===i?.5:i,s=m(["react-colorful__pointer",e.className]);return t.createElement("div",{className:s,style:{top:100*o+"%",left:100*r+"%"}},t.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:n}}))},v=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=Math.pow(10,e)),Math.round(n*t)/n},b=(Math.PI,function(t){return C(y(t))}),y=function(t){return"#"===t[0]&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?v(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:8===t.length?v(parseInt(t.substring(6,8),16)/255,2):1}},w=function(t){var e=function(t){var e=t.s,n=t.v,r=t.a,i=(200-e)*n/100;return{h:v(t.h),s:v(i>0&&i<200?e*n/100/(i<=100?i:200-i)*100:0),l:v(i/2),a:v(r,2)}}(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},x=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var o=Math.floor(e),s=r*(1-n),a=r*(1-(e-o)*n),l=r*(1-(1-e+o)*n),c=o%6;return{r:v(255*[r,a,s,s,l,r][c]),g:v(255*[l,r,r,a,s,s][c]),b:v(255*[s,s,l,r,r,a][c]),a:v(i,2)}},S=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},k=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,o=i<1?S(v(255*i)):"";return"#"+S(e)+S(n)+S(r)+o},C=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,o=Math.max(e,n,r),s=o-Math.min(e,n,r),a=s?o===e?(n-r)/s:o===n?2+(r-e)/s:4+(e-n)/s:0;return{h:v(60*(a<0?a+6:a)),s:v(o?s/o*100:0),v:v(o/255*100),a:i}},Q=t.memo((function(e){var n=e.hue,r=e.onChange,i=m(["react-colorful__hue",e.className]);return t.createElement("div",{className:i},t.createElement(g,{onMove:function(t){r({h:360*t.left})},onKey:function(t){r({h:u(n+360*t.left,0,360)})},"aria-label":"Hue","aria-valuenow":v(n),"aria-valuemax":"360","aria-valuemin":"0"},t.createElement(O,{className:"react-colorful__hue-pointer",left:n/360,color:w({h:n,s:100,v:100,a:1})})))})),_=t.memo((function(e){var n=e.hsva,r=e.onChange,i={backgroundColor:w({h:n.h,s:100,v:100,a:1})};return t.createElement("div",{className:"react-colorful__saturation",style:i},t.createElement(g,{onMove:function(t){r({s:100*t.left,v:100-100*t.top})},onKey:function(t){r({s:u(n.s+100*t.left,0,100),v:u(n.v-100*t.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+v(n.s)+"%, Brightness "+v(n.v)+"%"},t.createElement(O,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:w(n)})))})),P=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0};function E(e,n,r){var i=c(r),o=(0,t.useState)((function(){return e.toHsva(n)})),s=o[0],a=o[1],l=(0,t.useRef)({color:n,hsva:s});(0,t.useEffect)((function(){if(!e.equal(n,l.current.color)){var t=e.toHsva(n);l.current={hsva:t,color:n},a(t)}}),[n,e]),(0,t.useEffect)((function(){var t;P(s,l.current.hsva)||e.equal(t=e.fromHsva(s),l.current.color)||(l.current={hsva:s,color:t},i(t))}),[s,e,i]);var u=(0,t.useCallback)((function(t){a((function(e){return Object.assign({},e,t)}))}),[]);return[s,u]}var T="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,$=new Map,R=function(e){var r,i=e.className,o=e.colorModel,s=e.color,c=void 0===s?o.defaultColor:s,u=e.onChange,h=l(e,["className","colorModel","color","onChange"]),f=(0,t.useRef)(null);r=f,T((function(){var t=r.current?r.current.ownerDocument:document;if(void 0!==t&&!$.has(t)){var e=t.createElement("style");e.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',$.set(t,e);var i=n.nc;i&&e.setAttribute("nonce",i),t.head.appendChild(e)}}),[]);var d=E(o,c,u),p=d[0],g=d[1],O=m(["react-colorful",i]);return t.createElement("div",a({},h,{ref:f,className:O}),t.createElement(_,{hsva:p,onChange:g}),t.createElement(Q,{hue:p.h,onChange:g,className:"react-colorful__last-control"}))},M={defaultColor:"000",toHsva:b,fromHsva:function(t){return function(t){return k(x(t))}({h:t.h,s:t.s,v:t.v,a:1})},equal:function(t,e){return t.toLowerCase()===e.toLowerCase()||P(y(t),y(e))}},A=function(e){return t.createElement(R,a({},e,{colorModel:M}))};const D=(0,s.withField)((t=>{let n=[0,"solid","#fff"];return t.value&&(n=t.value.split(" "),n[0]=parseInt(n[0])),e().createElement(s.Space,null,e().createElement(s.InputNumber,{style:{width:"64px"},defaultValue:n[0],value:n[0],onChange:e=>{t.onChange(e+"px "+n[1]+" "+n[2])}})," ",e().createElement(s.Select,{value:n[1],optionList:[{label:"实线",value:"solid"},{label:"点划线",value:"dashed"}],onChange:e=>{t.onChange(n[0]+"px "+e+" "+n[2])}}),e().createElement(s.Popover,{content:e().createElement(A,{color:n[2],onChange:e=>{t.onChange(n[0]+"px "+n[1]+" "+e)}})},e().createElement(s.Button,{style:{backgroundColor:n[2]}})))})),j="semi";var q=n(42),X=n.n(q),V=n(1892),U=n.n(V),Z=n(5760),I=n.n(Z),N=n(8311),B=n.n(N),z=n(8192),W=n.n(z),L=n(8060),G=n.n(L),F=n(4865),Y=n.n(F),H=n(7543),J={};J.styleTagTransform=Y(),J.setAttributes=W(),J.insert=B().bind(null,"head"),J.domAPI=I(),J.insertStyleElement=G(),U()(H.Z,J),H.Z&&H.Z.locals&&H.Z.locals;const K=e().forwardRef(((t,n)=>{const{svg:r,spin:i=!1,rotate:o,style:s,className:a,prefixCls:l=j,type:c,size:u="default"}=t,h=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["svg","spin","rotate","style","className","prefixCls","type","size"]),f=X()("".concat(l,"-icon"),{["".concat(l,"-icon-extra-small")]:"extra-small"===u,["".concat(l,"-icon-small")]:"small"===u,["".concat(l,"-icon-default")]:"default"===u,["".concat(l,"-icon-large")]:"large"===u,["".concat(l,"-icon-extra-large")]:"extra-large"===u,["".concat(l,"-icon-spinning")]:!0===i,["".concat(l,"-icon-").concat(c)]:Boolean(c)},a),d={};return Number.isSafeInteger(o)&&(d.transform="rotate(".concat(o,"deg)")),Object.assign(d,s),e().createElement("span",Object.assign({role:"img",ref:n,"aria-label":c,className:f,style:d},h),r)}));K.elementType="Icon";const tt=(t,n)=>{const r=e().forwardRef(((r,i)=>e().createElement(K,Object.assign({svg:e().createElement(t),type:n,ref:i},r))));return r.elementType="Icon",r},et=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M17.6568 19.7782C18.2426 20.3639 19.1924 20.3639 19.7782 19.7782C20.3639 19.1924 20.3639 18.2426 19.7782 17.6568L14.1213 12L19.7782 6.34313C20.3639 5.75734 20.3639 4.8076 19.7782 4.22181C19.1924 3.63602 18.2426 3.63602 17.6568 4.22181L12 9.87866L6.34313 4.22181C5.75734 3.63602 4.8076 3.63602 4.22181 4.22181C3.63602 4.8076 3.63602 5.75734 4.22181 6.34313L9.87866 12L4.22181 17.6568C3.63602 18.2426 3.63602 19.1924 4.22181 19.7782C4.8076 20.3639 5.75734 20.3639 6.34313 19.7782L12 14.1213L17.6568 19.7782Z",fill:"currentColor"}))}),"close"),nt=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4885 4.18603C14.5912 3.364 14.0081 2.61431 13.1861 2.51156C12.3641 2.4088 11.6144 2.99189 11.5116 3.81392L9.51162 19.8139C9.40886 20.636 9.99195 21.3856 10.814 21.4884C11.636 21.5911 12.3857 21.0081 12.4885 20.186L14.4885 4.18603ZM8.06066 5.93931C8.64645 6.5251 8.64645 7.47485 8.06066 8.06063L4.12132 12L8.06066 15.9393C8.64645 16.5251 8.64645 17.4748 8.06066 18.0606C7.47487 18.6464 6.52513 18.6464 5.93934 18.0606L0.93934 13.0606C0.353553 12.4748 0.353553 11.5251 0.93934 10.9393L5.93934 5.93931C6.52513 5.35353 7.47487 5.35353 8.06066 5.93931ZM15.9393 5.93931C16.5251 5.35353 17.4749 5.35353 18.0607 5.93931L23.0607 10.9393C23.6464 11.5251 23.6464 12.4748 23.0607 13.0606L18.0607 18.0606C17.4749 18.6464 16.5251 18.6464 15.9393 18.0606C15.3536 17.4748 15.3536 16.5251 15.9393 15.9393L19.8787 12L15.9393 8.06063C15.3536 7.47485 15.3536 6.5251 15.9393 5.93931Z",fill:"currentColor"}))}),"code"),rt=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.38055 2C9.00251 2 8.65678 2.21319 8.48703 2.55098L7.00505 5.5H3C2.44772 5.5 2 5.94772 2 6.5V7.5C2 8.05228 2.44772 8.5 3 8.5H21C21.5523 8.5 22 8.05228 22 7.5V6.5C22 5.94772 21.5523 5.5 21 5.5H16.9949L15.5129 2.55098C15.3432 2.21319 14.9975 2 14.6194 2H9.38055ZM14.8571 5.5L14.1439 4.25193C14.0549 4.09614 13.8893 4 13.7098 4H10.2901C10.1107 4 9.94505 4.09614 9.85602 4.25193L9.14284 5.5H14.8571ZM18.7192 10H5.28078C4.6302 10 4.15285 10.6114 4.31063 11.2425L6.4319 19.7276C6.76578 21.0631 7.96573 22 9.34233 22H14.6577C16.0343 22 17.2342 21.0631 17.5681 19.7276L19.6894 11.2425C19.8472 10.6114 19.3698 10 18.7192 10Z",fill:"currentColor"}))}),"delete"),it=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M14.4999 4.49994L19.4999 9.49994L21.5857 7.41416C22.3667 6.63311 22.3667 5.36678 21.5857 4.58573L19.4141 2.41415C18.6331 1.63311 17.3667 1.63311 16.5857 2.41416L14.4999 4.49994Z",fill:"currentColor"}),t.createElement("path",{d:"M2.24715 21.1346L3.92871 15.2491C3.9754 15.0857 4.06296 14.9369 4.18313 14.8167L12.9999 5.99994L17.9999 10.9999L9.18313 19.8167C9.06296 19.9369 8.91415 20.0244 8.75074 20.0711L2.86527 21.7527C2.48809 21.8605 2.13938 21.5117 2.24715 21.1346Z",fill:"currentColor"}))}),"edit"),ot=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M10 2C10.8284 2 11.5 2.67157 11.5 3.5C11.5 4.32843 10.8284 5 10 5H7.12132L11.0607 8.93934C11.6464 9.52513 11.6464 10.4749 11.0607 11.0607C10.4749 11.6464 9.52513 11.6464 8.93934 11.0607L5 7.12132V10C5 10.8284 4.32843 11.5 3.5 11.5C2.67157 11.5 2 10.8284 2 10V3.5C2 2.67157 2.67157 2 3.5 2H10Z",fill:"currentColor"}),t.createElement("path",{d:"M19 14C19 13.1716 19.6716 12.5 20.5 12.5C21.3284 12.5 22 13.1716 22 14V20.5C22 21.3284 21.3284 22 20.5 22H14C13.1716 22 12.5 21.3284 12.5 20.5C12.5 19.6716 13.1716 19 14 19H16.8787L12.9393 15.0607C12.3536 14.4749 12.3536 13.5251 12.9393 12.9393C13.5251 12.3536 14.4749 12.3536 15.0607 12.9393L19 16.8787V14Z",fill:"currentColor"}))}),"expand"),st=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M9 7C10.1046 7 11 6.10457 11 5C11 3.89543 10.1046 3 9 3C7.89543 3 7 3.89543 7 5C7 6.10457 7.89543 7 9 7Z",fill:"currentColor"}),t.createElement("path",{d:"M9 14C10.1046 14 11 13.1046 11 12C11 10.8954 10.1046 10 9 10C7.89543 10 7 10.8954 7 12C7 13.1046 7.89543 14 9 14Z",fill:"currentColor"}),t.createElement("path",{d:"M11 19C11 20.1046 10.1046 21 9 21C7.89543 21 7 20.1046 7 19C7 17.8954 7.89543 17 9 17C10.1046 17 11 17.8954 11 19Z",fill:"currentColor"}),t.createElement("path",{d:"M15 7C16.1046 7 17 6.10457 17 5C17 3.89543 16.1046 3 15 3C13.8954 3 13 3.89543 13 5C13 6.10457 13.8954 7 15 7Z",fill:"currentColor"}),t.createElement("path",{d:"M17 12C17 13.1046 16.1046 14 15 14C13.8954 14 13 13.1046 13 12C13 10.8954 13.8954 10 15 10C16.1046 10 17 10.8954 17 12Z",fill:"currentColor"}),t.createElement("path",{d:"M15 21C16.1046 21 17 20.1046 17 19C17 17.8954 16.1046 17 15 17C13.8954 17 13 17.8954 13 19C13 20.1046 13.8954 21 15 21Z",fill:"currentColor"}))}),"handle"),at=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M2 12C2 11.1716 2.67157 10.5 3.5 10.5H20.5C21.3284 10.5 22 11.1716 22 12C22 12.8284 21.3284 13.5 20.5 13.5H3.5C2.67157 13.5 2 12.8284 2 12Z",fill:"currentColor"}))}),"minus"),lt=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M4.5 4.75C4.5 3.23122 5.73122 2 7.25 2C8.76878 2 10 3.23122 10 4.75V19.25C10 20.7688 8.76878 22 7.25 22C5.73122 22 4.5 20.7688 4.5 19.25V4.75Z",fill:"currentColor"}),t.createElement("path",{d:"M14 4.75C14 3.23122 15.2312 2 16.75 2C18.2688 2 19.5 3.23122 19.5 4.75V19.25C19.5 20.7688 18.2688 22 16.75 22C15.2312 22 14 20.7688 14 19.25V4.75Z",fill:"currentColor"}))}),"pause"),ct=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M5 2.90101C5 2.09583 5.90303 1.62081 6.56653 2.07697L19.8014 11.1759C20.3794 11.5733 20.3794 12.4267 19.8014 12.824L6.56653 21.923C5.90303 22.3792 5 21.9041 5 21.0989V2.90101Z",fill:"currentColor"}))}),"play"),ut=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M20.5 13.5C21.3284 13.5 22 12.8284 22 12C22 11.1716 21.3284 10.5 20.5 10.5L13.5 10.5L13.5 3.5C13.5 2.67157 12.8284 2 12 2C11.1716 2 10.5 2.67157 10.5 3.5L10.5 10.5L3.5 10.5C2.67157 10.5 2 11.1716 2 12C2 12.8284 2.67157 13.5 3.5 13.5L10.5 13.5V20.5C10.5 21.3284 11.1716 22 12 22C12.8284 22 13.5 21.3284 13.5 20.5V13.5L20.5 13.5Z",fill:"currentColor"}))}),"plus"),ht=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99973 5.07197C7.19713 5.53535 6.20729 5.53113 5.40866 5.06092L5.1637 4.91669C4.55751 4.55978 3.77662 4.65563 3.34264 5.20927C2.69567 6.03462 2.17585 6.94251 1.79166 7.90124C1.53027 8.55354 1.83733 9.27693 2.449 9.62286L2.69407 9.76145C3.50107 10.2178 4.00002 11.0732 4.00002 12.0003C4.00002 12.9271 3.50145 13.7822 2.69492 14.2387L2.44842 14.3783C1.83596 14.725 1.52888 15.4497 1.79213 16.1024C1.98358 16.577 2.21048 17.044 2.47374 17.5C2.73723 17.9564 3.0285 18.3868 3.34416 18.7902C3.77773 19.3443 4.5588 19.4406 5.16498 19.0834L5.40839 18.9399C6.20714 18.4692 7.19739 18.4648 8.0003 18.9284C8.80291 19.3918 9.29417 20.2511 9.28627 21.1778L9.28386 21.4601C9.27787 22.1629 9.75107 22.7906 10.4468 22.8903C11.4692 23.0368 12.5154 23.0404 13.5537 22.8927C14.2499 22.7936 14.7231 22.1653 14.7169 21.462L14.7143 21.1785C14.7061 20.2514 15.1974 19.3916 16.0003 18.928C16.8029 18.4647 17.7927 18.4689 18.5914 18.9391L18.8363 19.0833C19.4425 19.4402 20.2234 19.3444 20.6574 18.7907C21.3044 17.9654 21.8242 17.0575 22.2084 16.0988C22.4698 15.4465 22.1627 14.7231 21.551 14.3772L21.306 14.2386C20.499 13.7822 20 12.9268 20 11.9997C20 11.0729 20.4986 10.2178 21.3051 9.76126L21.5516 9.62174C22.1641 9.27506 22.4712 8.55029 22.2079 7.89761C22.0165 7.42297 21.7896 6.95598 21.5263 6.50001C21.2628 6.04362 20.9715 5.61325 20.6559 5.20982C20.2223 4.65568 19.4412 4.55944 18.8351 4.91665L18.5916 5.06009C17.7929 5.53078 16.8026 5.53519 15.9997 5.07163C15.1971 4.60825 14.7059 3.74891 14.7138 2.82218L14.7162 2.53994C14.7222 1.83708 14.249 1.20945 13.5532 1.10973C12.5308 0.963214 11.4846 0.959581 10.4464 1.10733C9.75011 1.20641 9.27691 1.83473 9.28317 2.53798L9.28569 2.82154C9.29395 3.74862 8.80264 4.60841 7.99973 5.07197ZM14 15.4641C15.9132 14.3595 16.5687 11.9132 15.4641 9.99999C14.3595 8.08682 11.9132 7.43132 10 8.53589C8.08684 9.64046 7.43134 12.0868 8.53591 14C9.64048 15.9132 12.0868 16.5687 14 15.4641Z",fill:"currentColor"}))}),"setting"),ft=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 2C3.34315 2 2 3.34315 2 5V19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V5C22 3.34315 20.6569 2 19 2H5ZM6 5C5.44772 5 5 5.44772 5 6C5 6.55228 5.44772 7 6 7H18C18.5523 7 19 6.55228 19 6C19 5.44772 18.5523 5 18 5H6ZM5 10C5 9.44772 5.44772 9 6 9H10C10.5523 9 11 9.44772 11 10V18C11 18.5523 10.5523 19 10 19H6C5.44772 19 5 18.5523 5 18V10ZM14 9C13.4477 9 13 9.44772 13 10V15C13 15.5523 13.4477 16 14 16H18C18.5523 16 19 15.5523 19 15V10C19 9.44772 18.5523 9 18 9H14Z",fill:"currentColor"}))}),"template"),dt=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3516 4.2652C22.0336 4.73552 22.2052 5.66964 21.7348 6.35162L11.7348 20.8516C11.4765 21.2262 11.0622 21.4632 10.6084 21.4961C10.1546 21.529 9.71041 21.3541 9.40082 21.0207L2.90082 14.0207C2.33711 13.4136 2.37226 12.4645 2.97933 11.9008C3.5864 11.3371 4.53549 11.3723 5.0992 11.9793L10.3268 17.6091L19.2652 4.64842C19.7355 3.96644 20.6696 3.79487 21.3516 4.2652Z",fill:"currentColor"}))}),"tick"),pt=(0,s.withField)((n=>{const[r,i]=(0,t.useState)(!1);return e().createElement(s.Popover,{position:"leftTop",onVisibleChange:t=>{i(t)},showArrow:!0,trigger:"click",content:e().createElement("article",{style:{padding:8,width:360}},e().createElement("span",null," 请输入表达式 "),e().createElement(s.TextArea,{value:n.value,onChange:t=>{n&&n.onChange(t)}}))},n.value&&e().createElement(s.Button,{type:"primary",size:"small",theme:"borderless",icon:e().createElement(nt,null)}),!n.value&&e().createElement(s.Button,{className:r?"is-open":"",type:"tertiary",size:"small",theme:"borderless",icon:e().createElement(nt,null)}))})),gt=(0,s.withField)((({value:t,options:n,onChange:r})=>{const{Option:i}=s.Select,o=t||[],a=(t,e,n)=>{const i=o.map(((r,i)=>(i===n&&(r[t]=e),r)));r(i)},l=n.pageVariables.map((t=>({label:t.name,value:t.name})));return e().createElement("div",{className:"event-edit"},o.map(((t,n)=>e().createElement("div",{key:n,className:"event-action-config"},e().createElement(rt,{className:"action-delete",onClick:()=>{(t=>{o.splice(t,1),r(JSON.parse(JSON.stringify(o)))})(n)}}),e().createElement("div",{className:"action-field"},e().createElement("div",{className:"action-label"},"动作"),e().createElement(s.Select,{label:"动作",value:t.name,size:"small",onChange:t=>a("name",t,n)},e().createElement(i,{value:"setvar"},"设置页面变量"),e().createElement(i,{value:"setglobal"},"设置全局变量"))),"setvar"===t.name&&e().createElement(e().Fragment,null,e().createElement("div",{className:"action-field"},e().createElement("div",{className:"action-label"},"目标"),e().createElement(s.Select,{size:"small",style:{width:120},filter:!0,optionList:l,value:t.target,onChange:t=>a("target",t,n)})),e().createElement("div",{className:"action-field"},e().createElement("div",{className:"action-label"},"取值"),e().createElement(s.Input,{size:"small",value:t.expr,addonAfter:e().createElement(it,{onClick:()=>((t,e)=>{const{Ridge:n}=window;n&&n.openCodeEditor&&n.openCodeEditor({lang:"js",code:t,completed:t=>{a("expr",t,e)}})})(t.value,n)}),onChange:t=>a("expr",t,n)}))),"setglobal"===t.name&&e().createElement(s.Select,null)))),e().createElement(s.Button,{size:"small",className:"action-add",icon:e().createElement(ut,null),onClick:()=>{const t=o.concat({name:"setvar",target:"",expr:""});r(t)}}))})),mt=gt,Ot=(0,s.withField)((({value:t,options:n,onChange:r})=>{const i=JSON.stringify(t);return e().createElement(s.Input,{size:"small",value:i,addonAfter:e().createElement(it,{style:{cursor:"pointer"},onClick:()=>(t=>{const{Ridge:e}=window;e&&e.openCodeEditor&&e.openCodeEditor({lang:"json",code:t,completed:t=>{r(t)}})})(i)}),onChange:t=>r(JSON.parse(t))})}));var vt=n(7056),bt={};bt.styleTagTransform=Y(),bt.setAttributes=W(),bt.insert=B().bind(null,"head"),bt.domAPI=I(),bt.insertStyleElement=G(),U()(vt.Z,bt),vt.Z&&vt.Z.locals&&vt.Z.locals;class yt extends e().Component{constructor(t){super(t),this.ref=e().createRef()}renderCol(t){const{InputNumber:n,TextArea:r,Select:i,Checkbox:o,Input:a}=s.Form,{options:l}=this.props,c=!!t.readonly&&t.readonly(this.api.getValues());if(t.hidden&&t.hidden(this.api.getValues()))return;null==t.control&&(t.control=t.type);let u=null;switch(t.control){case"number":u=e().createElement(n,{size:"small",label:t.label,disabled:c,field:t.field});break;case"text":case"string":u=e().createElement(a,{size:"small",label:t.label,field:t.field});break;case"boolean":case"checkbox":u=e().createElement(o,{size:"small",label:t.label,field:t.field});break;case"select":u=t.required?e().createElement(i,{size:"small",label:t.label,field:t.field,optionList:t.optionList}):e().createElement(i,{placeholder:"请选择",showClear:!0,size:"small",label:t.label,field:t.field,optionList:t.optionList});break;case"border":u=e().createElement(D,{label:t.label,field:t.field});break;case"css-style":u=e().createElement(r,{label:t.label,field:t.field});break;case"event":u=e().createElement(mt,{labelPosition:"top",label:t.label,field:t.field,options:l});break;case"json-editor":u=e().createElement(Ot,{label:t.label,field:t.field})}return!1===t.bindable?u:e().createElement("div",{className:"with-code-expr"},u,e().createElement(pt,{noLabel:!0,fieldStyle:{width:"36px"},field:t.fieldEx,options:l}))}render(){const{Section:t}=s.Form,n=this.renderCol.bind(this),r=(t,r)=>e().createElement("div",{className:"row",key:r},t.cols.length>1&&e().createElement(e().Fragment,null,t.cols.map(((r,i)=>e().createElement("div",{key:i,className:"col-"+24/t.cols.length},n(r))))),1===t.cols.length&&n(t.cols[0])),{sections:i,getFormApi:o,onValueChange:a,style:l}=this.props;return e().createElement("div",{className:"object-form",style:l},e().createElement(s.Form,{size:"small",labelPosition:"left",getFormApi:t=>{this.api=t,o&&o(t)},onValueChange:a},i.map(((n,i)=>e().createElement("div",{key:i,className:"object-section"},n.title&&e().createElement(t,null,n.rows.map(r)),!n.title&&n.rows.map(r))))))}}var wt=n(1533),xt=n.n(wt);function St(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function kt(t,e){return function(n){n&&(t[e]=n)}}function Ct(t,e,n){return function(r){r&&(t[e][n]=r)}}function Qt(t,e){return function(n){var r=n.prototype;t.forEach((function(t){e(r,t)}))}}var _t=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,i=n.indexOf(t),o=-1===i?n.length:i;n[o]=t,r[o]=e},t}(),Pt=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),Et="function"==typeof Map,Tt=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}(),$t=function(){function t(t,e,n,r,i,o,s,a){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=s,this.fixed=a}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var n=[],r=[];return t.forEach((function(t){var e=t[0],i=t[1],o=new Tt;n[e]=o,r[i]=o})),n.forEach((function(t,e){t.connect(n[e-1])})),t.filter((function(t,n){return!e[n]})).map((function(t,e){var i=t[0],o=t[1];if(i===o)return[0,0];var s=n[i],a=r[o-1],l=s.getIndex();return s.disconnect(),a?s.connect(a,a.next):s.connect(void 0,n[0]),[l,s.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,n=[];this.cacheOrdered=t.filter((function(t,r){var i=t[0],o=t[1],s=e[r],a=s[0],l=s[1];if(i!==o)return n.push([a,l]),!0})),this.cachePureChanged=n},t}();function Rt(t,e,n){var r=Et?Map:n?Pt:_t,i=n||function(t){return t},o=[],s=[],a=[],l=t.map(i),c=e.map(i),u=new r,h=new r,f=[],d=[],p={},g=[],m=0,O=0;return l.forEach((function(t,e){u.set(t,e)})),c.forEach((function(t,e){h.set(t,e)})),l.forEach((function(t,e){var n=h.get(t);void 0===n?(++O,s.push(e)):p[n]=O})),c.forEach((function(t,e){var n=u.get(t);void 0===n?(o.push(e),++m):(a.push([n,e]),O=p[e]||0,f.push([n-O,e-m]),d.push(e===n),n!==e&&g.push([n,e]))})),s.reverse(),new $t(t,e,o,s,g,a,f,d)}var Mt=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=Rt(this.list,e,this.findKeyCallback);return this.list=e,n},t}();const At=Mt;var Dt="undefined",jt=typeof window!==Dt,qt=(typeof document!==Dt&&document,[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}]),Xt=1e-7,Vt={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function Ut(t,e,n,r){return(t*r+e*n)/(n+r)}function Zt(t){return typeof t===Dt}function It(t){return t&&"object"==typeof t}function Nt(t){return Array.isArray(t)}function Bt(t){return"string"==typeof t}function zt(t){return"number"==typeof t}function Wt(t){return"function"==typeof t}function Lt(t,e,n,r,i){return Gt(t,e,n)?n:function(t,e,n,r,i){for(var o,s=function(n){var s=e[n].trim();if(s===t.close&&!Gt(t,e,n))return{value:n};var a=n,l=ie(i,(function(t){return t.open===s}));if(l&&(a=Lt(l,e,n,r,i)),-1===a)return o=n,"break";o=n=a},a=n;a<r;++a){var l=s(a);if(a=o,"object"==typeof l)return l.value;if("break"===l)break}return-1}(t,e,n+1,r,i)}function Gt(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Ft(t,e){var n=Bt(e)?{separator:e}:e,r=n.separator,i=void 0===r?",":r,o=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,a=n.isSeparateOpenClose,l=void 0===a?s:a,c=n.openCloseCharacters,u=void 0===c?qt:c,h=u.map((function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n})).join("|"),f=new RegExp("(\\s*"+i+"\\s*|"+h+"|\\s+)","g"),d=t.split(f).filter(Boolean),p=d.length,g=[],m=[];function O(){return!!m.length&&(g.push(m.join("")),m=[],!0)}for(var v,b=function(e){var n=d[e].trim(),r=e,a=ie(u,(function(t){return t.open===n})),c=ie(u,(function(t){return t.close===n}));if(a){if(-1!==(r=Lt(a,d,e,p,u))&&l)return O()&&o?(v=e,"break"):(g.push(d.slice(e,r+1).join("")),e=r,o?(v=e,"break"):(v=e,"continue"))}else{if(c&&!Gt(c,d,e)){var h=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(u);return h.splice(u.indexOf(c),1),{value:Ft(t,{separator:i,isSeparateFirst:o,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:h})}}if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(n,i)&&!s)return O(),o?(v=e,"break"):(v=e,"continue")}-1===r&&(r=p-1),m.push(d.slice(e,r+1).join("")),v=e=r},y=0;y<p;++y){var w=b(y);if(y=v,"object"==typeof w)return w.value;if("break"===w)break}return m.length&&g.push(m.join("")),g}function Yt(t){return Ft(t,"")}function Ht(t){return Ft(t,",")}function Jt(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Kt(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function te(t){return t.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()}))}function ee(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,n,r){return""+n+e+r.toLowerCase()}))}function ne(){return Date.now?Date.now():(new Date).getTime()}function re(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function ie(t,e,n){var r=re(t,e);return r>-1?t[r]:n}var oe=function(){var t=ne(),e=jt&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(e){var n=ne();return window.setTimeout((function(){e(n-t)}),1e3/60)}}(),se=function(){var t=jt&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function ae(t){return Object.keys(t)}function le(t,e){var n=Kt(t),r=n.value,i=n.unit;if(It(e)){var o=e[i];if(o){if(Wt(o))return o(r);if(Vt[i])return Vt[i](r,o)}}else if("%"===i)return r*e/100;return Vt[i]?Vt[i](r):r}function ce(t,e,n){return Math.max(e,Math.min(t,n))}function ue(t,e,n,r){return void 0===r&&(r=t[0]/t[1]),[[me(e[0],Xt),me(e[0]/r,Xt)],[me(e[1]*r,Xt),me(e[1],Xt)]].filter((function(t){return t.every((function(t,r){var i=e[r],o=me(i,Xt);return n?t<=i||t<=o:t>=i||t>=o}))}))[0]||t}function he(t,e,n,r){if(!r)return t.map((function(t,r){return ce(t,e[r],n[r])}));var i=t[0],o=t[1],s=!0===r?i/o:r,a=ue(t,e,!1,s),l=a[0],c=a[1],u=ue(t,n,!0,s),h=u[0],f=u[1];return i<l||o<c?(i=l,o=c):(i>h||o>f)&&(i=h,o=f),[i,o]}function fe(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function de(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+2*Math.PI}function pe(t){var e=function(t){return[0,1].map((function(e){return fe(t.map((function(t){return t[e]})))}))}(t),n=de(e,t[0]),r=de(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function ge(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function me(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function Oe(t,e){return t.forEach((function(n,r){t[r]=me(t[r],e)})),t}function ve(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function be(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function ye(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function we(t,e,n,r){t.addEventListener(e,n,r)}function xe(t,e,n,r){t.removeEventListener(e,n,r)}var Se=function(t,e){return Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Se(t,e)};function ke(t,e){function n(){this.constructor=t}Se(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ce=function(){return Ce=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ce.apply(this,arguments)};function Qe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function _e(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function Pe(t,e){var n=Object.keys(t),r=Object.keys(e),i=Rt(n,r,(function(t){return t})),o={},s={},a={};return i.added.forEach((function(t){var n=r[t];o[n]=e[n]})),i.removed.forEach((function(e){var r=n[e];s[r]=t[r]})),i.maintained.forEach((function(r){var i=r[0],o=n[i],s=[t[o],e[o]];t[o]!==e[o]&&(a[o]=s)})),{added:o,removed:s,changed:a}}function Ee(t){t.forEach((function(t){t()}))}function Te(t){var e=0;return t.map((function(t){return null==t?"$compat"+ ++e:""+t}))}function $e(t,e,n,r){return Bt(t)||zt(t)?new Xe("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?Ve:t.type.prototype.render?Be:Ie)(t.type,e,n,r,t.ref,t.props)}function Re(t){var e=[];return t.forEach((function(t){e=e.concat(Nt(t)?Re(t):t)})),e}function Me(t){var e=t.className,n=Qe(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function Ae(t,e){if(!e)return t;for(var n in e)Zt(t[n])&&(t[n]=e[n]);return t}function De(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},o=i.key,s=i.ref,a=Qe(i,["key","ref"]);return{type:t,key:o,ref:s,props:Ce(Ce({},a),{children:Re(n).filter((function(t){return null!=t&&!1!==t}))})}}var je=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=i,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!Bt(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var i=this.props;return Bt(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?i:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function qe(t){var e={},n={};for(var r in t)0===r.indexOf("on")?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var Xe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ke(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){n?e._mounted():e._updated()})),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(je),Ve=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e._isSVG=!1,e}ke(e,t);var n=e.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return _e(this.props,t)},n._render=function(t,e){var n=this,r=!this.base;if(r){var i=this._hasSVG();this._isSVG=i;var o=this.props.portalContainer;if(!o){var s=this.type;o=i?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)}this.base=o}Ge(this,this._providers,this.props.children,t,null);var a=this.base,l=qe(e),c=l.attributes,u=l.events,h=qe(this.props),f=h.attributes,d=h.events;return function(t,e,n){var r=Pe(t,e),i=r.added,o=r.removed,s=r.changed;for(var a in i)n.setAttribute(a,i[a]);for(var a in s)n.setAttribute(a,s[a][1]);for(var a in o)n.removeAttribute(a)}(Me(c),Me(f),a),function(t,e,n){var r=Pe(t,e),i=r.added,o=r.removed,s=r.changed;for(var a in o)n.removeEventListener(a);for(var a in i)n.addEventListener(a,i[a]);for(var a in s)n.removeEventListener(a),n.addEventListener(a,s[a][1]);for(var a in o)n.removeEventListener(a)}(u,d,this),function(t,e,n){var r=n.style,i=Pe(t,e),o=i.added,s=i.removed,a=i.changed;for(var l in o){var c=ee(l,"-");r.setProperty?r.setProperty(c,o[l]):r[c]=o[l]}for(var l in a)c=ee(l,"-"),r.setProperty?r.setProperty(c,a[l][1]):r[c]=a[l][1];for(var l in s)c=ee(l,"-"),r.removeProperty?r.removeProperty(c):r[c]=""}(e.style||{},this.props.style||{},a),t.push((function(){r?n._mounted():n._updated()})),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach((function(t){t._unmount()})),this.events={},this.props.portalContainer||e.parentNode.removeChild(e)},n._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=Ue(this.container);return t&&"ownerSVGElement"in t},e}(je);function Ue(t){if(!t)return null;var e=t.base;return e instanceof Node?e:Ue(t.container)}function Ze(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?Ze(e[0].base):null}var Ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ke(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return Ge(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},e}(je),Ne=function(t){function e(e){var n=t.call(this,"container","container",0,null)||this;return n.base=e,n}ke(e,t);var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(je),Be=function(t){function e(e,n,r,i,o,s){return void 0===s&&(s={}),t.call(this,e,n,r,i,o,Ae(s,e.defaultProps))||this}ke(e,t);var n=e.prototype;return n._should=function(t,e){return this.base.shouldComponentUpdate(Ae(t,this.type.defaultProps),e||this.base.state)},n._render=function(t,e){var n=this;this.props=Ae(this.props,this.type.defaultProps);var r=!this.base;r?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var i=this.base,o=i.state,s=i.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),Ge(this,this._providers,s?[s]:[],t),t.push((function(){r?(n._mounted(),i.componentDidMount()):(n._updated(),i.componentDidUpdate(e,o))}))},n._setState=function(t){var e=this.base;e&&t&&(e.state=t)},n._unmount=function(){this._providers.forEach((function(t){t._unmount()})),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(je),ze=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=Ce(Ce({},this.$_state),t),n?this.$_setState(e,n):this.$_timer=setTimeout((function(){r.$_timer=0,r.$_setState(e,n)}))},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var n=[],r=this.$_provider;Ge(r.container,[r],[r.original],n,Ce(Ce({},this.state),this.$_state),e)&&(t&&n.push(t),Ee(n))},t}(),We=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ke(e,t),e.prototype.shouldComponentUpdate=function(t,e){return _e(this.props,t)||_e(this.state,e)},e}(ze),Le=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ke(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=new Ne(n),Fe(e,n,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;Fe(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){Fe(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(We);function Ge(t,e,n,r,i,o){var s=function(t,e,n){var r=n.map((function(t){return Bt(t)?null:t.key})),i=Te(e.map((function(t){return t.key}))),o=Rt(i,Te(r),(function(t){return t}));o.removed.forEach((function(t){e.splice(t,1)[0]._unmount()})),o.ordered.forEach((function(t){var n=t[0],r=t[1],i=e.splice(n,1)[0];e.splice(r,0,i);var o=Ze(i.base),s=Ze(e[r+1]&&e[r+1].base);o&&o.parentNode.insertBefore(o,s)})),o.added.forEach((function(i){e.splice(i,0,$e(n[i],r[i],i,t))}));var s=o.maintained.filter((function(i){i[0];var o=i[1],s=n[o],a=e[o];return(Bt(s)?"text_"+s:s.type)!==a.type?(a._unmount(),e.splice(o,1,$e(s,r[o],o,t)),!0):(a.index=o,!1)}));return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(o.added,s.map((function(t){return t[0],t[1]})))}(t,e,n),a=e.filter((function(t,e){return t._update(r,n[e],i,o)})),l=Ue(t);return l&&s.reverse().forEach((function(n){var r=e[n],i=Ze(r.base);if(i&&l!==i&&!i.parentNode){var o=function(t,e){for(var n=t._providers,r=n.length,i=e.index+1;i<r;++i){var o=Ze(n[i].base);if(o)return o}return null}(t,r);l.insertBefore(i,o)}})),a.length>0}function Fe(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var r=!!n;return n||(n=new Ne(e)),function(t,e,n){var r=[];Ge(t,t._providers,e,r,void 0),Ee(r)}(n,t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function Ye(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),Fe(t,e,r),n&&n()}function He(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function Je(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function Ke(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function tn(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function en(t){return t.replace(/_/g,".")}function nn(t,e){var n=null,r="-1";return He(t,(function(t){var i=tn("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!i||t.brand||(n=t,r=i[3]||"-1",t.versionAlias?r=t.versionAlias:t.versionTest&&(r=function(t,e){var n=tn("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}(t.versionTest.toLowerCase(),e)||r),r=en(r),0))})),{preset:n,version:r}}function rn(t,e){var n={brand:"",version:"-1"};return He(t,(function(t){var r=on(e,t);return!!r&&(n.brand=t.id,n.version=t.versionAlias||r.version,"-1"!==n.version)})),n}function on(t,e){return Je(t,(function(t){var n=t.brand;return tn(""+e.test,n.toLowerCase())}))}var sn=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],an=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],ln=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],cn=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],un=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function hn(t){return!!nn(cn,t).preset}const fn=function(t){return void 0===t&&function(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}()?function(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=t&&t.fullVersionList,i=e.mobile||!1,o=n[0],s=(t&&t.platform||e.platform||navigator.platform).toLowerCase(),a={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!rn(cn,n).brand||hn(Ke())},l={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&He(ln,(function(t){return on(n,t)}));var c=rn(an,n);if(a.chromium=!!c.brand,a.chromiumVersion=c.version,!a.chromium){var u=rn(ln,n);a.webkit=!!u.brand,a.webkitVersion=u.version}var h=Je(un,(function(t){return new RegExp(""+t.test,"g").exec(s)}));if(l.name=h?h.id:"",t&&(l.version=t.platformVersion),r&&r.length){var f=rn(sn,r);a.name=f.brand||a.name,a.version=f.version||a.version}else{var d=rn(sn,n);a.name=d.brand||a.name,a.version=d.brand&&t?t.uaFullVersion:d.version}return a.webkit&&(l.name=i?"ios":"mac"),"ios"===l.name&&a.webview&&(a.version="-1"),l.version=en(l.version),a.version=en(a.version),l.majorVersion=parseInt(l.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:l,isMobile:i,isHints:!0}}():function(t){var e=Ke(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:hn(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=nn(sn,e),s=o.preset,a=o.version,l=nn(un,e),c=l.preset,u=l.version,h=nn(an,e);if(r.chromium=!!h.preset,r.chromiumVersion=h.version,!r.chromium){var f=nn(ln,e);r.webkit=!!f.preset,r.webkitVersion=f.version}return c&&(i.name=c.id,i.version=u,i.majorVersion=parseInt(u,10)),s&&(r.name=s.id,r.version=a,r.webview&&"ios"===i.name&&"safari"!==r.name&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}(t)};function dn(t,e,n,r,i,o){for(var s=0;s<i;++s){var a=n+s*i,l=r+s*i;t[a]+=t[l]*o,e[a]+=e[l]*o}}function pn(t,e,n,r,i){for(var o=0;o<i;++o){var s=n+o*i,a=r+o*i,l=t[s],c=e[s];t[s]=t[a],t[a]=l,e[s]=e[a],e[a]=c}}function gn(t,e,n,r,i){for(var o=0;o<r;++o){var s=n+o*r;t[s]/=i,e[s]/=i}}function mn(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function On(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Dn(e),i=0;i<e;++i){var o=e*i+i;if(!me(n[o],Xt))for(var s=i+1;s<e;++s)if(n[e*i+s]){pn(n,r,i,s,e);break}if(!me(n[o],Xt))return[];for(gn(n,r,i,e,n[o]),s=0;s<e;++s){var a=s,l=n[s+i*e];me(l,Xt)&&i!==s&&dn(n,r,a,i,e,-l)}}return r}function vn(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function bn(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function yn(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=Dn(n),i=Math.min(e,n),o=0;o<i-1;++o){for(var s=0;s<i-1;++s)r[o*n+s]=t[o*e+s];r[(o+1)*n-1]=t[(o+1)*e-1],r[(n-1)*n+o]=t[(e-1)*e+o]}return r[n*n-1]=t[e*e-1],r}function wn(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Dn(t);return e.forEach((function(e){r=xn(r,e,t)})),r}function xn(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,o=e.length/i;if(!i)return e;if(!o)return t;for(var s=0;s<n;++s)for(var a=0;a<o;++a){r[a*n+s]=0;for(var l=0;l<i;++l)r[a*n+s]+=t[l*n+s]*e[a*i+l]}return r}function Sn(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function kn(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function Cn(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function Qn(t,e,n){void 0===n&&(n=e.length);var r=xn(t,e,n),i=r[n-1];return r.map((function(t){return t/i}))}function _n(t,e){return xn(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Pn(t,e){return xn(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function En(t,e){return xn(t,An(e,4))}function Tn(t,e){var n=e[0],r=void 0===n?1:n,i=e[1],o=void 0===i?1:i,s=e[2];return xn(t,[r,0,0,0,0,o,0,0,0,0,void 0===s?1:s,0,0,0,0,1],4)}function $n(t,e){return Qn(An(e,3),bn(t,3))}function Rn(t,e){var n=e[0],r=void 0===n?0:n,i=e[1],o=void 0===i?0:i,s=e[2];return xn(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,void 0===s?0:s,1],4)}function Mn(t,e){return xn(t,e,4)}function An(t,e){var n=Math.cos(t),r=Math.sin(t),i=Dn(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function Dn(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function jn(t,e){for(var n=Dn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function qn(t,e){for(var n=Dn(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function Xn(t,e,n,r,i,o,s,a){var l=t[0],c=t[1],u=e[0],h=e[1],f=n[0],d=n[1],p=r[0],g=r[1],m=i[0],O=i[1],v=o[0],b=o[1],y=s[0],w=s[1],x=a[0],S=a[1],k=On([l,0,u,0,f,0,p,0,c,0,h,0,d,0,g,0,1,0,1,0,1,0,1,0,0,l,0,u,0,f,0,p,0,c,0,h,0,d,0,g,0,1,0,1,0,1,0,1,-m*l,-O*l,-v*u,-b*u,-y*f,-w*f,-x*p,-S*p,-m*c,-O*c,-v*h,-b*h,-y*d,-w*d,-x*g,-S*g],8);if(!k.length)return[];var C=xn(k,[m,O,v,b,y,w,x,S],8);return C[8]=1,yn(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}(C),3,4)}function Vn(t){return Zn(In(t))}function Un(t,e){var n=Qn(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Zn(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(t){var n=t.matrixFunction,r=t.functionValue;n&&(e=n(e,r))})),e}function In(t){return(Nt(t)?t:Yt(t)).map((function(t){var e=Jt(t),n=e.prefix,r=e.value,i=null,o=n,s="";if("translate"===n||"translateX"===n||"translate3d"===n){var a=Ht(r).map((function(t){return parseFloat(t)})),l=a[0],c=a[1],u=void 0===c?0:c,h=a[2];i=Rn,s=[l,u,void 0===h?0:h]}else if("translateY"===n)i=Rn,s=[0,u=parseFloat(r),0];else if("translateZ"===n)i=Rn,s=[0,0,parseFloat(r)];else if("scale"===n||"scale3d"===n){var f=Ht(r).map((function(t){return parseFloat(t)})),d=f[0],p=f[1],g=void 0===p?d:p,m=f[2];i=Tn,s=[d,g,void 0===m?1:m]}else if("scaleX"===n)i=Tn,s=[d=parseFloat(r),1,1];else if("scaleY"===n)i=Tn,s=[1,g=parseFloat(r),1];else if("scaleZ"===n)i=Tn,s=[1,1,parseFloat(r)];else if("rotate"===n||"rotateZ"===n||"rotateX"===n||"rotateY"===n){var O=Kt(r),v=O.unit,b=O.value;"rotate"===n||"rotateZ"===n?(o="rotateZ",i=En):"rotateX"===n?i=_n:"rotateY"===n&&(i=Pn),s="rad"===v?b:b*Math.PI/180}else if("matrix3d"===n)i=Mn,s=Ht(r).map((function(t){return parseFloat(t)}));else if("matrix"===n){var y=Ht(r).map((function(t){return parseFloat(t)}));i=Mn,s=[y[0],y[1],0,0,y[2],y[3],0,0,0,0,1,0,y[4],y[5],0,1]}else o="";return{name:n,functionName:o,value:r,matrixFunction:i,functionValue:s}}))}var Nn,Bn=function(t,e){return Bn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Bn(t,e)},zn="function"==typeof Map?void 0:(Nn=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++Nn)}),Wn=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,zn)||this}return function(t,e){function n(){this.constructor=t}Bn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(At);function Ln(t,e){return Rt(t,e,zn)}const Gn=Wn;function Fn(t){return me(t,Xt)}function Yn(t){return t.length<3?0:Math.abs(function(t){for(var e=0,n=t.length-1;n>=0;--n)e+=t[n];return e}(t.map((function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]}))))/2}function Hn(t,e){var n=e.width,r=e.height,i=e.left,o=e.top,s=Jn(t),a=s.minX,l=s.minY,c=s.maxX,u=s.maxY,h=n/(c-a),f=r/(u-l);return t.map((function(t){return[i+(t[0]-a)*h,o+(t[1]-l)*f]}))}function Jn(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Kn(t,e,n){var r=t[0],i=t[1],o=Jn(e),s=o.minX,a=o.maxX,l=[[s,i],[a,i]],c=tr(l[0],l[1]),u=rr(e),h=[];if(u.forEach((function(e){var n,r=tr(e[0],e[1]),o=e[0];n=r,c.every((function(t,e){return 0===Fn(t-n[e])}))?h.push({pos:t,line:e,type:"line"}):nr(er(c,r),[l,e]).forEach((function(t){e.some((function(e){return r=t,!Fn((n=e)[0]-r[0])&&!Fn(n[1]-r[1]);var n,r}))?h.push({pos:t,line:e,type:"point"}):0!==Fn(o[1]-i)&&h.push({pos:t,line:e,type:"intersection"})}))})),!n&&ie(h,(function(t){return t[0]===r})))return!0;var f=0,d={};return h.forEach((function(t){var e=t.pos,n=t.type,o=t.line;if(!(e[0]>r))if("intersection"===n)++f;else{if("line"===n)return;if("point"===n){var s=ie(o,(function(t){return t[1]!==i})),a=d[e[0]],l=s[1]>i?1:-1;a?a!==l&&++f:d[e[0]]=l}}})),f%2==1}function tr(t,e){var n=t[0],r=t[1],i=e[0]-n,o=e[1]-r;Math.abs(i)<Xt&&(i=0),Math.abs(o)<Xt&&(o=0);var s=0,a=0,l=0;return i?o?(a=1,l=-(s=-o/i)*n-r):(a=1,l=-r):o&&(s=-1,l=n),[s,a,l]}function er(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],l=0===n&&0===o,c=0===r&&0===s,u=[];if(l&&c)return[];if(l){var h=-i/r;return h!==-a/s?[]:[[-1/0,h],[1/0,h]]}if(c){var f=-i/n;return f!==-a/o?[]:[[f,-1/0],[f,1/0]]}if(0===n)u=[[d=-(s*(p=-i/r)+a)/o,p]];else if(0===o)u=[[d=-(r*(p=-a/s)+i)/n,p]];else if(0===r)u=[[d=-i/n,p=-(o*d+a)/s]];else if(0===s)u=[[d=-a/o,p=-(n*d+i)/r]];else{var d,p;u=[[d=(r*a-s*i)/(s*n-r*o),p=-(n*d+i)/r]]}return u.map((function(t){return[t[0],t[1]]}))}function nr(t,e){var n=e.map((function(t){return[0,1].map((function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]}))})),r=[];if(2===t.length){var i=t[0],o=i[0],s=i[1];if(Fn(o-t[1][0])){if(!Fn(s-t[1][1])){var a=Math.max.apply(Math,n.map((function(t){return t[0][0]}))),l=Math.min.apply(Math,n.map((function(t){return t[0][1]})));if(Fn(a-l)>0)return[];r=[[a,s],[l,s]]}}else{var c=Math.max.apply(Math,n.map((function(t){return t[1][0]}))),u=Math.min.apply(Math,n.map((function(t){return t[1][1]})));if(Fn(c-u)>0)return[];r=[[o,c],[o,u]]}}return r.length||(r=t.filter((function(t){var e=t[0],r=t[1];return n.every((function(t){return 0<=Fn(e-t[0][0])&&0<=Fn(t[0][1]-e)&&0<=Fn(r-t[1][0])&&0<=Fn(t[1][1]-r)}))}))),r.map((function(t){return[Fn(t[0]),Fn(t[1])]}))}function rr(t){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(t.slice(1),[t[0]]).map((function(e,n){return[t[n],e]}))}function ir(t,e){return function(t,e){var n=t.slice(),r=e.slice();-1===pe(n)&&n.reverse(),-1===pe(r)&&r.reverse();var i=rr(n),o=rr(r),s=i.map((function(t){return tr(t[0],t[1])})),a=o.map((function(t){return tr(t[0],t[1])})),l=[];s.forEach((function(t,e){var n=i[e],s=[];a.forEach((function(r,i){var a=nr(er(t,r),[n,o[i]]);s.push.apply(s,a.map((function(t){return{index1:e,index2:i,pos:t,type:"intersection"}})))})),s.sort((function(t,e){return ge(n[0],t.pos)-ge(n[0],e.pos)})),l.push.apply(l,s),Kn(n[1],r)&&l.push({index1:e,index2:-1,pos:n[1],type:"inside"})})),o.forEach((function(t,e){if(Kn(t[1],n)){var r=!1,i=re(l,(function(t){return t.index2===e?(r=!0,!1):!!r}));-1===i&&(r=!1,i=re(l,(function(t){var n=t.index1,i=t.index2;return-1===n&&i+1===e?(r=!0,!1):!!r}))),-1===i?l.push({index1:-1,index2:e,pos:t[1],type:"inside"}):l.splice(i,0,{index1:-1,index2:e,pos:t[1],type:"inside"})}}));var c={};return l.filter((function(t){var e=t.pos,n=e[0]+"x"+e[1];return!c[n]&&(c[n]=!0,!0)}))}(t,e).map((function(t){return t.pos}))}var or=function(){return or=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},or.apply(this,arguments)},sr=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(It(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(It(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var i=re(r,(function(t){return t.listener===e}));i>-1&&r.splice(i,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){n._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var n=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var i=!1;return e.eventType=t,e.stop=function(){i=!0},e.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(r).forEach((function(r){r.listener(e),r.once&&n.off(t,r.listener)})),!i},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(or({listener:e},n))},t}();const ar=sr;"undefined"!=typeof document&&document;var lr=function(t,e){return lr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},lr(t,e)},cr=function(){return cr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},cr.apply(this,arguments)};function ur(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function hr(t){return t?"string"==typeof t?document.querySelector(t):function(t){return"function"==typeof t}(t)?t():t instanceof Element?t:"current"in t?t.current:"value"in t?t.value:void 0:null}var fr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._startRect=null,e._startPos=[],e._prevTime=0,e._timer=0,e._prevScrollPos=[0,0],e._isWait=!1,e._flag=!1,e}!function(t,e){function n(){this.constructor=t}lr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.dragStart=function(t,e){var n=hr(e.container);if(n){var r=0,i=0,o=0,s=0;if(n===document.body)o=window.innerWidth,s=window.innerHeight;else{var a=n.getBoundingClientRect();r=a.top,i=a.left,o=a.width,s=a.height}this._flag=!0,this._startPos=[t.clientX,t.clientY],this._startRect={top:r,left:i,width:o,height:s},this._prevScrollPos=this._getScrollPosition([0,0],e)}else this._flag=!1},n.drag=function(t,e){if(this._flag){var n=t.clientX,r=t.clientY,i=e.threshold,o=void 0===i?0:i,s=this._startRect,a=this._startPos,l=[0,0];return s.top>r-o?(a[1]>s.top||r<a[1])&&(l[1]=-1):s.top+s.height<r+o&&(a[1]<s.top+s.height||r>a[1])&&(l[1]=1),s.left>n-o?(a[0]>s.left||n<a[0])&&(l[0]=-1):s.left+s.width<n+o&&(a[0]<s.left+s.width||n>a[0])&&(l[0]=1),clearTimeout(this._timer),!(!l[0]&&!l[1])&&this._continueDrag(cr(cr({},e),{direction:l,inputEvent:t,isDrag:!0}))}},n.checkScroll=function(t){var e=this;if(this._isWait)return!1;var n=t.prevScrollPos,r=void 0===n?this._prevScrollPos:n,i=t.direction,o=t.throttleTime,s=void 0===o?0:o,a=t.inputEvent,l=t.isDrag,c=this._getScrollPosition(i||[0,0],t),u=c[0]-r[0],h=c[1]-r[1],f=i||[u?Math.abs(u)/u:0,h?Math.abs(h)/h:0];return this._prevScrollPos=c,!(!u&&!h||(this.trigger("move",{offsetX:f[0]?u:0,offsetY:f[1]?h:0,inputEvent:a}),s&&l&&(this._timer=window.setTimeout((function(){e._continueDrag(t)}),s)),0))},n.dragEnd=function(){clearTimeout(this._timer)},n._getScrollPosition=function(t,e){var n=e.container,r=e.getScrollPosition;return(void 0===r?ur:r)({container:hr(n),direction:t})},n._continueDrag=function(t){var e=this,n=t.container,r=t.direction,i=t.throttleTime,o=t.useScroll,s=t.isDrag,a=t.inputEvent;if(!s||!this._isWait){var l=Date.now?Date.now():(new Date).getTime(),c=Math.max(i+this._prevTime-l,0);if(c>0)return this._timer=window.setTimeout((function(){e._continueDrag(t)}),c),!1;this._prevTime=l;var u=this._getScrollPosition(r,t);return this._prevScrollPos=u,s&&(this._isWait=!0),this.trigger("scroll",{container:hr(n),direction:r,inputEvent:a}),this._isWait=!1,o||this.checkScroll(cr(cr({},t),{prevScrollPos:u,direction:r,inputEvent:a}))}},e}(ar);const dr=fr;var pr=function(t,e){return pr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},pr(t,e)},gr=function(){return gr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},gr.apply(this,arguments)};function mr(t){return 180*(e=[t[0].clientX,t[0].clientY],r=(n=[t[1].clientX,t[1].clientY])[0]-e[0],i=n[1]-e[1],((o=Math.atan2(i,r))>=0?o:o+2*Math.PI)/Math.PI);var e,n,r,i,o}function Or(t){return t?t.touches?function(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(yr(t[r]));return n}(t.touches):[yr(t)]:[]}function vr(t,e,n){var r=n.length,i=wr(t,r),o=i.clientX,s=i.clientY,a=i.originalClientX,l=i.originalClientY,c=wr(e,r),u=c.clientX,h=c.clientY,f=wr(n,r);return{clientX:a,clientY:l,deltaX:o-u,deltaY:s-h,distX:o-f.clientX,distY:s-f.clientY}}function br(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function yr(t){return{clientX:t.clientX,clientY:t.clientY}}function wr(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var i=t[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var xr=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var e=t.prototype;return e.getAngle=function(t){return void 0===t&&(t=this.prevClients),mr(t)},e.getRotation=function(t){return void 0===t&&(t=this.prevClients),mr(t)-mr(this.startClients)},e.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var n=vr(t||this.prevClients,this.prevClients,this.startClients),r=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(r*r+i*i),this.prevClients=t,n},e.getPositions=function(t){void 0===t&&(t=this.prevClients);var e=this.prevClients;return this.startClients.map((function(n,r){return vr([t[r]],[e[r]],[n])}))},e.getMovement=function(t){var e=this.movement;if(!t)return e;var n=wr(t,this.length),r=wr(this.prevClients,this.length),i=n.clientX-r.clientX,o=n.clientY-r.clientY;return Math.sqrt(i*i+o*o)+e},e.getDistance=function(t){return void 0===t&&(t=this.prevClients),br(t)},e.getScale=function(t){return void 0===t&&(t=this.prevClients),br(t)/br(this.startClients)},e.move=function(t,e){this.startClients.forEach((function(n){n.clientX-=t,n.clientY-=e}))},t}(),Sr=["textarea","input"],kr=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;r.options={},r.flag=!1,r.pinchFlag=!1,r.data={},r.isDrag=!1,r.isPinch=!1,r.isMouse=!1,r.isTouch=!1,r.clientStores=[],r.targets=[],r.prevTime=0,r.doubleFlag=!1,r._dragFlag=!1,r._isMouseEvent=!1,r._isSecondaryButton=!1,r._preventMouseEvent=!1,r.onDragStart=function(t,e){if(void 0===e&&(e=!0),r.flag||!1!==t.cancelable){var n=r.options,i=n.container,o=n.pinchOutside,s=n.preventWheelClick,a=n.preventRightClick,l=n.preventDefault,c=n.checkInput,u=n.preventClickEventOnDragStart,h=n.preventClickEventOnDrag,f=n.preventClickEventByCondition,d=r.isTouch,p=!r.flag;if(r._isSecondaryButton=3===t.which||2===t.button,s&&(2===t.which||1===t.button)||a&&(3===t.which||2===t.button))return r.stop(),!1;if(p){var g=document.activeElement,m=t.target;if(m){var O=m.tagName.toLowerCase(),v=Sr.indexOf(O)>-1,b=m.isContentEditable;if(v||b){if(c||g===m)return!1;if(g&&b&&g.isContentEditable&&g.contains(m))return!1}else if((l||"touchstart"===t.type)&&g){var y=g.tagName.toLowerCase();(g.isContentEditable||Sr.indexOf(y)>-1)&&g.blur()}(u||h||f)&&we(window,"click",r._onClick,!0)}r.clientStores=[new xr(Or(t))],r.flag=!0,r.isDrag=!1,r._dragFlag=!0,r.data={},r.doubleFlag=ne()-r.prevTime<200,r._isMouseEvent=function(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}(t),!r._isMouseEvent&&r._preventMouseEvent&&(r._preventMouseEvent=!1),!1===(r._preventMouseEvent||r.emit("dragStart",gr(gr({data:r.data,datas:r.data,inputEvent:t,isMouseEvent:r._isMouseEvent,isSecondaryButton:r._isSecondaryButton,isTrusted:e,isDouble:r.doubleFlag},r.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){r._dragFlag=!1}})))&&r.stop(),r._isMouseEvent&&r.flag&&l&&t.preventDefault()}if(!r.flag)return!1;var w=0;if(p?(r._attchDragEvent(),d&&o&&(w=setTimeout((function(){we(i,"touchstart",r.onDragStart,{passive:!1})})))):d&&o&&xe(i,"touchstart",r.onDragStart),r.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(w),p&&t.touches.length!==t.changedTouches.length)return;r.pinchFlag||r.onPinchStart(t)}}},r.onDrag=function(t,e){if(r.flag){var n=r.options.preventDefault;!r._isMouseEvent&&n&&t.preventDefault();var i=Or(t),o=r.moveClients(i,t,!1);if(r._dragFlag){if((r.pinchFlag||o.deltaX||o.deltaY)&&!1===(r._preventMouseEvent||r.emit("drag",gr(gr({},o),{isScroll:!!e,inputEvent:t}))))return void r.stop();r.pinchFlag&&r.onPinch(t,i)}r.getCurrentStore().getPosition(i,!0)}},r.onDragEnd=function(t){if(r.flag){var e=r.options,n=e.pinchOutside,i=e.container,o=e.preventClickEventOnDrag,s=e.preventClickEventOnDragStart,a=e.preventClickEventByCondition,l=r.isDrag;(o||s||a)&&requestAnimationFrame((function(){r._allowClickEvent()})),a||s||!o||l||r._allowClickEvent(),r.isTouch&&n&&xe(i,"touchstart",r.onDragStart),r.pinchFlag&&r.onPinchEnd(t);var c=(null==t?void 0:t.touches)?Or(t):[];0!==c.length&&r.options.keepDragging?r._addStore(new xr(c)):r.flag=!1;var u=r._getPosition(),h=ne(),f=!l&&r.doubleFlag;r.prevTime=l||f?0:h,r.flag||(r._dettachDragEvent(),r._preventMouseEvent||r.emit("dragEnd",gr({data:r.data,datas:r.data,isDouble:f,isDrag:l,isClick:!l,isMouseEvent:r._isMouseEvent,isSecondaryButton:r._isSecondaryButton,inputEvent:t},u)),r.clientStores=[],r._isMouseEvent||(r._preventMouseEvent=!0,requestAnimationFrame((function(){requestAnimationFrame((function(){r._preventMouseEvent=!1}))}))))}},r.onBlur=function(){r.onDragEnd()},r._allowClickEvent=function(){xe(window,"click",r._onClick,!0)},r._onClick=function(t){r._allowClickEvent(),r._preventMouseEvent=!1;var e=r.options.preventClickEventByCondition;(null==e?void 0:e(t))||(t.stopPropagation(),t.preventDefault())},r._onContextMenu=function(t){r.options.preventRightClick?r.onDragEnd(t):t.preventDefault()},r._passCallback=function(){};var i=[].concat(e);r.options=gr({checkInput:!1,container:i.length>1?window:i[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var o=r.options,s=o.container,a=o.events,l=o.checkWindowBlur;if(r.isTouch=a.indexOf("touch")>-1,r.isMouse=a.indexOf("mouse")>-1,r.targets=i,r.isMouse&&(i.forEach((function(t){we(t,"mousedown",r.onDragStart),we(t,"mousemove",r._passCallback)})),we(s,"contextmenu",r._onContextMenu)),l&&we(window,"blur",r.onBlur),r.isTouch){var c={passive:!1};i.forEach((function(t){we(t,"touchstart",r.onDragStart,c),we(t,"touchmove",r._passCallback,c)}))}return r}!function(t,e){function n(){this.constructor=t}pr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent(),this._dettachDragEvent()},n.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,e){return t+e.movement}),0)},n.isDragging=function(){return this.isDrag},n.isFlag=function(){return this.flag},n.isPinchFlag=function(){return this.pinchFlag},n.isDoubleFlag=function(){return this.doubleFlag},n.isPinching=function(){return this.isPinch},n.scrollBy=function(t,e,n,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,e),r&&this.onDrag(n,!0))},n.move=function(t,e){var n=t[0],r=t[1],i=this.getCurrentStore().prevClients;return this.moveClients(i.map((function(t){var e=t.clientX,i=t.clientY;return{clientX:e+n,clientY:i+r,originalClientX:e,originalClientY:i}})),e,!0)},n.triggerDragStart=function(t){this.onDragStart(t,!1)},n.setEventData=function(t){var e=this.data;for(var n in t)e[n]=t[n];return this},n.setEventDatas=function(t){return this.setEventData(t)},n.getCurrentEvent=function(t){return gr(gr({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},n.getEventData=function(){return this.data},n.getEventDatas=function(){return this.data},n.unset=function(){var t=this,e=this.targets,n=this.options.container;this.off(),xe(window,"blur",this.onBlur),this.isMouse&&(e.forEach((function(e){xe(e,"mousedown",t.onDragStart)})),xe(n,"contextmenu",this._onContextMenu)),this.isTouch&&(e.forEach((function(e){xe(e,"touchstart",t.onDragStart)})),xe(n,"touchstart",this.onDragStart)),this._allowClickEvent(),this._dettachDragEvent()},n.onPinchStart=function(t){var e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var n=new xr(Or(t));this.pinchFlag=!0,this._addStore(n),!1===this.emit("pinchStart",gr(gr({data:this.data,datas:this.data,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition()),{inputEvent:t}))&&(this.pinchFlag=!1)}},n.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",gr(gr({data:this.data,datas:this.data,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e)),{inputEvent:t}))}},n.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",gr(gr({data:this.data,datas:this.data,isPinch:e,touches:n.getPositions()},n.getPosition()),{inputEvent:t}))}},n.getCurrentStore=function(){return this.clientStores[0]},n.moveClients=function(t,e,n){var r=this._getPosition(t,n);return(r.deltaX||r.deltaY)&&(this.isDrag=!0),gr(gr({data:this.data,datas:this.data},r),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e})},n._addStore=function(t){this.clientStores.splice(0,0,t)},n._getPosition=function(t,e){var n=this.getCurrentStore().getPosition(t,e),r=this.clientStores.slice(1).reduce((function(t,e){var n=e.getPosition();return t.distX+=n.distX,t.distY+=n.distY,t}),n),i=r.distX,o=r.distY;return gr(gr({},n),{distX:i,distY:o})},n._attchDragEvent=function(){var t=this.options.container,e={passive:!1};this.isMouse&&(we(t,"mousemove",this.onDrag),we(t,"mouseup",this.onDragEnd)),this.isTouch&&(we(t,"touchmove",this.onDrag,e),we(t,"touchend",this.onDragEnd,e),we(t,"touchcancel",this.onDragEnd,e))},n._dettachDragEvent=function(){var t=this.options.container;this.isMouse&&(xe(t,"mousemove",this.onDrag),xe(t,"mouseup",this.onDragEnd)),this.isTouch&&(xe(t,"touchstart",this.onDragStart),xe(t,"touchmove",this.onDrag),xe(t,"touchend",this.onDragEnd),xe(t,"touchcancel",this.onDragEnd))},e}(ar);const Cr=kr;const Qr=function(t){var e,n="rCS"+function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}(t).toString(36),r=0;return{className:n,inject:function(i,o){void 0===o&&(o={});var s,a=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(i),l=0===r;return(a||l)&&(s=function(t,e,n,r){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",t),n.nonce&&i.setAttribute("nonce",n.nonce),i.innerHTML=function(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(e,n){var r=n.trim();return(r?Ht(r):[""]).map((function(e){var n=e.trim();return 0===n.indexOf("@")?n:n.indexOf(":global")>-1?n.replace(/\:global/g,""):n.indexOf(":host")>-1?""+n.replace(/\:host/g,"."+t):n?"."+t+" "+n:"."+t})).join(", ")+" {"}))}(t,e,n),(r||document.head||document.body).appendChild(i),i}(n,t,o,a)),l&&(e=s),a||++r,{destroy:function(){a?(a.removeChild(s),s=null):(r>0&&--r,0===r&&e&&(e.parentNode.removeChild(e),e=null))}}}}};var _r=function(t,e){return _r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},_r(t,e)};function Pr(t,e){function n(){this.constructor=t}_r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Er=function(){return Er=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Er.apply(this,arguments)},Tr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.injectResult=null,e.tag="div",e}Pr(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=(t.cspNonce,t.portalContainer),i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["className","cspNonce","portalContainer"]),o=this.injector.className,s=this.tag,a={};return"simple-1.1.0".indexOf("simple")>-1&&r&&(a={portalContainer:r}),De(s,Er({ref:kt(this,"element"),"data-styled-id":o,className:n+" "+o},a,i))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},e}(ze);const $r=function(t,e){var n=Qr(e);return function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.injector=n,r.tag=t,r}return Pr(r,e),r}(Tr)};var Rr=function(t,e){return Rr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Rr(t,e)};function Mr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Rr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ar=function(){return Ar=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ar.apply(this,arguments)};function Dr(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function jr(t,e){var n;return Ar({events:{},props:(n={},n[t]=Boolean,n),name:t},e)}var qr,Xr,Vr=fn(),Ur=Vr.browser.webkit,Zr=Ur&&(qr="undefined"==typeof window?{userAgent:""}:window.navigator,!!(Xr=/applewebkit\/([^\s]+)/g.exec(qr.userAgent.toLowerCase()))&&parseFloat(Xr[1])<605),Ir="firefox"===Vr.browser.name,Nr=parseInt(Vr.browser.webkitVersion,10)>=612||parseInt(Vr.browser.version,10)>=15,Br="moveable-",zr="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.edge {\n    z-index: 1;\n    background: transparent;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n".concat([0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'.concat(t,'"], :global .view-control-rotation').concat(t," {\n\t").concat(function(t){var e=function(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32,'px" height="').concat(32,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}(0,t),n=45*Math.round(t/45)%180,r="ns-resize";return 135===n?r="nwse-resize":45===n?r="nesw-resize":90===n&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}(t),"\n}\n")})).join("\n"),"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n").concat(Zr?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"","\n"),Wr=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Lr=1e-7,Gr=1e-9,Fr=Math.pow(10,10),Yr=-Fr,Hr=["n","w","s","e"],Jr=["n","w","s","e","nw","ne","sw","se"],Kr={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},ti={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},ei={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},ni=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets"];function ri(t,e,n,r,i,o){void 0===o&&(o="draggable");var s=e.gestos[o].move(n,t.inputEvent),a=s.originalDatas||s.datas,l=a[o]||(a[o]={});return Ar(Ar({},i?vo(e,s):s),{isPinch:!!r,parentEvent:!0,datas:l,originalDatas:t.originalDatas})}var ii=function(){function t(t){var e;void 0===t&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),Ar(Ar({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0)):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),this.prevX=n,this.prevY=r,{type:"drag",clientX:n,clientY:r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function oi(t,e){var n=e.clientX,r=e.clientY,i=e.datas,o=t.state,s=o.moveableClientRect,a=o.rootMatrix,l=o.is3d,c=o.pos1,u=kn(Oo(a,[n-s.left,r-s.top],l?4:3),c),h=hi({datas:i,distX:u[0],distY:u[1]});return[h[0],h[1]]}function si(t,e){var n=e.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,s=r.is3d,a=r.left,l=r.top,c=r.origin,u=r.offsetMatrix,h=r.targetMatrix,f=r.transformOrigin,d=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=h,n.beforeMatrix=o,n.offsetMatrix=u,n.transformOrigin=f,n.inverseMatrix=On(i,d),n.inverseBeforeMatrix=On(o,d),n.absoluteOrigin=bn(Sn([a,l],c),d),n.startDragBeforeDist=Qn(n.inverseBeforeMatrix,n.absoluteOrigin,d),n.startDragDist=Qn(n.inverseMatrix,n.absoluteOrigin,d)}function ai(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,i=n.transformIndex,o=r.nextTransforms,s=o.length,a=r.nextTransformAppendedIndexes,l=0;-1===i?(l=o.length,n.transformIndex=l):l=ie(a,(function(t){return t.index===i&&t.functionName===e}))?i:i+a.filter((function(t){return t.index<i})).length;var c=function(t,e){var n=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),i=t[e]||"",o=e<0?[]:t.slice(e),s=e<0?[]:t.slice(e+1),a=In(n),l=In(r),c=In([i]),u=In(o),h=In(s),f=Zn(a),d=Zn(l),p=Zn(u),g=Zn(h),m=xn(f,p,4);return{transforms:t,beforeFunctionMatrix:f,beforeFunctionMatrix2:d,targetFunctionMatrix:Zn(c),afterFunctionMatrix:p,afterFunctionMatrix2:g,allFunctionMatrix:m,beforeFunctions:a,beforeFunctions2:l,targetFunction:c[0],afterFunctions:u,afterFunctions2:h,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:i,afterFunctionTexts:o,afterFunctionTexts2:s}}(o,l),u=c.targetFunction,h="rotate"===e?"rotateZ":e;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,u.functionName===h?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=Dr(Dr([],a,!0),[{functionName:e,index:l,isAppend:!0}],!1))}function li(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function ci(t,e,n){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,s=t.afterTransform2,a=t.targetAllTransform,l=n?xn(a,e,4):xn(e,a,4),c=xn(On(n?o:r,4),l,4);return xn(c,On(n?s:i,4),4)}function ui(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,o=e.is3d,s=e.startDragBeforeDist,a=o?4:3;return kn(Qn(i,Sn(e.absoluteOrigin,[n,r]),a),s)}function hi(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.inverseBeforeMatrix,s=n.inverseMatrix,a=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,u=a?4:3;return kn(Qn(e?o:s,Sn(n.absoluteOrigin,[r,i]),u),e?l:c)}function fi(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function di(t,e){var n=(e[0]+1)/2,r=(e[1]+1)/2,i=[Ut(t[0][0],t[1][0],n,1-n),Ut(t[0][1],t[1][1],n,1-n)],o=[Ut(t[2][0],t[3][0],n,1-n),Ut(t[2][1],t[3][1],n,1-n)];return[Ut(i[0],o[0],r,1-r),Ut(i[1],o[1],r,1-r)]}function pi(t,e,n,r){return xn(t,Ei(e,r,n),r)}function gi(t){var e=bi(t);return{setTransform:function(n,r){void 0===r&&(r=-1),e.startTransforms=Nt(n)?n:Yt(n),Oi(t,r)},setTransformIndex:function(e){Oi(t,e)}}}function mi(t,e){Oi(t,re(bi(t).startTransforms,(function(t){return 0===t.indexOf("".concat(e,"("))})))}function Oi(t,e){var n=bi(t),r=t.datas;if(r.transformIndex=e,-1!==e){var i=n.startTransforms[e];if(i){var o=In([i]);r.startValue=o[0].functionValue}}}function vi(t,e){bi(t).nextTransforms=Yt(e)}function bi(t){return t.originalDatas.beforeRenderable}function yi(t){return t.originalDatas.beforeRenderable.nextTransforms}function wi(t){return yi(t).join(" ")}function xi(t){return bi(t).nextStyle}function Si(t,e,n,r,i){vi(i,e);var o=Ms.drag(t,ri(i,t.state,n,r,!1)),s=o?o.transform:e;return Ar(Ar({transform:e,drag:o},io({transform:s},i)),{afterTransform:s})}function ki(t,e,n,r,i){var o=t.state,s=o.left,a=o.top,l=t.props.groupable,c=function(t,e,n){var r=t.transformOrigin,i=t.offsetMatrix,o=t.is3d,s=e.beforeTransform,a=e.afterTransform,l=o?4:3;return pi(i,yn(xn(xn(s,Vn([n]),4),a,4),4,l),r,l)}(t.state,i,e),u=l?s:0,h=l?a:0,f=kn(r,Ci(t,n,c));return kn(f,[u,h])}function Ci(t,e,n){void 0===n&&(n=t.state.allMatrix);var r=t.state,i=r.width,o=r.height,s=r.is3d?4:3;return Ui(n,[i/2*(1+e[0]),o/2*(1+e[1])],s)}function Qi(t,e){return di(no(t.state),e)}function _i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return St.apply(void 0,Dr([Br],t,!1))}function Pi(t){t()}function Ei(t,e,n){return wn(e,qn(n,e),t,qn(n.map((function(t){return-t})),e))}function Ti(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function $i(t,e){void 0===e&&(e=uo(t));var n=e.transform;if(n&&"none"!==n)return e.transform;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var i=r.length;if(!i)return"";for(var o=[],s=function(t){var e=r[t].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map((function(t){return e[t]})).join(", "),")"))},a=0;a<i;++a)s(a);return o.join(" ")}return""}function Ri(t,e,n){var r,i,o,s,a=document.body,l=!1;if(!t||n)o=t;else{var c=null===(r=null==t?void 0:t.assignedSlot)||void 0===r?void 0:r.parentElement,u=t.parentElement;c?(l=!0,s=u,o=c):o=u}for(var h=!1,f=t===e||o===e,d="relative";o&&o!==a;){e===o&&(f=!0);var p=uo(o),g=o.tagName.toLowerCase(),m=$i(o,p),O=p.willChange;if(d=p.position,"svg"===g||"static"!==d||m&&"none"!==m||"transform"===O)break;var v=null===(i=null==t?void 0:t.assignedSlot)||void 0===i?void 0:i.parentNode,b=o.parentNode;v&&(l=!0,s=b);var y=v||b;if(y&&11===y.nodeType){o=y.host,h=!0;break}o=y,d="relative"}return{hasSlot:l,parentSlotElement:s,isCustomElement:h,isStatic:"static"===d,isEnd:f||!o||o===a,offsetParent:o||a}}function Mi(t,e,n){var r,i,o,s=t.tagName.toLowerCase(),a=t.offsetLeft,l=t.offsetTop,c=Zt(a),u=!c;return u||"svg"===s?o=(i=Ti(n).map((function(t){return parseFloat(t)}))).slice():(o=(i=Zr?function(t){return Ti(uo(t,":before")).map((function(e,n){var r=Kt(e),i=r.value,o=r.unit;return i*function(t,e,n){return"%"===e?Xi(t.ownerSVGElement)[n?"width":"height"]/100:1}(t,o,0===n)}))}(t):Ti(n).map((function(t){return parseFloat(t)}))).slice(),u=!0,r=function(t,e,n){if(!t.getBBox||!n&&"g"===t.tagName.toLowerCase())return[0,0,0,0];var r=t.getBBox(),i=Xi(t.ownerSVGElement),o=r.x-i.x,s=r.y-i.y;return[o,s,e[0]-o,e[1]-s]}(t,i,t===e&&"g"===e.tagName.toLowerCase()),a=r[0],l=r[1],i[0]=r[2],i[1]=r[3]),{tagName:s,isSVG:c,hasOffset:u,offset:[a||0,l||0],origin:i,targetOrigin:o}}function Ai(t,e,n){void 0===n&&(n=uo(t));var r=uo(document.body),i=r.position;if(!(e||i&&"static"!==i))return[0,0];var o=parseInt(r.marginLeft,10),s=parseInt(r.marginTop,10);return"absolute"===n.position&&("auto"===n.top&&"auto"===n.bottom||(s=0),"auto"===n.left&&"auto"===n.right||(o=0)),[o,s]}function Di(t){t.forEach((function(t){var e=t.matrix;e&&(t.matrix=yn(e,3,4))}))}function ji(t){for(var e=t.parentElement,n=!1;e;){var r=uo(e).transform;if(r&&"none"!==r){n=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:n}}function qi(t,e){return void 0===e&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(Cn(t,!e).join(","),")")}function Xi(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function Vi(t,e){var n=Xi(t),r=n.width,i=n.height,o=n.clientWidth,s=n.clientHeight,a=o/r,l=s/i,c=t.preserveAspectRatio.baseVal,u=c.align,h=c.meetOrSlice,f=[0,0],d=[a,l],p=[0,0];if(1!==u){var g=(u-2)%3,m=Math.floor((u-2)/3);f[0]=r*g/2,f[1]=i*m/2;var O=2===h?Math.max(l,a):Math.min(a,l);d[0]=O,d[1]=O,p[0]=(o-r)/2*g,p[1]=(s-i)/2*m}var v=jn(d,e);return v[e*(e-1)]=p[0],v[e*(e-1)+1]=p[1],Ei(v,e,f)}function Ui(t,e,n){return Qn(t,bn(e,n),n)}function Zi(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map((function(e){return Ui(t,e,r)}))}function Ii(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]})),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),o=Math.max.apply(Math,e),s=Math.max.apply(Math,n);return{left:r,top:i,right:o,bottom:s,width:o-r,height:s-i}}function Ni(t,e,n,r){return Ii(Zi(t,e,n,r))}function Bi(t,e,n,r){var i=16===t.length?4:3,o=Zi(t,n,r,i),s=o[0],a=s[0],l=s[1],c=o[1],u=c[0],h=c[1],f=o[2],d=f[0],p=f[1],g=o[3],m=g[0],O=g[1],v=Ui(t,e,i),b=v[0],y=v[1],w=Math.min(a,u,d,m),x=Math.min(l,h,p,O),S=Math.max(a,u,d,m);return a=a-w||0,{left:w,top:x,right:S,bottom:Math.max(l,h,p,O),origin:[b=b-w||0,y=y-x||0],pos1:[a,l=l-x||0],pos2:[u=u-w||0,h=h-x||0],pos3:[d=d-w||0,p=p-x||0],pos4:[m=m-w||0,O=O-x||0],direction:pe(o)}}function zi(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Wi(t,e){return zi([e[0]-t[0],e[1]-t[1]])}function Li(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=de(t,e));var i=Wi(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function Gi(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,o=n.reduce((function(t,e){return t+e[0]}),0)/i,s=n.reduce((function(t,e){return t+e[1]}),0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Fi(t,e){var n=t[e];return It(n)?Ar(Ar({},t),n):t}function Yi(t,e){void 0===e&&(e=t?uo(t):null);var n=t&&!Zt(t.offsetWidth),r=0,i=0,o=0,s=0,a=0,l=0,c=0,u=0,h=0,f=0,d=0,p=0,g=1/0,m=1/0,O=1/0,v=1/0,b=!1;if(t)if(n||"svg"===t.tagName.toLowerCase()){var y=t.style,w="border-box"===e.boxSizing,x=parseFloat(e.borderLeftWidth)||0,S=parseFloat(e.borderRightWidth)||0,k=parseFloat(e.borderTopWidth)||0,C=parseFloat(e.borderBottomWidth)||0,Q=(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0),_=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0),P=Q+(x+S),E=_+(k+C),T=e.position,$=0,R=0;if("clientLeft"in t){var M=null;if(M="absolute"===T?Ri(t,document.body,!1).offsetParent:t.parentElement){var A=uo(M);$=parseFloat(A.width),R=parseFloat(A.height)}}h=Math.max(Q,le(e.minWidth,$)||0),f=Math.max(_,le(e.minHeight,R)||0),g=le(e.maxWidth,$),m=le(e.maxHeight,R),isNaN(g)&&(g=1/0),isNaN(m)&&(m=1/0);var D=le(y.width,0)||0,j=le(y.height,0)||0,q=parseFloat(e.width)||0,X=parseFloat(e.height)||0;a=parseFloat(e.width),l=parseFloat(e.height),r=c=Math.abs(q-D)<1?ce(h,D||a,g):q,i=u=Math.abs(X-j)<1?ce(f,j||l,m):X,o=c,s=u,w?(O=g,v=m,d=h,p=f,c=r-P,u=i-E):(O=g+P,v=m+E,d=h+P,p=f+E,r=c+P,i=u+E),o=c+Q,s=u+_}else{var V=t.getBBox();b=!0,a=r=V.width,l=i=V.height,c=r,u=i,o=r,s=i}return{svg:b,offsetWidth:r,offsetHeight:i,clientWidth:o,clientHeight:s,contentWidth:c,contentHeight:u,cssWidth:a,cssHeight:l,minWidth:h,minHeight:f,maxWidth:g,maxHeight:m,minOffsetWidth:d,minOffsetHeight:p,maxOffsetWidth:O,maxOffsetHeight:v}}function Hi(t,e){return de(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Ji(t,e){var n,r=0,i=0,o=0,s=0;if(t)if(t===document.body||t===document.documentElement){o=window.innerWidth,s=window.innerHeight;var a=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop];r=(n=[-a[0],-a[1]])[0],i=n[1]}else{var l=t.getBoundingClientRect();r=l.left,i=l.top,o=l.width,s=l.height}var c={left:r,top:i,width:o,height:s,right:r+o,bottom:i+s};return t&&e&&(c.clientLeft=t.clientLeft,c.clientTop=t.clientTop,c.clientWidth=t.clientWidth,c.clientHeight=t.clientHeight,c.scrollWidth=t.scrollWidth,c.scrollHeight=t.scrollHeight,c.overflow="visible"!==uo(t).overflow),c}function Ki(t,e,n,r){return t||(e?[0,0]:to(n.target,r))}function to(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function eo(t,e){return[Sn(e,t[0]),Sn(e,t[1]),Sn(e,t[2]),Sn(e,t[3])]}function no(t){var e=t.left,n=t.top;return eo([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function ro(t,e){var n;null===(n=t[e])||void 0===n||n.unset(),t[e]=null}function io(t,e){if(e){var n=bi(e);n.nextStyle=Ar(Ar({},n.nextStyle),t)}return{style:t,cssText:ae(t).map((function(e){return"".concat(ee(e,"-"),": ").concat(t[e],";")})).join("")}}function oo(t,e,n){var r=e.afterTransform||e.transform;return Ar(Ar({},io(Ar(Ar(Ar({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function so(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var o=Ar(Ar({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,stopDrag:function(){var t;null===(t=e.stop)||void 0===t||t.call(e)}});return i.isStartEvent?r||(i.lastEvent=o):i.isStartEvent=!0,o}function ao(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),Ar(Ar({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas})}function lo(t,e,n){t._emitter.on(e,n)}function co(t,e,n,r){return t.triggerEvent(e,n,r)}function uo(t,e){return window.getComputedStyle(t,e)}function ho(t,e,n){var r={},i={};return t.filter((function(t){var o=t.name;if(r[o]||!e.some((function(e){return t[e]})))return!1;if(!n&&t.ableGroup){if(i[t.ableGroup])return!1;i[t.ableGroup]=!0}return r[o]=!0,!0}))}function fo(t,e){return t===e||null==t&&null==e}function po(t,e){var n=[],r=[];return t.forEach((function(i,o){var s=e(i,o,t),a=r.indexOf(s),l=n[a]||[];-1===a&&(r.push(s),n.push(l)),l.push(i)})),n}function go(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function mo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(e)-Math.abs(t)})),t[0]}function Oo(t,e,n){return Qn(On(t,n),bn(e,n),n)}function vo(t,e){var n,r=t.is3d?4:3;return n=Oo(t.rootMatrix,[e.distX,e.distY],r),e.distX=n[0],e.distY=n[1],e}function bo(t,e,n,r,i){return kn(Ui(t,Sn(n,e),i),r)}function yo(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function wo(t){return Math.abs(t)<=Lr?0:t}function xo(t){return function(e){if(!e.isDragging(t))return"";var n=function(t,e){var n,r=t.targetGesto,i=t.controlGesto;return(null==r?void 0:r.isFlag())&&(n=r.getEventData()[e]),!n&&(null==i?void 0:i.isFlag())&&(n=i.getEventData()[e]),n||{}}(e,t),r=n.deg;return r?_i("view-".concat(t,"-dragging"),"view-control-rotation".concat(r)):""}}function So(t,e){return void 0===e&&(e=[t]),function(n,r){if(r.isRequest)return!!e.some((function(t){return r.requestAble===t}))&&r.parentDirection;var i=r.inputEvent.target;return ve(i,_i("direction"))&&(!t||ve(i,_i(t)))}}function ko(t){var e={};for(var n in t)e[t[n]]=n;return e}function Co(t,e){return t?t instanceof Element?t:Bt(t)?e?document.querySelector(t):t:Wt(t)?t():"current"in t?t.current:t:null}function Qo(t,e){return t?(!(n=t)||!It(n)||n instanceof Element||!Nt(n)&&!("length"in n)?[t]:[].slice.call(t)).reduce((function(t,n){return Bt(n)&&e?Dr(Dr([],t,!0),[].slice.call(document.querySelectorAll(n)),!0):(Nt(n)?t.push(Qo(n,e)):t.push(Co(n,e)),t)}),[]):[];var n}function _o(t,e){var n=t.rootMatrix,r=t.is3d,i=On(n,r?4:3);return r||(i=yn(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Un(i,e)}function Po(t,e,n,r,i){var o=t[0],s=t[1],a=0,l=0;if(i&&o&&s){var c=de([0,0],e),u=de([0,0],r),h=zi(e),f=Math.cos(c-u)*h;if(r[0])if(r[1]){var d=2*r[0]*o,p=2*r[1]*s,g=zi([d+e[0],p+e[1]])-zi([d,p]),m=de([0,0],[n,1]);a=Math.cos(m)*g,l=Math.sin(m)*g}else l=(a=f)/n;else a=(l=f)*n}else a=r[0]*e[0],l=r[1]*e[1];return[a,l]}function Eo(t,e,n,r){var i,o=n.ratio,s=n.startOffsetWidth,a=n.startOffsetHeight,l=0,c=0,u=r.distX,h=r.distY,f=r.parentDistance,d=r.parentDist,p=r.parentScale,g=n.fixedDirection,m=[0,1].map((function(e){return Math.abs(t[e]-g[e])})),O=[0,1].map((function(t){var e=m[t];return 0!==e&&(e=2/e),e}));if(d)l=d[0],c=d[1],e&&(l?c||(c=l/o):l=c*o);else if(p)l=(p[0]-1)*s,c=(p[1]-1)*a;else if(f){var v=s*m[0],b=a*m[1],y=zi([v,b]);l=f/y*v*O[0],c=f/y*b*O[1]}else{var w=hi({datas:n,distX:u,distY:h});w=O.map((function(t,e){return w[e]*t})),l=(i=Po([s,a],w,o,t,e))[0],c=i[1]}return{distWidth:l,distHeight:c}}var To=jr("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,o=e.originalDatas,s=t.props,a=s.pinchable,l=s.ables;if(!a)return!1;var c="onPinch".concat(r?"Group":"","Start"),u="drag".concat(r?"Group":"","ControlStart"),h=(!0===a?t.controlAbles:l.filter((function(t){return a.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[u]})),f=so(t,e,{});r&&(f.targets=r);var d=co(t,c,f);n.isPinch=!1!==d,n.ables=h;var p=n.isPinch;return!!p&&(h.forEach((function(n){if(o[n.name]=o[n.name]||{},n[u]){var r=Ar(Ar({},e),{datas:o[n.name],parentRotate:i,isPinch:!0});n[u](t,r)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p)},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,o=e.originalDatas,s=e.inputEvent,a=e.targets,l=e.angle;if(n.isPinch){var c=i*(1-1/r),u=so(t,e,{});a&&(u.targets=a);var h="onPinch".concat(a?"Group":"");co(t,h,u);var f=n.ables,d="drag".concat(a?"Group":"","Control");return f.forEach((function(n){n[d]&&n[d](t,Ar(Ar({},e),{datas:o[n.name],inputEvent:s,parentDistance:c,parentRotate:l,isPinch:!0}))})),u}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=e.targets,s=e.originalDatas;if(n.isPinch){var a="onPinch".concat(o?"Group":"","End"),l=ao(t,e,{isDrag:r});o&&(l.targets=o),co(t,a,l);var c=n.ables,u="drag".concat(o?"Group":"","ControlEnd");return c.forEach((function(n){n[u]&&n[u](t,Ar(Ar({},e),{isDrag:r,datas:s[n.name],inputEvent:i,isPinch:!0}))})),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,Ar(Ar({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Ar(Ar({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Ar(Ar({},e),{targets:t.props.targets}))}});function $o(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map((function(t,r){return o[r]=o[r]||{},o[r][e]=o[r][e]||{},Ar(Ar({},n),{datas:o[r][e],originalDatas:o[r]})}))}function Ro(t,e,n,r,i,o,s){var a=!!n.match(/Start$/g),l=!!n.match(/End$/g),c=i.isPinch,u=i.datas,h=$o(t,e.name,i),f=t.moveables,d=h.map((function(t,i){var h=f[i],d=h.state,p=d.gestos,g=t;if(a)g=new ii(s).dragStart(r,t);else{if(p[s]||(p[s]=u.childGestos[i]),!p[s])return;g=ri(t,d,r,c,o,s)}var m=e[n](h,Ar(Ar({},g),{parentFlag:!0}));return l&&(p[s]=null),m}));return a&&(u.childGestos=f.map((function(t){return t.state.gestos[s]}))),d}function Mo(t,e,n,r,i,o){void 0===i&&(i=function(t,e){return e});var s=!!n.match(/End$/g),a=$o(t,e.name,r),l=t.moveables,c=a.map((function(t,r){var a,c=l[r];a=i(c,t);var u=e[n](c,Ar(Ar({},a),{parentFlag:!0}));return u&&o&&o(c,t,u,r),s&&(c.state.gestos={}),u}));return c}var Ao=["left","right","center"],Do=["top","bottom","middle"],jo={start:"left",end:"right",center:"center"},qo={start:"top",end:"bottom",center:"middle"};function Xo(t,e){var n=t.props,r=n.snappable,i=n.bounds,o=n.innerBounds,s=n.verticalGuidelines,a=n.horizontalGuidelines,l=n.snapGridWidth,c=n.snapGridHeight,u=t.state,h=u.guidelines,f=u.enableSnap;return!(!r||!f||e&&!0!==r&&r.indexOf(e)<0||!(l||c||i||o||h&&h.length||s&&s.length||a&&a.length))}function Vo(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function Uo(t,e){var n=function(t,e){var n=Vo(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}(t,e),r=Do.filter((function(t){return t in n})),i=Ao.filter((function(t){return t in n}));return{horizontal:r.map((function(t){return n[t]})),vertical:i.map((function(t){return n[t]}))}}function Zo(t,e,n,r){var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!Zt(i))return i}return t[n]}(r,t.props.snapThreshold,5);return Io(t.state.guidelines,e,n,i)}function Io(t,e,n,r){return{vertical:zo(t,"vertical",e,r),horizontal:zo(t,"horizontal",n,r)}}function No(t,e,n){var r=Uo(t.props.snapDirections,e);return Zo(t,r.vertical,r.horizontal,n)}function Bo(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,o=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:o,pos:n.pos,guideline:s}}function zo(t,e,n,r){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var i="vertical"===e?0:1,o=n.map((function(n,o){var s=t.map((function(t){var e=t.pos,r=n-e[i];return{offset:r,dist:Math.abs(r),guideline:t}})).filter((function(t){var n=t.guideline,i=t.dist;return!(n.type!==e||i>r)})).sort((function(t,e){return t.dist-e.dist}));return{pos:n,index:o,guidelineInfos:s}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist})),s=o.length>0;return{isSnap:s,index:s?o[0].index:-1,posInfos:o}}function Wo(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Lr?1:r<Lr?-1:n-r}function Lo(t,e){return t.slice().sort((function(t,n){var r=t.sign[e],i=n.sign[e],o=t.offset[e],s=n.offset[e];return r?i?Wo({isBound:t.isBound,isSnap:t.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s}):-1:1}))[0]}function Go(t,e){var n=fe([e[0][0],e[1][0]]),r=fe([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function Fo(t,e){var n,r,i=e[0],o=e[1],s=o[0]-i[0],a=o[1]-i[1];return Math.abs(s)<Lr&&(s=0),Math.abs(a)<Lr&&(a=0),s?a?(n=a/s*(t[0]-i[0])+i[1],r=t[1]):(n=i[1],r=t[1]):(n=i[0],r=t[0]),n-r}function Yo(t,e,n,r){return void 0===r&&(r=Lr),t.every((function(t){var i=Fo(t,e);return i<=0===n||Math.abs(i)<=r}))}function Ho(t,e,n,r,i){return void 0===i&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function Jo(t,e,n,r,i,o){var s,a=e[0],l=e[1],c=t[0],u=n[0],h=n[1],f=wo(h[1]-u[1]),d=l,p=a,g=-a/l;if(!wo(h[0]-u[0])){if(o&&!p)return{isBound:!1,offset:0};if(d)return Ho(g*(u[0]-c[0])+c[1],u[1],h[1],r,i);var m=u[0]-c[0];return{isBound:s=Math.abs(m)<=(i||0),offset:s?m:0}}return f||o&&!d?{isBound:!1,offset:0}:p?Ho((u[1]-c[1])/g+c[0],u[0],h[0],r,i):(m=u[1]-c[1],{isBound:s=Math.abs(m)<=(i||0),offset:s?m:0})}function Ko(t,e,n){return e.map((function(e){var r=function(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,o=e.horizontalSign,s=e.lineConstants,a=t.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=a.left,c=a.top,u=a.width,h=a.height,f=[[l,c],[l,c+h]],d=[[l,c],[l+u,c]],p=[[l+u,c],[l+u,c+h]],g=[[l,c+h],[l+u,c+h]];if(Yo([[l,c],[l+u,c],[l,c+h],[l+u,c+h]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var m=Jo(n,s,d,i),O=Jo(n,s,g,i),v=Jo(n,s,f,o),b=Jo(n,s,p,o),y=m.isBound&&O.isBound,w=m.isBound||O.isBound,x=v.isBound&&b.isBound,S=v.isBound||b.isBound,k=mo(m.offset,O.offset),C=mo(v.offset,b.offset),Q=[0,0],_=!1,P=!1;return Math.abs(C)<Math.abs(k)?(Q=[k,0],_=w,P=y):(Q=[0,C],_=S,P=x),{isAllBound:P,isVerticalBound:w,isHorizontalBound:S,isBound:_,offset:Q}}(t,e),i=r.isBound,o=r.offset,s=r.isVerticalBound,a=r.isHorizontalBound,l=e.multiple,c=hi({datas:n,distX:o[0],distY:o[1]}).map((function(t,e){return t*(l[e]?2/l[e]:0)}));return{sign:l,isBound:i,isVerticalBound:s,isHorizontalBound:a,isSnap:!1,offset:c}}))}function ts(t,e,n,r){var i=t.state,o=Zi(i.allMatrix,100,100,i.is3d?4:3),s=di(o,[0,0]);return function(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,2*i],t,[-r,i]],[[2*r,0],t,[r,-i]]):r?(n.push([[2*r,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,2*i],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}(n,r).map((function(t){var n=t[0],r=t[1],i=t[2],a=[di(o,r),di(o,i)],l=function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];Math.abs(r)<Xt&&(r=0),Math.abs(i)<Xt&&(i=0);var o=0,s=0,a=0;return r?i?(s=1,a=(o=-i/r)*e[0]-e[1]):(s=1,a=-e[1]):(o=-1,a=e[0]),[o,s,a].map((function(t){return me(t,Xt)}))}(a),c=Go(s,a),u=c.vertical,h=c.horizontal;return{multiple:n,centerSign:Fo(s,a)<=0,verticalSign:u,horizontalSign:h,lineConstants:l,line:[di(e,r),di(e,i)]}}))}function es(t,e,n,r){var i=r?t.map((function(t){return $n(t,r)})):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some((function(t){var r=Fo(n,t)<=0;return!Yo(e,t,r)}))}function ns(t,e,n){var r=t||{},i=r.position,o=void 0===i?"client":i,s=r.left,a=void 0===s?-1/0:s,l=r.top,c=void 0===l?-1/0:l,u=r.right,h=void 0===u?1/0:u,f=r.bottom,d={position:o,left:a,top:c,right:h,bottom:void 0===f?1/0:f};return{vertical:is(d,e,!0),horizontal:is(d,n,!1)}}function rs(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,o=r.clientWidth,s=r.clientLeft,a=r.clientTop,l=n.snapOffset,c=l.left,u=l.top,h=l.right,f=l.bottom,d=e||t.props.bounds||{},p="css"===(d.position||"client"),g=d.left,m=void 0===g?-1/0:g,O=d.top,v=void 0===O?-1/0:O,b=d.right,y=void 0===b?p?-1/0:1/0:b,w=d.bottom,x=void 0===w?p?-1/0:1/0:w;return p&&(y=o+h-c-y,x=i+f-u-x),{left:m+c-s,right:y+c-s,top:v+u-a,bottom:x+u-a}}function is(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],o=Math.min.apply(Math,e),s=Math.max.apply(Math,e),a=[];return r+1>o&&a.push({isBound:!0,offset:o-r,pos:r}),i-1<s&&a.push({isBound:!0,offset:s-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort((function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)}))}function os(t,e,n){return(n?t.map((function(t){return $n(t,n)})):t).some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}function ss(t,e){return function(t,e){var n,r=t.direction,i=t.classNames,o=t.size,s=t.pos,a=t.zoom,l=t.key,c="horizontal"===r,u=c?"Y":"X";return e.createElement("div",{key:l,className:i.join(" "),style:(n={},n[c?"width":"height"]="".concat(o),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(u,"(-50%) scale").concat(u,"(").concat(a,")"),n)})}(Ar(Ar({},t),{classNames:Dr([_i("line","guideline",t.direction)],t.classNames,!0).filter((function(t){return t})),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map((function(t){return"".concat(me(t,.1),"px")}))}),e)}function as(t,e,n,r,i,o,s,a){var l=t.props.zoom;return n.map((function(t,n){var c=t.type,u=t.pos,h=[0,0];return h[s]=r,h[s?0:1]=-i+u,ss({key:"".concat(e,"TargetGuideline").concat(n),classNames:[_i("target","bold",c)],posValue:h,sizeValue:o,zoom:l,direction:e},a)}))}function ls(t,e,n,r,i,o){var s=t.props,a=s.zoom,l=s.isDisplayInnerSnapDigit,c="horizontal"===e?jo:qo,u=i[c.start],h=i[c.end];return n.filter((function(t){var e=t.hide,n=t.elementRect;if(e)return!1;if(l&&n){var r=n.rect;if(r[c.start]<=u&&h<=r[c.end])return!1}return!0})).map((function(t,n){var i=t.pos,s=t.size,l=t.element,c=t.className,u=[-r[0]+i[0],-r[1]+i[1]];return ss({key:"".concat(e,"-default-guideline-").concat(n),classNames:l?[_i("bold"),c]:[_i("normal"),c],direction:e,posValue:u,sizeValue:s,zoom:a},o)}))}function cs(t,e,n,r,i,o,s,a){var l,c=t.props,u=c.snapDigit,h=void 0===u?0:u,f=c.isDisplaySnapDigit,d=void 0===f||f,p=c.snapDistFormat,g=void 0===p?function(t,e){return t}:p,m=c.zoom,O="horizontal"===e?"X":"Y",v="vertical"===e?"height":"width",b=Math.abs(i),y=d?parseFloat(b.toFixed(h)):0;return a.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:_i("guideline-group",e),style:(l={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},l[v]="".concat(b,"px"),l)},ss({direction:e,classNames:[_i(n),s],size:"100%",posValue:[0,0],sizeValue:b,zoom:m},a),a.createElement("div",{className:_i("size-value","gap"),style:{transform:"translate".concat(O,"(-50%) scale(").concat(m,")")}},y>0?g(y,e):""))}function us(t,e,n,r,i){var o=function(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];if(Math.abs(i)<Xt&&(i=0),Math.abs(o)<Xt&&(o=0),!i)return r?[0,0]:[0,n];if(!o)return r?[n,0]:[0,0];var s=o/i,a=t[1]-s*t[0];return r?[n,s*(e[0]+n)+a-e[1]]:[(e[1]+n-a)/s-e[0],n]}(t,e,n,r);if(!o)return{isOutside:!1,offset:[0,0]};var s=ge(t,e),a=ge(o,t),l=ge(o,e),c=a>s||l>s,u=hi({datas:i,distX:o[0],distY:o[1]});return{offset:[u[0],u[1]],isOutside:c}}function hs(t,e){return t.isBound?t.offset:e.isSnap?Bo(e).offset:0}function fs(t,e,n,r,i,o){if(!Xo(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=eo(o.absolutePoses,[e,n]),a=Ii(s),l=a.left,c=a.right,u=a.top,h=a.bottom,f={horizontal:s.map((function(t){return t[1]})),vertical:s.map((function(t){return t[0]}))},d=ds(t,i,Uo(Vo(t.props.snapDirections),{left:l,right:c,top:u,bottom:h,center:(l+c)/2,middle:(u+h)/2}),f),p=d.vertical,g=d.horizontal,m=function(t,e,n){var r,i=Ko(t,ts(t,e,[0,0],!1).map((function(t){return Ar(Ar({},t),{multiple:t.multiple.map((function(t){return 2*Math.abs(t)}))})})),n),o=Lo(i,0),s=Lo(i,1),a=0,l=0,c=o.isVerticalBound||s.isVerticalBound,u=o.isHorizontalBound||s.isHorizontalBound;return(c||u)&&(r=function(t,e){var n=t.datas,r=t.distX,i=t.distY,o=(n.beforeMatrix,n.matrix),s=n.is3d,a=(n.startDragBeforeDist,n.startDragDist),l=n.absoluteOrigin,c=s?4:3;return kn(Qn(o,Sn(a,[r,i]),c),l)}({datas:n,distX:-o.offset[0],distY:-s.offset[1]}),a=r[0],l=r[1]),{vertical:{isBound:c,offset:a},horizontal:{isBound:u,offset:l}}}(t,s,o),O=m.vertical,v=m.horizontal,b=p.isSnap,y=g.isSnap,w=p.isBound||O.isBound,x=g.isBound||v.isBound,S=function(t,e,n,r,i){var o=e[0],s=e[1],a=n[0],l=n[1],c=r[0],u=r[1],h=i[0],f=i[1],d=-h,p=-f;if(t&&o&&s){d=0,p=0;var g=[];if(a&&l?g.push([0,f],[h,0]):a?g.push([h,0]):l?g.push([0,f]):c&&u?g.push([0,f],[h,0]):c?g.push([h,0]):u&&g.push([0,f]),g.length){g.sort((function(t,e){return zi(kn([o,s],t))-zi(kn([o,s],e))}));var m=g[0];if(m[0]&&Math.abs(o)>Xt)d=-m[0],p=s*Math.abs(o+d)/Math.abs(o)-s;else if(m[1]&&Math.abs(s)>Xt){var O=s;p=-m[1],d=o*Math.abs(s+p)/Math.abs(O)-o}if(t&&l&&a)if(Math.abs(d)>Xt&&Math.abs(d)<Math.abs(h))d*=v=Math.abs(h)/Math.abs(d),p*=v;else if(Math.abs(p)>Xt&&Math.abs(p)<Math.abs(f)){var v;d*=v=Math.abs(f)/Math.abs(p),p*=v}else d=mo(-h,d),p=mo(-f,p)}}else d=o||a?-h:0,p=s||l?-f:0;return[d,p]}(r,[e,n],[w,x],[b,y],[mo(p.offset,O.offset),mo(g.offset,v.offset)]);return[{isBound:w,isSnap:b,offset:S[0]},{isBound:x,isSnap:y,offset:S[1]}]}function ds(t,e,n,r){void 0===r&&(r=n);var i=ns(rs(t),r.vertical,r.horizontal),o=i.horizontal,s=i.vertical,a=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Zo(t,n.vertical,n.horizontal),l=a.horizontal,c=a.vertical,u=hs(o[0],l),h=hs(s[0],c),f=Math.abs(u),d=Math.abs(h);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:u,dist:f,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:h,dist:d,bounds:s,snap:c}}}function ps(t,e,n,r,i){var o=ns(e,n,r),s=o.horizontal,a=o.vertical,l=Io(t,n,r,i),c=l.horizontal,u=l.vertical,h=hs(s[0],c),f=hs(a[0],u),d=Math.abs(h),p=Math.abs(f);return{horizontal:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:h,dist:d,bounds:s,snap:c},vertical:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:f,dist:p,bounds:a,snap:u}}}function gs(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function ms(t){var e=t.state,n=e.snapOffset,r=e.containerClientRect,i=r.overflow,o=r.scrollHeight,s=r.scrollWidth,a=r.clientHeight,l=r.clientWidth,c=r.clientLeft,u=r.clientTop,h=t.props,f=h.snapGap,d=void 0===f||f,p=h.verticalGuidelines,g=h.horizontalGuidelines,m=h.snapThreshold,O=void 0===m?5:m,v=h.snapGridWidth,b=void 0===v?0:v,y=h.snapGridHeight,w=void 0===y?0:y,x=h.maxSnapElementGuidelineDistance,S=void 0===x?1/0:x,k=Ii(no(t.state)),C=k.top,Q=k.left,_=k.bottom,P=k.right,E={top:C,left:Q,bottom:_,right:P,center:(Q+P)/2,middle:(C+_)/2},T=function(t){var e=t.state,n=t.props.elementGuidelines,r=void 0===n?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter((function(t){return!t.refresh})),o=r.map((function(t){return It(t)&&"element"in t?Ar(Ar({},t),{element:Co(t.element,!0)}):{element:Co(t,!0)}})).filter((function(t){return t.element})),s=Ln(i.map((function(t){return t.element})),o.map((function(t){return t.element}))),a=s.maintained,l=s.added,c=[];a.forEach((function(t){var e=t[0],n=t[1];c[n]=i[e]})),function(t,e){if(!e.length)return[];var n=t.state,r=n.containerClientRect,i=n.targetClientRect,o=i.top,s=i.left,a=n.rootMatrix,l=n.is3d?4:3,c=function(t,e,n){var r=Ui(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}(a,r,l),u=c[0],h=c[1],f=Jn(no(n)),d=kn([f.minX,f.minY],Oo(a,[s-u,o-h],l)).map((function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e})),p=d[0],g=d[1];return e.map((function(t){var e=t.element.getBoundingClientRect(),n=e.left-u,r=e.top-h,i=r+e.height,o=n+e.width,s=Oo(a,[n,r],l),c=s[0],f=s[1],d=Oo(a,[o,i],l),m=d[0],O=d[1];return Ar(Ar({},t),{rect:{left:c+p,right:m+p,top:f+g,bottom:O+g,center:(c+m)/2+p,middle:(f+O)/2+g}})}))}(t,l.map((function(t){return o[t]}))).map((function(t,e){c[l[e]]=t})),e.elementRects=c;var u=Vo(t.props.elementSnapDirections),h=[];return c.forEach((function(t){var e=t.element,n=t.top,r=void 0===n?u.top:n,i=t.left,o=void 0===i?u.left:i,s=t.right,a=void 0===s?u.right:s,l=t.bottom,c=void 0===l?u.bottom:l,f=t.center,d=void 0===f?u.center:f,p=t.middle,g=void 0===p?u.middle:p,m=t.className,O=t.rect,v=Uo({top:r,right:a,left:o,bottom:c,center:d,middle:g},O),b=v.horizontal,y=v.vertical,w=O.top,x=O.left,S=O.right-x,k=O.bottom-w,C=[S,k];y.forEach((function(n){h.push({type:"vertical",element:e,pos:[me(n,.1),w],size:k,sizes:C,className:m,elementRect:t})})),b.forEach((function(n){h.push({type:"horizontal",element:e,pos:[x,me(n,.1)],size:S,sizes:C,className:m,elementRect:t})}))})),h}(t),$=Dr([],T,!0);return d&&$.push.apply($,function(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,o=void 0===i?1/0:i,s=r.maxSnapElementGapDistance,a=void 0===s?1/0:s,l=t.state.elementRects,c=[];return[["vertical",jo,qo],["horizontal",qo,jo]].forEach((function(t){var r=t[0],i=t[1],s=t[2],u=e[i.start],h=e[i.end],f=e[i.center],d=e[s.start],p=e[s.end];function g(t){var e=t.rect;return e[i.end]<u+n?u-e[i.end]:h-n<e[i.start]?e[i.start]-h:-1}var m=l.filter((function(t){var e=t.rect;return!(e[s.start]>p||e[s.end]<d)&&g(t)>0})).sort((function(t,e){return g(t)-g(e)})),O=[];m.forEach((function(t){m.forEach((function(e){if(t!==e){var n=t.rect,r=e.rect,i=n[s.start],o=n[s.end],a=r[s.start];i>r[s.end]||a>o||O.push([t,e])}}))})),O.forEach((function(t){var s=t[0],l=t[1],d=s.rect,p=l.rect,g=d[i.start],m=d[i.end],O=p[i.start],v=p[i.end],b=0,y=0,w=!1,x=!1,S=!1;if(m<=u&&h<=O){if(x=!0,y=m+(b=(O-m-(h-u))/2)+(h-u)/2,Math.abs(y-f)>n)return}else if(m<O&&v<u+n){if(w=!0,y=v+(b=O-m),Math.abs(y-u)>n)return}else{if(!(m<O&&h-n<g))return;if(S=!0,y=g-(b=O-m),Math.abs(y-h)>n)return}b&&Os(e,p,r,o)&&(b>a||c.push({type:r,pos:"vertical"===r?[y,0]:[0,y],element:l.element,size:0,className:l.className,isStart:w,isCenter:x,isEnd:S,gap:b,hide:!0,gapRects:[s,l]}))}))})),c}(t,E,O)),$.push.apply($,function(t,e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var s=[];if(e)for(var a=0;a<=r;a+=e)s.push({type:"horizontal",pos:[0,me(a-o,.1)],size:n,hide:!0});if(t)for(a=0;a<=n;a+=t)s.push({type:"vertical",pos:[me(a-i,.1),0],size:r,hide:!0});return s}(b,w,i?s:l,i?o:a,c,u)),$.push.apply($,vs(g||!1,p||!1,i?s:l,i?o:a,c,u,n)),$=$.filter((function(t){var e=t.element,n=t.elementRect,r=t.type;if(!e||!n)return!0;var i=n.rect;return Os(E,i,r,S)})),$}function Os(t,e,n,r){return"horizontal"===n?Math.abs(t.right-e.left)<=r||Math.abs(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:"vertical"!==n||Math.abs(t.bottom-e.top)<=r||Math.abs(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom}function vs(t,e,n,r,i,o,s){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s={left:0,top:0,right:0,bottom:0});var a=[],l=s.left,c=s.top,u=s.bottom,h=n+s.right-l,f=r+u-c;return t&&t.forEach((function(t){var e=It(t)?t:{pos:t};a.push({type:"horizontal",pos:[l,me(e.pos-o+c,.1)],size:h,className:e.className})})),e&&e.forEach((function(t){var e=It(t)?t:{pos:t};a.push({type:"vertical",pos:[me(e.pos-i+l,.1),c],size:f,className:e.className})})),a}function bs(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var n=t.state.container,r=t.props.snapContainer||n,i=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(n!==r){var s=Co(r,!0);if(s){var a=Ji(s),l=_o(e,[a.left-i.left,a.top-i.top]),c=_o(e,[a.right-i.right,a.bottom-i.bottom]);o.left=me(l[0],1e-5),o.top=me(l[1],1e-5),o.right=me(c[0],1e-5),o.bottom=me(c[1],1e-5)}}e.snapOffset=o,e.guidelines=ms(t),e.enableSnap=!0}}function ys(t,e,n,r,i,o){var s=Zi(t,e,n,o?4:3);return eo(s,kn(i,di(s,r)))}function ws(t,e,n,r,i,o){var s=function(t,e,n){var r=[];if(n)1!==Math.abs(e[0])||1!==Math.abs(e[1])?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach((function(t){[1,-1].forEach((function(n){var o=[t*i[0],n*i[1]];e[0]===o[0]&&e[1]===o[1]||r.push([e,o])}))}))}else t[0]?(1===Math.abs(e[0])?[1]:[1,-1]).forEach((function(n){r.push([[e[0],-1],[n*t[0],-1]],[[e[0],0],[n*t[0],0]],[[e[0],1],[n*t[0],1]])})):t[1]&&(1===Math.abs(e[1])?[1]:[1,-1]).forEach((function(n){r.push([[-1,e[1]],[-1,n*t[1]]],[[0,e[1]],[0,n*t[1]]],[[1,e[1]],[1,n*t[1]]])}));return r}(n,o.fixedDirection,r),a=ts(t,e,n,r),l=Dr(Dr([],function(t,e,n,r,i,o){return n.map((function(n){var s=n[0],a=n[1],l=di(e,s),c=di(e,a),u=r?function(t,e,n,r){var i=function(t,e,n){var r=rs(t),i=r.left,o=r.top,s=r.right,a=r.bottom,l=n[0],c=n[1],u=kn(n,e),h=u[0],f=u[1];Math.abs(h)<Lr&&(h=0),Math.abs(f)<Lr&&(f=0);var d=f>0,p=h>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(0===h&&0===f)return{vertical:g,horizontal:m};if(0===h)d?a<c&&(m.pos=a,m.offset=c-a):o>c&&(m.pos=o,m.offset=c-o);else if(0===f)p?s<l&&(g.pos=s,g.offset=l-s):i>l&&(g.pos=i,g.offset=l-i);else{var O=f/h,v=n[1]-O*l,b=0,y=0,w=!1;p&&s<=l?(b=O*s+v,y=s,w=!0):!p&&l<=i&&(b=O*i+v,y=i,w=!0),w&&(b<o||b>a)&&(w=!1),w||(d&&a<=c?(y=((b=a)-v)/O,w=!0):!d&&c<=o&&(y=((b=o)-v)/O,w=!0)),w&&(g.isBound=!0,g.pos=y,g.offset=l-y,m.isBound=!0,m.pos=b,m.offset=c-b)}return{vertical:g,horizontal:m}}(t,e,n),o=i.horizontal,s=i.vertical,a=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=n[0],i=n[1],o=e[0],s=e[1],a=kn(n,e),l=a[0],c=a[1],u=c>0,h=l>0;l=wo(l),c=wo(c);var f={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===l&&0===c)return{vertical:f,horizontal:d};var p=Zo(t,l?[r]:[],c?[i]:[]),g=p.vertical,m=p.horizontal;g.posInfos.filter((function(t){var e=t.pos;return h?e>=o:e<=o})),m.posInfos.filter((function(t){var e=t.pos;return u?e>=s:e<=s})),g.isSnap=g.posInfos.length>0,m.isSnap=m.posInfos.length>0;var O=Bo(g),v=O.isSnap,b=O.guideline,y=Bo(m),w=y.isSnap,x=y.guideline,S=w?x.pos[1]:0,k=v?b.pos[0]:0;if(0===l)w&&(d.isSnap=!0,d.pos=x.pos[1],d.offset=i-d.pos);else if(0===c)v&&(f.isSnap=!0,f.pos=k,f.offset=r-k);else{var C=c/l,Q=n[1]-C*r,_=0,P=0,E=!1;v?(_=C*(P=k)+Q,E=!0):w&&(P=((_=S)-Q)/C,E=!0),E&&(f.isSnap=!0,f.pos=P,f.offset=r-P,d.isSnap=!0,d.pos=_,d.offset=i-_)}return{vertical:f,horizontal:d}}(t,e,n),l=a.horizontal,c=a.vertical,u=gs(o,l),h=gs(s,c),f=Math.abs(u),d=Math.abs(h);return{horizontal:{isBound:o.isBound,isSnap:l.isSnap,offset:u,dist:f},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:h,dist:d}}}(t,l,c,i):ds(t,i,{vertical:[c[0]],horizontal:[c[1]]}),h=u.horizontal,f=h.offset,d=h.isBound,p=h.isSnap,g=u.vertical,m=g.offset,O=g.isBound,v=g.isSnap,b=kn(a,s);if(!m&&!f)return{isBound:O||d,isSnap:v||p,sign:b,offset:[0,0]};var y=function(t,e,n,r){var i=de(t,e)/Math.PI*180,o=n.vertical,s=o.isBound,a=o.isSnap,l=o.dist,c=n.horizontal,u=c.isBound,h=c.isSnap,f=i%180,d=f<3||f>177,p=f>87&&f<93;return c.dist<l&&(s||a&&!p&&(!r||!d))?"vertical":!u&&(!h||d||r&&p)?"":"horizontal"}(l,c,u,r);if(!y)return{sign:b,isBound:!1,isSnap:!1,offset:[0,0]};var w="vertical"===y,x=[0,0];return x=(x=r||1!==Math.abs(a[0])||1!==Math.abs(a[1])||s[0]===a[0]||s[1]===a[1]?us(l,c,-(w?m:f),w,o).offset:hi({datas:o,distX:-m,distY:-f})).map((function(t,e){return t*(b[e]?2/b[e]:0)})),{sign:b,isBound:w?O:d,isSnap:w?v:p,offset:x}}))}(t,e,s,r,i,o),!0),Ko(t,a,o),!0),c=Lo(l,0),u=Lo(l,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:u.isBound,offset:u.offset[1]}}}function xs(t,e,n,r,i,o,s,a){for(var l=no(t.state),c=t.props.keepRatio,u=0,h=0,f=0;f<2;++f){var d=ws(t,e(u,h),i,c,s,a),p=d.width,g=d.height,m=p.isBound,O=g.isBound,v=p.offset,b=g.offset;if(1===f&&(m||(v=0),O||(b=0)),0===f&&s&&!m&&!O)return[0,0];if(c){var y=Math.abs(v)*(n?1/n:1),w=Math.abs(b)*(r?1/r:1);(m&&O?y<w:O||!m&&y<w)?v=n*b/r:b=r*v/n}u+=v,h+=b}if(i[0]&&i[1]){var x=function(t,e,n,r,i){var o=[-n[0],-n[1]],s=t.state,a=s.width,l=s.height,c=t.props.bounds,u=1/0,h=1/0;if(c){var f=[[n[0],-n[1]],[-n[0],n[1]]],d=c.left,p=void 0===d?-1/0:d,g=c.top,m=void 0===g?-1/0:g,O=c.right,v=void 0===O?1/0:O,b=c.bottom,y=void 0===b?1/0:b;f.forEach((function(t){var n=t[0]!==o[0],s=t[1]!==o[1],c=di(e,t),f=360*de(r,c)/Math.PI;if(s){var d=c.slice();(Math.abs(f-360)<2||Math.abs(f-180)<2)&&(d[1]=r[1]);var g=us(r,d,(r[1]<c[1]?y:m)-c[1],!1,i),O=g.offset[1],b=g.isOutside;isNaN(O)||(h=l+(b?1:-1)*Math.abs(O))}if(n){d=c.slice(),(Math.abs(f-90)<2||Math.abs(f-270)<2)&&(d[0]=r[0]);var w=us(r,d,(r[0]<c[0]?v:p)-c[0],!0,i),x=w.offset[0],S=w.isOutside;isNaN(x)||(u=a+(S?1:-1)*Math.abs(x))}}))}return{maxWidth:u,maxHeight:h}}(t,l,i,o,a),S=x.maxWidth,k=x.maxHeight,C=function(t,e,n,r,i,o,s,a,l){var c=di(e,s),u=ds(t,a,{vertical:[c[0]],horizontal:[c[1]]}),h=u.horizontal.offset,f=u.vertical.offset;if(f||h){var d=hi({datas:l,distX:-f,distY:-h}),p=d[0],g=d[1];return[Math.min(i||1/0,n+s[0]*p)-n,Math.min(o||1/0,r+s[1]*g)-r]}return[0,0]}(t,e(u,h).map((function(t){return t.map((function(t){return me(t,1e-4)}))})),n+u,r+h,S,k,i,s,a);u+=v=C[0],h+=b=C[1]}return[u,h]}function Ss(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var n=t.guideline;e.indexOf(n)>-1||e.push(n)}))})),e}function ks(t,e,n,r,i,o){var s=ns(rs(t,o),e,n),a=s.vertical,l=s.horizontal;a.forEach((function(t){t.isBound&&r.push({type:"bounds",pos:t.pos})})),l.forEach((function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}));var c=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=[n.pos1,n.pos2,n.pos3,n.pos4],i=di(r,[0,0]),o=e.left,s=e.top,a=e.width,l=e.height,c=[[o,s],[o,s+l]],u=[[o,s],[o+a,s]],h=[[o+a,s],[o+a,s+l]],f=[[o,s+l],[o+a,s+l]],d=ts(t,r,[0,0],!1),p=[],g=[],m={top:!1,bottom:!1,left:!1,right:!1};return d.forEach((function(t){var e=t.line,n=t.lineConstants,r=Go(i,e),d=r.horizontal,O=r.vertical,v=Jo(e,n,u,O,1,!0),b=Jo(e,n,f,O,1,!0),y=Jo(e,n,c,d,1,!0),w=Jo(e,n,h,d,1,!0);v.isBound&&!m.top&&(p.push(s),m.top=!0),b.isBound&&!m.bottom&&(p.push(s+l),m.bottom=!0),y.isBound&&!m.left&&(g.push(o),m.left=!0),w.isBound&&!m.right&&(g.push(o+a),m.right=!0)})),{horizontal:p,vertical:g}}(t),u=c.vertical,h=c.horizontal;u.forEach((function(t){re(r,(function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t}))>=0||r.push({type:"bounds",pos:t})})),h.forEach((function(t){re(i,(function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t}))>=0||i.push({type:"bounds",pos:t})}))}var Cs=So("",["resizable","scalable"]),Qs={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var n=t.state,r=n.top,i=n.left,o=n.pos1,s=n.pos2,a=n.pos3,l=n.pos4,c=n.snapRenderInfo;if(!c||!Xo(t,""))return[];n.guidelines=ms(t);var u=Math.min(o[0],s[0],a[0],l[0]),h=Math.min(o[1],s[1],a[1],l[1]),f=c.externalPoses||[],d=no(t.state),p=[],g=[],m=[],O=[],v=[],b=Ii(d),y=b.width,w=b.height,x=b.top,S=b.left,k=b.bottom,C=b.right,Q={left:S,right:C,top:x,bottom:k,center:(S+C)/2,middle:(x+k)/2},_=f.length>0,P=_?Ii(f):{};if(!c.request){if(c.direction&&v.push(function(t,e,n){var r=[];if(n[0]&&n[1])r=[n,[-n[0],n[1]],[n[0],-n[1]]].map((function(t){return di(e,t)}));else if(n[0]||n[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],n].map((function(t){return di(e,t)})):(r=function(t,e){return fi(e).map((function(e){return t[e]}))}(e,n),r.length>1&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]));else for(var i=[e[0],e[1],e[3],e[2],e[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return Zo(t,r.map((function(t){return t[0]})),r.map((function(t){return t[1]})),1)}(t,d,c.direction)),c.snap){var E=Ii(d);c.center&&(E.middle=(E.top+E.bottom)/2,E.center=(E.left+E.right)/2),v.push(No(t,E,1))}_&&(c.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),v.push(No(t,P,1))),v.forEach((function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;p.push.apply(p,e.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),g.push.apply(g,n.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),m.push.apply(m,Ss(e)),O.push.apply(O,Ss(n))}))}ks(t,[S,C],[x,k],p,g),_&&ks(t,[P.left,P.right],[P.top,P.bottom],p,g,c.externalBounds);var T=Dr(Dr([],m,!0),O,!0),$=T.filter((function(t){return t.element&&!t.gapRects})),R=T.filter((function(t){return t.gapRects})).sort((function(t,e){return t.gap-e.gap}));return co(t,"onSnap",{guidelines:T.filter((function(t){return!t.element})),elements:$,gaps:R},!0),Dr(Dr(Dr(Dr(Dr(Dr([],function(t,e,n,r,i){var o=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach((function(a){var l=e.filter((function(t){return t.type===a})),c="vertical"===a?1:0,u=c?0:1,h=function(t,e,n,r){var i="vertical"===t?0:1,o="vertical"===t?1:0,s=i?jo:qo,a=n[s.start],l=n[s.end];return po(e,(function(t){return t.pos[i]})).map((function(e){var n=[],c=[];return e.forEach((function(e){var u,h,f=e.element,d=e.elementRect.rect;if(d[s.end]<a)n.push(e);else if(l<d[s.start])c.push(e);else if(d[s.start]<=a&&l<=d[s.end]&&r){var p=e.pos,g={element:f,rect:Ar(Ar({},d),(u={},u[s.end]=d[s.start],u))},m={element:f,rect:Ar(Ar({},d),(h={},h[s.start]=d[s.end],h))},O=[0,0],v=[0,0];O[i]=p[i],O[o]=p[o],v[i]=p[i],v[o]=p[o]+e.size,n.push({type:t,pos:O,size:0,elementRect:g}),c.push({type:t,pos:v,size:0,elementRect:m})}})),n.sort((function(t,e){return e.pos[o]-t.pos[o]})),c.sort((function(t,e){return t.pos[o]-e.pos[o]})),{total:e,start:n,end:c,inner:[]}}))}(a,l,r,o),f=c?qo:jo,d=c?jo:qo,p=r[f.start],g=r[f.end];h.forEach((function(e){var o=e.total,l=e.start,h=e.end,m=e.inner,O=n[u]+o[0].pos[u]-r[d.start],v=r;l.forEach((function(e){var r=e.elementRect.rect,o=v[f.start]-r[f.end];if(o>0){var l=[0,0];l[c]=n[c]+v[f.start]-p-o,l[u]=O,s.push(cs(t,a,"dashed",s.length,o,l,e.className,i))}v=r})),v=r,h.forEach((function(e){var r=e.elementRect.rect,o=r[f.start]-v[f.end];if(o>0){var l=[0,0];l[c]=n[c]+v[f.end]-p,l[u]=O,s.push(cs(t,a,"dashed",s.length,o,l,e.className,i))}v=r})),m.forEach((function(e){var r=e.elementRect.rect,o=p-r[f.start],l=r[f.end]-g,h=[0,0],d=[0,0];h[c]=n[c]-o,h[u]=O,d[c]=n[c]+g-p,d[u]=O,s.push(cs(t,a,"dashed",s.length,o,h,e.className,i)),s.push(cs(t,a,"dashed",s.length,l,d,e.className,i))}))}))})),s}(t,$,[u,h],Q,e),!0),function(t,e,n,r,i){var o=[];return["horizontal","vertical"].forEach((function(s){var a=e.filter((function(t){return t.type===s})).slice(0,1),l="vertical"===s?0:1,c=l?0:1,u=l?qo:jo,h=l?jo:qo,f=r[u.start],d=r[u.end],p=r[h.start],g=r[h.end];a.forEach((function(e){var r=e.gap,s=e.gapRects,a=Math.max.apply(Math,Dr([p],s.map((function(t){return t.rect[h.start]})),!1)),m=Math.min.apply(Math,Dr([g],s.map((function(t){return t.rect[h.end]})),!1)),O=(a+m)/2;a!==m&&O!==(p+g)/2&&s.forEach((function(e){var s=e.rect,a=e.className,h=[n[0],n[1]];if(s[u.end]<f)h[l]+=s[u.end]-f;else{if(!(d<s[u.start]))return;h[l]+=s[u.start]-f-r}h[c]+=O-p,o.push(cs(t,l?"vertical":"horizontal","gap",o.length,r,h,a,i))}))}))})),o}(t,R,[u,h],Q,e),!0),ls(t,"horizontal",O,[i,r],Q,e),!0),ls(t,"vertical",m,[i,r],Q,e),!0),as(t,"horizontal",g,u,r,y,0,e),!0),as(t,"vertical",p,h,i,w,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},bs(t)},drag:function(t){t.state.guidelines=ms(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!Cs(t,e)&&!Us(t,e))||(!e.isRequest&&e.inputEvent?ve(e.inputEvent.target,_i("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,bs(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,bs(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function _s(t,e,n,r){var i=t.getState(),o=i.renderPoses,s=i.rotation,a=i.direction,l=Fi(t.props,e).zoom,c=a>0?1:-1,u=s/Math.PI*180,h={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var d=f.renderDirectionMap;return n.forEach((function(t){var e=t.dir;h[e]=!0})),n.map((function(t){var n=t.data,i=t.classNames,a=t.dir,f=ti[a];if(!f||!h[a])return null;d[a]=!0;var p=(me(u,15)+c*ei[a]+720)%180,g={};return ae(n).forEach((function(t){g["data-".concat(t)]=n[t]})),r.createElement("div",Ar({className:_i.apply(void 0,Dr(["control","direction",a,e],i,!1)),"data-rotation":p,"data-direction":a},g,{key:"direction-".concat(a),style:Gi.apply(void 0,Dr([s,l],f.map((function(t){return o[t]})),!1))}))}))}function Ps(t,e,n,r){var i=Fi(t.props,n).renderDirections,o=void 0===i?e:i;return o?_s(t,n,(!0===o?Jr:o).map((function(t){return{data:{},classNames:[],dir:t}})),r):[]}function Es(t,e,n,r,i,o){for(var s=[],a=6;a<arguments.length;a++)s[a-6]=arguments[a];var l=de(n,r),c=e?me(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(o),className:_i.apply(void 0,Dr(["line","direction",e?"edge":"",e],s,!1)),"data-rotation":c,"data-line-key":o,"data-direction":e,style:Li(n,r,i,l)})}function Ts(t,e,n,r,i){return(!0===n?Hr:n).map((function(n,o){var s=ti[n],a=s[0],l=s[1];if(null!=l)return Es(t,n,r[a],r[l],i,"".concat(e,"Edge").concat(o),e)})).filter(Boolean)}function $s(t){return function(e,n){var r=Fi(e.props,t).edge;return r&&(!0===r||r.length)?Dr(Dr([],Ts(n,t,r,e.getState().renderPoses,e.props.zoom),!0),function(t,e,n){return Ps(t,["nw","ne","sw","se"],e,n)}(e,t,n),!0):Rs(e,t,n)}}function Rs(t,e,n){return Ps(t,Jr,e,n)}var Ms={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var n=t.props,r=n.throttleDragRotate,i=n.zoom,o=t.getState(),s=o.dragInfo,a=o.beforeOrigin;if(!r||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var c=zi(l),u=de(l,[0,0]);return[e.createElement("div",{className:_i("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(a[0],"px, ").concat(a[1],"px) rotate(").concat(u,"rad) scaleY(").concat(i,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,o=t.state,s=o.target,a=o.gestos;if(a.draggable)return!1;a.draggable=i||t.targetGesto;var l=uo(s);n.datas={},n.left=parseFloat(l.left||"")||0,n.top=parseFloat(l.top||"")||0,n.bottom=parseFloat(l.bottom||"")||0,n.right=parseFloat(l.right||"")||0,n.startValue=[0,0],si(t,e),mi(e,"translate"),function(t,e){e.absolutePoses=no(t.state)}(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=so(t,e,Ar({set:function(t){n.startValue=t}},gi(e)));return!1!==(r||co(t,"onDragStart",c))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(a.draggable=null,n.isPinch=!1),!!n.isDrag&&c},drag:function(t,e){if(e){ai(e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.isPinch,s=e.isRequest,a=e.deltaOffset,l=e.distX,c=e.distY,u=n.isDrag,h=n.prevDist,f=n.prevBeforeDist,d=n.startValue;if(u){a&&(l+=a[0],c+=a[1]);var p=t.props,g=p.parentMoveable,m=r?0:p.throttleDrag||0,O=r?0:p.throttleDragRotate||0,v=!1,b=0;if(!r&&O>0&&(l||c)){var y=p.startDragRotate||0,w=me(y+180*de([0,0],[l,c])/Math.PI,O)-y,x=c*Math.abs(Math.cos((w-90)/180*Math.PI)),S=zi([l*Math.abs(Math.cos(w/180*Math.PI)),x]);b=w*Math.PI/180,l=S*Math.cos(b),c=S*Math.sin(b)}if(!o&&!r&&!i&&(!O||l||c)){var k=fs(t,l,c,O,s||a,n),C=k[0],Q=k[1],_=C.isSnap,P=C.isBound,E=C.offset,T=Q.isSnap,$=Q.isBound;v=_||T||P||$,l+=E,c+=Q.offset}var R=Sn(ui({datas:n,distX:l,distY:c}),d),M=Sn(function(t){var e=t.datas,n=ui({datas:e,distX:t.distX,distY:t.distY}),r=ci(e,function(t,e){for(var n=Dn(4),r=0;r<3;++r)n[12+r]=t[r]||0;return n}([n[0],n[1]]));return Qn(r,bn([0,0,0],4),4)}({datas:n,distX:l,distY:c}),d);O||v||(Oe(M,m),Oe(R,m)),Oe(M,Lr),Oe(R,Lr);var A=kn(R,d),D=kn(M,d),j=kn(D,h),q=kn(A,f);n.prevDist=D,n.prevBeforeDist=A,n.passDelta=j,n.passDist=D;var X=n.left+A[0],V=n.top+A[1],U=n.right-A[0],Z=n.bottom-A[1],I=li(n,"translate(".concat(M[0],"px, ").concat(M[1],"px)"),"translate(".concat(D[0],"px, ").concat(D[1],"px)"));if(vi(e,I),t.state.dragInfo.dist=r?[0,0]:D,r||g||!j.every((function(t){return!t}))||!q.some((function(t){return!t}))){var N=t.state,B=N.width,z=N.height,W=so(t,e,Ar({transform:I,dist:D,delta:j,translate:M,beforeDist:A,beforeDelta:q,beforeTranslate:R,left:X,top:V,right:U,bottom:Z,width:B,height:z,isPinch:o},io({transform:I},e)));return!r&&co(t,"onDrag",W),W}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return!(!r[0]&&!r[1])&&(n.deltaOffset=[0,0],this.drag(t,Ar(Ar({},e),{deltaOffset:r})))},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,r.isDrag){r.isDrag=!1;var i=ao(t,e,{});return!n&&co(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var s=Ro(t,this,"dragStart",[r||0,i||0],e,!1,"draggable"),a=co(t,"onDragGroupStart",Ar(Ar({},o),{targets:t.props.targets,events:s}));return n.isDrag=!1!==a,!!n.isDrag&&o},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),r=Ro(t,this,"drag",e.datas.passDelta,e,!1,"draggable");if(n){var i=Ar({targets:t.props.targets,events:r},n);return co(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var r=Ro(t,this,"dragEnd",[0,0],e,!1,"draggable");return co(t,"onDragGroupEnd",ao(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:r,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},As=So("resizable"),Ds={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:$s("resizable"),dragControlCondition:As,viewClassName:xo("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,o=e.isGroup,s=e.parentDirection,a=e.parentGesto,l=e.datas,c=e.parentFixedDirection,u=e.parentEvent,h=Ki(s,i,r,l),f=t.state,d=f.target,p=f.width,g=f.height,m=f.gestos;if(!h||!d)return!1;if(m.resizable)return!1;m.resizable=a||t.controlGesto,!i&&si(t,e),l.datas={},l.direction=h,l.startOffsetWidth=p,l.startOffsetHeight=g,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.cssWidth,l.startHeight=f.cssHeight,l.maxSize=[1/0,1/0],o||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var O=t.props.transformOrigin||"% %";function v(t){l.ratio=t&&isFinite(t)?t:0}function b(t){l.fixedDirection=t,l.fixedPosition=di(l.startPositions,t)}function y(t){l.minSize=[le("".concat(t[0]),0)||0,le("".concat(t[1]),0)||0]}function w(t){var e=[t[0]||1/0,t[1]||1/0];zt(e[0])&&!isFinite(e[0])||(e[0]=le("".concat(e[0]),0)||1/0),zt(e[1])&&!isFinite(e[1])||(e[1]=le("".concat(e[1]),0)||1/0),l.maxSize=e}l.transformOrigin=O&&Bt(O)?O.split(" "):O,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=null!==(n=null==e?void 0:e.parentIsWidth)&&void 0!==n?n:!h[0]&&!h[1]||h[0]||!h[1],l.startPositions=no(t.state),v(p/g),b(c||[-h[0],-h[1]]),l.setFixedDirection=b,l.setMin=y,l.setMax=w;var x=so(t,e,{direction:h,startRatio:l.ratio,set:function(t){var e=t[0],n=t[1];l.startWidth=e,l.startHeight=n},setMin:y,setMax:w,setRatio:v,setFixedDirection:b,setOrigin:function(t){l.transformOrigin=t},dragStart:Ms.dragStart(t,(new ii).dragStart([0,0],e))}),S=u||co(t,"onResizeStart",x);return l.startFixedDirection=l.fixedDirection,!1!==S&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:h}),!!l.isResize&&x},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,o=e.isPinch,s=e.parentKeepRatio,a=e.dragClient,l=e.parentDist,c=e.isRequest,u=e.isGroup,h=e.parentEvent,f=e.resolveMatrix,d=r.isResize,p=r.transformOrigin,g=r.startWidth,m=r.startHeight,O=r.prevWidth,v=r.prevHeight,b=r.minSize,y=r.maxSize,w=r.ratio,x=r.startOffsetWidth,S=r.startOffsetHeight,k=r.isWidth;if(d){if(f){var C=t.state.is3d,Q=r.startOffsetMatrix,_=r.startTransformOrigin,P=C?4:3,E=Vn(yi(e)),T=Math.sqrt(E.length);P!==T&&(E=yn(E,T,P));var $=pi(Q,E,_,P),R=Zi($,x,S,P);r.startPositions=R,r.nextTargetMatrix=E,r.nextAllMatrix=$}var M=Fi(t.props,"resizable"),A=M.resizeFormat,D=M.throttleResize,j=void 0===D?i?0:1:D,q=M.parentMoveable,X=M.keepRatioFinally,V=r.direction,U=V,Z=0,I=0;V[0]||V[1]||(U=[1,1]);var N=w&&(null!=s?s:M.keepRatio)||!1,B=rt(),z=B[0],W=B[1];h||(r.setFixedDirection(r.fixedDirection),co(t,"onBeforeResize",so(t,e,{startFixedDirection:r.startFixedDirection,setFixedDirection:function(t){var e;return r.setFixedDirection(t),e=rt(),z=e[0],W=e[1],[z,W]},boundingWidth:z,boundingHeight:W,setSize:function(t){z=t[0],W=t[1]}},!0)));var L=a;a||(L=!i&&o?Qi(t,[0,0]):r.fixedPosition);var G=[0,0];if(o||(G=function(t,e,n,r,i,o,s){if(!Xo(t,"resizable"))return[0,0];var a=s.fixedDirection,l=s.nextAllMatrix,c=t.state,u=c.allMatrix,h=c.is3d;return xs(t,(function(t,r){return ys(l||u,e+t,n+r,a,i,h)}),e,n,r,i,o,s)}(t,z,W,V,L,c,r)),l&&(!l[0]&&(G[0]=0),!l[1]&&(G[1]=0)),N){U[0]&&U[1]&&G[0]&&G[1]&&(Math.abs(G[0])>Math.abs(G[1])?G[1]=0:G[0]=0);var F=!G[0]&&!G[1];F&&it(),U[0]&&!U[1]||G[0]&&!G[1]||F&&k?(z+=G[0],W=z/w):(!U[0]&&U[1]||!G[0]&&G[1]||F&&!k)&&(W+=G[1],z=W*w)}else z+=G[0],W+=G[1],z=Math.max(0,z),W=Math.max(0,W);n=he([z,W],b,y,!!N&&w),z=n[0],W=n[1],it(),N&&(u||X)&&(k?W=z/w:z=W*w);var Y=[(Z=z-x)-O,(I=W-S)-v];r.prevWidth=Z,r.prevHeight=I;var H=function(t,e,n,r,i,o){var s=t.props.groupable,a=t.state,l=a.transformOrigin,c=a.offsetMatrix,u=a.is3d,h=a.width,f=a.height,d=a.left,p=a.top,g=o.fixedDirection,m=o.nextTargetMatrix||a.targetMatrix,O=u?4:3,v=function(t,e,n,r,i,o){return void 0===r&&(r=e),void 0===i&&(i=n),void 0===o&&(o=[0,0]),t?t.map((function(t,s){var a=Kt(t),l=a.value,c=a.unit,u=s?i:r,h=s?n:e;return"%"===t||isNaN(l)?h*(u?o[s]/u:0):"%"!==c?l:h*l/100})):o}(i,e,n,h,f,l),b=s?d:0,y=s?p:0,w=function(t,e,n,r,i,o){var s=di(Zi(e,n,r,i),o);return[t[0]-s[0],t[1]-s[1]]}(r,pi(c,m,v,O),e,n,O,g);return kn(w,[b,y])}(t,z,W,L,p,r);if(q||!Y.every((function(t){return!t}))||!H.every((function(t){return!t}))){var J=Ms.drag(t,ri(e,t.state,H,!!o,!1,"draggable")),K=J.transform,tt=g+Z,et=m+I,nt=so(t,e,Ar({width:tt,height:et,offsetWidth:Math.round(z),offsetHeight:Math.round(W),startRatio:w,boundingWidth:z,boundingHeight:W,direction:V,dist:[Z,I],delta:Y,isPinch:!!o,drag:J},oo({style:{width:"".concat(tt,"px"),height:"".concat(et,"px")},transform:K},J,e)));return!h&&co(t,"onResize",nt),nt}}function rt(){var t=r.fixedDirection,n=Eo(U,N,r,e);Z=n.distWidth,I=n.distHeight;var i=U[0]-t[0]||N?Math.max(x+Z,Lr):x,o=U[1]-t[1]||N?Math.max(S+I,Lr):S;return N&&x&&S&&(k?o=i/w:i=o*w),[i,o]}function it(){var t;A&&(t=A([z,W]),z=t[0],W=t[1]),z=me(z,j),W=me(W,j)}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,o=n.startOffsetHeight,s=n.prevWidth,a=n.prevHeight;if(r){var l=t.state,c=l.width-(i+s),u=l.height-(o+a),h=Math.abs(c)>3,f=Math.abs(u)>3;return h&&(n.startWidth+=c,n.startOffsetWidth+=c,n.prevWidth+=c),f&&(n.startHeight+=u,n.startOffsetHeight+=u,n.prevHeight+=u),h||f?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=ao(t,e,{});return!r&&co(t,"onResizeEnd",i),i}},dragGroupControlCondition:As,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,Ar(Ar({},e),{isGroup:!0}));if(!r)return!1;var i=$o(t,"resizable",e);function o(e,r){var i=n.fixedDirection,o=n.fixedPosition,s=di(r.datas.startPositions||no(e.state),i),a=Qn(An(-t.rotation/180*Math.PI,3),[s[0]-o[0],s[1]-o[1],1],3),l=a[0],c=a[1];return r.datas.originalX=l,r.datas.originalY=c,r}var s=n.startOffsetWidth,a=n.startOffsetHeight;function l(){var t=n.minSize;i.forEach((function(e){var n=e.datas,r=n.minSize,i=n.startOffsetWidth,o=n.startOffsetHeight,l=s*(i?r[0]/i:0),c=a*(o?r[1]/o:0);t[0]=Math.max(t[0],l),t[1]=Math.max(t[1],c)}))}function c(){var t=n.maxSize;i.forEach((function(e){var n=e.datas,r=n.maxSize,i=n.startOffsetWidth,o=n.startOffsetHeight,l=s*(i?r[0]/i:0),c=a*(o?r[1]/o:0);t[0]=Math.min(t[0],l),t[1]=Math.min(t[1],c)}))}var u=Mo(t,this,"dragControlStart",e,(function(t,e){return o(t,e)}));l(),c();var h=function(t){r.setFixedDirection(t),u.forEach((function(e,n){e.setFixedDirection(t),o(e.moveable,i[n])}))};n.setFixedDirection=h;var f=Ar(Ar({},r),{targets:t.props.targets,events:u.map((function(t){return Ar(Ar({},t),{setMin:function(e){t.setMin(e),l()},setMax:function(e){t.setMax(e),c()}})})),setFixedDirection:h,setMin:function(t){r.setMin(t),l()},setMax:function(t){r.setMax(t),c()}}),d=co(t,"onResizeGroupStart",f);return n.isResize=!1!==d,!!n.isResize&&r},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Fi(t.props,"resizable");lo(t,"onBeforeResize",(function(n){co(t,"onBeforeResizeGroup",so(t,e,Ar(Ar({},n),{targets:r.targets}),!0))}));var i=this.dragControl(t,Ar(Ar({},e),{isGroup:!0}));if(i){var o=i.boundingWidth,s=i.boundingHeight,a=i.dist,l=r.keepRatio,c=[o/(o-a[0]),s/(s-a[1])],u=n.fixedPosition,h=Mo(t,this,"dragControl",e,(function(e,n){var r=Qn(An(t.rotation/180*Math.PI,3),[n.datas.originalX*c[0],n.datas.originalY*c[1],1],3),i=r[0],o=r[1];return Ar(Ar({},n),{parentDist:null,parentScale:c,dragClient:Sn(u,[i,o]),parentKeepRatio:l})})),f=Ar({targets:r.targets,events:h},i);return co(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var r=Mo(t,this,"dragControlEnd",e);return co(t,"onResizeGroupEnd",ao(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){var n;return{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null===(n=null==t?void 0:t.horizontal)||void 0===n||n}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function js(t,e,n,r,i){var o=t.props.groupable,s=t.state,a=s.is3d?4:3,l=e.origin,c=Ui(t.state.rootMatrix,kn([l[0],l[1]],o?[0,0]:[s.left,s.top]),a),u=Sn([i.left,i.top],c);e.startAbsoluteOrigin=u,e.prevDeg=de(u,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=ge(u,[n,r])}function qs(t,e,n){var r=n.defaultDeg,i=n.prevDeg,o=i%360,s=Math.floor(i/360);o<0&&(o+=360),o>t&&o>270&&t<90?++s:o<t&&o<90&&t>270&&--s;var a=e*(360*s+t-r);return n.prevDeg=r+a,a}function Xs(t,e,n,r){return qs(de(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function Vs(t,e,n,r,i,o){var s=t.props.throttleRotate,a=void 0===s?0:s,l=n.prevSnapDeg,c=0,u=!1;if(o){var h=function(t,e,n){if(!Xo(t,"rotatable"))return{isSnap:!1,rotation:n};var r=e.pos1,i=e.pos2,o=e.pos3,s=e.pos4,a=e.origin,l=n*Math.PI/180,c=[r,i,o,s].map((function(t){return kn(t,a)})),u=c.map((function(t){return $n(t,l)})),h=Dr(Dr([],function(t,e,n,r,i){if(!t.props.bounds)return[];var o=i*Math.PI/180,s=rs(t),a=s.left,l=s.top,c=s.right,u=s.bottom,h=a-r[0],f=c-r[0],d=l-r[1],p=u-r[1],g={left:h,top:d,right:f,bottom:p};if(!os(n,g,0))return[];var m=[];return[[h,0],[f,0],[d,1],[p,1]].forEach((function(t){var r=t[0],i=t[1];n.forEach((function(t){var n=de([0,0],t);m.push.apply(m,function(t,e,n){var r=zi(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort((function(e,r){return Math.abs(e-t[n?0:1])-Math.abs(r-t[n?0:1])})).map((function(t){return de([0,0],n?[t,e]:[e,t])}))}(t,r,i).map((function(t){return o+t-n})).filter((function(t){return!os(e,g,t)})).map((function(t){return me(180*t/Math.PI,Lr)})))}))})),m}(t,c,u,a,n),!0),function(t,e,n,r,i){var o=t.props.innerBounds,s=i*Math.PI/180;if(!o)return[];var a=o.left,l=o.top,c=o.width,u=o.height,h=a-r[0],f=a+c-r[0],d=l-r[1],p=l+u-r[1],g=[[h,d],[f,d],[h,p],[f,p]],m=di(n,[0,0]);if(!es(n,g,m,0))return[];var O=[],v=g.map((function(t){return[zi(t),de([0,0],t)]}));return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach((function(t){var n=de([0,0],function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return[e[0],0];if(!i)return[0,e[1]];var o=i/r,s=-o*e[0]+e[1];return[-s/(o+1/o),s/(o*o+1)]}(t)),r=function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!i)return Math.abs(e[1]);var o=i/r;return Math.abs((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}(t);O.push.apply(O,v.filter((function(t){var e=t[0];return e&&r<=e})).map((function(t){var e=t[0],i=t[1],o=Math.acos(e?r/e:0);return[s+(i+o)-n,s+(i-o)-n]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!es(e,g,m,t)})).map((function(t){return me(180*t/Math.PI,Lr)})))})),O}(t,c,u,a,n),!0);h.sort((function(t,e){return Math.abs(t-n)-Math.abs(e-n)}));var f=h.length>0;return{isSnap:f,rotation:f?h[0]:n}}(t,e,r);u=h.isSnap,c=i+h.rotation}u||(c=me(i+r,a));var f=c-i;return n.prevSnapDeg=f,[f-l,f,c]}function Us(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var n=e.inputEvent.target;if(ve(n,_i("rotation-control"))||ve(n,_i("around-control"))||ve(n,_i("control"))&&ve(n,_i("rotatable")))return!0;var r=t.props.rotationTarget;return!!r&&Qo(r,!0).some((function(t){return!!t&&(n===t||n.contains(t))}))}var Zs=Jr.map((function(t){var e="",n="",r="center",i="center";return t.indexOf("n")>-1&&(e="top: -20px;",i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: -20px;",r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(n).concat(e,"\n        transform-origin: ").concat(r," ").concat(i,";\n    }")})).join("\n"),Is=".rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n.rotation .rotation-line {\n    display: block;\n    width: 100%;\n    height: 100%;\n    transform-origin: 50% 50%;\n}\n.rotation .rotation-control {\n    border-color: #4af;\n    border-color: var(--moveable-color);\n    background:#fff;\n    cursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\n    cursor: alias;\n}\n.around-control {\n    position: absolute;\n    will-change: transform;\n    width: 20px;\n    height: 20px;\n    left: -10px;\n    top: -10px;\n    box-sizing: border-box;\n    background: transparent;\n    z-index: 8;\n    cursor: alias;\n    transform-origin: center center;\n}\n.rotatable.direction.control.move {\n    cursor: move;\n}\n".concat(Zs,"\n"),Ns={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[Is],viewClassName:function(t){return t.isDragging("rotatable")?_i("view-rotation-dragging"):""},render:function(t,e){var n=Fi(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,o=n.zoom,s=n.renderDirections,a=n.rotateAroundControls,l=n.resolveAblesWithRotatable,c=t.getState(),u=c.renderPoses,h=c.direction;if(!r)return null;var f=function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];if("none"!==t){var a=(t||"top").split("-"),l=a[0],c=a[1],u=[r,i];"left"===l?u=[o,r]:"right"===l?u=[i,s]:"bottom"===l&&(u=[s,o]);var h=[(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2],f=Hi(u,n);if(c){var d="top"===c||"left"===c,p="bottom"===l||"left"===l;h=u[d&&!p||!d&&p?0:1]}return[h,f]}}(i,u,h),d=[];if(f){var p=f[0],g=f[1];d.push(e.createElement("div",{key:"rotation",className:_i("rotation"),style:{transform:"translate(-50%) translate(".concat(p[0],"px, ").concat(p[1],"px) rotate(").concat(g,"rad)")}},e.createElement("div",{className:_i("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:_i("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}if(s){var m=ae(l||{}),O={};m.forEach((function(t){l[t].forEach((function(e){O[e]=t}))}));var v=[];Nt(s)&&(v=s.map((function(t){var e=O[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}}))),d.push.apply(d,_s(t,"rotatable",v,e))}return a&&d.push.apply(d,function(t,e){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var r=t.getState(),i=r.renderPoses,o=r.rotation,s=r.direction,a=n.renderDirectionMap,l=t.props.zoom,c=s>0?1:-1,u=o/Math.PI*180;return ae(a).map((function(t){var n=ti[t];if(!n)return null;var r=(me(u,15)+c*ei[t]+720)%180;return e.createElement("div",{className:_i("around-control"),"data-rotation":r,"data-direction":t,key:"direction-around-".concat(t),style:Gi.apply(void 0,Dr([o,l],n.map((function(t){return i[t]})),!1))})}))}(t,e)),d},dragControlCondition:Us,dragControlStart:function(t,e){var n,r,i=e.datas,o=e.clientX,s=e.clientY,a=e.parentRotate,l=e.parentFlag,c=e.isPinch,u=e.isRequest,h=t.state,f=h.target,d=h.left,p=h.top,g=h.direction,m=h.beforeDirection,O=h.targetTransform,v=h.moveableClientRect,b=h.offsetMatrix,y=h.targetMatrix,w=h.allMatrix,x=h.width,S=h.height;if(!u&&!f)return!1;var k=t.getRect();i.rect=k,i.transform=O,i.left=d,i.top=p;var C=function(e){i.fixedDirection=e,i.fixedPosition=Ci(t,e),j&&j.setFixedDirection(e)},Q=o,_=s;if(u||c||l){var P=a||0;i.beforeInfo={origin:k.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},i.afterInfo=Ar(Ar({},i.beforeInfo),{origin:k.origin}),i.absoluteInfo=Ar(Ar({},i.beforeInfo),{origin:k.origin,startValue:P})}else{var E=null===(r=e.inputEvent)||void 0===r?void 0:r.target;if(E){var T=E.getAttribute("data-direction")||"",$=Kr[T];if($){i.isControl=!0,i.isAroundControl=ve(E,_i("around-control")),i.controlDirection=$;var R=E.getAttribute("data-resolve");R&&(i.resolveAble=R);var M=function(t,e,n){var r=16===t.length?4:3,i=e.map((function(e){return Ui(t,e,r)})),o=n.left,s=n.top;return i.map((function(t){return[t[0]+o,t[1]+s]}))}(h.rootMatrix,h.renderPoses,v);n=di(M,$),Q=n[0],_=n[1]}}i.beforeInfo={origin:k.beforeOrigin},i.afterInfo={origin:k.origin},i.absoluteInfo={origin:k.origin,startValue:k.rotation};var A=C;C=function(e){var n=h.is3d?4:3,r=di([[0,0],[x,0],[0,S],[x,S]],e),o=Sn(vn(y,n),r),s=o[0],a=o[1],l=Qn(b,bn([s,a],n)),c=Qn(w,bn([r[0],r[1]],n));A(e),i.beforeInfo.origin=l,i.afterInfo.origin=c,i.absoluteInfo.origin=c,js(t,i.beforeInfo,Q,_,v),js(t,i.afterInfo,Q,_,v),js(t,i.absoluteInfo,Q,_,v)}}i.startClientX=Q,i.startClientY=_,i.direction=g,i.beforeDirection=m,i.startValue=0,i.datas={},mi(e,"rotate");var D=!1,j=!1;i.isControl&&i.resolveAble&&"resizable"===i.resolveAble&&(j=Ds.dragControlStart(t,Ar(Ar({},new ii("resizable").dragStart([0,0],e)),{parentDirection:i.controlDirection,parentFixedDirection:i.fixedDirection}))),j||(D=Ms.dragStart(t,(new ii).dragStart([0,0],e))),C(function(t){var e=t.state,n=e.width,r=e.height,i=e.transformOrigin;return[i[0]/(n/2)-1,i[1]/(r/2)-1]}(t));var q=so(t,e,Ar(Ar({set:function(t){i.startValue=t*Math.PI/180},setFixedDirection:C},gi(e)),{dragStart:D,resizeStart:j})),X=co(t,"onRotateStart",q);return i.isRotate=!1!==X,h.snapRenderInfo={request:e.isRequest},!!i.isRotate&&q},dragControl:function(t,e){var n,r,i,o=e.datas,s=e.distX,a=e.distY,l=e.parentRotate,c=e.parentFlag,u=e.isPinch,h=e.groupDelta,f=o.beforeDirection,d=o.beforeInfo,p=o.afterInfo,g=o.absoluteInfo,m=o.isRotate,O=o.startValue,v=o.rect,b=o.startClientX,y=o.startClientY;if(m){ai(e,"rotate");var w,x,S,k,C,Q,_,P,E,T=function(t){return Bi(t.datas.beforeTransform,[50,50],100,100).direction}(e),$=f*T,R=t.props.parentMoveable,M=180/Math.PI*O,A=g.startValue,D=!1,j=b+s,q=y+a;if(!c&&"parentDist"in e){var X=e.parentDist;x=X,C=X,P=X}else u||c?(x=qs(l,f,d),C=qs(l,$,p),P=qs(l,$,g)):(x=Xs(j,q,f,d),C=Xs(j,q,$,p),P=Xs(j,q,$,g),D=!0);if(co(t,"onBeforeRotate",so(t,e,{beforeRotation:M+x,rotation:M+C,absoluteRotation:A+P,setRotation:function(t){x=C=t-M,P=C}},!0)),w=(n=Vs(t,v,d,x,M,D))[0],x=n[1],S=n[2],k=(r=Vs(t,v,p,C,M,D))[0],C=r[1],Q=r[2],_=(i=Vs(t,v,g,P,A,D))[0],P=i[1],E=i[2],_||k||w||R){var V=li(o,"rotate(".concat(Q,"deg)"),"rotate(".concat(C,"deg)")),U=function(t,e,n){var r=n.fixedDirection,i=n.fixedPosition;return ki(t,"rotate(".concat(e,"deg)"),r,i,n)}(t,C,o),Z=kn(Sn(h||[0,0],U),o.prevInverseDist||[0,0]);o.prevInverseDist=U,o.requestValue=null;var I=Si(t,V,Z,u,e),N=I,B=ge([j,q],g.startAbsoluteOrigin)-g.startDist,z=void 0;if("resizable"===o.resolveAble){var W=Ds.dragControl(t,Ar(Ar({},ri(e,t.state,[e.deltaX,e.deltaY],!!u,!1,"resizable")),{resolveMatrix:!0,parentDistance:B}));W&&(z=W,N=oo(N,W,e))}var L=so(t,e,Ar(Ar({delta:k,dist:C,rotate:Q,rotation:Q,beforeDist:x,beforeDelta:w,beforeRotate:S,beforeRotation:S,absoluteDist:P,absoluteDelta:_,absoluteRotate:E,absoluteRotation:E,isPinch:!!u,resize:z},I),N));return co(t,"onRotate",L),L}}},dragControlAfter:function(t,e){e.datas.requestValue},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ao(t,e,{});return co(t,"onRotateEnd",r),r}},dragGroupControlCondition:Us,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,o=r.top,s=r.beforeOrigin,a=this.dragControlStart(t,e);if(!a)return!1;a.set(n.beforeDirection*t.rotation);var l=Mo(t,this,"dragControlStart",e,(function(t,e){var n=t.state,r=n.left,a=n.top,l=n.beforeOrigin,c=Sn(kn([r,a],[i,o]),kn(l,s));return e.datas.startGroupClient=c,e.datas.groupClient=c,Ar(Ar({},e),{parentRotate:0})})),c=co(t,"onRotateGroupStart",Ar(Ar({},a),{targets:t.props.targets,events:l}));return n.isRotate=!1!==c,!!n.isRotate&&a},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){lo(t,"onBeforeRotate",(function(n){co(t,"onBeforeRotateGroup",so(t,e,Ar(Ar({},n),{targets:t.props.targets}),!0))}));var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,o=r.beforeDist,s=o/180*Math.PI,a=Mo(t,this,"dragControl",e,(function(t,e){var n=e.datas.startGroupClient,r=e.datas.groupClient,a=r[0],l=r[1],c=$n(n,s*i),u=c[0],h=c[1],f=[u-a,h-l];return e.datas.groupClient=[u,h],Ar(Ar({},e),{parentRotate:o,groupDelta:f})}));t.rotation=i*r.beforeRotation;var l=Ar({targets:t.props.targets,events:a,set:function(e){t.rotation=e},setGroupRotation:function(e){t.rotation=e}},r);return co(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var r=Mo(t,this,"dragControlEnd",e);return co(t,"onRotateGroupEnd",ao(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},Bs=So("scalable"),zs={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:$s("scalable"),dragControlCondition:Bs,viewClassName:xo("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=Ki(e.parentDirection,r,i,n),s=t.state,a=s.width,l=s.height,c=s.targetTransform,u=s.target,h=s.pos1,f=s.pos2,d=s.pos4;if(!o||!u)return!1;r||si(t,e),n.datas={},n.transform=c,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=a,n.startOffsetHeight=l,n.startValue=[1,1];var p=ge(h,f),g=ge(f,d),m=!o[0]&&!o[1]||o[0]||!o[1];function O(t){n.ratio=t&&isFinite(t)?t:0}function v(t){n.fixedDirection=t,n.fixedPosition=di(n.startPositions,t)}n.scaleWidth=p,n.scaleHeight=g,n.scaleXRatio=p/a,n.scaleYRatio=g/l,mi(e,"scale"),n.isWidth=m,n.startPositions=no(t.state),n.setFixedDirection=v,O(ge(h,f)/ge(f,d)),v([-o[0],-o[1]]);var b=so(t,e,Ar(Ar({direction:o,set:function(t){n.startValue=t},setRatio:O,setFixedDirection:v},gi(e)),{dragStart:Ms.dragStart(t,(new ii).dragStart([0,0],e))})),y=co(t,"onScaleStart",b);return n.startFixedDirection=n.fixedDirection,!1!==y&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!n.isScale&&b},dragControl:function(t,e){ai(e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,o=e.isPinch,s=e.dragClient,a=e.isRequest,l=n.prevDist,c=n.direction,u=n.startOffsetWidth,h=n.startOffsetHeight,f=n.isScale,d=n.startValue,p=n.isWidth,g=n.ratio;if(!f)return!1;var m=t.props,O=m.throttleScale,v=m.parentMoveable,b=c;c[0]||c[1]||(b=[1,1]);var y=g&&(null!=r?r:m.keepRatio)||!1,w=t.state;function x(){var t=Eo(b,y,n,e),r=t.distWidth,i=t.distHeight,o=(u+r)/u,s=(h+i)/h;return o=b[0]||y?o*d[0]:d[0],s=b[1]||y?s*d[1]:d[1],0===o&&(o=(l[0]>0?1:-1)*Gr),0===s&&(s=(l[1]>0?1:-1)*Gr),[o,s]}var S=x();if(!o&&t.props.groupable){var k=(w.snapRenderInfo||{}).direction;Nt(k)&&(k[0]||k[1])&&(w.snapRenderInfo={direction:c,request:e.isRequest})}co(t,"onBeforeScale",so(t,e,{scale:S,setFixedDirection:function(t){return n.setFixedDirection(t),S=x()},startFixedDirection:n.startFixedDirection,setScale:function(t){S=t}},!0));var C=[S[0]/d[0],S[1]/d[1]],Q=s,_=[0,0];if(s||(Q=!i&&o?Qi(t,[0,0]):n.fixedPosition),o||(_=function(t,e,n,r,i){if(!Xo(t,"scalable"))return[0,0];var o=i.startOffsetWidth,s=i.startOffsetHeight,a=i.fixedPosition,l=i.fixedDirection,c=i.is3d,u=xs(t,(function(t,n){return ys(function(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d?4:3;return pi(r,xn(t.targetMatrix,jn(e,i),i),n,i)}(i,Sn(e,[t/o,n/s])),o,s,l,a,c)}),o,s,n,a,r,i);return[u[0]/o,u[1]/s]}(t,C,c,a,n)),y){b[0]&&b[1]&&_[0]&&_[1]&&(Math.abs(_[0]*u)>Math.abs(_[1]*h)?_[1]=0:_[0]=0);var P=!_[0]&&!_[1];if(P&&(p?C[0]=me(C[0]*d[0],O)/d[0]:C[1]=me(C[1]*d[1],O)/d[1]),b[0]&&!b[1]||_[0]&&!_[1]||P&&p){C[0]+=_[0];var E=u*C[0]*d[0]/g;C[1]=E/h/d[1]}else if(!b[0]&&b[1]||!_[0]&&_[1]||P&&!p){C[1]+=_[1];var T=h*C[1]*d[1]*g;C[0]=T/u/d[0]}}else C[0]+=_[0],C[1]+=_[1],_[0]||(C[0]=me(C[0]*d[0],O)/d[0]),_[1]||(C[1]=me(C[1]*d[1],O)/d[1]);0===C[0]&&(C[0]=(l[0]>0?1:-1)*Gr),0===C[1]&&(C[1]=(l[1]>0?1:-1)*Gr);var $,R,M=[C[0]/l[0],C[1]/l[1]];R=d,S=[($=C)[0]*R[0],$[1]*R[1]];var A=function(t,e,n,r,i){return ki(t,"scale(".concat(e.join(", "),")"),n,r,i)}(t,C,n.fixedDirection,Q,n),D=kn(A,n.prevInverseDist||[0,0]);if(n.prevDist=C,n.prevInverseDist=A,S[0]===l[0]&&S[1]===l[1]&&D.every((function(t){return!t}))&&!v)return!1;var j=li(n,"scale(".concat(S.join(", "),")"),"scale(".concat(C.join(", "),")")),q=so(t,e,Ar({offsetWidth:u,offsetHeight:h,direction:c,scale:S,dist:C,delta:M,isPinch:!!o},Si(t,j,D,o,e)));return co(t,"onScale",q),q},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ao(t,e,{});return co(t,"onScaleEnd",r),r},dragGroupControlCondition:Bs,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=$o(t,"resizable",e);function o(e,r){var i=n.fixedDirection,o=n.fixedPosition,s=di(r.datas.startPositions||no(e.state),i),a=Qn(An(-t.rotation/180*Math.PI,3),[s[0]-o[0],s[1]-o[1],1],3),l=a[0],c=a[1];return r.datas.originalX=l,r.datas.originalY=c,r}n.moveableScale=t.scale;var s=Mo(t,this,"dragControlStart",e,(function(t,e){return o(t,e)})),a=function(t){r.setFixedDirection(t),s.forEach((function(e,n){e.setFixedDirection(t),o(e.moveable,i[n])}))};n.setFixedDirection=a;var l=Ar(Ar({},r),{targets:t.props.targets,events:s,setFixedDirection:a}),c=co(t,"onScaleGroupStart",l);return n.isScale=!1!==c,!!n.isScale&&l},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){lo(t,"onBeforeScale",(function(n){co(t,"onBeforeScaleGroup",so(t,e,Ar(Ar({},n),{targets:t.props.targets}),!0))}));var r=this.dragControl(t,e);if(r){var i=n.moveableScale;t.scale=[r.scale[0]*i[0],r.scale[1]*i[1]];var o=t.props.keepRatio,s=r.dist,a=r.scale,l=n.fixedPosition,c=Mo(t,this,"dragControl",e,(function(e,n){var r=Qn(An(t.rotation/180*Math.PI,3),[n.datas.originalX*s[0],n.datas.originalY*s[1],1],3),i=r[0],c=r[1];return Ar(Ar({},n),{parentDist:null,parentScale:a,parentKeepRatio:o,dragClient:Sn(l,[i,c])})})),u=Ar({targets:t.props.targets,events:c},r);return co(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var r=Mo(t,this,"dragControlEnd",e);return co(t,"onScaleGroupEnd",ao(t,e,{targets:t.props.targets,events:r})),n}},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:r.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function Ws(t,e){return t.map((function(t,n){return Ut(t,e[n],1,2)}))}function Ls(t,e,n){var r=de(t,e),i=de(t,n)-r;return i>=0?i:i+2*Math.PI}var Gs={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:xo("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.warpable,s=n.zoom;if(r||i||!o)return[];var a=t.state,l=a.pos1,c=a.pos2,u=a.pos3,h=a.pos4,f=Ws(l,c),d=Ws(c,l),p=Ws(l,u),g=Ws(u,l),m=Ws(u,h),O=Ws(h,u),v=Ws(c,h),b=Ws(h,c);return Dr([e.createElement("div",{className:_i("line"),key:"middeLine1",style:Li(f,m,s)}),e.createElement("div",{className:_i("line"),key:"middeLine2",style:Li(d,O,s)}),e.createElement("div",{className:_i("line"),key:"middeLine3",style:Li(p,v,s)}),e.createElement("div",{className:_i("line"),key:"middeLine4",style:Li(g,b,s)})],Rs(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return ve(n,_i("direction"))&&ve(n,_i("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,o=to(r.target,n);if(!o||!i)return!1;var s=t.state,a=s.transformOrigin,l=s.is3d,c=s.targetTransform,u=s.targetMatrix,h=s.width,f=s.height,d=s.left,p=s.top;return n.datas={},n.targetTransform=c,n.warpTargetMatrix=l?u:yn(u,3,4),n.targetInverseMatrix=mn(On(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=d,n.top=p,n.poses=[[0,0],[h,0],[0,f],[h,f]].map((function(t){return kn(t,a)})),n.nextPoses=n.poses.map((function(t){var e=t[0],r=t[1];return Qn(n.warpTargetMatrix,[e,r,0,1],4)})),n.startValue=Dn(4),n.prevMatrix=Dn(4),n.absolutePoses=no(s),n.posIndexes=fi(o),si(t,e),mi(e,"matrix3d"),s.snapRenderInfo={request:e.isRequest,direction:o},!1!==co(t,"onWarpStart",so(t,e,Ar({set:function(t){n.startValue=t}},gi(e))))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,o=e.distY,s=n.targetInverseMatrix,a=n.prevMatrix,l=n.isWarp,c=n.startValue,u=n.poses,h=n.posIndexes,f=n.absolutePoses;if(!l)return!1;if(ai(e,"matrix3d"),Xo(t,"warpable")){var d=h.map((function(t){return f[t]}));d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=ds(t,r,{horizontal:d.map((function(t){return t[1]+o})),vertical:d.map((function(t){return t[0]+i}))}),g=p.horizontal,m=p.vertical;o-=g.offset,i-=m.offset}var O=hi({datas:n,distX:i,distY:o},!0),v=n.nextPoses.slice();if(h.forEach((function(t){v[t]=Sn(v[t],O)})),!Wr.every((function(t){return e=t.map((function(t){return u[t]})),n=t.map((function(t){return v[t]})),r=Ls(e[0],e[1],e[2]),i=Ls(n[0],n[1],n[2]),!(r>=(o=Math.PI)&&i<=o||r<=o&&i>=o);var e,n,r,i,o})))return!1;var b=Xn(u[0],u[2],u[1],u[3],v[0],v[2],v[1],v[3]);if(!b.length)return!1;var y=ci(n,xn(s,b,4),!0),w=xn(On(a,4),y,4);n.prevMatrix=y;var x=xn(c,y,4),S=li(n,"matrix3d(".concat(x.join(", "),")"),"matrix3d(".concat(y.join(", "),")"));return vi(e,S),co(t,"onWarp",so(t,e,{delta:w,matrix:x,dist:y,multiply:xn,transform:S})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,co(t,"onWarpEnd",ao(t,e,{})),r)}},Fs=_i("area-pieces"),Ys=_i("area-piece"),Hs=_i("avoid"),Js=_i("view-dragging");function Ks(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;ye(e,Hs),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function ta(t){return t.createElement("div",{key:"area_pieces",className:Fs},t.createElement("div",{className:Ys}),t.createElement("div",{className:Ys}),t.createElement("div",{className:Ys}),t.createElement("div",{className:Ys}))}var ea={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,o=n.groupable,s=n.passDragArea,a=t.getState(),l=a.width,c=a.height,u=a.renderPoses,h=s?_i("area","pass"):_i("area");if(o)return[e.createElement("div",{key:"area",ref:kt(t,"areaElement"),className:h}),ta(e)];if(!r||!i)return[];var f=Xn([0,0],[l,0],[0,c],[l,c],u[0],u[1],u[2],u[3]),d=f.length?qi(f,!0):"none";return[e.createElement("div",{key:"area",ref:kt(t,"areaElement"),className:h,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(c,"px"),transformOrigin:"0 0",transform:d}}),ta(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;n.isDragArea=!1;var o=t.areaElement,s=t.state,a=s.moveableClientRect,l=s.renderPoses,c=s.rootMatrix,u=s.is3d,h=a.left,f=a.top,d=Ii(l),p=d.left,g=d.top,m=d.width,O=d.height,v=Oo(c,[r-h,i-f],u?4:3),b=v[0],y=v[1],w=[{left:p,top:g,width:m,height:(y-=g)-10},{left:p,top:g,width:(b-=p)-10,height:O},{left:p,top:g+y+10,width:m,height:O-y-10},{left:p+b+10,top:g,width:m-b-10,height:O}],x=[].slice.call(o.nextElementSibling.children);w.forEach((function(t,e){x[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")})),be(o,Hs),s.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,Ks(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||Ks(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Ks(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&oe((function(){e.disableNativeEvent=!1}))}},na=jr("origin",{render:function(t,e){var n=t.props.zoom,r=t.getState(),i=r.beforeOrigin,o=r.rotation;return[e.createElement("div",{className:_i("control","origin"),style:Gi(o,n,i),key:"beforeOrigin"})]}});function ra(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var ia={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var n=t.props.scrollContainer,r=void 0===n?t.getContainer():n,i=new dr,o=Co(r,!0);e.datas.dragScroll=i;var s=e.isControl?"controlGesto":"targetGesto",a=e.targets;i.on("scroll",(function(n){var r=n.container,i=n.direction,o=so(t,e,{scrollContainer:r,direction:i}),s=a?"onScrollGroup":"onScroll";a&&(o.targets=a),co(t,s,o)})).on("move",(function(n){var r=n.offsetX,i=n.offsetY;t[s].scrollBy(r,i,e.inputEvent,!1)})),i.dragStart(e,{container:o})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,o=void 0===i?t.getContainer():i,s=r.scrollThreshold,a=void 0===s?0:s,l=r.getScrollPosition,c=void 0===l?ra:l;return n.drag(e,{container:o,threshold:a,getScrollPosition:function(t){return c({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Ar(Ar({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Ar(Ar({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Ar(Ar({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Ar(Ar({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Ar(Ar({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,Ar(Ar({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Ar(Ar({},e),{targets:t.props.targets}))}},oa={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object},events:{}},sa=jr("padding",{render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},i=r.left,o=void 0===i?0:i,s=r.top,a=void 0===s?0:s,l=r.right,c=void 0===l?0:l,u=r.bottom,h=void 0===u?0:u,f=t.getState(),d=f.renderPoses,p=[f.pos1,f.pos2,f.pos3,f.pos4],g=[];return o>0&&g.push([0,2]),a>0&&g.push([0,1]),c>0&&g.push([1,3]),h>0&&g.push([2,3]),g.map((function(t,n){var r=t[0],i=t[1],o=Xn([0,0],[100,0],[0,100],[100,100],p[r],p[i],d[r],d[i]);if(o.length)return e.createElement("div",{key:"padding".concat(n),className:_i("padding"),style:{transform:qi(o,!0)}})}))}}),aa=["nw","ne","se","sw"];function la(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var ca=[1,2,5,6],ua=[0,3,4,7],ha=[1,-1,-1,1],fa=[1,1,-1,-1];function da(t,e,n,r,i,o,s,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=n),void 0===a&&(a=r);var l=[],c=!1,u=t.filter((function(t){return!t.virtual})),h=u.map((function(t){var u=t.horizontal,h=t.vertical,f=t.pos;if(h&&!c&&(c=!0,l.push("/")),c){var d=Math.max(0,1===h?f[1]-o:a-f[1]);return l.push(yo(d,r,e)),d}return d=Math.max(0,1===u?f[0]-i:s-f[0]),l.push(yo(d,n,e)),d}));return{radiusPoses:u,styles:l,raws:h}}function pa(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),o.vertical&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function ga(t,e,n,r,i,o,s){var a,l,c,u;void 0===o&&(o=[0,0]),void 0===s&&(s=!1);var h=t.indexOf("/"),f=(h>-1?t.slice(0,h):t).length,d=t.slice(0,f),p=t.slice(f+1),g=d.length,m=p.length,O=m>0,v=d[0],b=void 0===v?"0px":v,y=d[1],w=void 0===y?b:y,x=d[2],S=void 0===x?b:x,k=d[3],C=void 0===k?w:k,Q=p[0],_=void 0===Q?b:Q,P=p[1],E=void 0===P?O?_:w:P,T=p[2],$=void 0===T?O?_:S:T,R=p[3],M=void 0===R?O?E:C:R,A=[b,w,S,C].map((function(t){return le(t,e)})),D=[_,E,$,M].map((function(t){return le(t,n)})),j=A.slice(),q=D.slice();a=la([j[0],j[1]],e),j[0]=a[0],j[1]=a[1],l=la([j[3],j[2]],e),j[3]=l[0],j[2]=l[1],c=la([q[0],q[3]],n),q[0]=c[0],q[3]=c[1],u=la([q[1],q[2]],n),q[1]=u[0],q[2]=u[1];var X=s?j:j.slice(0,Math.max(o[0],g)),V=s?q:q.slice(0,Math.max(o[1],m));return Dr(Dr([],X.map((function(t,e){var o=aa[e];return{virtual:e>=g,horizontal:ha[e],vertical:0,pos:[r+t,i+(-1===fa[e]?n:0)],sub:!0,raw:A[e],direction:o}})),!0),V.map((function(t,n){var o=aa[n];return{virtual:n>=m,horizontal:0,vertical:fa[n],pos:[r+(-1===ha[n]?e:0),i+t],sub:!0,raw:D[n],direction:o}})),!0)}var ma=[[0,-1,"n"],[1,0,"e"]],Oa=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function va(t,e,n){var r=t.props.clipRelative,i=t.state,o=i.width,s=i.height,a=e,l=a.type,c=a.poses,u="rect"===l,h="circle"===l;if("polygon"===l)return n.map((function(t){return"".concat(yo(t[0],o,r)," ").concat(yo(t[1],s,r))}));if(u||"inset"===l){var f=n[1][1],d=n[3][0],p=n[7][0],g=n[5][1];if(u)return[f,d,g,p].map((function(t){return"".concat(t,"px")}));var m=[f,o-d,s-g,p].map((function(t,e){return yo(t,e%2?o:s,r)}));if(n.length>8){var O=kn(n[4],n[0]),v=O[0],b=O[1];m.push.apply(m,Dr(["round"],da(c.slice(8).map((function(t,e){return Ar(Ar({},t),{pos:n[e]})})),r,v,b,p,f,d,g).styles,!1))}return m}if(h||"ellipse"===l){var y=n[0],w=yo(Math.abs(n[1][1]-y[1]),h?Math.sqrt((o*o+s*s)/2):s,r);return(m=h?[w]:[yo(Math.abs(n[2][0]-y[0]),o,r),w]).push("at",yo(y[0],o,r),yo(y[1],s,r)),m}}function ba(t,e,n,r){var i=[r,(r+e)/2,e],o=[t,(t+n)/2,n];return Oa.map((function(t){var e=t[0],n=t[1],r=t[2],s=i[e+1],a=o[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(e),direction:r,pos:[s,a]}}))}function ya(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach((function(t){var r=t.pos;e[0]=Math.min(e[0],r[0]),e[1]=Math.max(e[1],r[0]),n[0]=Math.min(n[0],r[1]),n[1]=Math.max(n[1],r[1])})),[Math.abs(e[1]-e[0]),Math.abs(n[1]-n[0])]}function wa(t,e,n,r,i){var o,s,a,l,c,u,h,f=i;if(!f){var d=uo(t),p=d.clipPath;f="none"!==p?p:d.clip}if(f&&"none"!==f&&"auto"!==f||(f=r)){var g=Jt(f),m=g.prefix,O=void 0===m?f:m,v=g.value,b=void 0===v?"":v,y="circle"===O,w=" ";if("polygon"===O){w=",";var x=(T=Ht(b||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var r=t.split(" "),i=r[0],o=r[1];return{vertical:1,horizontal:1,pos:[le(i,e),le(o,n)]}}));return{type:O,clipText:f,poses:x,splitter:w}}if(y||"ellipse"===O){var S,k,C,Q="",_="",P=0,E=0,T=Yt(b);if(y)S=void 0===(o=T[0])?"50%":o,Q=void 0===(s=T[2])?"50%":s,_=void 0===(a=T[3])?"50%":a,P=le(S,Math.sqrt((e*e+n*n)/2)),E=P;else k=void 0===(l=T[0])?"50%":l,C=void 0===(c=T[1])?"50%":c,Q=void 0===(u=T[3])?"50%":u,_=void 0===(h=T[4])?"50%":h,P=le(k,e),E=le(C,n);var $=[le(Q,e),le(_,n)];return x=Dr([{vertical:1,horizontal:1,pos:$,direction:"nesw"}],ma.slice(0,y?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[$[0]+t[0]*P,$[1]+t[1]*E]}})),!0),{type:O,clipText:f,radiusX:P,radiusY:E,left:$[0]-P,top:$[1]-E,poses:x,splitter:w}}if("inset"===O){var R=(T=Yt(b||"0 0 0 0")).indexOf("round"),M=(R>-1?T.slice(0,R):T).length,A=T.slice(M+1),D=T.slice(0,M),j=D[0],q=D[1],X=void 0===q?j:q,V=D[2],U=void 0===V?j:V,Z=D[3],I=void 0===Z?X:Z,N=[j,U].map((function(t){return le(t,n)})),B=N[0],z=N[1],W=[I,X].map((function(t){return le(t,e)})),L=W[0],G=W[1],F=e-G,Y=n-z,H=ga(A,F-L,Y-B,L,B);return{type:"inset",clipText:f,poses:x=Dr(Dr([],ba(B,F,Y,L),!0),H,!0),top:B,left:L,right:F,bottom:Y,radius:A,splitter:w}}if("rect"===O){w=",";var J=(T=Ht(b||"0px, ".concat(e,"px, ").concat(n,"px, 0px"))).map((function(t){return Kt(t).value}));return{type:"rect",clipText:f,poses:x=ba(B=J[0],G=J[1],z=J[2],L=J[3]),top:B,right:G,bottom:z,left:L,values:T,splitter:w}}}}var xa={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,o=n.clipArea,s=n.zoom,a=t.getState(),l=a.target,c=a.width,u=a.height,h=a.allMatrix,f=a.is3d,d=a.left,p=a.top,g=a.pos1,m=a.pos2,O=a.pos3,v=a.pos4,b=a.clipPathState,y=a.snapBoundInfos,w=a.rotation;if(!l)return[];var x=wa(l,c,u,i||"inset",b||r);if(!x)return[];var S=f?4:3,k=x.type,C=x.poses.map((function(t){var e=Ui(h,t.pos,S);return[e[0]-d,e[1]-p]})),Q=[],_=[],P="rect"===k,E="inset"===k,T="polygon"===k;if(P||E||T){var $=E?C.slice(0,8):C;_=$.map((function(t,n){var r=0===n?$[$.length-1]:$[n-1],i=de(r,t),o=Wi(r,t);return e.createElement("div",{key:"clipLine".concat(n),className:_i("line","clip-line","snap-control"),"data-clip-index":n,style:{width:"".concat(o,"px"),transform:"translate(".concat(r[0],"px, ").concat(r[1],"px) rotate(").concat(i,"rad) scaleY(").concat(s,")")}})}))}if(Q=C.map((function(t,n){return e.createElement("div",{key:"clipControl".concat(n),className:_i("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(w,"rad) scale(").concat(s,")")}})})),E&&Q.push.apply(Q,C.slice(8).map((function(t,n){return e.createElement("div",{key:"clipRadiusControl".concat(n),className:_i("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(w,"rad) scale(").concat(s,")")}})}))),"circle"===k||"ellipse"===k){var R=x.left,M=x.top,A=x.radiusX,D=x.radiusY,j=kn(Ui(h,[R,M],S),Ui(h,[0,0],S)),q=j[0],X=j[1],V="none";if(!o){for(var U=Math.max(10,A/5,D/5),Z=[],I=0;I<=U;++I){var N=2*Math.PI/U*I;Z.push([A+(A-s)*Math.cos(N),D+(D-s)*Math.sin(N)])}Z.push([A,-2]),Z.push([-2,-2]),Z.push([-2,2*D+2]),Z.push([2*A+2,2*D+2]),Z.push([2*A+2,-2]),Z.push([A,-2]),V="polygon(".concat(Z.map((function(t){return"".concat(t[0],"px ").concat(t[1],"px")})).join(", "),")")}Q.push(e.createElement("div",{key:"clipEllipse",className:_i("clip-ellipse","snap-control"),style:{width:"".concat(2*A,"px"),height:"".concat(2*D,"px"),clipPath:V,transform:"translate(".concat(-d+q,"px, ").concat(-p+X,"px) ").concat(qi(h))}}))}if(o){var B=Ii(Dr([g,m,O,v],C,!0)),z=B.width,W=B.height,L=B.left,G=B.top;(T||P||E)&&(Z=E?C.slice(0,8):C,Q.push(e.createElement("div",{key:"clipArea",className:_i("clip-area","snap-control"),style:{width:"".concat(z,"px"),height:"".concat(W,"px"),transform:"translate(".concat(L,"px, ").concat(G,"px)"),clipPath:"polygon(".concat(Z.map((function(t){return"".concat(t[0]-L,"px ").concat(t[1]-G,"px")})).join(", "),")")}})))}return y&&["vertical","horizontal"].forEach((function(t){var n=y[t],r="horizontal"===t;n.isSnap&&_.push.apply(_,n.snap.posInfos.map((function(n,i){var o=n.pos,a=kn(Ui(h,r?[0,o]:[o,0],S),[d,p]),l=kn(Ui(h,r?[c,o]:[o,u],S),[d,p]);return Es(e,"",a,l,s,"clip".concat(t,"snap").concat(i),"guideline")}))),n.isBound&&_.push.apply(_,n.bounds.map((function(n,i){var o=n.pos,a=kn(Ui(h,r?[0,o]:[o,0],S),[d,p]),l=kn(Ui(h,r?[c,o]:[o,u],S),[d,p]);return Es(e,"",a,l,s,"clip".concat(t,"bounds").concat(i),"guideline","bounds","bold")})))})),Dr(Dr([],Q,!0),_,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,Ar(Ar({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,s=n.target,a=n.width,l=n.height,c=e.inputEvent?e.inputEvent.target:null,u=c&&c.getAttribute("class")||"",h=e.datas,f=wa(s,a,l,i||"inset",o);if(!f)return!1;var d=f.clipText;return!1===co(t,"onClipStart",so(t,e,{clipType:f.type,clipStyle:d,poses:f.poses.map((function(t){return t.pos}))}))?(h.isClipStart=!1,!1):(h.isControl=u&&u.indexOf("clip-control")>-1,h.isLine=u.indexOf("clip-line")>-1,h.isArea=u.indexOf("clip-area")>-1||u.indexOf("clip-ellipse")>-1,h.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,h.clipPath=f,h.isClipStart=!0,n.clipPathState=d,si(t,e),!0)},dragControl:function(t,e){var n,r=e.datas,i=e.originalDatas,o=e.isDragTarget;if(!r.isClipStart)return!1;var s=r,a=s.isControl,l=s.isLine,c=s.isArea,u=s.clipIndex,h=s.clipPath;if(!h)return!1;var f=Fi(t.props,"clippable"),d=f.keepRatio,p=0,g=0,m=i.draggable,O=hi(e);o&&m?(n=m.prevBeforeDist,p=n[0],g=n[1]):(p=O[0],g=O[1]);var v=[p,g],b=t.state,y=b.width,w=b.height,x=!c&&!a&&!l,S=h.type,k=h.poses,C=h.splitter,Q=k.map((function(t){return t.pos}));x&&(p=-p,g=-g);var _=!a||"nesw"===k[u].direction,P="inset"===S||"rect"===S,E=k.map((function(){return[0,0]}));if(a&&!_){var T=k[u],$=T.horizontal,R=T.vertical,M=[p*Math.abs($),g*Math.abs(R)];E=function(t,e,n,r,i){var o=t[e],s=o.direction,a=o.sub,l=t.map((function(){return[0,0]})),c=s?s.split(""):[];if(r&&e<8){var u=c.filter((function(t){return"w"===t||"e"===t})),h=c.filter((function(t){return"n"===t||"s"===t})),f=u[0],d=h[0];l[e]=n;var p=ya(t),g=p[0],m=p[1],O=g&&m?g/m:0;if(O&&i){var v=t[(e+4)%8].pos,b=[0,0];s.indexOf("w")>-1?b[0]=-1:s.indexOf("e")>-1&&(b[0]=1),s.indexOf("n")>-1?b[1]=-1:s.indexOf("s")>-1&&(b[1]=1);var y=Po([g,m],n,O,b,!0),w=g+y[0],x=m+y[1],S=v[1],k=v[1],C=v[0],Q=v[0];-1===b[0]?C=Q-w:1===b[0]?Q=C+w:(C-=w/2,Q+=w/2),-1===b[1]?S=k-x:k=1===b[1]?S+x:(S=k-x/2)+x;var _=ba(S,Q,k,C);t.forEach((function(t,e){l[e][0]=_[e].pos[0]-t.pos[0],l[e][1]=_[e].pos[1]-t.pos[1]}))}else t.forEach((function(t,e){var r=t.direction;r&&(r.indexOf(f)>-1&&(l[e][0]=n[0]),r.indexOf(d)>-1&&(l[e][1]=n[1]))})),f&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),d&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else s&&!a?c.forEach((function(e){var r="n"===e||"s"===e;t.forEach((function(t,i){var o=t.direction,s=t.horizontal,a=t.vertical;o&&-1!==o.indexOf(e)&&(l[i]=[r||!s?0:n[0],r&&a?n[1]:0])}))})):l[e]=n;return l}(k,u,M,P,d)}else _&&(E=Q.map((function(){return[p,g]})));var A=Q.map((function(t,e){return Sn(t,E[e])})),D=Dr([],A,!0);b.snapBoundInfos=null;var j="circle"===h.type,q="ellipse"===h.type;if(j||q){var X=Ii(A),V=Math.abs(X.bottom-X.top),U=Math.abs(q?X.right-X.left:V),Z=A[0][1]+V,I=A[0][0]-U,N=A[0][0]+U;j&&(D.push([N,X.bottom]),E.push([1,0])),D.push([X.left,Z]),E.push([0,1]),D.push([I,X.bottom]),E.push([1,0])}var B=vs((f.clipHorizontalGuidelines||[]).map((function(t){return le("".concat(t),w)})),(f.clipVerticalGuidelines||[]).map((function(t){return le("".concat(t),y)})),y,w),z=[],W=[];if(j||q)z=[D[4][0],D[2][0]],W=[D[1][1],D[3][1]];else if(P){var L=[D[0],D[2],D[4],D[6]],G=[E[0],E[2],E[4],E[6]];z=L.filter((function(t,e){return G[e][0]})).map((function(t){return t[0]})),W=L.filter((function(t,e){return G[e][1]})).map((function(t){return t[1]}))}else z=D.filter((function(t,e){return E[e][0]})).map((function(t){return t[0]})),W=D.filter((function(t,e){return E[e][1]})).map((function(t){return t[1]}));var F=[0,0],Y=ps(B,f.clipTargetBounds&&{left:0,top:0,right:y,bottom:w},z,W,5),H=Y.horizontal,J=Y.vertical,K=H.offset,tt=J.offset;if(H.isBound&&(F[1]+=K),J.isBound&&(F[0]+=tt),(q||j)&&0===E[0][0]&&0===E[0][1]){var et=(X=Ii(A)).bottom-X.top,nt=q?X.right-X.left:et;nt-=J.isBound?Math.abs(tt):0===J.snapIndex?-tt:tt,et-=H.isBound?Math.abs(K):0===H.snapIndex?-K:K,j&&(nt=et=Wo(J,H)>0?et:nt);var rt=D[0];D[1][1]=rt[1]-et,D[2][0]=rt[0]+nt,D[3][1]=rt[1]+et,D[4][0]=rt[0]-nt}else if(P&&d&&a){var it=ya(k),ot=it[0],st=it[1],at=ot&&st?ot/st:0,lt=k[u].direction||"",ct=D[1][1];Z=D[5][1],I=D[7][0],N=D[3][0],K<=tt?K=tt/at:tt=K*at,lt.indexOf("w")>-1?I-=tt:lt.indexOf("e")>-1?N-=tt:(I+=tt/2,N-=tt/2),lt.indexOf("n")>-1?ct-=K:lt.indexOf("s")>-1?Z-=K:(ct+=K/2,Z-=K/2);var ut=ba(ct,N,Z,I);D.forEach((function(t,e){var n;n=ut[e].pos,t[0]=n[0],t[1]=n[1]}))}else D.forEach((function(t,e){var n=E[e];n[0]&&(t[0]-=tt),n[1]&&(t[1]-=K)}));var ht=va(t,h,A),ft="".concat(S,"(").concat(ht.join(C),")");if(b.clipPathState=ft,j||q?(z=[D[4][0],D[2][0]],W=[D[1][1],D[3][1]]):P?(z=(L=[D[0],D[2],D[4],D[6]]).map((function(t){return t[0]})),W=L.map((function(t){return t[1]}))):(z=D.map((function(t){return t[0]})),W=D.map((function(t){return t[1]}))),b.snapBoundInfos=ps(B,f.clipTargetBounds&&{left:0,top:0,right:y,bottom:w},z,W,1),m){var dt=b.is3d,pt=b.allMatrix,gt=dt?4:3,mt=F;o&&(mt=[v[0]+F[0]-O[0],v[1]+F[1]-O[1]]),m.deltaOffset=xn(pt,[mt[0],mt[1],0,0],gt)}return co(t,"onClip",so(t,e,{clipEventType:"changed",clipType:S,poses:A,clipStyle:ft,clipStyles:ht,distX:p,distY:g})),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,o=r.isLine,s=r.isClipStart,a=r.isControl;return!!s&&(co(t,"onClipEnd",ao(t,e,{})),i&&(a?function(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,o=r,s=o.type,a=o.poses,l=o.splitter,c=a.map((function(t){return t.pos})),u=c.length;if("polygon"===s)a.splice(i,1),c.splice(i,1);else{if("inset"!==s)return;if(i<8)return;if(function(t,e,n,r,i){void 0===i&&(i=e.length);var o=pa(t.slice(8)),s=o.horizontalRange,a=o.verticalRange,l=n-8,c=0;if(0===l)c=i;else if(l>0&&l<s[1])c=s[1]-l;else{if(!(l>=a[0]))return;c=a[0]+a[1]-l}t.splice(n,c),e.splice(n,c)}(a,c,i,0,u),u===a.length)return}var h=va(t,r,c);co(t,"onClip",so(t,e,{clipEventType:"removed",clipType:s,poses:c,clipStyles:h,clipStyle:"".concat(s,"(").concat(h.join(l),")"),distX:0,distY:0}))}(t,e):o&&function(t,e){var n=oi(t,e),r=n[0],i=n[1],o=e.datas,s=o.clipPath,a=o.clipIndex,l=s,c=l.type,u=l.poses,h=l.splitter,f=u.map((function(t){return t.pos}));if("polygon"===c)f.splice(a,0,[r,i]);else{if("inset"!==c)return;var d=ca.indexOf(a),p=ua.indexOf(a),g=u.length;if(function(t,e,n,r,i,o,s,a,l,c,u){void 0===c&&(c=0),void 0===u&&(u=0);var h=pa(t.slice(8)),f=h.horizontalRange,d=h.verticalRange;if(r>-1)for(var p=1===ha[r]?o-c:a-o,g=f[1];g<=r;++g){var m=1===fa[g]?u:l,O=0;if(r===g?O=o:0===g?O=c+p:-1===ha[g]&&(O=a-(e[8][0]-c)),t.splice(8+g,0,{horizontal:ha[g],vertical:0,pos:[O,m]}),e.splice(8+g,0,[O,m]),0===g)break}else if(i>-1){var v=1===fa[i]?s-u:l-s;if(0===f[1]&&0===d[1]){var b=[c+v,u];t.push({horizontal:ha[0],vertical:0,pos:b}),e.push(b)}var y=d[0];for(g=d[1];g<=i&&(O=1===ha[g]?c:a,m=0,i===g?m=s:0===g?m=u+v:1===fa[g]?m=e[8+y][1]:-1===fa[g]&&(m=l-(e[8+y][1]-u)),t.push({horizontal:0,vertical:fa[g],pos:[O,m]}),e.push([O,m]),0!==g);++g);}}(u,f,0,d,p,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),g===u.length)return}var m=va(t,s,f);co(t,"onClip",so(t,e,{clipEventType:"added",clipType:c,poses:f,clipStyles:m,clipStyle:"".concat(c,"(").concat(m.join(h),")"),distX:0,distY:0}))}(t,e)),i||n)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Sa={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:ve(e.inputEvent.target,_i("origin"))},dragControlStart:function(t,e){var n=e.datas;si(t,e);var r=so(t,e,{dragStart:Ms.dragStart(t,(new ii).dragStart([0,0],e))}),i=co(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,!1===i?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var o=hi(e),s=o[0],a=o[1],l=t.state,c=l.width,u=l.height,h=l.offsetMatrix,f=l.targetMatrix,d=l.is3d,p=t.props.originRelative,g=void 0===p||p,m=d?4:3,O=[s,a];if(i){var v=e.distOrigin;(v[0]||v[1])&&(O=v)}var b=Sn(n.startOrigin,O),y=Sn(n.startTargetOrigin,O),w=kn(O,n.prevOrigin),x=pi(h,f,b,m),S=t.getRect(),k=Ii(Zi(x,c,u,m)),C=[S.left-k.left,S.top-k.top];n.prevOrigin=O;var Q=so(t,e,{width:c,height:u,origin:b,dist:O,delta:w,transformOrigin:[yo(y[0],c,g),yo(y[1],u,g)].join(" "),drag:Ms.drag(t,ri(e,t.state,C,!!r,!1))});return co(t,"onDragOrigin",Q),Q},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(co(t,"onDragOriginEnd",ao(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(s[0]+=t.deltaOrigin[0],s[1]+=t.deltaOrigin[1]):"origin"in t?(s[0]=t.origin[0]-o[0],s[1]=t.origin[1]-o[1]):("x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function ka(t,e,n,r,i,o){var s;if(void 0===r&&(r=[0,0]),i)s=i;else{var a=uo(t);s=a&&a.borderRadius||""}return ga(!s||!i&&"0px"===s?[]:Yt(s),e,n,0,0,r,o)}function Ca(t,e,n,r,i){var o=t.state,s=o.width,a=o.height,l=da(i,t.props.roundRelative,s,a),c=l.raws,u=l.styles,h=function(t,e){void 0===e&&(e=t.map((function(t){return t.raw})));var n=t.map((function(t,n){return t.horizontal?e[n]:null})).filter((function(t){return null!=t})),r=t.map((function(t,n){return t.vertical?e[n]:null})).filter((function(t){return null!=t}));return{horizontals:n,verticals:r}}(l.radiusPoses,c),f=h.horizontals,d=h.verticals,p=u.join(" ");o.borderRadiusState=p,co(t,"onRound",so(t,e,Ar({horizontals:f,verticals:d,borderRadius:p,width:s,height:a,delta:r,dist:n},io({borderRadius:p},e))))}var Qa={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n    z-index: 3;\n}",".control.border-radius.vertical {\n    background: #d6d;\n    z-index: 2;\n}",".control.border-radius.virtual {\n    opacity: 0.5;\n    z-index: 1;\n}",":host.round-line-clickable .line.direction {\n    cursor: pointer;\n}"],className:function(t){var e=t.props.roundClickable;return!0===e||"line"===e?_i("round-line-clickable"):""},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,o=n.height,s=n.allMatrix,a=n.is3d,l=n.left,c=n.top,u=n.borderRadiusState,h=t.props,f=h.minRoundControls,d=void 0===f?[0,0]:f,p=h.maxRoundControls,g=void 0===p?[4,4]:p,m=h.zoom,O=h.roundPadding,v=void 0===O?0:O,b=h.isDisplayShadowRoundControls;if(!r)return null;var y=a?4:3,w=ka(r,i,o,d,u,!0);if(!w)return null;var x=0,S=0;return w.map((function(t,n){var r=t.horizontal,i=t.vertical,o=t.direction||"",a=Dr([],t.pos,!0);S+=Math.abs(r),x+=Math.abs(i),r&&o.indexOf("n")>-1&&(a[1]-=v),i&&o.indexOf("w")>-1&&(a[0]-=v),r&&o.indexOf("s")>-1&&(a[1]+=v),i&&o.indexOf("e")>-1&&(a[0]+=v);var u=kn(Ui(s,a,y),[l,c]),h=t.vertical?x<=g[1]&&(b||!t.virtual):S<=g[0]&&(b||!t.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(n),className:_i("control","border-radius",t.vertical?"vertical":"",t.virtual?"virtual":""),"data-radius-index":n,style:{display:h?"block":"none",transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) scale(").concat(m,")")}})}))},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,o=i.getAttribute("class")||"",s=o.indexOf("border-radius")>-1,a=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,l=s?parseInt(i.getAttribute("data-radius-index"),10):-1,c=-1;if(a){var u=i.getAttribute("data-line-key")||"";u&&(c=parseInt(u.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!s&&!a)return!1;if(!1===co(t,"onRoundStart",so(t,e,{})))return!1;r.lineIndex=c,r.controlIndex=l,r.isControl=s,r.isLine=a,si(t,e);var h=t.props,f=h.roundRelative,d=h.minRoundControls,p=void 0===d?[0,0]:d,g=t.state,m=g.target,O=g.width,v=g.height;r.isRound=!0,r.prevDist=[0,0];var b=ka(m,O,v,p,"",!0)||[];return r.controlPoses=b,g.borderRadiusState=da(b,f,O,v).styles.join(" "),!0},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,o=hi(e),s=o[0],a=o[1],l=[s,a],c=kn(l,n.prevDist),u=t.props.maxRoundControls,h=void 0===u?[4,4]:u,f=t.state,d=f.width,p=f.height,g=r[i],m=g.vertical,O=g.horizontal,v=r.map((function(t){var e=t.horizontal,n=t.vertical,r=[e*O*l[0],n*m*l[1]];if(e){if(1===h[0])return r;if(h[0]<4&&e!==O)return r}else{if(0===h[1])return r[1]=n*O*l[0]/d*p,r;if(m){if(1===h[1])return r;if(h[1]<4&&n!==m)return r}}return[0,0]}));v[i]=l;var b=r.map((function(t,e){return Ar(Ar({},t),{pos:Sn(t.pos,v[e])})}));return i<4?b.slice(0,i+1).forEach((function(t){t.virtual=!1})):b.slice(4,i+1).forEach((function(t){t.virtual=!1})),n.prevDist=[s,a],Ca(t,e,l,c,b),!0},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var o=r.isControl,s=r.controlIndex,a=r.isLine,l=r.lineIndex,c=r.controlPoses,u=c.filter((function(t){return t.virtual})).length,h=t.props.roundClickable,f=void 0===h||h;if(i&&f){if(!o||!0!==f&&"control"!==f){if(a&&(!0===f||"line"===f)){var d=oi(t,e);!function(t,e,n,r){var i=t.filter((function(t){var e=t.virtual;return t.horizontal&&!e})).length,o=t.filter((function(t){var e=t.virtual;return t.vertical&&!e})).length,s=-1;if(0===e&&(0===i?s=0:1===i&&(s=1)),2===e&&(i<=2?s=2:i<=3&&(s=3)),3===e&&(0===o?s=4:o<4&&(s=7)),1===e&&(o<=1?s=5:o<=2&&(s=6)),-1!==s&&t[s].virtual){var a=t[s];!function(t,e){e<4?t.slice(0,e+1).forEach((function(t){t.virtual=!1})):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach((function(t){t.virtual=!1})))}(t,s),s<4?a.pos[0]=n:a.pos[1]=r}}(c,l,d[0],d[1])}}else!function(t,e){e<4?t.slice(e,4).forEach((function(t){t.virtual=!0})):t.slice(e).forEach((function(t){t.virtual=!0}))}(c,s);u!==c.filter((function(t){return t.virtual})).length&&Ca(t,e,[0,0],[0,0],c)}return co(t,"onRoundEnd",ao(t,e,{})),n.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}},_a={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.target,o=n.targetMatrix,s=null==i?void 0:i.style.transform,a=r?"matrix3d(".concat(o.join(","),")"):"matrix(".concat(Cn(o,!0),")"),l=s&&"none"!==s?s:a;e.datas.startTransforms=function(t,e){var n=Dn(e?4:3);return t==="matrix".concat(e?"3d":"","(").concat(n.join(","),")")||"matrix(1,0,0,1,0,0)"===t}(l,r)?[]:Yt(l)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return so(t,e,{setTransform:function(t){e.datas.startTransforms=Nt(t)?t:Yt(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return so(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),co(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetStyle(e),co(t,"onBeforeRender",so(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){co(t,"onBeforeRenderEnd",so(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=$o(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.setTransform(r,t),n.resetStyle(t),n.fillDragStartParams(r,t)}));co(t,"onBeforeRenderGroupStart",so(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=$o(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.resetStyle(t),n.fillDragParams(r,t)}));co(t,"onBeforeRenderGroup",so(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),co(t,"onBeforeRenderGroupEnd",so(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Pa={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){co(t,"onRenderStart",so(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){co(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){co(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){co(t,"onRenderGroupStart",so(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=$o(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.fillDragParams(r,t)}));co(t,"onRenderGroup",so(t,e,Ar(Ar({isPinch:!!e.isPinch,targets:t.props.targets,transform:wi(e)},io(xi(e))),{events:o})))},dragGroupEnd:function(t,e){var n=this,r=$o(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.fillDragEndParams(r,t)}));co(t,"onRenderGroupEnd",so(t,e,Ar({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o,transform:wi(e)},io(xi(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return so(t,e,Ar({isPinch:!!e.isPinch,transform:wi(e)},io(xi(e))))},fillDragEndParams:function(t,e){return so(t,e,Ar({isPinch:!!e.isPinch,isDrag:e.isDrag,transform:wi(e)},io(xi(e))))}};function Ea(t,e,n,r,i,o,s){var a="Start"===i,l=t.state.target,c=o.isRequest;if(!l||a&&r.indexOf("Control")>-1&&!c&&t.areaElement===o.inputEvent.target)return!1;var u="".concat(n).concat(r).concat(i),h="".concat(n).concat(r,"Condition"),f="End"===i,d="After"===i,p=a&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());p&&t.updateRect(i,!0,!1),""!==i||c||vo(t.state,o);var g=Dr([],t[e],!0);if(c){var m=o.requestAble;g.some((function(t){return t.name===m}))||g.push.apply(g,t.props.ables.filter((function(t){return t.name===m})))}if(!g.length||g.every((function(t){return t.dragRelation})))return!1;var O=Dr(Dr([_a],g,!0),[Pa],!1).filter((function(t){return t[u]})),v=o.datas;p&&O.forEach((function(e){e.unset&&e.unset(t)}));var b,y=o.inputEvent;f&&y&&(b=document.elementFromPoint(o.clientX,o.clientY)||y.target);var w=0,x=!1,S=function(){var t;x=!0,null===(t=o.stop)||void 0===t||t.call(o)},k=O.filter((function(e){var n=e.name,r=v[n]||(v[n]={});if(a&&(r.isEventStart=!e[h]||e[h](t,o)),r.isEventStart){var i=e[u](t,Ar(Ar({},o),{stop:S,resultCount:w,datas:r,originalDatas:v,inputTarget:b}));return t._emitter.off(),a&&!1===i&&(r.isEventStart=!1),w+=i?1:0,i}return!1})).length,C=!1;return a&&(x||O.length&&!k)&&(C=x||O.filter((function(t){var e=t.name;return!!v[e].isEventStart&&"strong"!==t.dragRelation})).length),(f||C)&&(t.state.gestos={},t.moveables&&t.moveables.forEach((function(t){t.state.gestos={}}))),p&&C&&O.forEach((function(e){e.unset&&e.unset(t)})),a&&!C&&!c&&k&&(null==o||o.preventDefault()),!t.isUnmounted&&!C&&((!a&&k&&!s||f)&&(t.props.flushSync||Pi)((function(){t.updateRect(f?i:"",!0,!1),t.forceUpdate()})),a||f||d||!k||s||Ea(t,e,n,r,i+"After",o),!0)}function Ta(t){var e=t.props.dragTarget;return function(n){var r=n.inputEvent.target,i=t.areaElement;return e&&(r===e||e.contains(r))||r===i||!t.isMoveableElement(r)&&!t.controlBox.getElement().contains(r)||ve(r,"moveable-area")||ve(r,"moveable-padding")||ve(r,"moveable-edgeDraggable")}}function $a(t,e,n){var r=t.controlBox.getElement(),i=[],o=t.props.dragTarget;return i.push(r),t.props.dragArea&&!o||i.push(e),Ra(t,i,"targetAbles",n,{dragStart:Ta(t),pinchStart:Ta(t)})}function Ra(t,e,n,r,i){void 0===i&&(i={});var o="targetAbles"===n,s=t.props,a=s.pinchOutside,l=s.pinchThreshold,c=s.preventClickEventOnDrag,u=s.preventClickDefault,h=s.checkInput,f={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:l,pinchOutside:a,preventClickEventOnDrag:!!o&&c,preventClickEventOnDragStart:!!o&&u,preventClickEventByCondition:o?null:function(e){return t.controlBox.getElement().contains(e.target)},checkInput:!!o&&h},d=new Cr(e,f),p="Control"===r;return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(o){d.on("".concat(e).concat(o),(function(s){var a,l=s.eventType;(!i[l]||i[l](s))&&Ea(t,n,e,r,o,s)?(t.props.stopPropagation||"Start"===o&&p)&&(null===(a=null==s?void 0:s.inputEvent)||void 0===a||a.stopPropagation()):s.stop()}))}))})),d}var Ma=function(){function t(t,e,n){var r=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(t){var e=r.eventName,n=r.moveable;n.state.disableNativeEvent||r.ables.forEach((function(r){r[e](n,{inputEvent:t})}))},t.addEventListener(n.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Aa(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}function Da(t,e,n){for(var r,i,o,s=t,a=[],l=!n&&t===e||t===document.body,c=l,u=!1,h=3,f=!1,d=Ri(e,e,!0).offsetParent;s&&!c;){c=l;var p=getComputedStyle(s),g=p.position,m=(W=$i(s,p),B=W&&"none"!==W?It(W)?W:Vn(W):[1,0,0,1,0,0],void 0===(z=void 0)&&(z=6===B.length),z?[B[0],B[1],0,B[2],B[3],0,B[4],B[5],1]:B),O="fixed"===g,v={hasTransform:!1,fixedContainer:null};O&&(f=!0,d=(v=ji(s)).fixedContainer);var b=m.length;u||16!==b||(u=!0,h=4,Di(a),o&&(o=yn(o,3,4))),u&&9===b&&(m=yn(m,3,4));var y=Mi(s,t,p),w=y.tagName,x=y.hasOffset,S=y.isSVG,k=y.origin,C=y.targetOrigin,Q=y.offset,_=Q[0],P=Q[1];"svg"===w&&o&&(a.push({type:"target",target:s,matrix:Vi(s,h)}),a.push({type:"offset",target:s,matrix:Dn(h)}));var E=void 0,T=!1,$=!1;if(O)E=v.fixedContainer,T=!0;else{var R=Ri(s,e);if(E=R.offsetParent,T=R.isEnd,$=R.isStatic,Ir&&R.parentSlotElement){for(var M=E,A=0,D=0;M&&Aa(M);)A+=M.offsetLeft,D+=M.offsetTop,M=M.offsetParent;_-=A,P-=D}}!Ur||Nr||!x||S||!$||"relative"!==g&&"static"!==g||(_-=E.offsetLeft,P-=E.offsetTop,l=l||T);var j=0,q=0,X=0,V=0;if(O)x&&v.hasTransform&&(X=E.clientLeft,V=E.clientTop);else if(x&&d!==E&&(j=E.clientLeft,q=E.clientTop),x&&E===document.body){var U=Ai(s,!1,p);_+=U[0],P+=U[1]}if(a.push({type:"target",target:s,matrix:Ei(m,h,k)}),x){var Z=s===t,I=Z?0:s.scrollLeft,N=Z?0:s.scrollTop;a.push({type:"offset",target:s,matrix:qn([_-I+j-X,P-N+q-V],h)})}else a.push({type:"offset",target:s,origin:k});if(o||(o=m),r||(r=k),i||(i=C),c||O)break;s=E,l=T,n&&s!==document.body||(c=l)}var B,z,W;return o||(o=Dn(h)),r||(r=[0,0]),i||(i=[0,0]),{offsetContainer:d,matrixes:a,targetMatrix:o,transformOrigin:r,targetOrigin:i,is3d:u,hasFixed:f}}function ja(t,e,n,r){void 0===n&&(n=e);var i=0,o=0,s=0,a={},l=Yi(t);if(t&&(i=l.offsetWidth,o=l.offsetHeight),t){var c=function(t,e,n,r){var i;void 0===n&&(n=e);var o=Da(t,e),s=o.matrixes,a=o.is3d,l=o.targetMatrix,c=o.transformOrigin,u=o.targetOrigin,h=o.offsetContainer,f=o.hasFixed,d=Da(h,n,!0),p=d.matrixes,g=d.is3d,m=d.offsetContainer,O=r||g||a,v=O?4:3,b="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,y=l,w=Dn(v),x=Dn(v),S=Dn(v),k=Dn(v),C=s.length;p.reverse(),s.reverse(),!a&&O&&(y=yn(y,3,4),Di(s)),!g&&O&&Di(p),p.forEach((function(t){x=xn(x,t.matrix,v)}));var Q=n||document.body,_=(null===(i=p[0])||void 0===i?void 0:i.target)||Ri(Q,Q,!0).offsetParent,P=p.slice(1).reduce((function(t,e){return xn(t,e.matrix,v)}),Dn(v));s.forEach((function(t,e){if(C-2===e&&(S=w.slice()),C-1===e&&(k=w.slice()),!t.matrix){var n=function(t,e,n,r,i){var o,s=t.target,a=t.origin,l=e.matrix,c=Yi(s),u=c.offsetWidth,h=c.offsetHeight,f=n.getBoundingClientRect(),d=[0,0];n===document.body&&(d=Ai(s,!0));for(var p=s.getBoundingClientRect(),g=p.left-f.left+n.scrollLeft-(n.clientLeft||0)+d[0],m=p.top-f.top+n.scrollTop-(n.clientTop||0)+d[1],O=p.width,v=p.height,b=wn(r,i,l),y=Ni(b,u,h,r),w=y.left,x=y.top,S=y.width,k=y.height,C=Ui(b,a,r),Q=kn(C,[w,x]),_=[g+Q[0]*O/S,m+Q[1]*v/k],P=[0,0],E=0;++E<10;){var T=On(i,r);o=kn(Ui(T,_,r),Ui(T,C,r)),P[0]=o[0],P[1]=o[1];var $=Ni(wn(r,i,qn(P,r),l),u,h,r),R=$.left-g,M=$.top-m;if(Math.abs(R)<2&&Math.abs(M)<2)break;_[0]-=R,_[1]-=M}return P.map((function(t){return Math.round(t)}))}(t,s[e+1],_,v,xn(P,w,v));t.matrix=qn(n,v)}w=xn(w,t.matrix,v)}));var E=!b&&a;y||(y=Dn(E?4:3));var T=qi(b&&16===y.length?yn(y,4,3):y,E);return{hasFixed:f,rootMatrix:x=mn(x,v,v),beforeMatrix:S,offsetMatrix:k,allMatrix:w,targetMatrix:y,targetTransform:T,transformOrigin:c,targetOrigin:u,is3d:O,offsetContainer:h,offsetRootContainer:m}}(t,e,n,r),u=Bi(c.allMatrix,c.transformOrigin,i,o);a=Ar(Ar({},c),u);var h=Bi(c.allMatrix,[50,50],100,100);s=Hi([h.pos1,h.pos2],h.direction)}var f=r?4:3;return Ar(Ar(Ar({width:i,height:o,rotation:s},l),{rootMatrix:Dn(f),beforeMatrix:Dn(f),offsetMatrix:Dn(f),allMatrix:Dn(f),targetMatrix:Dn(f),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),a)}function qa(t,e,n,r,i){var o=1,s=[0,0],a={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},h=ja(e,n,i,!0);if(e){var f=h.is3d?4:3,d=Bi(h.offsetMatrix,Sn(h.transformOrigin,vn(h.targetMatrix,f)),h.width,h.height);o=d.direction,s=Sn(d.origin,[d.left-h.left,d.top-h.top]),a=Ji(e),c=Ji(Ri(r,r,!0).offsetParent||h.offsetRootContainer,!0),u=Ji(h.offsetRootContainer),t&&(l=Ji(t))}return Ar({targetClientRect:a,containerClientRect:c,moveableClientRect:l,rootContainerClientRect:u,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:e},h)}var Xa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=Ar({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},qa(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new ar,e._prevTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._observer=null,e._observerId=0,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;t?t.checkUpdateRect():(se(e._observerId),e._observerId=oe((function(){e.isDragging()||e.updateRect()})))}},e._onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e}Mr(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=this.getState(),n=t.parentPosition,r=t.className,i=t.target,o=t.zoom,s=t.cspNonce,a=t.translateZ,l=t.cssStyled,c=t.portalContainer,u=t.groupable;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=n||[0,0],f=h[0],d=h[1],p=e.left,g=e.top,m=e.target,O=e.direction,v=e.hasFixed,b=t.targets,y=(b&&b.length||i)&&(m||u),w=this.isDragging(),x={};this.getEnabledAbles().forEach((function(t){x["data-able-".concat(t.name.toLowerCase())]=!0}));var S=this._getAbleClassName();return De(l,Ar({cspNonce:s,ref:kt(this,"controlBox"),className:"".concat(_i("control-box",-1===O?"reverse":"",w?"dragging":"")," ").concat(S," ").concat(r)},x,{onClick:this._onPreventClick,portalContainer:c,style:{position:v?"fixed":"absolute",display:y?"block":"none",visibility:this.controlBox||this.props.firstRenderState?"visible":"hidden",transform:"translate3d(".concat(p-f,"px, ").concat(g-d,"px, ").concat(a,")"),"--zoom":o,"--zoompx":"".concat(o,"px")}}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container,r=t.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),n||e||r||(this.updateRect("",!1,!0),this.forceUpdate())},n.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},n.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),this._viewContainer&&this._changeAbleViewClassNames([]),ro(this,"targetGesto"),ro(this,"controlGesto");var t=this.events;for(var e in t){var n=t[e];n&&n.destroy()}},n.getTargets=function(){var t=this.props.target;return t?[t]:[]},n.getAble=function(t){return ie(this.props.ables||[],(function(e){return e.name===t}))},n.getContainer=function(){var t=this.props,e=t.parentMoveable,n=t.wrapperMoveable;return t.container||n&&n.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){var e;return t&&((null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"class"))||"").indexOf(Br)>-1},n.dragStart=function(t){var e=this.targetGesto,n=this.controlGesto;return e&&Ta(this)({inputEvent:t})?e.isFlag()||e.triggerDragStart(t):n&&this.isMoveableElement(t.target)&&(n.isFlag()||n.triggerDragStart(t)),this},n.hitTest=function(t){var e,n=this.state,r=n.target,i=n.pos1,o=n.pos2,s=n.pos3,a=n.pos4,l=n.targetClientRect;if(!r)return 0;if(t instanceof Element){var c=t.getBoundingClientRect();e={left:c.left,top:c.top,width:c.width,height:c.height}}else e=Ar({width:0,height:0},t);var u=e.left,h=e.top,f=e.width,d=e.height,p=Hn([i,o,a,s],l),g=Yn(ir(p,[[u,h],[u+f,h],[u+f,h+d],[u,h+d]])),m=Yn(p);return g&&m?Math.min(100,g/m*100):0},n.isInside=function(t,e){var n=this.state,r=n.target,i=n.pos1,o=n.pos2,s=n.pos3,a=n.pos4,l=n.targetClientRect;return!!r&&Kn([t,e],Hn([i,o,a,s],l))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props.parentMoveable,i=this.state.target||this.props.target,o=this.getContainer(),s=r?r._rootContainer:this._rootContainer;this.updateState(qa(this.controlBox&&this.controlBox.getElement(),i,o,o,s||o),!r&&n)},n.isDragging=function(t){var e,n,r=this.targetGesto,i=this.controlGesto;return(null==r?void 0:r.isFlag())?!t||!!(null===(e=r.getEventData()[t])||void 0===e?void 0:e.isEventStart):!(!(null==i?void 0:i.isFlag())||t&&!(null===(n=i.getEventData()[t])||void 0===n?void 0:n.isEventStart))},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=no(this.state),n=e[0],r=e[1],i=e[2],o=e[3],s=Ii(e),a=t.width,l=t.height,c=s.width,u=s.height,h=s.left,f=s.top,d=[t.left,t.top],p=Sn(d,t.origin);return{width:c,height:u,left:h,top:f,pos1:n,pos2:r,pos3:i,pos4:o,offsetWidth:a,offsetHeight:l,beforeOrigin:Sn(d,t.beforeOrigin),origin:p,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},n.getManager=function(){return this},n.getRotation=function(){var t,e,n,r,i=this.state;return t=i.pos1,e=i.pos2,n=i.direction,r=de(t,e)/Math.PI*180,(r=n>=0?r:180-r)>=0?r:360+r},n.request=function(t,e,n){void 0===e&&(e={});var r=this.props,i=r.ables,o=r.groupable,s=i.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!s||!s.request)return{request:function(){return this},requestEnd:function(){return this}};var a=this,l=s.request(this),c=n||e.isInstant,u=l.isControl?"controlAbles":"targetAbles",h="".concat(o?"Group":"").concat(l.isControl?"Control":""),f={request:function(e){return Ea(a,u,"drag",h,"",Ar(Ar({},l.request(e)),{requestAble:t,isRequest:!0}),c),this},requestEnd:function(){return Ea(a,u,"drag",h,"End",Ar(Ar({},l.requestEnd()),{requestAble:t,isRequest:!0}),c),this}};return Ea(a,u,"drag",h,"Start",Ar(Ar({},l.requestStart(e)),{requestAble:t,isRequest:!0}),c),c?f.request(e).requestEnd():f},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var t=this.getState(),e=this.props,n=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,s=t.pos1,a=t.pos2,l=t.pos3,c=t.pos4,u=t.left,h=t.top,f=e.padding||{},d=f.left,p=void 0===d?0:d,g=f.top,m=void 0===g?0:g,O=f.bottom,v=void 0===O?0:O,b=f.right,y=void 0===b?0:b,w=o?4:3,x=this.controlBox&&e.groupable?n:Sn(n,[u,h]);t.renderPoses=[Sn(s,bo(i,[-p,-m],r,x,w)),Sn(a,bo(i,[y,-m],r,x,w)),Sn(l,bo(i,[-p,v],r,x,w)),Sn(c,bo(i,[y,v],r,x,w))]},n.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,e=t.target,n=t.container,r=t.parentMoveable,i=this.state,o=i.target,s=i.container;if(o||e){this.updateAbles();var a=!fo(o,e);if(a||!fo(s,n)){var l=n||this.controlBox;l&&this.unsetAbles(),this.updateState({target:e,container:n}),!r&&l&&this.updateRect("End",!1,!1),this._isPropTargetChanged=a}}},n.waitToChangeTarget=function(){return new Promise((function(){}))},n.triggerEvent=function(t,e){this._emitter.trigger(t,e);var n=this.props[t];return n&&n(e)},n.useCSS=function(t,e){var n=this.props.customStyledMap,r=t+e;return n[r]||(n[r]=$r(t,e)),n[r]},n.getState=function(){var t=this.props.firstRenderState;return t&&!this.controlBox?t:this.state},n.updateSelectors=function(){},n.unsetAbles=function(){var t=this;this.targetAbles.forEach((function(e){e.unset&&e.unset(t)}))},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=n.triggerAblesSimultaneously,i=t.filter((function(t){return t&&(t.always&&!1!==n[t.name]||n[t.name])})),o="drag".concat(e,"Start"),s="pinch".concat(e,"Start"),a="drag".concat(e,"ControlStart"),l=ho(i,[o,s],r),c=ho(i,[a],r);this.enabledAbles=i,this.targetAbles=l,this.controlAbles=c},n.updateState=function(t,e){if(e){if(this.isUnmounted)return;this.setState(t)}else{var n=this.state;for(var r in t)n[r]=t[r]}},n.getEnabledAbles=function(){var t=this.props;return t.ables.filter((function(e){return e&&t[e.name]}))},n.renderAbles=function(){var t,e,n,r,i=this,o=this.props.triggerAblesSimultaneously,s={createElement:De};return this.renderState={},(t=go(ho(this.getEnabledAbles(),["render"],o).map((function(t){return(0,t.render)(i,s)||[]}))).filter((function(t){return t})),e=function(t){return t.key},n=[],r={},t.forEach((function(t,i){var o=e(t),s=r[o];s||(s=[],r[o]=s,n.push(s)),s.push(t)})),n).map((function(t){return t[0]}))},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._updateObserver=function(t){var e,n=this.props,r=n.target;if(window.ResizeObserver&&r&&n.useResizeObserver){if(t.target!==r||!this._observer){var i=new ResizeObserver(this.checkUpdateRect);i.observe(r,{box:"border-box"}),this._observer=i}}else null===(e=this._observer)||void 0===e||e.disconnect()},n._updateEvents=function(){var t=this.controlBox.getElement(),e=this.targetAbles.length,n=this.controlAbles.length,r=this.props,i=r.dragTarget||r.target;(!e&&this.targetGesto||this._isTargetChanged(!0))&&(ro(this,"targetGesto"),this.updateState({gesto:null})),n||ro(this,"controlGesto"),i&&e&&!this.targetGesto&&(this.targetGesto=$a(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=Ra(this,t,"controlAbles","Control"))},n._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},n._renderLines=function(){var t=this.props,e=t.zoom,n=t.hideDefaultLines,r=t.hideChildMoveableDefaultLines,i=t.parentMoveable;if(n||i&&r)return[];var o=this.getState().renderPoses,s={createElement:De};return[[0,1],[1,3],[3,2],[2,0]].map((function(t,n){var r=t[0],i=t[1];return Es(s,"",o[r],o[i],e,"render-line-".concat(n))}))},n._isTargetChanged=function(t){var e=this.props,n=e.dragTarget||e.target,r=this._prevTarget,i=this._prevDragArea,o=e.dragArea;return!o&&r!==n||(t||o)&&i!==o},n._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,n=this.events,r=ae(n);if(this._isTargetChanged())for(var i in n){var o=n[i];o&&o.destroy(),n[i]=null}if(e){var s=this.enabledAbles;r.forEach((function(r){var i=ho(s,[r]),o=i.length>0,a=n[r];o?(a||(a=new Ma(e,t,r),n[r]=a),a.setAbles(i)):a&&(a.destroy(),n[r]=null)}))}},n._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=Co(t,!0))},n._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=Co(t,!0)),this._viewContainer&&this._changeAbleViewClassNames(Dr(Dr([],this._getAbleViewClassNames(),!0),[this.isDragging()?Js:""],!1))},n._changeAbleViewClassNames=function(t){var e=this._viewContainer,n=po(t.filter(Boolean),(function(t){return t})).map((function(t){return t[0]})),r=this._viewClassNames,i=Rt(r,n),o=i.removed,s=i.added;o.forEach((function(t){ye(e,r[t])})),s.forEach((function(t){be(e,n[t])})),this._viewClassNames=n},n._getAbleViewClassNames=function(){var t=this;return this.getEnabledAbles().map((function(e){var n;return(null===(n=e.viewClassName)||void 0===n?void 0:n.call(e,t))||""})).join(" ").split(/\s+/g)},n._getAbleClassName=function(){var t=this,e=this.getEnabledAbles(),n=this.targetGesto,r=this.controlGesto,i=(null==n?void 0:n.isFlag())?n.getEventData():{},o=(null==r?void 0:r.isFlag())?r.getEventData():{};return e.map((function(e){var n,r,s,a=e.name,l=(null===(n=e.className)||void 0===n?void 0:n.call(e,t))||"";return((null===(r=i[a])||void 0===r?void 0:r.isEventStart)||(null===(s=o[a])||void 0===s?void 0:s.isEventStart))&&(l+=" ".concat(_i("".concat(a,"-dragging")))),l.trim()})).filter(Boolean).join(" ")},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Pi,firstRenderState:null,viewContainer:null},e}(We),Va={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,e){var n=t.props.targets||[];t.moveables=[];var r=t.state,i=[r.left,r.top],o=t.props,s=o.zoom||1,a=t.renderGroupRects;return Dr(Dr([],n.map((function(n,r){return e.createElement(Xa,{key:"moveable"+r,ref:Ct(t,"moveables",r),target:n,origin:!1,cssStyled:o.cssStyled,customStyledMap:o.customStyledMap,useResizeObserver:o.useResizeObserver,hideChildMoveableDefaultLines:o.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:i,zoom:s})})),!0),go(a.map((function(t,n){var r=[t.pos1,t.pos2,t.pos3,t.pos4];return[[0,1],[1,3],[3,2],[2,0]].map((function(t,o){var a=t[0],l=t[1];return Es(e,"",kn(r[a],i),kn(r[l],i),s,"group-rect-".concat(n,"-").concat(o))}))}))),!0)}},Ua=jr("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.getElement().contains(i);if(r&&i&&!e.isDrag&&!t.isMoveableElement(i)&&!o){var s=n.contains(i);co(t,"onClick",so(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:s}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(n&&r&&!e.isDrag&&!t.isMoveableElement(r)&&e.datas.inputTarget!==r){var i=t.props.targets,o=i.indexOf(r),s=o>-1,a=!1;-1===o&&(a=(o=re(i,(function(t){return t.contains(r)})))>-1),co(t,"onClickGroup",so(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:o,isTarget:s,containsTarget:a,moveableTarget:i[o]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function Za(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),Ar(Ar({},t),{datas:e})}var Ia=jr("edgeDraggable",{css:[".edge.edgeDraggable.line {\n    cursor: move;\n}"],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?Ts(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return ve(n,_i("direction"))&&ve(n,_i("edge"))&&ve(n,_i("edgeDraggable"))},dragControlStart:function(t,e){return t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Ms.dragStart(t,Za(e))},dragControl:function(t,e){return Ms.drag(t,Za(e))},dragControlEnd:function(t,e){return Ms.dragEnd(t,Za(e))},dragGroupControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return ve(n,_i("direction"))&&ve(n,_i("line"))},dragGroupControlStart:function(t,e){return Ms.dragGroupStart(t,Za(e))},dragGroupControl:function(t,e){return Ms.dragGroup(t,Za(e))},dragGroupControlEnd:function(t,e){return Ms.dragGroupEnd(t,Za(e))},unset:function(t){return Ms.unset(t)}}),Na={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Ba=[_a,oa,Qs,To,Ms,Ia,Ds,zs,Gs,Ns,ia,sa,na,Sa,xa,Qa,Va,Na,Ua,ea,Pa],za=Ba.reduce((function(t,e){return Ar(Ar({},t),"events"in e?e.events:{})}),{}),Wa=Ba.reduce((function(t,e){return Ar(Ar({},t),e.props)}),{}),La=ko(za),Ga=Object.keys(La),Fa=Object.keys(Wa);function Ya(t,e){var n=t[0],r=t[1],i=t[2];return(n*e[0]+r*e[1]+i)/Math.sqrt(n*n+r*r)}function Ha(t,e){var n=t[0],r=t[1];return-n*e[0]-r*e[1]}function Ja(t,e){return Math.max.apply(Math,t.map((function(t){var n=t[0],r=t[1],i=t[2],o=t[3];return Math.max(n[e],r[e],i[e],o[e])})))}function Ka(t,e){return Math.min.apply(Math,t.map((function(t){var n=t[0],r=t[1],i=t[2],o=t[3];return Math.min(n[e],r[e],i[e],o[e])})))}function tl(t,e){var n=e.map((function(e){if(Nt(e)){var n=tl(t,e),r=n.length;return r>1?n:1===r?n[0]:null}var i=ie(t,(function(t){return t.manager.props.target===e}));return i?(i.finded=!0,i.manager):null})).filter(Boolean);return 1===n.length&&Nt(n[0])?n[0]:n}var el=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new Gn,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e}Mr(e,t);var n=e.prototype;return n.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},n.getTargets=function(){return this.props.targets},n.updateRect=function(t,e,n){if(void 0===n&&(n=!0),this.controlBox){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var r=this.state,i=this.props,o=this.moveables,s=r.target||i.target,a=o.map((function(t){return{finded:!1,manager:t}})),l=tl(a,this.props.targetGroups||[]);l.push.apply(l,a.filter((function(t){return!t.finded})).map((function(t){return t.manager})));var c=[],u=!e||""!==t&&i.updateGroup,h=function t(e,n,r){var o,s=e.map((function(e){if(Nt(e)){var r=t(e,n),i=[r.pos1,r.pos2,r.pos3,r.pos4];return c.push(r),{poses:i,rotation:r.rotation}}return{poses:no(e.state),rotation:e.getRotation()}})),a=s.map((function(t){return t.rotation})),l=a[0],h=a.every((function(t){return Math.abs(l-t)<.1}));o=u?h?l:i.defaultGroupRotate||0:!r&&h?l:n;var f=s.map((function(t){return t.poses})),d=function(t,e){var n,r=[0,0],i=[0,0],o=[0,0],s=[0,0],a=0,l=0;if(!t.length)return{pos1:r,pos2:i,pos3:o,pos4:s,minX:0,minY:0,width:a,height:l,rotation:e};var c=me(e,Lr);if(c%90){var u=c/180*Math.PI,h=Math.tan(u),f=-1/h,d=[Fr,Yr],p=[[0,0],[0,0]],g=[Fr,Yr],m=[[0,0],[0,0]];t.forEach((function(t){t.forEach((function(t){var e=Ya([-h,1,0],t),n=Ya([-f,1,0],t);d[0]>e&&(p[0]=t,d[0]=e),d[1]<e&&(p[1]=t,d[1]=e),g[0]>n&&(m[0]=t,g[0]=n),g[1]<n&&(m[1]=t,g[1]=n)}))}));var O=p[0],v=p[1],b=m[0],y=m[1],w=[-h,1,Ha([-h,1],O)],x=[-h,1,Ha([-h,1],v)],S=[-f,1,Ha([-f,1],b)],k=[-f,1,Ha([-f,1],y)];r=(n=[[w,S],[w,k],[x,S],[x,k]].map((function(t){return er(t[0],t[1])[0]})))[0],i=n[1],o=n[2],s=n[3],a=g[1]-g[0],l=d[1]-d[0]}else{var C,Q=Ka(t,0),_=Ka(t,1),P=Ja(t,0),E=Ja(t,1);r=[Q,_],i=[P,_],o=[Q,E],s=[P,E],a=P-Q,l=E-_,c%180&&(r=(C=[o,r,s,i])[0],i=C[1],o=C[2],s=C[3],a=E-_,l=P-Q)}c%360>180&&(r=(C=[s,o,i,r])[0],i=C[1],o=C[2],s=C[3]);var T=Jn([r,i,o,s]);return{pos1:r,pos2:i,pos3:o,pos4:s,width:a,height:l,minX:T.minX,minY:T.minY,rotation:e}}(f,o);return d}(l,this.rotation,!0);u&&(this.rotation=h.rotation,this.transformOrigin=i.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this.renderGroupRects=c;var f=this.rotation,d=this.scale,p=h.width,g=h.height,m=h.minX,O=h.minY,v="rotate(".concat(f,"deg) scale(").concat(d[0]>=0?1:-1,", ").concat(d[1]>=0?1:-1,")");s.style.cssText+="left:0px;top:0px; transform-origin: ".concat(this.transformOrigin,"; width:").concat(p,"px; height:").concat(g,"px;")+"transform:".concat(v),r.width=p,r.height=g;var b=this.getContainer(),y=qa(this.controlBox.getElement(),s,this.controlBox.getElement(),this.getContainer(),this._rootContainer||b),w=[y.left,y.top],x=no(y),S=x[0],k=x[1],C=x[2],Q=x[3],_=Jn([S,k,C,Q]),P=[_.minX,_.minY];y.pos1=kn(S,P),y.pos2=kn(k,P),y.pos3=kn(C,P),y.pos4=kn(Q,P),y.left=m-y.left+P[0],y.top=O-y.top+P[1],y.origin=kn(Sn(w,y.origin),P),y.beforeOrigin=kn(Sn(w,y.beforeOrigin),P),y.originalBeforeOrigin=Sn(w,y.originalBeforeOrigin);var E=y.targetClientRect,T=d[0]*d[1]>0?1:-1;E.top+=y.top-r.top,E.left+=y.left-r.left,s.style.transform="translate(".concat(-P[0],"px, ").concat(-P[1],"px) ").concat(v),this.updateState(Ar(Ar({},y),{direction:T,beforeDirection:T}),n)}},n.getRect=function(){return Ar(Ar({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},n.triggerEvent=function(e,n,r){if(r||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n);this._emitter.trigger(e,n)},n.updateAbles=function(){t.prototype.updateAbles.call(this,Dr(Dr([],this.props.ables,!0),[Va],!1),"Group")},n._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},n._updateEvents=function(){var t=this.state,e=this.props,n=this._prevTarget,r=e.dragTarget||this.areaElement;n!==r&&(ro(this,"targetGesto"),ro(this,"controlGesto"),t.target=null),t.target||(t.target=this.areaElement,this.controlBox.getElement().style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=$a(this,r,"Group")),this.controlGesto||(this.controlGesto=Ra(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var i=!fo(t.container,e.container);i&&(t.container=e.container);var o=this.differ.update(e.targets),s=o.added,a=o.changed,l=o.removed,c=s.length||l.length;(i||c||a.length)&&this.updateRect(),this._isPropTargetChanged=!!c},n._updateObserver=function(){},e.defaultProps=Ar(Ar({},Xa.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Xa),nl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}Mr(e,t);var n=e.prototype;return n.render=function(){var t=this,e=this.props,n=e.cspNonce,r=e.cssStyled,i=e.targets;return De(r,{cspNonce:n,ref:kt(this,"controlBox"),className:_i("control-box")},i.map((function(e,n){return De(Xa,Ar({key:"moveable"+n,ref:Ct(t,"moveables",n)},t.props,{target:e,wrapperMoveable:t}))})))},n.componentDidUpdate=function(){},n.getTargets=function(){return this.props.targets},n.updateRect=function(t,e,n){void 0===n&&(n=!0),this.moveables.forEach((function(r){r.updateRect(t,e,n)}))},n.getRect=function(){return Ar(Ar({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},e}(Xa);function rl(t,e){var n=[];return t.forEach((function(t){t&&(Bt(t)?e[t]&&n.push.apply(n,e[t]):Nt(t)?n.push.apply(n,rl(t,e)):n.push(t))})),n}function il(t,e){var n=[];return t.forEach((function(t){t&&(Bt(t)?e[t]&&n.push.apply(n,e[t]):Nt(t)?n.push(il(t,e)):n.push(t))})),n}function ol(t,e){return t.length!==e.length||t.some((function(t,n){var r=e[n];return!(!t&&!r)&&t!=r&&(!Nt(t)||!Nt(r)||ol(t,r))}))}var sl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new Gn,e._elementTargets=[],e._onChangetarget=null,e}Mr(e,t);var n,r,i=e.prototype;return e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(e){var n=e.css;n&&n.forEach((function(e){t[e]=!0}))}));var e=ae(t).join("\n");this.defaultStyled=$r("div",function(t,e){return e.replace(/([^}{]*){/gm,(function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,".moveable-$1")+"{"}))}(0,zr+e))},e.getTotalAbles=function(){return Dr([oa,Va,Na,ea],this.defaultAbles,!0)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var e=this.props,n=e.ables,r=e.props,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["ables","props"]),o=this._updateRefs(!0),s=rl(o,this.selectorMap),a=s.length>1,l=Dr(Dr([],t.getTotalAbles(),!0),n||[],!0),c=Ar(Ar(Ar({},i),r||{}),{ables:l,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});this._elementTargets=s;var u=null,h=this.moveable;if(a){if(i.individualGroupable)return De(nl,Ar({key:"individual-group",ref:kt(this,"moveable")},c,{target:null,targets:s}));var f=il(o,this.selectorMap);if(h&&!h.props.groupable&&!h.props.individualGroupable){var d=h.props.target;d&&s.indexOf(d)>-1&&(u=Ar({},h.state))}return De(el,Ar({key:"group",ref:kt(this,"moveable")},c,{target:null,targets:s,targetGroups:f,firstRenderState:u}))}var p=s[0];if(h&&(h.props.groupable||h.props.individualGroupable)){var g=ie(h.moveables||[],(function(t){return t.props.target===p}));g&&(u=Ar({},g.state))}return De(Xa,Ar({key:"single",ref:kt(this,"moveable")},c,{target:p,firstRenderState:u}))},i.componentDidMount=function(){this._updateRefs()},i.componentDidUpdate=function(){var t=this._differ.update(this._elementTargets),e=t.added,n=t.removed;(e.length||n.length)&&this._onChangetarget&&this._onChangetarget(),this._updateRefs()},i.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},i.getTargets=function(){var t,e;return null!==(e=null===(t=this.moveable)||void 0===t?void 0:t.getTargets())&&void 0!==e?e:[]},i.updateSelectors=function(){this.selectorMap={},this._updateRefs()},i.waitToChangeTarget=function(){var t,e=this;return this._onChangetarget=function(){e._onChangetarget=null,t()},new Promise((function(e){t=e}))},i.getManager=function(){return this.moveable},i._updateRefs=function(t){var e=this.refTargets,n=Qo(this.props.target||this.props.targets),r="undefined"!=typeof document,i=ol(e,n),o=this.selectorMap,s={};return this.refTargets.forEach((function t(e){Bt(e)?o[e]?s[e]=o[e]:r&&(i=!0,s[e]=[].slice.call(document.querySelectorAll(e))):Nt(e)&&e.forEach(t)})),this.refTargets=n,this.selectorMap=s,!t&&i&&this.forceUpdate(),n},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);o>3&&s&&Object.defineProperty(e,n,s)}([(n=ni,void 0===r&&(r={}),function(t,e){n.forEach((function(n){var i=r[n]||n;i in t||(t[i]=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=(t=this[e])[n].apply(t,r);return o===this[e]?this:o})}))})],e.prototype,"moveable",void 0),e}(We),al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mr(e,t),e.defaultAbles=Ba,e}(sl),ll=al,cl=function(t,e){return cl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},cl(t,e)};function ul(t,e){function n(){this.constructor=t}cl(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var hl=function(){return hl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hl.apply(this,arguments)},fl=function(t){function e(e){var n=t.call(this,e)||this;return n.state={},n.state=n.props,n}return ul(e,t),e.prototype.render=function(){return function(t,e){return De(Le,{element:t,container:e})}(De(ll,hl({ref:kt(this,"moveable")},this.state)),this.state.parentElement)},e}(ze),dl=Fa,pl=ni,gl=Ga,ml=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;r.tempElement=document.createElement("div");var i=hl({},n),o={};gl.forEach((function(t){o[te("on ".concat(t))]=function(e){return r.trigger(t,e)}})),Ye(De(fl,hl({ref:kt(r,"innerMoveable"),parentElement:e},i,o)),r.tempElement);var s=i.target;return Nt(s)&&s.length>1&&r.updateRect(),r}ul(e,t);var n=e.prototype;return n.setState=function(t,e){this.innerMoveable.setState(t,e)},n.forceUpdate=function(t){this.innerMoveable.forceUpdate(t)},n.dragStart=function(t){this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(t)},n.destroy=function(){Ye(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([Qt(pl,(function(t,e){t[e]||(t[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.getMoveable();if(r&&r[e])return r[e].apply(r,t)})})),Qt(dl,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var n;this.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})}))],e),e}(ar),Ol=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ul(e,t),e}(ml),vl=n(7312),bl={};bl.styleTagTransform=Y(),bl.setAttributes=W(),bl.insert=B().bind(null,"head"),bl.domAPI=I(),bl.insertStyleElement=G(),U()(vl.Z,bl),vl.Z&&vl.Z.locals&&vl.Z.locals;class yl extends e().Component{constructor(){super(),this.ref=e().createRef(),this.state={state:"normal"}}componentDidMount(){this.enablePanelMoveResize()}enablePanelMoveResize(){const t=new Ol(document.body,{className:"workspace-movable",target:this.ref.current,dimensionViewable:!0,deleteButtonViewable:!1,dragTarget:this.ref.current.querySelector(".semi-tabs-bar"),container:document.body,snappable:!1,snapGap:!1,isDisplayInnerSnapDigit:!1,draggable:!0,resizable:!0,scalable:!1,rotatable:!1,warpable:!1,pinchable:!1,origin:!1,keepRatio:!1,edge:!0,throttleDrag:0,throttleResize:1,throttleScale:0,throttleRotate:0,clipTargetBounds:!0});t.on("resize",(({target:t,width:e,height:n,delta:r,transform:i})=>{t.style.transform=i,r[0]&&(t.style.width=`${e}px`),r[1]&&(t.style.height=`${n}px`)})),t.on("drag",(t=>{t.target.style.transform=t.transform}))}render(){const{onClose:t,visible:n}=this.props,{state:r}=this.state,i={};return Object.assign(i,this.props),i.height="minimize"===r?"36px":this.props.height,n||(i.display="none"),xt().createPortal(e().createElement("div",{ref:this.ref,className:"movable-panel",style:i,id:this.props.id},e().createElement(st,null),e().createElement("div",{className:"panel-btns"},"normal"===r&&e().createElement(s.Button,{icon:e().createElement(at,null),onClick:()=>{this.setState({state:"minimize"})},theme:"borderless",size:"small",type:"tertiary"}),"minimize"===r&&e().createElement(s.Button,{icon:e().createElement(ot,null),onClick:()=>{this.setState({state:"normal"})},theme:"borderless",size:"small",type:"tertiary"}),e().createElement(s.Button,{icon:e().createElement(et,null),theme:"borderless",size:"small",type:"tertiary",onClick:t})),e().createElement("div",{className:"panel-content"},this.props.children)),document.body)}}const wl="pageLoaded",xl="pageVariableChange",Sl="pagePropChange",kl="elementSelected",Cl="componentPropChange",Ql="componentEventChange",_l="elementParentChanged",Pl=[{rows:[{cols:[{label:"页面名称",control:"text",bindable:!1,field:"title"}]},{cols:[{label:"页面布局",control:"select",field:"type",bindable:!1,optionList:[{label:"固定宽高",value:"fixed"},{label:"宽度自适应",value:"fit-w"},{label:"宽高自适应",value:"fit-wh"}]}]},{cols:[{label:"W",when:'type === "fixed"',bindable:!1,control:"number",field:"width"},{label:"H",when:'type === "fixed"',bindable:!1,control:"number",field:"height"}]}]}];function El(){return El=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},El.apply(this,arguments)}const Tl=[{rows:[{cols:[{label:"名称",control:"text",bindable:!1,field:"name"}]},{cols:[{label:"X",control:"number",readonly:t=>!(t&&t.style&&"absolute"===t.style.position),field:"style.x",fieldEx:"styleEx.x"},{label:"Y",control:"number",readonly:t=>!(t&&t.style&&"absolute"===t.style.position),field:"style.y",fieldEx:"styleEx.Y"}]},{cols:[{label:"W",control:"number",field:"style.width",fieldEx:"styleEx.width"},{label:"H",control:"number",field:"style.height",fieldEx:"styleEx.height"}]},{cols:[{label:"显示",type:"boolean",control:"checkbox",field:"style.visible",fieldEx:"styleEx.visible"}]}]}];class $l extends e().Component{constructor(t){super(t),this.ref=e().createRef(),this.componentPropFormApi=null,this.componentEventFormApi=null,this.pagePropFormApi=null,this.state={pageVariables:[],nodePropsSection:[],nodeEventsSection:[]},this.initEvents()}initEvents(){const{Ridge:t}=window;t.on(wl,(({pageProperties:t,pageVariables:e})=>{this.pagePropFormApi.setValues(t,{notNotify:!0}),this.setState({pageVariables:e})})),t.on(xl,(t=>{this.setState({pageVariables:t})})),t.on(kl,(t=>{"workspace"===t.from&&this.elementSelected(t.element)}))}elementMoved(t){this.componentPropFormApi.setValue("style",t.elementWrapper.getStyle(),{notNotify:!0})}updatePanelConfig(){const t=this.currentElement.elementWrapper;if(this.componentPropFormApi.setValue("style",t.config.style,{notNotify:!0}),t.componentDefinition){const e=t.componentDefinition.props,n=[];let r=null;for(const t of e){const e={label:t.label,type:t.type,bindable:t.bindable,control:t.control,optionList:t.optionList,field:"props."+t.name,fieldEx:"propsEx."+t.name};t.party?r=e:(n.push({cols:r?[r,e]:[e]}),r=null)}const i=Tl.concat({rows:n}),o=[];for(const e of t.componentDefinition.events||[]){const t={label:e.label,type:"function",control:"event",bindable:!1,field:"event."+e.name};o.push({cols:[t]})}this.setState({nodePropsSection:i,nodeEventsSection:[{rows:o}]},(()=>{this.componentPropFormApi.setValue("name",t.config.title,{notNotify:!0}),this.componentPropFormApi.setValue("props",t.config.props,{notNotify:!0}),this.componentPropFormApi.setValue("propsEx",t.config.propEx,{notNotify:!0}),this.componentPropFormApi.setValue("styleEx",t.config.styleEx,{notNotify:!0}),this.componentEventFormApi.setValue("event",t.config.events,{notNotify:!0})}))}}elementSelected(t){if(this.currentElement=t,this.interval&&(window.clearInterval(this.interval),this.interval=null),t){const t=this.currentElement.elementWrapper;t&&t.componentDefinition?this.updatePanelConfig():this.interval=setInterval((()=>{t&&t.componentDefinition&&(this.updatePanelConfig(),window.clearInterval(this.interval),this.interval=null)}),200)}else this.currentElement=null,this.setState({nodePropsSection:[],nodeEventsSection:[]})}nodeRectChange(t){this.styleChange(t)}render(){const{nodePropsSection:t,nodeEventsSection:n,pageVariables:r}=this.state,i=(t,e)=>{window.Ridge&&window.Ridge.emit(Ql,{el:this.currentElement,values:t,field:e})};return e().createElement(yl,El({right:"10px",bottom:"250px",width:"300px",top:"10px"},this.props),e().createElement(s.Tabs,{type:"card",style:{display:0===t.length?"none":"initial"}},e().createElement(s.TabPane,{tab:"属性",itemKey:"style"},e().createElement(yt,{sections:t,getFormApi:t=>{this.componentPropFormApi=t},onValueChange:(t,e)=>{window.Ridge&&window.Ridge.emit(Cl,{el:this.currentElement,values:t,field:e})}})),e().createElement(s.TabPane,{tab:"交互",itemKey:"interact"},e().createElement(yt,{sections:n,getFormApi:t=>{this.componentEventFormApi=t},onValueChange:i,options:{pageVariables:r}}))),e().createElement(s.Tabs,{type:"card",style:{display:0===t.length?"initial":"none"}},e().createElement(s.TabPane,{tab:"属性",itemKey:"style"},e().createElement(yt,{sections:Pl,getFormApi:t=>{this.pagePropFormApi=t},onValueChange:(t,e)=>{window.Ridge&&window.Ridge.emit(Sl,t)}})),e().createElement(s.TabPane,{tab:"交互",itemKey:"interact"},e().createElement(yt,{sections:n,getFormApi:t=>{},onValueChange:i,options:{pageVariables:r}}))))}}var Rl=n(1162),Ml={};Ml.styleTagTransform=Y(),Ml.setAttributes=W(),Ml.insert=B().bind(null,"head"),Ml.domAPI=I(),Ml.insertStyleElement=G(),U()(Rl.Z,Ml),Rl.Z&&Rl.Z.locals&&Rl.Z.locals;const Al=({variables:n,variableChange:r})=>{const[i,o]=(0,t.useState)(-1),[a,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),[h,f]=(0,t.useState)(!1),d=(t,e,i)=>{r(n.map(((n,r)=>r===t?{...n,[e]:i}:n)))},p=t=>{if(i===t){if(-1===c)return;if(c)return;l(n[t].name),u(!0)}else u(!1),l(""),o(t)};return e().createElement("div",{className:"variable-list"},e().createElement("div",{className:"item-list",onClick:()=>{p(-1)}},n.map(((t,o)=>e().createElement("div",{className:"item "+(i===o?"selected":""),key:o,onClick:t=>{p(o),t.stopPropagation(),t.preventDefault()}},c&&i===o&&e().createElement("div",{className:"edit-line"},e().createElement("div",{className:"edit-name"},e().createElement(s.Input,{size:"small",validateStatus:h?"error":"default",value:a,onChange:t=>{((t,e)=>{if(l(e),e.match("^([a-zA-Z_$一-龥][a-zA-Z\\d_$一-龥]*)$")){let i=!1;n.forEach(((n,r)=>{r!==t&&n.name===e&&(i=!0)})),i?f(!0):(f(!1),r(n.map(((n,r)=>r===t?Object.assign(n,{name:e}):n))))}else f(!0)})(o,t)}})),e().createElement("div",{className:"edit-value"},e().createElement(s.Input,{size:"small",value:t.value,onChange:t=>{d(o,"value",t)},addonAfter:e().createElement(it,{className:"action-edit",style:{cursor:"pointer"},onClick:()=>((t,e)=>{const{Ridge:n}=window;n&&n.openCodeEditor&&n.openCodeEditor({lang:"js",code:t,completed:t=>{d(e,"value",t)}})})(t.value,o)})}))),(!c||i!==o)&&e().createElement(e().Fragment,null,e().createElement("div",{className:"name"},t.name),e().createElement("div",{className:"value"},t.value)))))),e().createElement("div",{className:"bottom-bar"},e().createElement(ut,{onClick:()=>{r([...n,{name:"变量"+(n.length+1),save:!1,value:""}])}}),e().createElement(rt,{onClick:t=>{i>-1&&r(n.filter((t=>t!==n[i])))}})))};var Dl=n(7318),jl={};function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ql.apply(this,arguments)}jl.styleTagTransform=Y(),jl.setAttributes=W(),jl.insert=B().bind(null,"head"),jl.domAPI=I(),jl.insertStyleElement=G(),U()(Dl.Z,jl),Dl.Z&&Dl.Z.locals&&Dl.Z.locals;class Xl extends e().Component{constructor(){super(),this.state={show:!0}}render(){return e().createElement(yl,ql({right:"10px",bottom:"10px",width:"300px",height:"240px"},this.props),e().createElement(s.Tabs,{type:"card",size:"small"},e().createElement(s.TabPane,{size:"small",tab:"页面变量",itemKey:"var"},e().createElement(Al,{variables:this.props.variables,variableChange:this.props.variableChange})),e().createElement(s.TabPane,{tab:"数据",itemKey:"data"}),e().createElement(s.TabPane,{tab:"资源",itemKey:"asset"})))}}class Vl{constructor(){this.packageNames=["ridge-antd","ridge-basic","ridge-container"],this.packagesDetails=[]}async getBuildInPackages(){return this.packagesDetails.length||await this.loadPackages(),this.packagesDetails}async loadPackages(){const t=[],e=await window.Ridge.loader.getDebugPackage();e&&t.push(await window.Ridge.loader.getPackageJSON(e.name));for(const e of this.packageNames)t.push(await window.Ridge.loader.getPackageJSON(e));return await Promise.allSettled(t),this.packagesDetails=t.filter((t=>null!=t)),this.packagesDetails}}var Ul=n(2696),Zl={};function Il(){return Il=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Il.apply(this,arguments)}Zl.styleTagTransform=Y(),Zl.setAttributes=W(),Zl.insert=B().bind(null,"head"),Zl.domAPI=I(),Zl.insertStyleElement=G(),U()(Ul.Z,Zl),Ul.Z&&Ul.Z.locals&&Ul.Z.locals;class Nl extends e().Component{constructor(){super(),this.el=document.createElement("div"),this.ref=e().createRef(),this.packageManager=new Vl,this.state={packages:[],currentPackage:"ridge-basic",packageListingLoaded:!1}}showPanel(){}renderPackageComponents(){const t=this.state.packages.filter((t=>t.name===this.state.currentPackage))[0];t.components.forEach((({path:t})=>{}))}tabChange(t){this.setState({currentPackage:t},(()=>{this.renderPackageComponents()}))}componentDidMount(){this.state.packageListingLoaded||this.packageManager.getBuildInPackages().then((t=>{this.setState({currentPackage:this.packageManager.packageNames[0],packages:t,packageListingLoaded:!0},(()=>{this.renderPackageComponents()}))}))}dragStart(t,e){t.dataTransfer.setData("text/plain",JSON.stringify(e));const n=new window.Image;n.src=e.icon,t.dataTransfer.setDragImage(n,60,60)}render(){const{packageListingLoaded:t,packages:n}=this.state,{dragStart:r}=this,i=this.tabChange.bind(this);return e().createElement(yl,Il({title:"组件",left:"45px",width:"320px",bottom:"10px",top:"10px"},this.props),!t&&e().createElement(s.Spin,{size:"large"}),e().createElement(s.Tabs,{type:"card",size:"small",onChange:t=>i(t)},n&&n.map((t=>e().createElement(s.TabPane,{style:{padding:"4px"},className:"tab-title",tab:e().createElement("div",{className:"package-tab"},e().createElement("span",null,t.description)),key:t.name,itemKey:t.name},e().createElement(s.List,{grid:{gutter:6,span:8},dataSource:t.components,renderItem:n=>e().createElement(s.List.Item,null,e().createElement("div",{draggable:!0,onDragStart:e=>r(e,Object.assign(n,{componentPath:t.name+"/"+n.path})),className:"component-container"},e().createElement("img",{src:n.icon})),e().createElement("div",null,n.title))}))))))}}const Bl=Nl;function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zl.apply(this,arguments)}class Wl extends e().Component{constructor(){super(),this.el=document.createElement("div"),this.ref=e().createRef(),this.state={elements:[],selected:null}}componentDidMount(){const{Ridge:t}=window;t.on(wl,(({elements:t})=>{this.setState({elements:t})})),t.on(_l,(({elements:t})=>{this.setState({elements:t})})),t.on(kl,(t=>{"workspace"===t.from&&this.setState({selected:t.element?t.element.elementWrapper.id:null})}))}onNodeSelected(t){const{Ridge:e}=window;e.emit(kl,{from:"outline",element:this.state.elements[t].el})}buildElementTree(t){const e=[],n=Object.values(t).filter((t=>t.isRoot()));for(const r of n)e.push(this.getElementTree(r,t));return e}getElementTree(t,e,n){const r={key:t.id,label:t.config.title,value:t.id,tags:n,element:t,children:[]};if(t.config.props.children&&t.config.props.children.length)for(const n of t.config.props.children)r.children.push(this.getElementTree(e[n],e));const i=t.getSlotChildren();for(const t of i)r.children.push(this.getElementTree(t.element,e,{tag:t.prop.label}));return r}render(){const{selected:t,elements:n}=this.state,r=this.buildElementTree(n);return e().createElement(yl,zl({title:"大纲",left:"45px",width:"320px",bottom:"10px",top:"400px"},this.props),e().createElement(s.Tree,{filterTreeNode:!0,value:t,searchRender:({prefix:t,...n})=>e().createElement(s.Input,zl({prefix:"Search"},n)),onChange:t=>{this.onNodeSelected(t)},treeData:r}))}}const Ll=Wl,Gl=()=>e().createElement("span",{style:{width:"21px"}}),Fl=t=>{const{dataPanelVisible:n,componentPanelVisible:r,propPanelVisible:i,outlinePanelVisible:o,pagesPanelVisible:a,modeRun:l,toggleVisible:c,toggoleRunMode:u}=t;return e().createElement("div",{style:{position:"absolute",left:"10px",top:"10px",gap:"5px",display:"flex",flexDirection:"column",background:"var(--semi-color-bg-0)",border:"1px solid var(--semi-color-border)",padding:"4px",borderRadius:"5px",zIndex:101}},!l&&e().createElement(s.Button,{size:"small",icon:e().createElement(ut,null),type:r?"primary":"tertiary",theme:r?"solid":"borderless",onClick:()=>c("componentPanelVisible")}),!l&&e().createElement(s.Dropdown,{trigger:"click",position:"rightTop",render:e().createElement(s.Dropdown.Menu,null,e().createElement(s.Dropdown.Item,{onClick:()=>c("dataPanelVisible")},n?e().createElement(dt,null):e().createElement(Gl,null)," 数据面板"),e().createElement(s.Dropdown.Item,{onClick:()=>c("propPanelVisible")},i?e().createElement(dt,null):e().createElement(Gl,null)," 属性面板"),e().createElement(s.Dropdown.Item,{onClick:()=>c("outlinePanelVisible")},o?e().createElement(dt,null):e().createElement(Gl,null)," 导航列表"),e().createElement(s.Dropdown.Item,{onClick:()=>c("pagesPanelVisible")},a?e().createElement(dt,null):e().createElement(Gl,null)," 应用页面列表"))},e().createElement(s.Button,{icon:e().createElement(ft,null),theme:"borderless",size:"small",type:"tertiary"})),!l&&e().createElement(s.Button,{icon:e().createElement(ht,null),theme:"borderless",size:"small",type:"tertiary"}),e().createElement(s.Button,{type:l?"primary":"tertiary",theme:l?"solid":"borderless",icon:l?e().createElement(lt,null):e().createElement(ct,null),size:"small",onClick:u}))};var Yl=n(7053),Hl={};Hl.styleTagTransform=Y(),Hl.setAttributes=W(),Hl.insert=B().bind(null,"head"),Hl.domAPI=I(),Hl.insertStyleElement=G(),U()(Yl.Z,Hl),Yl.Z&&Yl.Z.locals&&Yl.Z.locals;class Jl{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){let r=[];return this.decompose(0,t,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(e,this.length,r,1),tc.from(r,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){let n=[];return this.decompose(t,e,n,0),tc.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),r=new rc(this),i=new rc(t);for(let t=e,o=e;;){if(r.next(t),i.next(t),t=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(o+=r.value.length,r.done||o>=n)return!0}}iter(t=1){return new rc(this,t)}iterRange(t,e=this.length){return new ic(this,t,e)}iterLines(t,e){let n;if(null==t)n=this.iter();else{null==e&&(e=this.lines+1);let r=this.line(t).from;n=this.iterRange(r,Math.max(r,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new oc(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}static of(t){if(0==t.length)throw new RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new Kl(t):tc.from(Kl.split(t,[])):Jl.empty}}class Kl extends Jl{constructor(t,e=function(t){let e=-1;for(let n of t)e+=n.length+1;return e}(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((e?n:s)>=t)return new sc(r,s,n,o);r=s+1,n++}}decompose(t,e,n,r){let i=t<=0&&e>=this.length?this:new Kl(nc(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(1&r){let t=n.pop(),e=ec(i.text,t.text.slice(),0,i.length);if(e.length<=32)n.push(new Kl(e,t.length+i.length));else{let t=e.length>>1;n.push(new Kl(e.slice(0,t)),new Kl(e.slice(t)))}}else n.push(i)}replace(t,e,n){if(!(n instanceof Kl))return super.replace(t,e,n);let r=ec(this.text,ec(n.text,nc(this.text,0,t)),e),i=this.length+n.length-(e-t);return r.length<=32?new Kl(r,i):tc.from(Kl.split(r,[]),i)}sliceString(t,e=this.length,n="\n"){let r="";for(let i=0,o=0;i<=e&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>t&&o&&(r+=n),t<a&&e>i&&(r+=s.slice(Math.max(0,t-i),e-i)),i=a+1}return r}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],r=-1;for(let i of t)n.push(i),r+=i.length+1,32==n.length&&(e.push(new Kl(n,r)),n=[],r=-1);return r>-1&&e.push(new Kl(n,r)),e}}class tc extends Jl{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let e of t)this.lines+=e.lines}lineInner(t,e,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((e?a:s)>=t)return o.lineInner(t,e,n,r);r=s+1,n=a+1}}decompose(t,e,n,r){for(let i=0,o=0;o<=e&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(t<=a&&e>=o){let i=r&((o<=t?1:0)|(a>=e?2:0));o>=t&&a<=e&&!i?n.push(s):s.decompose(t-o,e-o,n,i)}o=a+1}}replace(t,e,n){if(n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(t>=i&&e<=s){let a=o.replace(t-i,e-i,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new tc(i,this.length-(e-t)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n="\n"){let r="";for(let i=0,o=0;i<this.children.length&&o<=e;i++){let s=this.children[i],a=o+s.length;o>t&&i&&(r+=n),t<a&&e>o&&(r+=s.sliceString(t-o,e-o,n)),o=a+1}return r}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof tc))return 0;let n=0,[r,i,o,s]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;r+=e,i+=e){if(r==o||i==s)return n;let a=this.children[r],l=t.children[i];if(a!=l)return n+a.scanIdentical(l,e);n+=a.length+1}}static from(t,e=t.reduce(((t,e)=>t+e.length+1),-1)){let n=0;for(let e of t)n+=e.lines;if(n<32){let n=[];for(let e of t)e.flatten(n);return new Kl(n,e)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],a=0,l=-1,c=[];function u(t){let e;if(t.lines>i&&t instanceof tc)for(let e of t.children)u(e);else t.lines>o&&(a>o||!a)?(h(),s.push(t)):t instanceof Kl&&a&&(e=c[c.length-1])instanceof Kl&&t.lines+e.lines<=32?(a+=t.lines,l+=t.length+1,c[c.length-1]=new Kl(e.text.concat(t.text),e.length+1+t.length)):(a+t.lines>r&&h(),a+=t.lines,l+=t.length+1,c.push(t))}function h(){0!=a&&(s.push(1==c.length?c[0]:tc.from(c,l)),l=-1,a=c.length=0)}for(let e of t)u(e);return h(),1==s.length?s[0]:new tc(s,e)}}function ec(t,e,n=0,r=1e9){for(let i=0,o=0,s=!0;o<t.length&&i<=r;o++){let a=t[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(e[e.length-1]+=a,s=!1):e.push(a)),i=l+1}return e}function nc(t,e,n){return ec(t,[""],e,n)}Jl.empty=new Kl([""],0);class rc{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof Kl?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof Kl?r.text.length:r.children.length;if(o==(e>0?s:0)){if(0==n)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(e>0?0:1)){if(this.offsets[n]+=e,0==t)return this.lineBreak=!0,this.value="\n",this;t--}else if(r instanceof Kl){let i=r.text[o+(e<0?-1:0)];if(this.offsets[n]+=e,i.length>Math.max(0,t))return this.value=0==t?i:e>0?i.slice(t):i.slice(0,i.length-t),this;t-=i.length}else{let i=r.children[o+(e<0?-1:0)];t>i.length?(t-=i.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(e>0?1:(i instanceof Kl?i.text.length:i.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class ic{constructor(t,e,n){this.value="",this.done=!1,this.cursor=new rc(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:r}=this.cursor.next(t);return this.pos+=(r.length+t)*e,this.value=r.length<=n?r:e<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class oc{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:n,value:r}=this.inner.next(t);return e?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Jl.prototype[Symbol.iterator]=function(){return this.iter()},rc.prototype[Symbol.iterator]=ic.prototype[Symbol.iterator]=oc.prototype[Symbol.iterator]=function(){return this});class sc{constructor(t,e,n,r){this.from=t,this.to=e,this.number=n,this.text=r}get length(){return this.to-this.from}}let ac="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t=>t?parseInt(t,36):1));for(let t=1;t<ac.length;t++)ac[t]+=ac[t-1];function lc(t){for(let e=1;e<ac.length;e+=2)if(ac[e]>t)return ac[e-1]<=t;return!1}function cc(t){return t>=127462&&t<=127487}function uc(t,e,n=!0,r=!0){return(n?hc:fc)(t,e,r)}function hc(t,e,n){if(e==t.length)return e;e&&dc(t.charCodeAt(e))&&pc(t.charCodeAt(e-1))&&e--;let r=gc(t,e);for(e+=Oc(r);e<t.length;){let i=gc(t,e);if(8205==r||8205==i||n&&lc(i))e+=Oc(i),r=i;else{if(!cc(i))break;{let n=0,r=e-2;for(;r>=0&&cc(gc(t,r));)n++,r-=2;if(n%2==0)break;e+=2}}}return e}function fc(t,e,n){for(;e>0;){let r=hc(t,e-2,n);if(r<e)return r;e--}return 0}function dc(t){return t>=56320&&t<57344}function pc(t){return t>=55296&&t<56320}function gc(t,e){let n=t.charCodeAt(e);if(!pc(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return dc(r)?r-56320+(n-55296<<10)+65536:n}function mc(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Oc(t){return t<65536?1:2}const vc=/\r\n?|\n/;var bc=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(bc||(bc={}));class yc{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,r=0;e<this.sections.length;){let i=this.sections[e++],o=this.sections[e++];o<0?(t(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(t,e=!1){kc(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],r=this.sections[e++];r<0?t.push(n,r):t.push(r,n)}return new yc(t)}composeDesc(t){return this.empty?t:t.empty?this:Qc(this,t)}mapDesc(t,e=!1){return t.empty?this:Cc(this,t,e)}mapPos(t,e=-1,n=bc.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>t)return i+(t-r);i+=s}else{if(n!=bc.Simple&&l>=t&&(n==bc.TrackDel&&r<t&&l>t||n==bc.TrackBefore&&r<t||n==bc.TrackAfter&&l>t))return null;if(l>t||l==t&&e<0&&!s)return t==r||e<0?i:i+a;i+=a}r=l}if(t>r)throw new RangeError(`Position ${t} is out of range for changeset of length ${r}`);return i}touchesRange(t,e=t){for(let n=0,r=0;n<this.sections.length&&r<=e;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=e&&i>=t)return!(r<t&&i>e)||"cover";r=i}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],r=this.sections[e++];t+=(t?" ":"")+n+(r>=0?":"+r:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some((t=>"number"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new yc(t)}static create(t){return new yc(t)}}class wc extends yc{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return kc(this,((e,n,r,i,o)=>t=t.replace(r,r+(n-e),o)),!1),t}mapDesc(t,e=!1){return Cc(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let r=0,i=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s>=0){e[r]=s,e[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(Jl.empty);n.push(o?t.slice(i,i+o):Jl.empty)}i+=o}return new wc(e,n)}compose(t){return this.empty?t:t.empty?this:Qc(this,t,!0)}map(t,e=!1){return t.empty?this:Cc(this,t,e,!0)}iterChanges(t,e=!1){kc(this,t,e)}get desc(){return yc.create(this.sections)}filter(t){let e=[],n=[],r=[],i=new _c(this);t:for(let o=0,s=0;;){let a=o==t.length?1e9:t[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break t;let t=Math.min(i.len,a-s);xc(r,t,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;xc(e,t,o),o>0&&Sc(n,e,i.text),i.forward(t),s+=t}let l=t[o++];for(;s<l;){if(i.done)break t;let t=Math.min(i.len,l-s);xc(e,t,-1),xc(r,t,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(t),s+=t}}return{changes:new wc(e,n),filtered:yc.create(r)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],r=this.sections[e+1];r<0?t.push(n):0==r?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let r=[],i=[],o=0,s=null;function a(t=!1){if(!t&&!r.length)return;o<e&&xc(r,e-o,-1);let n=new wc(r,i);s=s?s.compose(n.map(s)):n,r=[],i=[],o=0}return function t(l){if(Array.isArray(l))for(let e of l)t(e);else if(l instanceof wc){if(l.length!=e)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${e})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:t,to:s=t,insert:c}=l;if(t>s||t<0||s>e)throw new RangeError(`Invalid change range ${t} to ${s} (in doc of length ${e})`);let u=c?"string"==typeof c?Jl.of(c.split(n||vc)):c:Jl.empty,h=u.length;if(t==s&&0==h)return;t<o&&a(),t>o&&xc(r,t-o,-1),xc(r,s-t,h),Sc(i,r,u),o=s}}(t),a(!s),s}static empty(t){return new wc(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let r=0;r<t.length;r++){let i=t[r];if("number"==typeof i)e.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((t,e)=>e&&"string"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)e.push(i[0],0);else{for(;n.length<r;)n.push(Jl.empty);n[r]=Jl.of(i.slice(1)),e.push(i[0],n[r].length)}}}return new wc(e,n)}static createSet(t,e){return new wc(t,e)}}function xc(t,e,n,r=!1){if(0==e&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:0==e&&0==t[i]?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Sc(t,e,n){if(0==n.length)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Jl.empty);t.push(n)}}function kc(t,e,n){let r=t.inserted;for(let i=0,o=0,s=0;s<t.sections.length;){let a=t.sections[s++],l=t.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,u=o,h=Jl.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[s-2>>1])),!(n||s==t.sections.length||t.sections[s+1]<0);)a=t.sections[s++],l=t.sections[s++];e(i,c,o,u,h),i=c,o=u}}}function Cc(t,e,n,r=!1){let i=[],o=r?[]:null,s=new _c(t),a=new _c(e);for(let t=-1;;)if(-1==s.ins&&-1==a.ins){let t=Math.min(s.len,a.len);xc(i,t,-1),s.forward(t),a.forward(t)}else if(a.ins>=0&&(s.ins<0||t==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!n))){let e=a.len;for(xc(i,a.ins,-1);e;){let n=Math.min(s.len,e);s.ins>=0&&t<s.i&&s.len<=n&&(xc(i,0,s.ins),o&&Sc(o,i,s.text),t=s.i),s.forward(n),e-=n}a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?wc.createSet(i,o):yc.create(i);throw new Error("Mismatched change set lengths")}{let e=0,n=s.len;for(;n;)if(-1==a.ins){let t=Math.min(n,a.len);e+=t,n-=t,a.forward(t)}else{if(!(0==a.ins&&a.len<n))break;n-=a.len,a.next()}xc(i,e,t<s.i?s.ins:0),o&&t<s.i&&Sc(o,i,s.text),t=s.i,s.forward(s.len-n)}}}function Qc(t,e,n=!1){let r=[],i=n?[]:null,o=new _c(t),s=new _c(e);for(let t=!1;;){if(o.done&&s.done)return i?wc.createSet(r,i):yc.create(r);if(0==o.ins)xc(r,o.len,0,t),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let e=Math.min(o.len2,s.len),n=r.length;if(-1==o.ins){let n=-1==s.ins?-1:s.off?0:s.ins;xc(r,e,n,t),i&&n&&Sc(i,r,s.text)}else-1==s.ins?(xc(r,o.off?0:o.len,e,t),i&&Sc(i,r,o.textBit(e))):(xc(r,o.off?0:o.len,s.off?0:s.ins,t),i&&!s.off&&Sc(i,r,s.text));t=(o.ins>e||s.ins>=0&&s.len>e)&&(t||r.length>n),o.forward2(e),s.forward(e)}}else xc(r,0,s.ins,t),i&&Sc(i,r,s.text),s.next()}}class _c{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?Jl.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?Jl.empty:e[n].slice(this.off,null==t?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class Pc{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let t=3&this.flags;return 3==t?null:t}get goalColumn(){let t=this.flags>>5;return 33554431==t?void 0:t}map(t,e=-1){let n,r;return this.empty?n=r=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new Pc(n,r,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return Ec.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return Ec.range(this.anchor,n)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Ec.range(t.anchor,t.head)}static create(t,e,n){return new Pc(t,e,n)}}class Ec{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:Ec.create(this.ranges.map((n=>n.map(t,e))),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Ec([this.main],0)}addRange(t,e=!0){return Ec.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,Ec.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((t=>t.toJSON())),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ec(t.ranges.map((t=>Pc.fromJSON(t))),t.main)}static single(t,e=t){return new Ec([Ec.range(t,e)],0)}static create(t,e=0){if(0==t.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<t.length;r++){let i=t[r];if(i.empty?i.from<=n:i.from<n)return Ec.normalized(t.slice(),e);n=i.to}return new Ec(t,e)}static cursor(t,e=0,n,r){return Pc.create(t,t,(0==e?0:e<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}static range(t,e,n){let r=(null!=n?n:33554431)<<5;return e<t?Pc.create(e,t,24|r):Pc.create(t,e,r|(e>t?4:0))}static normalized(t,e=0){let n=t[e];t.sort(((t,e)=>t.from-e.from)),e=t.indexOf(n);for(let n=1;n<t.length;n++){let r=t[n],i=t[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let o=i.from,s=Math.max(r.to,i.to);n<=e&&e--,t.splice(--n,2,r.anchor>r.head?Ec.range(s,o):Ec.range(o,s))}}return new Ec(t,e)}}function Tc(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let $c=0;class Rc{constructor(t,e,n,r,i){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=r,this.id=$c++,this.default=t([]),this.extensions="function"==typeof i?i(this):i}static define(t={}){return new Rc(t.combine||(t=>t),t.compareInput||((t,e)=>t===e),t.compare||(t.combine?(t,e)=>t===e:Mc),!!t.static,t.enables)}of(t){return new Ac([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ac(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Ac(t,this,2,e)}from(t,e){return e||(e=t=>t),this.compute([t],(n=>e(n.field(t))))}}function Mc(t,e){return t==e||t.length==e.length&&t.every(((t,n)=>t===e[n]))}class Ac{constructor(t,e,n,r){this.dependencies=t,this.facet=e,this.type=n,this.value=r,this.id=$c++}dynamicSlot(t){var e;let n=this.value,r=this.facet.compareInput,i=this.id,o=t[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:0==(1&(null!==(e=t[n.id])&&void 0!==e?e:1))&&c.push(t[n.id]);return{create:t=>(t.values[o]=n(t),1),update(t,e){if(a&&e.docChanged||l&&(e.docChanged||e.selection)||jc(t,c)){let e=n(t);if(s?!Dc(e,t.values[o],r):!r(e,t.values[o]))return t.values[o]=e,1}return 0},reconfigure:(t,e)=>{let a,l=e.config.address[i];if(null!=l){let i=Lc(e,l);if(this.dependencies.every((n=>n instanceof Rc?e.facet(n)===t.facet(n):!(n instanceof Vc)||e.field(n,!1)==t.field(n,!1)))||(s?Dc(a=n(t),i,r):r(a=n(t),i)))return t.values[o]=i,0}else a=n(t);return t.values[o]=a,1}}}}function Dc(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function jc(t,e){let n=!1;for(let r of e)1&Wc(t,r)&&(n=!0);return n}function qc(t,e,n){let r=n.map((e=>t[e.id])),i=n.map((t=>t.type)),o=r.filter((t=>!(1&t))),s=t[e.id]>>1;function a(t){let n=[];for(let e=0;e<r.length;e++){let o=Lc(t,r[e]);if(2==i[e])for(let t of o)n.push(t);else n.push(o)}return e.combine(n)}return{create(t){for(let e of r)Wc(t,e);return t.values[s]=a(t),1},update(t,n){if(!jc(t,o))return 0;let r=a(t);return e.compare(r,t.values[s])?0:(t.values[s]=r,1)},reconfigure(t,i){let o=jc(t,r),l=i.config.facets[e.id],c=i.facet(e);if(l&&!o&&Mc(n,l))return t.values[s]=c,0;let u=a(t);return e.compare(u,c)?(t.values[s]=c,0):(t.values[s]=u,1)}}}const Xc=Rc.define({static:!0});class Vc{constructor(t,e,n,r,i){this.id=t,this.createF=e,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(t){let e=new Vc($c++,t.create,t.update,t.compare||((t,e)=>t===e),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(Xc).find((t=>t.field==this));return((null==e?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:t=>(t.values[e]=this.create(t),1),update:(t,n)=>{let r=t.values[e],i=this.updateF(r,n);return this.compareF(r,i)?0:(t.values[e]=i,1)},reconfigure:(t,n)=>null!=n.config.address[this.id]?(t.values[e]=n.field(this),0):(t.values[e]=this.create(t),1)}}init(t){return[this,Xc.of({field:this,create:t})]}get extension(){return this}}function Uc(t){return e=>new Ic(e,t)}const Zc={highest:Uc(0),high:Uc(1),default:Uc(2),low:Uc(3),lowest:Uc(4)};class Ic{constructor(t,e){this.inner=t,this.prec=e}}class Nc{of(t){return new Bc(this,t)}reconfigure(t){return Nc.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class Bc{constructor(t,e){this.compartment=t,this.inner=e}}class zc{constructor(t,e,n,r,i,o){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let r=[],i=Object.create(null),o=new Map;for(let n of function(t,e,n){let r=[[],[],[],[],[]],i=new Map;return function t(o,s){let a=i.get(o);if(null!=a){if(a<=s)return;let t=r[a].indexOf(o);t>-1&&r[a].splice(t,1),o instanceof Bc&&n.delete(o.compartment)}if(i.set(o,s),Array.isArray(o))for(let e of o)t(e,s);else if(o instanceof Bc){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=e.get(o.compartment)||o.inner;n.set(o.compartment,r),t(r,s)}else if(o instanceof Ic)t(o.inner,o.prec);else if(o instanceof Vc)r[s].push(o),o.provides&&t(o.provides,s);else if(o instanceof Ac)r[s].push(o),o.facet.extensions&&t(o.facet.extensions,2);else{let e=o.extension;if(!e)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);t(e,s)}}(t,2),r.reduce(((t,e)=>t.concat(e)))}(t,e,o))n instanceof Vc?r.push(n):(i[n.facet.id]||(i[n.facet.id]=[])).push(n);let s=Object.create(null),a=[],l=[];for(let t of r)s[t.id]=l.length<<1,l.push((e=>t.slot(e)));let c=null==n?void 0:n.config.facets;for(let t in i){let e=i[t],r=e[0].facet,o=c&&c[t]||[];if(e.every((t=>0==t.type)))if(s[r.id]=a.length<<1|1,Mc(o,e))a.push(n.facet(r));else{let t=r.combine(e.map((t=>t.value)));a.push(n&&r.compare(t,n.facet(r))?n.facet(r):t)}else{for(let t of e)0==t.type?(s[t.id]=a.length<<1|1,a.push(t.value)):(s[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));s[r.id]=l.length<<1,l.push((t=>qc(t,r,e)))}}let u=l.map((t=>t(s)));return new zc(t,o,u,s,a,i)}}function Wc(t,e){if(1&e)return 2;let n=e>>1,r=t.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function Lc(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}const Gc=Rc.define(),Fc=Rc.define({combine:t=>t.some((t=>t)),static:!0}),Yc=Rc.define({combine:t=>t.length?t[0]:void 0,static:!0}),Hc=Rc.define(),Jc=Rc.define(),Kc=Rc.define(),tu=Rc.define({combine:t=>!!t.length&&t[0]});class eu{constructor(t,e){this.type=t,this.value=e}static define(){return new nu}}class nu{of(t){return new eu(this,t)}}class ru{constructor(t){this.map=t}of(t){return new iu(this,t)}}class iu{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return void 0===e?void 0:e==this.value?this:new iu(this.type,e)}is(t){return this.type==t}static define(t={}){return new ru(t.map||(t=>t))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let r of t){let t=r.map(e);t&&n.push(t)}return n}}iu.reconfigure=iu.define(),iu.appendConfig=iu.define();class ou{constructor(t,e,n,r,i,o){this.startState=t,this.changes=e,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&Tc(n,e.newLength),i.some((t=>t.type==ou.time))||(this.annotations=i.concat(ou.time.of(Date.now())))}static create(t,e,n,r,i,o){return new ou(t,e,n,r,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(ou.userEvent);return!(!e||!(e==t||e.length>t.length&&e.slice(0,t.length)==t&&"."==e[t.length]))}}function su(t,e){let n=[];for(let r=0,i=0;;){let o,s;if(r<t.length&&(i==e.length||e[i]>=t[r]))o=t[r++],s=t[r++];else{if(!(i<e.length))return n;o=e[i++],s=e[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function au(t,e,n){var r;let i,o,s;return n?(i=e.changes,o=wc.empty(e.changes.length),s=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),s=t.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(o):null===(r=t.selection)||void 0===r?void 0:r.map(i),effects:iu.mapEffects(t.effects,i).concat(iu.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function lu(t,e,n){let r=e.selection,i=hu(e.annotations);return e.userEvent&&(i=i.concat(ou.userEvent.of(e.userEvent))),{changes:e.changes instanceof wc?e.changes:wc.of(e.changes||[],n,t.facet(Yc)),selection:r&&(r instanceof Ec?r:Ec.single(r.anchor,r.head)),effects:hu(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function cu(t,e,n){let r=lu(t,e.length?e[0]:{},t.doc.length);e.length&&!1===e[0].filter&&(n=!1);for(let i=1;i<e.length;i++){!1===e[i].filter&&(n=!1);let o=!!e[i].sequential;r=au(r,lu(t,e[i],o?r.changes.newLength:t.doc.length),o)}let i=ou.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(t){let e=t.startState,n=e.facet(Kc),r=t;for(let i=n.length-1;i>=0;i--){let o=n[i](t);o&&Object.keys(o).length&&(r=au(r,lu(e,o,t.changes.newLength),!0))}return r==t?t:ou.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(t){let e=t.startState,n=!0;for(let r of e.facet(Hc)){let e=r(t);if(!1===e){n=!1;break}Array.isArray(e)&&(n=!0===n?e:su(n,e))}if(!0!==n){let r,i;if(!1===n)i=t.changes.invertedDesc,r=wc.empty(e.doc.length);else{let e=t.changes.filter(n);r=e.changes,i=e.filtered.mapDesc(e.changes).invertedDesc}t=ou.create(e,r,t.selection&&t.selection.map(i),iu.mapEffects(t.effects,i),t.annotations,t.scrollIntoView)}let r=e.facet(Jc);for(let n=r.length-1;n>=0;n--){let i=r[n](t);t=i instanceof ou?i:Array.isArray(i)&&1==i.length&&i[0]instanceof ou?i[0]:cu(e,hu(i),!1)}return t}(i):i)}ou.time=eu.define(),ou.userEvent=eu.define(),ou.addToHistory=eu.define(),ou.remote=eu.define();const uu=[];function hu(t){return null==t?uu:Array.isArray(t)?t:[t]}var fu=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(fu||(fu={}));const du=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let pu;try{pu=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(t){}class gu{constructor(t,e,n,r,i,o){this.config=t,this.doc=e,this.selection=n,this.values=r,this.status=t.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let t=0;t<this.config.dynamicSlots.length;t++)Wc(this,t<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(null!=n)return Wc(this,n),Lc(this,n);if(e)throw new RangeError("Field is not present in this state")}update(...t){return cu(this,t,!0)}applyTransaction(t){let e,n=this.config,{base:r,compartments:i}=n;for(let e of t.effects)e.is(Nc.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((t,e)=>i.set(e,t))),n=null),i.set(e.value.compartment,e.value.extension)):e.is(iu.reconfigure)?(n=null,r=e.value):e.is(iu.appendConfig)&&(n=null,r=hu(r).concat(e.value));n?e=t.startState.values.slice():(n=zc.resolve(r,i,this),e=new gu(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((t,e)=>e.reconfigure(t,this)),null).values),new gu(n,t.newDoc,t.newSelection,e,((e,n)=>n.update(e,t)),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:t},range:Ec.cursor(e.from+t.length)})))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),r=this.changes(n.changes),i=[n.range],o=hu(n.effects);for(let n=1;n<e.ranges.length;n++){let s=t(e.ranges[n]),a=this.changes(s.changes),l=a.map(r);for(let t=0;t<n;t++)i[t]=i[t].map(l);let c=r.mapDesc(a,!0);i.push(s.range.map(c)),r=r.compose(l),o=iu.mapEffects(o,l).concat(iu.mapEffects(hu(s.effects),c))}return{changes:r,selection:Ec.create(i,e.mainIndex),effects:o}}changes(t=[]){return t instanceof wc?t:wc.of(t,this.doc.length,this.facet(gu.lineSeparator))}toText(t){return Jl.of(t.split(this.facet(gu.lineSeparator)||vc))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return null==e?t.default:(Wc(this,e),Lc(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let r=t[n];r instanceof Vc&&null!=this.config.address[r.id]&&(e[n]=r.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let e in n)if(Object.prototype.hasOwnProperty.call(t,e)){let i=n[e],o=t[e];r.push(i.init((t=>i.spec.fromJSON(o,t))))}return gu.create({doc:t.doc,selection:Ec.fromJSON(t.selection),extensions:e.extensions?r.concat([e.extensions]):r})}static create(t={}){let e=zc.resolve(t.extensions||[],new Map),n=t.doc instanceof Jl?t.doc:Jl.of((t.doc||"").split(e.staticFacet(gu.lineSeparator)||vc)),r=t.selection?t.selection instanceof Ec?t.selection:Ec.single(t.selection.anchor,t.selection.head):Ec.single(0);return Tc(r,n.length),e.staticFacet(Fc)||(r=r.asSingle()),new gu(e,n,r,e.dynamicSlots.map((()=>null)),((t,e)=>e.create(t)),null)}get tabSize(){return this.facet(gu.tabSize)}get lineBreak(){return this.facet(gu.lineSeparator)||"\n"}get readOnly(){return this.facet(tu)}phrase(t,...e){for(let e of this.facet(gu.phrases))if(Object.prototype.hasOwnProperty.call(e,t)){t=e[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,((t,n)=>{if("$"==n)return"$";let r=+(n||1);return!r||r>e.length?t:e[r-1]}))),t}languageDataAt(t,e,n=-1){let r=[];for(let i of this.facet(Gc))for(let o of i(this,e,n))Object.prototype.hasOwnProperty.call(o,t)&&r.push(o[t]);return r}charCategorizer(t){return e=this.languageDataAt("wordChars",t).join(""),t=>{if(!/\S/.test(t))return fu.Space;if(function(t){if(pu)return pu.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||du.test(n)))return!0}return!1}(t))return fu.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return fu.Word;return fu.Other};var e}wordAt(t){let{text:e,from:n,length:r}=this.doc.lineAt(t),i=this.charCategorizer(t),o=t-n,s=t-n;for(;o>0;){let t=uc(e,o,!1);if(i(e.slice(t,o))!=fu.Word)break;o=t}for(;s<r;){let t=uc(e,s);if(i(e.slice(s,t))!=fu.Word)break;s=t}return o==s?null:Ec.range(o+n,s+n)}}function mu(t,e,n={}){let r={};for(let e of t)for(let t of Object.keys(e)){let i=e[t],o=r[t];if(void 0===o)r[t]=i;else if(o===i||void 0===i);else{if(!Object.hasOwnProperty.call(n,t))throw new Error("Config merge conflict for field "+t);r[t]=n[t](o,i)}}for(let t in e)void 0===r[t]&&(r[t]=e[t]);return r}gu.allowMultipleSelections=Fc,gu.tabSize=Rc.define({combine:t=>t.length?t[0]:4}),gu.lineSeparator=Yc,gu.readOnly=tu,gu.phrases=Rc.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every((n=>t[n]==e[n]))}}),gu.languageData=Gc,gu.changeFilter=Hc,gu.transactionFilter=Jc,gu.transactionExtender=Kc,Nc.reconfigure=iu.define();class Ou{eq(t){return this==t}range(t,e=t){return vu.create(t,e,this)}}Ou.prototype.startSide=Ou.prototype.endSide=0,Ou.prototype.point=!1,Ou.prototype.mapMode=bc.TrackDel;class vu{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new vu(t,e,n)}}function bu(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class yu{constructor(t,e,n,r){this.from=t,this.to=e,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,r=0){let i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-t||(n?this.value[r].endSide:this.value[r].startSide)-e;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(t,e,n,r){for(let i=this.findIndex(e,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+t,this.to[i]+t,this.value[i]))return!1}map(t,e){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],h=this.from[a]+t,f=this.to[a]+t;if(h==f){let t=e.mapPos(h,u.startSide,u.mapMode);if(null==t)continue;if(l=c=t,u.startSide!=u.endSide&&(c=e.mapPos(h,u.endSide),c<l))continue}else if(l=e.mapPos(h,u.startSide),c=e.mapPos(f,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(o<0&&(o=l),u.point&&(s=Math.max(s,c-l)),n.push(u),r.push(l-o),i.push(c-o))}return{mapped:n.length?new yu(r,i,n,s):null,pos:o}}}class wu{constructor(t,e,n,r){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=r}static create(t,e,n,r){return new wu(t,e,n,r)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=t,o=t.filter;if(0==e.length&&!o)return this;if(n&&(e=e.slice().sort(bu)),this.isEmpty)return e.length?wu.of(e):this;let s=new ku(this,null,-1).goto(0),a=0,l=[],c=new xu;for(;s.value||a<e.length;)if(a<e.length&&(s.from-e[a].from||s.startSide-e[a].value.startSide)>=0){let t=e[a++];c.addInner(t.from,t.to,t.value)||l.push(t)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==e.length||this.chunkEnd(s.chunkIndex)<e[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(vu.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?wu.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],r=-1;for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i],a=t.touchesRange(o,o+s.length);if(!1===a)r=Math.max(r,s.maxPoint),e.push(s),n.push(t.mapPos(o));else if(!0===a){let{mapped:i,pos:a}=s.map(o,t);i&&(r=Math.max(r,i.maxPoint),e.push(i),n.push(a))}}let i=this.nextLayer.map(t);return 0==e.length?i:new wu(n,e,i||wu.empty,r)}between(t,e,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(e>=i&&t<=i+o.length&&!1===o.between(i,t-i,e-i,n))return}this.nextLayer.between(t,e,n)}}iter(t=0){return Cu.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Cu.from(t).goto(e)}static compare(t,e,n,r,i=-1){let o=t.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=i)),s=e.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=i)),a=Su(o,s,n),l=new _u(o,a,i),c=new _u(s,a,i);n.iterGaps(((t,e,n)=>Pu(l,t,c,e,n,r))),n.empty&&0==n.length&&Pu(l,0,c,0,0,r)}static eq(t,e,n=0,r){null==r&&(r=999999999);let i=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0)),o=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=Su(i,o),a=new _u(i,s,0).goto(n),l=new _u(o,s,0).goto(n);for(;;){if(a.to!=l.to||!Eu(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(t,e,n,r,i=-1){let o=new _u(t,null,i).goto(e),s=e,a=o.openStart;for(;;){let t=Math.min(o.to,n);if(o.point){let n=o.activeForPoint(o.to),i=o.pointFrom<e?n.length+1:Math.min(n.length,a);r.point(s,t,o.point,n,i,o.pointRank),a=Math.min(o.openEnd(t),n.length)}else t>s&&(r.span(s,t,o.active,a),a=o.openEnd(t));if(o.to>n)return a+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(t,e=!1){let n=new xu;for(let r of t instanceof vu?[t]:e?function(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(bu(e,r)>0)return t.slice().sort(bu);e=r}return t}(t):t)n.add(r.from,r.to,r.value);return n.finish()}}wu.empty=new wu([],[],null,-1),wu.empty.nextLayer=wu.empty;class xu{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new yu(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new xu)).add(t,e,n)}addInner(t,e,n){let r=t-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),0))}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(wu.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;let e=wu.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function Su(t,e,n){let r=new Map;for(let e of t)for(let t=0;t<e.chunk.length;t++)e.chunk[t].maxPoint<=0&&r.set(e.chunk[t],e.chunkPos[t]);let i=new Set;for(let t of e)for(let e=0;e<t.chunk.length;e++){let o=r.get(t.chunk[e]);null==o||(n?n.mapPos(o):o)!=t.chunkPos[e]||(null==n?void 0:n.touchesRange(o,o+t.chunk[e].length))||i.add(t.chunk[e])}return i}class ku{constructor(t,e,n,r=0){this.layer=t,this.skip=e,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){let e=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(e)||this.layer.chunkEnd(this.chunkIndex)<t||e.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Cu{constructor(t){this.heap=t}static from(t,e=null,n=-1){let r=[];for(let i=0;i<t.length;i++)for(let o=t[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new ku(o,e,n,i));return 1==r.length?r[0]:new Cu(r)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let t=this.heap.length>>1;t>=0;t--)Qu(this.heap,t);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let t=this.heap.length>>1;t>=0;t--)Qu(this.heap,t);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),Qu(this.heap,0)}}}function Qu(t,e){for(let n=t[e];;){let r=1+(e<<1);if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class _u{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Cu.from(t,e,n)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Tu(this.active,t),Tu(this.activeTo,t),Tu(this.activeRank,t),this.minActive=Ru(this.active,this.activeTo)}addActive(t){let e=0,{value:n,to:r,rank:i}=this.cursor;for(;e<this.activeRank.length&&this.activeRank[e]<=i;)e++;$u(this.active,e,n),$u(this.activeTo,e,r),$u(this.activeRank,e,i),t&&$u(t,e,this.cursor.from),this.minActive=Ru(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>t){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&Tu(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let t=this.cursor.value;if(t.point){if(!(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=t,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=t.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let e=n.length-1;e>=0&&n[e]<t;e--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()}openEnd(t){let e=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}}function Pu(t,e,n,r,i,o){t.goto(e),n.goto(r);let s=r+i,a=r,l=r-e;for(;;){let e=t.to+l-n.to||t.endSide-n.endSide,r=e<0?t.to+l:n.to,i=Math.min(r,s);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Eu(t.activeForPoint(t.to+l),n.activeForPoint(n.to))||o.comparePoint(a,i,t.point,n.point):i>a&&!Eu(t.active,n.active)&&o.compareRange(a,i,t.active,n.active),r>s)break;a=r,e<=0&&t.next(),e>=0&&n.next()}}function Eu(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Tu(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function $u(t,e,n){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=n}function Ru(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Mu(t,e,n=t.length){let r=0;for(let i=0;i<n;)9==t.charCodeAt(i)?(r+=e-r%e,i++):(r++,i=uc(t,i));return r}function Au(t,e,n,r){for(let r=0,i=0;;){if(i>=e)return r;if(r==t.length)break;i+=9==t.charCodeAt(r)?n-i%n:1,r=uc(t,r)}return!0===r?-1:t.length}const Du="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),ju="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),qu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Xu{constructor(t,e){this.rules=[];let{finish:n}=e||{};function r(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function i(t,e,o,s){let a=[],l=/^@(\w+)\b/.exec(t[0]),c=l&&"keyframes"==l[1];if(l&&null==e)return o.push(t[0]+";");for(let n in e){let s=e[n];if(/&/.test(n))i(n.split(/,\s*/).map((e=>t.map((t=>e.replace(/&/,t))))).reduce(((t,e)=>t.concat(e))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?t:t.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let e in t)i(r(e),t[e],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let t=qu[Du]||1;return qu[Du]=t+1,"ͼ"+t.toString(36)}static mount(t,e){(t[ju]||new Uu(t)).mount(Array.isArray(e)?e:[e])}}let Vu=null;class Uu{constructor(t){if(!t.head&&t.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Vu)return t.adoptedStyleSheets=[Vu.sheet].concat(t.adoptedStyleSheets),t[ju]=Vu;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),Vu=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let e=t.head||t;e.insertBefore(this.styleTag,e.firstChild)}this.modules=[],t[ju]=this}mount(t){let e=this.sheet,n=0,r=0;for(let i=0;i<t.length;i++){let o=t[i],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),e)for(let t=0;t<o.rules.length;t++)e.insertRule(o.rules[t],n++)}else{for(;r<s;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!e){let t="";for(let e=0;e<this.modules.length;e++)t+=this.modules[e].getRules()+"\n";this.styleTag.textContent=t}}}for(var Zu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Iu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Nu="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Bu=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),zu="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Wu=Bu||Nu&&+Nu[1]<57,Lu=0;Lu<10;Lu++)Zu[48+Lu]=Zu[96+Lu]=String(Lu);for(Lu=1;Lu<=24;Lu++)Zu[Lu+111]="F"+Lu;for(Lu=65;Lu<=90;Lu++)Zu[Lu]=String.fromCharCode(Lu+32),Iu[Lu]=String.fromCharCode(Lu);for(var Gu in Zu)Iu.hasOwnProperty(Gu)||(Iu[Gu]=Zu[Gu]);function Fu(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function Yu(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function Hu(t,e){if(!e.anchorNode)return!1;try{return Yu(t,e.anchorNode)}catch(t){return!1}}function Ju(t){return 3==t.nodeType?uh(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function Ku(t,e,n,r){return!!n&&(eh(t,e,n,r,-1)||eh(t,e,n,r,1))}function th(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function eh(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:nh(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=th(t)+(i<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(i<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=i<0?nh(t):0}}}function nh(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}const rh={left:0,right:0,top:0,bottom:0};function ih(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function oh(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}class sh{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}set(t,e,n,r){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=r}}let ah,lh=null;function ch(t){if(t.setActive)return t.setActive();if(lh)return t.focus(lh);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==lh?{get preventScroll(){return lh={preventScroll:!0},!0}}:void 0),!lh){lh=!1;for(let t=0;t<e.length;){let n=e[t++],r=e[t++],i=e[t++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function uh(t,e,n=e){let r=ah||(ah=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function hh(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function fh(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}class dh{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new dh(t.parentNode,th(t),e)}static after(t,e){return new dh(t.parentNode,th(t)+1,e)}}const ph=[];class gh{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,e){return null}sync(t){if(2&this.dirty){let e,n=this.dom,r=null;for(let i of this.children){if(i.dirty){if(!i.dom&&(e=r?r.nextSibling:n.firstChild)){let t=gh.get(e);(!t||!t.parent&&t.canReuseDOM(i))&&i.reuseDOM(e)}i.sync(t),i.dirty=0}if(e=r?r.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&e!=i.dom&&(t.written=!0),i.dom.parentNode==n)for(;e&&e!=i.dom;)e=mh(e);else n.insertBefore(i.dom,e);r=i.dom}for(e=r?r.nextSibling:n.firstChild,e&&t&&t.node==n&&(t.written=!0);e;)e=mh(e)}else if(1&this.dirty)for(let e of this.children)e.dirty&&(e.sync(t),e.dirty=0)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let r=0==nh(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==r&&e.firstChild!=e.lastChild&&(r=t==e.firstChild?-1:1),t=e}n=r<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!gh.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let r=this.children[t];if(r.dom==n)return e;e+=r.length+r.breakAfter}}domBoundsAround(t,e,n=0){let r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<t&&u>e)return n.domBoundsAround(t,e,l);if(u>=t&&-1==r&&(r=a,i=l),l>e&&n.dom.parentNode==this.dom){o=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.dirty|=2),1&e.dirty)return;e.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=ph){this.markDirty();for(let n=t;n<e;n++){let t=this.children[n];t.parent==this&&t.destroy()}this.children.splice(t,e-t,...n);for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new Oh(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}merge(t,e,n,r,i,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function mh(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}gh.prototype.breakAfter=0;class Oh{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function vh(t,e,n,r,i,o,s,a,l){let{children:c}=t,u=c.length?c[e]:null,h=o.length?o[o.length-1]:null,f=h?h.breakAfter:s;if(!(e==r&&u&&!s&&!f&&o.length<2&&u.merge(n,i,o.length?h:null,0==n,a,l))){if(r<c.length){let t=c[r];t&&i<t.length?(e==r&&(t=t.split(i),i=0),!f&&h&&t.merge(0,i,h,!0,0,l)?o[o.length-1]=t:(i&&t.merge(0,i,null,!1,0,l),o.push(t))):(null==t?void 0:t.breakAfter)&&(h?h.breakAfter=1:s=1),r++}for(u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),e++));e<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!c[e].become(o[0]))break;e++,o.shift(),a=o.length?0:l}!o.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||o.length)&&t.replaceChildren(e,r,o)}}function bh(t,e,n,r,i,o){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(e,-1),h=e-n;for(let t of r)h+=t.length;t.length+=h,vh(t,c,u,a,l,r,0,i,o)}let yh="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},wh="undefined"!=typeof document?document:{documentElement:{style:{}}};const xh=/Edge\/(\d+)/.exec(yh.userAgent),Sh=/MSIE \d/.test(yh.userAgent),kh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(yh.userAgent),Ch=!!(Sh||kh||xh),Qh=!Ch&&/gecko\/(\d+)/i.test(yh.userAgent),_h=!Ch&&/Chrome\/(\d+)/.exec(yh.userAgent),Ph="webkitFontSmoothing"in wh.documentElement.style,Eh=!Ch&&/Apple Computer/.test(yh.vendor),Th=Eh&&(/Mobile\/\w+/.test(yh.userAgent)||yh.maxTouchPoints>2);var $h={mac:Th||/Mac/.test(yh.platform),windows:/Win/.test(yh.platform),linux:/Linux|X11/.test(yh.platform),ie:Ch,ie_version:Sh?wh.documentMode||6:kh?+kh[1]:xh?+xh[1]:0,gecko:Qh,gecko_version:Qh?+(/Firefox\/(\d+)/.exec(yh.userAgent)||[0,0])[1]:0,chrome:!!_h,chrome_version:_h?+_h[1]:0,ios:Th,android:/Android\b/.test(yh.userAgent),webkit:Ph,safari:Eh,webkit_version:Ph?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=wh.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Rh extends gh{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return(!n||n instanceof Rh&&!(this.length-(e-t)+n.length>256))&&(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new Rh(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new dh(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return Ah(this.dom,t,e)}}class Mh extends gh{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if(fh(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t)}merge(t,e,n,r,i,o){return!(n&&(!(n instanceof Mh&&n.mark.eq(this.mark))||t&&i<=0||e<this.length&&o<=0)||(bh(this,t,e,n?n.children:[],i-1,o-1),this.markDirty(),0))}split(t){let e=[],n=0,r=-1,i=0;for(let o of this.children){let s=n+o.length;s>t&&e.push(n<t?o.split(t-n):o),r<0&&n>=t&&(r=i),n=s,i++}let o=this.length-t;return this.length=t,r>-1&&(this.children.length=r,this.markDirty()),new Mh(this.mark,e,o)}domAtPos(t){return Uh(this,t)}coordsAt(t,e){return Ih(this,t,e)}}function Ah(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,o=e,s=0;0==e&&n<0||e==r&&n>=0?$h.chrome||$h.gecko||(e?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let a=uh(t,i,o).getClientRects();if(!a.length)return rh;let l=a[(s?s<0:n>=0)?0:a.length-1];return $h.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l),s?ih(l,s<0):l||null}class Dh extends gh{constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}static create(t,e,n){return new(t.customView||Dh)(t,e,n)}split(t){let e=Dh.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,e,n,r,i,o){return!(n&&(!(n instanceof Dh&&this.widget.compare(n.widget))||t>0&&i<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}become(t){return t.length==this.length&&t instanceof Dh&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.eq(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return Jl.empty;let t=this;for(;t.parent;)t=t.parent;let e=t.editorView,n=e&&e.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Jl.empty}domAtPos(t){return 0==t?dh.before(this.dom):dh.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.dom.getClientRects(),r=null;if(!n.length)return rh;for(let e=t>0?n.length-1:0;r=n[e],!(t>0?0==e:e==n.length-1||r.top<r.bottom);e+=t>0?-1:1);return this.length?r:ih(r,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class jh extends Dh{domAtPos(t){let{topView:e,text:n}=this.widget;return e?qh(t,0,e,n,((t,e)=>t.domAtPos(e)),(t=>new dh(n,Math.min(t,n.nodeValue.length)))):new dh(n,Math.min(t,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,e){let{topView:n,text:r}=this.widget;return n?Xh(t,e,n,r):Math.min(e,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,e){let{topView:n,text:r}=this.widget;return n?qh(t,e,n,r,((t,e,n)=>t.coordsAt(e,n)),((t,e)=>Ah(r,t,e))):Ah(r,t,e)}destroy(){var t;super.destroy(),null===(t=this.widget.topView)||void 0===t||t.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function qh(t,e,n,r,i,o){if(n instanceof Mh){for(let s=n.dom.firstChild;s;s=s.nextSibling){let n=gh.get(s);if(!n)return o(t,e);let a=Yu(s,r),l=n.length+(a?r.nodeValue.length:0);if(t<l||t==l&&n.getSide()<=0)return a?qh(t,e,n,r,i,o):i(n,t,e);t-=l}return i(n,n.length,-1)}return n.dom==r?o(t,e):i(n,t,e)}function Xh(t,e,n,r){if(n instanceof Mh)for(let i of n.children){let n=0,o=Yu(i.dom,r);if(Yu(i.dom,t))return n+(o?Xh(t,e,i,r):i.localPosFromDOM(t,e));n+=o?r.nodeValue.length:i.length}else if(n.dom==r)return Math.min(e,r.nodeValue.length);return n.localPosFromDOM(t,e)}class Vh extends gh{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof Vh&&t.side==this.side}split(){return new Vh(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return dh.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){let e=this.dom.getBoundingClientRect(),n=function(t,e){let n=t.parent,r=n?n.children.indexOf(t):-1;for(;n&&r>=0;)if(e<0?r>0:r<n.children.length){let t=n.children[r+e];if(t instanceof Rh){let n=t.coordsAt(e<0?t.length:0,e);if(n)return n}r+=e}else{if(!(n instanceof Mh&&n.parent)){let t=n.dom.lastChild;if(t&&"BR"==t.nodeName)return t.getClientRects()[0];break}r=n.parent.children.indexOf(n)+(e<0?0:1),n=n.parent}}(this,this.side>0?-1:1);return n&&n.top<e.bottom&&n.bottom>e.top?{left:e.left,right:e.right,top:n.top,bottom:n.bottom}:e}get overrideDOMText(){return Jl.empty}}function Uh(t,e){let n=t.dom,{children:r}=t,i=0;for(let t=0;i<r.length;i++){let o=r[i],s=t+o.length;if(!(s==t&&o.getSide()<=0)){if(e>t&&e<s&&o.dom.parentNode==n)return o.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=i;t>0;t--){let e=r[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=i;t<r.length;t++){let e=r[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new dh(n,0)}function Zh(t,e,n){let r,{children:i}=t;n>0&&e instanceof Mh&&i.length&&(r=i[i.length-1])instanceof Mh&&r.mark.eq(e.mark)?Zh(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function Ih(t,e,n){let r=null,i=-1,o=null,s=-1;!function t(e,n){for(let a=0,l=0;a<e.children.length&&l<=n;a++){let c=e.children[a],u=l+c.length;u>=n&&(c.children.length?t(c,n-l):!o&&(u>n||l==u&&c.getSide()>0)?(o=c,s=n-l):(l<n||l==u&&c.getSide()<0)&&(r=c,i=n-l)),l=u}}(t,e);let a=(n<0?r:o)||r||o;return a?a.coordsAt(Math.max(0,a==r?i:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Ju(e);return n[n.length-1]||null}(t)}function Nh(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}function Bh(t,e){if(t==e)return!0;if(!t||!e)return!1;let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i of n)if(-1==r.indexOf(i)||t[i]!==e[i])return!1;return!0}function zh(t,e,n){let r=null;if(e)for(let i in e)n&&i in n||t.removeAttribute(r=i);if(n)for(let i in n)e&&e[i]==n[i]||t.setAttribute(r=i,n[i]);return!!r}Rh.prototype.children=Dh.prototype.children=Vh.prototype.children=ph;class Wh{eq(t){return!1}updateDOM(t){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}destroy(t){}}var Lh=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Lh||(Lh={}));class Gh extends Ou{constructor(t,e,n,r){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(t){return new Fh(t)}static widget(t){let e=t.side||0,n=!!t.block;return e+=n?e>0?3e8:-4e8:e>0?1e8:-1e8,new Hh(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,r=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:i,end:o}=Jh(t,r);e=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new Hh(t,e,n,r,t.widget||null,!0)}static line(t){return new Yh(t)}static set(t,e=!1){return wu.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Gh.none=wu.empty;class Fh extends Gh{constructor(t){let{start:e,end:n}=Jh(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof Fh&&this.tagName==t.tagName&&this.class==t.class&&Bh(this.attrs,t.attrs)}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}Fh.prototype.point=!1;class Yh extends Gh{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof Yh&&Bh(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}Yh.prototype.mapMode=bc.TrackBefore,Yh.prototype.point=!0;class Hh extends Gh{constructor(t,e,n,r,i,o){super(e,n,i,t),this.block=r,this.isReplace=o,this.mapMode=r?e<=0?bc.TrackBefore:bc.TrackAfter:bc.TrackDel}get type(){return this.startSide<this.endSide?Lh.WidgetRange:this.startSide<=0?Lh.WidgetBefore:Lh.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof Hh&&function(t,e){return t==e||!!(t&&e&&t.compare(e))}(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function Jh(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return null==n&&(n=t.inclusive),null==r&&(r=t.inclusive),{start:null!=n?n:e,end:null!=r?r:e}}function Kh(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}Hh.prototype.point=!0;class tf extends gh{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,r,i,o){if(n){if(!(n instanceof tf))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),bh(this,t,e,n?n.children:[],i,o),!0}split(t){let e=new tf;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:r}=this.childPos(t);r&&(e.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){Bh(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){Zh(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=Nh(e,this.attrs||{})),n&&(this.attrs=Nh({class:n},this.attrs||{}))}domAtPos(t){return Uh(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.dirty|=6)}sync(t){var e;this.dom?4&this.dirty&&(fh(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(zh(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t);let n=this.dom.lastChild;for(;n&&gh.get(n)instanceof Mh;)n=n.lastChild;if(!(n&&this.length&&("BR"==n.nodeName||0!=(null===(e=gh.get(n))||void 0===e?void 0:e.isEditable)||$h.ios&&this.children.some((t=>t instanceof Rh))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t=0;for(let e of this.children){if(!(e instanceof Rh)||/[^ -~]/.test(e.text))return null;let n=Ju(e.dom);if(1!=n.length)return null;t+=n[0].width}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}:null}coordsAt(t,e){return Ih(this,t,e)}become(t){return!1}get type(){return Lh.Text}static find(t,e){for(let n=0,r=0;n<t.children.length;n++){let i=t.children[n],o=r+i.length;if(o>=e){if(i instanceof tf)return i;if(o>e)break}r=o+i.breakAfter}return null}}class ef extends gh{constructor(t,e,n){super(),this.widget=t,this.length=e,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,r,i,o){return!(n&&(!(n instanceof ef&&this.widget.compare(n.widget))||t>0&&i<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}domAtPos(t){return 0==t?dh.before(this.dom):dh.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new ef(this.widget,e,this.type);return n.breakAfter=this.breakAfter,n}get children(){return ph}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Jl.empty}domBoundsAround(){return null}become(t){return t instanceof ef&&t.type==this.type&&t.widget.constructor==this.widget.constructor&&(t.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class nf{constructor(t,e,n,r){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof ef&&t.type==Lh.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new tf),this.atCursorPos=!0),this.curLine}flushBuffer(t){this.pendingBuffer&&(this.curLine.append(rf(new Vh(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer([]),this.curLine=null,this.content.push(t)}finish(t){t?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,t--;continue}this.text=e,this.textOff=0}let r=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(rf(new Rh(this.text.slice(this.textOff,this.textOff+r)),e),n),this.atCursorPos=!0,this.textOff+=r,t-=r,n=0}}span(t,e,n,r){this.buildText(e-t,n,r),this.pos=e,this.openStart<0&&(this.openStart=r)}point(t,e,n,r,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Hh){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof Hh)if(n.block){let{type:t}=n;t!=Lh.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new ef(n.widget||new of("div"),s,t))}else{let o=Dh.create(n.widget||new of("span"),s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&i<=r.length&&(t<e||n.startSide>0),l=!o.isEditable&&(t<e||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(rf(new Vh(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(rf(o,r),i),this.atCursorPos=l,this.pendingBuffer=l?t<e?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=i)}static build(t,e,n,r,i){let o=new nf(t,e,n,i);return o.openEnd=wu.spans(r,e,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function rf(t,e){for(let n of e)t=new Mh(n,[t],t.length);return t}class of extends Wh{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}}const sf=Rc.define(),af=Rc.define(),lf=Rc.define(),cf=Rc.define(),uf=Rc.define(),hf=Rc.define(),ff=Rc.define({combine:t=>t.some((t=>t))}),df=Rc.define({combine:t=>t.some((t=>t))});class pf{constructor(t,e="nearest",n="nearest",r=5,i=5){this.range=t,this.y=e,this.x=n,this.yMargin=r,this.xMargin=i}map(t){return t.empty?this:new pf(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const gf=iu.define({map:(t,e)=>t.map(e)});function mf(t,e,n){let r=t.facet(cf);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Of=Rc.define({combine:t=>!t.length||t[0]});let vf=0;const bf=Rc.define();class yf{constructor(t,e,n,r){this.id=t,this.create=e,this.domEventHandlers=n,this.extension=r(this)}static define(t,e){const{eventHandlers:n,provide:r,decorations:i}=e||{};return new yf(vf++,t,n,(t=>{let e=[bf.of(t)];return i&&e.push(kf.of((e=>{let n=e.plugin(t);return n?i(n):Gh.none}))),r&&e.push(r(t)),e}))}static fromClass(t,e){return yf.define((e=>new t(e)),e)}}class wf{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(mf(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){mf(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){mf(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const xf=Rc.define(),Sf=Rc.define(),kf=Rc.define(),Cf=Rc.define(),Qf=Rc.define(),_f=Rc.define();class Pf{constructor(t,e,n,r){this.fromA=t,this.toA=e,this.fromB=n,this.toB=r}join(t){return new Pf(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let r=t[e-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==t.length?null:t[r],l=o-s,c=a?a.fromB:1e9;for(;i<e.length&&e[i]<c;){let t=e[i],r=e[i+1],o=Math.max(s,t),a=Math.min(c,r);if(o<=a&&new Pf(o+l,a+l,o,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new Pf(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class Ef{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=wc.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let r=[];this.changes.iterChangedRanges(((t,e,n,i)=>r.push(new Pf(t,e,n,i)))),this.changedRanges=r;let i=t.hasFocus;i!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=i,this.flags|=1)}static create(t,e,n){return new Ef(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var Tf=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Tf||(Tf={}));const $f=Tf.LTR,Rf=Tf.RTL;function Mf(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Af=Mf("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Df=Mf("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),jf=Object.create(null),qf=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);jf[e]=n,jf[n]=-e}const Xf=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Vf{constructor(t,e,n){this.from=t,this.to=e,this.level=n}get dir(){return this.level%2?Rf:$f}side(t,e){return this.dir==e==t?this.to:this.from}static find(t,e,n,r){let i=-1;for(let o=0;o<t.length;o++){let s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<e:s.to>e:t[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}const Uf=[];function Zf(t){return[new Vf(0,t,0)]}let If="";function Nf(t,e,n,r,i){var o;let s=r.head-t.from,a=-1;if(0==s){if(!i||!t.length)return null;e[0].level!=n&&(s=e[0].side(!1,n),a=0)}else if(s==t.length){if(i)return null;let t=e[e.length-1];t.level!=n&&(s=t.side(!0,n),a=e.length-1)}a<0&&(a=Vf.find(e,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let l=e[a];s==l.side(i,n)&&(l=e[a+=i?1:-1],s=l.side(!i,n));let c=i==(l.dir==n),u=uc(t.text,s,c);if(If=t.text.slice(Math.min(s,u),Math.max(s,u)),u!=l.side(i,n))return Ec.cursor(u+t.from,c?-1:1,l.level);let h=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?Ec.cursor(h.side(!i,n)+t.from,i?1:-1,h.level):Ec.cursor(u+t.from,i?-1:1,l.level):Ec.cursor(i?t.to:t.from,i?-1:1,n)}const Bf="￿";class zf{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(gu.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=Bf}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let r=t;;){this.findPointBefore(n,r),this.readNode(r);let t=r.nextSibling;if(t==e)break;let i=gh.get(r),o=gh.get(t);(i&&o?i.breakAfter:(i?i.breakAfter:Wf(r))||Wf(t)&&("BR"!=r.nodeName||r.cmIgnore))&&this.lineBreak(),r=t}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=r.exec(e))&&(o=i.index,s=i[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=gh.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+Math.min(e,n.offset))}}function Wf(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class Lf{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class Gf extends gh{constructor(t){super(),this.view=t,this.compositionDeco=Gh.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new tf],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Pf(0,0,0,t.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(t){let e=t.changedRanges;this.minWidth>0&&e.length&&(e.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Gh.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=function(t,e){let n=Yf(t);if(!n)return Gh.none;let{from:r,to:i,node:o,text:s}=n,a=e.mapPos(r,1),l=Math.max(a,e.mapPos(i,-1)),{state:c}=t,u=3==o.nodeType?o.nodeValue:new zf([],c).readRange(o.firstChild,null).text;if(l-a<u.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+u.length),Bf)==u)l=a+u.length;else{if(c.doc.sliceString(Math.max(0,l-u.length),l,Bf)!=u)return Gh.none;a=l-u.length}else if(c.doc.sliceString(a,l,Bf)!=u)return Gh.none;let h=gh.get(o);return h instanceof jh?h=h.widget.topView:h&&(h.parent=null),Gh.set(Gh.replace({widget:new Hf(o,s,h),inclusive:!0}).range(a,l))}(this.view,t.changes)),($h.ie||$h.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let n=function(t,e,n){let r=new Kf;return wu.compare(t,e,n,r),r.changes}(this.decorations,this.updateDeco(),t.changes);return e=Pf.extendWithRanges(e,n),(0!=this.dirty||0!=e.length)&&(this.updateInner(e,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=$h.chrome||$h.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(t),this.dirty=0,t&&(t.written||n.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof ef&&t.widget instanceof Ff&&r.push(t.dom);n.updateGaps(r)}updateChildren(t,e){let n=this.childCursor(e);for(let e=t.length-1;;e--){let r=e>=0?t[e]:null;if(!r)break;let{fromA:i,toA:o,fromB:s,toB:a}=r,{content:l,breakAtStart:c,openStart:u,openEnd:h}=nf.build(this.view.state.doc,s,a,this.decorations,this.dynamicDecorationMap),{i:f,off:d}=n.findPos(o,1),{i:p,off:g}=n.findPos(i,-1);vh(this,p,g,f,d,l,c,u,h)}}updateSelection(t=!1,e=!1){if(!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange(),!e&&!this.mayControlSelection())return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,i=this.domAtPos(r.anchor),o=r.empty?i:this.domAtPos(r.head);if($h.gecko&&r.empty&&1==(s=i).node.nodeType&&s.node.firstChild&&(0==s.offset||"false"==s.node.childNodes[s.offset-1].contentEditable)&&(s.offset==s.node.childNodes.length||"false"==s.node.childNodes[s.offset].contentEditable)){let t=document.createTextNode("");this.view.observer.ignore((()=>i.node.insertBefore(t,i.node.childNodes[i.offset]||null))),i=o=new dh(t,0),n=!0}var s;let a=this.view.observer.selectionRange;!n&&a.focusNode&&Ku(i.node,i.offset,a.anchorNode,a.anchorOffset)&&Ku(o.node,o.offset,a.focusNode,a.focusOffset)||(this.view.observer.ignore((()=>{$h.android&&$h.chrome&&this.dom.contains(a.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=Fu(this.view.root);if(t)if(r.empty){if($h.gecko){let t=(e=i.node,n=i.offset,1!=e.nodeType?0:(n&&"false"==e.childNodes[n-1].contentEditable?1:0)|(n<e.childNodes.length&&"false"==e.childNodes[n].contentEditable?2:0));if(t&&3!=t){let e=Jf(i.node,i.offset,1==t?1:-1);e&&(i=new dh(e,1==t?0:e.nodeValue.length))}}t.collapse(i.node,i.offset),null!=r.bidiLevel&&null!=a.cursorBidiLevel&&(a.cursorBidiLevel=r.bidiLevel)}else if(t.extend){t.collapse(i.node,i.offset);try{t.extend(o.node,o.offset)}catch(t){}}else{let e=document.createRange();r.anchor>r.head&&([i,o]=[o,i]),e.setEnd(o.node,o.offset),e.setStart(i.node,i.offset),t.removeAllRanges(),t.addRange(e)}var e,n})),this.view.observer.setSelectionRange(i,o)),this.impreciseAnchor=i.precise?null:new dh(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new dh(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:t}=this,e=t.state.selection.main,n=Fu(t.root),{anchorNode:r,anchorOffset:i}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let o=tf.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let u=t.observer.selectionRange;t.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=e.from&&n.collapse(r,i)}mayControlSelection(){let t=this.view.root.activeElement;return t==this.dom||Hu(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t))}nearest(t){for(let e=t;e;){let t=gh.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof tf)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){for(let n=this.length,r=this.children.length-1;;r--){let i=this.children[r],o=n-i.breakAfter-i.length;if(t>o||t==o&&i.type!=Lh.WidgetBefore&&i.type!=Lh.WidgetAfter&&(!r||2==e||this.children[r-1].breakAfter||this.children[r-1].type==Lh.WidgetBefore&&e>-2))return i.coordsAt(t-o,e);n=o}}measureVisibleLineHeights(t){let e=[],{from:n,to:r}=t,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==Tf.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],u=t+c.length;if(u>r)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),o){let e=c.dom.lastChild,r=e?Ju(e):[];if(r.length){let e=r[r.length-1],o=a?e.right-n.left:n.right-e.left;o>s&&(s=o,this.minWidth=i,this.minWidthFrom=t,this.minWidthTo=u)}}}t=u+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?Tf.RTL:Tf.LTR}measureTextSize(){for(let t of this.children)if(t instanceof tf){let e=t.measureTextSize();if(e)return e}let t,e,n=document.createElement("div");return n.className="cm-line",n.style.width="99999px",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(n);let r=Ju(n.firstChild)[0];t=n.getBoundingClientRect().height,e=r?r.width/27:7,n.remove()})),{lineHeight:t,charWidth:e}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new Oh(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,r=0;;r++){let i=r==e.viewports.length?null:e.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=e.lineBlockAt(o).bottom-e.lineBlockAt(n).top;t.push(Gh.replace({widget:new Ff(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return Gh.set(t)}updateDeco(){let t=this.view.state.facet(kf).map(((t,e)=>(this.dynamicDecorationMap[e]="function"==typeof t)?t(this.view):t));for(let e=t.length;e<t.length+3;e++)this.dynamicDecorationMap[e]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let e,{range:n}=t,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,e.left),top:Math.min(r.top,e.top),right:Math.max(r.right,e.right),bottom:Math.max(r.bottom,e.bottom)});let i=0,o=0,s=0,a=0;for(let t of this.view.state.facet(Qf).map((t=>t(this.view))))if(t){let{left:e,right:n,top:r,bottom:l}=t;null!=e&&(i=Math.max(i,e)),null!=n&&(o=Math.max(o,n)),null!=r&&(s=Math.max(s,r)),null!=l&&(a=Math.max(a,l))}let l={left:r.left-i,top:r.top-s,right:r.right+o,bottom:r.bottom+a};!function(t,e,n,r,i,o,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t;u;)if(1==u.nodeType){let t,h=u==l.body;if(h)t=oh(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let e=u.getBoundingClientRect();t={left:e.left,right:e.left+u.clientWidth,top:e.top,bottom:e.top+u.clientHeight}}let f=0,d=0;if("nearest"==i)e.top<t.top?(d=-(t.top-e.top+s),n>0&&e.bottom>t.bottom+d&&(d=e.bottom-t.bottom+d+s)):e.bottom>t.bottom&&(d=e.bottom-t.bottom+s,n<0&&e.top-d<t.top&&(d=-(t.top+d-e.top+s)));else{let r=e.bottom-e.top,o=t.bottom-t.top;d=("center"==i&&r<=o?e.top+r/2-o/2:"start"==i||"center"==i&&n<0?e.top-s:e.bottom-o+s)-t.top}if("nearest"==r?e.left<t.left?(f=-(t.left-e.left+o),n>0&&e.right>t.right+f&&(f=e.right-t.right+f+o)):e.right>t.right&&(f=e.right-t.right+o,n<0&&e.left<t.left+f&&(f=-(t.left+f-e.left+o))):f=("center"==r?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==r==a?e.left-o:e.right-(t.right-t.left)+o)-t.left,f||d)if(h)c.scrollBy(f,d);else{let t=0,n=0;if(d){let t=u.scrollTop;u.scrollTop+=d,n=u.scrollTop-t}if(f){let e=u.scrollLeft;u.scrollLeft+=f,t=u.scrollLeft-e}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-f)<1&&(r="nearest"),n&&Math.abs(n-d)<1&&(i="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,l,n.head<n.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==Tf.LTR)}}class Ff extends Wh{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Yf(t){let e=t.observer.selectionRange,n=e.focusNode&&Jf(e.focusNode,e.focusOffset,0);if(!n)return null;let r=t.docView.nearest(n);if(!r)return null;if(r instanceof tf){let t=n;for(;t.parentNode!=r.dom;)t=t.parentNode;let e=t.previousSibling;for(;e&&!gh.get(e);)e=e.previousSibling;let i=e?gh.get(e).posAtEnd:r.posAtStart;return{from:i,to:i,node:t,text:n}}{for(;;){let{parent:t}=r;if(!t)return null;if(t instanceof tf)break;r=t}let t=r.posAtStart;return{from:t,to:t+r.length,node:r.dom,text:n}}}class Hf extends Wh{constructor(t,e,n){super(),this.top=t,this.text=e,this.topView=n}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return jh}}function Jf(t,e,n){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0&&n<=0)e=nh(t=t.childNodes[e-1]);else{if(!(1==t.nodeType&&e<t.childNodes.length&&n>=0))return null;t=t.childNodes[e],e=0}}}class Kf{constructor(){this.changes=[]}compareRange(t,e){Kh(t,e,this.changes)}comparePoint(t,e){Kh(t,e,this.changes)}}function td(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function ed(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function nd(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function rd(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function id(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function od(t,e,n){let r,i,o,s,a,l,c,u,h=!1;for(let f=t.firstChild;f;f=f.nextSibling){let t=Ju(f);for(let d=0;d<t.length;d++){let p=t[d];i&&nd(i,p)&&(p=rd(id(p,i.bottom),i.top));let g=td(e,p),m=ed(n,p);if(0==g&&0==m)return 3==f.nodeType?sd(f,e,n):od(f,e,n);(!r||s>m||s==m&&o>g)&&(r=f,i=p,o=g,s=m,h=!g||(g>0?d<t.length-1:d>0)),0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=f,c=p):n<p.top&&(!u||u.top>p.top)&&(l=f,u=p):c&&nd(c,p)?c=id(c,p.bottom):u&&nd(u,p)&&(u=rd(u,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):u&&u.top<=n&&(r=l,i=u),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));return 3==r.nodeType?sd(r,f,n):h&&"false"!=r.contentEditable?od(r,f,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0)}}function sd(t,e,n){let r=t.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=uh(t,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&u<o){let n=e>=(c.left+c.right)/2,r=n;if(($h.chrome||$h.gecko)&&uh(t,a).getBoundingClientRect().left==c.right&&(r=!n),u<=0)return{node:t,offset:a+(r?1:0)};i=a+(r?1:0),o=u}}}return{node:t,offset:i>-1?i:s>0?t.nodeValue.length:0}}function ad(t,{x:e,y:n},r,i=-1){var o;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,u=n-l;if(u<0)return 0;if(u>c)return t.state.doc.length;for(let e=t.defaultLineHeight/2,n=!1;s=t.elementAtHeight(u),s.type!=Lh.Text;)for(;u=i>0?s.bottom+e:s.top-e,!(u>=0&&u<=c);){if(n)return r?null:0;n=!0,i=-i}n=l+u;let h=s.from;if(h<t.viewport.from)return 0==t.viewport.from?0:r?null:ld(t,a,s,e,n);if(h>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:r?null:ld(t,a,s,e,n);let f=t.dom.ownerDocument,d=t.root.elementFromPoint?t.root:f,p=d.elementFromPoint(e,n);p&&!t.contentDOM.contains(p)&&(p=null),p||(e=Math.max(a.left+1,Math.min(a.right-1,e)),p=d.elementFromPoint(e,n),p&&!t.contentDOM.contains(p)&&(p=null));let g,m=-1;if(p&&0!=(null===(o=t.docView.nearest(p))||void 0===o?void 0:o.isEditable))if(f.caretPositionFromPoint){let t=f.caretPositionFromPoint(e,n);t&&({offsetNode:g,offset:m}=t)}else if(f.caretRangeFromPoint){let r=f.caretRangeFromPoint(e,n);r&&(({startContainer:g,startOffset:m}=r),(!t.contentDOM.contains(g)||$h.safari&&function(t,e,n){let r;if(3!=t.nodeType||e!=(r=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return uh(t,r-1,r).getBoundingClientRect().left>n}(g,m,e)||$h.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}return n-(1==t.nodeType?t.getBoundingClientRect():uh(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect()).left>5}(g,m,e))&&(g=void 0))}if(!g||!t.docView.dom.contains(g)){let r=tf.find(t.docView,h);if(!r)return u>s.top+s.height/2?s.to:s.from;({node:g,offset:m}=od(r.dom,e,n))}return t.docView.posFromDOM(g,m)}function ld(t,e,n,r,i){let o=Math.round((r-e.left)*t.defaultCharacterWidth);t.lineWrapping&&n.height>1.5*t.defaultLineHeight&&(o+=Math.floor((i-n.top)/t.defaultLineHeight)*t.viewState.heightOracle.lineLength);let s=t.state.sliceDoc(n.from,n.to);return n.from+Au(s,o,t.state.tabSize)}function cd(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=t.bidiSpans(i),s=t.textDirectionAt(i.from);for(let a=e,l=null;;){let e=Nf(i,o,s,a,n),c=If;if(!e){if(i.number==(n?t.state.doc.lines:1))return a;c="\n",i=t.state.doc.line(i.number+(n?1:-1)),o=t.bidiSpans(i),e=Ec.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return e;l=r(c)}a=e}}function ud(t,e,n){let r=t.state.facet(Cf).map((e=>e(t)));for(;;){let t=!1;for(let i of r)i.between(n.from-1,n.from+1,((r,i,o)=>{n.from>r&&n.from<i&&(n=e.head>n.from?Ec.cursor(r,1):Ec.cursor(i,-1),t=!0)}));if(!t)return n}}class hd{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let e in Od){let n=Od[e];t.contentDOM.addEventListener(e,(r=>{md(t,r)&&!this.ignoreDuringComposition(r)&&("keydown"==e&&this.keydown(t,r)||(this.mustFlushObserver(r)&&t.observer.forceFlush(),this.runCustomHandlers(e,t,r)?r.preventDefault():n(t,r)))}),vd[e]),this.registeredEvents.push(e)}$h.chrome&&102==$h.chrome_version&&t.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=t.hasFocus,$h.safari&&t.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,e){var n;let r;this.customHandlers=[];for(let i of e)if(r=null===(n=i.update(t).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:i.value,handlers:r});for(let e in r)this.registeredEvents.indexOf(e)<0&&"scroll"!=e&&(this.registeredEvents.push(e),t.contentDOM.addEventListener(e,(n=>{md(t,n)&&this.runCustomHandlers(e,t,n)&&n.preventDefault()})))}}runCustomHandlers(t,e,n){for(let r of this.customHandlers){let i=r.handlers[t];if(i)try{if(i.call(r.plugin,n,e)||n.defaultPrevented)return!0}catch(t){mf(e.state,t)}}return!1}runScrollHandlers(t,e){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,e,t)}catch(e){mf(t.state,e)}}}keydown(t,e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if($h.android&&$h.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return t.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return!(!$h.ios||e.synthetic||e.altKey||e.metaKey||!((n=fd.find((t=>t.keyCode==e.keyCode)))&&!e.ctrlKey||dd.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)||(this.pendingIOSKey=n||e,setTimeout((()=>this.flushIOSKey(t)),250),0))}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&(this.pendingIOSKey=void 0,hh(t.contentDOM,e.key,e.keyCode))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!($h.safari&&!$h.ios&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(t){return"keydown"==t.type&&229!=t.keyCode}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const fd=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],dd="dthko",pd=[16,17,18,20,91,92,224,225];class gd{constructor(t,e,n,r){this.view=t,this.style=n,this.mustSelect=r,this.lastEvent=e;let i=t.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(gu.allowMultipleSelections)&&function(t,e){let n=t.state.facet(sf);return n.length?n[0](e):$h.mac?e.metaKey:e.ctrlKey}(t,e),this.dragMove=function(t,e){let n=t.state.facet(af);return n.length?n[0](e):$h.mac?!e.altKey:!e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=Fu(t.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let t=0;t<i.length;t++){let n=i[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=Td(e))&&null,!1===this.dragging&&(e.preventDefault(),this.select(e))}move(t){if(0==t.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=t)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(t){let e=this.style.get(t,this.extend,this.multiple);!this.mustSelect&&e.eq(this.view.state.selection)&&e.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:e,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function md(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,r=e.target;r!=t.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=gh.get(r))&&n.ignoreEvent(e))return!1;return!0}const Od=Object.create(null),vd=Object.create(null),bd=$h.ie&&$h.ie_version<15||$h.ios&&$h.webkit_version<604;function yd(t,e){let n,{state:r}=t,i=1,o=r.toText(e),s=o.lines==r.selection.ranges.length;if(null!=Rd&&r.selection.ranges.every((t=>t.empty))&&Rd==o.toString()){let t=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=r.toText((s?o.line(i++).text:e)+r.lineBreak);return{changes:{from:a.from,insert:l},range:Ec.cursor(n.from+l.length)}}))}else n=s?r.changeByRange((t=>{let e=o.line(i++);return{changes:{from:t.from,to:t.to,insert:e.text},range:Ec.cursor(t.from+e.length)}})):r.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function wd(t,e,n,r){if(1==r)return Ec.cursor(e,n);if(2==r)return function(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),o=e-i.from;if(0==i.length)return Ec.cursor(e);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=uc(i.text,o,!1):a=uc(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let t=uc(i.text,s,!1);if(r(i.text.slice(t,s))!=l)break;s=t}for(;a<i.length;){let t=uc(i.text,a);if(r(i.text.slice(a,t))!=l)break;a=t}return Ec.range(s+i.from,a+i.from)}(t.state,e,n);{let n=tf.find(t.docView,e),r=t.state.doc.lineAt(n?n.posAtEnd:e),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<t.state.doc.length&&o==r.to&&o++,Ec.range(i,o)}}Od.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),27==e.keyCode?t.inputState.lastEscPress=Date.now():pd.indexOf(e.keyCode)<0&&(t.inputState.lastEscPress=0)},Od.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},Od.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},vd.touchstart=vd.touchmove={passive:!0},Od.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of t.state.facet(lf))if(n=r(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=Cd(t,e),r=Td(e),i=t.state.selection,o=n,s=e;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),i=i.map(t.changes),s=null)},get(e,a,l){let c;s&&e.clientX==s.clientX&&e.clientY==s.clientY?c=o:(c=o=Cd(t,e),s=e);let u=wd(t,c.pos,c.bias,r);if(n.pos!=c.pos&&!a){let e=wd(t,n.pos,n.bias,r),i=Math.min(e.from,u.from),o=Math.max(e.to,u.to);u=i<u.from?Ec.range(i,o):Ec.range(o,i)}return a?i.replaceRange(i.main.extend(u.from,u.to)):l&&i.ranges.length>1&&i.ranges.some((t=>t.eq(u)))?function(t,e){for(let n=0;;n++)if(t.ranges[n].eq(e))return Ec.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}(i,u):l?i.addRange(u):Ec.create([u])}}}(t,e)),n){let r=t.root.activeElement!=t.contentDOM;r&&t.observer.ignore((()=>ch(t.contentDOM))),t.inputState.startMouseSelection(new gd(t,e,n,r))}};let xd=(t,e)=>t>=e.top&&t<=e.bottom,Sd=(t,e,n)=>xd(e,n)&&t>=n.left&&t<=n.right;function kd(t,e,n,r){let i=tf.find(t.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&Sd(n,r,s))return-1;let a=i.coordsAt(o,1);return a&&Sd(n,r,a)?1:s&&xd(r,s)?-1:1}function Cd(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:kd(t,n,e.clientX,e.clientY)}}const Qd=$h.ie&&$h.ie_version<=11;let _d=null,Pd=0,Ed=0;function Td(t){if(!Qd)return t.detail;let e=_d,n=Ed;return _d=t,Ed=Date.now(),Pd=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Pd+1)%3:1}function $d(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=t.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:i,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}Od.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:r}=t.inputState;r&&(r.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")},Od.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&$d(t,e,r.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(r[t]=e.result),o()},e.readAsText(n[t])}}else $d(t,e,e.dataTransfer.getData("Text"),!0)},Od.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=bd?null:e.clipboardData;n?(yd(t,n.getData("text/plain")),e.preventDefault()):function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),yd(t,n.value)}),50)}(t)};let Rd=null;function Md(t){setTimeout((()=>{t.hasFocus!=t.inputState.notifiedFocused&&t.update([])}),10)}Od.copy=Od.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=function(t){let e=[],n=[],r=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let i=-1;for(let{from:r}of t.selection.ranges){let o=t.doc.lineAt(r);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}(t.state);if(!n&&!i)return;Rd=i?n:null;let o=bd?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",n)):function(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout((()=>{r.remove(),t.focus()}),50)}(t,n),"cut"!=e.type||t.state.readOnly||t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})},Od.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Md(t)},Od.blur=t=>{t.observer.clearSelectionRange(),Md(t)},Od.compositionstart=Od.compositionupdate=t=>{null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)},Od.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionFirstChange=null,$h.chrome&&$h.android&&t.observer.flushSoon(),setTimeout((()=>{t.inputState.composing<0&&t.docView.compositionDeco.size&&t.update([])}),50)},Od.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},Od.beforeinput=(t,e)=>{var n;let r;if($h.chrome&&$h.android&&(r=fd.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let e=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}};const Ad=["pre-wrap","normal","pre-line","break-spaces"];class Dd{constructor(t){this.lineWrapping=t,this.doc=Jl.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return Ad.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let r=t[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(e=!0,this.heightSamples[Math.floor(10*r)]=!0)}return e}refresh(t,e,n,r,i){let o=Ad.indexOf(t)>-1,s=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=e,this.charWidth=n,this.lineLength=r,s){this.heightSamples={};for(let t=0;t<i.length;t++){let e=i[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return s}}class jd{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class qd{constructor(t,e,n,r,i){this.from=t,this.length=e,this.top=n,this.height=r,this.type=i}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let e=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new qd(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var Xd=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Xd||(Xd={}));const Vd=.001;class Ud{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t,e){this.height!=e&&(Math.abs(this.height-e)>Vd&&(t.heightChanged=!0),this.height=e)}replace(t,e,n){return Ud.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,r){let i=this;for(let o=r.length-1;o>=0;o--){let{fromA:s,toA:a,fromB:l,toB:c}=r[o],u=i.lineAt(s,Xd.ByPosNoHeight,e,0,0),h=u.to>=a?u:i.lineAt(a,Xd.ByPosNoHeight,e,0,0);for(c+=h.to-a,a=h.to;o>0&&u.from<=r[o-1].toA;)s=r[o-1].fromA,l=r[o-1].fromB,o--,s<u.from&&(u=i.lineAt(s,Xd.ByPosNoHeight,e,0,0));l+=u.from-s,s=u.from;let f=Wd.build(n,t,l,c);i=i.replace(s,a,f)}return i.updateHeight(n,0)}static empty(){return new Id(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,r=0,i=0;for(;;)if(e==n)if(r>2*i){let i=t[e-1];i.break?t.splice(--e,1,i.left,null,i.right):t.splice(--e,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,i-=e.size}}else if(r<i){let n=t[e++];n&&(r+=n.size)}else{let e=t[--n];e&&(i+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new Bd(Ud.of(t.slice(0,e)),o,Ud.of(t.slice(n)))}}Ud.prototype.size=1;class Zd extends Ud{constructor(t,e,n){super(t,e),this.type=n}blockAt(t,e,n,r){return new qd(r,this.length,n,this.height,this.type)}lineAt(t,e,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(t,e,n,r,i,o){t<=i+this.length&&e>=i&&o(this.blockAt(0,n,r,i))}updateHeight(t,e=0,n=!1,r){return r&&r.from<=e&&r.more&&this.setHeight(t,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Id extends Zd{constructor(t,e){super(t,e,Lh.Text),this.collapsed=0,this.widgetHeight=0}replace(t,e,n){let r=n[0];return 1==n.length&&(r instanceof Id||r instanceof Nd&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof Nd?r=new Id(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Ud.of(n)}updateHeight(t,e=0,n=!1,r){return r&&r.from<=e&&r.more?this.setHeight(t,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Nd extends Ud{constructor(t){super(t,0)}lines(t,e){let n=t.lineAt(e).number,r=t.lineAt(e+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(t,e,n,r){let{firstLine:i,lastLine:o,lineHeight:s}=this.lines(e,r),a=Math.max(0,Math.min(o-i,Math.floor((t-n)/s))),{from:l,length:c}=e.line(i+a);return new qd(l,c,n+s*a,s,Lh.Text)}lineAt(t,e,n,r,i){if(e==Xd.ByHeight)return this.blockAt(t,n,r,i);if(e==Xd.ByPosNoHeight){let{from:e,to:r}=n.lineAt(t);return new qd(e,r-e,0,0,Lh.Text)}let{firstLine:o,lineHeight:s}=this.lines(n,i),{from:a,length:l,number:c}=n.lineAt(t);return new qd(a,l,r+s*(c-o),s,Lh.Text)}forEachLine(t,e,n,r,i,o){let{firstLine:s,lineHeight:a}=this.lines(n,i);for(let l=Math.max(t,i),c=Math.min(i+this.length,e);l<=c;){let e=n.lineAt(l);l==t&&(r+=a*(e.number-s)),o(new qd(e.from,e.length,r,a,Lh.Text)),r+=a,l=e.to+1}}replace(t,e,n){let r=this.length-e;if(r>0){let t=n[n.length-1];t instanceof Nd?n[n.length-1]=new Nd(t.length+r):n.push(null,new Nd(r-1))}if(t>0){let e=n[0];e instanceof Nd?n[0]=new Nd(t+e.length):n.unshift(new Nd(t-1),null)}return Ud.of(n)}decomposeLeft(t,e){e.push(new Nd(t-1),null)}decomposeRight(t,e){e.push(null,new Nd(this.length-t-1))}updateHeight(t,e=0,n=!1,r){let i=e+this.length;if(r&&r.from<=e+this.length&&r.more){let n=[],o=Math.max(e,r.from),s=-1,a=t.heightChanged;for(r.from>e&&n.push(new Nd(r.from-e-1).updateHeight(t,e));o<=i&&r.more;){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=Vd&&(s=-2);let a=new Id(e,i);a.outdated=!1,n.push(a),o+=e+1}o<=i&&n.push(null,new Nd(i-o).updateHeight(t,o));let l=Ud.of(n);return t.heightChanged=a||s<0||Math.abs(l.height-this.height)>=Vd||Math.abs(s-this.lines(t.doc,e).lineHeight)>=Vd,l}return(n||this.outdated)&&(this.setHeight(t,t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Bd extends Ud{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,r){let i=n+this.left.height;return t<i?this.left.blockAt(t,e,n,r):this.right.blockAt(t,e,i,r+this.left.length+this.break)}lineAt(t,e,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=e==Xd.ByHeight?t<o:t<s,l=a?this.left.lineAt(t,e,n,r,i):this.right.lineAt(t,e,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==Xd.ByPosNoHeight?Xd.ByPosNoHeight:Xd.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,r,i).join(l)}forEachLine(t,e,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,r,i,o),e>=a&&this.right.forEachLine(t,e,n,s,a,o);else{let l=this.lineAt(a,Xd.ByPos,n,r,i);t<l.from&&this.left.forEachLine(t,l.from-1,n,r,i,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,o)}}replace(t,e,n){let r=this.left.length+this.break;if(e<r)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,e-r,n));let i=[];t>0&&this.decomposeLeft(t,i);let o=i.length;for(let t of n)i.push(t);if(t>0&&zd(i,o-1),e<this.length){let t=i.length;this.decomposeRight(e,i),zd(i,t)}return Ud.of(i)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,r=n+this.break;if(t>=r)return this.right.decomposeRight(t-r,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<r&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?Ud.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,r){let{left:i,right:o}=this,s=e+i.length+this.break,a=null;return r&&r.from<=e+i.length&&r.more?a=i=i.updateHeight(t,e,n,r):i.updateHeight(t,e,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(t,s,n,r):o.updateHeight(t,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function zd(t,e){let n,r;null==t[e]&&(n=t[e-1])instanceof Nd&&(r=t[e+1])instanceof Nd&&t.splice(e-1,3,new Nd(n.length+1+r.length))}class Wd{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Id?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new Id(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let i=e-t;n.block?this.addBlock(new Zd(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Id(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new Nd(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Id)return t;let e=new Id(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine(),t.type!=Lh.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=Lh.WidgetBefore&&(this.covering=t)}addLineDeco(t,e){let n=this.ensureLine();n.length+=e,n.collapsed+=e,n.widgetHeight=Math.max(n.widgetHeight,t),this.writtenTo=this.pos=this.pos+e}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof Id||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Id(0,-1));let n=t;for(let t of this.nodes)t instanceof Id&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,r){let i=new Wd(n,t);return wu.spans(e,n,r,i,0),i.finish(n)}}class Ld{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,r){(t<e||n&&n.heightRelevant||r&&r.heightRelevant)&&Kh(t,e,this.changes,5)}}function Gd(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=r.body;)if(1==e.nodeType){let n=e,r=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=r.overflow){let r=n.getBoundingClientRect();o=Math.max(o,r.left),s=Math.min(s,r.right),a=Math.max(a,r.top),l=e==t.parentNode?r.bottom:Math.min(l,r.bottom)}e="absolute"==r.position||"fixed"==r.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function Fd(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Yd{constructor(t,e,n){this.from=t,this.to=e,this.size=n}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(t){return Gh.replace({widget:new Hd(this.size,t)}).range(this.from,this.to)}}class Hd extends Wh{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Jd{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=rp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Tf.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(Sf).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new Dd(e),this.stateDeco=t.facet(kf).filter((t=>"function"!=typeof t)),this.heightMap=Ud.empty().applyChanges(this.stateDeco,Jl.empty,this.heightOracle.setDoc(t.doc),[new Pf(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Gh.set(this.lineGaps.map((t=>t.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let r=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>r>=t&&r<=e))){let{from:e,to:n}=this.lineBlockAt(r);t.push(new Kd(e,n))}}this.viewports=t.sort(((t,e)=>t.from-e.from)),this.scaler=this.heightMap.height<=7e6?rp:new ip(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(t=>{this.viewportLines.push(1==this.scaler.scale?t:op(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(kf).filter((t=>"function"!=typeof t));let r=t.changedRanges,i=Pf.extendWithRanges(r,function(t,e,n){let r=new Ld;return wu.compare(t,e,n,r,0),r.changes}(n,this.stateDeco,t?t.changes:wc.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=o&&(t.flags|=2);let s=i.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<s.from||e.range.head>s.to)||!this.viewportIsAppropriate(s))&&(s=this.getViewport(0,e));let a=!t.changes.empty||2&t.flags||s.from!=this.viewport.from||s.to!=this.viewport.to;this.viewport=s,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(df)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?Tf.RTL:Tf.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),s=o||this.mustMeasureContent||this.contentDOMHeight!=e.clientHeight;this.contentDOMHeight=e.clientHeight,this.mustMeasureContent=!1;let a=0,l=0,c=parseInt(n.paddingTop)||0,u=parseInt(n.paddingBottom)||0;this.paddingTop==c&&this.paddingBottom==u||(this.paddingTop=c,this.paddingBottom=u,a|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(r.lineWrapping&&(s=!0),this.editorWidth=t.scrollDOM.clientWidth,a|=8);let h=(this.printing?Fd:Gd)(e,this.paddingTop),f=h.top-this.pixelViewport.top,d=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(s=!0)),!this.inView&&!this.scrollTarget)return 0;let g=e.clientWidth;if(this.contentDOMWidth==g&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=g,this.editorHeight=t.scrollDOM.clientHeight,a|=8),s){let e=t.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(e)&&(o=!0),o||r.lineWrapping&&Math.abs(g-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:s}=t.docView.measureTextSize();o=n>0&&r.refresh(i,n,s,g/s,e),o&&(t.docView.minWidth=0,a|=8)}f>0&&d>0?l=Math.max(f,d):f<0&&d<0&&(l=Math.min(f,d)),r.heightChanged=!1;for(let n of this.viewports){let i=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(o?Ud.empty().applyChanges(this.stateDeco,Jl.empty,this.heightOracle,[new Pf(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new jd(n.from,i))}r.heightChanged&&(a|=2)}let m=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return m&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&a||m)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,i=this.state.doc,{visibleTop:o,visibleBottom:s}=this,a=new Kd(r.lineAt(o-1e3*n,Xd.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),Xd.ByHeight,i,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(t,Xd.ByPos,i,0,0);n="center"==e.y?(s.top+s.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-o,a=new Kd(r.lineAt(n-500,Xd.ByHeight,i,0,0).from,r.lineAt(n+o+500,Xd.ByHeight,i,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),r=e.mapPos(t.to,1);return new Kd(this.heightMap.lineAt(n,Xd.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Xd.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,Xd.ByPos,this.state.doc,0,0),{bottom:i}=this.heightMap.lineAt(e,Xd.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==t||r<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&r>o-2e3&&i<s+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let r of t)e.touchesRange(r.from,r.to)||n.push(new Yd(e.mapPos(r.from),e.mapPos(r.to),r.size));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,i=r>>1,o=r<<1;if(this.defaultTextDirection!=Tf.LTR&&!n)return[];let s=[],a=(r,o,l,c)=>{if(o-r<i)return;let u=this.state.selection.main,h=[u.from];u.empty||h.push(u.to);for(let t of h)if(t>r&&t<o)return a(r,t-10,l,c),void a(t+10,o,l,c);let f=function(t,e){for(let n of t)if(e(n))return n}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-r)<i&&Math.abs(t.to-o)<i&&!h.some((e=>t.from<e&&t.to>e))));if(!f){if(o<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=o&&t.to>=o))){let t=e.moveToLineBoundary(Ec.cursor(o),!1,!0).head;t>r&&(o=t)}f=new Yd(r,o,this.gapSize(l,r,o,c))}s.push(f)};for(let t of this.viewportLines){if(t.length<o)continue;let e=tp(t.from,t.to,this.stateDeco);if(e.total<o)continue;let i,s,l=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,o,a=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=l){let r=np(e,l),i=((this.visibleBottom-this.visibleTop)/2+a)/t.height;n=r-i,o=r+i}else n=(this.visibleTop-t.top-a)/t.height,o=(this.visibleBottom-t.top+a)/t.height;i=ep(e,n),s=ep(e,o)}else{let t,n,o=e.total*this.heightOracle.charWidth,a=r*this.heightOracle.charWidth;if(null!=l){let r=np(e,l),i=((this.pixelViewport.right-this.pixelViewport.left)/2+a)/o;t=r-i,n=r+i}else t=(this.pixelViewport.left-a)/o,n=(this.pixelViewport.right+a)/o;i=ep(e,t),s=ep(e,n)}i>t.from&&a(t.from,i,t,e),s<t.to&&a(s,t.to,t,e)}return s}gapSize(t,e,n,r){let i=np(r,n)-np(r,e);return this.heightOracle.lineWrapping?t.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(t){Yd.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=Gh.set(t.map((t=>t.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let e=[];wu.spans(t,this.viewport.from,this.viewport.to,{span(t,n){e.push({from:t,to:n})},point(){}},20);let n=e.length!=this.visibleRanges.length||this.visibleRanges.some(((t,n)=>t.from!=e[n].from||t.to!=e[n].to));return this.visibleRanges=e,n?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||op(this.heightMap.lineAt(t,Xd.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(t){return op(this.heightMap.lineAt(this.scaler.fromDOM(t),Xd.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(t){return op(this.heightMap.blockAt(this.scaler.fromDOM(t),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Kd{constructor(t,e){this.from=t,this.to=e}}function tp(t,e,n){let r=[],i=t,o=0;return wu.spans(n,t,e,{span(){},point(t,e){t>i&&(r.push({from:i,to:t}),o+=t-i),i=e}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function ep({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:i}=e[t],o=i-n;if(r<=o)return n+r;r-=o}}function np(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}const rp={toDOM:t=>t,fromDOM:t=>t,scale:1};class ip{constructor(t,e,n){let r=0,i=0,o=0;this.viewports=n.map((({from:n,to:i})=>{let o=e.lineAt(n,Xd.ByPos,t,0,0).top,s=e.lineAt(i,Xd.ByPos,t,0,0).bottom;return r+=s-o,{from:n,to:i,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(e.height-r);for(let t of this.viewports)t.domTop=o+(t.top-i)*this.scale,o=t.domBottom=t.domTop+(t.bottom-t.top),i=t.bottom}toDOM(t){for(let e=0,n=0,r=0;;e++){let i=e<this.viewports.length?this.viewports[e]:null;if(!i||t<i.top)return r+(t-n)*this.scale;if(t<=i.bottom)return i.domTop+(t-i.top);n=i.bottom,r=i.domBottom}}fromDOM(t){for(let e=0,n=0,r=0;;e++){let i=e<this.viewports.length?this.viewports[e]:null;if(!i||t<i.domTop)return n+(t-r)/this.scale;if(t<=i.domBottom)return i.top+(t-i.domTop);n=i.bottom,r=i.domBottom}}}function op(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new qd(t.from,t.length,n,r-n,Array.isArray(t.type)?t.type.map((t=>op(t,e))):t.type)}const sp=Rc.define({combine:t=>t.join(" ")}),ap=Rc.define({combine:t=>t.indexOf(!0)>-1}),lp=Xu.newName(),cp=Xu.newName(),up=Xu.newName(),hp={"&light":"."+cp,"&dark":"."+up};function fp(t,e,n){return new Xu(e,{finish:e=>/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e})}const dp=fp("."+lp,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},hp);class pp{constructor(t,e,n,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:i,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=i||o?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new Lf(n,r)),i==n&&o==r||e.push(new Lf(i,o))),e}(t),n=new zf(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,r=2==t.length?t[1].pos:n;return n>-1&&r>-1?Ec.single(n+e,r+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=i&&i.node==e.focusNode&&i.offset==e.focusOffset||!Yu(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),r=o&&o.node==e.anchorNode&&o.offset==e.anchorOffset||!Yu(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset);this.newSel=Ec.single(r,n)}}}function gp(t,e){let n,{newSel:r}=e,i=t.state.selection.main;if(e.bounds){let{from:r,to:o}=e.bounds,s=i.from,a=null;(8===t.inputState.lastKeyCode&&t.inputState.lastKeyTime>Date.now()-100||$h.android&&e.text.length<o-r)&&(s=i.to,a="end");let l=function(t,e,n,r){let i=Math.min(t.length,e.length),o=0;for(;o<i&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;return"end"==r&&(n-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&t.length<e.length?(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o):a<o&&(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}(t.state.doc.sliceString(r,o,Bf),e.text,s-r,a);l&&($h.chrome&&13==t.inputState.lastKeyCode&&l.toB==l.from+2&&"￿￿"==e.text.slice(l.from,l.toB)&&l.toB--,n={from:r+l.from,to:r+l.toA,insert:Jl.of(e.text.slice(l.from,l.toB).split(Bf))})}else!r||t.hasFocus&&t.state.facet(Of)&&!r.main.eq(i)||(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:($h.mac||$h.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())?(r&&2==n.insert.length&&(r=Ec.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Jl.of([" "])}):$h.chrome&&n&&n.from==n.to&&n.from==i.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(r&&(r=Ec.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Jl.of([" "])}),n){let e=t.state;if($h.ios&&t.inputState.flushIOSKey(t))return!0;if($h.android&&(n.from==i.from&&n.to==i.to&&1==n.insert.length&&2==n.insert.lines&&hh(t.contentDOM,"Enter",13)||n.from==i.from-1&&n.to==i.to&&0==n.insert.length&&hh(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&0==n.insert.length&&hh(t.contentDOM,"Delete",46)))return!0;let o,s=n.insert.toString();if(t.state.facet(hf).some((e=>e(t,n.from,n.to,s))))return!0;if(t.inputState.composing>=0&&t.inputState.composing++,n.from>=i.from&&n.to<=i.to&&n.to-n.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let r=i.from<n.from?e.sliceDoc(i.from,n.from):"",s=i.to>n.to?e.sliceDoc(n.to,i.to):"";o=e.replaceSelection(t.state.toText(r+n.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=e.changes(n),a=r&&!e.selection.main.eq(r.main)&&r.main.to<=s.newLength?r.main:void 0;if(e.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=i.to&&n.to>=i.to-10){let r=t.state.sliceDoc(n.from,n.to),l=Yf(t)||t.state.doc.lineAt(i.head),c=i.to-n.to,u=i.to-i.from;o=e.changeByRange((o=>{if(o.from==i.from&&o.to==i.to)return{changes:s,range:a||o.map(s)};let h=o.to-c,f=h-r.length;if(o.to-o.from!=u||t.state.sliceDoc(f,h)!=r||l&&o.to>=l.from&&o.from<=l.to)return{range:o};let d=e.changes({from:f,to:h,insert:n.insert}),p=o.to-i.to;return{changes:d,range:a?Ec.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):o.map(d)}}))}else o={changes:s,selection:a&&e.selection.replaceRange(a)}}let a="input.type";return t.composing&&(a+=".compose",t.inputState.compositionFirstChange&&(a+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(o,{scrollIntoView:!0,userEvent:a}),!0}if(r&&!r.main.eq(i)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:e,userEvent:n}),!0}return!1}const mp={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Op=$h.ie&&$h.ie_version<=11;class vp{constructor(t){this.view=t,this.active=!1,this.selectionRange=new sh,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);($h.ie&&$h.ie_version<=11||$h.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),Op&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resize.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runScrollHandlers(this.view,t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(Of)?n.root.activeElement!=this.dom:!Hu(n.dom,r))return;let i=r.anchorNode&&n.docView.nearest(r.anchorNode);i&&i.ignoreEvent(t)?e||(this.selectionChanged=!1):($h.ie&&$h.ie_version<=11||$h.android&&$h.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Ku(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=$h.safari&&11==t.root.nodeType&&function(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function(t){let e=null;function n(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return Ku(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}(this.view)||Fu(t.root);if(!e||this.selectionRange.eq(e))return!1;let n=Hu(this.dom,e);return n&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(;;)if(r){if(1!=n.nodeType)return!1;let t=n.childNodes[r-1];"false"==t.contentEditable?r--:(n=t,r=nh(n))}else{if(n==t)return!0;r=th(n),n=n.parentNode}}(this.dom,e)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(e),n&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,mp),Op&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Op&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),!this.flush()&&t.force&&hh(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let t=this.queue;for(let e of this.observer.takeRecords())t.push(e);t.length&&(this.queue=[]);let e=-1,n=-1,r=!1;for(let i of t){let t=this.readMutation(i);t&&(t.typeOver&&(r=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:r}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),r=this.selectionChanged&&Hu(this.dom,this.selectionRange);return t<0&&!r?null:(t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new pp(this.view,t,e,n))}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return!1;let n=this.view.state,r=gp(this.view,e);return this.view.state==n&&this.view.update([]),r}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.dirty|=4),"childList"==t.type){let n=bp(e,t.previousSibling||t.target.previousSibling,-1),r=bp(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:r?e.posBefore(r):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resize)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function bp(t,e,n){for(;e;){let r=gh.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}class yp{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new Jd(t.state||gu.create(t)),this.plugins=this.state.facet(bf).map((t=>new wf(t)));for(let t of this.plugins)t.update(this);this.observer=new vp(this),this.inputState=new hd(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Gf(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(1==t.length&&t[0]instanceof ou?t[0]:this.state.update(...t))}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,r=!1,i=this.state;for(let e of t){if(e.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=e.state}if(this.destroyed)return void(this.viewState.state=i);let o=this.observer.delayedAndroidKey,s=null;if(o?(this.observer.clearDelayedAndroidKey(),s=this.observer.readChange(),(s&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(s=null)):this.observer.clear(),i.facet(gu.phrases)!=this.state.facet(gu.phrases))return this.setState(i);e=Ef.create(this,i,t);let a=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(a&&(a=a.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;a=new pf(t.empty?t:Ec.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(gf)&&(a=t.value)}this.viewState.update(e,a),this.bidiCache=Sp.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(_f)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(sp)!=e.state.facet(sp)&&(this.viewState.mustMeasureContent=!0),(n||r||a||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!e.empty)for(let t of this.state.facet(uf))t(e);s&&!gp(this,s)&&o.force&&hh(this.contentDOM,o.key,o.keyCode)}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new Jd(t),this.plugins=t.facet(bf).map((t=>new wf(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView=new Gf(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(bf),n=t.state.facet(bf);if(e!=n){let r=[];for(let i of n){let n=e.indexOf(i);if(n<0)r.push(new wf(i));else{let e=this.plugins[n];e.mustUpdate=t,r.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,{scrollHeight:n,scrollTop:r,clientHeight:i}=this.scrollDOM,o=r>n-i-4?n:r;try{for(let t=0;;t++){this.updateState=1;let n=this.viewport,r=this.viewState.lineBlockAtHeight(o),i=this.viewState.measure(this);if(!i&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let s=[];4&i||([this.measureRequests,s]=[s,this.measureRequests]);let a=s.map((t=>{try{return t.read(this)}catch(t){return mf(this.state,t),xp}})),l=Ef.create(this,this.state,[]),c=!1,u=!1;l.flags|=i,e?e.flags|=i:e=l,this.updateState=2,l.empty||(this.updatePlugins(l),this.inputState.update(l),this.updateAttrs(),c=this.docView.update(l));for(let t=0;t<s.length;t++)if(a[t]!=xp)try{let e=s[t];e.write&&e.write(a[t],this)}catch(t){mf(this.state,t)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=!0;else{let t=this.viewState.lineBlockAt(r.from).top-r.top;(t>1||t<-1)&&(this.scrollDOM.scrollTop+=t,u=!0)}if(c&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!u&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(uf))t(e)}get themeClasses(){return lp+" "+(this.state.facet(ap)?up:cp)+" "+this.state.facet(sp)}updateAttrs(){let t=kp(this,xf,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Of)?"true":"false",class:"cm-content",style:`${$h.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),kp(this,Sf,e);let n=this.observer.ignore((()=>{let n=zh(this.contentDOM,this.contentAttrs,e),r=zh(this.dom,this.editorAttrs,t);return n||r}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)t.is(yp.announce)&&(e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(_f),Xu.mount(this.root,this.styleModules.concat(dp).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return ud(this,t,cd(this,t,e,n))}moveByGroup(t,e){return ud(this,t,cd(this,t,e,(e=>function(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return t=>{let e=r(t);return i==fu.Space&&(i=e),i==e}}(this,t.head,e))))}moveToLineBoundary(t,e,n=!0){return function(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=r&&t.lineWrapping?t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),r=t.textDirectionAt(i.from),s=t.posAtCoords({x:n==(r==Tf.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(null!=s)return Ec.cursor(s,n?-1:1)}let s=tf.find(t.docView,e.head),a=s?n?s.posAtEnd:s.posAtStart:n?i.to:i.from;return Ec.cursor(a,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return ud(this,t,function(t,e,n,r){let i=e.head,o=n?1:-1;if(i==(n?t.state.doc.length:0))return Ec.cursor(i,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i),u=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-e.from))),s=(o<0?e.top:e.bottom)+u}let h=l.left+a,f=null!=r?r:t.defaultLineHeight>>1;for(let n=0;;n+=10){let r=s+(f+n)*o,c=ad(t,{x:h,y:r},!1,o);if(r<l.top||r>l.bottom||(o<0?c<i:c>i))return Ec.cursor(c,e.assoc,void 0,a)}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),ad(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(t),i=this.bidiSpans(r);return ih(n,i[Vf.find(i,t-r.from,-1,e)].dir==Tf.LTR==e>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(ff)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>wp)return Zf(t.length);let e=this.textDirectionAt(t.from);for(let n of this.bidiCache)if(n.from==t.from&&n.dir==e)return n.order;let n=function(t,e){let n=t.length,r=e==$f?1:2,i=e==$f?2:1;if(!t||1==r&&!Xf.test(t))return Zf(n);for(let e=0,i=r,s=r;e<n;e++){let n=(o=t.charCodeAt(e))<=247?Af[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?Df[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8203?256:64336<=o&&o<=65023?4:8204==o?256:1;512==n?n=i:8==n&&4==s&&(n=16),Uf[e]=4==n?2:n,7&n&&(s=n),i=n}var o;for(let t=0,e=r,i=r;t<n;t++){let r=Uf[t];if(128==r)t<n-1&&e==Uf[t+1]&&24&e?r=Uf[t]=e:Uf[t]=256;else if(64==r){let r=t+1;for(;r<n&&64==Uf[r];)r++;let o=t&&8==e||r<n&&8==Uf[r]?1==i?1:8:256;for(let e=t;e<r;e++)Uf[e]=o;t=r-1}else 8==r&&1==i&&(Uf[t]=1);e=r,7&r&&(i=r)}for(let e,o,s,a=0,l=0,c=0;a<n;a++)if(o=jf[e=t.charCodeAt(a)])if(o<0){for(let t=l-3;t>=0;t-=3)if(qf[t+1]==-o){let e=qf[t+2],n=2&e?r:4&e?1&e?i:r:0;n&&(Uf[a]=Uf[qf[t]]=n),l=t;break}}else{if(189==qf.length)break;qf[l++]=a,qf[l++]=e,qf[l++]=c}else if(2==(s=Uf[a])||1==s){let t=s==r;c=t?0:1;for(let e=l-3;e>=0;e-=3){let n=qf[e+2];if(2&n)break;if(t)qf[e+2]|=2;else{if(4&n)break;qf[e+2]|=4}}}for(let t=0;t<n;t++)if(256==Uf[t]){let e=t+1;for(;e<n&&256==Uf[e];)e++;let i=1==(t?Uf[t-1]:r),o=i==(1==(e<n?Uf[e]:r))?i?1:2:r;for(let n=t;n<e;n++)Uf[n]=o;t=e-1}let s=[];if(1==r)for(let t=0;t<n;){let e=t,r=1!=Uf[t++];for(;t<n&&r==(1!=Uf[t]);)t++;if(r)for(let n=t;n>e;){let t=n,r=2!=Uf[--n];for(;n>e&&r==(2!=Uf[n-1]);)n--;s.push(new Vf(n,t,r?2:1))}else s.push(new Vf(e,t,0))}else for(let t=0;t<n;){let e=t,r=2==Uf[t++];for(;t<n&&r==(2==Uf[t]);)t++;s.push(new Vf(e,t,r?1:2))}return s}(t.text,e);return this.bidiCache.push(new Sp(t.from,t.to,e,n)),n}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||$h.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{ch(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return gf.of(new pf("number"==typeof t?Ec.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}static domEventHandlers(t){return yf.define((()=>({})),{eventHandlers:t})}static theme(t,e){let n=Xu.newName(),r=[sp.of(n),_f.of(fp(`.${n}`,t))];return e&&e.dark&&r.push(ap.of(!0)),r}static baseTheme(t){return Zc.lowest(_f.of(fp("."+lp,t,hp)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),r=n&&gh.get(n)||gh.get(t);return(null===(e=null==r?void 0:r.rootView)||void 0===e?void 0:e.view)||null}}yp.styleModule=_f,yp.inputHandler=hf,yp.perLineTextDirection=ff,yp.exceptionSink=cf,yp.updateListener=uf,yp.editable=Of,yp.mouseSelectionStyle=lf,yp.dragMovesSelection=af,yp.clickAddsSelectionRange=sf,yp.decorations=kf,yp.atomicRanges=Cf,yp.scrollMargins=Qf,yp.darkTheme=ap,yp.contentAttributes=Sf,yp.editorAttributes=xf,yp.lineWrapping=yp.contentAttributes.of({class:"cm-lineWrapping"}),yp.announce=iu.define();const wp=4096,xp={};class Sp{constructor(t,e,n,r){this.from=t,this.to=e,this.dir=n,this.order=r}static update(t,e){if(e.empty)return t;let n=[],r=t.length?t[t.length-1].dir:Tf.LTR;for(let i=Math.max(0,t.length-10);i<t.length;i++){let o=t[i];o.dir!=r||e.touchesRange(o.from,o.to)||n.push(new Sp(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.order))}return n}}function kp(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let e=r[i],o="function"==typeof e?e(t):e;o&&Nh(o,n)}return n}const Cp=$h.mac?"mac":$h.windows?"win":$h.linux?"linux":"key";function Qp(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}const _p=Zc.default(yp.domEventHandlers({keydown:(t,e)=>Rp(Tp(e.state),t,e,"editor")})),Pp=Rc.define({enables:_p}),Ep=new WeakMap;function Tp(t){let e=t.facet(Pp),n=Ep.get(e);return n||Ep.set(e,n=function(t,e=Cp){let n=Object.create(null),r=Object.create(null),i=(t,e)=>{let n=r[t];if(null==n)r[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},o=(t,r,o,s)=>{var a,l;let c=n[t]||(n[t]=Object.create(null)),u=r.split(/ (?!$)/).map((t=>function(t,e){const n=t.split(/-(?!$)/);let r,i,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let t=0;t<n.length-1;++t){const a=n[t];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==e?s=!0:i=!0}}return r&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(t,e)));for(let e=1;e<u.length;e++){let n=u.slice(0,e).join(" ");i(n,!0),c[n]||(c[n]={preventDefault:!0,run:[e=>{let r=$p={view:e,prefix:n,scope:t};return setTimeout((()=>{$p==r&&($p=null)}),4e3),!0}]})}let h=u.join(" ");i(h,!1);let f=c[h]||(c[h]={preventDefault:!1,run:(null===(l=null===(a=c._any)||void 0===a?void 0:a.run)||void 0===l?void 0:l.slice())||[]});o&&f.run.push(o),s&&(f.preventDefault=!0)};for(let r of t){let t=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let e of t){let t=n[e]||(n[e]=Object.create(null));t._any||(t._any={preventDefault:!1,run:[]});for(let e in t)t[e].run.push(r.any)}let i=r[e]||r.key;if(i)for(let e of t)o(e,i,r.run,r.preventDefault),r.shift&&o(e,"Shift-"+i,r.shift,r.preventDefault)}return n}(e.reduce(((t,e)=>t.concat(e)),[]))),n}let $p=null;function Rp(t,e,n,r){let i=function(t){var e=!(Wu&&(t.ctrlKey||t.altKey||t.metaKey)||zu&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?Iu:Zu)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(e),o=Oc(gc(i,0))==i.length&&" "!=i,s="",a=!1;$p&&$p.view==n&&$p.scope==r&&(s=$p.prefix+" ",(a=pd.indexOf(e.keyCode)<0)&&($p=null));let l,c,u=new Set,h=t=>{if(t){for(let r of t.run)if(!u.has(r)&&(u.add(r),r(n,e)))return!0;t.preventDefault&&(a=!0)}return!1},f=t[r];if(f){if(h(f[s+Qp(i,e,!o)]))return!0;if(o&&(e.altKey||e.metaKey||e.ctrlKey)&&(l=Zu[e.keyCode])&&l!=i){if(h(f[s+Qp(l,e,!0)]))return!0;if(e.shiftKey&&(c=Iu[e.keyCode])!=i&&c!=l&&h(f[s+Qp(c,e,!1)]))return!0}else if(o&&e.shiftKey&&h(f[s+Qp(i,e,!0)]))return!0;if(h(f._any))return!0}return a}class Mp{constructor(t,e,n,r,i){this.className=t,this.left=e,this.top=n,this.width=r,this.height=i}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className==this.className&&(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",this.width>=0&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}}class Ap{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(Dp)!=t.state.facet(Dp)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&t.view.requestMeasure(this.measureReq)}setOrder(t){let e=0,n=t.facet(Dp);for(;e<n.length&&n[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}draw(t){if(t.length!=this.drawn.length||t.some(((t,e)=>!function(t,e){return t.constructor==e.constructor&&t.eq(e)}(t,this.drawn[e])))){let e=this.dom.firstChild,n=0;for(let r of t)r.update&&e&&r.constructor&&this.drawn[n].constructor&&r.update(e,this.drawn[n])?(e=e.nextSibling,n++):this.dom.insertBefore(r.draw(),e);for(;e;){let t=e.nextSibling;e.remove(),e=t}this.drawn=t}}destroy(){this.dom.remove()}}const Dp=Rc.define();function jp(t){return[yf.define((e=>new Ap(e,t))),Dp.of(t)]}const qp=!$h.ios,Xp=Rc.define({combine:t=>mu(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})});function Vp(t={}){return[Xp.of(t),Zp,Np,zp,df.of(!0)]}function Up(t){return t.startState.facet(Xp)!=t.startState.facet(Xp)}const Zp=jp({above:!0,markers(t){let{state:e}=t,n=e.facet(Xp),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty?!o||qp:n.drawRangeCursor){let e=Fp(t,i,o);e&&r.push(e)}}return r},update(t,e){t.transactions.some((t=>t.scrollIntoView))&&(e.style.animationName="cm-blink"==e.style.animationName?"cm-blink2":"cm-blink");let n=Up(t);return n&&Ip(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){Ip(e.state,t)},class:"cm-cursorLayer"});function Ip(t,e){e.style.animationDuration=t.facet(Xp).cursorBlinkRate+"ms"}const Np=jp({above:!1,markers:t=>t.state.selection.ranges.map((e=>e.empty?[]:function(t,e){if(e.to<=t.viewport.from||e.from>=t.viewport.to)return[];let n=Math.max(e.from,t.viewport.from),r=Math.min(e.to,t.viewport.to),i=t.textDirection==Tf.LTR,o=t.contentDOM,s=o.getBoundingClientRect(),a=Wp(t),l=window.getComputedStyle(o.firstChild),c=s.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),u=s.right-parseInt(l.paddingRight),h=Gp(t,n),f=Gp(t,r),d=h.type==Lh.Text?h:null,p=f.type==Lh.Text?f:null;if(t.lineWrapping&&(d&&(d=Lp(t,n,d)),p&&(p=Lp(t,r,p))),d&&p&&d.from==p.from)return m(O(e.from,e.to,d));{let n=d?O(e.from,null,d):v(h,!1),r=p?O(null,e.to,p):v(f,!0),i=[];return(d||h).to<(p||f).from-1?i.push(g(c,n.bottom,u,r.top)):n.bottom<r.top&&t.elementAtHeight((n.bottom+r.top)/2).type==Lh.Text&&(n.bottom=r.top=(n.bottom+r.top)/2),m(n).concat(i).concat(m(r))}function g(t,e,n,r){return new Mp("cm-selectionBackground",t-a.left,e-a.top-.01,n-t,r-e+.01)}function m({top:t,bottom:e,horizontal:n}){let r=[];for(let i=0;i<n.length;i+=2)r.push(g(n[i],t,n[i+1],e));return r}function O(e,n,r){let o=1e9,s=-1e9,a=[];function l(e,n,l,h,f){let d=t.coordsAtPos(e,e==r.to?-2:2),p=t.coordsAtPos(l,l==r.from?2:-2);o=Math.min(d.top,p.top,o),s=Math.max(d.bottom,p.bottom,s),f==Tf.LTR?a.push(i&&n?c:d.left,i&&h?u:p.right):a.push(!i&&h?c:p.left,!i&&n?u:d.right)}let h=null!=e?e:r.from,f=null!=n?n:r.to;for(let r of t.visibleRanges)if(r.to>h&&r.from<f)for(let i=Math.max(r.from,h),o=Math.min(r.to,f);;){let r=t.state.doc.lineAt(i);for(let s of t.bidiSpans(r)){let t=s.from+r.from,a=s.to+r.from;if(t>=o)break;a>i&&l(Math.max(t,i),null==e&&t<=h,Math.min(a,o),null==n&&a>=f,s.dir)}if(i=r.to+1,i>=o)break}return 0==a.length&&l(h,null==e,f,null==n,t.textDirection),{top:o,bottom:s,horizontal:a}}function v(t,e){let n=s.top+(e?t.top:t.bottom);return{top:n,bottom:n,horizontal:[]}}}(t,e))).reduce(((t,e)=>t.concat(e))),update:(t,e)=>t.docChanged||t.selectionSet||t.viewportChanged||Up(t),class:"cm-selectionLayer"}),Bp={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};qp&&(Bp[".cm-line"].caretColor="transparent !important");const zp=Zc.highest(yp.theme(Bp));function Wp(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Tf.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function Lp(t,e,n){let r=Ec.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:Lh.Text}}function Gp(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type))for(let t of n.type)if(t.to>e||t.to==e&&(t.to==n.to||t.type==Lh.Text))return t;return n}function Fp(t,e,n){let r=t.coordsAtPos(e.head,e.assoc||1);if(!r)return null;let i=Wp(t);return new Mp(n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",r.left-i.left,r.top-i.top,-1,r.bottom-r.top)}const Yp=iu.define({map:(t,e)=>null==t?null:e.mapPos(t)}),Hp=Vc.define({create:()=>null,update:(t,e)=>(null!=t&&(t=e.changes.mapPos(t)),e.effects.reduce(((t,e)=>e.is(Yp)?e.value:t),t))}),Jp=yf.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Hp);null==n?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Hp)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Hp),e=null!=t&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Hp)!=t&&this.view.dispatch({effects:Yp.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){t.target!=this.view.contentDOM&&this.view.contentDOM.contains(t.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Kp(t,e,n,r,i){e.lastIndex=0;for(let o,s=t.iterRange(n,r),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=e.exec(s.value);)i(a+o.index,o)}class tg{constructor(t){const{regexp:e,decoration:n,decorate:r,boundary:i,maxLength:o=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,r)this.addMatch=(t,e,n,i)=>r(i,n,n+t[0].length,t,e);else if("function"==typeof n)this.addMatch=(t,e,r,i)=>{let o=n(t,e,r);o&&i(r,r+t[0].length,o)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(t,e,r,i)=>i(r,r+t[0].length,n)}this.boundary=i,this.maxLength=o}createDeco(t){let e=new xu,n=e.add.bind(e);for(let{from:e,to:r}of function(t,e){let n=t.visibleRanges;if(1==n.length&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(t,this.maxLength))Kp(t.state.doc,this.regexp,e,r,((e,r)=>this.addMatch(r,t,e,n)));return e.finish()}updateDeco(t,e){let n=1e9,r=-1;return t.docChanged&&t.changes.iterChanges(((e,i,o,s)=>{s>t.view.viewport.from&&o<t.view.viewport.to&&(n=Math.min(o,n),r=Math.max(s,r))})),t.viewportChanged||r-n>1e3?this.createDeco(t.view):r>-1?this.updateRange(t.view,e.map(t.changes),n,r):e}updateRange(t,e,n,r){for(let i of t.visibleRanges){let o=Math.max(i.from,n),s=Math.min(i.to,r);if(s>o){let n=t.state.doc.lineAt(o),r=n.to<s?t.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let c,u=[],h=(t,e,n)=>u.push(n.range(t,e));if(n==r)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;)this.addMatch(c,t,c.index+n.from,h);else Kp(t.state.doc,this.regexp,a,l,((e,n)=>this.addMatch(n,t,e,h)));e=e.update({filterFrom:a,filterTo:l,filter:(t,e)=>t<a||e>l,add:u})}}return e}}const eg=null!=/x/.unicode?"gu":"g",ng=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",eg),rg={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ig=null;const og=Rc.define({combine(t){let e=mu(t,{render:null,specialChars:ng,addSpecialChars:null});return(e.replaceTabs=!function(){var t;if(null==ig&&"undefined"!=typeof document&&document.body){let e=document.body.style;ig=null!=(null!==(t=e.tabSize)&&void 0!==t?t:e.MozTabSize)}return ig||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,eg)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,eg)),e}});function sg(t={}){return[og.of(t),ag||(ag=yf.fromClass(class{constructor(t){this.view=t,this.decorations=Gh.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(og)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new tg({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,o=gc(e[0],0);if(9==o){let t=i.lineAt(r),e=n.state.tabSize,o=Mu(t.text,e,r-t.from);return Gh.replace({widget:new cg((e-o%e)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=Gh.replace({widget:new lg(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(og);t.startState.facet(og)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))]}let ag=null;class lg extends Wh{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=function(t){return t>=32?"•":10==t?"␤":String.fromCharCode(9216+t)}(this.code),n=t.state.phrase("Control character")+" "+(rg[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,e);if(r)return r;let i=document.createElement("span");return i.textContent=e,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class cg extends Wh{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="\t",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}const ug=Gh.line({class:"cm-activeLine"}),hg=yf.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(ug.range(i.from)),e=i.from)}return Gh.set(n)}},{decorations:t=>t.decorations}),fg=2e3;function dg(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,o=i>fg?-1:i==r.length?function(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}(t,e.clientX):Mu(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function pg(t){let e=(null==t?void 0:t.eventFilter)||(t=>t.altKey&&0==t.button);return yp.mouseSelectionStyle.of(((t,n)=>e(n)?function(t,e){let n=dg(t,e),r=t.state.selection;return n?{update(t){if(t.docChanged){let e=t.changes.mapPos(t.startState.doc.line(n.line).from),i=t.state.doc.lineAt(e);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(t.changes)}},get(e,i,o){let s=dg(t,e);if(!s)return r;let a=function(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),o=[];if(e.off>fg||n.off>fg||e.col<0||n.col<0){let s=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let e=r;e<=i;e++){let n=t.doc.line(e);n.length<=a&&o.push(Ec.range(n.from+s,n.to+a))}}else{let s=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let e=r;e<=i;e++){let n=t.doc.line(e),r=Au(n.text,s,t.tabSize,!0);if(r<0)o.push(Ec.cursor(n.to));else{let e=Au(n.text,a,t.tabSize);o.push(Ec.range(n.from+r,n.from+e))}}}return o}(t.state,n,s);return a.length?o?Ec.create(a.concat(r.ranges)):Ec.create(a):r}}:null}(t,n):null))}const gg={Alt:[18,t=>t.altKey],Control:[17,t=>t.ctrlKey],Shift:[16,t=>t.shiftKey],Meta:[91,t=>t.metaKey]},mg={style:"cursor: crosshair"};function Og(t={}){let[e,n]=gg[t.key||"Alt"],r=yf.fromClass(class{constructor(t){this.view=t,this.isDown=!1}set(t){this.isDown!=t&&(this.isDown=t,this.view.update([]))}},{eventHandlers:{keydown(t){this.set(t.keyCode==e||n(t))},keyup(t){t.keyCode!=e&&n(t)||this.set(!1)},mousemove(t){this.set(n(t))}}});return[r,yp.contentAttributes.of((t=>{var e;return(null===(e=t.plugin(r))||void 0===e?void 0:e.isDown)?mg:null}))]}const vg="-10000px";class bg{constructor(t,e,n){this.facet=e,this.createTooltipView=n,this.input=t.state.facet(e),this.tooltips=this.input.filter((t=>t)),this.tooltipViews=this.tooltips.map(n)}update(t){var e;let n=t.state.facet(this.facet),r=n.filter((t=>t));if(n===this.input){for(let e of this.tooltipViews)e.update&&e.update(t);return!1}let i=[];for(let e=0;e<r.length;e++){let n=r[e],o=-1;if(n){for(let t=0;t<this.tooltips.length;t++){let e=this.tooltips[t];e&&e.create==n.create&&(o=t)}if(o<0)i[e]=this.createTooltipView(n);else{let n=i[e]=this.tooltipViews[o];n.update&&n.update(t)}}}for(let t of this.tooltipViews)i.indexOf(t)<0&&(t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t));return this.input=n,this.tooltips=r,this.tooltipViews=i,!0}}function yg(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const wg=Rc.define({combine:t=>{var e,n,r;return{position:$h.ios?"absolute":(null===(e=t.find((t=>t.position)))||void 0===e?void 0:e.position)||"fixed",parent:(null===(n=t.find((t=>t.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=t.find((t=>t.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||yg}}}),xg=yf.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(wg);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new bg(t,Cg,(t=>this.createTooltip(t))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(wg);if(r.position!=this.position){this.position=r.position;for(let t of this.manager.tooltipViews)t.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let t of this.manager.tooltipViews)this.container.appendChild(t.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=vg,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let e of this.manager.tooltipViews)e.dom.remove(),null===(t=e.destroy)||void 0===t||t.call(e);null===(e=this.intersectionObserver)||void 0===e||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map(((t,e)=>{let n=this.manager.tooltipViews[e];return n.getCoords?n.getCoords(t.pos):this.view.coordsAtPos(t.pos)})),size:this.manager.tooltipViews.map((({dom:t})=>t.getBoundingClientRect())),space:this.view.state.facet(wg).tooltipSpace(this.view)}}writeMeasure(t){let{editor:e,space:n}=t,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let o=this.manager.tooltips[i],s=this.manager.tooltipViews[i],{dom:a}=s,l=t.pos[i],c=t.size[i];if(!l||l.bottom<=Math.max(e.top,n.top)||l.top>=Math.min(e.bottom,n.bottom)||l.right<Math.max(e.left,n.left)-.1||l.left>Math.min(e.right,n.right)+.1){a.style.top=vg;continue}let u=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,h=u?7:0,f=c.right-c.left,d=c.bottom-c.top,p=s.offset||kg,g=this.view.textDirection==Tf.LTR,m=c.width>n.right-n.left?g?n.left:n.right-c.width:g?Math.min(l.left-(u?14:0)+p.x,n.right-f):Math.max(n.left,l.left-f+(u?14:0)-p.x),O=!!o.above;!o.strictSide&&(O?l.top-(c.bottom-c.top)-p.y<n.top:l.bottom+(c.bottom-c.top)+p.y>n.bottom)&&O==n.bottom-l.bottom>l.top-n.top&&(O=!O);let v=(O?l.top-n.top:n.bottom-l.bottom)-h;if(v<d&&!1!==s.resize){if(v<this.view.defaultLineHeight){a.style.top=vg;continue}a.style.height=(d=v)+"px"}else a.style.height&&(a.style.height="");let b=O?l.top-d-h-p.y:l.bottom+h+p.y,y=m+f;if(!0!==s.overlap)for(let t of r)t.left<y&&t.right>m&&t.top<b+d&&t.bottom>b&&(b=O?t.top-d-2-h:t.bottom+h+2);"absolute"==this.position?(a.style.top=b-t.parent.top+"px",a.style.left=m-t.parent.left+"px"):(a.style.top=b+"px",a.style.left=m+"px"),u&&(u.style.left=l.left+(g?p.x:-p.x)-(m+14-7)+"px"),!0!==s.overlap&&r.push({left:m,top:b,right:y,bottom:b+d}),a.classList.toggle("cm-tooltip-above",O),a.classList.toggle("cm-tooltip-below",!O),s.positioned&&s.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=vg}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Sg=yp.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),kg={x:0,y:0},Cg=Rc.define({enables:[xg,Sg]}),Qg=Rc.define();class _g{constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new bg(t,Qg,(t=>this.createHostedView(t)))}static create(t){return new _g(t)}createHostedView(t){let e=t.create(this.view);return e.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(e.dom),this.mounted&&e.mount&&e.mount(this.view),e}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}}const Pg=Cg.compute([Qg],(t=>{let e=t.facet(Qg).filter((t=>t));return 0===e.length?null:{pos:Math.min(...e.map((t=>t.pos))),end:Math.max(...e.filter((t=>null!=t.end)).map((t=>t.end))),create:_g.create,above:e[0].above,arrow:e.some((t=>t.arrow))}}));class Eg{constructor(t,e,n,r,i){this.view=t,this.source=e,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:t}=this,e=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(null==e)return;let n=this.view.coordsAtPos(e);if(null==n||t.y<n.top||t.y>n.bottom||t.x<n.left-this.view.defaultCharacterWidth||t.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(e)).find((t=>t.from<=e&&t.to>=e)),i=r&&r.dir==Tf.RTL?-1:1,o=this.source(this.view,e,t.x<n.left?-i:i);if(null==o?void 0:o.then){let t=this.pending={pos:e};o.then((e=>{this.pending==t&&(this.pending=null,e&&this.view.dispatch({effects:this.setHover.of(e)}))}),(t=>mf(this.view.state,t,"hover tooltip")))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(t){var e;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!Tg(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,i=null!==(e=null==n?void 0:n.end)&&void 0!==e?e:r;(r==i?this.view.posAtCoords(this.lastMove)==r:function(t,e,n,r,i,o){let s=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let c=s.getClientRects();s.detach();for(let t=0;t<c.length;t++){let e=c[t];if(Math.max(e.top-i,i-e.bottom,e.left-r,r-e.right)<=6)return!0}return!1}(this.view,r,i,t.clientX,t.clientY))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Tg(t.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Tg(t){for(let e=t;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip"))return!0;return!1}function $g(t,e={}){let n=iu.define(),r=Vc.define({create:()=>null,update(t,r){if(t&&(e.hideOnChange&&(r.docChanged||r.selection)||e.hideOn&&e.hideOn(r,t)))return null;if(t&&r.docChanged){let e=r.changes.mapPos(t.pos,-1,bc.TrackDel);if(null==e)return null;let n=Object.assign(Object.create(null),t);n.pos=e,null!=t.end&&(n.end=r.changes.mapPos(t.end)),t=n}for(let e of r.effects)e.is(n)&&(t=e.value),e.is(Rg)&&(t=null);return t},provide:t=>Qg.from(t)});return[r,yf.define((i=>new Eg(i,t,r,n,e.hoverTime||300))),Pg]}const Rg=iu.define(),Mg=Rc.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Ag(t,e){let n=t.plugin(Dg),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Dg=yf.fromClass(class{constructor(t){this.input=t.state.facet(Xg),this.specs=this.input.filter((t=>t)),this.panels=this.specs.map((e=>e(t)));let e=t.state.facet(Mg);this.top=new jg(t,!0,e.topContainer),this.bottom=new jg(t,!1,e.bottomContainer),this.top.sync(this.panels.filter((t=>t.top))),this.bottom.sync(this.panels.filter((t=>!t.top)));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(t){let e=t.state.facet(Mg);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new jg(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new jg(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Xg);if(n!=this.input){let e=n.filter((t=>t)),r=[],i=[],o=[],s=[];for(let n of e){let e,a=this.specs.indexOf(n);a<0?(e=n(t.view),s.push(e)):(e=this.panels[a],e.update&&e.update(t)),r.push(e),(e.top?i:o).push(e)}this.specs=e,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let t of s)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}else for(let e of this.panels)e.update&&e.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>yp.scrollMargins.of((e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class jg{constructor(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=qg(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=qg(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function qg(t){let e=t.nextSibling;return t.remove(),e}const Xg=Rc.define({enables:Dg});class Vg extends Ou{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}Vg.prototype.elementClass="",Vg.prototype.toDOM=void 0,Vg.prototype.mapMode=bc.TrackBefore,Vg.prototype.startSide=Vg.prototype.endSide=-1,Vg.prototype.point=!0;const Ug=Rc.define(),Zg={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>wu.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ig=Rc.define();function Ng(t){return[zg(),Ig.of(Object.assign(Object.assign({},Zg),t))]}const Bg=Rc.define({combine:t=>t.some((t=>t))});function zg(t){let e=[Wg];return t&&!1===t.fixed&&e.push(Bg.of(!0)),e}const Wg=yf.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(Ig).map((e=>new Yg(t,e)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!t.state.facet(Bg),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Bg)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=wu.iter(this.view.state.facet(Ug),this.view.viewport.from),r=[],i=this.gutters.map((t=>new Fg(t,this.view.viewport,-this.view.documentPadding.top)));for(let t of this.view.viewportLineBlocks){let e;if(Array.isArray(t.type)){for(let n of t.type)if(n.type==Lh.Text){e=n;break}}else e=t.type==Lh.Text?t:void 0;if(e){r.length&&(r=[]),Gg(n,r,t.from);for(let t of i)t.line(this.view,e,r)}}for(let t of i)t.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Ig),n=t.state.facet(Ig),r=t.docChanged||t.heightChanged||t.viewportChanged||!wu.eq(t.startState.facet(Ug),t.state.facet(Ug),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let e of this.gutters)e.update(t)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=e.indexOf(r);n<0?i.push(new Yg(this.view,r)):(this.gutters[n].update(t),i.push(this.gutters[n]))}for(let t of this.gutters)t.dom.remove(),i.indexOf(t)<0&&t.destroy();for(let t of i)this.dom.appendChild(t.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>yp.scrollMargins.of((e=>{let n=e.plugin(t);return n&&0!=n.gutters.length&&n.fixed?e.textDirection==Tf.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))});function Lg(t){return Array.isArray(t)?t:[t]}function Gg(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Fg{constructor(t,e,n){this.gutter=t,this.height=n,this.localMarkers=[],this.i=0,this.cursor=wu.iter(t.markers,e.from)}line(t,e,n){this.localMarkers.length&&(this.localMarkers=[]),Gg(this.cursor,this.localMarkers,e.from);let r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(t,e,r);i&&r.unshift(i);let o=this.gutter;if(0==r.length&&!o.config.renderEmptyElements)return;let s=e.top-this.height;if(this.i==o.elements.length){let n=new Hg(t,e.height,s,r);o.elements.push(n),o.dom.appendChild(n.dom)}else o.elements[this.i].update(t,e.height,s,r);this.height=e.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class Yg{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in e.domEventHandlers)this.dom.addEventListener(n,(r=>{let i=t.lineBlockAtHeight(r.clientY-t.documentTop);e.domEventHandlers[n](t,i,r)&&r.preventDefault()}));this.markers=Lg(e.markers(t)),e.initialSpacer&&(this.spacer=new Hg(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=Lg(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let e=this.config.updateSpacer(this.spacer.markers[0],t);e!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[e])}let n=t.view.viewport;return!wu.eq(this.markers,e,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(t)}destroy(){for(let t of this.elements)t.destroy()}}class Hg{constructor(t,e,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,n,r)}update(t,e,n,r){this.height!=e&&(this.dom.style.height=(this.height=e)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}(this.markers,r)||this.setMarkers(t,r)}setMarkers(t,e){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let s=o,a=i<e.length?e[i++]:null,l=!1;if(a){let t=a.elementClass;t&&(n+=" "+t);for(let t=o;t<this.markers.length;t++)if(this.markers[t].compare(a)){s=t,l=!0;break}}else s=this.markers.length;for(;o<s;){let t=this.markers[o++];if(t.toDOM){t.destroy(r);let e=r.nextSibling;r.remove(),r=e}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(t),r)),l&&o++}this.dom.className=n,this.markers=e}destroy(){this.setMarkers(null,[])}}const Jg=Rc.define(),Kg=Rc.define({combine:t=>mu(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let n=Object.assign({},t);for(let t in e){let r=n[t],i=e[t];n[t]=r?(t,e,n)=>r(t,e,n)||i(t,e,n):i}return n}})});class tm extends Vg{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function em(t,e){return t.state.facet(Kg).formatNumber(e,t.state)}const nm=Ig.compute([Kg],(t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:t=>t.state.facet(Jg),lineMarker:(t,e,n)=>n.some((t=>t.toDOM))?null:new tm(em(t,t.state.doc.lineAt(e.from).number)),lineMarkerChange:t=>t.startState.facet(Kg)!=t.state.facet(Kg),initialSpacer:t=>new tm(em(t,im(t.state.doc.lines))),updateSpacer(t,e){let n=em(e.view,im(e.view.state.doc.lines));return n==t.number?t:new tm(n)},domEventHandlers:t.facet(Kg).domEventHandlers})));function rm(t={}){return[Kg.of(t),zg(),nm]}function im(t){let e=9;for(;e<t;)e=10*e+9;return e}const om=new class extends Vg{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},sm=Ug.compute(["selection"],(t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(om.range(i)))}return wu.of(e)})),am=1024;let lm=0;class cm{constructor(t,e){this.from=t,this.to=e}}class um{constructor(t={}){this.id=lm++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof t&&(t=fm.match(t)),e=>{let n=t(e);return void 0===n?null:[this,n]}}}um.closedBy=new um({deserialize:t=>t.split(" ")}),um.openedBy=new um({deserialize:t=>t.split(" ")}),um.group=new um({deserialize:t=>t.split(" ")}),um.contextHash=new um({perNode:!0}),um.lookAhead=new um({perNode:!0}),um.mounted=new um({perNode:!0});const hm=Object.create(null);class fm{constructor(t,e,n,r=0){this.name=t,this.props=e,this.id=n,this.flags=r}static define(t){let e=t.props&&t.props.length?Object.create(null):hm,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),r=new fm(t.name||"",e,t.id,n);if(t.props)for(let n of t.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[n[0].id]=n[1]}return r}prop(t){return this.props[t.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(t){if("string"==typeof t){if(this.name==t)return!0;let e=this.prop(um.group);return!!e&&e.indexOf(t)>-1}return this.id==t}static match(t){let e=Object.create(null);for(let n in t)for(let r of n.split(" "))e[r]=t[n];return t=>{for(let n=t.prop(um.group),r=-1;r<(n?n.length:0);r++){let i=e[r<0?t.name:n[r]];if(i)return i}}}}fm.none=new fm("",Object.create(null),0,8);class dm{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let n of this.types){let r=null;for(let e of t){let t=e(n);t&&(r||(r=Object.assign({},n.props)),r[t[0].id]=t[1])}e.push(r?new fm(n.name,r,n.id,n.flags):n)}return new dm(e)}}const pm=new WeakMap,gm=new WeakMap;var mm;!function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"}(mm||(mm={}));class Om{constructor(t,e,n,r,i){if(this.type=t,this.children=e,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[t,e]of i)this.props["number"==typeof t?t:t.id]=e}}toString(){let t=this.prop(um.mounted);if(t&&!t.overlay)return t.tree.toString();let e="";for(let t of this.children){let n=t.toString();n&&(e&&(e+=","),e+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new Pm(this.topNode,t)}cursorAt(t,e=0,n=0){let r=pm.get(this)||this.topNode,i=new Pm(r);return i.moveTo(t,e),pm.set(this,i._tree),i}get topNode(){return new Sm(this,0,0,null)}resolve(t,e=0){let n=xm(pm.get(this)||this.topNode,t,e,!1);return pm.set(this,n),n}resolveInner(t,e=0){let n=xm(gm.get(this)||this.topNode,t,e,!0);return gm.set(this,n),n}iterate(t){let{enter:e,leave:n,from:r=0,to:i=this.length}=t;for(let o=this.cursor((t.mode||0)|mm.IncludeAnonymous);;){let t=!1;if(o.from<=i&&o.to>=r&&(o.type.isAnonymous||!1!==e(o))){if(o.firstChild())continue;t=!0}for(;t&&n&&!o.type.isAnonymous&&n(o),!o.nextSibling();){if(!o.parent())return;t=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:Rm(fm.none,this.children,this.positions,0,this.children.length,0,this.length,((t,e,n)=>new Om(this.type,t,e,n,this.propValues)),t.makeTree||((t,e,n)=>new Om(fm.none,t,e,n)))}static build(t){return function(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=am,reused:o=[],minRepeatType:s=r.types.length}=t,a=Array.isArray(n)?new vm(n,n.length):n,l=r.types,c=0,u=0;function h(t,e,n,g,m){let{id:O,start:v,end:b,size:y}=a,w=u;for(;y<0;){if(a.next(),-1==y){let e=o[O];return n.push(e),void g.push(v-t)}if(-3==y)return void(c=O);if(-4==y)return void(u=O);throw new RangeError(`Unrecognized record size: ${y}`)}let x,S,k=l[O],C=v-t;if(b-v<=i&&(S=function(t,e){let n=a.fork(),r=0,o=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};t:for(let i=n.pos-t;n.pos>i;){let t=n.size;if(n.id==e&&t>=0){u.size=r,u.start=o,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-t;if(t<0||a<i||n.start<c)break;let h=n.id>=s?4:0,f=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break t;h+=4}else n.id>=s&&(h+=4);n.next()}o=f,r+=t,l+=h}return(e<0||r==t)&&(u.size=r,u.start=o,u.skip=l),u.size>4?u:void 0}(a.pos-e,m))){let e=new Uint16Array(S.size-S.skip),n=a.pos-S.size,i=e.length;for(;a.pos>n;)i=p(S.start,e,i);x=new bm(e,b-S.start,r),C=S.start-t}else{let t=a.pos-y;a.next();let e=[],n=[],r=O>=s?O:-1,o=0,l=b;for(;a.pos>t;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(f(e,n,v,o,a.end,l,r,w),o=e.length,l=a.end),a.next()):h(v,t,e,n,r);if(r>=0&&o>0&&o<e.length&&f(e,n,v,o,v,l,r,w),e.reverse(),n.reverse(),r>-1&&o>0){let t=function(t){return(e,n,r)=>{let i,o,s=0,a=e.length-1;if(a>=0&&(i=e[a])instanceof Om){if(!a&&i.type==t&&i.length==r)return i;(o=i.prop(um.lookAhead))&&(s=n[a]+i.length+o)}return d(t,e,n,r,s)}}(k);x=Rm(k,e,n,0,e.length,0,b-v,t,t)}else x=d(k,e,n,b-v,w-b)}n.push(x),g.push(C)}function f(t,e,n,i,o,s,a,l){let c=[],u=[];for(;t.length>i;)c.push(t.pop()),u.push(e.pop()+n-o);t.push(d(r.types[a],c,u,s-o,l-s)),e.push(o-n)}function d(t,e,n,r,i=0,o){if(c){let t=[um.contextHash,c];o=o?[t].concat(o):[t]}if(i>25){let t=[um.lookAhead,i];o=o?[t].concat(o):[t]}return new Om(t,e,n,r,o)}function p(t,e,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=p(t,e,n)}e[--n]=s,e[--n]=o-t,e[--n]=i-t,e[--n]=r}else-3==l?c=r:-4==l&&(u=r);return n}let g=[],m=[];for(;a.pos>0;)h(t.start||0,t.bufferStart||0,g,m,-1);let O=null!==(e=t.length)&&void 0!==e?e:g.length?m[0]+g[0].length:0;return new Om(l[t.topID],g.reverse(),m.reverse(),O)}(t)}}Om.empty=new Om(fm.none,[],[],0);class vm{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new vm(this.buffer,this.index)}}class bm{constructor(t,e,n){this.buffer=t,this.length=e,this.set=n}get type(){return fm.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],n=this.buffer[t+3],r=this.set.types[e],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(t+=4))return i;let o=[];for(;t<n;)o.push(this.childString(t)),t=this.buffer[t+3];return i+"("+o.join(",")+")"}findChild(t,e,n,r,i){let{buffer:o}=this,s=-1;for(let a=t;a!=e&&!(ym(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(t,e,n){let r=this.buffer,i=new Uint16Array(e-t),o=0;for(let s=t,a=0;s<e;){i[a++]=r[s++],i[a++]=r[s++]-n;let e=i[a++]=r[s++]-n;i[a++]=r[s++]-t,o=Math.max(o,e)}return new bm(i,o,this.set)}}function ym(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function wm(t,e){let n=t.childBefore(e);for(;n;){let e=n.lastChild;if(!e||e.to!=n.to)break;e.type.isError&&e.from==e.to?(t=n,n=e.prevSibling):n=e}return t}function xm(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let e=!r&&t instanceof Sm&&t.index<0?null:t.parent;if(!e)return t;t=e}let o=r?0:mm.IgnoreOverlays;if(r)for(let r=t,s=r.parent;s;r=s,s=r.parent)r instanceof Sm&&r.index<0&&(null===(i=s.enter(e,n,o))||void 0===i?void 0:i.from)!=r.from&&(t=s);for(;;){let r=t.enter(e,n,o);if(!r)return t;t=r}}class Sm{constructor(t,e,n,r){this._tree=t,this.from=e,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,n,r,i=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=e>0?s.length:-1;t!=l;t+=e){let l=s[t],c=a[t]+o.from;if(ym(r,n,c,c+l.length))if(l instanceof bm){if(i&mm.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,e,n-c,r);if(s>-1)return new _m(new Qm(o,l,t,c),null,s)}else if(i&mm.IncludeAnonymous||!l.type.isAnonymous||Em(l)){let s;if(!(i&mm.IgnoreMounts)&&l.props&&(s=l.prop(um.mounted))&&!s.overlay)return new Sm(s.tree,c,t,o);let a=new Sm(l,c,t,o);return i&mm.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(e<0?l.children.length-1:0,e,n,r)}}if(i&mm.IncludeAnonymous||!o.type.isAnonymous)return null;if(t=o.index>=0?o.index+e:e<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,n=0){let r;if(!(n&mm.IgnoreOverlays)&&(r=this._tree.prop(um.mounted))&&r.overlay){let n=t-this.from;for(let{from:t,to:i}of r.overlay)if((e>0?t<=n:t<n)&&(e<0?i>=n:i>n))return new Sm(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new Pm(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,e=0){return xm(this,t,e,!1)}resolveInner(t,e=0){return xm(this,t,e,!0)}enterUnfinishedNodesBefore(t){return wm(this,t)}getChild(t,e=null,n=null){let r=km(this,t,e,n);return r.length?r[0]:null}getChildren(t,e=null,n=null){return km(this,t,e,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return Cm(this,t)}}function km(t,e,n,r){let i=t.cursor(),o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function Cm(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class Qm{constructor(t,e,n,r){this.parent=t,this.buffer=e,this.index=n,this.start=r}}class _m{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,n){this.context=t,this._parent=e,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}child(t,e,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.context.start,n);return i<0?null:new _m(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,n=0){if(n&mm.ExcludeBuffers)return null;let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return i<0?null:new _m(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new _m(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new _m(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}cursor(t=0){return new Pm(this,t)}get tree(){return null}toTree(){let t=[],e=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1];t.push(n.slice(r,i,o)),e.push(0)}return new Om(this.type,t,e,this.to-this.from)}resolve(t,e=0){return xm(this,t,e,!1)}resolveInner(t,e=0){return xm(this,t,e,!0)}enterUnfinishedNodesBefore(t){return wm(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,e=null,n=null){let r=km(this,t,e,n);return r.length?r[0]:null}getChildren(t,e=null,n=null){return km(this,t,e,n)}get node(){return this}matchContext(t){return Cm(this,t)}}class Pm{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Sm)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let e=t._parent;e;e=e._parent)this.stack.unshift(e.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)}yieldBuf(t,e){this.index=t;let{start:n,buffer:r}=this.buffer;return this.type=e||r.set.types[r.buffer[t]],this.from=n+r.buffer[t+1],this.to=n+r.buffer[t+2],!0}yield(t){return!!t&&(t instanceof Sm?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,n=this.mode){return this.buffer?!(n&mm.ExcludeBuffers)&&this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&mm.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&mm.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode));let{buffer:e}=this.buffer,n=this.stack.length-1;if(t<0){let t=n<0?0:this.stack[n]+4;if(this.index!=t)return this.yieldBuf(e.findChild(t,this.index,-1,0,4))}else{let t=e.buffer[this.index+3];if(t<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(t)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,n,{buffer:r}=this;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(let t=0;t<this.index;t++)if(r.buffer.buffer[t+3]<this.index)return!1;({index:e,parent:n}=r)}else({index:e,_parent:n}=this._tree);for(;n;({index:e,_parent:n}=n))if(e>-1)for(let r=e+t,i=t<0?-1:n._tree.children.length;r!=i;r+=t){let t=n._tree.children[r];if(this.mode&mm.IncludeAnonymous||t instanceof bm||!t.type.isAnonymous||Em(t))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer)t:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=t;o;o=o._parent)if(o.index==r){if(r==this.index)return o;e=o,n=i+1;break t}r=this.stack[--i]}for(let t=n;t<this.stack.length;t++)e=new _m(this.buffer,e,this.stack[t]);return this.bufferNode=new _m(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==t(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&e&&e(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(t){if(!this.buffer)return Cm(this.node,t);let{buffer:e}=this.buffer,{types:n}=e.set;for(let r=t.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return Cm(this.node,t,r);let o=n[e.buffer[this.stack[i]]];if(!o.isAnonymous){if(t[r]&&t[r]!=o.name)return!1;r--}}return!0}}function Em(t){return t.children.some((t=>t instanceof bm||!t.type.isAnonymous||Em(t)))}const Tm=new WeakMap;function $m(t,e){if(!t.isAnonymous||e instanceof bm||e.type!=t)return 1;let n=Tm.get(e);if(null==n){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Om)){n=1;break}n+=$m(t,r)}Tm.set(e,n)}return n}function Rm(t,e,n,r,i,o,s,a,l){let c=0;for(let n=r;n<i;n++)c+=$m(t,e[n]);let u=Math.ceil(1.5*c/8),h=[],f=[];return function e(n,r,i,s,a){for(let c=i;c<s;){let i=c,d=r[c],p=$m(t,n[c]);for(c++;c<s;c++){let e=$m(t,n[c]);if(p+e>=u)break;p+=e}if(c==i+1){if(p>u){let t=n[i];e(t.children,t.positions,0,t.children.length,r[i]+a);continue}h.push(n[i])}else{let e=r[c-1]+n[c-1].length-d;h.push(Rm(t,n,r,i,c,d,e,null,l))}f.push(d+a-o)}}(e,n,r,i,0),(a||l)(h,f,s)}class Mm{constructor(){this.map=new WeakMap}setBuffer(t,e,n){let r=this.map.get(t);r||this.map.set(t,r=new Map),r.set(e,n)}getBuffer(t,e){let n=this.map.get(t);return n&&n.get(e)}set(t,e){t instanceof _m?this.setBuffer(t.context.buffer,t.index,e):t instanceof Sm&&this.map.set(t.tree,e)}get(t){return t instanceof _m?this.getBuffer(t.context.buffer,t.index):t instanceof Sm?this.map.get(t.tree):void 0}cursorSet(t,e){t.buffer?this.setBuffer(t.buffer.buffer,t.index,e):this.map.set(t.tree,e)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class Am{constructor(t,e,n,r,i=!1,o=!1){this.from=t,this.to=e,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(t,e=[],n=!1){let r=[new Am(0,t.length,t,0,!1,n)];for(let n of e)n.to>t.length&&r.push(n);return r}static applyChanges(t,e,n=128){if(!e.length)return t;let r=[],i=1,o=t.length?t[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<e.length?e[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;o&&o.from<u;){let e=o;if(a>=e.from||u<=e.to||l){let t=Math.max(e.from,a)-l,n=Math.min(e.to,u)-l;e=t>=n?null:new Am(t,n,e.tree,e.offset+l,s>0,!!c)}if(e&&r.push(e),o.to>u)break;o=i<t.length?t[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class Dm{startParse(t,e,n){return"string"==typeof t&&(t=new jm(t)),n=n?n.length?n.map((t=>new cm(t.from,t.to))):[new cm(0,0)]:[new cm(0,t.length)],this.createParse(t,e||[],n)}parse(t,e,n){let r=this.startParse(t,e,n);for(;;){let t=r.advance();if(t)return t}}}class jm{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new um({perNode:!0});let qm=0;class Xm{constructor(t,e,n){this.set=t,this.base=e,this.modified=n,this.id=qm++}static define(t){if(null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let e=new Xm([],null,[]);if(e.set.push(e),t)for(let n of t.set)e.set.push(n);return e}static defineModifier(){let t=new Um;return e=>e.modified.indexOf(t)>-1?e:Um.get(e.base||e,e.modified.concat(t).sort(((t,e)=>t.id-e.id)))}}let Vm=0;class Um{constructor(){this.instances=[],this.id=Vm++}static get(t,e){if(!e.length)return t;let n=e[0].instances.find((n=>n.base==t&&function(t,e){return t.length==e.length&&t.every(((t,n)=>t==e[n]))}(e,n.modified)));if(n)return n;let r=[],i=new Xm(r,t,e);for(let t of e)t.instances.push(i);let o=function(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort(((t,e)=>e.length-t.length))}(e);for(let e of t.set)if(!e.modified.length)for(let t of o)r.push(Um.get(e,t));return i}}function Zm(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let t of n.split(" "))if(t){let n=[],i=2,o=t;for(let e=0;;){if("..."==o&&e>0&&e+3==t.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+t);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),e+=r[0].length,e==t.length)break;let s=t[e++];if(e==t.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+t);o=t.slice(e)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+t);let l=new Nm(r,i,s>0?n.slice(0,s):null);e[a]=l.sort(e[a])}}return Im.add(e)}const Im=new um;class Nm{constructor(t,e,n,r){this.tags=t,this.mode=e,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function Bm(t,e){let n=Object.create(null);for(let e of t)if(Array.isArray(e.tag))for(let t of e.tag)n[t.id]=e.class;else n[e.tag.id]=e.class;let{scope:r,all:i=null}=e||{};return{style:t=>{let e=i;for(let r of t)for(let t of r.set){let r=n[t.id];if(r){e=e?e+" "+r:r;break}}return e},scope:r}}function zm(t,e,n,r=0,i=t.length){let o=new Wm(r,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),r,i,"",o.highlighters),o.flush(i)}Nm.empty=new Nm([],2,null);class Wm{constructor(t,e,n){this.at=t,this.highlighters=e,this.span=n,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,n,r,i){let{type:o,from:s,to:a}=t;if(s>=n||a<=e)return;o.isTop&&(i=this.highlighters.filter((t=>!t.scope||t.scope(o))));let l=r,c=function(t){let e=t.type.prop(Im);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}(t)||Nm.empty,u=function(t,e){let n=null;for(let r of t){let t=r.style(e);t&&(n=n?n+" "+t:t)}return n}(i,c.tags);if(u&&(l&&(l+=" "),l+=u,1==c.mode&&(r+=(r?" ":"")+u)),this.startSpan(t.from,l),c.opaque)return;let h=t.tree&&t.tree.prop(um.mounted);if(h&&h.overlay){let o=t.node.enter(h.overlay[0].from+s,1),c=this.highlighters.filter((t=>!t.scope||t.scope(h.tree.type))),u=t.firstChild();for(let f=0,d=s;;f++){let p=f<h.overlay.length?h.overlay[f]:null,g=p?p.from+s:a,m=Math.max(e,d),O=Math.min(n,g);if(m<O&&u)for(;t.from<O&&(this.highlightRange(t,m,O,r,i),this.startSpan(Math.min(O,t.to),l),!(t.to>=g)&&t.nextSibling()););if(!p||g>n)break;d=p.to+s,d>e&&(this.highlightRange(o.cursor(),Math.max(e,p.from+s),Math.min(n,d),r,c),this.startSpan(d,l))}u&&t.parent()}else if(t.firstChild()){do{if(!(t.to<=e)){if(t.from>=n)break;this.highlightRange(t,e,n,r,i),this.startSpan(Math.min(n,t.to),l)}}while(t.nextSibling());t.parent()}}}const Lm=Xm.define,Gm=Lm(),Fm=Lm(),Ym=Lm(Fm),Hm=Lm(Fm),Jm=Lm(),Km=Lm(Jm),tO=Lm(Jm),eO=Lm(),nO=Lm(eO),rO=Lm(),iO=Lm(),oO=Lm(),sO=Lm(oO),aO=Lm(),lO={comment:Gm,lineComment:Lm(Gm),blockComment:Lm(Gm),docComment:Lm(Gm),name:Fm,variableName:Lm(Fm),typeName:Ym,tagName:Lm(Ym),propertyName:Hm,attributeName:Lm(Hm),className:Lm(Fm),labelName:Lm(Fm),namespace:Lm(Fm),macroName:Lm(Fm),literal:Jm,string:Km,docString:Lm(Km),character:Lm(Km),attributeValue:Lm(Km),number:tO,integer:Lm(tO),float:Lm(tO),bool:Lm(Jm),regexp:Lm(Jm),escape:Lm(Jm),color:Lm(Jm),url:Lm(Jm),keyword:rO,self:Lm(rO),null:Lm(rO),atom:Lm(rO),unit:Lm(rO),modifier:Lm(rO),operatorKeyword:Lm(rO),controlKeyword:Lm(rO),definitionKeyword:Lm(rO),moduleKeyword:Lm(rO),operator:iO,derefOperator:Lm(iO),arithmeticOperator:Lm(iO),logicOperator:Lm(iO),bitwiseOperator:Lm(iO),compareOperator:Lm(iO),updateOperator:Lm(iO),definitionOperator:Lm(iO),typeOperator:Lm(iO),controlOperator:Lm(iO),punctuation:oO,separator:Lm(oO),bracket:sO,angleBracket:Lm(sO),squareBracket:Lm(sO),paren:Lm(sO),brace:Lm(sO),content:eO,heading:nO,heading1:Lm(nO),heading2:Lm(nO),heading3:Lm(nO),heading4:Lm(nO),heading5:Lm(nO),heading6:Lm(nO),contentSeparator:Lm(eO),list:Lm(eO),quote:Lm(eO),emphasis:Lm(eO),strong:Lm(eO),link:Lm(eO),monospace:Lm(eO),strikethrough:Lm(eO),inserted:Lm(),deleted:Lm(),changed:Lm(),invalid:Lm(),meta:aO,documentMeta:Lm(aO),annotation:Lm(aO),processingInstruction:Lm(aO),definition:Xm.defineModifier(),constant:Xm.defineModifier(),function:Xm.defineModifier(),standard:Xm.defineModifier(),local:Xm.defineModifier(),special:Xm.defineModifier()};var cO;Bm([{tag:lO.link,class:"tok-link"},{tag:lO.heading,class:"tok-heading"},{tag:lO.emphasis,class:"tok-emphasis"},{tag:lO.strong,class:"tok-strong"},{tag:lO.keyword,class:"tok-keyword"},{tag:lO.atom,class:"tok-atom"},{tag:lO.bool,class:"tok-bool"},{tag:lO.url,class:"tok-url"},{tag:lO.labelName,class:"tok-labelName"},{tag:lO.inserted,class:"tok-inserted"},{tag:lO.deleted,class:"tok-deleted"},{tag:lO.literal,class:"tok-literal"},{tag:lO.string,class:"tok-string"},{tag:lO.number,class:"tok-number"},{tag:[lO.regexp,lO.escape,lO.special(lO.string)],class:"tok-string2"},{tag:lO.variableName,class:"tok-variableName"},{tag:lO.local(lO.variableName),class:"tok-variableName tok-local"},{tag:lO.definition(lO.variableName),class:"tok-variableName tok-definition"},{tag:lO.special(lO.variableName),class:"tok-variableName2"},{tag:lO.definition(lO.propertyName),class:"tok-propertyName tok-definition"},{tag:lO.typeName,class:"tok-typeName"},{tag:lO.namespace,class:"tok-namespace"},{tag:lO.className,class:"tok-className"},{tag:lO.macroName,class:"tok-macroName"},{tag:lO.propertyName,class:"tok-propertyName"},{tag:lO.operator,class:"tok-operator"},{tag:lO.comment,class:"tok-comment"},{tag:lO.meta,class:"tok-meta"},{tag:lO.invalid,class:"tok-invalid"},{tag:lO.punctuation,class:"tok-punctuation"}]);const uO=new um;class hO{constructor(t,e,n=[],r=""){this.data=t,this.name=r,gu.prototype.hasOwnProperty("tree")||Object.defineProperty(gu.prototype,"tree",{get(){return pO(this)}}),this.parser=e,this.extension=[SO.of(this),gu.languageData.of(((t,e,n)=>t.facet(fO(t,e,n))))].concat(n)}isActiveAt(t,e,n=-1){return fO(t,e,n)==this.data}findRegions(t){let e=t.facet(SO);if((null==e?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let n=[],r=(t,e)=>{if(t.prop(uO)==this.data)return void n.push({from:e,to:e+t.length});let i=t.prop(um.mounted);if(i){if(i.tree.prop(uO)==this.data){if(i.overlay)for(let t of i.overlay)n.push({from:t.from+e,to:t.to+e});else n.push({from:e,to:e+t.length});return}if(i.overlay){let t=n.length;if(r(i.tree,i.overlay[0].from+e),n.length>t)return}}for(let n=0;n<t.children.length;n++){let i=t.children[n];i instanceof Om&&r(i,t.positions[n]+e)}};return r(pO(t),0),n}get allowsNesting(){return!0}}function fO(t,e,n){let r=t.facet(SO);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let r=pO(t).topNode;r;r=r.enter(e,n,mm.ExcludeBuffers))i=r.type.prop(uO)||i;return i}hO.setState=iu.define();class dO extends hO{constructor(t,e,n){super(t,e,[],n),this.parser=e}static define(t){let e=(n=t.languageData,Rc.define({combine:n?t=>t.concat(n):void 0}));var n;return new dO(e,t.parser.configure({props:[uO.add((t=>t.isTop?e:void 0))]}),t.name)}configure(t,e){return new dO(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function pO(t){let e=t.field(hO.state,!1);return e?e.tree:Om.empty}class gO{constructor(t,e=t.length){this.doc=t,this.length=e,this.cursorPos=0,this.string="",this.cursor=t.iter()}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}}let mO=null;class OO{constructor(t,e,n=[],r,i,o,s,a){this.parser=t,this.state=e,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(t,e,n){return new OO(t,e,[],Om.empty,0,n,[],null)}startParse(){return this.parser.startParse(new gO(this.state.doc),this.fragments)}work(t,e){return null!=e&&e>=this.state.doc.length&&(e=void 0),this.tree!=Om.empty&&this.isDone(null!=e?e:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof t){let e=Date.now()+t;t=()=>Date.now()>e}for(this.parse||(this.parse=this.startParse()),null!=e&&(null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(Am.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=e?e:this.state.doc.length)))return!0;this.parse=this.startParse()}if(t())return!1}}))}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext((()=>{for(;!(e=this.parse.advance()););})),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(Am.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=mO;mO=this;try{return t()}finally{mO=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=vO(t,e.from,e.to);return t}changes(t,e){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!t.empty){let e=[];if(t.iterChangedRanges(((t,n,r,i)=>e.push({fromA:t,toA:n,fromB:r,toB:i}))),n=Am.applyChanges(n,e),r=Om.empty,i=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){s=[];for(let e of this.skipped){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);n<r&&s.push({from:n,to:r})}}}return new OO(this.parser,e,n,r,i,o,s,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let e=0;e<this.skipped.length;e++){let{from:n,to:r}=this.skipped[e];n<t.to&&r>t.from&&(this.fragments=vO(this.fragments,n,r),this.skipped.splice(e--,1))}return!(this.skipped.length>=e||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends Dm{createParse(e,n,r){let i=r[0].from,o=r[r.length-1].to;return{parsedPos:i,advance(){let e=mO;if(e){for(let t of r)e.tempSkipped.push(t);t&&(e.scheduleOn=e.scheduleOn?Promise.all([e.scheduleOn,t]):t)}return this.parsedPos=o,new Om(fm.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&0==e[0].from&&e[0].to>=t}static get(){return mO}}function vO(t,e,n){return Am.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class bO{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,n)||e.takeTree(),new bO(e)}static init(t){let e=Math.min(3e3,t.doc.length),n=OO.create(t.facet(SO).parser,t,{from:0,to:e});return n.work(20,e)||n.takeTree(),new bO(n)}}hO.state=Vc.define({create:bO.init,update(t,e){for(let t of e.effects)if(t.is(hO.setState))return t.value;return e.startState.facet(SO)!=e.state.facet(SO)?bO.init(e.state):t.apply(e)}});let yO=t=>{let e=setTimeout((()=>t()),500);return()=>clearTimeout(e)};"undefined"!=typeof requestIdleCallback&&(yO=t=>{let e=-1,n=setTimeout((()=>{e=requestIdleCallback(t,{timeout:400})}),100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const wO="undefined"!=typeof navigator&&(null===(cO=navigator.scheduling)||void 0===cO?void 0:cO.isInputPending)?()=>navigator.scheduling.isInputPending():null,xO=yf.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(hO.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),t.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(hO.state);e.tree==e.context.tree&&e.context.isDone(t.doc.length)||(this.working=yO(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(hO.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!wO?Math.max(25,t.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work((()=>wO&&wO()||Date.now()>o),r+(s?0:1e5));this.chunkBudget-=Date.now()-e,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:hO.setState.of(new bO(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then((()=>this.scheduleWork())).catch((t=>mf(this.view.state,t))).then((()=>this.workScheduled--)),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),SO=Rc.define({combine:t=>t.length?t[0]:null,enables:t=>[hO.state,xO,yp.contentAttributes.compute([t],(e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}}))]});class kO{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}}const CO=Rc.define(),QO=Rc.define({combine:t=>{if(!t.length)return"  ";if(!/^(?: +|\t+)$/.test(t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return t[0]}});function _O(t){let e=t.facet(QO);return 9==e.charCodeAt(0)?t.tabSize*e.length:e.length}function PO(t,e){let n="",r=t.tabSize;if(9==t.facet(QO).charCodeAt(0))for(;e>=r;)n+="\t",e-=r;for(let t=0;t<e;t++)n+=" ";return n}function EO(t,e){t instanceof gu&&(t=new TO(t));for(let n of t.state.facet(CO)){let r=n(t,e);if(void 0!==r)return r}let n=pO(t.state);return n?function(t,e,n){return MO(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}(t,n,e):null}class TO{constructor(t,e={}){this.state=t,this.options=e,this.unit=_O(t)}lineAt(t,e=1){let n=this.state.doc.lineAt(t),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==t?{text:"",from:t}:(e<0?r<t:r<=t)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(t,e);return n.slice(t-r,Math.min(n.length,t+100-r))}column(t,e=1){let{text:n,from:r}=this.lineAt(t,e),i=this.countColumn(n,t-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(t,e=t.length){return Mu(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:n,from:r}=this.lineAt(t,e),i=this.options.overrideIndentation;if(i){let t=i(r);if(t>-1)return t}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const $O=new um;function RO(t){let e=t.type.prop($O);if(e)return e;let n,r=t.firstChild;if(r&&(n=r.type.prop(um.closedBy))){let e=t.lastChild,r=e&&n.indexOf(e.name)>-1;return t=>XO(t,!0,1,void 0,r&&!function(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}(t)?e.from:void 0)}return null==t.parent?AO:null}function MO(t,e,n){for(;t;t=t.parent){let r=RO(t);if(r)return r(DO.create(n,e,t))}return null}function AO(){return 0}class DO extends TO{constructor(t,e,n){super(t.state,t.options),this.base=t,this.pos=e,this.node=n}static create(t,e,n){return new DO(t,e,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let t=this.state.doc.lineAt(this.node.from);for(;;){let e=this.node.resolve(t.from);for(;e.parent&&e.parent.from==e.from;)e=e.parent;if(jO(e,this.node))break;t=this.state.doc.lineAt(e.from)}return this.lineIndent(t.from)}continue(){let t=this.node.parent;return t?MO(t,this.pos,this.base):0}}function jO(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function qO({closing:t,align:e=!0,units:n=1}){return r=>XO(r,e,n,t)}function XO(t,e,n,r,i){let o=t.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==t.pos+s,l=e?function(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let t=n.to;;){let i=e.childAfter(t);if(!i||i==r)return null;if(!i.type.isSkipped)return i.from<s?n:null;t=i.to}}(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}function VO({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const UO=Rc.define(),ZO=new um;function IO(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function NO(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function BO(t,e,n){for(let r of t.facet(UO)){let i=r(t,e,n);if(i)return i}return function(t,e,n){let r=pO(t);if(r.length<n)return null;let i=null;for(let o=r.resolveInner(n,1);o;o=o.parent){if(o.to<=n||o.from>n)continue;if(i&&o.from<e)break;let s=o.type.prop(ZO);if(s&&(o.to<r.length-50||r.length==t.doc.length||!NO(o))){let r=s(o,t);r&&r.from<=n&&r.from>=e&&r.to>n&&(i=r)}}return i}(t,e,n)}function zO(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const WO=iu.define({map:zO}),LO=iu.define({map:zO});function GO(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some((t=>t.from<=n&&t.to>=n))||e.push(t.lineBlockAt(n));return e}const FO=Vc.define({create:()=>Gh.none,update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(WO)&&!HO(t,n.value.from,n.value.to)?t=t.update({add:[iv.range(n.value.from,n.value.to)]}):n.is(LO)&&(t=t.update({filter:(t,e)=>n.value.from!=t||n.value.to!=e,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,((t,e)=>{t<r&&e>r&&(n=!0)})),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(t,e)=>e<=r||t>=r}))}return t},provide:t=>yp.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,((t,e)=>{n.push(t,e)})),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid JSON for fold state");e.push(iv.range(r,i))}return Gh.set(e,!0)}});function YO(t,e,n){var r;let i=null;return null===(r=t.field(FO,!1))||void 0===r||r.between(e,n,((t,e)=>{(!i||i.from>t)&&(i={from:t,to:e})})),i}function HO(t,e,n){let r=!1;return t.between(e,e,((t,i)=>{t==e&&i==n&&(r=!0)})),r}function JO(t,e){return t.field(FO,!1)?e:e.concat(iu.appendConfig.of(rv()))}function KO(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return yp.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const tv=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:t=>{for(let e of GO(t)){let n=BO(t.state,e.from,e.to);if(n)return t.dispatch({effects:JO(t.state,[WO.of(n),KO(t,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:t=>{if(!t.state.field(FO,!1))return!1;let e=[];for(let n of GO(t)){let r=YO(t.state,n.from,n.to);r&&e.push(LO.of(r),KO(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),o=BO(e,i.from,i.to);o&&n.push(WO.of(o)),r=(o?t.lineBlockAt(o.to):i).to+1}return n.length&&t.dispatch({effects:JO(t.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:t=>{let e=t.state.field(FO,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,((t,e)=>{n.push(LO.of({from:t,to:e}))})),t.dispatch({effects:n}),!0}}],ev={placeholderDOM:null,placeholderText:"…"},nv=Rc.define({combine:t=>mu(t,ev)});function rv(t){let e=[FO,lv];return t&&e.push(nv.of(t)),e}const iv=Gh.replace({widget:new class extends Wh{toDOM(t){let{state:e}=t,n=e.facet(nv),r=e=>{let n=t.lineBlockAt(t.posAtDOM(e.target)),r=YO(t.state,n.from,n.to);r&&t.dispatch({effects:LO.of(r)}),e.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),ov={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class sv extends Vg{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function av(t={}){let e=Object.assign(Object.assign({},ov),t),n=new sv(e,!0),r=new sv(e,!1),i=yf.fromClass(class{constructor(t){this.from=t.viewport.from,this.markers=this.buildMarkers(t)}update(t){(t.docChanged||t.viewportChanged||t.startState.facet(SO)!=t.state.facet(SO)||t.startState.field(FO,!1)!=t.state.field(FO,!1)||pO(t.startState)!=pO(t.state)||e.foldingChanged(t))&&(this.markers=this.buildMarkers(t.view))}buildMarkers(t){let e=new xu;for(let i of t.viewportLineBlocks){let o=YO(t.state,i.from,i.to)?r:BO(t.state,i.from,i.to)?n:null;o&&e.add(i.from,i.from,o)}return e.finish()}}),{domEventHandlers:o}=e;return[i,Ng({class:"cm-foldGutter",markers(t){var e;return(null===(e=t.plugin(i))||void 0===e?void 0:e.markers)||wu.empty},initialSpacer:()=>new sv(e,!1),domEventHandlers:Object.assign(Object.assign({},o),{click:(t,e,n)=>{if(o.click&&o.click(t,e,n))return!0;let r=YO(t.state,e.from,e.to);if(r)return t.dispatch({effects:LO.of(r)}),!0;let i=BO(t.state,e.from,e.to);return!!i&&(t.dispatch({effects:WO.of(i)}),!0)}})}),rv()]}const lv=yp.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class cv{constructor(t,e){let n;function r(t){let e=Xu.newName();return(n||(n=Object.create(null)))["."+e]=t,e}this.specs=t;const i="string"==typeof e.all?e.all:e.all?r(e.all):void 0,o=e.scope;this.scope=o instanceof hO?t=>t.prop(uO)==o.data:o?t=>t==o:void 0,this.style=Bm(t.map((t=>({tag:t.tag,class:t.class||r(Object.assign({},t,{tag:null}))}))),{all:i}).style,this.module=n?new Xu(n):null,this.themeType=e.themeType}static define(t,e){return new cv(t,e||{})}}const uv=Rc.define(),hv=Rc.define({combine:t=>t.length?[t[0]]:null});function fv(t){let e=t.facet(uv);return e.length?e:t.facet(hv)}function dv(t,e){let n,r=[gv];return t instanceof cv&&(t.module&&r.push(yp.styleModule.of(t.module)),n=t.themeType),(null==e?void 0:e.fallback)?r.push(hv.of(t)):n?r.push(uv.computeN([yp.darkTheme],(e=>e.facet(yp.darkTheme)==("dark"==n)?[t]:[]))):r.push(uv.of(t)),r}class pv{constructor(t){this.markCache=Object.create(null),this.tree=pO(t.state),this.decorations=this.buildDeco(t,fv(t.state))}update(t){let e=pO(t.state),n=fv(t.state),r=n!=fv(t.startState);e.length<t.view.viewport.to&&!r&&e.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(e!=this.tree||t.viewportChanged||r)&&(this.tree=e,this.decorations=this.buildDeco(t.view,n))}buildDeco(t,e){if(!e||!this.tree.length)return Gh.none;let n=new xu;for(let{from:r,to:i}of t.visibleRanges)zm(this.tree,e,((t,e,r)=>{n.add(t,e,this.markCache[r]||(this.markCache[r]=Gh.mark({class:r})))}),r,i);return n.finish()}}const gv=Zc.high(yf.fromClass(pv,{decorations:t=>t.decorations})),mv=cv.define([{tag:lO.meta,color:"#7a757a"},{tag:lO.link,textDecoration:"underline"},{tag:lO.heading,textDecoration:"underline",fontWeight:"bold"},{tag:lO.emphasis,fontStyle:"italic"},{tag:lO.strong,fontWeight:"bold"},{tag:lO.strikethrough,textDecoration:"line-through"},{tag:lO.keyword,color:"#708"},{tag:[lO.atom,lO.bool,lO.url,lO.contentSeparator,lO.labelName],color:"#219"},{tag:[lO.literal,lO.inserted],color:"#164"},{tag:[lO.string,lO.deleted],color:"#a11"},{tag:[lO.regexp,lO.escape,lO.special(lO.string)],color:"#e40"},{tag:lO.definition(lO.variableName),color:"#00f"},{tag:lO.local(lO.variableName),color:"#30a"},{tag:[lO.typeName,lO.namespace],color:"#085"},{tag:lO.className,color:"#167"},{tag:[lO.special(lO.variableName),lO.macroName],color:"#256"},{tag:lO.definition(lO.propertyName),color:"#00c"},{tag:lO.comment,color:"#940"},{tag:lO.invalid,color:"#f00"}]),Ov=yp.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),vv="()[]{}",bv=Rc.define({combine:t=>mu(t,{afterCursor:!0,brackets:vv,maxScanDistance:1e4,renderMatch:xv})}),yv=Gh.mark({class:"cm-matchingBracket"}),wv=Gh.mark({class:"cm-nonmatchingBracket"});function xv(t){let e=[],n=t.matched?yv:wv;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const Sv=Vc.define({create:()=>Gh.none,update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(bv);for(let t of e.state.selection.ranges){if(!t.empty)continue;let i=_v(e.state,t.head,-1,r)||t.head>0&&_v(e.state,t.head-1,1,r)||r.afterCursor&&(_v(e.state,t.head,1,r)||t.head<e.state.doc.length&&_v(e.state,t.head+1,-1,r));i&&(n=n.concat(r.renderMatch(i,e.state)))}return Gh.set(n,!0)},provide:t=>yp.decorations.from(t)}),kv=[Sv,Ov];function Cv(t={}){return[bv.of(t),kv]}function Qv(t,e,n){let r=t.prop(e<0?um.openedBy:um.closedBy);if(r)return r;if(1==t.name.length){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function _v(t,e,n,r={}){let i=r.maxScanDistance||1e4,o=r.brackets||vv,s=pO(t),a=s.resolveInner(e,n);for(let t=a;t;t=t.parent){let e=Qv(t.type,n,o);if(e&&t.from<t.to)return Pv(0,0,n,t,e,o)}return function(t,e,n,r,i,o,s){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let t=0;!u.next().done&&t<=o;){let o=u.value;n<0&&(t+=o.length);let a=e+t*n;for(let t=n>0?0:o.length-1,e=n>0?o.length:-1;t!=e;t+=n){let e=s.indexOf(o[t]);if(!(e<0||r.resolveInner(a+t,1).type!=i))if(e%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:a+t,to:a+t+1},matched:e>>1==l>>1};h--}}n>0&&(t+=o.length)}return u.done?{start:c,matched:!1}:null}(t,e,n,s,a.type,i,o)}function Pv(t,e,n,r,i,o){let s=r.parent,a={from:r.from,to:r.to},l=0,c=null==s?void 0:s.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do{if(n<0?c.to<=r.from:c.from>=r.to){if(0==l&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(Qv(c.type,n,o))l++;else if(Qv(c.type,-n,o)){if(0==l)return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};l--}}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}const Ev=Object.create(null),Tv=[fm.none],$v=[],Rv=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Rv[t]=Av(Ev,e);function Mv(t,e){$v.indexOf(t)>-1||($v.push(t),console.warn(e))}function Av(t,e){let n=null;for(let r of e.split(".")){let e=t[r]||lO[r];e?"function"==typeof e?n?n=e(n):Mv(r,`Modifier ${r} used at start of tag`):n?Mv(r,`Tag ${r} used as modifier`):n=e:Mv(r,`Unknown highlighting tag ${r}`)}if(!n)return 0;let r=e.replace(/ /g,"_"),i=fm.define({id:Tv.length,name:r,props:[Zm({[r]:n})]});return Tv.push(i),i.id}function Dv(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return!!i&&(r(n.update(i)),!0)}}const jv=Dv(Zv,0),qv=Dv(Uv,0),Xv=Dv(((t,e)=>Uv(t,e,function(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from,to:i.to})}return e}(e))),0);function Vv(t,e=t.selection.main.head){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}function Uv(t,e,n=e.selection.ranges){let r=n.map((t=>Vv(e,t.from).block));if(!r.every((t=>t)))return null;let i=n.map(((t,n)=>function(t,{open:e,close:n},r,i){let o,s,a=t.sliceDoc(r-50,r),l=t.sliceDoc(i,i+50),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-e.length,h)==e&&l.slice(u,u+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-r<=100?o=s=t.sliceDoc(r,i):(o=t.sliceDoc(r,r+50),s=t.sliceDoc(i-50,i));let f=/^\s*/.exec(o)[0].length,d=/\s*$/.exec(s)[0].length,p=s.length-d-n.length;return o.slice(f,f+e.length)==e&&s.slice(p,p+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(o.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(s.charAt(p-1))?1:0}}:null}(e,r[n],t.from,t.to)));if(2!=t&&!i.every((t=>t)))return{changes:e.changes(n.map(((t,e)=>i[e]?[]:[{from:t.from,insert:r[e].open+" "},{from:t.to,insert:" "+r[e].close}])))};if(1!=t&&i.some((t=>t))){let t=[];for(let e,n=0;n<i.length;n++)if(e=i[n]){let i=r[n],{open:o,close:s}=e;t.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:t}}return null}function Zv(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:t,to:o}of n){let n=r.length,s=1e9;for(let n=t;n<=o;){let a=e.doc.lineAt(n);if(a.from>i&&(t==o||o>a.from)){i=a.from;let t=Vv(e,n).line;if(!t)continue;let o=/^\s*/.exec(a.text)[0].length,l=o==a.length,c=a.text.slice(o,o+t.length)==t?o:-1;o<a.text.length&&o<s&&(s=o),r.push({line:a,comment:c,token:t,indent:o,empty:l,single:!1})}n=a.to+1}if(s<1e9)for(let t=n;t<r.length;t++)r[t].indent<r[t].line.text.length&&(r[t].indent=s);r.length==n+1&&(r[n].single=!0)}if(2!=t&&r.some((t=>t.comment<0&&(!t.empty||t.single)))){let t=[];for(let{line:e,token:n,indent:i,empty:o,single:s}of r)!s&&o||t.push({from:e.from+i,insert:n+" "});let n=e.changes(t);return{changes:n,selection:e.selection.map(n,1)}}if(1!=t&&r.some((t=>t.comment>=0))){let t=[];for(let{line:e,comment:n,token:i}of r)if(n>=0){let r=e.from+n,o=r+i.length;" "==e.text[o-e.from]&&o++,t.push({from:r,to:o})}return{changes:t}}return null}const Iv=eu.define(),Nv=eu.define(),Bv=Rc.define(),zv=Rc.define({combine:t=>mu(t,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}),Wv=Vc.define({create:()=>lb.empty,update(t,e){let n=e.state.facet(zv),r=e.annotation(Iv);if(r){let i=e.docChanged?Ec.single(function(t){let e=0;return t.iterChangedRanges(((t,n)=>e=n)),e}(e.changes)):void 0,o=Kv.fromTransaction(e,i),s=r.side,a=0==s?t.undone:t.done;return a=o?tb(a,a.length,n.minDepth,o):rb(a,e.startState.selection),new lb(0==s?r.rest:a,0==s?a:r.rest)}let i=e.annotation(Nv);if("full"!=i&&"before"!=i||(t=t.isolate()),!1===e.annotation(ou.addToHistory))return e.changes.empty?t:t.addMapping(e.changes.desc);let o=Kv.fromTransaction(e),s=e.annotation(ou.time),a=e.annotation(ou.userEvent);return o?t=t.addChanges(o,s,a,n.newGroupDelay,n.minDepth):e.selection&&(t=t.addSelection(e.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(t=t.isolate()),t},toJSON:t=>({done:t.done.map((t=>t.toJSON())),undone:t.undone.map((t=>t.toJSON()))}),fromJSON:t=>new lb(t.done.map(Kv.fromJSON),t.undone.map(Kv.fromJSON))});function Lv(t={}){return[Wv,zv.of(t),yp.domEventHandlers({beforeinput(t,e){let n="historyUndo"==t.inputType?Fv:"historyRedo"==t.inputType?Yv:null;return!!n&&(t.preventDefault(),n(e))}})]}function Gv(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(Wv,!1);if(!i)return!1;let o=i.pop(t,n,e);return!!o&&(r(o),!0)}}const Fv=Gv(0,!1),Yv=Gv(1,!1),Hv=Gv(0,!0),Jv=Gv(1,!0);class Kv{constructor(t,e,n,r,i){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(t){return new Kv(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,n;return{changes:null===(t=this.changes)||void 0===t?void 0:t.toJSON(),mapped:null===(e=this.mapped)||void 0===e?void 0:e.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((t=>t.toJSON()))}}static fromJSON(t){return new Kv(t.changes&&wc.fromJSON(t.changes),[],t.mapped&&yc.fromJSON(t.mapped),t.startSelection&&Ec.fromJSON(t.startSelection),t.selectionsAfter.map(Ec.fromJSON))}static fromTransaction(t,e){let n=nb;for(let e of t.startState.facet(Bv)){let r=e(t);r.length&&(n=n.concat(r))}return!n.length&&t.changes.empty?null:new Kv(t.changes.invert(t.startState.doc),n,void 0,e||t.startState.selection,nb)}static selection(t){return new Kv(void 0,nb,void 0,void 0,t)}}function tb(t,e,n,r){let i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function eb(t,e){return t.length?e.length?t.concat(e):t:e}const nb=[];function rb(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),tb(t,t.length-1,1e9,n.setSelAfter(r)))}return[Kv.selection([e])]}function ib(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function ob(t,e){if(!t.length)return t;let n=t.length,r=nb;for(;n;){let i=sb(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let e=t.slice(0,n);return e[n-1]=i,e}e=i.mapped,n--,r=i.selectionsAfter}return r.length?[Kv.selection(r)]:nb}function sb(t,e,n){let r=eb(t.selectionsAfter.length?t.selectionsAfter.map((t=>t.map(e))):nb,n);if(!t.changes)return Kv.selection(r);let i=t.changes.map(e),o=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(o):o;return new Kv(i,iu.mapEffects(t.effects,e),s,t.startSelection.map(o),r)}const ab=/^(input\.type|delete)($|\.)/;class lb{constructor(t,e,n=0,r){this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new lb(this.done,this.undone):this}addChanges(t,e,n,r,i){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&t.changes&&(!n||ab.test(n))&&(!s.selectionsAfter.length&&e-this.prevTime<r&&function(t,e){let n=[],r=!1;return t.iterChangedRanges(((t,e)=>n.push(t,e))),e.iterChangedRanges(((t,e,i,o)=>{for(let t=0;t<n.length;){let e=n[t++],s=n[t++];o>=e&&i<=s&&(r=!0)}})),r}(s.changes,t.changes)||"input.type.compose"==n)?tb(o,o.length-1,i,new Kv(t.changes.compose(s.changes),eb(t.effects,s.effects),s.mapped,s.startSelection,nb)):tb(o,o.length,i,t),new lb(o,nb,e,n)}addSelection(t,e,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:nb;return i.length>0&&e-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(t,e){return t.ranges.length==e.ranges.length&&0===t.ranges.filter(((t,n)=>t.empty!=e.ranges[n].empty)).length}(i[i.length-1],t)?this:new lb(rb(this.done,t),this.undone,e,n)}addMapping(t){return new lb(ob(this.done,t),ob(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,n){let r=0==t?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1];if(n&&i.selectionsAfter.length)return e.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:Iv.of({side:t,rest:ib(r)}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?nb:r.slice(0,r.length-1);return i.mapped&&(n=ob(n,i.mapped)),e.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:Iv.of({side:t,rest:n}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}lb.empty=new lb(nb,nb);const cb=[{key:"Mod-z",run:Fv,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Yv,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Yv,preventDefault:!0},{key:"Mod-u",run:Hv,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Jv,preventDefault:!0}];function ub(t,e){return Ec.create(t.ranges.map(e),t.mainIndex)}function hb(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function fb({state:t,dispatch:e},n){let r=ub(t.selection,n);return!r.eq(t.selection)&&(e(hb(t,r)),!0)}function db(t,e){return Ec.cursor(e?t.to:t.from)}function pb(t,e){return fb(t,(n=>n.empty?t.moveByChar(n,e):db(n,e)))}function gb(t){return t.textDirectionAt(t.state.selection.main.head)==Tf.LTR}const mb=t=>pb(t,!gb(t)),Ob=t=>pb(t,gb(t));function vb(t,e){return fb(t,(n=>n.empty?t.moveByGroup(n,e):db(n,e)))}function bb(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function yb(t,e,n){let r,i,o=pO(t).resolveInner(e.head),s=n?um.closedBy:um.openedBy;for(let r=e.head;;){let e=n?o.childAfter(r):o.childBefore(r);if(!e)break;bb(t,e,s)?o=e:r=n?e.to:e.from}return i=o.type.prop(s)&&(r=n?_v(t,o.from,1):_v(t,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,Ec.cursor(i,n?-1:1)}function wb(t,e){return fb(t,(n=>{if(!n.empty)return db(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)}))}const xb=t=>wb(t,!1),Sb=t=>wb(t,!0);function kb(t){return Math.max(t.defaultLineHeight,Math.min(t.dom.clientHeight,innerHeight)-5)}function Cb(t,e){let{state:n}=t,r=ub(n.selection,(n=>n.empty?t.moveVertically(n,e,kb(t)):db(n,e)));if(r.eq(n.selection))return!1;let i,o=t.coordsAtPos(n.selection.main.head),s=t.scrollDOM.getBoundingClientRect();return o&&o.top>s.top&&o.bottom<s.bottom&&o.top-s.top<=t.scrollDOM.scrollHeight-t.scrollDOM.scrollTop-t.scrollDOM.clientHeight&&(i=yp.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-s.top})),t.dispatch(hb(n,r),{effects:i}),!0}const Qb=t=>Cb(t,!1),_b=t=>Cb(t,!0);function Pb(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&e.head!=r.from+n&&(i=Ec.cursor(r.from+n))}return i}function Eb(t,e){let n=ub(t.state.selection,(t=>{let n=e(t);return Ec.range(t.anchor,n.head,n.goalColumn)}));return!n.eq(t.state.selection)&&(t.dispatch(hb(t.state,n)),!0)}function Tb(t,e){return Eb(t,(n=>t.moveByChar(n,e)))}const $b=t=>Tb(t,!gb(t)),Rb=t=>Tb(t,gb(t));function Mb(t,e){return Eb(t,(n=>t.moveByGroup(n,e)))}function Ab(t,e){return Eb(t,(n=>t.moveVertically(n,e)))}const Db=t=>Ab(t,!1),jb=t=>Ab(t,!0);function qb(t,e){return Eb(t,(n=>t.moveVertically(n,e,kb(t))))}const Xb=t=>qb(t,!1),Vb=t=>qb(t,!0),Ub=({state:t,dispatch:e})=>(e(hb(t,{anchor:0})),!0),Zb=({state:t,dispatch:e})=>(e(hb(t,{anchor:t.doc.length})),!0),Ib=({state:t,dispatch:e})=>(e(hb(t,{anchor:t.selection.main.anchor,head:0})),!0),Nb=({state:t,dispatch:e})=>(e(hb(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0);function Bb(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange((r=>{let{from:i,to:o}=r;if(i==o){let r=e(i);r<i?(n="delete.backward",r=zb(t,r,!1)):r>i&&(n="delete.forward",r=zb(t,r,!0)),i=Math.min(i,r),o=Math.max(o,r)}else i=zb(t,i,!1),o=zb(t,o,!0);return i==o?{range:r}:{changes:{from:i,to:o},range:Ec.cursor(i)}}));return!i.changes.empty&&(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?yp.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function zb(t,e,n){if(t instanceof yp)for(let r of t.state.facet(yp.atomicRanges).map((e=>e(t))))r.between(e,e,((t,r)=>{t<e&&r>e&&(e=n?r:t)}));return e}const Wb=(t,e)=>Bb(t,(n=>{let r,i,{state:o}=t,s=o.doc.lineAt(n);if(!e&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,n-s.from))){if("\t"==r[r.length-1])return n-1;let t=Mu(r,o.tabSize)%_O(o)||_O(o);for(let e=0;e<t&&" "==r[r.length-1-e];e++)n--;i=n}else i=uc(s.text,n-s.from,e,e)+s.from,i==n&&s.number!=(e?o.doc.lines:1)&&(i+=e?1:-1);return i})),Lb=t=>Wb(t,!1),Gb=t=>Wb(t,!0),Fb=(t,e)=>Bb(t,(n=>{let r=n,{state:i}=t,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let t=null;;){if(r==(e?o.to:o.from)){r==n&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=uc(o.text,r-o.from,e)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=t&&c!=t)break;" "==l&&r==n||(t=c),r=a}return r})),Yb=t=>Fb(t,!1),Hb=t=>Bb(t,(e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}));function Jb(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=t.doc.lineAt(r.to-1)),n>=i.number){let t=e[e.length-1];t.to=o.to,t.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return e}function Kb(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let e of Jb(t)){if(n?e.to==t.doc.length:0==e.from)continue;let o=t.doc.lineAt(n?e.to+1:e.from-1),s=o.length+1;if(n){r.push({from:e.to,to:o.to},{from:e.from,insert:o.text+t.lineBreak});for(let n of e.ranges)i.push(Ec.range(Math.min(t.doc.length,n.anchor+s),Math.min(t.doc.length,n.head+s)))}else{r.push({from:o.from,to:e.from},{from:e.to,insert:t.lineBreak+o.text});for(let t of e.ranges)i.push(Ec.range(t.anchor-s,t.head-s))}}return!!r.length&&(e(t.update({changes:r,scrollIntoView:!0,selection:Ec.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0)}function ty(t,e,n){if(t.readOnly)return!1;let r=[];for(let e of Jb(t))n?r.push({from:e.from,insert:t.doc.slice(e.from,e.to)+t.lineBreak}):r.push({from:e.to,insert:t.lineBreak+t.doc.slice(e.from,e.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const ey=ry(!1),ny=ry(!0);function ry(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange((n=>{let{from:r,to:i}=n,o=e.doc.lineAt(r),s=!t&&r==i&&function(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n,r=pO(t).resolveInner(e),i=r.childBefore(e),o=r.childAfter(e);return i&&o&&i.to<=e&&o.from>=e&&(n=i.type.prop(um.closedBy))&&n.indexOf(o.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}(e,r);t&&(r=i=(i<=o.to?o:e.doc.lineAt(i)).to);let a=new TO(e,{simulateBreak:r,simulateDoubleBreak:!!s}),l=EO(a,r);for(null==l&&(l=/^\s*/.exec(e.doc.lineAt(r).text)[0].length);i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?({from:r,to:i}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",PO(e,l)];return s&&c.push(PO(e,a.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:Jl.of(c)},range:Ec.cursor(r+1+c[1].length)}}));return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function iy(t,e){let n=-1;return t.changeByRange((r=>{let i=[];for(let o=r.from;o<=r.to;){let s=t.doc.lineAt(o);s.number>n&&(r.empty||r.to>s.from)&&(e(s,i,r),n=s.number),o=s.to+1}let o=t.changes(i);return{changes:i,range:Ec.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}const oy=[{key:"ArrowLeft",run:mb,shift:$b,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:t=>vb(t,!gb(t)),shift:t=>Mb(t,!gb(t)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:t=>fb(t,(e=>Pb(t,e,!gb(t)))),shift:t=>Eb(t,(e=>Pb(t,e,!gb(t)))),preventDefault:!0},{key:"ArrowRight",run:Ob,shift:Rb,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:t=>vb(t,gb(t)),shift:t=>Mb(t,gb(t)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:t=>fb(t,(e=>Pb(t,e,gb(t)))),shift:t=>Eb(t,(e=>Pb(t,e,gb(t)))),preventDefault:!0},{key:"ArrowUp",run:xb,shift:Db,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Ub,shift:Ib},{mac:"Ctrl-ArrowUp",run:Qb,shift:Xb},{key:"ArrowDown",run:Sb,shift:jb,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Zb,shift:Nb},{mac:"Ctrl-ArrowDown",run:_b,shift:Vb},{key:"PageUp",run:Qb,shift:Xb},{key:"PageDown",run:_b,shift:Vb},{key:"Home",run:t=>fb(t,(e=>Pb(t,e,!1))),shift:t=>Eb(t,(e=>Pb(t,e,!1))),preventDefault:!0},{key:"Mod-Home",run:Ub,shift:Ib},{key:"End",run:t=>fb(t,(e=>Pb(t,e,!0))),shift:t=>Eb(t,(e=>Pb(t,e,!0))),preventDefault:!0},{key:"Mod-End",run:Zb,shift:Nb},{key:"Enter",run:ey},{key:"Mod-a",run:({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Lb,shift:Lb},{key:"Delete",run:Gb},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Yb},{key:"Mod-Delete",mac:"Alt-Delete",run:t=>Fb(t,!0)},{mac:"Mod-Backspace",run:t=>Bb(t,(e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}))},{mac:"Mod-Delete",run:Hb}].concat([{key:"Ctrl-b",run:mb,shift:$b,preventDefault:!0},{key:"Ctrl-f",run:Ob,shift:Rb},{key:"Ctrl-p",run:xb,shift:Db},{key:"Ctrl-n",run:Sb,shift:jb},{key:"Ctrl-a",run:t=>fb(t,(e=>Ec.cursor(t.lineBlockAt(e.head).from,1))),shift:t=>Eb(t,(e=>Ec.cursor(t.lineBlockAt(e.head).from)))},{key:"Ctrl-e",run:t=>fb(t,(e=>Ec.cursor(t.lineBlockAt(e.head).to,-1))),shift:t=>Eb(t,(e=>Ec.cursor(t.lineBlockAt(e.head).to)))},{key:"Ctrl-d",run:Gb},{key:"Ctrl-h",run:Lb},{key:"Ctrl-k",run:Hb},{key:"Ctrl-Alt-h",run:Yb},{key:"Ctrl-o",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:Jl.of(["",""])},range:Ec.cursor(t.from)})));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let n=e.from,r=t.doc.lineAt(n),i=n==r.from?n-1:uc(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:uc(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:t.doc.slice(n,o).append(t.doc.slice(i,n))},range:Ec.cursor(o)}}));return!n.changes.empty&&(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:_b}].map((t=>({mac:t.key,run:t.run,shift:t.shift})))),sy=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t=>fb(t,(e=>yb(t.state,e,!gb(t)))),shift:t=>Eb(t,(e=>yb(t.state,e,!gb(t))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:t=>fb(t,(e=>yb(t.state,e,gb(t)))),shift:t=>Eb(t,(e=>yb(t.state,e,gb(t))))},{key:"Alt-ArrowUp",run:({state:t,dispatch:e})=>Kb(t,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:t,dispatch:e})=>ty(t,e,!1)},{key:"Alt-ArrowDown",run:({state:t,dispatch:e})=>Kb(t,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:t,dispatch:e})=>ty(t,e,!0)},{key:"Escape",run:({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=Ec.create([n.main]):n.main.empty||(r=Ec.create([Ec.cursor(n.main.head)])),!!r&&(e(hb(t,r)),!0)}},{key:"Mod-Enter",run:ny},{key:"Alt-l",mac:"Ctrl-l",run:({state:t,dispatch:e})=>{let n=Jb(t).map((({from:e,to:n})=>Ec.range(e,Math.min(n+1,t.doc.length))));return e(t.update({selection:Ec.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:t,dispatch:e})=>{let n=ub(t.selection,(e=>{var n;let r=pO(t).resolveInner(e.head,1);for(;!(r.from<e.from&&r.to>=e.to||r.to>e.to&&r.from<=e.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return Ec.range(r.to,r.from)}));return e(hb(t,n)),!0},preventDefault:!0},{key:"Mod-[",run:({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(iy(t,((e,n)=>{let r=/^\s*/.exec(e.text)[0];if(!r)return;let i=Mu(r,t.tabSize),o=0,s=PO(t,Math.max(0,i-_O(t)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:e.from+o,to:e.from+r.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(iy(t,((e,n)=>{n.push({from:e.from,insert:t.facet(QO)})})),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new TO(t,{overrideIndentation:t=>{let e=n[t];return null==e?-1:e}}),i=iy(t,((e,i,o)=>{let s=EO(r,e.from);if(null==s)return;/\S/.test(e.text)||(s=0);let a=/^\s*/.exec(e.text)[0],l=PO(t,s);(a!=l||o.from<e.from+a.length)&&(n[e.from]=s,i.push({from:e.from,to:e.from+a.length,insert:l}))}));return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Jb(e).map((({from:t,to:n})=>(t>0?t--:n<e.doc.length&&n++,{from:t,to:n})))),r=ub(e.selection,(e=>t.moveVertically(e,!0))).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:t,dispatch:e})=>function(t,e,n){let r=!1,i=ub(t.selection,(e=>{let i=_v(t,e.head,-1)||_v(t,e.head,1)||e.head>0&&_v(t,e.head-1,1)||e.head<t.doc.length&&_v(t,e.head+1,-1);if(!i||!i.end)return e;r=!0;let o=i.start.from==e.head?i.end.to:i.end.from;return n?Ec.range(e.anchor,o):Ec.cursor(o)}));return!!r&&(e(hb(t,i)),!0)}(t,e,!1)},{key:"Mod-/",run:t=>{let e=Vv(t.state);return e.line?jv(t):!!e.block&&Xv(t)}},{key:"Alt-A",run:qv}].concat(oy);function ay(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?t.setAttribute(r,i):null!=i&&(t[r]=i)}e++}for(;e<arguments.length;e++)ly(t,arguments[e]);return t}function ly(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var n=0;n<e.length;n++)ly(t,e[n])}}const cy="function"==typeof String.prototype.normalize?t=>t.normalize("NFKD"):t=>t;class uy{constructor(t,e,n=0,r=t.length,i,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,r),this.bufferStart=n,this.normalize=i?t=>i(cy(t)):cy,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return gc(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=mc(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=Oc(t);let r=this.normalize(e);for(let t=0,i=n;;t++){let o=r.charCodeAt(t),s=this.match(o,i);if(s)return this.value=s,this;if(t==r.length-1)break;i==n&&t<e.length&&e.charCodeAt(t)==o&&i++}}}match(t,e){let n=null;for(let r=0;r<this.matches.length;r+=2){let i=this.matches[r],o=!1;this.query.charCodeAt(i)==t&&(i==this.query.length-1?n={from:this.matches[r+1],to:e+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==t&&(1==this.query.length?n={from:e,to:e+1}:this.matches.push(1,e)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n}}"undefined"!=typeof Symbol&&(uy.prototype[Symbol.iterator]=function(){return this});const hy={from:-1,to:-1,match:/.*/.exec("")},fy="gm"+(null==/x/.unicode?"":"u");class dy{constructor(t,e,n,r=0,i=t.length){if(this.text=t,this.to=i,this.curLine="",this.done=!1,this.value=hy,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new my(t,e,n,r,i);this.re=new RegExp(e,fy+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=t.iter();let o=t.lineAt(r);this.curLineStart=o.from,this.matchPos=Oy(t,r),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let n=this.curLineStart+e.index,r=n+e[0].length;if(this.matchPos=Oy(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,e)))return this.value={from:n,to:r,match:e},this;t=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),t=0}}}}const py=new WeakMap;class gy{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,n){let r=py.get(t);if(!r||r.from>=n||r.to<=e){let r=new gy(e,t.sliceString(e,n));return py.set(t,r),r}if(r.from==e&&r.to==n)return r;let{text:i,from:o}=r;return o>e&&(i=t.sliceString(e,o)+i,o=e),r.to<n&&(i+=t.sliceString(r.to,n)),py.set(t,new gy(o,i)),new gy(e,i.slice(e-o,n-o))}}class my{constructor(t,e,n,r,i){this.text=t,this.to=i,this.done=!1,this.value=hy,this.matchPos=Oy(t,r),this.re=new RegExp(e,fy+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=gy.get(t,r,this.chunkEnd(r+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let t=this.flat.from+e.index,n=t+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(t,n,e)))return this.value={from:t,to:n,match:e},this.matchPos=Oy(this.text,n+(t==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=gy.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function Oy(t,e){if(e>=t.length)return e;let n,r=t.lineAt(e);for(;e<r.to&&(n=r.text.charCodeAt(e-r.from))>=56320&&n<57344;)e++;return e}function vy(t){let e=ay("input",{class:"cm-textfield",name:"line"});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!n)return;let{state:r}=t,i=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let t=u/100;o&&(t=t*("-"==o?-1:1)+i.number/r.doc.lines),u=Math.round(r.doc.lines*t)}else s&&o&&(u=u*("-"==o?-1:1)+i.number);let h=r.doc.line(Math.max(1,Math.min(r.doc.lines,u)));t.dispatch({effects:by.of(!1),selection:Ec.cursor(h.from+Math.max(0,Math.min(c,h.length))),scrollIntoView:!0}),t.focus()}return{dom:ay("form",{class:"cm-gotoLine",onkeydown:e=>{27==e.keyCode?(e.preventDefault(),t.dispatch({effects:by.of(!1)}),t.focus()):13==e.keyCode&&(e.preventDefault(),n())},onsubmit:t=>{t.preventDefault(),n()}},ay("label",t.state.phrase("Go to line"),": ",e)," ",ay("button",{class:"cm-button",type:"submit"},t.state.phrase("go")))}}"undefined"!=typeof Symbol&&(dy.prototype[Symbol.iterator]=my.prototype[Symbol.iterator]=function(){return this});const by=iu.define(),yy=Vc.define({create:()=>!0,update(t,e){for(let n of e.effects)n.is(by)&&(t=n.value);return t},provide:t=>Xg.from(t,(t=>t?vy:null))}),wy=yp.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),xy={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Sy=Rc.define({combine:t=>mu(t,xy,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})});function ky(t){let e=[Ey,Py];return t&&e.push(Sy.of(t)),e}const Cy=Gh.mark({class:"cm-selectionMatch"}),Qy=Gh.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function _y(t,e,n,r){return!(0!=n&&t(e.sliceDoc(n-1,n))==fu.Word||r!=e.doc.length&&t(e.sliceDoc(r,r+1))==fu.Word)}const Py=yf.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(Sy),{state:n}=t,r=n.selection;if(r.ranges.length>1)return Gh.none;let i,o=r.main,s=null;if(o.empty){if(!e.highlightWordAroundCursor)return Gh.none;let t=n.wordAt(o.head);if(!t)return Gh.none;s=n.charCategorizer(o.head),i=n.sliceDoc(t.from,t.to)}else{let t=o.to-o.from;if(t<e.minSelectionLength||t>200)return Gh.none;if(e.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!_y(s,n,o.from,o.to)||!function(t,e,n,r){return t(e.sliceDoc(n,n+1))==fu.Word&&t(e.sliceDoc(r-1,r))==fu.Word}(s,n,o.from,o.to))return Gh.none}else if(i=n.sliceDoc(o.from,o.to).trim(),!i)return Gh.none}let a=[];for(let r of t.visibleRanges){let t=new uy(n.doc,i,r.from,r.to);for(;!t.next().done;){let{from:r,to:i}=t.value;if((!s||_y(s,n,r,i))&&(o.empty&&r<=o.from&&i>=o.to?a.push(Qy.range(r,i)):(r>=o.to||i<=o.from)&&a.push(Cy.range(r,i)),a.length>e.maxMatches))return Gh.none}}return Gh.set(a)}},{decorations:t=>t.decorations}),Ey=yp.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Ty=Rc.define({combine:t=>mu(t,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:t=>new rw(t)})});class $y{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||function(t){try{return new RegExp(t,fy),!0}catch(t){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,((t,e)=>"n"==e?"\n":"r"==e?"\r":"t"==e?"\t":"\\"))}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new Xy(this):new Ay(this)}getCursor(t,e=0,n){let r=t.doc?t:gu.create({doc:t});return null==n&&(n=r.doc.length),this.regexp?Dy(this,r,e,n):My(this,r,e,n)}}class Ry{constructor(t){this.spec=t}}function My(t,e,n,r){return new uy(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:t=>t.toLowerCase(),t.wholeWord?(i=e.doc,o=e.charCategorizer(e.selection.main.head),(t,e,n,r)=>((r>t||r+n.length<e)&&(r=Math.max(0,t-2),n=i.sliceString(r,Math.min(i.length,e+2))),!(o(jy(n,t-r))==fu.Word&&o(qy(n,t-r))==fu.Word||o(qy(n,e-r))==fu.Word&&o(jy(n,e-r))==fu.Word))):void 0);var i,o}class Ay extends Ry{constructor(t){super(t)}nextMatch(t,e,n){let r=My(this.spec,t,n,t.doc.length).nextOverlapping();return r.done&&(r=My(this.spec,t,0,e).nextOverlapping()),r.done?null:r.value}prevMatchInRange(t,e,n){for(let r=n;;){let n=Math.max(e,r-1e4-this.spec.unquoted.length),i=My(this.spec,t,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==e)return null;r-=1e4}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let n=My(this.spec,t,0,t.doc.length),r=[];for(;!n.next().done;){if(r.length>=e)return null;r.push(n.value)}return r}highlight(t,e,n,r){let i=My(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,t.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function Dy(t,e,n,r){return new dy(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?(i=e.charCategorizer(e.selection.main.head),(t,e,n)=>!n[0].length||(i(jy(n.input,n.index))!=fu.Word||i(qy(n.input,n.index))!=fu.Word)&&(i(qy(n.input,n.index+n[0].length))!=fu.Word||i(jy(n.input,n.index+n[0].length))!=fu.Word)):void 0},n,r);var i}function jy(t,e){return t.slice(uc(t,e,!1),e)}function qy(t,e){return t.slice(e,uc(t,e))}class Xy extends Ry{nextMatch(t,e,n){let r=Dy(this.spec,t,n,t.doc.length).next();return r.done&&(r=Dy(this.spec,t,0,e).next()),r.done?null:r.value}prevMatchInRange(t,e,n){for(let r=1;;r++){let i=Math.max(e,n-1e4*r),o=Dy(this.spec,t,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==e||s.from>i+10))return s;if(i==e)return null}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,((e,n)=>"$"==n?"$":"&"==n?t.match[0]:"0"!=n&&+n<t.match.length?t.match[n]:e)))}matchAll(t,e){let n=Dy(this.spec,t,0,t.doc.length),r=[];for(;!n.next().done;){if(r.length>=e)return null;r.push(n.value)}return r}highlight(t,e,n,r){let i=Dy(this.spec,t,Math.max(0,e-250),Math.min(n+250,t.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}const Vy=iu.define(),Uy=iu.define(),Zy=Vc.define({create:t=>new Iy(Ky(t).create(),null),update(t,e){for(let n of e.effects)n.is(Vy)?t=new Iy(n.value.create(),t.panel):n.is(Uy)&&(t=new Iy(t.query,n.value?Jy:null));return t},provide:t=>Xg.from(t,(t=>t.panel))});class Iy{constructor(t,e){this.query=t,this.panel=e}}const Ny=Gh.mark({class:"cm-searchMatch"}),By=Gh.mark({class:"cm-searchMatch cm-searchMatch-selected"}),zy=yf.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Zy))}update(t){let e=t.state.field(Zy);(e!=t.startState.field(Zy)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Gh.none;let{view:n}=this,r=new xu;for(let e=0,i=n.visibleRanges,o=i.length;e<o;e++){let{from:s,to:a}=i[e];for(;e<o-1&&a>i[e+1].from-500;)a=i[++e].to;t.highlight(n.state,s,a,((t,e)=>{let i=n.state.selection.ranges.some((n=>n.from==t&&n.to==e));r.add(t,e,i?By:Ny)}))}return r.finish()}},{decorations:t=>t.decorations});function Wy(t){return e=>{let n=e.state.field(Zy,!1);return n&&n.query.spec.valid?t(e,n):tw(e)}}const Ly=Wy(((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);return!!r&&(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:sw(t,r),userEvent:"select.search"}),!0)})),Gy=Wy(((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);return!!i&&(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:sw(t,i),userEvent:"select.search"}),!0)})),Fy=Wy(((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!(!n||!n.length||(t.dispatch({selection:Ec.create(n.map((t=>Ec.range(t.from,t.to)))),userEvent:"select.search.matches"}),0))})),Yy=Wy(((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,r,r);if(!o)return!1;let s,a,l=[],c=[];if(o.from==r&&o.to==i&&(a=n.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:a}),o=e.nextMatch(n,o.from,o.to),c.push(yp.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let e=0==l.length||l[0].from>=o.to?0:o.to-o.from-a.length;s={anchor:o.from-e,head:o.to-e},c.push(sw(t,o))}return t.dispatch({changes:l,selection:s,scrollIntoView:!!s,effects:c,userEvent:"input.replace"}),!0})),Hy=Wy(((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map((t=>{let{from:n,to:r}=t;return{from:n,to:r,insert:e.getReplacement(t)}}));if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:yp.announce.of(r),userEvent:"input.replace.all"}),!0}));function Jy(t){return t.state.facet(Ty).createPanel(t)}function Ky(t,e){var n,r,i,o;let s=t.selection.main,a=s.empty||s.to>s.from+100?"":t.sliceDoc(s.from,s.to);if(e&&!a)return e;let l=t.facet(Ty);return new $y({search:(null!==(n=null==e?void 0:e.literal)&&void 0!==n?n:l.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:null!==(r=null==e?void 0:e.caseSensitive)&&void 0!==r?r:l.caseSensitive,literal:null!==(i=null==e?void 0:e.literal)&&void 0!==i?i:l.literal,wholeWord:null!==(o=null==e?void 0:e.wholeWord)&&void 0!==o?o:l.wholeWord})}const tw=t=>{let e=t.state.field(Zy,!1);if(e&&e.panel){let n=Ag(t,Jy);if(!n)return!1;let r=n.dom.querySelector("[main-field]");if(r&&r!=t.root.activeElement){let n=Ky(t.state,e.query.spec);n.valid&&t.dispatch({effects:Vy.of(n)}),r.focus(),r.select()}}else t.dispatch({effects:[Uy.of(!0),e?Vy.of(Ky(t.state,e.query.spec)):iu.appendConfig.of(lw)]});return!0},ew=t=>{let e=t.state.field(Zy,!1);if(!e||!e.panel)return!1;let n=Ag(t,Jy);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Uy.of(!1)}),!0},nw=[{key:"Mod-f",run:tw,scope:"editor search-panel"},{key:"F3",run:Ly,shift:Gy,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ly,shift:Gy,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:ew,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let e=new uy(t.doc,t.sliceDoc(r,i));!e.next().done;){if(o.length>1e3)return!1;e.value.from==r&&(s=o.length),o.push(Ec.range(e.value.from,e.value.to))}return e(t.update({selection:Ec.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:t=>{let e=Ag(t,vy);if(!e){let n=[by.of(!0)];null==t.state.field(yy,!1)&&n.push(iu.appendConfig.of([yy,wy])),t.dispatch({effects:n}),e=Ag(t,vy)}return e&&e.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some((t=>t.from===t.to)))return(({state:t,dispatch:e})=>{let{selection:n}=t,r=Ec.create(n.ranges.map((e=>t.wordAt(e.head)||Ec.cursor(e.head))),n.mainIndex);return!r.eq(n)&&(e(t.update({selection:r})),!0)})({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=r)))return!1;let i=function(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new uy(t.doc,e,r[r.length-1].to);;){if(i.next(),!i.done){if(n&&r.some((t=>t.from==i.value.from)))continue;if(o){let e=t.wordAt(i.value.from);if(!e||e.from!=i.value.from||e.to!=i.value.to)continue}return i.value}if(n)return null;i=new uy(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),n=!0}}(t,r);return!!i&&(e(t.update({selection:t.selection.addRange(Ec.range(i.from,i.to),!1),effects:yp.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class rw{constructor(t){this.view=t;let e=this.query=t.state.field(Zy).query.spec;function n(t,e,n){return ay("button",{class:"cm-button",name:t,onclick:e,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=ay("input",{value:e.search,placeholder:iw(t,"Find"),"aria-label":iw(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ay("input",{value:e.replace,placeholder:iw(t,"Replace"),"aria-label":iw(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ay("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=ay("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=ay("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit}),this.dom=ay("div",{onkeydown:t=>this.keydown(t),class:"cm-search"},[this.searchField,n("next",(()=>Ly(t)),[iw(t,"next")]),n("prev",(()=>Gy(t)),[iw(t,"previous")]),n("select",(()=>Fy(t)),[iw(t,"all")]),ay("label",null,[this.caseField,iw(t,"match case")]),ay("label",null,[this.reField,iw(t,"regexp")]),ay("label",null,[this.wordField,iw(t,"by word")]),...t.state.readOnly?[]:[ay("br"),this.replaceField,n("replace",(()=>Yy(t)),[iw(t,"replace")]),n("replaceAll",(()=>Hy(t)),[iw(t,"replace all")])],ay("button",{name:"close",onclick:()=>ew(t),"aria-label":iw(t,"close"),type:"button"},["×"])])}commit(){let t=new $y({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:Vy.of(t)}))}keydown(t){var e,n;n=t,Rp(Tp((e=this.view).state),n,e,"search-panel")?t.preventDefault():13==t.keyCode&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Gy:Ly)(this.view)):13==t.keyCode&&t.target==this.replaceField&&(t.preventDefault(),Yy(this.view))}update(t){for(let e of t.transactions)for(let t of e.effects)t.is(Vy)&&!t.value.eq(this.query)&&this.setQuery(t.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Ty).top}}function iw(t,e){return t.state.phrase(e)}const ow=/[\s\.,:;?!]/;function sw(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,o=Math.max(r.from,e-30),s=Math.min(i,n+30),a=t.state.sliceDoc(o,s);if(o!=r.from)for(let t=0;t<30;t++)if(!ow.test(a[t+1])&&ow.test(a[t])){a=a.slice(t);break}if(s!=i)for(let t=a.length-1;t>a.length-30;t--)if(!ow.test(a[t-1])&&ow.test(a[t])){a=a.slice(0,t);break}return yp.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const aw=yp.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),lw=[Zy,Zc.lowest(zy),aw];class cw{constructor(t,e,n){this.state=t,this.pos=e,this.explicit=n,this.abortListeners=[]}tokenBefore(t){let e=pO(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),r=e.text.slice(n-e.from,this.pos-e.from),i=r.search(pw(t,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(t,e){"abort"==t&&this.abortListeners&&this.abortListeners.push(e)}}function uw(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function hw(t){let e=t.map((t=>"string"==typeof t?{label:t}:t)),[n,r]=e.every((t=>/^\w+$/.test(t.label)))?[/\w*$/,/\w+$/]:function(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let t=1;t<r.length;t++)n[r[t]]=!0}let r=uw(e)+uw(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(e);return t=>{let i=t.matchBefore(r);return i||t.explicit?{from:i?i.from:t.pos,options:e,validFor:n}:null}}class fw{constructor(t,e,n){this.completion=t,this.source=e,this.match=n}}function dw(t){return t.selection.main.head}function pw(t,e){var n;let{source:r}=t,i=e&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(n=t.flags)&&void 0!==n?n:t.ignoreCase?"i":""):t}const gw=eu.define();function mw(t,e){const n=e.completion.apply||e.completion.label;let r=e.source;var i,o,s,a;"string"==typeof n?t.dispatch(Object.assign(Object.assign({},(i=t.state,o=n,s=r.from,a=r.to,Object.assign(Object.assign({},i.changeByRange((t=>{if(t==i.selection.main)return{changes:{from:s,to:a,insert:o},range:Ec.cursor(s+o.length)};let e=a-s;return!t.empty||e&&i.sliceDoc(t.from-e,t.from)!=i.sliceDoc(s,a)?{range:t}:{changes:{from:t.from-e,to:t.from,insert:o},range:Ec.cursor(t.from-e+o.length)}}))),{userEvent:"input.complete"}))),{annotations:gw.of(e.completion)})):n(t,e.completion,r.from,r.to)}const Ow=new WeakMap;function vw(t){if(!Array.isArray(t))return t;let e=Ow.get(t);return e||Ow.set(t,e=hw(t)),e}class bw{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let e=0;e<t.length;){let n=gc(t,e),r=Oc(n);this.chars.push(n);let i=t.slice(e,e+r),o=i.toUpperCase();this.folded.push(gc(o==i?i.toLowerCase():o,0)),e+=r}this.astral=t.length!=this.chars.length}match(t){if(0==this.pattern.length)return[0];if(t.length<this.pattern.length)return null;let{chars:e,folded:n,any:r,precise:i,byWord:o}=this;if(1==e.length){let r=gc(t,0);return r==e[0]?[0,0,Oc(r)]:r==n[0]?[-200,0,Oc(r)]:null}let s=t.indexOf(this.pattern);if(0==s)return[0,0,this.pattern.length];let a=e.length,l=0;if(s<0){for(let i=0,o=Math.min(t.length,200);i<o&&l<a;){let o=gc(t,i);o!=e[l]&&o!=n[l]||(r[l++]=i),i+=Oc(o)}if(l<a)return null}let c=0,u=0,h=!1,f=0,d=-1,p=-1,g=/[a-z]/.test(t),m=!0;for(let r=0,l=Math.min(t.length,200),O=0;r<l&&u<a;){let l=gc(t,r);s<0&&(c<a&&l==e[c]&&(i[c++]=r),f<a&&(l==e[f]||l==n[f]?(0==f&&(d=r),p=r+1,f++):f=0));let v,b=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(v=mc(l))!=v.toLowerCase()?1:v!=v.toUpperCase()?2:0;(!r||1==b&&g||0==O&&0!=b)&&(e[u]==l||n[u]==l&&(h=!0)?o[u++]=r:o.length&&(m=!1)),O=b,r+=Oc(l)}return u==a&&0==o[0]&&m?this.result((h?-200:0)-100,o,t):f==a&&0==d?[-200-t.length,0,p]:s>-1?[-700-t.length,s,s+this.pattern.length]:f==a?[-900-t.length,d,p]:u==a?this.result((h?-200:0)-100-700+(m?0:-1100),o,t):2==e.length?null:this.result((r[0]?-700:0)-200-1100,r,t)}result(t,e,n){let r=[t-n.length],i=1;for(let t of e){let e=t+(this.astral?Oc(gc(n,t)):1);i>1&&r[i-1]==t?r[i-1]=e:(r[i++]=t,r[i++]=e)}return r}}const yw=Rc.define({combine:t=>mu(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,optionClass:(t,e)=>n=>function(t,e){return t?e?t+" "+e:t:e}(t(n),e(n)),addToOptions:(t,e)=>t.concat(e)})});function ww(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let t=Math.floor(e/n);return{from:t*n,to:(t+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class xw{constructor(t,e){this.view=t,this.stateField=e,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:t=>this.positionInfo(t),key:this},this.space=null;let n=t.state.field(e),{options:r,selected:i}=n.open,o=t.state.facet(yw);this.optionContent=function(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(t){let e=document.createElement("div");return e.classList.add("cm-completionIcon"),t.type&&e.classList.add(...t.type.split(/\s+/g).map((t=>"cm-completionIcon-"+t))),e.setAttribute("aria-hidden","true"),e},position:20}),e.push({render(t,e,n){let r=document.createElement("span");r.className="cm-completionLabel";let{label:i}=t,o=0;for(let t=1;t<n.length;){let e=n[t++],s=n[t++];e>o&&r.appendChild(document.createTextNode(i.slice(o,e)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(i.slice(e,s))),a.className="cm-completionMatchedText",o=s}return o<i.length&&r.appendChild(document.createTextNode(i.slice(o))),r},position:50},{render(t){if(!t.detail)return null;let e=document.createElement("span");return e.className="cm-completionDetail",e.textContent=t.detail,e},position:80}),e.sort(((t,e)=>t.position-e.position)).map((t=>t.render))}(o),this.optionClass=o.optionClass,this.range=ww(r.length,i,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(e=>{for(let n,i=e.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(n=/-(\d+)$/.exec(i.id))&&+n[1]<r.length)return mw(t,r[+n[1]]),void e.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(t){var e,n,r;let i=t.state.field(this.stateField),o=t.startState.field(this.stateField);i!=o&&(this.updateSel(),(null===(e=i.open)||void 0===e?void 0:e.disabled)!=(null===(n=o.open)||void 0===n?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(null===(r=i.open)||void 0===r?void 0:r.disabled)))}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=ww(e.options.length,e.selected,this.view.state.facet(yw).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e.options,t.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(e.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=e.options[e.selected],{info:r}=n;if(!r)return;let i="string"==typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then((e=>{e&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(e)})).catch((t=>mf(this.view.state,t,"completion info"))):this.addInfoPane(i)}}addInfoPane(t){let e=this.info=document.createElement("div");e.className="cm-tooltip cm-completionInfo",e.appendChild(t),this.dom.appendChild(e),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(t){let e=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),e=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return e&&function(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=t.getBoundingClientRect(),i=this.space;if(!i){let t=this.dom.ownerDocument.defaultView||window;i={left:0,top:0,right:t.innerWidth,bottom:t.innerHeight}}if(r.top>Math.min(i.bottom,e.bottom)-10||r.bottom<Math.max(i.top,e.top)+10)return null;let o,s=this.view.textDirection==Tf.RTL,a=s,l=!1,c="",u="",h=e.left-i.left,f=i.right-e.right;if(a&&h<Math.min(n.width,f)?a=!1:!a&&f<Math.min(n.width,h)&&(a=!0),n.width<=(a?h:f))c=Math.max(i.top,Math.min(r.top,i.bottom-n.height))-e.top+"px",o=Math.min(400,a?h:f)+"px";else{l=!0,o=Math.min(400,(s?e.right:i.right-e.left)-30)+"px";let t=i.bottom-e.bottom;t>=n.height||t>e.top?c=r.bottom-e.top+"px":u=e.bottom-r.top+"px"}return{top:c,bottom:u,maxWidth:o,class:l?s?"left-narrow":"right-narrow":a?"left":"right"}}positionInfo(t){this.info&&(t?(this.info.style.top=t.top,this.info.style.bottom=t.bottom,this.info.style.maxWidth=t.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+t.class):this.info.style.top="-1e6px")}createListBox(t,e,n){const r=document.createElement("ul");r.id=e,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let i=n.from;i<n.to;i++){let{completion:n,match:o}=t[i];const s=r.appendChild(document.createElement("li"));s.id=e+"-"+i,s.setAttribute("role","option");let a=this.optionClass(n);a&&(s.className=a);for(let t of this.optionContent){let e=t(n,this.view.state,o);e&&s.appendChild(e)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function Sw(t){return 100*(t.boost||0)+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}class kw{constructor(t,e,n,r,i,o){this.options=t,this.attrs=e,this.tooltip=n,this.timestamp=r,this.selected=i,this.disabled=o}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new kw(this.options,_w(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,n,r,i){let o=function(t,e){let n=[],r=0;for(let i of t)if(i.hasResult())if(!1===i.result.filter){let t=i.result.getMatch;for(let e of i.result.options){let o=[1e9-r++];if(t)for(let n of t(e))o.push(n);n.push(new fw(e,i,o))}}else{let t,r=new bw(e.sliceDoc(i.from,i.to));for(let e of i.result.options)(t=r.match(e.label))&&(null!=e.boost&&(t[0]+=e.boost),n.push(new fw(e,i,t)))}let i=[],o=null,s=e.facet(yw).compareCompletions;for(let t of n.sort(((t,e)=>e.match[0]-t.match[0]||s(t.completion,e.completion))))!o||o.label!=t.completion.label||o.detail!=t.completion.detail||null!=o.type&&null!=t.completion.type&&o.type!=t.completion.type||o.apply!=t.completion.apply?i.push(t):Sw(t.completion)>Sw(o)&&(i[i.length-1]=t),o=t.completion;return i}(t,e);if(!o.length)return r&&t.some((t=>1==t.state))?new kw(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let s=e.facet(yw).selectOnOpen?0:-1;if(r&&r.selected!=s&&-1!=r.selected){let t=r.options[r.selected].completion;for(let e=0;e<o.length;e++)if(o[e].completion==t){s=e;break}}return new kw(o,_w(n,s),{pos:t.reduce(((t,e)=>e.hasResult()?Math.min(t,e.from):t),1e8),create:(a=jw,t=>new xw(t,a)),above:i.aboveCursor},r?r.timestamp:Date.now(),s,!1);var a}map(t){return new kw(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Cw{constructor(t,e,n){this.active=t,this.id=e,this.open=n}static start(){return new Cw(Pw,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(t){let{state:e}=t,n=e.facet(yw),r=(n.override||e.languageDataAt("autocomplete",dw(e)).map(vw)).map((e=>{let r=this.active.find((t=>t.source==e))||new Tw(e,this.active.some((t=>0!=t.state))?1:0);return r.update(t,n)}));r.length==this.active.length&&r.every(((t,e)=>t==this.active[e]))&&(r=this.active);let i=this.open;t.selection||r.some((e=>e.hasResult()&&t.changes.touchesRange(e.from,e.to)))||!function(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}(r,this.active)?i=kw.build(r,e,this.id,this.open,n):i&&i.disabled&&!r.some((t=>1==t.state))?i=null:i&&t.docChanged&&(i=i.map(t.changes)),!i&&r.every((t=>1!=t.state))&&r.some((t=>t.hasResult()))&&(r=r.map((t=>t.hasResult()?new Tw(t.source,0):t)));for(let e of t.effects)e.is(Dw)&&(i=i&&i.setSelected(e.value,this.id));return r==this.active&&i==this.open?this:new Cw(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Qw}}const Qw={"aria-autocomplete":"list"};function _w(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Pw=[];function Ew(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Tw{constructor(t,e,n=-1){this.source=t,this.state=e,this.explicitPos=n}hasResult(){return!1}update(t,e){let n=Ew(t),r=this;n?r=r.handleUserEvent(t,n,e):t.docChanged?r=r.handleChange(t):t.selection&&0!=r.state&&(r=new Tw(r.source,0));for(let e of t.effects)if(e.is(Rw))r=new Tw(r.source,1,e.value?dw(t.state):-1);else if(e.is(Mw))r=new Tw(r.source,0);else if(e.is(Aw))for(let t of e.value)t.source==r.source&&(r=t);return r}handleUserEvent(t,e,n){return"delete"!=e&&n.activateOnTyping?new Tw(this.source,1):this.map(t.changes)}handleChange(t){return t.changes.touchesRange(dw(t.startState))?new Tw(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new Tw(this.source,this.state,t.mapPos(this.explicitPos))}}class $w extends Tw{constructor(t,e,n,r,i){super(t,2,e),this.result=n,this.from=r,this.to=i}hasResult(){return!0}handleUserEvent(t,e,n){var r;let i=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),s=dw(t.state);if((this.explicitPos<0?s<=i:s<this.from)||s>o||"delete"==e&&dw(t.startState)==this.from)return new Tw(this.source,"input"==e&&n.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos);return function(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return"function"==typeof t?t(i,n,r,e):pw(t,!0).test(i)}(this.result.validFor,t.state,i,o)?new $w(this.source,l,this.result,i,o):this.result.update&&(a=this.result.update(this.result,i,o,new cw(t.state,s,l>=0)))?new $w(this.source,l,a,a.from,null!==(r=a.to)&&void 0!==r?r:dw(t.state)):new Tw(this.source,1,l)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new Tw(this.source,0):this.map(t.changes)}map(t){return t.empty?this:new $w(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1))}}const Rw=iu.define(),Mw=iu.define(),Aw=iu.define({map:(t,e)=>t.map((t=>t.map(e)))}),Dw=iu.define(),jw=Vc.define({create:()=>Cw.start(),update:(t,e)=>t.update(e),provide:t=>[Cg.from(t,(t=>t.tooltip)),yp.contentAttributes.from(t,(t=>t.attrs))]});function qw(t,e="option"){return n=>{let r=n.state.field(jw,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(yw).interactionDelay)return!1;let i,o=1;"page"==e&&(i=function(t,e){let n=t.plugin(xg);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+o*(t?1:-1):t?0:s-1;return a<0?a="page"==e?0:s-1:a>=s&&(a="page"==e?s-1:0),n.dispatch({effects:Dw.of(a)}),!0}}class Xw{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const Vw=yf.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of t.state.field(jw).active)1==e.state&&this.startQuery(e)}update(t){let e=t.state.field(jw);if(!t.selectionSet&&!t.docChanged&&t.startState.field(jw)==e)return;let n=t.transactions.some((t=>(t.selection||t.docChanged)&&!Ew(t)));for(let e=0;e<this.running.length;e++){let r=this.running[e];if(n||r.updates.length+t.transactions.length>50&&Date.now()-r.time>1e3){for(let t of r.context.abortListeners)try{t()}catch(t){mf(this.view.state,t)}r.context.abortListeners=null,this.running.splice(e--,1)}else r.updates.push(...t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some((t=>1==t.state&&!this.running.some((e=>e.active.source==t.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let e of t.transactions)"input"==Ew(e)?this.composing=2:2==this.composing&&e.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:t}=this.view,e=t.field(jw);for(let t of e.active)1!=t.state||this.running.some((e=>e.active.source==t.source))||this.startQuery(t)}startQuery(t){let{state:e}=this.view,n=dw(e),r=new cw(e,n,t.explicitPos==n),i=new Xw(t,r);this.running.push(i),Promise.resolve(t.source(r)).then((t=>{i.context.aborted||(i.done=t||null,this.scheduleAccept())}),(t=>{this.view.dispatch({effects:Mw.of(null)}),mf(this.view.state,t)}))}scheduleAccept(){this.running.every((t=>void 0!==t.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(yw);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let r=new $w(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(t=i.done.to)&&void 0!==t?t:dw(i.updates.length?i.updates[0].startState:this.view.state));for(let t of i.updates)r=r.update(t,n);if(r.hasResult()){e.push(r);continue}}let o=this.view.state.field(jw).active.find((t=>t.source==i.active.source));if(o&&1==o.state)if(null==i.done){let t=new Tw(i.active.source,0);for(let e of i.updates)t=t.update(e,n);1!=t.state&&e.push(t)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:Aw.of(e)})}},{eventHandlers:{blur(){let t=this.view.state.field(jw,!1);t&&t.tooltip&&this.view.state.facet(yw).closeOnBlur&&this.view.dispatch({effects:Mw.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:Rw.of(!1)})),20),this.composing=0}}}),Uw=yp.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Zw{constructor(t,e,n,r){this.field=t,this.line=e,this.from=n,this.to=r}}class Iw{constructor(t,e,n){this.field=t,this.from=e,this.to=n}map(t){let e=t.mapPos(this.from,-1,bc.TrackDel),n=t.mapPos(this.to,1,bc.TrackDel);return null==e||null==n?null:new Iw(this.field,e,n)}}class Nw{constructor(t,e){this.lines=t,this.fieldPositions=e}instantiate(t,e){let n=[],r=[e],i=t.doc.lineAt(e),o=/^\s*/.exec(i.text)[0];for(let i of this.lines){if(n.length){let n=o,s=/^\t*/.exec(i)[0].length;for(let e=0;e<s;e++)n+=t.facet(QO);r.push(e+n.length-s),i=n+i.slice(s)}n.push(i),e+=i.length+1}let s=this.fieldPositions.map((t=>new Iw(t.field,r[t.line]+t.from,r[t.line]+t.to)));return{text:n,ranges:s}}static parse(t){let e,n=[],r=[],i=[];for(let o of t.split(/\r\n?|\n/)){for(;e=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let t=e[1]?+e[1]:null,s=e[2]||e[3]||"",a=-1;for(let e=0;e<n.length;e++)(null!=t?n[e].seq==t:s&&n[e].name==s)&&(a=e);if(a<0){let e=0;for(;e<n.length&&(null==t||null!=n[e].seq&&n[e].seq<t);)e++;n.splice(e,0,{seq:t,name:s}),a=e;for(let t of i)t.field>=a&&t.field++}i.push(new Zw(a,r.length,e.index,e.index+s.length)),o=o.slice(0,e.index)+s+o.slice(e.index+e[0].length)}for(let t;t=/\\([{}])/.exec(o);){o=o.slice(0,t.index)+t[1]+o.slice(t.index+t[0].length);for(let e of i)e.line==r.length&&e.from>t.index&&(e.from--,e.to--)}r.push(o)}return new Nw(r,i)}}let Bw=Gh.widget({widget:new class extends Wh{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),zw=Gh.mark({class:"cm-snippetField"});class Ww{constructor(t,e){this.ranges=t,this.active=e,this.deco=Gh.set(t.map((t=>(t.from==t.to?Bw:zw).range(t.from,t.to))))}map(t){let e=[];for(let n of this.ranges){let r=n.map(t);if(!r)return null;e.push(r)}return new Ww(e,this.active)}selectionInsideField(t){return t.ranges.every((t=>this.ranges.some((e=>e.field==this.active&&e.from<=t.from&&e.to>=t.to))))}}const Lw=iu.define({map:(t,e)=>t&&t.map(e)}),Gw=iu.define(),Fw=Vc.define({create:()=>null,update(t,e){for(let n of e.effects){if(n.is(Lw))return n.value;if(n.is(Gw)&&t)return new Ww(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>yp.decorations.from(t,(t=>t?t.deco:Gh.none))});function Yw(t,e){return Ec.create(t.filter((t=>t.field==e)).map((t=>Ec.range(t.from,t.to))))}function Hw(t){let e=Nw.parse(t);return(t,n,r,i)=>{let{text:o,ranges:s}=e.instantiate(t.state,r),a={changes:{from:r,to:i,insert:Jl.of(o)},scrollIntoView:!0};if(s.length&&(a.selection=Yw(s,0)),s.length>1){let e=new Ww(s,0),n=a.effects=[Lw.of(e)];void 0===t.state.field(Fw,!1)&&n.push(iu.appendConfig.of([Fw,ex,rx,Uw]))}t.dispatch(t.state.update(a))}}function Jw(t){return({state:e,dispatch:n})=>{let r=e.field(Fw,!1);if(!r||t<0&&0==r.active)return!1;let i=r.active+t,o=t>0&&!r.ranges.some((e=>e.field==i+t));return n(e.update({selection:Yw(r.ranges,i),effects:Lw.of(o?null:new Ww(r.ranges,i))})),!0}}const Kw=[{key:"Tab",run:Jw(1),shift:Jw(-1)},{key:"Escape",run:({state:t,dispatch:e})=>!!t.field(Fw,!1)&&(e(t.update({effects:Lw.of(null)})),!0)}],tx=Rc.define({combine:t=>t.length?t[0]:Kw}),ex=Zc.highest(Pp.compute([tx],(t=>t.facet(tx))));function nx(t,e){return Object.assign(Object.assign({},e),{apply:Hw(t)})}const rx=yp.domEventHandlers({mousedown(t,e){let n,r=e.state.field(Fw,!1);if(!r||null==(n=e.posAtCoords({x:t.clientX,y:t.clientY})))return!1;let i=r.ranges.find((t=>t.from<=n&&t.to>=n));return!(!i||i.field==r.active||(e.dispatch({selection:Yw(r.ranges,i.field),effects:Lw.of(r.ranges.some((t=>t.field>i.field))?new Ww(r.ranges,i.field):null)}),0))}}),ix={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},ox=iu.define({map(t,e){let n=e.mapPos(t,-1,bc.TrackAfter);return null==n?void 0:n}}),sx=iu.define({map:(t,e)=>e.mapPos(t)}),ax=new class extends Ou{};ax.startSide=1,ax.endSide=-1;const lx=Vc.define({create:()=>wu.empty,update(t,e){if(e.selection){let n=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;n!=e.changes.mapPos(r,-1)&&(t=wu.empty)}t=t.map(e.changes);for(let n of e.effects)n.is(ox)?t=t.update({add:[ax.range(n.value,n.value+1)]}):n.is(sx)&&(t=t.update({filter:t=>t!=n.value}));return t}}),cx="()[]{}<>";function ux(t){for(let e=0;e<cx.length;e+=2)if(cx.charCodeAt(e)==t)return cx.charAt(e+1);return mc(t<128?t:t+1)}function hx(t,e){return t.languageDataAt("closeBrackets",e)[0]||ix}const fx="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),dx=yp.inputHandler.of(((t,e,n,r)=>{if((fx?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||2==r.length&&1==Oc(gc(r,0))||e!=i.from||n!=i.to)return!1;let o=function(t,e){let n=hx(t,t.selection.main.head),r=n.brackets||ix.brackets;for(let i of r){let o=ux(gc(i,0));if(e==i)return o==i?bx(t,i,r.indexOf(i+i+i)>-1,n):Ox(t,i,o,n.before||ix.before);if(e==o&&gx(t,t.selection.main.from))return vx(t,0,o)}return null}(t.state,r);return!!o&&(t.dispatch(o),!0)})),px=[{key:"Backspace",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=hx(t,t.selection.main.head).brackets||ix.brackets,r=null,i=t.changeByRange((e=>{if(e.empty){let r=function(t,e){let n=t.sliceString(e-2,e);return Oc(gc(n,0))==n.length?n:n.slice(1)}(t.doc,e.head);for(let i of n)if(i==r&&mx(t.doc,e.head)==ux(gc(i,0)))return{changes:{from:e.head-i.length,to:e.head+i.length},range:Ec.cursor(e.head-i.length)}}return{range:r=e}}));return r||e(t.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function gx(t,e){let n=!1;return t.field(lx).between(0,t.doc.length,(t=>{t==e&&(n=!0)})),n}function mx(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Oc(gc(n,0)))}function Ox(t,e,n,r){let i=null,o=t.changeByRange((o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:ox.of(o.to+e.length),range:Ec.range(o.anchor+e.length,o.head+e.length)};let s=mx(t.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:e+n,from:o.head},effects:ox.of(o.head+e.length),range:Ec.cursor(o.head+e.length)}:{range:i=o}}));return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function vx(t,e,n){let r=null,i=t.selection.ranges.map((e=>e.empty&&mx(t.doc,e.head)==n?Ec.cursor(e.head+n.length):r=e));return r?null:t.update({selection:Ec.create(i,t.selection.mainIndex),scrollIntoView:!0,effects:t.selection.ranges.map((({from:t})=>sx.of(t)))})}function bx(t,e,n,r){let i=r.stringPrefixes||ix.stringPrefixes,o=null,s=t.changeByRange((r=>{if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:e,from:r.to}],effects:ox.of(r.to+e.length),range:Ec.range(r.anchor+e.length,r.head+e.length)};let s,a=r.head,l=mx(t.doc,a);if(l==e){if(yx(t,a))return{changes:{insert:e+e,from:a},effects:ox.of(a+e.length),range:Ec.cursor(a+e.length)};if(gx(t,a)){let r=n&&t.sliceDoc(a,a+3*e.length)==e+e+e;return{range:Ec.cursor(a+e.length*(r?3:1)),effects:sx.of(a)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(s=wx(t,a-2*e.length,i))>-1&&yx(t,s))return{changes:{insert:e+e+e+e,from:a},effects:ox.of(a+e.length),range:Ec.cursor(a+e.length)};if(t.charCategorizer(a)(l)!=fu.Word&&wx(t,a,i)>-1&&!function(t,e,n,r){let i=pO(t).resolveInner(e,-1),o=r.reduce(((t,e)=>Math.max(t,e.length)),0);for(let s=0;s<5;s++){let s=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),a=s.indexOf(n);if(!a||a>-1&&r.indexOf(s.slice(0,a))>-1){let e=i.firstChild;for(;e&&e.from==i.from&&e.to-e.from>n.length+a;){if(t.sliceDoc(e.to-n.length,e.to)==n)return!1;e=e.firstChild}return!0}let l=i.to==e&&i.parent;if(!l)break;i=l}return!1}(t,a,e,i))return{changes:{insert:e+e,from:a},effects:ox.of(a+e.length),range:Ec.cursor(a+e.length)}}return{range:o=r}}));return o?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function yx(t,e){let n=pO(t).resolveInner(e+1);return n.parent&&n.from==e}function wx(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=fu.Word)return e;for(let i of n){let n=e-i.length;if(t.sliceDoc(n,e)==i&&r(t.sliceDoc(n-1,n))!=fu.Word)return n}return-1}function xx(t={}){return[jw,yw.of(t),Vw,kx,Uw]}const Sx=[{key:"Ctrl-Space",run:t=>!!t.state.field(jw,!1)&&(t.dispatch({effects:Rw.of(!0)}),!0)},{key:"Escape",run:t=>{let e=t.state.field(jw,!1);return!(!e||!e.active.some((t=>0!=t.state))||(t.dispatch({effects:Mw.of(null)}),0))}},{key:"ArrowDown",run:qw(!0)},{key:"ArrowUp",run:qw(!1)},{key:"PageDown",run:qw(!0,"page")},{key:"PageUp",run:qw(!1,"page")},{key:"Enter",run:t=>{let e=t.state.field(jw,!1);return!(t.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<t.state.facet(yw).interactionDelay||(e.open.disabled||mw(t,e.open.options[e.open.selected]),0))}}],kx=Zc.highest(Pp.computeN([yw],(t=>t.facet(yw).defaultKeymap?[Sx]:[])));class Cx{constructor(t,e,n){this.from=t,this.to=e,this.diagnostic=n}}class Qx{constructor(t,e,n){this.diagnostics=t,this.panel=e,this.selected=n}static init(t,e,n){let r=t,i=n.facet(Ux).markerFilter;i&&(r=i(r));let o=Gh.set(r.map((t=>t.from==t.to||t.from==t.to-1&&n.doc.lineAt(t.from).to==t.from?Gh.widget({widget:new Nx(t),diagnostic:t}).range(t.from):Gh.mark({attributes:{class:"cm-lintRange cm-lintRange-"+t.severity},diagnostic:t}).range(t.from,t.to))),!0);return new Qx(o,e,_x(o))}}function _x(t,e=null,n=0){let r=null;return t.between(n,1e9,((t,n,{spec:i})=>{if(!e||i.diagnostic==e)return r=new Cx(t,n,i.diagnostic),!1})),r}function Px(t,e){return!(!t.effects.some((t=>t.is(Tx)))&&!t.changes.touchesRange(e.pos))}function Ex(t,e){return t.field(Mx,!1)?e:e.concat(iu.appendConfig.of([Mx,yp.decorations.compute([Mx],(t=>{let{selected:e,panel:n}=t.field(Mx);return e&&n&&e.from!=e.to?Gh.set([Ax.range(e.from,e.to)]):Gh.none})),$g(Dx,{hideOn:Px}),Lx]))}const Tx=iu.define(),$x=iu.define(),Rx=iu.define(),Mx=Vc.define({create:()=>new Qx(Gh.none,null,null),update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=_x(n,t.selected.diagnostic,i)||_x(n,null,i)}t=new Qx(n,t.panel,r)}for(let n of e.effects)n.is(Tx)?t=Qx.init(n.value,t.panel,e.state):n.is($x)?t=new Qx(t.diagnostics,n.value?zx.open:null,t.selected):n.is(Rx)&&(t=new Qx(t.diagnostics,t.panel,n.value));return t},provide:t=>[Xg.from(t,(t=>t.panel)),yp.decorations.from(t,(t=>t.diagnostics))]}),Ax=Gh.mark({class:"cm-lintRange cm-lintRange-active"});function Dx(t,e,n){let{diagnostics:r}=t.state.field(Mx),i=[],o=2e8,s=0;r.between(e-(n<0?1:0),e+(n>0?1:0),((t,r,{spec:a})=>{e>=t&&e<=r&&(t==r||(e>t||n>0)&&(e<r||n<0))&&(i.push(a.diagnostic),o=Math.min(t,o),s=Math.max(r,s))}));let a=t.state.facet(Ux).tooltipFilter;return a&&(i=a(i)),i.length?{pos:o,end:s,above:t.state.doc.lineAt(o).to<s,create:()=>({dom:jx(t,i)})}:null}function jx(t,e){return ay("ul",{class:"cm-tooltip-lint"},e.map((e=>Ix(t,e,!1))))}const qx=t=>{let e=t.state.field(Mx,!1);return!(!e||!e.panel||(t.dispatch({effects:$x.of(!1)}),0))},Xx=[{key:"Mod-Shift-m",run:t=>{let e=t.state.field(Mx,!1);e&&e.panel||t.dispatch({effects:Ex(t.state,[$x.of(!0)])});let n=Ag(t,zx.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:t=>{let e=t.state.field(Mx,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!(!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)||(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),0))}}],Vx=yf.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Ux);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:t}=this.view,{sources:e}=t.facet(Ux);Promise.all(e.map((t=>Promise.resolve(t(this.view))))).then((e=>{let n=e.reduce(((t,e)=>t.concat(e)));this.view.state.doc==t.doc&&this.view.dispatch(function(t,e){return{effects:Ex(t,[Tx.of(e)])}}(this.view.state,n))}),(t=>{mf(this.view.state,t)}))}}update(t){let e=t.state.facet(Ux);(t.docChanged||e!=t.startState.facet(Ux))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Ux=Rc.define({combine:t=>Object.assign({sources:t.map((t=>t.source))},mu(t.map((t=>t.config)),{delay:750,markerFilter:null,tooltipFilter:null})),enables:Vx});function Zx(t){let e=[];if(t)t:for(let{name:n}of t){for(let t=0;t<n.length;t++){let r=n[t];if(/[a-zA-Z]/.test(r)&&!e.some((t=>t.toLowerCase()==r.toLowerCase()))){e.push(r);continue t}}e.push("")}return e}function Ix(t,e,n){var r;let i=n?Zx(e.actions):[];return ay("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ay("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),null===(r=e.actions)||void 0===r?void 0:r.map(((n,r)=>{let o=r=>{r.preventDefault();let i=_x(t.state.field(Mx).diagnostics,e);i&&n.apply(t,i.from,i.to)},{name:s}=n,a=i[r]?s.indexOf(i[r]):-1,l=a<0?s:[s.slice(0,a),ay("u",s.slice(a,a+1)),s.slice(a+1)];return ay("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":` Action: ${s}${a<0?"":` (access key "${i[r]})"`}.`},l)})),e.source&&ay("div",{class:"cm-diagnosticSource"},e.source))}class Nx extends Wh{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return ay("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Bx{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Ix(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class zx{constructor(t){this.view=t,this.items=[],this.list=ay("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e=>{if(27==e.keyCode)qx(this.view),this.view.focus();else if(38==e.keyCode||33==e.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==e.keyCode||34==e.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==e.keyCode)this.moveSelection(0);else if(35==e.keyCode)this.moveSelection(this.items.length-1);else if(13==e.keyCode)this.view.focus();else{if(!(e.keyCode>=65&&e.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=Zx(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==e.keyCode){let e=_x(this.view.state.field(Mx).diagnostics,n);e&&n.actions[i].apply(t,e.from,e.to)}}}e.preventDefault()},onclick:t=>{for(let e=0;e<this.items.length;e++)this.items[e].dom.contains(t.target)&&this.moveSelection(e)}}),this.dom=ay("div",{class:"cm-panel-lint"},this.list,ay("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>qx(this.view)},"×")),this.update()}get selectedIndex(){let t=this.view.state.field(Mx).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(Mx),n=0,r=!1,i=null;for(t.between(0,this.view.state.doc.length,((t,o,{spec:s})=>{let a,l=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==s.diagnostic){l=t;break}l<0?(a=new Bx(this.view,s.diagnostic),this.items.splice(n,0,a),r=!0):(a=this.items[l],l>n&&(this.items.splice(n,l-n),r=!0)),e&&a.diagnostic==e.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new Bx(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:t,panel:e})=>{t.top<e.top?this.list.scrollTop-=e.top-t.top:t.bottom>e.bottom&&(this.list.scrollTop+=t.bottom-e.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let t=this.list.firstChild;function e(){let e=t;t=e.nextSibling,e.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)e();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=_x(this.view.state.field(Mx).diagnostics,this.items[t].diagnostic);e&&this.view.dispatch({selection:{anchor:e.from,head:e.to},scrollIntoView:!0,effects:Rx.of(e)})}static open(t){return new zx(t)}}function Wx(t){return function(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Lx=yp.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Wx("#d11")},".cm-lintRange-warning":{backgroundImage:Wx("orange")},".cm-lintRange-info":{backgroundImage:Wx("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Gx=(()=>[rm(),sm,sg(),Lv(),av(),Vp(),[Hp,Jp],gu.allowMultipleSelections.of(!0),gu.transactionFilter.of((t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return t;let o=n.sliceString(i.from,r);if(!e.some((t=>t.test(o))))return t;let{state:s}=t,a=-1,l=[];for(let{head:t}of s.selection.ranges){let e=s.doc.lineAt(t);if(e.from==a)continue;a=e.from;let n=EO(s,e.from);if(null==n)continue;let r=/^\s*/.exec(e.text)[0],i=PO(s,n);r!=i&&l.push({from:e.from,to:e.from+r.length,insert:i})}return l.length?[t,{changes:l,sequential:!0}]:t})),dv(mv,{fallback:!0}),Cv(),[dx,lx],xx(),pg(),Og(),hg,ky(),Pp.of([...px,...sy,...nw,...cb,...tv,...Sx,...Xx])])();class Fx{constructor(t,e,n,r,i,o,s,a,l,c=0,u){this.p=t,this.stack=e,this.state=n,this.reducePos=r,this.pos=i,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter(((t,e)=>e%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,n=0){let r=t.parser.context;return new Fx(t,[],e,n,n,0,[],0,r?new Yx(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){let e=t>>19,n=65535&t,{parser:r}=this.p,i=r.dynamicPrecedence(n);if(i&&(this.score+=i),0==e)return this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.reduceContext(n,this.reducePos);let o=this.stack.length-3*(e-1)-(262144&t?6:0),s=this.stack[o-2],a=this.stack[o-1],l=this.bufferBase+this.buffer.length-a;if(n<r.minRepeatTerm||131072&t){let t=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,s,t,l+4,!0)}if(262144&t)this.state=this.stack[o];else{let t=this.stack[o-3];this.state=r.getGoto(t,n,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(n,s)}storeNode(t,e,n,r=4,i=!1){if(0==t&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let t=this,r=this.buffer.length;if(0==r&&t.parent&&(r=t.bufferBase-t.parent.bufferBase,t=t.parent),r>0&&0==t.buffer[r-4]&&t.buffer[r-1]>-1){if(e==n)return;if(t.buffer[r-2]>=e)return void(t.buffer[r-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4])for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4);this.buffer[i]=t,this.buffer[i+1]=e,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(t,e,n,r)}shift(t,e,n){let r=this.pos;if(131072&t)this.pushState(65535&t,this.pos);else if(0==(262144&t)){let i=t,{parser:o}=this.p;(n>this.pos||e<=o.maxNode)&&(this.pos=n,o.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),this.shiftContext(e,r),e<=o.maxNode&&this.buffer.push(e,r,n,4)}else this.pos=n,this.shiftContext(e,r),e<=this.p.parser.maxNode&&this.buffer.push(e,r,n,4)}apply(t,e,n){65536&t?this.reduce(t):this.shift(t,e,n)}useNode(t,e){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=t)&&(this.p.reused.push(t),n++);let r=this.pos;this.reducePos=this.pos=r+t.length,this.pushState(e,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let n=t.buffer.slice(e),r=t.bufferBase+e;for(;t&&r==t.bufferBase;)t=t.parent;return new Fx(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let n=t<=this.p.parser.maxNode;n&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,n?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new Jx(this);;){let n=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(0==n)return!1;if(0==(65536&n))return!0;e.reduce(n)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let n=[];for(let r,i=0;i<e.length;i+=2)(r=e[i+1])!=this.state&&this.p.parser.hasAction(r,t)&&n.push(e[i],r);if(this.stack.length<120)for(let t=0;n.length<8&&t<e.length;t+=2){let r=e[t+1];n.some(((t,e)=>1&e&&t==r))||n.push(e[t],r)}e=n}let n=[];for(let t=0;t<e.length&&n.length<4;t+=2){let r=e[t+1];if(r==this.state)continue;let i=this.split();i.pushState(r,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(e[t],this.pos),i.score-=200,n.push(i)}return n}forceReduce(){let t=this.p.parser.stateSlot(this.state,5);if(0==(65536&t))return!1;let{parser:e}=this.p;if(!e.validAction(this.state,t)){let n=t>>19,r=65535&t,i=this.stack.length-3*n;if(i<0||e.getGoto(this.stack[i],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:t}=this.p;return 65535==t.data[t.stateSlot(this.state,1)]&&!t.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||-3!=this.buffer[t])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||-4!=this.buffer[t])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new Yx(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Yx{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}var Hx;!function(t){t[t.Insert=200]="Insert",t[t.Delete=190]="Delete",t[t.Reduce=100]="Reduce",t[t.MaxNext=4]="MaxNext",t[t.MaxInsertStackDepth=300]="MaxInsertStackDepth",t[t.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(Hx||(Hx={}));class Jx{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=65535&t,n=t>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=r}}class Kx{constructor(t,e,n){this.stack=t,this.pos=e,this.index=n,this.buffer=t.buffer,0==this.index&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new Kx(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;null!=t&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new Kx(this.stack,this.pos,this.index)}}class tS{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const eS=new tS;class nS{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=eS,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let n=this.range,r=this.rangeIndex,i=this.pos+t;for(;i<n.from;){if(!r)return null;let t=this.ranges[--r];i-=n.from-t.to,n=t}for(;e<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;let t=this.ranges[++r];i+=t.from-n.to,n=t}return i}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e,n,r=this.chunkOff+t;if(r>=0&&r<this.chunk.length)e=this.pos+t,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(t,1);if(null==r)return-1;if(e=r,e>=this.chunk2Pos&&e<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(e-this.chunk2Pos);else{let t=this.rangeIndex,r=this.range;for(;r.to<=e;)r=this.ranges[++t];this.chunk2=this.input.chunk(this.chunk2Pos=e),e+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-e)),n=this.chunk2.charCodeAt(0)}}return e>=this.token.lookAhead&&(this.token.lookAhead=e+1),n}acceptToken(t,e=0){let n=e?this.resolveOffset(e,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=eS,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let n="";for(let r of this.ranges){if(r.from>=e)break;r.to>t&&(n+=this.input.read(Math.max(r.from,t),Math.min(r.to,e)))}return n}}class rS{constructor(t,e){this.data=t,this.id=e}token(t,e){!function(t,e,n,r){let i=0,o=1<<r,{parser:s}=n.p,{dialect:a}=s;t:for(;0!=(o&t[i]);){let n=t[i+1];for(let r=i+3;r<n;r+=2)if((t[r+1]&o)>0){let n=t[r];if(a.allows(n)&&(-1==e.token.value||e.token.value==n||s.overrides(n,e.token.value))){e.acceptToken(n);break}}let r=e.next,l=0,c=t[i+2];if(!(e.next<0&&c>l&&65535==t[n+3*c-3]&&65535==t[n+3*c-3])){for(;l<c;){let o=l+c>>1,s=n+o+(o<<1),a=t[s],u=t[s+1]||65536;if(r<a)c=o;else{if(!(r>=u)){i=t[s+2],e.advance();continue t}l=o+1}}break}i=t[n+3*c-1]}}(this.data,t,e,this.id)}}rS.prototype.contextual=rS.prototype.fallback=rS.prototype.extend=!1;class iS{constructor(t,e={}){this.token=t,this.contextual=!!e.contextual,this.fallback=!!e.fallback,this.extend=!!e.extend}}function oS(t,e=Uint16Array){if("string"!=typeof t)return t;let n=null;for(let r=0,i=0;r<t.length;){let o=0;for(;;){let e=t.charCodeAt(r++),n=!1;if(126==e){o=65535;break}e>=92&&e--,e>=34&&e--;let i=e-32;if(i>=46&&(i-=46,n=!0),o+=i,n)break;o*=46}n?n[i++]=o:n=new e(o)}return n}const sS="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let aS=null;var lS,cS;function uS(t,e,n){let r=t.cursor(mm.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}!function(t){t[t.Margin=25]="Margin"}(lS||(lS={}));class hS{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?uS(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?uS(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let n=this.trees[e],r=this.index[e];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],o=this.start[e]+n.positions[r];if(o>t)return this.nextStart=o,null;if(i instanceof Om){if(o==t){if(o<this.safeFrom)return null;let t=o+i.length;if(t<=this.safeTo){let e=i.prop(um.lookAhead);if(!e||t+e<this.fragment.to)return i}}this.index[e]++,o+i.length>=Math.max(this.safeFrom,t)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[e]++,this.nextStart=o+i.length}}}class fS{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map((t=>new tS))}getActions(t){let e=0,n=null,{parser:r}=t.p,{tokenizers:i}=r,o=r.stateSlot(t.state,3),s=t.curContext?t.curContext.hash:0,a=0;for(let r=0;r<i.length;r++){if(0==(1<<r&o))continue;let l=i[r],c=this.tokens[r];if((!n||l.fallback)&&((l.contextual||c.start!=t.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,l,t),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let r=e;if(c.extended>-1&&(e=this.addActions(t,c.extended,c.end,e)),e=this.addActions(t,c.value,c.end,e),!l.extend&&(n=c,e>r))break}}for(;this.actions.length>e;)this.actions.pop();return a&&t.setLookAhead(a),n||t.pos!=this.stream.end||(n=new tS,n.value=t.p.parser.eofTerm,n.start=n.end=t.pos,e=this.addActions(t,n.value,n.end,e)),this.mainToken=n,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new tS,{pos:n,p:r}=t;return e.start=n,e.end=Math.min(n+1,r.stream.end),e.value=n==r.stream.end?r.parser.eofTerm:0,e}updateCachedToken(t,e,n){let r=this.stream.clipPos(n.pos);if(e.token(this.stream.reset(r,t),n),t.value>-1){let{parser:e}=n.p;for(let r=0;r<e.specialized.length;r++)if(e.specialized[r]==t.value){let i=e.specializers[r](this.stream.read(t.start,t.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?t.value=i>>1:t.extended=i>>1;break}}}else t.value=0,t.end=this.stream.clipPos(r+1)}putAction(t,e,n,r){for(let e=0;e<r;e+=3)if(this.actions[e]==t)return r;return this.actions[r++]=t,this.actions[r++]=e,this.actions[r++]=n,r}addActions(t,e,n,r){let{state:i}=t,{parser:o}=t.p,{data:s}=o;for(let t=0;t<2;t++)for(let a=o.stateSlot(i,t?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==r&&2==s[a+1]&&(r=this.putAction(vS(s,a+2),e,n,r));break}a=vS(s,a+2)}s[a]==e&&(r=this.putAction(vS(s,a+1),e,n,r))}return r}}!function(t){t[t.Distance=5]="Distance",t[t.MaxRemainingPerStep=3]="MaxRemainingPerStep",t[t.MinBufferLengthPrune=500]="MinBufferLengthPrune",t[t.ForceReduceLimit=10]="ForceReduceLimit",t[t.CutDepth=15e3]="CutDepth",t[t.CutTo=9e3]="CutTo"}(cS||(cS={}));class dS{constructor(t,e,n,r){this.parser=t,this.input=e,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new nS(e,r),this.tokens=new fS(t,this.stream),this.topTerm=t.top[1];let{from:i}=r[0];this.stacks=[Fx.start(this,t.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*t.bufferLength?new hS(n,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t,e,n=this.stacks,r=this.minStackPos,i=this.stacks=[];for(let o=0;o<n.length;o++){let s=n[o];for(;;){if(this.tokens.mainToken=null,s.pos>r)i.push(s);else{if(this.advanceStack(s,i,n))continue;{t||(t=[],e=[]),t.push(s);let n=this.tokens.getMainToken(s);e.push(n.value,n.end)}}break}}if(!i.length){let e=t&&function(t){let e=null;for(let n of t){let t=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=t&&n.pos>t)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}(t);if(e)return this.stackToTree(e);if(this.parser.strict)throw sS&&t&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&t){let n=null!=this.stoppedAt&&t[0].pos>this.stoppedAt?t[0]:this.runRecovery(t,e,i);if(n)return this.stackToTree(n.forceAll())}if(this.recovering){let t=1==this.recovering?1:3*this.recovering;if(i.length>t)for(i.sort(((t,e)=>e.score-t.score));i.length>t;)i.pop();i.some((t=>t.reducePos>r))&&this.recovering--}else if(i.length>1)t:for(let t=0;t<i.length-1;t++){let e=i[t];for(let n=t+1;n<i.length;n++){let r=i[n];if(e.sameState(r)||e.buffer.length>500&&r.buffer.length>500){if(!((e.score-r.score||e.buffer.length-r.buffer.length)>0)){i.splice(t--,1);continue t}i.splice(n--,1)}}}this.minStackPos=i[0].pos;for(let t=1;t<i.length;t++)i[t].pos<this.minStackPos&&(this.minStackPos=i[t].pos);return null}stopAt(t){if(null!=this.stoppedAt&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,n){let r=t.pos,{parser:i}=this,o=sS?this.stackID(t)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let e=t.curContext&&t.curContext.tracker.strict,n=e?t.curContext.hash:0;for(let s=this.fragments.nodeAt(r);s;){let r=this.parser.nodeSet.types[s.type.id]==s.type?i.getGoto(t.state,s.type.id):-1;if(r>-1&&s.length&&(!e||(s.prop(um.contextHash)||0)==n))return t.useNode(s,r),sS&&console.log(o+this.stackID(t)+` (via reuse of ${i.getName(s.type.id)})`),!0;if(!(s instanceof Om)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof Om&&0==s.positions[0]))break;s=a}}let s=i.stateSlot(t.state,4);if(s>0)return t.reduce(s),sS&&console.log(o+this.stackID(t)+` (via always-reduce ${i.getName(65535&s)})`),!0;if(t.stack.length>=15e3)for(;t.stack.length>9e3&&t.forceReduce(););let a=this.tokens.getActions(t);for(let s=0;s<a.length;){let l=a[s++],c=a[s++],u=a[s++],h=s==a.length||!n,f=h?t:t.split();if(f.apply(l,c,u),sS&&console.log(o+this.stackID(f)+` (via ${0==(65536&l)?"shift":`reduce of ${i.getName(65535&l)}`} for ${i.getName(c)} @ ${r}${f==t?"":", split"})`),h)return!0;f.pos>r?e.push(f):n.push(f)}return!1}advanceFully(t,e){let n=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>n)return pS(t,e),!0}}runRecovery(t,e,n){let r=null,i=!1;for(let o=0;o<t.length;o++){let s=t[o],a=e[o<<1],l=e[1+(o<<1)],c=sS?this.stackID(s)+" -> ":"";if(s.deadEnd){if(i)continue;if(i=!0,s.restart(),sS&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))continue}let u=s.split(),h=c;for(let t=0;u.forceReduce()&&t<10&&(sS&&console.log(h+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,n));t++)sS&&(h=this.stackID(u)+" -> ");for(let t of s.recoverByInsert(a))sS&&console.log(c+this.stackID(t)+" (via recover-insert)"),this.advanceFully(t,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),sS&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),pS(s,n)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(t){return t.close(),Om.build({buffer:Kx.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(aS||(aS=new WeakMap)).get(t);return e||aS.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function pS(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t))return void(e[n].score<t.score&&(e[n]=t))}e.push(t)}class gS{constructor(t,e,n){this.source=t,this.flags=e,this.disabled=n}allows(t){return!this.disabled||0==this.disabled[t]}}const mS=t=>t;class OS extends Dm{constructor(t){if(super(),this.wrappers=[],14!=t.version)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let n=0;n<t.repeatNodeCount;n++)e.push("");let n=Object.keys(t.topRules).map((e=>t.topRules[e][1])),r=[];for(let t=0;t<e.length;t++)r.push([]);function i(t,e,n){r[t].push([e,e.deserialize(String(n))])}if(t.nodeProps)for(let e of t.nodeProps){let t=e[0];"string"==typeof t&&(t=um[t]);for(let n=1;n<e.length;){let r=e[n++];if(r>=0)i(r,t,e[n++]);else{let o=e[n+-r];for(let s=-r;s>0;s--)i(e[n++],t,o);n++}}}this.nodeSet=new dm(e.map(((e,i)=>fm.define({name:i>=this.minRepeatTerm?void 0:e,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:t.skippedNodes&&t.skippedNodes.indexOf(i)>-1})))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=am;let o=oS(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let t=0;t<this.specializerSpecs.length;t++)this.specialized[t]=this.specializerSpecs[t].term;this.specializers=this.specializerSpecs.map(yS),this.states=oS(t.states,Uint32Array),this.data=oS(t.stateData),this.goto=oS(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map((t=>"number"==typeof t?new rS(o,t):t)),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,n){let r=new dS(this,t,e,n);for(let i of this.wrappers)r=i(r,t,e,n);return r}getGoto(t,e,n=!1){let r=this.goto;if(e>=r[0])return-1;for(let i=r[e+1];;){let e=r[i++],o=1&e,s=r[i++];if(o&&n)return s;for(let n=i+(e>>1);i<n;i++)if(r[i]==t)return s;if(o)return-1}}hasAction(t,e){let n=this.data;for(let r=0;r<2;r++)for(let i,o=this.stateSlot(t,r?2:1);;o+=3){if(65535==(i=n[o])){if(1!=n[o+1]){if(2==n[o+1])return vS(n,o+2);break}i=n[o=vS(n,o+2)]}if(i==e||0==i)return vS(n,o+1)}return 0}stateSlot(t,e){return this.states[6*t+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){if(e==this.stateSlot(t,4))return!0;for(let n=this.stateSlot(t,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=vS(this.data,n+2)}if(e==vS(this.data,n+1))return!0}}nextStates(t){let e=[];for(let n=this.stateSlot(t,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=vS(this.data,n+2)}if(0==(1&this.data[n+2])){let t=this.data[n+1];e.some(((e,n)=>1&n&&e==t))||e.push(this.data[n],t)}}return e}overrides(t,e){let n=bS(this.data,this.tokenPrecTable,e);return n<0||bS(this.data,this.tokenPrecTable,t)<n}configure(t){let e=Object.assign(Object.create(OS.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let n=this.topRules[t.top];if(!n)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=n}return t.tokenizers&&(e.tokenizers=this.tokenizers.map((e=>{let n=t.tokenizers.find((t=>t.from==e));return n?n.to:e}))),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map(((n,r)=>{let i=t.specializers.find((t=>t.from==n.external));if(!i)return n;let o=Object.assign(Object.assign({},n),{external:i.to});return e.specializers[r]=yS(o),o}))),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),null!=t.strict&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),null!=t.bufferLength&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return null==e?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),n=e.map((()=>!1));if(t)for(let r of t.split(" ")){let t=e.indexOf(r);t>=0&&(n[t]=!0)}let r=null;for(let t=0;t<e.length;t++)if(!n[t])for(let n,i=this.dialects[e[t]];65535!=(n=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[n]=1;return new gS(t,n,r)}static deserialize(t){return new OS(t)}}function vS(t,e){return t[e]|t[e+1]<<16}function bS(t,e,n){for(let r,i=e;65535!=(r=t[i]);i++)if(r==n)return i-e;return-1}function yS(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const wS=295,xS=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],SS=new class{constructor(t){this.start=t.start,this.shift=t.shift||mS,this.reduce=t.reduce||mS,this.reuse=t.reuse||mS,this.hash=t.hash||(()=>0),this.strict=!1!==t.strict}}({start:!1,shift:(t,e)=>5==e||6==e||299==e?t:300==e,strict:!1}),kS=new iS(((t,e)=>{let{next:n}=t;(125==n||-1==n||e.context)&&e.canShift(297)&&t.acceptToken(297)}),{contextual:!0,fallback:!0}),CS=new iS(((t,e)=>{let n,{next:r}=t;xS.indexOf(r)>-1||(47!=r||47!=(n=t.peek(1))&&42!=n)&&125!=r&&59!=r&&-1!=r&&!e.context&&e.canShift(294)&&t.acceptToken(294)}),{contextual:!0}),QS=new iS(((t,e)=>{let{next:n}=t;if((43==n||45==n)&&(t.advance(),n==t.next)){t.advance();let n=!e.context&&e.canShift(2);t.acceptToken(n?2:3)}}),{contextual:!0}),_S=new iS((t=>{for(let e=!1,n=0;;n++){let{next:r}=t;if(r<0){n&&t.acceptToken(wS);break}if(96==r){n?t.acceptToken(wS):t.acceptToken(296,1);break}if(123==r&&e){1==n?t.acceptToken(4,1):t.acceptToken(wS,-1);break}if(10==r&&n){t.advance(),t.acceptToken(wS);break}92==r&&t.advance(),e=36==r,t.advance()}})),PS=new iS(((t,e)=>{if(101==t.next&&e.dialectEnabled(1)){t.advance();for(let e=0;e<6;e++){if(t.next!="xtends".charCodeAt(e))return;t.advance()}t.next>=57&&t.next<=65||t.next>=48&&t.next<=90||95==t.next||t.next>=97&&t.next<=122||t.next>160||t.acceptToken(1)}})),ES=Zm({"get set async static":lO.modifier,"for while do if else switch try catch finally return throw break continue default case":lO.controlKeyword,"in of await yield void typeof delete instanceof":lO.operatorKeyword,"let var const function class extends":lO.definitionKeyword,"import export from":lO.moduleKeyword,"with debugger as new":lO.keyword,TemplateString:lO.special(lO.string),super:lO.atom,BooleanLiteral:lO.bool,this:lO.self,null:lO.null,Star:lO.modifier,VariableName:lO.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":lO.function(lO.variableName),VariableDefinition:lO.definition(lO.variableName),Label:lO.labelName,PropertyName:lO.propertyName,PrivatePropertyName:lO.special(lO.propertyName),"CallExpression/MemberExpression/PropertyName":lO.function(lO.propertyName),"FunctionDeclaration/VariableDefinition":lO.function(lO.definition(lO.variableName)),"ClassDeclaration/VariableDefinition":lO.definition(lO.className),PropertyDefinition:lO.definition(lO.propertyName),PrivatePropertyDefinition:lO.definition(lO.special(lO.propertyName)),UpdateOp:lO.updateOperator,LineComment:lO.lineComment,BlockComment:lO.blockComment,Number:lO.number,String:lO.string,ArithOp:lO.arithmeticOperator,LogicOp:lO.logicOperator,BitOp:lO.bitwiseOperator,CompareOp:lO.compareOperator,RegExp:lO.regexp,Equals:lO.definitionOperator,Arrow:lO.function(lO.punctuation),": Spread":lO.punctuation,"( )":lO.paren,"[ ]":lO.squareBracket,"{ }":lO.brace,"InterpolationStart InterpolationEnd":lO.special(lO.brace),".":lO.derefOperator,", ;":lO.separator,"@":lO.meta,TypeName:lO.typeName,TypeDefinition:lO.definition(lO.typeName),"type enum interface implements namespace module declare":lO.definitionKeyword,"abstract global Privacy readonly override":lO.modifier,"is keyof unique infer":lO.operatorKeyword,JSXAttributeValue:lO.attributeValue,JSXText:lO.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":lO.angleBracket,"JSXIdentifier JSXNameSpacedName":lO.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":lO.attributeName,"JSXBuiltin/JSXIdentifier":lO.standard(lO.tagName)}),TS={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:50,true:58,false:58,null:68,void:72,typeof:76,super:92,new:126,await:143,yield:145,delete:146,class:156,extends:158,public:213,private:213,protected:213,readonly:215,instanceof:234,satisfies:237,in:238,const:240,import:272,keyof:327,unique:331,infer:337,is:373,abstract:393,implements:395,type:397,let:400,var:402,interface:409,enum:413,namespace:419,module:421,declare:425,global:429,for:450,of:459,while:462,with:466,do:470,if:474,else:476,switch:480,case:486,try:492,catch:496,finally:500,return:504,throw:508,break:512,continue:516,debugger:520},$S={__proto__:null,async:113,get:115,set:117,public:175,private:175,protected:175,static:177,abstract:179,override:181,readonly:187,accessor:189,new:377},RS={__proto__:null,"<":133},MS=OS.deserialize({version:14,states:"$CWO`QdOOO$}QdOOO)WQ(C|O'#ChO)_OWO'#DYO+jQdO'#D_O+zQdO'#DjO$}QdO'#DtO.OQdO'#DzOOQ(C['#ET'#ETO.fQ`O'#EQOOQO'#IW'#IWO.nQ`O'#GgOOQO'#Ee'#EeO.yQ`O'#EdO/OQ`O'#EdO1QQ(C|O'#JQO3nQ(C|O'#JRO4_Q`O'#FSO4dQ!bO'#FkOOQ(C['#F['#F[O4oO#tO'#F[O4}Q&jO'#FrO6bQ`O'#FqOOQ(C['#JR'#JROOQ(CW'#JQ'#JQOOQS'#Jk'#JkO6gQ`O'#H{O6lQ(ChO'#H|OOQS'#Iu'#IuOOQS'#IO'#IOQ`QdOOO$}QdO'#DlO6tQ`O'#GgO6yQ&jO'#CmO7XQ`O'#EcO7dQ`O'#EnO7iQ&jO'#FZO8TQ`O'#GgO8YQ`O'#GkO8eQ`O'#GkO8sQ`O'#GnO8sQ`O'#GoO8sQ`O'#GqO6tQ`O'#GtO9dQ`O'#GwO:uQ`O'#CdO;VQ`O'#HUO;_Q`O'#H[O;_Q`O'#H^O`QdO'#H`O;_Q`O'#HbO;_Q`O'#HeO;dQ`O'#HkO;iQ(CjO'#HqO$}QdO'#HsO;tQ(CjO'#HuO<PQ(CjO'#HwO6lQ(ChO'#HyO<[Q(C|O'#ChO<xQ,UO'#DdQOQ`OOO=mQaO'#D{O6yQ&jO'#EcO={Q`O'#EcO>WQpO'#FZO$}QdO'#DZOOOW'#IQ'#IQO>`OWO,59tOOQ(C[,59t,59tO>kQdO'#IRO?OQ`O'#JSOAQQtO'#JSO)jQdO'#JSOAXQ`O,59yOAoQ`O'#EeOA|Q`O'#J`OBXQ`O'#J_OBXQ`O'#J_OBaQ`O,5;ROBfQ`O'#J^OOQ(C[,5:U,5:UOBmQdO,5:UODnQ(C|O,5:`OE_Q`O,5:fOEdQ`O'#J[OF^Q(ChO'#J]O8YQ`O'#J[OFeQ`O'#J[OFmQ`O,5;QOFrQ`O'#J[OOQ(C]'#Ch'#ChO$}QdO'#DzOGfQpO,5:lOOQO'#JX'#JXOOQO-E<U-E<UO6tQ`O,5=ROG|Q`O,5=ROHRQdO,5;OOJRQ&jO'#E`OKcQ`O,5;OOLxQ&jO'#DnOMPQdO'#DsOMZQ,UO,5;XOMcQ,UO,5;XO$}QdO,5;XOOQS'#Ez'#EzOOQS'#E|'#E|O$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YOOQS'#FQ'#FQOMqQdO,5;kOOQ(C[,5;p,5;pOOQ(C[,5;q,5;qO! qQ`O,5;qOOQ(C[,5;r,5;rO$}QdO'#I^O! yQ(ChO,5<_OJRQ&jO,5;YO!!hQ&jO,5;YO$}QdO,5;nO!!oQ!bO'#FaO!#lQ!bO'#JdO!#WQ!bO'#JdO!#sQ!bO'#JdOOQO'#Jd'#JdO!$XQ!bO,5;yOOOO,5<V,5<VO!$jQdO'#FmOOOO'#I]'#I]O4oO#tO,5;vO!$qQ!bO'#FoOOQ(C[,5;v,5;vO!%bQ7]O'#CsOOQ(C]'#Cv'#CvO!%uQ`O'#CvO!%zOWO'#CzO!&hQ&kO,5<[O!&oQ`O,5<^O!(RQMhO'#F|O!(`Q`O'#F}O!(eQ`O'#F}O!(jQMhO'#GRO!)iQ,UO'#GVO!*_Q7]O'#I}OOQ(C]'#I}'#I}O!+eQaO'#I|O!+sQ`O'#I{O!+{Q`O'#CrOOQ(C]'#Ct'#CtOOQ(C]'#C}'#C}OOQ(C]'#DP'#DPO.iQ`O'#DROKhQ&jO'#FtOKhQ&jO'#FvO!,TQ`O'#FxO!,YQ`O'#FyO!(eQ`O'#GPOKhQ&jO'#GUO!,_Q`O'#EfO!,yQ`O,5<]O`QdO,5>gOOQS'#Ix'#IxOOQS,5>h,5>hOOQS-E;|-E;|O!.xQ(C|O,5:WOOQ(CX'#Cp'#CpO!/lQ&kO,5=ROOQO'#Cf'#CfO!/}Q(ChO'#IyO6bQ`O'#IyO;dQ`O,59XO!0`Q!bO,59XO!0hQ&jO,59XO6yQ&jO,59XO!0sQ`O,5;OO!0{Q`O'#HTO!1ZQ`O'#JoO$}QdO,5;sO!1cQ,UO,5;uO!1hQ`O,5=nO!1mQ`O,5=nO!1rQ`O,5=nO6lQ(ChO,5=nO!2QQ`O'#EgO!2wQ,UO'#EhOOQ(CW'#J^'#J^O!3OQ(ChO'#JlO6lQ(ChO,5=VO8sQ`O,5=]OOQP'#Cs'#CsO!3ZQ!bO,5=YO!3cQ!cO,5=ZO!3nQ`O,5=]O!3sQpO,5=`O;dQ`O'#GyO6tQ`O'#G{O!3{Q`O'#G{O6yQ&jO'#HOO!4QQ`O'#HOOOQS,5=c,5=cO!4VQ`O'#HPO!4_Q`O'#CmO!4dQ`O,59OO!4nQ`O,59OO!6sQdO,59OOOQS,59O,59OO!7QQ(ChO,59OO$}QdO,59OO!7]QdO'#HWOOQS'#HX'#HXOOQS'#HY'#HYO`QdO,5=pO!7mQ`O,5=pO`QdO,5=vO`QdO,5=xO!7rQ`O,5=zO`QdO,5=|O!7wQ`O,5>PO!7|QdO,5>VOOQS,5>],5>]O$}QdO,5>]O6lQ(ChO,5>_OOQS,5>a,5>aO!<QQ`O,5>aOOQS,5>c,5>cO!<QQ`O,5>cOOQS,5>e,5>eO!<VQ!bO'#DWOOQ(CW'#JU'#JUO$}QdO'#JUO!<tQ!bO'#JUO!=cQ!bO'#DeO!=tQ,UO'#DeO!@PQdO'#DeO!@WQ`O'#JTO!@`Q`O,5:OO!@eQ`O'#EiO!@sQ`O'#JaO!@{Q`O,5;SO!AcQ,UO'#DeO!AmQ,UO'#EOOOQ(C[,5:g,5:gO$}QdO,5:gOJRQ&jO,5:gO!BjQaO,5:gO;dQ`O,5:}O!0`Q!bO,5:}O!0hQ&jO,5:}O6yQ&jO,5:}O!BuQpO,59uOOOW-E<O-E<OOOQ(C[1G/`1G/`O!BzQtO,5>mO)jQdO,5>mOOQO,5>s,5>sO!CUQdO'#IROOQO-E<P-E<PO!CcQ`O,5?nO!CkQtO,5?nO!CrQ`O,5?yOOQ(C[1G/e1G/eO$}QdO,5?zO!CzQ`O'#IXOOQO-E<V-E<VO!CrQ`O,5?yOOQ(CW1G0m1G0mOOQ(C[1G/p1G/pOOQ(C[1G0Q1G0QO!D`Q`O,5?vO8YQ`O,5?vO!DhQ`O,5?vOOQ(CW'#E_'#E_O$}QdO,5?wO!DvQ(ChO,5?wO!EXQ(ChO,5?wO!E`Q`O'#IZO!D`Q`O,5?vOOQ(CW1G0l1G0lOMZQ,UO,5:nOMfQ,UO,5:nOOQO,5:p,5:pO!E}Q`O,5:pO!FVQ&kO1G2mO6tQ`O1G2mOOQ(C[1G0j1G0jO!FhQ(C|O1G0jO!GmQ(CyO,5:zOOQ(C]'#F{'#F{O!JWQ(C}O'#I}OHRQdO1G0jO!J}Q&kO'#JVO!KXQ`O,5:YO!K^QtO'#JWO$}QdO'#JWO!KhQ`O,5:_OOQ(C]'#DW'#DWOOQ(C[1G0s1G0sO$}QdO1G0sOOQ(C[1G1]1G1]O!KmQ`O1G0sO!NUQ(C|O1G0tO!N]Q(C|O1G0tO#!vQ(C|O1G0tO#!}Q(C|O1G0tO#%XQ(C|O1G0tO#%oQ(C|O1G0tO#(iQ(C|O1G0tO#(pQ(C|O1G0tO#+ZQ(C|O1G0tO#+bQ(C|O1G0tO#-YQ(C|O1G0tO#0YQ!LUO'#ChO#2WQ!LUO1G1VO#4UQ!LUO'#JRO! tQ`O1G1]O#4iQ(C|O,5>xOOQ(CW-E<[-E<[O#5]Q(C}O1G0tOOQ(C[1G0t1G0tO#7hQ(C|O1G1YO#8[Q!bO,5;}O#8dQ!bO,5<OO#8lQ!bO'#FfO#9TQ`O'#FeOOQO'#Je'#JeOOQO'#I['#I[O#9YQ!bO1G1eOOQ(C[1G1e1G1eOOOO1G1p1G1pO#9kQ!LUO'#JQO#9uQ`O,5<XOMqQdO,5<XOOOO-E<Z-E<ZOOQ(C[1G1b1G1bOOQ(C[,5<Z,5<ZO#9zQ!bO,5<ZOOQ(C],59b,59bOJRQ&jO'#C|OOOW'#IP'#IPO#:POWO,59fOOQ(C],59f,59fO$}QdO1G1vO!,YQ`O'#I`O#:[Q`O,5<oOOQ(C],5<l,5<lOOQO'#Gb'#GbOKhQ&jO,5<{OOQO'#Gd'#GdOKhQ&jO,5<}OJRQ&jO,5=POOQO1G1x1G1xO#:gQqO'#CpO#:zQqO,5<hO#;RQ`O'#JhO6tQ`O'#JhO#;aQ`O,5<jOKhQ&jO,5<iO#;fQ`O'#GOO#;qQ`O,5<iO#;vQqO'#F{O#<TQqO'#JiO#<_Q`O'#JiOJRQ&jO'#JiO#<dQ`O,5<mOOQ(CW'#Di'#DiO#<iQ!bO'#GWO!)dQ,UO'#GWO#<zQ`O'#GYO#=PQ`O'#G[O!(eQ`O'#G_O#=UQ(ChO'#IbO#=aQ,UO,5<qOOQ(C],5<q,5<qO#=hQ,UO'#GWO#=vQ,UO'#GXO#>OQ,UO'#GXOOQ(C],5=Q,5=QOKhQ&jO,5?hOKhQ&jO,5?hO#>TQ`O'#IcO#>`Q`O,5?gO#>hQ`O,59^O#?XQ&kO,59mOOQ(C],59m,59mO#?zQ&kO,5<`O#@mQ&kO,5<bO#@wQ`O,5<dOOQ(C],5<e,5<eO#@|Q`O,5<kO#ARQ&kO,5<pOHRQdO1G1wO#AcQ`O1G1wOOQS1G4R1G4ROOQ(C[1G/r1G/rO! qQ`O1G/rOOQS1G2m1G2mOJRQ&jO1G2mO$}QdO1G2mOJRQ&jO1G2mO#AhQaO1G2mO#CQQ&jO'#E`OOQ(CW,5?e,5?eO#C[Q(ChO,5?eOOQS1G.s1G.sO;dQ`O1G.sO!0`Q!bO1G.sO!0hQ&jO1G.sO#CmQ`O1G0jO#CrQ`O'#ChO#C}Q`O'#JpO#DVQ`O,5=oO#D[Q`O'#JpO#DaQ`O'#JpO#DiQ`O'#IkO#DwQ`O,5@ZO#EPQtO1G1_OOQ(C[1G1a1G1aO6tQ`O1G3YO#EWQ`O1G3YO#E]Q`O1G3YO#EbQ`O1G3YOOQS1G3Y1G3YO8YQ`O'#J_O8YQ`O'#EiO$}QdO'#EiO8YQ`O'#IeO#EgQ(ChO,5@WOOQS1G2q1G2qO!3nQ`O1G2wOJRQ&jO1G2tO#ErQ`O1G2tOOQS1G2u1G2uOJRQ&jO1G2uO#EwQaO1G2uO#FPQ,UO'#GsOOQS1G2w1G2wO!)dQ,UO'#IgO!3sQpO1G2zOOQS1G2z1G2zOOQS,5=e,5=eO#FXQ&kO,5=gO6tQ`O,5=gO#=PQ`O,5=jO6bQ`O,5=jO!0`Q!bO,5=jO!0hQ&jO,5=jO6yQ&jO,5=jO#FjQ`O'#JnO#FuQ`O,5=kOOQS1G.j1G.jO#FzQ(ChO1G.jO#GVQ`O1G.jO#G[Q`O1G.jO6lQ(ChO1G.jO#GdQtO,5@]O#GnQ`O,5@]O#GyQdO,5=rO#HQQ`O,5=rO8YQ`O,5@]OOQS1G3[1G3[O`QdO1G3[OOQS1G3b1G3bOOQS1G3d1G3dO;_Q`O1G3fO#HVQdO1G3hO#LTQdO'#HgOOQS1G3k1G3kO#LbQ`O'#HmO;dQ`O'#HoOOQS1G3q1G3qO#LjQdO1G3qO6lQ(ChO1G3wOOQS1G3y1G3yOOQ(CW'#GS'#GSO6lQ(ChO1G3{O6lQ(ChO1G3}O$!kQ`O,5?pOMqQdO,5;TO8YQ`O,5;TO;dQ`O,5:POMqQdO,5:PO$}QdO'#JUO!0`Q!bO,5:PO$!pQ!LUO,5:POOQO,5;T,5;TO$!zQ,UO'#ISO$#bQ`O,5?oOOQ(C[1G/j1G/jO$#jQ,UO'#IYO$#tQ`O,5?{OOQ(CW1G0n1G0nO!=tQ,UO,5:PO$#|Q,UO'#E[OOQ(CW'#EZ'#EZO$$sQ(DjO'#E[O$%_Q,UO'#EPOOQO'#IV'#IVO$%pQ,UO,5:jOOQ(C[,5:j,5:jO$&mQ,UO'#EPO$&zQ,UO'#EPO$'[Q,UO'#EbO$'_Q,UO'#E[O$'xQ,UO'#E[O$%_Q,UO'#E[O$(iQ`O1G0RO$(nQqO1G0ROOQ(C[1G0R1G0RO$}QdO1G0ROJRQ&jO1G0ROOQ(C[1G0i1G0iO;dQ`O1G0iO!0`Q!bO1G0iO!0hQ&jO1G0iOOOW1G/a1G/aO$(uQpO,5<_O$(}QtO1G4XOOQO1G4_1G4_O$}QdO,5>mO$)XQ`O1G5YO$)aQ`O1G5eO$)iQtO1G5fO8YQ`O,5>sO$)sQ`O1G5bO$)sQ`O1G5bO8YQ`O1G5bO$){Q(C|O1G5cO$}QdO1G5cO$*]Q(ChO1G5cO$*nQ`O,5>uO8YQ`O,5>uOOQO,5>u,5>uO$+SQ`O,5>uOOQO-E<X-E<XOOQO1G0Y1G0YOOQO1G0[1G0[O! tQ`O1G0[OOQS7+(X7+(XOJRQ&jO7+(XO$}QdO7+(XOJRQ&jO7+(XO$+bQaO7+(XO$+pQ&kO7+(XO$,RQ(C}O,59mO$.ZQ(C}O,5<`O$0fQ(C}O,5<bO$2qQ(C}O,5<pOOQ(C[7+&U7+&UO$5SQ(C|O7+&UO$5vQ&jO'#ITO$6QQ`O,5?qOOQ(C]1G/t1G/tO$6YQdO'#IUO$6gQ`O,5?rO$6oQtO,5?rOOQ(C[1G/y1G/yO$6yQ`O7+&_OOQ(C[7+&_7+&_O$7OQ!LUO,5:`O$}QdO7+&qO$7YQ!LUO,5:WOOQ(C[7+&w7+&wOOQO1G1i1G1iOOQO1G1j1G1jO$7gQ$ISO,5<QOMqQdO,5<POOQO-E<Y-E<YOOQ(C[7+'P7+'POOOO7+'[7+'[OOOO1G1s1G1sO$7rQ`O1G1sOOQ(C[1G1u1G1uO$7wQqO,59hOOOW-E;}-E;}OOQ(C]1G/Q1G/QO$8OQ(C|O7+'bOOQ(C],5>z,5>zO$8rQ`O,5>zOOQ(C]1G2Z1G2ZP$8wQ`O'#I`POQ(C]-E<^-E<^O$9hQ&kO1G2gO$:ZQ&kO1G2iO$:eQqO1G2kOOQ(C]1G2S1G2SO$:lQ`O'#I_O$:zQ`O,5@SO$:zQ`O,5@SO$;SQ`O,5@SO$;_Q`O,5@SOOQO1G2U1G2UO$;mQ&kO1G2TOKhQ&jO1G2TO$;}QMhO'#IaO$<_Q`O,5@TOJRQ&jO,5@TO$<gQqO,5@TOOQ(C]1G2X1G2XOOQ(CW,5<r,5<rOOQ(CW,5<s,5<sO$<qQ`O,5<sO#<uQ`O,5<sO!0`Q!bO,5<rOOQO'#GZ'#GZO$<vQ`O,5<tOOQ(CW,5<v,5<vO$<qQ`O,5<yOOQO,5>|,5>|OOQO-E<`-E<`OOQ(C]1G2]1G2]O!)dQ,UO,5<rO$=OQ`O,5<sO#<zQ`O,5<tO!)dQ,UO,5<sO$=ZQ&kO1G5SO$=eQ&kO1G5SOOQO,5>},5>}OOQO-E<a-E<aOOQP1G.x1G.xO!1cQ,UO,59oO$}QdO,59oO$=rQ`O1G2OOKhQ&jO1G2VO$=wQ(C|O7+'cOOQ(C[7+'c7+'cOHRQdO7+'cOOQ(C[7+%^7+%^O$>kQqO'#JjO$(iQ`O7+(XO$>uQ`O7+(XO$>}QqO7+(XO$?XQ(CyO'#ChO$?lQ(CyO,5<wO$@^Q`O,5<wOOQ(CW1G5P1G5POOQS7+$_7+$_O;dQ`O7+$_O!0`Q!bO7+$_OHRQdO7+&UO$@cQ`O'#IjO$@tQ`O,5@[OOQO1G3Z1G3ZO6tQ`O,5@[O$@tQ`O,5@[O$@|Q`O,5@[OOQO,5?V,5?VOOQO-E<i-E<iOOQ(C[7+&y7+&yO$ARQ`O7+(tO6lQ(ChO7+(tO6tQ`O7+(tO$AWQ`O7+(tO$A]Q`O,5;TOOQ(CW,5?P,5?POOQ(CW-E<c-E<cOOQS7+(c7+(cO$AbQ(CyO7+(`OJRQ&jO7+(`O$AlQqO7+(aOOQS7+(a7+(aOJRQ&jO7+(aO$AsQ`O'#JmO$BOQ`O,5=_OOQO,5?R,5?ROOQO-E<e-E<eOOQS7+(f7+(fO$CUQ,UO'#G|OOQS1G3R1G3ROJRQ&jO1G3RO$}QdO1G3ROJRQ&jO1G3RO$C]QaO1G3RO$CkQ&kO1G3RO6lQ(ChO1G3UO#=PQ`O1G3UO6bQ`O1G3UO!0`Q!bO1G3UO!0hQ&jO1G3UO$C|Q`O'#IiO$DXQ`O,5@YO$DaQ,UO,5@YOOQ(CW1G3V1G3VOOQS7+$U7+$UO$DiQ`O7+$UO6lQ(ChO7+$UO$DnQ`O7+$UO$}QdO1G5wO$}QdO1G5xO$DsQdO1G3^O$DzQ`O1G3^O$EPQdO1G3^O$EWQ(ChO1G5wOOQS7+(v7+(vO6lQ(ChO7+)QO`QdO7+)SOOQS'#Js'#JsOOQS'#Il'#IlO$EbQdO,5>ROOQS,5>R,5>RO$}QdO'#HhO$EoQ`O'#HjOOQS,5>X,5>XO8YQ`O,5>XOOQS,5>Z,5>ZOOQS7+)]7+)]OOQS7+)c7+)cOOQS7+)g7+)gOOQS7+)i7+)iO$EtQ!bO1G5[O$FYQ!LUO1G0oO$FdQ`O1G0oOOQO1G/k1G/kO$FoQ!LUO1G/kO$FyQ`O,5?pO;dQ`O1G/kOMqQdO'#DeOOQO,5>n,5>nOOQO-E<Q-E<QOOQO,5>t,5>tOOQO-E<W-E<WO!0`Q!bO1G/kO$GOQ7[O,5:lO$HOQ(DjO,5:vO$%_Q,UO,5:kO$HjQ,UO,5:kO$HwQ,UO,5:kO$IXQ,UO,5:vO$IrQ,UO,5:vO$%_Q,UO,5:vO;dQ`O,5:kOOQO,5:v,5:vO$}QdO,5:vO$JcQ(ChO,5:vO$JnQ(ChO,5:vO!0`Q!bO,5:kOOQO-E<T-E<TOOQ(C[1G0U1G0UOOQO,5:|,5:|O$J|Q(ChO,5:vOOQ(C[7+%m7+%mO$(iQ`O7+%mO$(nQqO7+%mOOQ(C[7+&T7+&TO;dQ`O7+&TO!0`Q!bO7+&TO$KbQ`O7+*|O$KbQ`O7+*|O$KjQ(C|O7+*}O$}QdO7+*}OOQO1G4a1G4aO8YQ`O1G4aO$KzQ`O1G4aOOQO7+%v7+%vO$(iQ`O<<KsO$LYQ`O<<KsO$LbQqO<<KsOOQS<<Ks<<KsOJRQ&jO<<KsO$}QdO<<KsOJRQ&jO<<KsO$LlQaO<<KsO$LzQ(C}O1G2gO% VQ(C}O1G2iO%#bQ(C}O1G2TO%%sQ&kO,5>oOOQO-E<R-E<RO%%}QtO,5>pO$}QdO,5>pOOQO-E<S-E<SO%&XQ`O1G5^OOQ(C[<<Iy<<IyO%&aQ!LUO1G0jO%(kQ!LUO1G0tO%(rQ!LUO1G0tO%*vQ!LUO1G0tO%*}Q!LUO1G0tO%,rQ!LUO1G0tO%-YQ!LUO1G0tO%/mQ!LUO1G0tO%/tQ!LUO1G0tO%1xQ!LUO1G0tO%2PQ!LUO1G0tO%3wQ!LUO1G0tO%4[Q(C|O<<J]O%5aQ!LVO1G0tO%7VQ!LVO'#I}O%7aQ!LUO1G1YOMqQdO'#FhOOQO'#Jf'#JfOOQO1G1l1G1lO%7nQ`O1G1kO%7sQ!LUO,5>xOOOO7+'_7+'_OOOW1G/S1G/SOOQ(C]1G4f1G4fOKhQ&jO7+(VO%7}Q`O,5>yO6tQ`O,5>yOOQO-E<]-E<]O%8]Q`O1G5nO%8]Q`O1G5nO%8eQ`O1G5nO%8pQ&kO7+'oO%9QQqO,5>{O%9[Q`O,5>{OJRQ&jO,5>{OOQO-E<_-E<_O%9aQqO1G5oO%9kQ`O1G5oOOQ(CW1G2_1G2_O$<qQ`O1G2_OOQ(CW1G2^1G2^O%9sQ`O1G2`OJRQ&jO1G2`OOQ(CW1G2e1G2eO!0`Q!bO1G2^O#<uQ`O1G2_O%9xQ`O1G2`O%:QQ`O1G2_OKhQ&jO7+*nOOQ(C]1G/Z1G/ZO%:]Q`O1G/ZOOQ(C]7+'j7+'jO%:bQ&kO7+'qO%:rQ(C|O<<J}OOQ(C[<<J}<<J}OJRQ&jO'#IdO%;fQ`O,5@UOJRQ&jO1G2cOOQS<<Gy<<GyO;dQ`O<<GyO%;nQ(C|O<<IpOOQ(C[<<Ip<<IpOOQO,5?U,5?UO%<bQ`O,5?UO%<gQ`O,5?UOOQO-E<h-E<hO%<oQ`O1G5vO%<oQ`O1G5vO6tQ`O1G5vO%<wQ`O<<L`OOQS<<L`<<L`O%<|Q`O<<L`O6lQ(ChO<<L`O%=RQ`O1G0oOOQS<<Kz<<KzO$AbQ(CyO<<KzOOQS<<K{<<K{O$AlQqO<<K{O%=WQ,UO'#IfO%=cQ`O,5@XOMqQdO,5@XOOQS1G2y1G2yO%=kQ(DjO'#JUO%>VQdO'#JUO%>^Q,UO'#E[O%>tQ(ChO'#E[O$$sQ(DjO'#E[O$%hQ,UO'#G}OOQO'#Ih'#IhO%?YQ,UO,5=hOOQS,5=h,5=hO%?aQ,UO'#E[O%?rQ,UO'#E[O%@YQ,UO'#E[O%@vQ,UO'#G}O%AXQ`O7+(mO%A^Q`O7+(mO%AfQqO7+(mOOQS7+(m7+(mOJRQ&jO7+(mO$}QdO7+(mOJRQ&jO7+(mO%ApQaO7+(mOOQS7+(p7+(pO6lQ(ChO7+(pO#=PQ`O7+(pO6bQ`O7+(pO!0`Q!bO7+(pO%BOQ`O,5?TOOQO-E<g-E<gOOQO'#HQ'#HQO%BZQ`O1G5tO6lQ(ChO<<GpOOQS<<Gp<<GpO%BcQ`O<<GpO%BhQ`O7++cO%BmQ`O7++dOOQS7+(x7+(xO%BrQ`O7+(xO%BwQdO7+(xO%COQ`O7+(xO$}QdO7++cO$}QdO7++dOOQS<<Ll<<LlOOQS<<Ln<<LnOOQS-E<j-E<jOOQS1G3m1G3mO%CTQ`O,5>SOOQS,5>U,5>UO%CYQ`O1G3sO8YQ`O7+&ZOMqQdO7+&ZOOQ(CW1G5[1G5[OOQO7+%V7+%VO%C_Q!LUO1G5fO;dQ`O7+%VO;dQ`O1G0VOOQO1G0b1G0bO$}QdO1G0bO%CiQ(ChO1G0bO%CtQ(ChO1G0bO!0`Q!bO1G0VO$%_Q,UO1G0VO%DSQ,UO1G0VO%DaQ(DjO1G0bO%D{Q,UO1G0VO$%_Q,UO1G0bO%E]Q,UO1G0bO%EvQ(ChO1G0bOOQO1G0V1G0VO%F[Q(C|O1G0bOOQ(C[<<IX<<IXOOQ(C[<<Io<<IoO;dQ`O<<IoO%FfQ`O<<NhO%FnQ(C|O<<NiOOQO7+){7+){O8YQ`O7+){OOQSANA_ANA_OJRQ&jOANA_O$(iQ`OANA_O%GOQ`OANA_O%GWQqOANA_O$}QdOANA_OJRQ&jOANA_O%GbQ(C}O7+'oO%IsQ(C}O7+'qO%LUQtO1G4[O%L`Q!LUO7+&UO%MUQ!LVO,59mO& YQ!LVO,5<`O&#aQ!LVO,5<bO&%SQ!LVO,5<pO&&xQ!LUO7+'bO&'VQ!LUO7+'cO&'dQ`O,5<SOOQO7+'V7+'VO&'iQ&kO<<KqOOQO1G4e1G4eO&'pQ`O1G4eO&'{Q`O1G4eO&(ZQ`O7++YO&(ZQ`O7++YOJRQ&jO1G4gO&(cQqO1G4gO&(mQ`O7++ZOOQ(CW7+'y7+'yO$<qQ`O7+'zO&(uQqO7+'zOOQ(CW7+'x7+'xO$<qQ`O7+'yO&(|Q`O7+'zOJRQ&jO7+'zO#<uQ`O7+'yO&)RQ&kO<<NYOOQ(C]7+$u7+$uO&)]QqO,5?OOOQO-E<b-E<bO&)gQ(CyO7+'}OOQSAN=eAN=eO6tQ`O1G4pOOQO1G4p1G4pO&)wQ`O1G4pO&)|Q`O7++bO&)|Q`O7++bO6lQ(ChOANAzO&*UQ`OANAzOOQSANAzANAzOOQSANAfANAfOOQSANAgANAgO&*ZQ`O,5?QOOQO-E<d-E<dO&*fQ!LUO1G5sO#=PQ`O,5=iO6bQ`O,5=iO&,vQtO'#ChO&-QQ,UO,5:vO&-[Q,UO,5:vO!0`Q!bO,5=iOOQO-E<f-E<fOOQS1G3S1G3SO%>VQdO,5<tO%=kQ(DjO,5=iO$HOQ(DjO,5:vO$%hQ,UO,5=iO&-lQ,UO,5=iO&-}Q,UO,5:vOOQS<<LX<<LXOJRQ&jO<<LXO%AXQ`O<<LXO&.eQ`O<<LXO&.mQqO<<LXO$}QdO<<LXOJRQ&jO<<LXOOQS<<L[<<L[O6lQ(ChO<<L[O#=PQ`O<<L[O6bQ`O<<L[O&.wQ,UO1G4oO&/PQ`O7++`OOQSAN=[AN=[O6lQ(ChOAN=[OOQS<<N}<<N}OOQS<= O<= OOOQS<<Ld<<LdO&/XQ`O<<LdO&/^QdO<<LdO&/eQ`O<<N}O&/jQ`O<= OOOQS1G3n1G3nO;dQ`O7+)_O&/oQ`O<<IuO&/zQ!LUO<<IuOOQO<<Hq<<HqOOQO7+%q7+%qO%F[Q(C|O7+%|OOQO7+%|7+%|O$}QdO7+%|O&0UQ(ChO7+%|O;dQ`O7+%qO!0`Q!bO7+%qO$%_Q,UO7+%qO&0aQ(ChO7+%|O&0oQ,UO7+%qO&0|Q(ChO7+%|O&1bQ(DjO7+%|O&1lQ,UO7+%qO$%_Q,UO7+%|OOQ(C[AN?ZAN?ZOOQO<<Mg<<MgO$(iQ`OG26yOOQSG26yG26yOJRQ&jOG26yO&1|Q`OG26yO&2UQqOG26yO&2`Q!LUO<<J]O&2mQ!LVO1G2TO&4wQ!LVO1G2gO&7OQ!LVO1G2iO&8qQ!LUO<<J}O&9OQ!LUO<<IpOOQO1G1n1G1nOKhQ&jOANA]OOQO7+*P7+*PO&9]Q`O7+*PO&9hQ`O<<NtO&9pQqO7+*ROOQ(CW<<Kf<<KfO$<qQ`O<<KfOOQ(CW<<Ke<<KeO&9zQqO<<KfO$<qQ`O<<KeOOQO7+*[7+*[O6tQ`O7+*[O&:RQ`O<<N|OOQSG27fG27fO6lQ(ChOG27fOMqQdO1G4lO&:ZQ`O7++_O6lQ(ChO1G3TO#=PQ`O1G3TO&:cQ,UO1G0bO6bQ`O1G3TO!0`Q!bO1G3TO$%hQ,UO1G3TO%=kQ(DjO1G3TO%DaQ(DjO1G0bO&:mQ,UO1G3TO%AXQ`OANAsOOQSANAsANAsOJRQ&jOANAsO&;OQ`OANAsO&;WQqOANAsOOQSANAvANAvO6lQ(ChOANAvO#=PQ`OANAvOOQO'#HR'#HROOQO7+*Z7+*ZOOQSG22vG22vOOQSANBOANBOO&;bQ`OANBOOOQSANDiANDiOOQSANDjANDjOOQS<<Ly<<LyOMqQdOAN?aOOQO<<Ih<<IhO%F[Q(C|O<<IhO$}QdO<<IhOOQO<<I]<<I]O;dQ`O<<I]O!0`Q!bO<<I]O&;gQ(ChO<<IhO$%_Q,UO<<I]O&;rQ(ChO<<IhO&<QQ,UO<<I]O&<_Q(ChO<<IhOOQSLD,eLD,eO$(iQ`OLD,eOJRQ&jOLD,eO&<sQ!LVO7+'oO&>iQ!LVO7+'qO&@_Q&kOG26wOOQO<<Mk<<MkOOQ(CWANAQANAQO$<qQ`OANAQOOQ(CWANAPANAPOOQO<<Mv<<MvOOQSLD-QLD-QO&@oQ!LUO7+*WOOQO7+(o7+(oO6lQ(ChO7+(oO#=PQ`O7+(oO6bQ`O7+(oO!0`Q!bO7+(oO$%hQ,UO7+(oOOQSG27_G27_O%AXQ`OG27_OJRQ&jOG27_OOQSG27bG27bO6lQ(ChOG27bOOQSG27jG27jO&@yQ!LUOG24{OOQOAN?SAN?SO%F[Q(C|OAN?SOOQOAN>wAN>wO;dQ`OAN>wO$}QdOAN?SO!0`Q!bOAN>wO&ATQ(ChOAN?SO$%_Q,UOAN>wO&A`Q(ChOAN?SOOQS!$(!P!$(!PO$(iQ`O!$(!PO&AnQ(C}OG26wOOQ(CWG26lG26lOOQO<<LZ<<LZO6lQ(ChO<<LZO#=PQ`O<<LZO6bQ`O<<LZO!0`Q!bO<<LZOOQSLD,yLD,yO%AXQ`OLD,yOOQSLD,|LD,|OOQOG24nG24nOOQOG24cG24cO%F[Q(C|OG24nO;dQ`OG24cO$}QdOG24nO!0`Q!bOG24cO&DPQ(ChOG24nOOQS!)9Ek!)9EkO&DmQ7]O,5:zOOQOANAuANAuO6lQ(ChOANAuO#=PQ`OANAuO6bQ`OANAuOOQS!$(!e!$(!eOOQOLD*YLD*YOOQOLD)}LD)}O%F[Q(C|OLD*YO;dQ`OLD)}O$}QdOLD*YO&EpQ!LVOG26wO&GfQ7]O,59mO&HfQ7]O,5<`O&IfQ7]O,5<bO&JfQ7]O,5<pOOQOG27aG27aO6lQ(ChOG27aO#=PQ`OG27aOOQO!$'Mt!$'MtOOQO!$'Mi!$'MiO%F[Q(C|O!$'MtO&KiQ7]O1G2gO&LiQ7]O1G2iO&MiQ7]O1G2TOOQOLD,{LD,{O6lQ(ChOLD,{OOQO!)9C`!)9C`O&NlQ7]O7+'oO' oQ7]O7+'qOOQO!$(!g!$(!gO'!rQ7]OG26wOMqQdO'#DtO.fQ`O'#EQO'#uQtO'#JQOMqQdO'#DlO'#|QtO'#ChO'&dQtO'#ChO'&tQdO,5;OO'(tQ&jO'#E`OMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO'#I^O'*UQ`O,5<_O'*^Q&jO,5;YO'+nQ&jO,5;YOMqQdO,5;nO.iQ`O'#DRO.iQ`O'#DRO.iQ`O'#DROJRQ&jO'#FtO'(tQ&jO'#FtO'*^Q&jO'#FtOJRQ&jO'#FvO'(tQ&jO'#FvO'*^Q&jO'#FvOJRQ&jO'#GUO'(tQ&jO'#GUO'*^Q&jO'#GUOMqQdO,5?zO'&tQdO1G0jO'+uQ!LUO'#ChOMqQdO1G1vOJRQ&jO,5<{O'(tQ&jO,5<{O'*^Q&jO,5<{OJRQ&jO,5<}O'(tQ&jO,5<}O'*^Q&jO,5<}OJRQ&jO,5<iO'(tQ&jO,5<iO'*^Q&jO,5<iO'&tQdO1G1wOMqQdO7+&qOJRQ&jO1G2TO'(tQ&jO1G2TO'*^Q&jO1G2TOJRQ&jO1G2VO'(tQ&jO1G2VO'*^Q&jO1G2VO'&tQdO7+'cO'&tQdO7+&UO',PQ`O7+'zOJRQ&jOANA]O'(tQ&jOANA]O'*^Q&jOANA]O',PQ`O<<KfO',PQ`OANAQO',UQ`O'#EdO',ZQ`O'#EdO',cQ`O'#FSO',hQ`O'#EnO',mQ`O'#J`O',xQ`O'#J^O'-TQ`O,5;OO'-YQ&kO,5<[O'-aQ`O'#F}O'-fQ`O'#F}O'-kQ`O'#F}O'-pQ`O,5<]O'-xQ`O,5;OO'.QQ!LUO1G1VO'.XQ`O,5<iO'.^Q`O,5<iO'.cQ`O,5<iO'.hQ`O,5<kO'.mQ`O,5<kO'.rQ`O,5<kO'.wQ`O1G1wO'.|Q`O1G0jO'/RQ`O1G2`O'/WQ&kO<<KqO'/_Q&kO<<KqO'/fQ&kO<<KqO'/mQqO7+'zO'/tQ`O7+'zO'/yQqO<<KfO4}Q&jO'#FrO6bQ`O'#FqO={Q`O'#EcOMqQdO,5;kO!(eQ`O'#F}O!(eQ`O'#F}O!(eQ`O'#F}O!(eQ`O'#GPO!(eQ`O'#GPO!(eQ`O'#GPO'0QQ`O,5<tOKhQ&jO7+(VOKhQ&jO7+(VOKhQ&jO7+(VOJRQ&jO1G2`O'0YQ`O1G2`OJRQ&jO7+'zO$:eQqO1G2kO$:eQqO1G2kO$:eQqO1G2kOJRQ&jO,5=POJRQ&jO,5=POJRQ&jO,5=P",stateData:"'1c~O'gOS'hOSTOSUOS~OQUORUOX}O]gO_lObrOcqOigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!VTO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!ppO!uXO#lwO#|tO$QbO%[uO%^xO%`vO%avO%dyO%fzO%i{O%j{O%l|O%y!OO&P!PO&R!QO&T!RO&V!SO&Y!TO&`!UO&f!VO&h!WO&j!XO&l!YO&n!ZO'jQO'rRO'|WO(ZeO~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j![O'rRO'|WO(ZeO~OQ[XZ[X_[Xk[Xx[Xy[X{[X!T[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'e[X'r[X'}[X(U[X(V[X~O!_$vX~P&}OS!cO'c!dO'd!fO~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j;ZO'rRO'|WO(ZeO~O!S!jO!T!gO!Q'vP!Q(RP~P)jO!U!rO~P`OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'rRO'|WO(ZeO~O!S!xO!uXO#^!{O#_!xO'j;[O!e(OP~P,RO!f!}O'j!|O~O!p#RO!uXO%[#SO~O#`#TO~O!_#UO#`#TO~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!T#pO!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O_'tX'e'tX'a'tX!e'tX!Q'tX!V'tX%]'tX!_'tX~P/WO#T#tO#w#tOQ'uXZ'uX_'uXk'uXx'uXy'uX{'uX!T'uX!c'uX!d'uX!f'uX!l'uX#c'uX#d'uX#e'uX#f'uX#g'uX#h'uX#i'uX#j'uX#m'uX#o'uX#q'uX#r'uX'r'uX'}'uX(U'uX(V'uX~O#k'uX'e'uX'a'uX!Q'uX!e'uXo'uX!V'uX%]'uX!_'uX~P1nO#T#tO~O$S#vO$U#uO$]#{O~O!V#|O$QbO$`#}O$b$PO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv$fO{$[O!V$]O!a$kO!f$XO#_$lO#|$iO$i$gO$k$hO$n$jO'j$RO'n$bO'r$UOe'oP~O!f$mO~O!_$oO~O_$pO'e$pO~O'j$tO~O!f$mO'j$tO'k$vO'n$bO~Oc$|O!f$mO'j$tO~O#k#cO~O]%VOx%RO!V%OO!f%QO%^%UO'j$tO'k$vO^(cP~O!p#RO~O{%WO!V%XO'j$tO~O{%WO!V%XO%f%]O'j$tO~O'j%^O~O#lwO%^xO%`vO%avO%dyO%fzO%i{O%j{O~Ob%gOc%fO!p%dO%[%eO%n%cO~P8xOb%jOcqO!V%iO!ppO!uXO#lwO%[uO%`vO%avO%dyO%fzO%i{O%j{O%l|O~O`%mO#T%pO%^%kO'k$vO~P9wO!f%qO!i%uO~O!f!}O~O!VTO~O_$pO'b%}O'e$pO~O_$pO'b&QO'e$pO~O_$pO'b&SO'e$pO~O'a[Xo[X!Q[X!e[X%}[X!V[X%][X!_[X~P&}O]&XOl&XO{&WO!S&[O!Y&bO!Z&ZO![&ZO'k$vO's&UO!U'wP!U(TP~OP&fO!V&cO!q&eO'j$tO~Oc&kO!f$mO'j$tO~Ox%RO!f%QO~OS!cO'c!dO'd&nO~O!S&pO!Q&uX!Q&{X!T&uX!T&{X~P)jO!T&rO!Q'vX~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!T&rO!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O!Q'vX~P?WO!Q&wO~O!Q(QX!T(QX!_(QX!e(QX'}(QX~O#T(QX#`#XX!U(QX~PA^O#T&xO!Q(SX!T(SX~O!T&yO!Q(RX~O!Q&|O~O#T#tO~PA^O!U&}O~P`Ox#YOy#ZO{#[O!d#WO!f#XO'rROQ!haZ!hak!ha!T!ha!c!ha!l!ha#c!ha#d!ha#e!ha#f!ha#g!ha#h!ha#i!ha#j!ha#k!ha#m!ha#o!ha#q!ha#r!ha'}!ha(U!ha(V!ha~O_!ha'e!ha'a!ha!Q!ha!e!hao!ha!V!ha%]!ha!_!ha~PBtO!e'OO~O{%WO!V%XO!uXO#^'RO#_'QO'j$tO~O!_#UO#T'TO'}'SO!T(PX_(PX'e(PX~O!e(PX~PExO!T'WO!e(OX~O!e'YO~O{%WO!V%XO#_'QO'j$tO~Ox'ZOy'[O!d#WO!f#XO!u!ta{!ta~O!p!ta%[!ta!V!ta#^!ta#_!ta'j!ta~PGQO!p'`O~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!VTO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j![O'rRO'|WO(ZeO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'j'dO'n$bO'r$UO~O#`'fO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv$fO{$[O!V$]O!a$kO!f$XO#_$lO#|$iO$i$gO$k$hO$n$jO'j'dO'n$bO'r$UO~Oe'yP~PKhO!S'jO!e'zP~P$}O's'lO'|WO~O{'nO!f#XO's'lO'|WO~OQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!V!]O!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'j'|O'rRO'|WO(Z=XO~Oy(PO!f#XO~O!T#pO_$ga'e$ga'a$ga!e$ga!Q$ga!V$ga%]$ga!_$ga~O#l(TO~PJROx(WO!_(VO!V$TX$P$TX$S$TX$U$TX$]$TX~O!_(VO!V(WX$P(WX$S(WX$U(WX$](WX~Ox(WO~P!#WOx(WO!V(WX$P(WX$S(WX$U(WX$](WX~O!V(YO$P(^O$S(XO$U(XO$](_O~O!S(bO~PMqO$S#vO$U#uO$](eO~OP$oXx$oX{$oX!d$oX(U$oX(V$oX~OPgXegXe$oX!TgX#TgX~P!$|Ol(gO~OS(hO'c(iO'd(kO~OP(tOx(mO{(nO(U(pO(V(rO~Oe(lO~P!&VOe(uO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'n$bO'r$UO~O!S(yO'j(vO!e([P~P!&tO#`({O~O!f(|O~O!S)RO'j)OO!Q(]P~P!&tOk)`O{)WO!Y)^O!Z)VO![)VO!f(|O#P)_O%S)YO'k$vO's)TO~O!U)]O~P!(wO!d#WOP'qXx'qX{'qX(U'qX(V'qX!T'qX#u'qX!U'qX~Oe'qX#T'qX]'qXl'qX!Y'qX!Z'qX!['qX!u'qX!y'qX!z'qX!{'qX#P'qX#Q'qX'k'qX's'qX'|'qX~P!)pOP)cO#T)bOe'pX!T'pX~O!T)dOe'oX~O'j%^Oe'oP~O!f)kO~O'j'dO~O{%WO!S!xO!V%XO!uXO#^!{O#_!xO'j$tO!e(OP~O!_#UO#`)oO~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O_!`a!T!`a'e!`a'a!`a!Q!`a!e!`ao!`a!V!`a%]!`a!_!`a~P!-ROP)wO!V&cO!q)vO%])uO'n$bO~O!_)yO!V'mX_'mX!T'mX'e'mX~O!f$mO'n$bO~O!f$mO'j$tO'n$bO~O!_#UO#`'fO~O]*UO%^*VO'j*RO!U(dP~O!T*WO^(cX~O's'lO~OZ*[O~O^*]O~O!V%OO'j$tO'k$vO^(cP~O{%WO!S*aO!T&yO!V%XO'j$tO!Q(RP~O]&_Ol&_O{*cO!S*bO's'lO~O!U(TP~P!2fO!T*dO_(`X'e(`X~O#T*hO'n$bO~OP*kO!V$]O'n$bO~O!V*mO~Ox*oO!VTO~O!p*tO~Oc*yO~O'j!|O!U(bP~Oc$|O~O%^xO'j%^O~P9wOZ+PO^+OO~OQUORUO]gObrOcqOigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!ppO!uXO$QbO%[uO'rRO'|WO(ZeO~O!V!]O#|!bO'j![O~P!4vO^+OO_$pO'e$pO~O_+TO#l+VO%`+VO%a+VO~P$}O!f%qO~O&P+[O~O!V+^O~O&b+`O&d+aOQ&_aR&_aX&_a]&_a_&_ab&_ac&_ai&_ak&_al&_am&_ar&_at&_av&_a{&_a!O&_a!P&_a!V&_a!a&_a!f&_a!i&_a!j&_a!k&_a!l&_a!m&_a!p&_a!u&_a#l&_a#|&_a$Q&_a%[&_a%^&_a%`&_a%a&_a%d&_a%f&_a%i&_a%j&_a%l&_a%y&_a&P&_a&R&_a&T&_a&V&_a&Y&_a&`&_a&f&_a&h&_a&j&_a&l&_a&n&_a'a&_a'j&_a'r&_a'|&_a(Z&_a!U&_a&W&_a`&_a&]&_a~O'j+fO~O!TzX!T!]X!UzX!U!]X!_zX!_!]X!f!]X#TzX'n!]X~O!_+kO#T+jO!T#]X!T'xX!U#]X!U'xX!_'xX!f'xX'n'xX~O!_+mO!f$mO'n$bO!T!XX!U!XX~O]&VOl&VO{+nO's)TO~OQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!V!]O!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'rRO'|WO(Z=XO~O'j;}O~P!>SO!T+rO!U'wX~O!U+tO~O!_+kO#T+jO!T#]X!U#]X~O!T+uO!U(TX~O!U+wO~O]&VOl&VO{+nO'k$vO's)TO~O!Z+xO![+xO~P!AQO_+}O!U,PO!Y,QO!Z+|O![+|O!u;WO!y,UO!z,SO!{,TO!|,RO#P,VO#Q,VO'|+zO~P!AQOP,[O!V&cO!q,ZO~Oo,aO~O!Q&ua!T&ua~P!-RO!S,eO!Q&uX!T&uX~P$}O!T&rO!Q'va~O!Q'va~P?WO!T&yO!Q(Ra~O{%WO!S,iO!V%XO'j$tO!Q&{X!T&{X~O!T'WO!e(Oa~O{%WO!V%XO#_,lO'j$tO~O#T,nO!T(Pa!e(Pa_(Pa'e(Pa~O!_#UO~P!DvO{%WO!S,qO!V%XO!uXO#^,sO#_,qO'j$tO!T&}X!e&}X~Oy,wO!f#XO~OP,{O!V&cO!q,zO%],yO'n$bO~O_#Wi!T#Wi'e#Wi'a#Wi!Q#Wi!e#Wio#Wi!V#Wi%]#Wi!_#Wi~P!-ROP=mOx(mO{(nO(U(pO(V(rO~O#`#Sa!T#Sa!e#Sa#T#Sa!V#Sa_#Sa'e#Sa!Q#Sa~P!G[O!d#WOP'qXx'qX{'qX(U'qX(V'qXQ'qXZ'qXk'qXy'qX!T'qX!c'qX!f'qX!l'qX#c'qX#d'qX#e'qX#f'qX#g'qX#h'qX#i'qX#j'qX#k'qX#m'qX#o'qX#q'qX#r'qX'r'qX'}'qX~O#`'qX_'qX'e'qX!e'qX!Q'qX'a'qX!V'qX#T'qXo'qX%]'qX!_'qX~P!HZO!T-UOe'yX~P!&VOe-WO~O!T-XO!e'zX~P!-RO!e-[O~O!Q-^O~OQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO'rROZ#bi_#bik#bi!T#bi!c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O#c#bi~P!KrO#c#_O~P!KrOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O'rROZ#bi_#bi!T#bi!c#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~Ok#bi~P!NdOk#aO~P!NdOQ#lOk#aOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO'rRO_#bi!T#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~OZ#bi!c#bi#h#bi#i#bi#j#bi#k#bi~P##UOZ#sO!c#cO#h#cO#i#cO#j#rO#k#cO~P##UOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO'rRO_#bi!T#bi#o#bi#q#bi#r#bi'e#bi'}#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O(U#bi~P#&VO(U#]O~P#&VOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO'rRO(U#]O_#bi!T#bi#q#bi#r#bi'e#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O(V#bi~P#(wO(V#^O~P#(wOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO'rRO(U#]O(V#^O~O_#bi!T#bi#r#bi'e#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~P#+iOQ[XZ[Xk[Xx[Xy[X{[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X!T[X!U[X~O#u[X~P#.SOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO#q;hO#r;iO'rRO'}#jO(U#]O(V#^O~O#u-`O~P#0aOQ'uXZ'uXk'uXx'uXy'uX{'uX!c'uX!d'uX!f'uX!l'uX#c'uX#d'uX#e'uX#f'uX#g'uX#h'uX#i'uX#j'uX#m'uX#o'uX#q'uX#r'uX'r'uX'}'uX(U'uX(V'uX!T'uX~O#T;nO#w;nO#k'uX#u'uX!U'uX~P#2_O_'Qa!T'Qa'e'Qa'a'Qa!e'Qao'Qa!Q'Qa!V'Qa%]'Qa!_'Qa~P!-ROQ#biZ#bi_#bik#biy#bi!T#bi!c#bi!d#bi!f#bi!l#bi#c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'r#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~P!G[O_#vi!T#vi'e#vi'a#vi!Q#vi!e#vio#vi!V#vi%]#vi!_#vi~P!-RO$S-cO$U-cO~O$S-dO$U-dO~O!_(VO#T-eO!V$YX$P$YX$S$YX$U$YX$]$YX~O!S-fO~O!V(YO$P-hO$S(XO$U(XO$]-iO~O!T;jO!U'tX~P#0aO!U-jO~O$]-lO~OS(hO'c(iO'd-oO~O]-rOl-rO!Q-sO~O!TdX!_dX!edX!e$oX'}dX~P!$|O!e-yO~P!G[O!T-zO!_#UO'}'SO!e([X~O!e.PO~O!S(yO'j$tO!e([P~O#`.RO~O!Q$oX!T$oX!_$vX~P!$|O!T.SO!Q(]X~P!G[O!_.UO~O!Q.WO~Ok.[O!_#UO!f$mO'n$bO'}'SO~O'j.^O~O!_)yO~O_$pO!T.bO'e$pO~O!U.dO~P!(wO!Z.eO![.eO'k$vO's)TO~O{.gO's)TO~O#P.hO~O'j%^Oe'VX!T'VX~O!T)dOe'oa~Oe.mO~Ox.nOy.nO{.oOPua(Uua(Vua!Tua#Tua~Oeua#uua~P#>mOx(mO{(nOP$ha(U$ha(V$ha!T$ha#T$ha~Oe$ha#u$ha~P#?cOx(mO{(nOP$ja(U$ja(V$ja!T$ja#T$ja~Oe$ja#u$ja~P#@UO].pO~O#`.qO~Oe$xa!T$xa#T$xa#u$xa~P!&VO#`.tO~OP,{O!V&cO!q,zO%],yO~O]$SOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'n$bO'r$UO~Oi.{O'j.zO~P#AvO!_)yO!V'ma_'ma!T'ma'e'ma~O#`/RO~OZ[X!TdX!UdX~O!T/SO!U(dX~O!U/UO~OZ/VO~O]/XO'j*RO~O!V%OO'j$tO^'_X!T'_X~O!T*WO^(ca~O!e/[O~P!-RO]/^O~OZ/_O~O^/`O~O!T*dO_(`a'e(`a~O#T/fO~OP/iO!V$]O~O's'lO!U(aP~OP/sO!V/oO!q/rO%]/qO'n$bO~OZ/}O!T/{O!U(bX~O!U0OO~O^0QO_$pO'e$pO~O]0RO~O]0SO'j!|O~O#k0TO%}0UO~P1nO#T#tO#k0TO%}0UO~O_0VO~P$}O_0XO~O&W0]OQ&UiR&UiX&Ui]&Ui_&Uib&Uic&Uii&Uik&Uil&Uim&Uir&Uit&Uiv&Ui{&Ui!O&Ui!P&Ui!V&Ui!a&Ui!f&Ui!i&Ui!j&Ui!k&Ui!l&Ui!m&Ui!p&Ui!u&Ui#l&Ui#|&Ui$Q&Ui%[&Ui%^&Ui%`&Ui%a&Ui%d&Ui%f&Ui%i&Ui%j&Ui%l&Ui%y&Ui&P&Ui&R&Ui&T&Ui&V&Ui&Y&Ui&`&Ui&f&Ui&h&Ui&j&Ui&l&Ui&n&Ui'a&Ui'j&Ui'r&Ui'|&Ui(Z&Ui!U&Ui`&Ui&]&Ui~O`0cO!U0aO&]0bO~P`O!VTO!f0eO~O&d+aOQ&_iR&_iX&_i]&_i_&_ib&_ic&_ii&_ik&_il&_im&_ir&_it&_iv&_i{&_i!O&_i!P&_i!V&_i!a&_i!f&_i!i&_i!j&_i!k&_i!l&_i!m&_i!p&_i!u&_i#l&_i#|&_i$Q&_i%[&_i%^&_i%`&_i%a&_i%d&_i%f&_i%i&_i%j&_i%l&_i%y&_i&P&_i&R&_i&T&_i&V&_i&Y&_i&`&_i&f&_i&h&_i&j&_i&l&_i&n&_i'a&_i'j&_i'r&_i'|&_i(Z&_i!U&_i&W&_i`&_i&]&_i~O!Q0kO~O!T!Xa!U!Xa~P#0aO!S0rO!Y&bO!Z&ZO![&ZO!T&vX!U&vX~P!AQO!T+rO!U'wa~O!T&|X!U&|X~P!2fO!T+uO!U(Ta~O!Y0{O!Z0zO![0zO!u;WO!y1OO!z0}O!{0}O!|0|O#P1PO#Q1PO'|+zO~P!AQO_$pO!_#UO!f$mO!l1UO#T1SO'e$pO'n$bO'}'SO~O]&VOl&VO{+nO's)TO'|+zO~O_+}O!U1XO!Y,QO!Z+|O![+|O!u;WO!y,UO!z,SO!{,TO!|,RO#P,VO#Q,VO'|+zO~P!AQO!Z0zO![0zO'|+zO~P!AQO!Y0{O!Z0zO![0zO'|+zO~P!AQO!VTO!Y0{O!Z0zO![0zO!|0|O#P1PO#Q1PO'|+zO~P!AQO!Y0{O!Z0zO![0zO!z0}O!{0}O!|0|O#P1PO#Q1PO'|+zO~P!AQO!V&cO~O!V&cO~P!G[O!T#pOo$ga~O!Q&ui!T&ui~P!-RO!T&rO!Q'vi~O!T&yO!Q(Ri~O!Q(Si!T(Si~P!-RO!T'WO!e(Oi~O!T(Pi!e(Pi_(Pi'e(Pi~P!-RO#T1eO!T(Pi!e(Pi_(Pi'e(Pi~O{%WO!V%XO!uXO#^1hO#_1gO'j$tO~O{%WO!V%XO#_1gO'j$tO~OP1pO!V&cO!q1oO%]1nO~OP1pO!V&cO!q1oO%]1nO'n$bO~O#`uaQuaZua_uakua!cua!dua!fua!lua#cua#dua#eua#fua#gua#hua#iua#jua#kua#mua#oua#qua#rua'eua'rua'}ua!eua!Qua'aua!Vuaoua%]ua!_ua~P#>mO#`$haQ$haZ$ha_$hak$hay$ha!c$ha!d$ha!f$ha!l$ha#c$ha#d$ha#e$ha#f$ha#g$ha#h$ha#i$ha#j$ha#k$ha#m$ha#o$ha#q$ha#r$ha'e$ha'r$ha'}$ha!e$ha!Q$ha'a$ha!V$hao$ha%]$ha!_$ha~P#?cO#`$jaQ$jaZ$ja_$jak$jay$ja!c$ja!d$ja!f$ja!l$ja#c$ja#d$ja#e$ja#f$ja#g$ja#h$ja#i$ja#j$ja#k$ja#m$ja#o$ja#q$ja#r$ja'e$ja'r$ja'}$ja!e$ja!Q$ja'a$ja!V$jao$ja%]$ja!_$ja~P#@UO#`$xaQ$xaZ$xa_$xak$xay$xa!T$xa!c$xa!d$xa!f$xa!l$xa#c$xa#d$xa#e$xa#f$xa#g$xa#h$xa#i$xa#j$xa#k$xa#m$xa#o$xa#q$xa#r$xa'e$xa'r$xa'}$xa!e$xa!Q$xa'a$xa!V$xa#T$xao$xa%]$xa!_$xa~P!G[O_#Wq!T#Wq'e#Wq'a#Wq!Q#Wq!e#Wqo#Wq!V#Wq%]#Wq!_#Wq~P!-ROe&wX!T&wX~PKhO!T-UOe'ya~O!S1xO!T&xX!e&xX~P$}O!T-XO!e'za~O!T-XO!e'za~P!-RO!Q1{O~O#u!ha!U!ha~PBtO#u!`a!T!`a!U!`a~P#0aO!V2^O$QbO$Z2_O~O!U2cO~Oo2dO~P!G[O_$dq!T$dq'e$dq'a$dq!Q$dq!e$dqo$dq!V$dq%]$dq!_$dq~P!-RO!Q2eO~O]-rOl-rO~Ox(mO{(nO(V(rOP%Ti(U%Ti!T%Ti#T%Ti~Oe%Ti#u%Ti~P$9POx(mO{(nOP%Vi(U%Vi(V%Vi!T%Vi#T%Vi~Oe%Vi#u%Vi~P$9rO'}#jO~P!G[O!S2hO'j$tO!T'RX!e'RX~O!T-zO!e([a~O!T-zO!_#UO!e([a~O!T-zO!_#UO'}'SO!e([a~Oe$qi!T$qi#T$qi#u$qi~P!&VO!S2pO'j)OO!Q'TX!T'TX~P!&tO!T.SO!Q(]a~O!T.SO!Q(]a~P!G[O!_#UO~O!_#UO#k2xO~Ok2{O!_#UO'}'SO~Oe'pi!T'pi~P!&VO#T3OOe'pi!T'pi~P!&VO!e3RO~O_$eq!T$eq'e$eq'a$eq!Q$eq!e$eqo$eq!V$eq%]$eq!_$eq~P!-RO!T3VO!V(^X~P!G[O!V&cO%]1nO~O!V&cO%]1nO~P!G[O!V$oX%Q[X_$oX!T$oX'e$oX~P!$|O%Q3XOPhXxhX{hX!VhX(UhX(VhX_hX!ThX'ehX~O%Q3XO~O]3_O%^3`O'j*RO!T'^X!U'^X~O!T/SO!U(da~OZ3dO~O^3eO~O]3hO~O!Q3iO~O_$pO'e$pO~P!G[O!V$]O~P!G[O!T3nO#T3pO!U(aX~O!U3qO~O]&VOl&VO{3sO!Y4OO!Z3wO![3wO!u;WO!y3}O!z3|O!{3|O#P3{O#Q,VO'k$vO's)TO'|+zO~O!U3zO~P$BTOP4VO!V/oO!q4UO%]4TO~OP4VO!V/oO!q4UO%]4TO'n$bO~O'j!|O!T']X!U']X~O!T/{O!U(ba~O]4aO's4`O~O]4bO~O^4dO~O!e4gO~P$}O_4iO~O_4iO~P$}O#k4kO%}4lO~PExO`0cO!U4pO&]0bO~P`O!_4rO~O!_4tO!T'xi!U'xi!_'xi!f'xi'n'xi~O!T#]i!U#]i~P#0aO#T4uO!T#]i!U#]i~O!T!Xi!U!Xi~P#0aO!Q4vO~O]!tal!ta!Y!ta!Z!ta![!ta!y!ta!z!ta!{!ta!|!ta#P!ta#Q!ta'k!ta's!ta'|!ta~PGQO_$pO!_#UO!f$mO!l5OO#T4|O'e$pO'n$bO'}'SO~O!Z5QO![5QO'|+zO~P!AQO!Y5RO!Z5QO![5QO'|+zO~P!AQO!Y5RO!Z5QO![5QO!|5TO#P5UO#Q5UO'|+zO~P!AQO!Y5RO!Z5QO![5QO!z5VO!{5VO!|5TO#P5UO#Q5UO'|+zO~P!AQO_$pO#T4|O'e$pO~O_$pO!_#UO#T4|O'e$pO~O_$pO!_#UO!l5OO#T4|O'e$pO'}'SO~O!T'WO!e(Oq~O!T(Pq!e(Pq_(Pq'e(Pq~P!-RO{%WO!V%XO#_5aO'j$tO~O!V&cO%]5cO~O!V&cO%]5cO~P!G[OP5hO!V&cO!q5gO%]5cO~O#`%TiQ%TiZ%Ti_%Tik%Tiy%Ti!c%Ti!d%Ti!f%Ti!l%Ti#c%Ti#d%Ti#e%Ti#f%Ti#g%Ti#h%Ti#i%Ti#j%Ti#k%Ti#m%Ti#o%Ti#q%Ti#r%Ti'e%Ti'r%Ti'}%Ti!e%Ti!Q%Ti'a%Ti!V%Tio%Ti%]%Ti!_%Ti~P$9PO#`%ViQ%ViZ%Vi_%Vik%Viy%Vi!c%Vi!d%Vi!f%Vi!l%Vi#c%Vi#d%Vi#e%Vi#f%Vi#g%Vi#h%Vi#i%Vi#j%Vi#k%Vi#m%Vi#o%Vi#q%Vi#r%Vi'e%Vi'r%Vi'}%Vi!e%Vi!Q%Vi'a%Vi!V%Vio%Vi%]%Vi!_%Vi~P$9rO#`$qiQ$qiZ$qi_$qik$qiy$qi!T$qi!c$qi!d$qi!f$qi!l$qi#c$qi#d$qi#e$qi#f$qi#g$qi#h$qi#i$qi#j$qi#k$qi#m$qi#o$qi#q$qi#r$qi'e$qi'r$qi'}$qi!e$qi!Q$qi'a$qi!V$qi#T$qio$qi%]$qi!_$qi~P!G[Oe&wa!T&wa~P!&VO!T&xa!e&xa~P!-RO!T-XO!e'zi~O#u#Wi!T#Wi!U#Wi~P#0aOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO'rROZ#bik#bi!c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~O#c#bi~P%&nO#c;_O~P%&nOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O'rROZ#bi!c#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~Ok#bi~P%(yOk;aO~P%(yOQ#lOk;aOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO'rRO#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~OZ#bi!c#bi#h#bi#i#bi#j#bi#k#bi~P%+UOZ;mO!c;cO#h;cO#i;cO#j;lO#k;cO~P%+UOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO'rRO#o#bi#q#bi#r#bi#u#bi'}#bi(V#bi!T#bi!U#bi~O(U#bi~P%-pO(U#]O~P%-pOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO'rRO(U#]O#q#bi#r#bi#u#bi'}#bi!T#bi!U#bi~O(V#bi~P%/{O(V#^O~P%/{OQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO#q;hO'rRO(U#]O(V#^O~O#r#bi#u#bi'}#bi!T#bi!U#bi~P%2WO_#sy!T#sy'e#sy'a#sy!Q#sy!e#syo#sy!V#sy%]#sy!_#sy~P!-ROP=oOx(mO{(nO(U(pO(V(rO~OQ#biZ#bik#biy#bi!c#bi!d#bi!f#bi!l#bi#c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'r#bi'}#bi!T#bi!U#bi~P%5OO#u'qX!U'qX~P!HZO#u#vi!T#vi!U#vi~P#0aO!U5tO~O!T'Qa!U'Qa~P#0aO!_#UO'}'SO!T'Ra!e'Ra~O!T-zO!e([i~O!T-zO!_#UO!e([i~Oe$qq!T$qq#T$qq#u$qq~P!&VO!Q'Ta!T'Ta~P!G[O!_5{O~O!T.SO!Q(]i~P!G[O!T.SO!Q(]i~O!Q6PO~O!_#UO#k6UO~Ok6VO!_#UO'}'SO~O!Q6XO~Oe$sq!T$sq#T$sq#u$sq~P!&VO_$ey!T$ey'e$ey'a$ey!Q$ey!e$eyo$ey!V$ey%]$ey!_$ey~P!-RO!T3VO!V(^a~O_#Wy!T#Wy'e#Wy'a#Wy!Q#Wy!e#Wyo#Wy!V#Wy%]#Wy!_#Wy~P!-ROZ6^O~O]6`O'j*RO~O!T/SO!U(di~O]6cO~O^6dO~O!_4tO~O's'lO!T'YX!U'YX~O!T3nO!U(aa~O!f$mO'n$bO_'xX!_'xX!l'xX#T'xX'e'xX'}'xX~O'j6mO~P,RO!u;WO!y6oO!z6nO!{6nO#P1PO#Q1PO~P$%_O_$pO!_#UO!l1UO#T1SO'e$pO'}'SO~O!U6rO~P$BTO]&VOl&VO{6sO's)TO'|+zO~O!Y6wO!Z6vO![6vO#P1PO#Q1PO'|+zO~P!AQO!Y6wO!Z6vO![6vO!z6xO!{6xO#P1PO#Q1PO'|+zO~P!AQO!Z6vO![6vO'k$vO's)TO'|+zO~O!V/oO~O!V/oO%]6zO~O!V/oO%]6zO~P!G[OP7PO!V/oO!q7OO%]6zO~OZ7UO!T']a!U']a~O!T/{O!U(bi~O]7XO~O!e7YO~O!e7ZO~O!e7[O~O!e7[O~P$}O_7^O~O!_7aO~O!e7bO~O!T(Si!U(Si~P#0aO_$pO#T7iO'e$pO~O_$pO!_#UO#T7iO'e$pO~O!Z7mO![7mO'|+zO~P!AQO_$pO!_#UO!f$mO!l7nO#T7iO'e$pO'n$bO'}'SO~O!Y7oO!Z7mO![7mO'|+zO~P!AQO!Y7oO!Z7mO![7mO!|7rO#P7sO#Q7sO'|+zO~P!AQO_$pO!_#UO!l7nO#T7iO'e$pO'}'SO~O_$pO'e$pO~P!-RO!T'WO!e(Oy~O!T(Py!e(Py_(Py'e(Py~P!-RO!V&cO%]7xO~O!V&cO%]7xO~P!G[O#`$qqQ$qqZ$qq_$qqk$qqy$qq!T$qq!c$qq!d$qq!f$qq!l$qq#c$qq#d$qq#e$qq#f$qq#g$qq#h$qq#i$qq#j$qq#k$qq#m$qq#o$qq#q$qq#r$qq'e$qq'r$qq'}$qq!e$qq!Q$qq'a$qq!V$qq#T$qqo$qq%]$qq!_$qq~P!G[O#`$sqQ$sqZ$sq_$sqk$sqy$sq!T$sq!c$sq!d$sq!f$sq!l$sq#c$sq#d$sq#e$sq#f$sq#g$sq#h$sq#i$sq#j$sq#k$sq#m$sq#o$sq#q$sq#r$sq'e$sq'r$sq'}$sq!e$sq!Q$sq'a$sq!V$sq#T$sqo$sq%]$sq!_$sq~P!G[O!T&xi!e&xi~P!-RO#u#Wq!T#Wq!U#Wq~P#0aOx.nOy.nO{.oOPua(Uua(Vua!Uua~OQuaZuakua!cua!dua!fua!lua#cua#dua#eua#fua#gua#hua#iua#jua#kua#mua#oua#qua#rua#uua'rua'}ua!Tua~P%LmOx(mO{(nOP$ha(U$ha(V$ha!U$ha~OQ$haZ$hak$hay$ha!c$ha!d$ha!f$ha!l$ha#c$ha#d$ha#e$ha#f$ha#g$ha#h$ha#i$ha#j$ha#k$ha#m$ha#o$ha#q$ha#r$ha#u$ha'r$ha'}$ha!T$ha~P%NtOx(mO{(nOP$ja(U$ja(V$ja!U$ja~OQ$jaZ$jak$jay$ja!c$ja!d$ja!f$ja!l$ja#c$ja#d$ja#e$ja#f$ja#g$ja#h$ja#i$ja#j$ja#k$ja#m$ja#o$ja#q$ja#r$ja#u$ja'r$ja'}$ja!T$ja~P&!{OQ$xaZ$xak$xay$xa!c$xa!d$xa!f$xa!l$xa#c$xa#d$xa#e$xa#f$xa#g$xa#h$xa#i$xa#j$xa#k$xa#m$xa#o$xa#q$xa#r$xa#u$xa'r$xa'}$xa!T$xa!U$xa~P%5OO#u$dq!T$dq!U$dq~P#0aO#u$eq!T$eq!U$eq~P#0aO!U8RO~O#u8SO~P!&VO!_#UO!T'Ri!e'Ri~O!_#UO'}'SO!T'Ri!e'Ri~O!T-zO!e([q~O!Q'Ti!T'Ti~P!G[O!T.SO!Q(]q~O!Q8YO~P!G[O!Q8YO~Oe'py!T'py~P!&VO!T'Wa!V'Wa~P!G[O!V%Pq_%Pq!T%Pq'e%Pq~P!G[OZ8_O~O!T/SO!U(dq~O]8bO~O#T8cO!T'Ya!U'Ya~O!T3nO!U(ai~P#0aOQ[XZ[Xk[Xx[Xy[X{[X!Q[X!T[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X~O!_$}X#k$}X~P&*pO#P5UO#Q5UO~P$%_O!z8gO!{8gO#P5UO#Q5UO~P$%_O!Z8jO![8jO'k$vO's)TO'|+zO~O!Y8mO!Z8jO![8jO#P5UO#Q5UO'|+zO~P!AQO!V/oO%]8pO~O!V/oO%]8pO~P!G[O]8wO's8vO~O!T/{O!U(bq~O!e8yO~O!e8yO~P$}O!e8{O~O!e8|O~O#T9OO!T#]y!U#]y~O!T#]y!U#]y~P#0aO_$pO#T9RO'e$pO~O_$pO!_#UO#T9RO'e$pO~O!Z9WO![9WO'|+zO~P!AQO_$pO!_#UO!l9XO#T9RO'e$pO'}'SO~O!f$mO'n$bO~P&0|O!Y9YO!Z9WO![9WO'|+zO~P!AQO!V&cO%]9^O~O!V&cO%]9^O~P!G[O#u#sy!T#sy!U#sy~P#0aOQ$qiZ$qik$qiy$qi!c$qi!d$qi!f$qi!l$qi#c$qi#d$qi#e$qi#f$qi#g$qi#h$qi#i$qi#j$qi#k$qi#m$qi#o$qi#q$qi#r$qi#u$qi'r$qi'}$qi!T$qi!U$qi~P%5OOx(mO{(nO(V(rOP%Ti(U%Ti!U%Ti~OQ%TiZ%Tik%Tiy%Ti!c%Ti!d%Ti!f%Ti!l%Ti#c%Ti#d%Ti#e%Ti#f%Ti#g%Ti#h%Ti#i%Ti#j%Ti#k%Ti#m%Ti#o%Ti#q%Ti#r%Ti#u%Ti'r%Ti'}%Ti!T%Ti~P&4cOx(mO{(nOP%Vi(U%Vi(V%Vi!U%Vi~OQ%ViZ%Vik%Viy%Vi!c%Vi!d%Vi!f%Vi!l%Vi#c%Vi#d%Vi#e%Vi#f%Vi#g%Vi#h%Vi#i%Vi#j%Vi#k%Vi#m%Vi#o%Vi#q%Vi#r%Vi#u%Vi'r%Vi'}%Vi!T%Vi~P&6jO#u$ey!T$ey!U$ey~P#0aO#u#Wy!T#Wy!U#Wy~P#0aO!_#UO!T'Rq!e'Rq~O!T-zO!e([y~O!Q'Tq!T'Tq~P!G[O!Q9dO~P!G[O!T/SO!U(dy~O!T3nO!U(aq~O#P7sO#Q7sO~P$%_O!Z9nO![9nO'k$vO's)TO'|+zO~O!V/oO%]9qO~O!V/oO%]9qO~P!G[O!e9tO~O_$pO#T9zO'e$pO~O_$pO!_#UO#T9zO'e$pO~O!Z9}O![9}O'|+zO~P!AQO_$pO!_#UO!l:OO#T9zO'e$pO'}'SO~OQ$qqZ$qqk$qqy$qq!c$qq!d$qq!f$qq!l$qq#c$qq#d$qq#e$qq#f$qq#g$qq#h$qq#i$qq#j$qq#k$qq#m$qq#o$qq#q$qq#r$qq#u$qq'r$qq'}$qq!T$qq!U$qq~P%5OOQ$sqZ$sqk$sqy$sq!c$sq!d$sq!f$sq!l$sq#c$sq#d$sq#e$sq#f$sq#g$sq#h$sq#i$sq#j$sq#k$sq#m$sq#o$sq#q$sq#r$sq#u$sq'r$sq'}$sq!T$sq!U$sq~P%5OOe%X!Z!T%X!Z#T%X!Z#u%X!Z~P!&VO!T'Yq!U'Yq~P#0aO!T#]!Z!U#]!Z~P#0aO_$pO#T:aO'e$pO~O_$pO!_#UO#T:aO'e$pO~O#`%X!ZQ%X!ZZ%X!Z_%X!Zk%X!Zy%X!Z!T%X!Z!c%X!Z!d%X!Z!f%X!Z!l%X!Z#c%X!Z#d%X!Z#e%X!Z#f%X!Z#g%X!Z#h%X!Z#i%X!Z#j%X!Z#k%X!Z#m%X!Z#o%X!Z#q%X!Z#r%X!Z'e%X!Z'r%X!Z'}%X!Z!e%X!Z!Q%X!Z'a%X!Z!V%X!Z#T%X!Zo%X!Z%]%X!Z!_%X!Z~P!G[O_$pO#T:oO'e$pO~OP=nOx(mO{(nO(U(pO(V(rO~O]#Sal#Sa!U#Sa!Y#Sa!Z#Sa![#Sa!u#Sa!y#Sa!z#Sa!{#Sa#P#Sa#Q#Sa'k#Sa's#Sa'|#Sa~P&D[OQ%X!ZZ%X!Zk%X!Zy%X!Z!c%X!Z!d%X!Z!f%X!Z!l%X!Z#c%X!Z#d%X!Z#e%X!Z#f%X!Z#g%X!Z#h%X!Z#i%X!Z#j%X!Z#k%X!Z#m%X!Z#o%X!Z#q%X!Z#r%X!Z#u%X!Z'r%X!Z'}%X!Z!T%X!Z!U%X!Z~P%5OO]ualua!Yua!Zua![ua!uua!yua!zua!{ua#Pua#Qua'kua'sua'|ua~P%LmO]$hal$ha!Y$ha!Z$ha![$ha!u$ha!y$ha!z$ha!{$ha#P$ha#Q$ha'k$ha's$ha'|$ha~P%NtO]$jal$ja!Y$ja!Z$ja![$ja!u$ja!y$ja!z$ja!{$ja#P$ja#Q$ja'k$ja's$ja'|$ja~P&!{O]$xal$xa!U$xa!Y$xa!Z$xa![$xa!u$xa!y$xa!z$xa!{$xa#P$xa#Q$xa'k$xa's$xa'|$xa~P&D[O]%Til%Ti!Y%Ti!Z%Ti![%Ti!u%Ti!y%Ti!z%Ti!{%Ti#P%Ti#Q%Ti'k%Ti's%Ti'|%Ti~P&4cO]%Vil%Vi!Y%Vi!Z%Vi![%Vi!u%Vi!y%Vi!z%Vi!{%Vi#P%Vi#Q%Vi'k%Vi's%Vi'|%Vi~P&6jO]$qil$qi!U$qi!Y$qi!Z$qi![$qi!u$qi!y$qi!z$qi!{$qi#P$qi#Q$qi'k$qi's$qi'|$qi~P&D[O]$qql$qq!U$qq!Y$qq!Z$qq![$qq!u$qq!y$qq!z$qq!{$qq#P$qq#Q$qq'k$qq's$qq'|$qq~P&D[O]$sql$sq!U$sq!Y$sq!Z$sq![$sq!u$sq!y$sq!z$sq!{$sq#P$sq#Q$sq'k$sq's$sq'|$sq~P&D[O]%X!Zl%X!Z!U%X!Z!Y%X!Z!Z%X!Z![%X!Z!u%X!Z!y%X!Z!z%X!Z!{%X!Z#P%X!Z#Q%X!Z'k%X!Z's%X!Z'|%X!Z~P&D[Oo'tX~P/WO!QdX!TdX#TdX~P&*pOQ[XZ[Xk[Xx[Xy[X{[X!T[X!TdX!c[X!d[X!f[X!l[X#T[X#TdX#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X~O!_dX!e[X!edX'}dX~P'$ZOQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!VTO!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'j'|O'rRO'|WO(Z=XO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;pO{$[O!V$]O!a=aO!f$XO#_;yO#|$iO$i;sO$k;vO$n$jO'j'dO'n$bO'r$UO~O!T;jO!U$ga~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;qO{$[O!V$]O!a=bO!f$XO#_;zO#|$iO$i;tO$k;wO$n$jO'j'dO'n$bO'r$UO~O#l(TO~P'*^O!U[X!UdX~P'$ZO!_;^O~O#`;]O~O!_#UO#`;]O~O#T;nO~O#k;cO~O#T;{O!T(SX!U(SX~O#T;nO!T(QX!U(QX~O#`;|O~Oe<OO~P!&VO#`<VO~O#`<WO~O#`<XO~O!_#UO#`<YO~O!_#UO#`;|O~O#u<ZO~P#0aO#`<[O~O#`<]O~O#`<^O~O#`<_O~O#`<`O~O#`<aO~O#`<bO~O#`<cO~O!Q<dO~O#u<eO~P!&VO#u<fO~P!&VO#u<gO~P!&VO!Q<hO~P!G[O!Q<hO~O!Q<iO~P!G[O!_#UO#k=gO~O!_#UO#k=iO~O$Q~!d!y!{!|#P#^#_#j(Z$i$k$n%Q%[%]%^%d%f%i%j%l%n~UT$Q(Z#d!P'g'k#el#c#fkx'h's'h'j$S$U$S~",goto:"$(n(hPPPPPPPP(iP(yP*tPPPP.mPP/SP4y9R9fP9fPPP9fP;l9fP9fP9fP;pPP;vP<a@}PPPARPPPPARC|PPPDSE|PARPHdPPPPJbARPPPPPLlARPP! z!#O!#SP!#s!#w!#sPPPP!&|!(wPP!)P!*VP!#OARAR!-m!0q!5r!5r!9cPPP!9jARPPPPPPPPPPP!<iP!=|PPAR!?]PARPARARARARPAR!@tPP!CvP!FtP!Fx!GQ!GU!GUP!CsP!GY!GYP!JWP!J[ARAR!Jb!M_9fP9fP9f9fP!Ni9f9f#!y9f#%v9f#(Q9f9f#(n#+Q#+Q#+U#+^#+Q#+jP#+QP9f#,f9f#.T9f9f.mPPP#/vPP#0`#0`P#0`P#0u#0`PP#0{P#0rP#0r#1_!({#0r#1|#2S#2V(i#2Y(iP#2a#2a#2aP(iP(iP(iP(iPP(iP#2g#2jP#2j(iP#2nP#2qP(iP(iP(iP(iP(iP(i(iP#2w#3R#3X#3_#3m#3s#3y#4T#4Z#5U#5e#5k#5}#6T#6Z#6i#7O#8w#9V#9]#9c#9i#9o#9y#:P#:V#:a#:s#:yPPPPPPPP#;PPP#;s#?TP#@o#@v#AOPP#Fp#If$ o$ r$ u$#h$#k$#nPP$#t$#x$$q$%q$%u$&ZPP$&_$&e$&iP$&l$&p$&s$'f$'|$(R$(U$(X$(_$(b$(f$(jmlOTn!R!s$o%t%v%w%y+X+^0]0`Q${qQ%StQ%l}S&Z!]+rQ&j!`S)V$])[Q*P$|Q*^%UQ*x%fQ+x&bS+|&c,OQ,`&kQ.e)^Q/z*y[0z+y,Q,R,S,T,US3w/o3yW5Q0{0|0}1OU6v3|3}4OU7m5R5T5VS8j6w6xS9W7o7rQ9n8mR9}9Y%Q`OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS#PX;W!l(O#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q)g$fQ*U%OQ*z%iQ+R%qQ-O;oQ.|)yQ/X*VQ0S+PQ3_/SQ4^/{Q5m;qQ6`3`R:q;ppiOTn}!R!s$o%k%t%v%w%y+X+^0]0`R*|%m&j[OPTUnor!R!W!a!c!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&e&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=Z=[[!lSV!g!j&[&pQ$upQ$zqS%Pt%U!U%Yvw!v!x!{$m%W&y'Q'R'W*a*b*d+V+k,i,l,p,q,s0e1g1h4t5aQ%b{Q&g!_Q&i!`Q'_#RS(x$X(|S*O${$|Q*S%OQ*s%dQ*w%fS,_&j&kQ,}'`Q.O(yQ/Q*PQ/W*VQ/Y*WQ/]*[Q/u*tS/y*x*yQ1a,`Q2g-zQ3^/SQ3b/VQ3g/_Q4]/zQ5x2hQ6_3`Q6b3dQ8^6^R9f8_x$Ze#W$g$h$l(q(s({)b)c-U.R.q2f3O8S=X=d=e=f!^$xq!`$z${$|&Y&i&j&k)U*O*P+o+{,_,`.]/Q0w0y1V1a2z5P5S7l7q9U9{:bQ)x$uQ*i%_Q*l%`Q*v%fQ,|'_Q/t*sU/x*w*x*yQ1q,}Q4W/uS4[/y/zS6l3r3vQ7T4]U8h6p6t6uU9l8i8k8lQ:W9mQ:i:X#b=]#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=od=^;^;s;v;y<Q<T<W<]<`<fg=_;l;m;t;w;z<R<U<X<^<a<gW$`e$b)d=XS%_x%kQ%`yQ%azR*g%]%X$_e#U#W#r#s$X$[$g$h$l&f(h(q(s(t({)R)b)c)u)w)y*h*k,[,y,{-U.R.S.U.q/f/i/q/s1n1p2f2p2x3O3V3X4T4V5c5h5{6U6z7P7x8S8p9^9q;^;l;m;r;s;t;u;v;w;x;y;z<P<Q<R<S<T<U<V<W<X<[<]<^<_<`<a<e<f<g=X=d=e=f=g=i=m=n=oT(i$U(jX)h$f;o;p;qU&_!]%X+uS'm#Y#ZQ*Z%RS,u'Z'[Q/j*mQ3P.nR6h3n&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[$a#o_!i!t$s&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-a-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wT!dR!e&qgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q&]!]R0s+r!n&V!]&Z&b&c+r+x+y+|,O,Q,R,S,T,U,V0z0{0|0}1O1P3t3{5Q5R5T5U5V6n6o7m7o7r7s8g9W9Y9}S)U$])[S.])V)^Q.f)_Q/l*oQ2z.eQ2}.hS3r/o3yS6p3w4OS6t3|3}S8i6v6wQ8k6xS9m8j8mR:X9nllOTn!R!s$o%t%v%w%y+X+^0]0`Q%{!US'a#T;]Q)|$yQ*q%bQ*r%cQ,]&hS-S'f;|S.s)o<YQ/O)}Q/n*pQ0d+`Q0f+aQ0n+lQ1Y,SQ1_,^S3U.t<bQ3Y/PS3]/R<cQ4w0qQ5X1QQ5[1`Q6]3ZQ7e4yQ7f4zQ7t5]Q8}7bQ9S7kQ9x9TQ:^9yQ:l:`R:y:n$[#n_!i!t&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wS'^#O0xU)a$^'e2[T)s$s-a$[#m_!i!t&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wS']#O0xS'o#Z#nS)r$s-aS,v'['^Q-b(PQ.u)sR1i,w&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S#PX;WQ%v!PQ%w!QQ%y!SQ%z!TR0[+[Q&d!_Q)t$uQ,Y&gS,x'_)xS1[,W,XY1m,|,}.w.x.yS5Z1]1^W5b1j1k1l1qU7w5d5e5fU9[7v7y7zQ:P9]R:d:QT+}&c,O!]YOTVZn}!R!s!v$m$o%k%m%t%v%w%y&c'W+X+^+y,O,p/o0]0`3t3yT#PX;W%SsOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS'm#Y#ZS,u'Z'[!m<m#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S+{&c,OW0y+y,S,T,UU1V+|,Q,RU1Z,V3t3{S3v/o3yU5P0z0{0|S5S0}1OU5W1P6n6oS6p3w4OS6u3|3}U7l5Q5R5TS7p5U8gQ7q5VS8i6v6wQ8l6xU9U7m7o7rQ9Z7sS9m8j8mS9{9W9YQ:X9nR:b9}S+}&c,OT3x/o3yS'V!w0YQ-}(xQ.Z)UU1U+{3u3vQ2l.OS2u.[.fU5O0y1Z6uQ5w2gS6S2{2}U7n5S5W8lQ8U5xQ8]6VS9X7p7qR:O9ZQ#V^S'U!w0YQ)p$nQ)z$wQ*Q$}Q,o'VQ-|(xQ.Y)UQ.`)XQ.}){Q/v*uU1T+{3u3vS2k-}.OS2t.Z.fQ2w._Q2y.aQ4Y/wW4}0y1U1Z6uQ5v2gQ5z2lS6O2u2}Q6T2|Q7R4ZW7j5O5S5W8lS8T5w5xS8X6P<dQ8Z6SQ8e6kQ8t7SU9V7n7p7qQ9b8US9c8Y<hQ9e8]Q9j8fQ9s8uS9|9X9ZS:S9d<iQ:U9kQ:c:OQ:g:VQ:v:hQ;P:wQ<p<kQ=O<uQ=P<vQ=Q=cR=V=h%S]OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS#Vr!a!l<j#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R<p=Z%S^OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oQ$nf!^$wq!`$z${$|&Y&i&j&k)U*O*P+o+{,_,`.]/Q0w0y1V1a2z5P5S7l7q9U9{:bS$}r!aQ){$xQ*u%fW/w*v*w*x*yU4Z/x/y/zS6k3r3vS7S4[4]W8f6l6p6t6uQ8u7TW9k8h8i8k8lS:V9l9mS:h:W:XQ:w:i!l<k#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q<u=YR<v=Z$vaOPTUno!R!W!c!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oY!qSV!g!j&p!U%Yvw!v!x!{$m%W&y'Q'R'W*a*b*d+V+k,i,l,p,q,s0e1g1h4t5aQ+S%q!j<l#k#|(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R<o&[S&`!]%XR0u+u%Q`OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:o!l(O#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R+R%q!j#e_!i$s&o&u'b'i'x'y'z'{(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;X!T;e'}(`+p-a0l0o1|2U2V2W2X2]2b4x5l5q5r6j7d7{8P8Q9h9u<w!f#g_!i$s&o&u'b'i'z'{(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;X!P;g'}(`+p-a0l0o1|2W2X2]2b4x5l5q5r6j7d7{8P8Q9h9u<w!b#k_!i$s&o&u'b'i(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;XQ2f-xz=['}(`+p-a0l0o1|2]2b4x5l5q5r6j7d7{8P8Q9h9u<wQ=d=jQ=e=kR=f=l&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S#}d$OR2_-e&wcOPSTUVdno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$O$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-e-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[T#yb$PS#wb$PT(X#z(]T#xb$PT(Z#z(]&wdOPSTUVdno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$O$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-e-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[T#}d$OQ$QdR(d$O%SfOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:o!m=Y#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[#ahOPTVn!R!W!c!s!}#[#|$o%m%p%q%t%v%w%y%}&W&e'n(b)v*c+T+X+^+n,Z,z-f.o/r0T0U0V0X0]0`0b1o2^3s4U4i4k4l5g6s7O7^!^$^e#W$g$h$l(q(s({)b)c-U.R.q2f3O8S;^;s;v;y<Q<T<W<]<`<f=X=d=e=f#b'e#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=oQ)l$jQ-q(mg2[;l;m;t;w;z<R<U<X<^<a<gx$Ye#W$g$h$l(q(s({)b)c-U.R.q2f3O8S=X=d=e=fQ(}$ZS)X$])[Q)m$kQ.a)Y#b<r#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=od<s;^;s;v;y<Q<T<W<]<`<ff<t;l;m;t;w;z<R<U<X<^<a<gQ<x=]Q<y=^Q<z=_Q<{=`Q<|=aR<}=b!^$^e#W$g$h$l(q(s({)b)c-U.R.q2f3O8S;^;s;v;y<Q<T<W<]<`<f=X=d=e=f#b'e#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=og2[;l;m;t;w;z<R<U<X<^<a<gljOTn!R!s$o%t%v%w%y+X+^0]0`Q)Q$[Q+g&QQ+h&SR2o.S%W$_e#U#W#r#s$X$[$g$h$l&f(h(q(s(t({)R)b)c)u)w)y*h*k,[,y,{-U.R.S.U.q/f/i/q/s1n1p2f2p2x3O3V3X4T4V5c5h5{6U6z7P7x8S8p9^9q;^;l;m;r;s;t;u;v;w;x;y;z<P<Q<R<S<T<U<V<W<X<[<]<^<_<`<a<e<f<g=X=d=e=f=g=i=m=n=oQ*j%`Q/h*lQ3l/gR6g3mT)Z$])[S)Z$])[T3x/o3yQ._)WQ2|.gQ=c3sR=h6sQ)z$wQ.`)XQ.}){Q/v*uQ4Y/wQ7R4ZQ8e6kQ8t7SQ9j8fQ9s8uQ:U9kQ:g:VQ:v:hR;P:wp(q$V'g)n.Q.i.j1u2m3S5u6W9a<q=R=S=T!p<P'c(S(w)P,X-R-m-x.V.v.y/e/g1^1l1t2n2r3k3m4R5f5i5j5|6Q6Y6[6}7z8W8[8r:R=U=W=j=k=l[<Q:e:t:};R;S;U]<R2Z5p7|9_9`:pr(s$V'g)n-v.Q.i.j1u2m3S5u6W9a<q=R=S=T!r<S'c(S(w)P,X-R-m-x.V.v.y/e/g1^1l1r1t2n2r3k3m4R5f5i5j5|6Q6Y6[6}7z8W8[8r:R=U=W=j=k=l^<T:e:t:{:};R;S;U_<U2Z5p7|7}9_9`:ppiOTn}!R!s$o%k%t%v%w%y+X+^0]0`Q%h|R+T%qpiOTn}!R!s$o%k%t%v%w%y+X+^0]0`R%h|Q*n%aR/d*gqiOTn}!R!s$o%k%t%v%w%y+X+^0]0`Q/p*sS4S/t/uW6y4P4Q4R4WU8o6{6|6}U9o8n8q8rQ:Y9pR:j:ZQ%o}R*}%kR4a/}R8w7US%Pt%UR/Y*WQ%t!OR+X%uR+_%zT0^+^0`R+c%{Q+b%{R0g+cQnOQ!sTT$rn!sQ(j$UR-n(jQ!eRR&m!eQ!hSU&s!h&t,fQ&t!iR,f&uQ+s&]R0t+sQ-V'gR1v-VQ-Y'iS1y-Y1zR1z-ZQ,O&cR1W,OrZOTn}!R!s$o%k%m%t%v%w%y+X+^0]0`S!vV$mY#QZ!v+y,p3tS+y&c,OQ,p'WT3t/o3yS!nS%WU&z!n&{,gQ&{!oR,g&vQ+v&`R0v+vQ'X!yQ,j'PW,t'X,j1b5^Q1b,kR5^1cQ(]#zR-g(]Q$OdR(c$OQ#q_U(R#q,b;kQ,b;XR;k(`Q-{(xW2i-{2j5y8VU2j-|-}.OS5y2k2lR8V5z$m(o$V'c'g(S(w)P)i)j)n,X-P-Q-R-m-v-w-x.Q.V.i.j.v.y/e/g1^1l1r1s1t1u2Z2m2n2r3S3k3m4R5f5i5j5n5o5p5u5|6Q6W6Y6[6}7z7|7}8O8W8[8r9_9`9a:R:e:p:r:s:t:{:|:};R;S;U<q=R=S=T=U=W=j=k=lQ.T)PU2q.T2s5}Q2s.VR5}2rQ)[$]R.c)[Q)e$aR.l)eQ3W.vR6Z3WQ*e%ZR/c*eQ3o/jS6i3o8dR8d6jQ*p%bR/m*pQ3y/oR6q3yQ/|*zS4_/|7VR7V4aQ/T*SW3a/T3c6a8`Q3c/WQ6a3bR8`6bQ*X%PR/Z*XQ0`+^R4o0`WmOTn!sQ%x!RQ)q$oQ+W%tQ+Y%vQ+Z%wQ+]%yQ0Z+XS0^+^0`R4n0]Q$qkQ%|!VQ&P!XQ&R!YQ&T!ZQ*`%VQ*f%[Q*|%oQ+e&OQ.b)ZS0P*}+QQ0h+dQ0i+gQ0j+hU1R+{3u3vQ3f/^Q3j/eQ4X/vQ4c0RQ4m0[Y4{0y1T1U1Z6uQ6e3hQ6f3kQ7Q4YQ7W4b[7h4}5O5S5W5Y8lQ8a6cQ8s7RQ8x7XY9P7g7j7n7p7qQ9g8bQ9i8eQ9r8tW9v9Q9V9X9ZQ:T9jQ:[9sU:]9w9|:OQ:f:US:k:_:cQ:u:gQ:x:mQ;O:vQ;Q:zR;T;PQ$yqQ&h!`U)}$z${$|Q+l&YU,^&i&j&kQ.X)US/P*O*PQ0q+oQ1Q+{S1`,_,`Q2v.]Q3Z/QQ4y0wS4z0y1VQ5]1aQ6R2zS7k5P5SS9T7l7qQ9y9UQ:`9{R:n:bS$We=XR)f$bU$ae$b=XR.k)dQ$VeS'c#U)yQ'g#WS(S#r#sQ(w$XQ)P$[Q)i$gQ)j$hQ)n$lQ,X&fQ-P;rQ-Q;uQ-R;xQ-m(hQ-v(qQ-w(sQ-x(tQ.Q({Q.V)RQ.i)bQ.j)cf.v)u,y/q1n4T5c6z7x8p9^9qQ.y)wQ/e*hQ/g*kQ1^,[Q1l,{Q1r<PQ1s<SQ1t<VQ1u-US2Z;l;mQ2m.RQ2n.SQ2r.UQ3S.qQ3k/fQ3m/iQ4R/sQ5f1pQ5i<[Q5j<_Q5n;tQ5o;wQ5p;zQ5u2fQ5|2pQ6Q2xQ6W3OQ6Y3VQ6[3XQ6}4VQ7z5hQ7|<XQ7}<RQ8O<UQ8W5{Q8[6UQ8r7PQ9_<^Q9`<aQ9a8SQ:R<eQ:e;^Q:p<gQ:r;sQ:s;vQ:t;yQ:{<QQ:|<TQ:}<WQ;R<]Q;S<`Q;U<fQ<q=XQ=R=dQ=S=eQ=T=fQ=U=gQ=W=iQ=j=mQ=k=nR=l=olkOTn!R!s$o%t%v%w%y+X+^0]0`Q!^PS!uV!}Q&O!WQ&l!cQ'p#[Q(a#|S+Q%m%pQ+U%qQ+d%}Q+i&WQ,W&eQ-]'nQ-k(bQ.x)vQ/a*cQ0W+TU0p+n3s6sQ1],ZQ1k,zQ2a-fQ3Q.oQ4Q/rQ4e0TQ4f0UQ4h0VQ4j0XQ4q0bQ5e1oQ5s2^Q6|4UQ7]4iQ7_4kQ7`4lQ7y5gQ8q7OR8z7^#U_OPTVn!R!W!s!}#[$o%m%p%q%t%v%w%y%}&W&e'n)v*c+T+X+^+n,Z,z.o/r0T0U0V0X0]0`0b1o3s4U4i4k4l5g6s7O7^Q!iSQ!tUQ$soS&o!g&rQ&u!jQ'b#TQ'i#XQ'q#_Q'r#`Q's#aQ't#bQ'u#cQ'v#dQ'w#eQ'x#fQ'y#gQ'z#hQ'{#iQ'}#kQ(Q#pQ(U#tW(`#|(b-f2^Q*Y%QS+p&[0rS,c&p,eQ,h&xQ,m'TQ-T'fQ-Z'jQ-_;VQ-a;YQ-p(lQ.r)oQ0l+jQ0o+mQ1d,nQ1w-XQ1|;]Q1};_Q2O;`Q2P;aQ2Q;bQ2R;cQ2S;dQ2T;eQ2U;fQ2V;gQ2W;hQ2X;iQ2Y-`Q2];nQ2b;jQ3T.tQ3[/RQ4x;{Q5Y1SQ5_1eQ5k1xQ5l;|Q5q<OQ5r<YQ6j3pQ7d4uQ7g4|Q7{<ZQ8P<bQ8Q<cQ9Q7iQ9h8cQ9u9OQ9w9RQ:_9zQ:m:aQ:z:oQ;X!cR<w=[R!kSR&^!]S&Y!]+rS+o&Z&bS+{&c,OQ0w+xW0y+y,S,T,UU1V+|,Q,RY1Z,V3t3{3|3}S3u/o3yU5P0z0{0|S5S0}1OW5W1P6n6o6xU7l5Q5R5TS7p5U8gQ7q5VU9U7m7o7rQ9Z7sS9{9W9YR:b9}R'h#WR'k#XQ#OXR0x;WT!zV$mS!yV$mU%Zvw+VU'P!v!x!{S,k'Q'RQ,r'WQ/b*dQ1c,lU1f,p,q,sS5`1g1hR7u5a`!mS!g!j%W&p&y*a,it!wVvw!v!x!{$m'Q'R'W*d,l,p,q,s1g1h5aQ0Y+VQ0m+kQ4s0eQ7c4tT<n&[*bT!pS%WS!oS%WS&q!g&yS&v!j*aS+q&[*bT,d&p,iT&a!]%XQ#zbR(f$PT([#z(]R2`-eT(z$X(|R)S$[Q.w)uQ1j,yQ4P/qQ5d1nQ6{4TQ7v5cQ8n6zQ9]7xQ9p8pQ:Q9^R:Z9qllOTn!R!s$o%t%v%w%y+X+^0]0`Q%n}R*|%kV%[vw+VR/k*mR*{%iQ%TtR*_%UR*T%OT%r!O%uT%s!O%uT0_+^0`",nodeNames:"⚠ extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression",maxTerm:345,context:SS,nodeProps:[["closedBy",4,"InterpolationEnd",43,"]",53,"}",68,")",140,"JSXSelfCloseEndTag JSXEndTag",156,"JSXEndTag"],["group",-26,8,15,17,60,195,199,202,203,205,208,211,222,224,230,232,234,236,239,245,251,253,255,257,259,261,262,"Statement",-30,12,13,25,28,29,34,44,46,47,49,54,62,70,76,77,99,100,109,110,127,130,132,133,134,135,137,138,158,159,161,"Expression",-23,24,26,30,33,35,37,162,164,166,167,169,170,171,173,174,175,177,178,179,189,191,193,194,"Type",-3,81,92,98,"ClassItem"],["openedBy",31,"InterpolationStart",48,"[",52,"{",67,"(",139,"JSXStartTag",151,"JSXStartTag JSXStartCloseTag"]],propSources:[ES],skippedNodes:[0,5,6],repeatNodeCount:29,tokenData:"#2k~R!bOX%ZXY%uYZ'kZ[%u[]%Z]^'k^p%Zpq%uqr(Rrs)mst7]tu9guv<avw=bwx>lxyJcyzJyz{Ka{|Lm|}MW}!OLm!O!PMn!P!Q!$v!Q!R!Er!R![!G_![!]!Nc!]!^!N{!^!_# c!_!`#!`!`!a##d!a!b#%s!b!c#'h!c!}9g!}#O#(O#O#P%Z#P#Q#(f#Q#R#(|#R#S9g#S#T#)g#T#o#)}#o#p#,w#p#q#,|#q#r#-j#r#s#.S#s$f%Z$f$g%u$g#BY9g#BY#BZ#.j#BZ$IS9g$IS$I_#.j$I_$I|9g$I|$I}#1X$I}$JO#1X$JO$JT9g$JT$JU#.j$JU$KV9g$KV$KW#.j$KW&FU9g&FU&FV#.j&FV;'S9g;'S;=`<Z<%l?HT9g?HT?HU#.j?HUO9gW%`T$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZW%rP;=`<%l%Z7Z%|i$`W'g7ROX%ZXY%uYZ%ZZ[%u[p%Zpq%uq!^%Z!_#o%Z#p$f%Z$f$g%u$g#BY%Z#BY#BZ%u#BZ$IS%Z$IS$I_%u$I_$JT%Z$JT$JU%u$JU$KV%Z$KV$KW%u$KW&FU%Z&FU&FV%u&FV;'S%Z;'S;=`%o<%l?HT%Z?HT?HU%u?HUO%Z7Z'rT$`W'h7RO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&y(YU$`W!l&qO!^%Z!_!`(l!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t(sU#m&l$`WO!^%Z!_!`)V!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t)^T#m&l$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z1i)t]$`W]&ZOY)mYZ*mZr)mrs,js!^)m!^!_-S!_#O)m#O#P1q#P#o)m#o#p-S#p;'S)m;'S;=`7V<%lO)m,^*rX$`WOr*mrs+_s!^*m!^!_+u!_#o*m#o#p+u#p;'S*m;'S;=`,d<%lO*m,^+fT$Z,U$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,U+xTOr+urs,Xs;'S+u;'S;=`,^<%lO+u,U,^O$Z,U,U,aP;=`<%l+u,^,gP;=`<%l*m1i,sT$Z,U$`W]&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z1a-XX]&ZOY-SYZ+uZr-Srs-ts#O-S#O#P-{#P;'S-S;'S;=`1k<%lO-S1a-{O$Z,U]&Z1a.OUOr-Srs.bs;'S-S;'S;=`0y;=`<%l/R<%lO-S1a.iW$Z,U]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s<%lO/R&Z/WW]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s<%lO/R&Z/uO]&Z&Z/xRO;'S/R;'S;=`0R;=`O/R&Z0WX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l/R<%lO/R&Z0vP;=`<%l/R1a1OX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l-S<%lO/R1a1nP;=`<%l-S1i1vY$`WOr)mrs2fs!^)m!^!_-S!_#o)m#o#p-S#p;'S)m;'S;=`6e;=`<%l/R<%lO)m1i2o]$Z,U$`W]&ZOY3hYZ%ZZr3hrs4hs!^3h!^!_/R!_#O3h#O#P5O#P#o3h#o#p/R#p;'S3h;'S;=`6_<%lO3h&c3o]$`W]&ZOY3hYZ%ZZr3hrs4hs!^3h!^!_/R!_#O3h#O#P5O#P#o3h#o#p/R#p;'S3h;'S;=`6_<%lO3h&c4oT$`W]&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c5TW$`WO!^3h!^!_/R!_#o3h#o#p/R#p;'S3h;'S;=`5m;=`<%l/R<%lO3h&c5rX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l3h<%lO/R&c6bP;=`<%l3h1i6jX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l)m<%lO/R1i7YP;=`<%l)m#]7b]$`WOt%Ztu8Zu!^%Z!_!c%Z!c!}8Z!}#R%Z#R#S8Z#S#T%Z#T#o8Z#p$g%Z$g;'S8Z;'S;=`9a<%lO8Z#]8b_$`W'|#TOt%Ztu8Zu!Q%Z!Q![8Z![!^%Z!_!c%Z!c!}8Z!}#R%Z#R#S8Z#S#T%Z#T#o8Z#p$g%Z$g;'S8Z;'S;=`9a<%lO8Z#]9dP;=`<%l8Z,T9ra$`W's#S'j)s$SSOt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$g%Z$g;'S9g;'S;=`<Z<%lO9g[;Oa$`W$SSOt%Ztu:wu}%Z}!O:w!O!Q%Z!Q![:w![!^%Z!_!c%Z!c!}:w!}#R%Z#R#S:w#S#T%Z#T#o:w#p$g%Z$g;'S:w;'S;=`<T<%lO:w[<WP;=`<%l:w,T<^P;=`<%l9g&t<hU$`W#e&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t=RT$`W#w&lO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z(h=iW(V(`$`WOv%Zvw>Rw!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t>YU$`W#q&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z1i>s]$`W]&ZOY>lYZ?lZw>lwx,jx!^>l!^!_@|!_#O>l#O#PE_#P#o>l#o#p@|#p;'S>l;'S;=`J]<%lO>l,^?qX$`WOw?lwx+_x!^?l!^!_@^!_#o?l#o#p@^#p;'S?l;'S;=`@v<%lO?l,U@aTOw@^wx,Xx;'S@^;'S;=`@p<%lO@^,U@sP;=`<%l@^,^@yP;=`<%l?l1aARX]&ZOY@|YZ@^Zw@|wx-tx#O@|#O#PAn#P;'S@|;'S;=`EX<%lO@|1aAqUOw@|wxBTx;'S@|;'S;=`Dg;=`<%lBt<%lO@|1aB[W$Z,U]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da<%lOBt&ZByW]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da<%lOBt&ZCfRO;'SBt;'S;=`Co;=`OBt&ZCtX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%lBt<%lOBt&ZDdP;=`<%lBt1aDlX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%l@|<%lOBt1aE[P;=`<%l@|1iEdY$`WOw>lwxFSx!^>l!^!_@|!_#o>l#o#p@|#p;'S>l;'S;=`Ik;=`<%lBt<%lO>l1iF]]$Z,U$`W]&ZOYGUYZ%ZZwGUwx4hx!^GU!^!_Bt!_#OGU#O#PHU#P#oGU#o#pBt#p;'SGU;'S;=`Ie<%lOGU&cG]]$`W]&ZOYGUYZ%ZZwGUwx4hx!^GU!^!_Bt!_#OGU#O#PHU#P#oGU#o#pBt#p;'SGU;'S;=`Ie<%lOGU&cHZW$`WO!^GU!^!_Bt!_#oGU#o#pBt#p;'SGU;'S;=`Hs;=`<%lBt<%lOGU&cHxX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%lGU<%lOBt&cIhP;=`<%lGU1iIpX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%l>l<%lOBt1iJ`P;=`<%l>l,TJjT!f+{$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$PKQT!e#w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z)ZKjW$`W'k#e#f&lOz%Zz{LS{!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&tLZU$`W#c&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z*qLtU$`Wk*iO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z,TM_T!T+{$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,TMuX$`Wx(dO!O%Z!O!PNb!P!Q%Z!Q![! d![!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$oNgV$`WO!O%Z!O!PN|!P!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$o! TT!S$g$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c! k]$`Wl&ZO!Q%Z!Q![! d![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S! d#S#X%Z#X#Y!!d#Y#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!!i]$`WO{%Z{|!#b|}%Z}!O!#b!O!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!#gX$`WO!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!$ZX$`Wl&ZO!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z7Z!$}b$`W#d&lOY!&VYZ%ZZz!&Vz{!-n{!P!&V!P!Q!BV!Q!^!&V!^!_!(f!_!`!Ch!`!a!Dm!a!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!&^^$`W!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!'aa$`W!PPO!^%Z!_#Z%Z#Z#[!'Y#[#]%Z#]#^!'Y#^#a%Z#a#b!'Y#b#g%Z#g#h!'Y#h#i%Z#i#j!'Y#j#m%Z#m#n!'Y#n#o%Z#p;'S%Z;'S;=`%o<%lO%ZP!(kX!PPOY!(fZ!P!(f!P!Q!)W!Q!}!(f!}#O!)o#O#P!*n#P;'S!(f;'S;=`!*}<%lO!(fP!)]U!PP#Z#[!)W#]#^!)W#a#b!)W#g#h!)W#i#j!)W#m#n!)WP!)rVOY!)oZ#O!)o#O#P!*X#P#Q!(f#Q;'S!)o;'S;=`!*h<%lO!)oP!*[SOY!)oZ;'S!)o;'S;=`!*h<%lO!)oP!*kP;=`<%l!)oP!*qSOY!(fZ;'S!(f;'S;=`!*}<%lO!(fP!+QP;=`<%l!(fX!+Y[$`WOY!+TYZ%ZZ!^!+T!^!_!)o!_#O!+T#O#P!,O#P#Q!&V#Q#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+TX!,TX$`WOY!+TYZ%ZZ!^!+T!^!_!)o!_#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+TX!,sP;=`<%l!+TX!,{X$`WOY!&VYZ%ZZ!^!&V!^!_!(f!_#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!-kP;=`<%l!&V7Z!-u`$`W!PPOY!-nYZ!.wZz!-nz{!2U{!P!-n!P!Q!@m!Q!^!-n!^!_!4m!_!}!-n!}#O!;l#O#P!?o#P#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!.|X$`WOz!.wz{!/i{!^!.w!^!_!0w!_#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!/nZ$`WOz!.wz{!/i{!P!.w!P!Q!0a!Q!^!.w!^!_!0w!_#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!0hT$`WU7RO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z7R!0zTOz!0wz{!1Z{;'S!0w;'S;=`!1x<%lO!0w7R!1^VOz!0wz{!1Z{!P!0w!P!Q!1s!Q;'S!0w;'S;=`!1x<%lO!0w7R!1xOU7R7R!1{P;=`<%l!0w7Z!2RP;=`<%l!.w7Z!2]`$`W!PPOY!-nYZ!.wZz!-nz{!2U{!P!-n!P!Q!3_!Q!^!-n!^!_!4m!_!}!-n!}#O!;l#O#P!?o#P#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!3ha$`WU7R!PPO!^%Z!_#Z%Z#Z#[!'Y#[#]%Z#]#^!'Y#^#a%Z#a#b!'Y#b#g%Z#g#h!'Y#h#i%Z#i#j!'Y#j#m%Z#m#n!'Y#n#o%Z#p;'S%Z;'S;=`%o<%lO%Z7R!4r[!PPOY!4mYZ!0wZz!4mz{!5h{!P!4m!P!Q!:b!Q!}!4m!}#O!6|#O#P!9r#P;'S!4m;'S;=`!:[<%lO!4m7R!5m[!PPOY!4mYZ!0wZz!4mz{!5h{!P!4m!P!Q!6c!Q!}!4m!}#O!6|#O#P!9r#P;'S!4m;'S;=`!:[<%lO!4m7R!6jUU7R!PP#Z#[!)W#]#^!)W#a#b!)W#g#h!)W#i#j!)W#m#n!)W7R!7PYOY!6|YZ!0wZz!6|z{!7o{#O!6|#O#P!9S#P#Q!4m#Q;'S!6|;'S;=`!9l<%lO!6|7R!7r[OY!6|YZ!0wZz!6|z{!7o{!P!6|!P!Q!8h!Q#O!6|#O#P!9S#P#Q!4m#Q;'S!6|;'S;=`!9l<%lO!6|7R!8mVU7ROY!)oZ#O!)o#O#P!*X#P#Q!(f#Q;'S!)o;'S;=`!*h<%lO!)o7R!9VVOY!6|YZ!0wZz!6|z{!7o{;'S!6|;'S;=`!9l<%lO!6|7R!9oP;=`<%l!6|7R!9uVOY!4mYZ!0wZz!4mz{!5h{;'S!4m;'S;=`!:[<%lO!4m7R!:_P;=`<%l!4m7R!:ga!PPOz!0wz{!1Z{#Z!0w#Z#[!:b#[#]!0w#]#^!:b#^#a!0w#a#b!:b#b#g!0w#g#h!:b#h#i!0w#i#j!:b#j#m!0w#m#n!:b#n;'S!0w;'S;=`!1x<%lO!0w7Z!;q^$`WOY!;lYZ!.wZz!;lz{!<m{!^!;l!^!_!6|!_#O!;l#O#P!>q#P#Q!-n#Q#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!<r`$`WOY!;lYZ!.wZz!;lz{!<m{!P!;l!P!Q!=t!Q!^!;l!^!_!6|!_#O!;l#O#P!>q#P#Q!-n#Q#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!={[$`WU7ROY!+TYZ%ZZ!^!+T!^!_!)o!_#O!+T#O#P!,O#P#Q!&V#Q#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+T7Z!>vZ$`WOY!;lYZ!.wZz!;lz{!<m{!^!;l!^!_!6|!_#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!?lP;=`<%l!;l7Z!?tZ$`WOY!-nYZ!.wZz!-nz{!2U{!^!-n!^!_!4m!_#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!@jP;=`<%l!-n7Z!@te$`W!PPOz!.wz{!/i{!^!.w!^!_!0w!_#Z!.w#Z#[!@m#[#]!.w#]#^!@m#^#a!.w#a#b!@m#b#g!.w#g#h!@m#h#i!.w#i#j!@m#j#m!.w#m#n!@m#n#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!B^X$`WT7ROY!BVYZ%ZZ!^!BV!^!_!By!_#o!BV#o#p!By#p;'S!BV;'S;=`!Cb<%lO!BV7R!COST7ROY!ByZ;'S!By;'S;=`!C[<%lO!By7R!C_P;=`<%l!By7Z!CeP;=`<%l!BV&u!Cq^$`W#w&l!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&V]!Dv^$PS$`W!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&V&c!Eyf$`Wl&ZO!O%Z!O!P! d!P!Q%Z!Q![!G_![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S!G_#S#U%Z#U#V!IR#V#X%Z#X#Y!!d#Y#b%Z#b#c!Hk#c#d!Js#d#l%Z#l#m!L_#m#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Gfa$`Wl&ZO!O%Z!O!P! d!P!Q%Z!Q![!G_![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S!G_#S#X%Z#X#Y!!d#Y#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!HrT$`Wl&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!IWY$`WO!Q%Z!Q!R!Iv!R!S!Iv!S!^%Z!_#R%Z#R#S!Iv#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!I}[$`Wl&ZO!Q%Z!Q!R!Iv!R!S!Iv!S!^%Z!_#R%Z#R#S!Iv#S#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!JxX$`WO!Q%Z!Q!Y!Ke!Y!^%Z!_#R%Z#R#S!Ke#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!KlZ$`Wl&ZO!Q%Z!Q!Y!Ke!Y!^%Z!_#R%Z#R#S!Ke#S#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Ld]$`WO!Q%Z!Q![!M]![!^%Z!_!c%Z!c!i!M]!i#R%Z#R#S!M]#S#T%Z#T#Z!M]#Z#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Md_$`Wl&ZO!Q%Z!Q![!M]![!^%Z!_!c%Z!c!i!M]!i#R%Z#R#S!M]#S#T%Z#T#Z!M]#Z#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m!NlT!_V$`W#u(^O!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z!P# ST_w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z6i# nR'n$Y!c(O$Q,_(ZP!P!Q# w!^!_# |!_!`#!ZW# |O$bW&l#!RP#g&l!_!`#!U&l#!ZO#w&l&l#!`O#h&l(m#!gV#T(e$`WO!^%Z!_!`(l!`!a#!|!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&u##TT#`&m$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m##oVe!s#h&l$]S$`WO!^%Z!_!`#$U!`!a#$l!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#$]T#h&l$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#$sV#g&l$`WO!^%Z!_!`<z!`!a#%Y!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#%aU#g&l$`WO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m#%zX'}&q$`WO!O%Z!O!P#&g!P!^%Z!_!a%Z!a!b#&}!b#o%Z#p;'S%Z;'S;=`%o<%lO%Z(i#&nTy(a$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#'UU$`W#r&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z#_#'oT!u#V$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,P#(VT{+w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$P#(mT!Q#w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#)TU#o&l$`WO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z){#)nT$`W'r)sO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,T#*Ya$`W's#S'j)s$USOt%Ztu#)}u}%Z}!O#+_!O!Q%Z!Q![#)}![!^%Z!_!c%Z!c!}#)}!}#R%Z#R#S#)}#S#T%Z#T#o#)}#p$g%Z$g;'S#)};'S;=`#,q<%lO#)}[#+fa$`W$USOt%Ztu#+_u}%Z}!O#+_!O!Q%Z!Q![#+_![!^%Z!_!c%Z!c!}#+_!}#R%Z#R#S#+_#S#T%Z#T#o#+_#p$g%Z$g;'S#+_;'S;=`#,k<%lO#+_[#,nP;=`<%l#+_,T#,tP;=`<%l#)}~#,|O!V~(h#-TV(U(`$`WO!^%Z!_!`<z!`#o%Z#p#q#&}#q;'S%Z;'S;=`%o<%lO%Z(}#-sT!U(soQ$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZX#.ZT!mP$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z7Z#.wt$`W'g7R's#S'j)s$SSOX%ZXY%uYZ%ZZ[%u[p%Zpq%uqt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$f%Z$f$g%u$g#BY9g#BY#BZ#.j#BZ$IS9g$IS$I_#.j$I_$JT9g$JT$JU#.j$JU$KV9g$KV$KW#.j$KW&FU9g&FU&FV#.j&FV;'S9g;'S;=`<Z<%l?HT9g?HT?HU#.j?HUO9g7Z#1fa$`W'h7R's#S'j)s$SSOt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$g%Z$g;'S9g;'S;=`<Z<%lO9g",tokenizers:[PS,CS,QS,_S,0,1,2,3,4,5,6,7,8,9,kS],topRules:{Script:[0,7],SingleExpression:[1,263]},dialects:{jsx:13404,ts:13406},dynamicPrecedences:{159:1,187:1},specialized:[{term:302,get:t=>TS[t]||-1},{term:311,get:t=>$S[t]||-1},{term:65,get:t=>RS[t]||-1}],tokenPrec:13429}),AS=[nx("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),nx("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),nx("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),nx("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),nx("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),nx("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),nx("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),nx("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),nx("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),nx('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),nx('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],DS=new Mm,jS=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function qS(t){return(e,n)=>{let r=e.node.getChild("VariableDefinition");return r&&n(r,t),!0}}const XS=["FunctionDeclaration"],VS={FunctionDeclaration:qS("function"),ClassDeclaration:qS("class"),ClassExpression:()=>!0,EnumDeclaration:qS("constant"),TypeAliasDeclaration:qS("type"),NamespaceDeclaration:qS("namespace"),VariableDefinition(t,e){t.matchContext(XS)||e(t,"variable")},TypeDefinition(t,e){e(t,"type")},__proto__:null};function US(t,e){let n=DS.get(e);if(n)return n;let r=[],i=!0;function o(e,n){let i=t.sliceString(e.from,e.to);r.push({label:i,type:n})}return e.cursor(mm.IncludeAnonymous).iterate((e=>{if(i)i=!1;else if(e.name){let t=VS[e.name];if(t&&t(e,o)||jS.has(e.name))return!1}else if(e.to-e.from>8192){for(let n of US(t,e.node))r.push(n);return!1}})),DS.set(e,r),r}const ZS=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,IS=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function NS(t){let e=pO(t.state).resolveInner(t.pos,-1);if(IS.indexOf(e.name)>-1)return null;let n="VariableName"==e.name||e.to-e.from<20&&ZS.test(t.state.sliceDoc(e.from,e.to));if(!n&&!t.explicit)return null;let r=[];for(let n=e;n;n=n.parent)jS.has(n.name)&&(r=r.concat(US(t.state.doc,n)));return{options:r,from:n?e.from:t.pos,validFor:ZS}}const BS=dO.define({name:"javascript",parser:MS.configure({props:[$O.add({IfStatement:VO({except:/^\s*({|else\b)/}),TryStatement:VO({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:t=>t.baseIndent,SwitchBody:t=>{let e=t.textAfter,n=/^\s*\}/.test(e),r=/^\s*(case|default)\b/.test(e);return t.baseIndent+(n?0:r?1:2)*t.unit},Block:qO({closing:"}"}),ArrowFunction:t=>t.baseIndent+t.unit,"TemplateString BlockComment":()=>null,"Statement Property":VO({except:/^{/}),JSXElement(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},JSXEscape(t){let e=/\s*\}/.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"JSXOpenTag JSXSelfClosingTag":t=>t.column(t.node.from)+t.unit}),ZO.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":IO,BlockComment:t=>({from:t.from+2,to:t.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),zS=BS.configure({dialect:"ts"},"typescript"),WS=BS.configure({dialect:"jsx"}),LS=BS.configure({dialect:"jsx ts"},"typescript"),GS="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map((t=>({label:t,type:"keyword"})));function FS(t={}){let e=t.jsx?t.typescript?LS:WS:t.typescript?zS:BS;return new kO(e,[BS.data.of({autocomplete:(n=IS,r=hw(AS.concat(GS)),t=>{for(let e=pO(t.state).resolveInner(t.pos,-1);e;e=e.parent)if(n.indexOf(e.name)>-1)return null;return r(t)})}),BS.data.of({autocomplete:NS}),t.jsx?JS:[]]);var n,r}function YS(t,e,n=t.length){if(!e)return"";let r=e.getChild("JSXIdentifier");return r?t.sliceString(r.from,Math.min(r.to,n)):""}const HS="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),JS=yp.inputHandler.of(((t,e,n,r)=>{if((HS?t.composing:t.compositionStarted)||t.state.readOnly||e!=n||">"!=r&&"/"!=r||!BS.isActiveAt(t.state,e,-1))return!1;let{state:i}=t,o=i.changeByRange((t=>{var e,n,o;let s,{head:a}=t,l=pO(i).resolveInner(a,-1);if("JSXStartTag"==l.name&&(l=l.parent),">"==r&&"JSXFragmentTag"==l.name)return{range:Ec.cursor(a+1),changes:{from:a,insert:"><>"}};if(">"==r&&"JSXIdentifier"==l.name){if("JSXEndTag"!=(null===(n=null===(e=l.parent)||void 0===e?void 0:e.lastChild)||void 0===n?void 0:n.name)&&(s=YS(i.doc,l.parent,a)))return{range:Ec.cursor(a+1),changes:{from:a,insert:`></${s}>`}}}else if("/"==r&&"JSXFragmentTag"==l.name){let t=l.parent,e=null==t?void 0:t.parent;if(t.from==a-1&&"JSXEndTag"!=(null===(o=e.lastChild)||void 0===o?void 0:o.name)&&(s=YS(i.doc,null==e?void 0:e.firstChild,a))){let t=`/${s}>`;return{range:Ec.cursor(a+t.length),changes:{from:a,insert:t}}}}return{range:t}}));return!o.changes.empty&&(t.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)})),KS=Zm({String:lO.string,Number:lO.number,"True False":lO.bool,PropertyName:lO.propertyName,Null:lO.null,",":lO.separator,"[ ]":lO.squareBracket,"{ }":lO.brace}),tk=OS.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[KS],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),ek=()=>t=>{try{JSON.parse(t.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const n=function(t,e){let n;return(n=t.message.match(/at position (\d+)/))?Math.min(+n[1],e.length):(n=t.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+n[1]).from+ +n[2]-1,e.length):0}(e,t.state.doc);return[{from:n,message:e.message,severity:"error",to:n}]}return[]},nk=dO.define({name:"json",parser:tk.configure({props:[$O.add({Object:VO({except:/^\s*\}/}),Array:VO({except:/^\s*\]/})}),ZO.add({"Object Array":IO})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});let rk=null;const ik=({visible:n,value:r,lang:i,output:o,onCancel:a})=>{const l=e().createRef(),[c,u]=(0,t.useState)("");return(0,t.useEffect)((()=>{n&&(rk&&(rk.destroy(),rk=null),"js"===i?rk=new yp({doc:r,extensions:[Gx,FS()],root:l.current.parent,parent:l.current}):"json"===i&&(rk=new yp({doc:r,extensions:[Gx,new kO(nk)],parent:l.current}),rk.jsonParseLinter=ek))}),[n]),e().createElement(s.Modal,{size:"small",motion:!1,style:{width:"800px",height:"460px"},title:"代码编辑",lazyRender:!0,visible:n,maskClosable:!1,onCancel:a,onOk:()=>{rk&&o(rk.state.doc.toString())}},e().createElement("div",{ref:l,className:"editor-wrapper"}),c&&e().createElement(s.Banner,{className:"code-error-banner",fullMode:!1,type:"danger",bordered:!0,icon:null,closeIcon:null,description:c}))};var ok,sk,ak,lk=n(8784),ck=function(t,e){return ck=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},ck(t,e)},uk=(ok=function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return s[t];var n,o=String(t);return(n=r[o.toLowerCase()])?n:(n=i[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var o;if(o=r[e.toLowerCase()])return o===n;if(o=i[e.toLowerCase()])return o===n}else if("number"==typeof e)return e===n;return!1}};var r=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var s=e.names=e.title={};for(o in r)s[r[o]]=o;for(var a in i)r[a]=i[a]},ok(sk={exports:{}},sk.exports),sk.exports),hk=(uk.code,uk.codes,uk.aliases,uk.names),fk=(uk.title,{"+":"plus","left command":"meta","right command":"meta"}),dk={shift:1,ctrl:2,alt:3,meta:4};function pk(t,e){var n=(hk[t]||e||"").toLowerCase();for(var r in fk)n=n.replace(r,fk[r]);return n.replace(/\s/g,"")}function gk(t,e){void 0===e&&(e=pk(t.keyCode,t.key));var n=function(t){return[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"].filter(Boolean)}(t);return-1===n.indexOf(e)&&n.push(e),n.filter(Boolean)}function mk(t){var e=t.slice();return e.sort((function(t,e){return(dk[t]||5)-(dk[e]||5)})),e}var Ok=function(t){function e(e){void 0===e&&(e=window);var n=t.call(this)||this;return n.container=e,n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n.clear=function(){return n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n},n.keydownEvent=function(t){n.triggerEvent("keydown",t)},n.keyupEvent=function(t){n.triggerEvent("keyup",t)},n.blur=function(){n.clear(),n.trigger("blur")},we(e,"blur",n.blur),we(e,"keydown",n.keydownEvent),we(e,"keyup",n.keyupEvent),n}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ck(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return ak||(ak=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var t=this.container;this.clear(),this.off(),xe(t,"blur",this.blur),xe(t,"keydown",this.keydownEvent),xe(t,"keyup",this.keyupEvent)},n.keydown=function(t,e){return this.addEvent("keydown",t,e)},n.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},n.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},n.keyup=function(t,e){return this.addEvent("keyup",t,e)},n.addEvent=function(t,e,n){return Nt(e)?this.on("".concat(t,".").concat(mk(e).join(".")),n):Bt(e)?this.on("".concat(t,".").concat(e),n):this.on(t,e),this},n.removeEvent=function(t,e,n){return Nt(e)?this.off("".concat(t,".").concat(mk(e).join(".")),n):Bt(e)?this.off("".concat(t,".").concat(e),n):this.off(t,e),this},n.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=pk(e.keyCode,e.key),r={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,r),this.trigger("".concat(t,".").concat(n),r);var i=gk(e,n);i.length>1&&this.trigger("".concat(t,".").concat(i.join(".")),r)},e}(ar);const vk=Ok;var bk=function(t,e){return bk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},bk(t,e)};function yk(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}bk(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var wk=function(){return wk=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},wk.apply(this,arguments)};function xk(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Sk(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function kk(t,e){return document.elementFromPoint&&document.elementFromPoint(t,e)||null}function Ck(t,e,n){var r=t.tag,i=t.children,o=t.attributes,s=t.className,a=t.style,l=e||document.createElement(r);for(var c in o)l.setAttribute(c,o[c]);var u=l.children;if(i.forEach((function(t,e){Ck(t,u[e],l)})),s&&s.split(" ").forEach((function(t){ve(l,t)||be(l,t)})),a){var h=l.style;for(var c in a)h[c]=a[c]}return!e&&n&&n.appendChild(l),l}function Qk(t,e,n){t!==e&&n(t,e)}function _k(t,e,n){var r;void 0===n&&(n=t.data.boundArea);var i=t.distX,o=void 0===i?0:i,s=t.distY,a=void 0===s?0:s,l=t.data,c=l.startX,u=l.startY;if(e>0){var h=Math.sqrt((o*o+a*a)/(1+e*e));o=e*h*(o>=0?1:-1),a=(a>=0?1:-1)*h}var f=Math.abs(o),d=Math.abs(a);o=(o>=0?1:-1)*(f=(r=he([f,d],[0,0],[o<0?c-n.left:n.right-c,a<0?u-n.top:n.bottom-u],!!e))[0]),a=(a>=0?1:-1)*(d=r[1]);var p=c+Math.min(0,o),g=u+Math.min(0,a);return{left:p,top:g,right:p+f,bottom:g+d,width:f,height:d}}function Pk(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,i=e.width,o=e.height;return{pos1:[n,r],pos2:[n+i,r],pos3:[n,r+o],pos4:[n+i,r+o]}}function Ek(t,e,n){var r=Ln(t,e),i=r.list,o=r.prevList,s=r.added,a=r.removed,l=r.maintained;return Sk(Sk(Sk([],s.map((function(t){return i[t]})),!0),a.map((function(t){return o[t]})),!0),n?l.map((function(t){var e=t[1];return i[e]})):[],!0)}var Tk=Qr("\n:host {\n    position: fixed;\n    display: none;\n    border: 1px solid #4af;\n    background: rgba(68, 170, 255, 0.5);\n    pointer-events: none;\n    will-change: transform;\n    z-index: 100;\n}\n"),$k="selecto-selection ".concat(Tk.className),Rk=["boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd"],Mk=(Sk(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],Rk,!0),Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;n.selectedTargets=[],n.dragScroll=new dr,n._onDragStart=function(t,e){var r=t.data,i=t.clientX,o=t.clientY,s=t.inputEvent,a=n.options,l=a.selectFromInside,c=a.selectByClick,u=a.rootContainer,h=a.boundContainer,f=a.preventDragFromInside,d=void 0===f||f,p=a.clickBySelectEnd,g=a.dragCondition;if(!g||g(t)){r.data={},r.innerWidth=window.innerWidth,r.innerHeight=window.innerHeight,n.findSelectableTargets(r),r.startSelectedTargets=n.selectedTargets,r.scaleMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.containerX=0,r.containerY=0;var m={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(u){var O=n.container.getBoundingClientRect();r.containerX=O.left,r.containerY=O.top,r.scaleMatrix=function(t,e){void 0===e&&(e=document.body);for(var n=t,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];n&&(r=Mn(Vn(getComputedStyle(n).transform),r),n!==e);)n=n.parentElement;return(r=On(r,4))[12]=0,r[13]=0,r[14]=0,r}(n.container,u)}if(h){var v=It(h)&&"element"in h?wk({left:!0,top:!0,bottom:!0,right:!0},h):{element:h,left:!0,top:!0,bottom:!0,right:!0},b=v.element;if(b){var y=(Bt(b)?document.querySelector(b):!0===b?n.container:b).getBoundingClientRect();v.left&&(m.left=y.left),v.top&&(m.top=y.top),v.right&&(m.right=y.right),v.bottom&&(m.bottom=y.bottom)}}r.boundArea=m;var w={left:i,top:o,right:i,bottom:o,width:0,height:0},x=[];if(!l||c&&!p){var S=n._findElement(e||kk(i,o),r.selectableTargets);x=S?[S]:[]}var k=x.length>0,C=!l&&k;if(C&&!c)return t.stop(),!1;var Q=s.type,_="mousedown"===Q||"touchstart"===Q;if(!t.isClick&&_&&!n.emit("dragStart",wk(wk({},t),{data:r.data})))return t.stop(),!1;if(n.continueSelect?(x=Ek(n.selectedTargets,x,n.continueSelectWithoutDeselect),r.startPassedTargets=n.selectedTargets):r.startPassedTargets=[],n._select(x,w,t,!0),r.startX=i,r.startY=o,r.selectFlag=!1,r.preventDragFromInside=!1,s.target){var P=Un(r.scaleMatrix,[i-r.containerX,o-r.containerY]);n.target.style.cssText+="position: ".concat(u?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(P[0],"px, ").concat(P[1],"px)")}if(C&&c&&!p)s.preventDefault(),d&&(n._selectEnd(r.startSelectedTargets,r.startPassedTargets,w,t),r.preventDragFromInside=!0);else{r.selectFlag=!0,"touchstart"===Q&&s.preventDefault();var E=n.options.scrollOptions;E&&E.container&&n.dragScroll.dragStart(t,E),p&&(r.selectFlag=!1,t.preventDrag())}return!0}t.stop()},n._onDrag=function(t){if(t.data.selectFlag){var e=n.scrollOptions;if((null==e?void 0:e.container)&&n.dragScroll.drag(t,e))return}n._checkSelected(t)},n._onDragEnd=function(t){var e=t.data,r=t.inputEvent,i=_k(t,n.options.ratio),o=e.selectFlag;if(r&&n.emit("dragEnd",wk(wk({isDouble:!!t.isDouble,isClick:!!t.isClick,isDrag:!1,isSelect:o},t),{data:e.data,rect:i})),n.target.style.cssText+="display: none;",o)e.selectFlag=!1,n.dragScroll.dragEnd();else if(n.selectByClick&&n.clickBySelectEnd){var s=n._findElement(kk(t.clientX,t.clientY),e.selectableTargets);n._select(s?[s]:[],i,t)}e.preventDragFromInside||n._selectEnd(e.startSelectedTargets,e.startPassedTargets,i,t)},n._onKeyDown=function(t){var e=n.options,r=!1;if(!n._keydownContinueSelect){var i=n._sameCombiKey(t,e.toggleContinueSelect);n._keydownContinueSelect=i,r=i}n._keydownContinueSelectWithoutDeselection||(i=n._sameCombiKey(t,e.toggleContinueSelectWithoutDeselect),n._keydownContinueSelectWithoutDeselection=i,r=r||i),r&&n.emit("keydown",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection})},n._onKeyUp=function(t){var e=n.options,r=!1;if(n._keydownContinueSelect){var i=n._sameCombiKey(t,e.toggleContinueSelect,!0);n._keydownContinueSelect=!i,r=i}n._keydownContinueSelectWithoutDeselection&&(i=n._sameCombiKey(t,e.toggleContinueSelectWithoutDeselect,!0),n._keydownContinueSelectWithoutDeselection=!i,r=r||i),r&&n.emit("keyup",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection})},n._onBlur=function(){(n._keydownContinueSelect||n._keydownContinueSelectWithoutDeselection)&&(n._keydownContinueSelect=!1,n._keydownContinueSelectWithoutDeselection=!1,n.emit("keyup",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection}))},n._onDocumentSelectStart=function(t){if(n.gesto.isFlag()){var e=n.dragContainer;e===window&&(e=document.documentElement);var r=e instanceof Element?[e]:[].slice.call(e),i=t.target;r.some((function(e){if(e===i||e.contains(i))return t.preventDefault(),!0}))}},n.target=e.portalContainer;var r=e.container;n.options=wk({portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,getElementRect:Pk,cspNonce:"",ratio:0},e);var i=n.options.portalContainer;return i&&(r=i.parentElement),n.container=r||document.body,n.initElement(),n.initDragScroll(),n.setKeyController(),n}yk(e,t);var n=e.prototype;return n.setSelectedTargets=function(t){var e=this.selectedTargets,n=Ln(e,t),r=n.added,i=n.removed,o=n.prevList,s=n.list;return this.selectedTargets=t,{added:r.map((function(t){return s[t]})),removed:i.map((function(t){return o[t]})),beforeSelected:e,selected:t}},n.setSelectedTargetsByPoints=function(t,e){var n=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]),i=Math.max(t[0],e[0]),o=Math.max(t[1],e[1]),s={left:n,top:r,right:i,bottom:o,width:i-n,height:o-r},a={ignoreClick:!0};this.findSelectableTargets(a);var l=this.hitTest(s,a),c=this.setSelectedTargets(l);return wk(wk({},c),{rect:s})},n.selectTargetsByPoints=function(t,e){var n=new MouseEvent("mousedown",{clientX:t[0],clientY:t[1],cancelable:!0,bubbles:!0}),r=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),i=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),o=this.gesto;!1!==o.onDragStart(n)&&(o.onDrag(r),o.onDragEnd(i))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(t){return this.gesto.triggerDragStart(t),this},n.destroy=function(){this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),xe(document,"selectstart",this._onDocumentSelectStart),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(t){var e=this.getElementRect||Pk,n=e(t),r=[n.pos1,n.pos2,n.pos4,n.pos3];return e!==Pk?Hn(r,t.getBoundingClientRect()):r},n.getSelectableElements=function(){var t=[];return this.options.selectableTargets.forEach((function(e){It(e)?t.push(e):[].slice.call(document.querySelectorAll(e)).forEach((function(e){t.push(e)}))})),t},n.checkScroll=function(){if(this.gesto.isFlag()){var t=this.scrollOptions;(null==t?void 0:t.container)&&this.dragScroll.checkScroll(wk({inputEvent:this.gesto.getCurrentEvent()},t))}},n.findSelectableTargets=function(t){var e=this;void 0===t&&(t=this.gesto.getEventData());var n=this.getSelectableElements(),r=n.map((function(t){return e.getElementPoints(t)}));t.selectableTargets=n,t.selectablePoints=r,this._refreshGroups(t)},n.clickTarget=function(t,e){var n=function(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}return{clientX:t.clientX,clientY:t.clientY}}(t),r={data:{selectFlag:!1},clientX:n.clientX,clientY:n.clientY,inputEvent:t,isClick:!0,stop:function(){return!1}};return this._onDragStart(r,e)&&this._onDragEnd(r),this},n.setKeyController=function(){var t=this.options,e=t.keyContainer,n=t.toggleContinueSelect,r=t.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(n||r)&&(this.keycon=new vk(e||window),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setKeyEvent=function(){var t=this.options,e=t.toggleContinueSelect,n=t.toggleContinueSelectWithoutDeselect;!e&&!n||this.keycon||this.setKeyController()},n.setKeyContainer=function(t){var e=this,n=this.options;Qk(n.keyContainer,t,(function(){n.keyContainer=t,e.setKeyController()}))},n.getContinueSelect=function(){var t=this.options,e=t.continueSelect;return t.toggleContinueSelect&&this._keydownContinueSelect?!e:e},n.getContinueSelectWithoutDeselect=function(){var t=this.options,e=t.continueSelectWithoutDeselect;return t.toggleContinueSelectWithoutDeselect&&this._keydownContinueSelectWithoutDeselection?!e:e},n.setToggleContinueSelect=function(t){var e=this,n=this.options;Qk(n.toggleContinueSelect,t,(function(){n.toggleContinueSelect=t,e.setKeyEvent()}))},n.setToggleContinueSelectWithoutDeselect=function(t){var e=this,n=this.options;Qk(n.toggleContinueSelectWithoutDeselect,t,(function(){n.toggleContinueSelectWithoutDeselect=t,e.setKeyEvent()}))},n.setPreventDefault=function(t){this.gesto.options.preventDefault=t},n.setCheckInput=function(t){this.gesto.options.checkInput=t},n.initElement=function(){this.target=Ck(function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},o=i.className,s=void 0===o?"":o,a=i.style,l=void 0===a?{}:a,c=xk(i,["className","style"]);return{tag:t,className:s,style:l,attributes:c,children:n}}("div",{className:$k}),this.target,this.container);var t=this.target,e=this.options,n=e.dragContainer,r=e.checkInput,i=e.preventDefault,o=e.preventClickEventOnDragStart,s=e.preventClickEventOnDrag,a=e.preventClickEventByCondition,l=e.preventRightClick,c=void 0===l||l;this.dragContainer="string"==typeof n?[].slice.call(document.querySelectorAll(n)):n||this.target.parentNode,this.gesto=new Cr(this.dragContainer,{checkWindowBlur:!0,container:window,checkInput:r,preventDefault:i,preventClickEventOnDragStart:o,preventClickEventOnDrag:s,preventClickEventByCondition:a,preventRightClick:c}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),we(document,"selectstart",this._onDocumentSelectStart),this.injectResult=Tk.inject(t,{nonce:this.options.cspNonce})},n.hitTest=function(t,e){var n=this.options,r=n.hitRate,i=n.selectByClick,o=t.left,s=t.top,a=t.right,l=t.bottom,c=e.innerGroups,u=e.innerWidth,h=e.innerHeight,f=e.clientX,d=e.clientY,p=e.ignoreClick,g=[[o,s],[a,s],[a,l],[o,l]],m=function(t){var e=!p&&Kn([f,d],t);if(i&&e)return!0;var n=ir(g,t);if(!n.length)return!1;var o=Yn(n),s=Yn(t),a=Kt("".concat(r));return"px"===a.unit?o>=a.value:ce(Math.round(o/s*100),0,100)>=Math.min(100,a.value)};if(!c){var O=e.selectableTargets,v=e.selectablePoints;return O.filter((function(t,e){return m(v[e])}))}for(var b=[],y=Math.floor(o/u),w=Math.floor(a/u),x=Math.floor(s/h),S=Math.floor(l/h),k=y;k<=w;++k){var C=c[k];if(C)for(var Q=function(t){var e=C[t];if(!e)return"continue";var n=e.points,r=e.targets;n.forEach((function(t,e){m(t)&&b.push(r[e])}))},_=x;_<=S;++_)Q(_)}return function(t){if("undefined"==typeof Map)return t.filter((function(e,n){return t.indexOf(e)===n}));var e=new Map;return t.filter((function(t){return!e.has(t)&&(e.set(t,!0),!0)}))}(b)},n.initDragScroll=function(){var t=this;this.dragScroll.on("scroll",(function(e){var n=e.container,r=e.direction;t.emit("scroll",{container:n,direction:r})})).on("move",(function(e){var n=e.offsetX,r=e.offsetY,i=e.inputEvent,o=t.gesto;if(o&&o.isFlag()){var s=t.gesto.getEventData(),a=s.boundArea;s.startX-=n,s.startY-=r,s.selectablePoints.forEach((function(t){t.forEach((function(t){t[0]-=n,t[1]-=r}))})),t._refreshGroups(s),a.left-=n,a.right-=n,a.top-=r,a.bottom-=r,t.gesto.scrollBy(n,r,i.inputEvent,!1),t._checkSelected(t.gesto.getCurrentEvent())}}))},n._select=function(t,e,n,r){var i=n.inputEvent,o=n.data,s=this.setSelectedTargets(t);r&&this.emit("selectStart",wk(wk({},s),{rect:e,inputEvent:i,data:o.data})),(s.added.length||s.removed.length)&&this.emit("select",wk(wk({},s),{rect:e,inputEvent:i,data:o.data}))},n._selectEnd=function(t,e,n,r){var i=r.inputEvent,o=r.isDouble,s=r.data,a=Ln(t,this.selectedTargets),l=a.added,c=a.removed,u=a.prevList,h=a.list,f=Ln(e,this.selectedTargets),d=f.added,p=f.removed,g=f.prevList,m=f.list,O=i&&i.type,v="mousedown"===O||"touchstart"===O;this.emit("selectEnd",{startSelected:t,beforeSelected:e,selected:this.selectedTargets,added:l.map((function(t){return h[t]})),removed:c.map((function(t){return u[t]})),afterAdded:d.map((function(t){return m[t]})),afterRemoved:p.map((function(t){return g[t]})),isDragStart:v,isClick:!!r.isClick,isDouble:!!o,rect:n,inputEvent:i,data:s.data})},n._checkSelected=function(t,e){void 0===e&&(e=_k(t,this.options.ratio));var n=t.data,r=e.top,i=e.left,o=e.width,s=e.height,a=n.selectFlag,l=n.containerX,c=n.containerY,u=n.scaleMatrix,h=Un(u,[i-l,r-c]),f=Un(u,[o,s]),d=[];if(a){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(h[0],"px, ").concat(h[1],"px);")+"width:".concat(f[0],"px;height:").concat(f[1],"px;");var p=this.hitTest(e,n);d=Ek(n.startPassedTargets,p,this.continueSelect&&this.continueSelectWithoutDeselect)}if(!1===this.emit("drag",wk(wk({},t),{data:n.data,isSelect:a,rect:e})))return this.target.style.cssText+="display: none;",void t.stop();a&&this._select(d,e,t)},n._sameCombiKey=function(t,e,n){if(!e)return!1;var r=gk(t.inputEvent,t.key),i=[].concat(e),o=Nt(i[0])?i:[i];if(n){var s=t.key;return o.some((function(t){return t.some((function(t){return t===s}))}))}return o.some((function(t){return t.every((function(t){return r.indexOf(t)>-1}))}))},n._findElement=function(t,e){for(var n=t;n&&!(e.indexOf(n)>-1);)n=n.parentElement;return n},n._refreshGroups=function(t){var e=t.innerWidth,n=t.innerHeight;if(e&&n){var r=t.selectableTargets,i=t.selectablePoints,o={};i.forEach((function(t,i){var s=1/0,a=-1/0,l=1/0,c=-1/0;t.forEach((function(t){var r=Math.floor(t[0]/e),i=Math.floor(t[1]/n);s=Math.min(r,s),a=Math.max(r,a),l=Math.min(i,l),c=Math.max(i,c)}));for(var u=s;u<=a;++u)for(var h=l;h<=c;++h){o[u]=o[u]||{},o[u][h]=o[u][h]||{points:[],targets:[]};var f=o[u][h],d=f.targets,p=f.points;d.push(r[i]),p.push(t)}})),t.innerGroups=o}else t.innerGroups=null},e=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([Qt(Rk,(function(t,e){var n={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},r=te("get ".concat(e));t[r]?n.get=function(){return this[r]()}:n.get=function(){return this.options[e]};var i=te("set ".concat(e));t[i]?n.set=function(t){this[i](t)}:n.set=function(t){this.options[e]=t},Object.defineProperty(t,e,n)}))],e),e}(ar)),Ak=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yk(e,t),e}(Mk);const Dk=Ak;var jk=n(2378),qk={};qk.styleTagTransform=Y(),qk.setAttributes=W(),qk.insert=B().bind(null,"head"),qk.domAPI=I(),qk.insertStyleElement=G(),U()(jk.Z,qk),jk.Z&&jk.Z.locals&&jk.Z.locals;var Xk=n(3345),Vk=n.n(Xk);class Uk{constructor({ridge:t,workspaceEl:e,viewPortEl:n,zoomable:r}){this.workspaceEl=e,this.viewPortEl=n,this.zoomable=r,this.ridge=t,this.selectorDropableTarget=[".ridge-element.container","slot"],this.init()}init(){this.initSelecto(),this.initMoveable(),this.initComponentDrop(),this.initKeyBind(),this.ridge.on(kl,(t=>{"outline"===t.from&&this.selectElements([t.element])}))}disable(){this.selecto.destroy(),this.moveable.destroy(),this.workspaceMovable&&this.workspaceMovable.destroy()}setPageManager(t){this.pageManager=t}setViewPort(t,e){this.viewPortEl.style.width=t+"px",this.viewPortEl.style.height=e+"px",this.fitToCenter()}fitToCenter(){if(this.zoomable){const t=this.workspaceEl.getBoundingClientRect(),e=this.viewPortEl.getBoundingClientRect(),n=function(t,e){if(t.width<e.width&&t.height<e.height)return t;const n={};return t.width/t.height>e.width/e.height?(n.fitTo="width",n.width=parseInt(e.width),n.height=Math.floor(t.height*(e.width/t.width))):(n.fitTo="height",n.width=Math.floor(t.width*(e.height/t.height)),n.height=parseInt(e.height)),n}(e,t);this.viewPortEl.style.transform=`translate(${(t.width-n.width)/2}px, ${(t.height-n.height)/2}px) scale(${n.width/e.width})`,this.viewPortEl.style.transformOrigin="center"}}setZoom(t){}setWorkSpaceMovable(){this.workspaceMovable=new Ol(document.body,{className:"workspace-movable",target:this.viewPortEl,dimensionViewable:!0,deleteButtonViewable:!1,container:document.body,snappable:!1,snapGap:!1,isDisplayInnerSnapDigit:!1,draggable:!0,resizable:!0,scalable:!1,rotatable:!1,warpable:!1,pinchable:!1,origin:!0,keepRatio:!1,edge:!1,throttleDrag:0,throttleResize:1,throttleScale:0,throttleRotate:0,clipTargetBounds:!0}),this.workspaceMovable.on("drag",(t=>{t.inputEvent.ctrlKey&&(t.target.style.transform=t.transform)}))}initMoveable(){const t=this;this.moveable=new Ol(document.body,{target:[],dimensionViewable:!0,deleteButtonViewable:!1,container:document.body,snappable:!0,snapGap:!1,isDisplayInnerSnapDigit:!1,draggable:!0,resizable:!0,scalable:!0,rotatable:!1,warpable:!0,pinchable:!0,origin:!0,keepRatio:!1,edge:!1,throttleDrag:0,throttleResize:1,throttleScale:0,throttleRotate:0,clipArea:!0,clipVerticalGuidelines:[0,"50%","100%"],clipHorizontalGuidelines:[0,"50%","100%"],clipTargetBounds:!0}),this.moveable.on("dragStart",(e=>{t.moveable.elementGuidelines=this.guidelines})),this.moveable.on("drag",(e=>{e.target.style.transform=e.transform,t.checkDropTargetStatus(e),t.onm&&t.onm(e.target)})),this.moveable.on("dragEnd",(e=>{const n=e.target.getBoundingClientRect();t.onElementDragEnd(e.target,n.left+n.width/2,n.top+n.height/2),t.ridge.debouncedSaveUpdatePage()})),this.moveable.on("resize",(({target:t,width:e,height:n,drag:r,delta:i,transform:o})=>{const s={};o.match(/[0-9.]+/g),s.x=r.translate[0],s.y=r.translate[1],i[0]&&(s.width=e),i[1]&&(s.height=n),t.elementWrapper.setStyle(s)})),this.moveable.on("resizeEnd",(({target:e,width:n,height:r,delta:i,transform:o})=>{this.selectElements([e]),t.ridge.debouncedSaveUpdatePage()})),this.moveable.on("dragGroup",(({events:e})=>{e.forEach((({target:e,transform:n})=>{e.elementWrapper.config.parent||(e.style.transform=n,t.ridge.debouncedSaveUpdatePage())}))})),this.moveable.on("resizeGroup",(({events:t})=>{t.forEach((({target:t,width:e,height:n,delta:r,transform:i})=>{t.style.transform=i,r[0]&&(t.style.width=`${e}px`),r[1]&&(t.style.height=`${n}px`)}))}))}initSelecto(){this.selecto=new Dk({rootContainer:null,dragContainer:this.workspaceEl,selectableTargets:[".ridge-element"],selectByClick:!0,selectFromInside:!1,continueSelect:!1,toggleContinueSelect:"shift",preventDefault:!0,keyContainer:window,hitRate:0}),this.selecto.on("dragStart",(t=>{const e=t.inputEvent,n=e.target;(n.className.indexOf("moveable-area")>-1||n.className.indexOf("moveable-control")>-1)&&t.stop();const r=n.closest(".ridge-element");r&&(this.moveable.target=r,this.guidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll(".ridge-element")).filter((t=>t!==r))],this.moveable.elementGuidelines=this.guidelines,this.moveable.dragStart(e),this.selectElements([r]),t.inputEvent&&t.inputEvent.stopPropagation(),t.inputEvent&&t.inputEvent.preventDefault(),t.stop()),e.ctrlKey&&t.stop()})),this.selecto.on("selectEnd",(({isDragStart:t,selected:e,inputEvent:n,rect:r})=>{t&&n.preventDefault(),this.moveable.elementGuidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll(".ridge-element")).filter((t=>-1===e.indexOf(t)))],this.guidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll('.ridge-element[snappable="true"]')).filter((t=>-1===e.indexOf(t)))],this.selectElements(e)}))}updateMovable(){this.moveable.updateTarget()}initComponentDrop(){this.workspaceEl.addEventListener("dragover",(t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"})),this.workspaceEl.addEventListener("drop",(t=>{this.workspaceDrop(t)}))}initKeyBind(){Vk().bind("del",(()=>{if(this.selected){for(const t of this.selected)this.pageManager.removeElement(t.elementWrapper.id);this.selectElements([])}})),Vk().bind("ctrl+s",(()=>(this.ridge.saveCurrentPage(),!1)))}checkDropTargetStatus({target:t,clientX:e,clientY:n}){this.getDroppableTarget(t,{x:e,y:n})}onElementDragEnd(t,e,n){const r=this.getDroppableTarget(t,{x:e,y:n}),i=t.elementWrapper,o=i.config.parent?this.pageManager.getElement(i.config.parent):null,s=r?r.elementWrapper:null;if(null!=o||null!=s){if(o===s&&null!=s)s.invoke("updateChild",[t]),s.config.props.children=s.invoke("getChildren");else if(o&&null==s)this.putElementToRoot(t,e,n),this.pageManager.detachChildElement(o,i.id);else if(null==o&&s){const t="SLOT"===r.tagName?r.getAttribute("name")||"slot":null;this.pageManager.attachToParent(s,i,t)}else if(o!==s){const t="SLOT"===r.tagName?r.getAttribute("name")||"slot":null;this.pageManager.attachToParent(s,i,t),this.pageManager.detachChildElement(o,i.id)}i.config.parent=s?s.id:null,s&&s.removeStatus("drag-over",r),this.ridge.emit(_l,{sourceElement:i,sourceParentElement:o,targetParentElement:s,elements:this.pageManager.getPageElements()}),this.selectElements([t]),this.moveable.updateTarget()}else this.putElementToRoot(t,e,n)}putElementToRoot(t,e,n){this.viewPortEl.appendChild(t);const r=this.viewPortEl.getBoundingClientRect(),i=t.getBoundingClientRect();t.elementWrapper.setStyle({position:"absolute",x:e-r.x-i.width/2,y:n-r.y-i.height/2}),this.moveable.updateTarget()}selectElements(t,e){this.moveable.target=t,!e&&t.length<=1&&this.ridge.emit(kl,{from:"workspace",element:t[0]}),this.selected=t}workspaceDrop(t){t.preventDefault();const e=t.dataTransfer.getData("text/plain"),n=JSON.parse(e),r=document.createElement("div"),i=this.pageManager.createElement(n);i.mount(r),this.onElementDragEnd(r,t.pageX,t.pageY),this.ridge.emit("elementCreated",[i]),this.ridge.saveCurrentPage()}onNodeResize(t){this.onr=t}onNodeMove(t){this.onm=t}getDroppableTarget(t,e){let n=[];for(const t of this.selectorDropableTarget)n=n.concat(Array.from(document.querySelectorAll(t)));const r=Array.from(n).filter((n=>{if(t.contains(n))return!1;const{x:r,y:i,width:o,height:s}=n.getBoundingClientRect();return e.x>r&&e.x<r+o&&e.y>i&&e.y<i+s&&n!==t&&n.closest("[ridge-id]")!==t}));let i=null;if(1===r.length)i=r[0];else if(r.length>1){const t=r.sort(((t,e)=>t.contains(e)?1:e.contains(t)?-1:t.style.zIndex>e.style.zIndex?1:-1));i=t[0]}return n.forEach((t=>{t!==i?t.elementWrapper.removeStatus("drag-over",t):t.elementWrapper.setStatus("drag-over",t)})),i}}var Zk=n(6668),Ik=n.n(Zk);const Nk={},Bk=t=>"undefined"!=typeof self&&self&&t in self?self:"undefined"!=typeof window&&window&&t in window?window:void 0!==n.g&&n.g&&t in n.g?n.g:"undefined"!=typeof globalThis&&globalThis?globalThis:void 0,zk=["Headers","Request","Response","ReadableStream","fetch","AbortController","FormData"];for(const t of zk)Object.defineProperty(Nk,t,{get(){const e=Bk(t),n=e&&e[t];return"function"==typeof n?n.bind(e):n}});const Wk=t=>null!==t&&"object"==typeof t,Lk="function"==typeof Nk.AbortController,Gk="function"==typeof Nk.ReadableStream,Fk="function"==typeof Nk.FormData,Yk=(t,e)=>{const n=new Nk.Headers(t||{}),r=e instanceof Nk.Headers,i=new Nk.Headers(e||{});for(const[t,e]of i)r&&"undefined"===e||void 0===e?n.delete(t):n.set(t,e);return n},Hk=(...t)=>{let e={},n={};for(const r of t){if(Array.isArray(r))Array.isArray(e)||(e=[]),e=[...e,...r];else if(Wk(r)){for(let[t,n]of Object.entries(r))Wk(n)&&Reflect.has(e,t)&&(n=Hk(e[t],n)),e={...e,[t]:n};Wk(r.headers)&&(n=Yk(n,r.headers))}e.headers=n}return e},Jk=["get","post","put","patch","head","delete"],Kk={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},tC=[413,429,503],eC=Symbol("stop");class nC extends Error{constructor(t){super(t.statusText||String(0===t.status||t.status?t.status:"Unknown response error")),this.name="HTTPError",this.response=t}}class rC extends Error{constructor(t){super("Request timed out"),this.name="TimeoutError",this.request=t}}const iC=t=>new Promise((e=>setTimeout(e,t))),oC=t=>Jk.includes(t)?t.toUpperCase():t,sC={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:tC},aC=(t={})=>{if("number"==typeof t)return{...sC,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...sC,...t,afterStatusCodes:tC}},lC=2147483647;class cC{constructor(t,e={}){if(this._retryCount=0,this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:Yk(this._input.headers,e.headers),hooks:Hk({beforeRequest:[],beforeRetry:[],afterResponse:[]},e.hooks),method:oC(e.method||this._input.method),prefixUrl:String(e.prefixUrl||""),retry:aC(e.retry),throwHttpErrors:!1!==e.throwHttpErrors,timeout:void 0===e.timeout?1e4:e.timeout,fetch:e.fetch||Nk.fetch},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof Nk.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(Lk&&(this.abortController=new Nk.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",(()=>{this.abortController.abort()})),this._options.signal=this.abortController.signal),this.request=new Nk.Request(this._input,this._options),this._options.searchParams){const t="?"+new URLSearchParams(this._options.searchParams).toString(),e=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);!(Fk&&this._options.body instanceof Nk.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new Nk.Request(new Nk.Request(e,this.request),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type","application/json"),this.request=new Nk.Request(this.request,{body:this._options.body}));const n=async()=>{if(this._options.timeout>lC)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await iC(1);let t=await this._fetch();for(const e of this._options.hooks.afterResponse){const n=await e(this.request,this._options,this._decorateResponse(t.clone()));n instanceof Nk.Response&&(t=n)}if(this._decorateResponse(t),!t.ok&&this._options.throwHttpErrors)throw new nC(t);if(this._options.onDownloadProgress){if("function"!=typeof this._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!Gk)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return this._stream(t.clone(),this._options.onDownloadProgress)}return t},r=this._options.retry.methods.includes(this.request.method.toLowerCase())?this._retry(n):n();for(const[t,n]of Object.entries(Kk))r[t]=async()=>{this.request.headers.set("accept",this.request.headers.get("accept")||n);const i=(await r).clone();if("json"===t){if(204===i.status)return"";if(e.parseJson)return e.parseJson(await i.text())}return i[t]()};return r}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof rC)){if(t instanceof nC){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const e=t.response.headers.get("Retry-After");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){let t=Number(e);return Number.isNaN(t)?t=Date.parse(e)-Date.now():t*=1e3,void 0!==this._options.retry.maxRetryAfter&&t>this._options.retry.maxRetryAfter?0:t}if(413===t.response.status)return 0}return.3*2**(this._retryCount-1)*1e3}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const n=Math.min(this._calculateRetryDelay(e),lC);if(0!==n&&this._retryCount>0){await iC(n);for(const t of this._options.hooks.beforeRetry)if(await t({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===eC)return;return this._retry(t)}if(this._options.throwHttpErrors)throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return!1===this._options.timeout?this._options.fetch(this.request.clone()):((t,e,n)=>new Promise(((r,i)=>{const o=setTimeout((()=>{e&&e.abort(),i(new rC(t))}),n.timeout);n.fetch(t).then(r).catch(i).then((()=>{clearTimeout(o)}))})))(this.request.clone(),this.abortController,this._options)}_stream(t,e){const n=Number(t.headers.get("content-length"))||0;let r=0;return new Nk.Response(new Nk.ReadableStream({start(i){const o=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:n},new Uint8Array),async function t(){const{done:s,value:a}=await o.read();s?i.close():(e&&(r+=a.byteLength,e({percent:0===n?0:r/n,transferredBytes:r,totalBytes:n},a)),i.enqueue(a),t())}()}}))}}const uC=(...t)=>{for(const e of t)if((!Wk(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return Hk({},...t)},hC=t=>{const e=(e,n)=>new cC(e,uC(t,n));for(const n of Jk)e[n]=(e,r)=>new cC(e,uC(t,r,{method:n}));return e.HTTPError=nC,e.TimeoutError=rC,e.create=t=>hC(uC(t)),e.extend=e=>hC(uC(t,e)),e.stop=eC,e},fC=hC();var dC=n(6051),pC=n.n(dC);const gC=o()("editor:ridge-loader"),mC=o()("important");class OC{setOption(t){}updateProps(t){}layout(t){}invoke(t,e){}on(t,e){}destroy(){}}const vC=[t=>window.antd?React.createElement(window.antd.ConfigProvider,{prefixCls:window.top.fdreConfig&&window.top.fdreConfig.antdPrefixCls||"ant"},[t]):t,...window.top.fdreConfig&&window.top.fdreConfig.reactContextProviders||[]];class bC extends OC{constructor(t,e,n={}){super(),this.el=e,this.JSXComponent=t,this.props=n,this.props.ref||(this.props.ref=React.createRef()),this.renderRef=this.props.ref,this.root=ReactDOM.createRoot(e),this.root.render(this.getRenderInstance())}getRenderInstance(){let t=React.createElement(this.JSXComponent,this.props);for(let e=0;e<vC.length;e++)t=vC[e](t);return t}on(t,e){Object.assign(this.props,{[t]:e}),ReactDOM.render(React.createElement(this.JSXComponent,this.props),this.el)}invoke(t,e){return this.renderRef&&this.renderRef.current&&this.renderRef.current[t]&&"function"==typeof this.renderRef.current[t]?this.renderRef.current[t](...e||[]):(console.error("无法调用无状态组件的方法!"),null)}setOption(t){this.updateProps(t)}updateProps(t){this.props=t,this.renderRef&&this.renderRef.current&&"function"==typeof this.renderRef.current.updateProps?this.renderRef.current.updateProps(t):ReactDOM.render(this.getRenderInstance(),this.el)}layout(t){ReactDOM.render(React.createElement(this.JSXComponent,t),this.el)}destroy(){ReactDOM.unmountComponentAtNode(this.el),this.renderRef&&(this.renderRef=null)}}class yC extends OC{constructor(t,e,n={}){super(),this.el=e,this.VannilaComponent=t,this.props=n,this.getRenderInstance().mount(e)}getRenderInstance(){return this.instance||(this.instance=new this.VannilaComponent(this.props)),this.instance}on(t,e){this.instance.on(t,e)}invoke(t,e){if(this.getRenderInstance()[t])return this.getRenderInstance()[t].apply(this.getRenderInstance(),e)}setOption(t){this.updateProps(t)}updateProps(t){this.getRenderInstance().update(t)}layout(t){this.getRenderInstance().layout(t)}destroy(){this.instance&&(this.instance.destroy&&this.instance.destroy(),this.instance=null)}}var wC=n(631),xC=n.n(wC),SC=n(1939),kC=n.n(SC);const CC=o()("rg:template"),QC=new Map;function _C(t,e,n){if(CC.enabled&&CC("模板计算",t,e),n&&Object.assign(e,n),"string"!=typeof t)return t;if(t.startsWith("${"))try{return new Function(...Object.keys(e),`return \`${t}\`;`)(...Object.values(e))}catch(t){return null}else{if(t.match(/{{([\s\S]+?)}}/g))return QC.get(t)||QC.set(t,xC()(t,{interpolate:/{{([\s\S]+?)}}/g})),QC.get(t)(e);try{const n=`{{JSON.stringify(${t})}}`,r=xC()(n,{interpolate:/{{([\s\S]+?)}}/g});return JSON.parse(r(e))}catch(n){try{return kC()(e,t)[0]}catch(e){return JSON.parse(t)}}}}const PC=o()("ridge:el-wrapper"),EC=class{constructor({config:t,pageManager:e}){this.config=t,this.id=t.id,this.componentPath=t.path,this.pageManager=e,this.properties={__pageManager:e,__elementWrapper:this},this.initialize(navigator)}isRoot(){return null==this.config.parent}initialize(){const{config:t}=this;this.scopeVariableValues={},this.componentPath=t.path,this.config.parent&&(this.parentWrapper=this.pageManager.getElement(this.config.parent))}async preload(){this.setStatus("Loading"),this.componentDefinition=await this.loadComponentDefinition(),this.componentDefinition?(this.initPropsAndEvents(),this.removeStatus("Loading"),this.preloaded=!0):this.setStatus("Error")}async loadComponentDefinition(){if(this.componentPath){const t=await this.pageManager.ridge.loadComponent(this.componentPath);return t&&t.component?t:(PC("加载图元失败: 未获取组件",this.componentPath),this.setStatus("加载失败"),null)}}initPropsAndEvents(){for(const t of this.componentDefinition.props||[])if(this.config.isNew&&null==this.config.props[t.name]&&null!=t.value&&(this.config.props[t.name]=t.value),"value"===t.name&&(this.properties.input=t=>{this.emit("input",t)}),!0===t.input){const e="set"+t.name.substr(0,1).toUpperCase()+t.name.substr(1);this.properties[e]=t=>{this.emit(e,t)}}for(const t of this.componentDefinition.events||[])this.properties[t.name]=(...e)=>{this.emit(t.name,...e)};this.childrenFcViews&&this.childrenFcViews.length&&(this.properties.children=this.childrenFcViews,this.childrenFcViews.forEach((t=>{t.setScopeVariables(this.scopeVariables)}))),delete this.config.isNew,this.editorFeatures=this.componentDefinition.editorFeatures??{}}mount(t){this.el=t,this.el.classList.add("ridge-element"),this.el.setAttribute("ridge-id",this.id),this.el.elementWrapper=this,this.forceUpdateStyle(),this.preloaded?this.renderer=this.createRenderer():this.preload().then((()=>{this.renderer=this.createRenderer()}))}unmount(){this.renderer&&(this.renderer.destroy(),this.renderer=null),this.el&&(this.el.parentElement.removeChild(this.el),this.el=null)}createRenderer(){return"vanilla"===this.componentDefinition.type?new yC(this.componentDefinition.component,this.el,this.getProperties()):new bC(this.componentDefinition.component,this.el,this.getProperties())}getProperties(){return Object.assign({},this.config.props,this.properties)}forceUpdateStyle(){this.el.style.width=this.config.style.width?this.config.style.width+"px":"",this.el.style.height=this.config.style.height?this.config.style.height+"px":"",this.el.style.position=this.config.style.position,"absolute"===this.config.style.position?this.el.style.transform=`translate(${this.config.style.x}px, ${this.config.style.y}px)`:this.el.style.transform="",Object.keys(this.config.styleEx).length&&this.instanceStyleEx.width&&(this.el.style.width=_C(this.config.styleEx.width,this.getVariableContext())+"px")}updateProperties(t){if(t&&Object.assign(this.properties,t),this.renderer)try{PC("updateProps",this.id,this.properties),this.renderer.updateProps(this.getProperties())}catch(t){PC("用属性渲染组件出错",t)}else PC("updateProps umounted",this.id)}setScopeVariableValues(t){this.scopeVariableValues=t}getScopeVariableValues(){return this.parentWrapper?Object.assign(this.parentWrapper.getScopeVariableValues(),this.scopeVariableValues):this.scopeVariableValues}getVariableContext(){return Object.assign({},this.pageManager.getVariableValues(),this.getScopeVariableValues())}forceUpdate(){for(const t of Object.keys(this.config.propEx))this.properties[t]=_C(this.config.propEx[t],this.getVariableContext());this.updateProperties()}invoke(t,e){return this.renderer.invoke(t,e)}emit(t,e){if("input"!==t||this.config.events[t]){if(this.config.events[t])for(const e of this.config.events[t])if("setvar"===e.name)try{const t=_C(e.value,this.getVariableContext());this.pageManager.updatePageVariableValue(e.target,t)}catch(t){PC("Event Action[setvar] Error",t)}}else this.config.propEx.value&&Object.keys(this.getVariableContext()).indexOf(this.config.propEx.value)>-1&&this.pageManager.updatePageVariableValue(this.config.propEx.value,e)}getCreateChildElement(t){}getName(){return this.el.dataset.name}getPropsValue(){return this.instancePropConfig}getPropsBinding(){return this.instancePropConfigEx}getStyleBinding(){return this.instanceStyleEx}getEventActionsConfig(){return this.eventActionsConfig}attachElEvent(t,e){t[e]=t=>{try{this.emit(e,this.componentConfig),t.stopPropagation()}catch(t){console.error("事件处理异常",t)}return!1}}};let TC=t=>crypto.getRandomValues(new Uint8Array(t)),$C=(t,e=21)=>((t,e,n)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*r*e/t.length);return(o=e)=>{let s="";for(;;){let e=n(i),a=i;for(;a--;)if(s+=t[e[a]&r]||"",s.length===o)return s}}})(t,e,TC);n(7429);var RC=n(5663),MC=n.n(RC);const AC=$C("1234567890abcdefghijklmnopqrstuvwxyz",10),DC=t=>{try{return JSON.parse(t)}catch(e){return t}},jC=class{constructor(t,e,n){this.pageConfig=t,this.ridge=e,this.ElementWrapper=n||EC,this.initialize()}getPageProperties(){return this.properties}getElement(t){return this.pageElements[t]}getPageElements(){return this.pageElements}initialize(){this.id=this.pageConfig.id,this.properties=this.pageConfig.properties,this.pageVariableValues={};for(const t of this.pageConfig.variables||[])MC()(t.name)&&(this.pageVariableValues[MC()(t.name)]=DC(t.value));this.pageElements={};for(const t of this.pageConfig.elements){const e=new this.ElementWrapper({pageManager:this,config:t});this.pageElements[e.id]=e}}async mount(t){for(const e of Object.values(this.pageElements).filter((t=>t.isRoot()))){const n=document.createElement("div");e.mount(n),t.appendChild(n)}t.style.width=this.properties.width+"px",t.style.height=this.properties.height+"px"}async preload(){const t=[];for(const e of this.pageElements)t.push(await e.preload());await Promise.allSettled(t)}updatePageVariableValue(t,e){this.pageVariableValues[t]=e,this.forceUpdate()}forceUpdate(){for(const t of Object.values(this.pageElements))t.forceUpdateStyle(),t.forceUpdate()}getVariableValues(){return this.pageVariableValues}},qC=$C("1234567890abcdefghijklmnopqrstuvwxyz",10);class XC extends EC{constructor({config:t,pageManager:e}){super({config:t,pageManager:e}),this.isEditor=!0,this.isContainer=!1,Object.assign(this.properties,{__editor:!0})}initPropsAndEvents(){super.initPropsAndEvents(),this.slotProps=[];for(const t of this.componentDefinition.props||[])"children"===t.type&&(this.isContainer=!0,this.el&&this.el.classList.add("container")),"slot"===t.type&&(this.isContainer=!0,this.slotProps.push(t))}mount(t){super.mount(t),this.isContainer&&t.classList.add("container")}setStyle(t){Object.assign(this.config.style,t),t.width&&(this.el.style.width=t.width+"px"),t.height&&(this.el.style.height=t.height+"px"),"absolute"===this.config.style.position?("absolute"!==this.el.style.position&&(this.el.style.position="absolute",this.el.style.left=0,this.el.style.top=0),this.el.style.transform=`translate(${this.config.style.x}px, ${this.config.style.y}px)`):(this.el.style.transform="",this.el.style.position="")}setPropsConfig(t,e){for(const t of Object.keys(e)){const[n,r]=t.split(".");"props"===n&&Object.assign(this.config.props,{[r]:e[t]}),"style"===n&&this.setStyle({[r]:e[t]}),"propsEx"===n&&Object.assign(this.config.propEx,{[r]:e[t]}),"styleEx"===n&&Object.assign(this.config.styleEx,{[r]:e[t]})}this.forceUpdateStyle(),this.forceUpdate()}setEventsConfig(t,e){Object.assign(this.config.events,t.event)}getStyle(){return this.config.style}getChildrenIds(){return this.config.props.children||[]}getSlotChildren(){const t=[];if(this.slotProps)for(const e of this.slotProps)this.config.props[e.name]&&t.push({prop:e,element:this.pageManager.getElement(this.config.props[e.name])});return t}setStatus(t,e){this.status!==t&&(this.status=t,this.addMaskLayer({el:e||this.el,name:t,className:"status-"+t,zIndex:-1}))}removeStatus(t,e){this.status===t&&(this.status=null,this.removeMaskLayer(t,e||this.el))}removeMaskLayer(t,e){e&&e.querySelector('[name="'+t+'"]')&&e.removeChild(e.querySelector('[name="'+t+'"]'))}addMaskLayer({el:t,name:e,zIndex:n,className:r,text:i,content:o}){if(!t)return;if(t.querySelector('[name="'+e+'"]'))return;const s=document.createElement("div");s.setAttribute("name",e),s.classList.add("layer"),s.style.position="absolute",s.style.left=0,s.style.right=0,s.style.top=0,s.style.bottom=0,r&&s.classList.add(r),n&&(s.style.zIndex=n),s.innerHTML=o||i||"",t.appendChild(s)}toJSON(){return this.config}}class VC extends jC{constructor(t,e){super(t,e,XC),this.pageVariableConfig=this.pageConfig.variables||[]}createElement(t){const e={title:t.title,id:qC(5),isNew:!0,path:t.componentPath,style:{position:"absolute",width:t.width??100,height:t.height??100},styleEx:{},props:{},propEx:{},events:[]},n=new XC({config:e,pageManager:this});return this.pageElements[n.id]=n,n}removeElement(t){const e=this.pageElements[t];if(e){for(const t of e.getChildrenIds())this.removeElement(t);for(const t of e.getSlotChildren())this.removeElement(t.element.id);e.config.parent&&this.detachChildElement(this.pageElements[e.config.parent],t),e.unmount(),delete this.pageElements[t]}}detachChildElement(t,e){let n=!1;for(const r of t.componentDefinition.props.filter((t=>"slot"===t.type)))t.config.props[r.name]===e&&(t.setPropsConfig(null,{["props."+r.name]:null}),n=!0);n||(t.config.props.children=t.invoke("getChildren"))}attachToParent(t,e,n){n?t.setPropsConfig(null,{["props."+n]:e.id}):(t.invoke("appendChild",[e.el]),t.config.props.children=t.invoke("getChildren"))}getPageJSON(){const t={id:this.id,properties:this.properties,variables:this.pageVariableConfig,elements:[]};for(const e of Object.values(this.pageElements))t.elements.push(e.toJSON());return t}updatePageProperties(t){this.properties=t}updateVariableConfig(t){this.pageVariableConfig=t,this.pageVariableValues={};for(const t of this.pageVariableConfig)MC()(t.name)&&(this.pageVariableValues[MC()(t.name)]=DC(t.value));this.forceUpdate()}getVariableConfig(){return this.pageVariableConfig}}var UC=n(927),ZC=n.n(UC);class IC{constructor(){ZC().config({baseStore:ZC().INDEXEDDB}),this.baseStore=ZC().createInstance({name:"pageStore"}),this.resourceStore=ZC().createInstance({name:"resources"}),this.pageStore=ZC().createInstance({name:"images"})}async addImage(t,e){await this.resourceStore.setItem(t,e)}async getImages(){const t=await this.resourceStore.keys(),e=[];for(const n of t)e.push({name:n,src:URL.createObjectURL(await this.resourceStore.getItem(n))});return e}async getRecentPage(){let t=await this.baseStore.getItem("pages");if(!t){const t=AC(10);await this.saveUpdatePage({id:t,title:"页面",parent:null,content:{id:t,properties:{title:"页面",type:"fixed",width:400,height:300},variables:[],elements:[]}})}t=await this.baseStore.getItem("pages");const e=t.sort(((t,e)=>t.updated-e.updated))[0];return{id:e.id,content:await this.baseStore.getItem("page."+e.id)}}async saveUpdatePage({id:t,title:e,parent:n,content:r}){let i=await this.baseStore.getItem("pages");i||(i=[]);let o=!1;const s=(new Date).getTime();i=i.map((r=>r.id===t?(o=!0,{id:t,title:e,updated:s,parent:n}):r)),o||i.push({id:t,title:e,updated:s,parent:n}),await this.baseStore.setItem("pages",i),await this.baseStore.setItem("page."+t,r)}async listPage(){let t=await this.baseStore.getItem("pages");return t||(t=[]),t}deletePage(t){}saveAppResource(t,e,n){}listAppResource(t){}}var NC=n(1439),BC={};BC.styleTagTransform=Y(),BC.setAttributes=W(),BC.insert=B().bind(null,"head"),BC.domAPI=I(),BC.insertStyleElement=G(),U()(NC.Z,BC),NC.Z&&NC.Z.locals&&NC.Z.locals;var zC=n(9103),WC=n.n(zC);function LC(){return LC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LC.apply(this,arguments)}const GC=o()("ridge:editor");class FC extends e().Component{constructor(t){super(t),this.workspaceRef=e().createRef(),this.viewPortRef=e().createRef(),this.rightPanelRef=e().createRef(),this.dataPanelRef=e().createRef(),this.addComponentRef=e().createRef(),this.state={variables:[],properties:{},componentPanelVisible:!0,propPanelVisible:!0,outlinePanelVisible:!0,pagesPanelVisible:!0,dataPanelVisible:!0,editorLang:null,editorVisible:!1,modeRun:!1,editorCode:""},this.debouncedSaveUpdatePage=(0,lk.debounce)(this.saveCurrentPage,5e3),this.currentId=null,this.initialize()}initialize(){this.ridge=new class{constructor(t){const e=t.baseUrl??"/npm_packages",n=t.unkpgUrl??e,r=t.debugUrl;this.loader=new class{constructor({baseUrl:t,unpkgUrl:e,debugUrl:n,externalOptions:r}){this.baseUrl=t??"",this.unpkgUrl=e??"http://unpkg.com",this.debugUrl=n,mC("RidgeLoader baseUrl: "+this.baseUrl),this.componentCache={},this.packageJSONCache={},this.packageNotInstalled=[],this.loadedFonts=[],window.fcExternalLoaded=[],this.debugPackageName=null,this.packageLoadingPromises={},this.externalOptions=r??{},window.top.ridgeConfig&&window.top.ridgeConfig.loaderExternalOptions&&Object.assign(this.externalOptions,window.top.ridgeConfig.loaderExternalOptions),this.scriptLoadingPromises={},this.eventCallbacks=[],this.scriptUrlLibName={},this.pelCacheByLibName={},this.componentLoading=new Map}async getDebugPackage(){if(void 0!==this.debugPackage)return this.debugPackage;if(this.debugUrl)try{this.debugPackage=await fC.get(this.debugUrl+"/package.json").json()}catch(t){this.debugPackage=null}else this.debugPackage=null;return this.debugPackage}setExternalOptions(t){this.externalOptions=t}setAppName(t){t&&(this.appName=t)}setProjectId(t){t&&(this.projectId=t)}setDebugUrl(t){this.debugUrl=t}setDebugPackageName(t){this.debugPackageName=t}getServePath(t){return t&&this.projectId?this.baseUrl+"/"+this.appName+"/"+this.projectId:this.appName?this.baseUrl+"/"+this.appName:this.baseUrl}getComponentUrl({packageName:t,path:e}){return this.debugPackage&&t===this.debugPackage.name?`${this.debugUrl}/${e}`:`${this.baseUrl}/${t}/${e}`}getPackageJSONUrl(t){return`${this.baseUrl}/${t}/package.json`}getComponentLibName({packageName:t,path:e}){return`/${t}/${e}`}async loadComponent(t){let e,n;if("object"==typeof t)e=t.packageName,n=t.path;else{const r=t.split("/");r[0].startsWith("@")?(e=r.splice(0,2).join("/"),n=r.join("/")):(e=r.splice(0,1).join("/"),n=r.join("/"))}const r=this.getComponentUrl({packageName:e,path:n}),i=this.getComponent(r);if(i)return i;if("loading"===this.componentLoading.get(r))return new Promise(((t,e)=>{this.on("component-ready",((e,n)=>{e===r&&t(n)})),this.on("component-fail",(e=>{e===r&&t(null)}))}));if("fail"===this.componentLoading.get(r))return null;this.componentLoading.set(r,"loading");try{const t=await this.doLoadComponent({packageName:e,path:n});return this.notifyComponentLoaded(r,t),this.componentCache[r]=t,t}catch(t){return this.setPelLoadFail(r),gC("组件加载异常",t),null}}async doLoadComponent({packageName:t,path:e}){await this.confirmPackageDependencies(t);const n=await this.loadComponentScript({packageName:t,path:e});if(!n)throw new Error;return await this.prepareComponent(n,{packageName:t,path:e}),n}async prepareComponent(t,{packageName:e,path:n}){if(t.packageName=e,t.path=n,t.requires&&t.requires.length&&await this.loadExternals(t.requires),t.icon&&/\.(jpg|gif|png|jpeg|svg)$/i.test(t.icon)&&(this.debugPackageName===e&&this.debugUrl?t.previewUrl=`${this.debugUrl}${t.icon}`:t.previewUrl=`/npm_packages/${e}/${t.icon}`),t.component){let e=t.component;"function"==typeof e&&"AsyncFunction"===e.constructor.name&&(e=(await e()).default)}else gC("组件 Component定义未加载到",t)}notifyComponentLoaded(t,e){this.componentLoading.set(t,"loaded");try{this.eventCallbacks.filter((t=>"component-ready"===t.eventName)).forEach((n=>{n.callback(t,e)}))}catch(t){}}setPelLoadFail(t){this.componentLoading.set(t,"fail");try{this.eventCallbacks.filter((t=>"component-fail"===t.eventName)).forEach((e=>{e.callback(t)}))}catch(t){}}on(t,e){this.eventCallbacks.push({eventName:t,callback:e})}async loadComponentScript({packageName:t,path:e}){const n=this.getComponentUrl({packageName:t,path:e}),r=this.getComponentLibName({packageName:t,path:e});return await this.loadScript(n),window[r]?window[r].default:null}getComponent(t){return this.componentCache[t]?this.componentCache[t]:null}async loadExternals(t){const e=Object.assign(Ik(),window.globalExternalConfig);for(const n of t){const t=e.externals.filter((t=>n===t.module))[0];if(t){if(t.root&&window[t.root])continue;t.dependencies&&await this.loadExternals(t.dependencies);const e=`${this.unpkgUrl}/${t.dist}`;if(t.style)if(null!=this.externalOptions[t.module]){if(Array.isArray(this.externalOptions[t.module]))try{for(const e of this.externalOptions[t.module])await this.loadScript(e)}catch(e){console.warn("加载应用定义的样式失败 地址是:"+this.externalOptions[t.module])}else if("string"==typeof this.externalOptions[t.module])try{await this.loadScript(this.externalOptions[t.module])}catch(e){console.warn("加载应用定义的样式失败 地址是:"+this.externalOptions[t.module])}}else"string"==typeof t.style&&await this.loadScript(`${this.unpkgUrl}/${t.style}`);this.scriptLoadingPromises[e]||(this.scriptLoadingPromises[e]=(async()=>{try{gC("加载第三方库:"+e),await pC()(e,{returnPromise:!0,before:function(t,e){e.crossOrigin=!0}})}catch(e){console.error("第三方库加载异常 ",`${t.module}`)}})()),await this.scriptLoadingPromises[e],window.fcExternalLoaded.push(t.module)}else gC("忽略库:"+n)}}async loadFont(t,e,n){if(e&&!(this.loadedFonts.indexOf(e)>-1)&&"default"!==e)try{const r=t?t+"/"+n:e;let i=this.getServePath()+"/npm_packages/"+(t?t+"/"+n:e);t||n||-1!==e.indexOf(".woff")||(await this.confirmPackageDependencies("@gw/web-font-assets"),this.packageJSONCache["@gw/web-font-assets"]?this.packageJSONCache["@gw/web-font-assets"].fonts[e]&&(i=this.getServePath()+"/npm_packages/@gw/web-font-assets/"+this.packageJSONCache["@gw/web-font-assets"].fonts[e].url):console.error("加载字体地址未找到",e));const o=new FontFace(r,`url(${i})`);await o.load(),document.fonts.add(o),this.loadedFonts.push(e)}catch(n){console.error("加载字体异常",e,t,n)}}async loadCss(t){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.getElementsByTagName("HEAD")[0].appendChild(e)}async loadScript(t){this.scriptLoadingPromises[t]||(this.scriptLoadingPromises[t]=(async()=>{try{gC("加载库:"+t),await pC()(t,{returnPromise:!0,before:function(t,e){e.crossOrigin=!0}})}catch(e){console.error("第三方库加载异常 ",`${t}`)}})()),await this.scriptLoadingPromises[t]}setPackageCache(t,e){this.packageJSONCache[t]=e}async reloadDebugCache(){for(const t of Object.keys(this.fcCache))if(t.startsWith("https://")&&(delete this.scriptLoadingPromises[t],await this.loadScript(t),window[this.scriptUrlLibName[t]])){const e=window[this.scriptUrlLibName[t]].default;await this.initFcp(e,this.pelCacheByLibName[this.scriptUrlLibName[t]]),this.fcCache[t]=e}}async getPackageJSON(t){if(this.packageJSONCache[t])return this.packageJSONCache[t];if(this.debugUrl){const e=await this.getDebugPackage();if(e&&e.name===t)return this.prefixPackageJSON(e,this.debugUrl),this.setPackageCache(e.name,e),e}const e=this.getPackageJSONUrl(t);try{const n=await fC.get(e).json();return this.prefixPackageJSON(n,this.baseUrl+"/"+t),this.setPackageCache(n),n}catch(e){console.error("NPM Package Not Loaded: ",t,e)}}prefixPackageJSON(t,e){t.icon&&(t.icon=`${e}/${t.icon}`);for(const n of t.components??[])n.icon&&(n.icon=`${e}/${n.icon}`)}async confirmPackageDependencies(t){const e=await this.getPackageJSON(t);e&&e.dependencies&&await this.loadExternals(Object.keys(e.dependencies))}}({baseUrl:e,debugUrl:r,unpkgUrl:n}),this.pageElementManagers={}}loadComponent(t){return this.loader.loadComponent(t)}createPageManager(t){return new jC(t,this)}getPageElementManager(t){return this.pageElementManagers[t]}registerMethod(t,e){this[t]=e}}({}),window.Ridge=this.ridge,this.ridge.nanobus=new(WC()),this.ridge.registerMethod("emit",this.ridge.nanobus.emit.bind(this.ridge.nanobus)),this.ridge.registerMethod("on",this.ridge.nanobus.on.bind(this.ridge.nanobus)),this.ridge.registerMethod("openCodeEditor",this.openCodeEditor.bind(this)),this.ridge.registerMethod("saveCurrentPage",this.saveCurrentPage.bind(this)),this.ridge.registerMethod("debouncedSaveUpdatePage",this.debouncedSaveUpdatePage.bind(this)),this.ridge.appService=new IC,this.ridge.appService.getRecentPage().then((({content:t})=>{this.loadPage(t)})),this.ridge.on(xl,(t=>{this.pageElementManager.updateVariableConfig(t),this.debouncedSaveUpdatePage()})),this.ridge.on(Sl,(t=>{this.pageElementManager.properties=t,this.debouncedSaveUpdatePage()})),this.ridge.on(Cl,(({el:t,values:e,field:n})=>{t.elementWrapper.setPropsConfig(e,n),this.workspaceControl.updateMovable()})),this.ridge.on(Ql,(({el:t,values:e})=>{t.elementWrapper.setEventsConfig(e)})),this.ridge.on("*",(()=>{this.debouncedSaveUpdatePage()}))}saveCurrentPage(){if(this.pageElementManager){const t=this.pageElementManager.getPageJSON();GC("Save Page",t),this.ridge.appService.saveUpdatePage({id:t.id,title:t.properties.title,content:t})}}loadPage(t){GC("loadPage",t),this.pageElementManager=new VC(t,this.ridge),this.workspaceControl.setPageManager(this.pageElementManager),this.pageElementManager.mount(this.viewPortRef.current),this.setState({variables:this.pageElementManager.getVariableConfig(),properties:this.pageElementManager.getPageProperties()}),this.ridge.emit(wl,{pageProperties:this.pageElementManager.getPageProperties(),pageVariables:this.pageElementManager.getVariableConfig(),elements:this.pageElementManager.getPageElements()}),this.workspaceControl.fitToCenter()}componentDidMount(){this.workspaceControl=new Uk({workspaceEl:this.workspaceRef.current,viewPortEl:this.viewPortRef.current,ridge:this.ridge,zoomable:!0}),this.workspaceControl.setWorkSpaceMovable()}render(){const{viewPortRef:t,rightPanelRef:n,dataPanelRef:r,workspaceRef:i,pageVariableConfigChange:o,state:s}=this,{componentPanelVisible:a,dataPanelVisible:l,propPanelVisible:c,outlinePanelVisible:u,pagesPanelVisible:h,modeRun:f,variables:d,editorLang:p,editorVisible:g,editorCode:m}=s;return e().createElement(e().Fragment,null,e().createElement(Fl,LC({},s,{toggleVisible:t=>{this.setState({[t]:!this.state[t]})},toggoleRunMode:this.toggoleRunMode.bind(this)})),e().createElement(Bl,{visible:!f&&a,onClose:()=>{this.setState({componentPanelVisible:!1})}}),e().createElement(Ll,{visible:!f&&u}),e().createElement(Xl,{title:"数据",variableChange:o.bind(this),variables:d,ref:r,visible:!f&&l,onClose:()=>{this.setState({dataPanelVisible:!1})}}),e().createElement($l,{ref:n,visible:!f&&c,onClose:()=>{this.setState({propPanelVisible:!1})}}),e().createElement(ik,{visible:g,onCancel:()=>{this.setState({editorVisible:!1})},value:m,lang:p,output:this.onCodeEditorCompleted.bind(this)}),e().createElement("div",{className:"workspace",ref:i},e().createElement("div",{ref:t,className:"viewport-container active"})))}openCodeEditor({lang:t,code:e,completed:n}){this.setState({editorVisible:!0,editorCode:e,editorLang:t}),this.codeEditComplete=n}onCodeEditorCompleted(t){this.setState({editorVisible:!1}),this.codeEditComplete&&this.codeEditComplete(t)}togglePanel(t){this.setState({[t]:!this.state[t]})}onNodeSelected(t){t?this.rightPanelRef.current?.elementSelected(t):this.rightPanelRef.current?.elementSelected(null)}pagePropertiesConfigChange(t){this.setState({properties:t}),this.pageElementManager.properties=t,this.debouncedSaveUpdatePage()}pageVariableConfigChange(t){this.setState({variables:t}),this.pageElementManager.updateVariableConfig(t),this.debouncedSaveUpdatePage()}toggoleRunMode(){this.setState({modeRun:!this.state.modeRun},(()=>{this.state.modeRun?this.workspaceControl.disable():this.workspaceControl.init()}))}zoomChange(t){t?(this.setState({zoom:t}),this.selectMove.setZoom(1/t)):this.fitToCenter()}}var YC=n(1171),HC={};HC.styleTagTransform=Y(),HC.setAttributes=W(),HC.insert=B().bind(null,"head"),HC.domAPI=I(),HC.insertStyleElement=G(),U()(YC.Z,HC),YC.Z&&YC.Z.locals&&YC.Z.locals;const JC=document.getElementById("root");JC&&(0,r.s)(JC).render(e().createElement(FC,null))})()})();