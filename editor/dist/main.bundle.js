/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{var t={6729:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||t,s),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,i,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var l,c,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,i),!0;case 5:return h.fn.call(h.context,e,r,i,o),!0;case 6:return h.fn.call(h.context,e,r,i,o,s),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];h.fn.apply(h.context,l)}else{var f,d=h.length;for(c=0;c<d;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),u){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,r);break;case 4:h[c].fn.call(h[c].context,e,r,i);break;default:if(!l)for(f=1,l=new Array(u-1);f<u;f++)l[f-1]=arguments[f];h[c].fn.apply(h[c].context,l)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,c=[],h=a.length;l<h;l++)(a[l].fn!==e||i&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},4551:(t,e,n)=>{const r=n(4151),i=n(6292)("db:nedb"),{nanoid:o}=n(1349);t.exports=class{constructor(t){this.filename=t,this.store=new r({filename:t,timestampData:!0,autoload:!0}),this.store.persistence.setAutocompactionInterval(144e5)}async compactDatafile(){await this.store.persistence.compactDatafile()}async insert(t){return i("insert",t),new Promise(((e,n)=>{this.store.insert(t,(function(t,r){t?n(t):e(r)}))}))}async update(t,e,n){return i("update",t,e),new Promise(((r,i)=>{let o=t;"string"==typeof t&&(o={_id:t}),this.store.update(o,e,n||{},(function(t,e){t?i(t):r(e)}))}))}async patch(t,e){return i("patch",t,e),this.update({_id:t},{$set:e})}async clean(){i("clean");const t=this.filename;return new Promise(((e,n)=>{this.store.remove({},{multi:!0},(function(r,i){r?n(r):fs.unlink(t,(()=>{e(i)}))}))}))}async remove(t){if(i("remove",t),"object"==typeof t){if(!Array.isArray(t))return this.doRemove(t);for(const e of t)await this.remove(e)}else if("string"==typeof t)return this.doRemove({_id:t})}async doRemove(t,e){return new Promise(((n,r)=>{this.store.remove(t,e||{multi:!0},(function(t,e){t?r(t):n(e)}))}))}async findOne(t){if("string"==typeof t)return new Promise(((e,n)=>{this.store.findOne({_id:t},(function(t,r){t?n(t):e(r)}))}));{const e=await this.find(t);return e.length>0?e[0]:null}}async find(t,{sort:e,projection:n,skip:r=0,limit:o=-1}={}){return i("db find",t,n),new Promise(((i,s)=>{let a=this.store.find(t);n&&(a=a.projection(n)),e&&(a=a.sort(e)),r&&(a=a.skip(r)),o>0&&(a=a.limit(o)),a.exec((function(t,e){t?s(t):i(e)}))}))}async count(t){return i("count",t),new Promise(((e,n)=>{this.store.count(t,(function(t,r){t?n(t):e(r)}))}))}async exist(t){return i("exist",t),(await this.find(t,{limit:1})).length>0}async distinct(t,e){i("distinct",t,e);const n=await this.find(e);return Array.from(new Set(n.filter((e=>e[t])).map((e=>e[t]))))}}},1349:(t,e,n)=>{"use strict";n.r(e),n.d(e,{camelCase:()=>o.a,nanoid:()=>l,trim:()=>a.a});var r=n(2155),i=n(7429),o=n.n(i),s=n(5663),a=n.n(s);const l=(0,r.kP)("1234567890abcdefghijklmnopqrstuvwxyz",10)},6668:t=>{t.exports={externals:[{module:"react",root:"React",dist:"react/umd/react.production.min.js"},{module:"react-dom",dependencies:["react"],root:"ReactDOM",dist:"react-dom/umd/react-dom.production.min.js"},{module:"vue",root:"Vue",dist:"vue/dist/vue.min.js"},{module:"echarts",root:"echarts",dist:"echarts/dist/echarts.min.js"},{module:"echarts-gl",root:"echarts-gl",dependencies:["echarts"],dist:"echarts-gl/dist/echarts-gl.min.js"},{module:"highcharts",root:"Highcharts",dist:"highcharts/highcharts.js"},{module:"highcharts/highstock",root:"Highcharts",dist:"highcharts/highstock.js"},{module:"highcharts/highcharts-more",dependencies:["highcharts"],dist:"highcharts/highcharts-more.js"},{module:"highcharts/highcharts-3d",dependencies:["highcharts"],dist:"highcharts/highcharts-3d.js"},{module:"highcharts/modules/funnel3d",dependencies:["highcharts"],dist:"highcharts/modules/funnel3d.js"},{module:"highcharts/modules/cylinder",dependencies:["highcharts"],dist:"highcharts/modules/cylinder.js"},{module:"highcharts/modules/treemap",dependencies:["highcharts"],dist:"highcharts/modules/treemap.js"},{module:"bizcharts",root:"BizCharts",dist:"bizcharts/umd/BizCharts.min.js"},{module:"react-highcharts",dependencies:["highcharts"],root:"ReactHighcharts",dist:"react-highcharts/ReactHighcharts.js"},{module:"snapsvg",root:"Snap",dist:"snapsvg/dist/snap.svg-min.js"},{module:"@antv/data-set",root:"DataSet",dist:"@antv/data-set/dist/data-set.js"},{module:"@ant-design/icons",root:"icons",dependencies:["antd"],dist:"@ant-design/icons/dist/index.umd.min.js"},{module:"moment/locale/zh-cn",root:"moment_locale_zh-cn",dist:"moment/locale/zh-cn.js",dependencies:["moment"]},{module:"moment",root:"moment",dist:"moment/min/moment-with-locales.min.js"},{module:"antd/dist/antd.css",root:"antd_css"},{module:"antd/dist/antd-with-locales",root:"antd"},{module:"antd",root:"antd",dependencies:["react","react-dom","moment"],dist:"antd/dist/antd.min.js",style:"antd/dist/antd.variable.min.css"},{module:"lodash",root:"_",dist:"lodash/lodash.min.js"},{module:"axios",root:"axios",dist:"axios/dist/axios.min.js"},{module:"html2canvas",root:"html2canvas",dist:"html2canvas/dist/html2canvas.min.js"},{module:"@douyinfe/semi-ui",root:"SemiUI",dependencies:["react","react-dom"],style:"@douyinfe/semi-ui/dist/css/semi.min.css",dist:"@douyinfe/semi-ui/dist/umd/semi-ui.min.js"}]}},42:(t,e)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&t.push(s)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){t.push(n.toString());continue}for(var a in n)r.call(n,a)&&n[a]&&t.push(a)}}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},7053:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".semi-modal-footer {\n  margin: 5px 0 15px 0;\n}\n.editor-wrapper {\n  width: 750px;\n  height: 320px;\n  overflow: auto;\n  position: relative;\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n}\n.code-error-banner {\n  position: absolute;\n  top: 360px;\n  width: 750px;\n  padding: 8px;\n}\n",""]);const a=s},2696:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".component-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  border-radius: 4px;\n  height: 90px;\n  background-color: var(--semi-color-tertiary-light-default);\n}\n.component-container img {\n  width: 90%;\n  height: 90%;\n}\n",""]);const a=s},7318:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".variable-value {\n  position: relative;\n  display: flex;\n}\n.variable-value .action-edit {\n  display: none;\n  position: absolute;\n  right: 20px;\n  top: 4px;\n}\n.variable-value .action-delete {\n  margin-top: 4px;\n  margin-left: 2px;\n  visibility: hidden;\n}\n.variable-value:hover .action-edit {\n  display: inherit;\n}\n.variable-value:hover .action-delete {\n  visibility: visible;\n}\n",""]);const a=s},1439:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,"html,\nbody {\n  overflow: hidden;\n  user-select: none;\n  background-color: var(--semi-color-bg-0) !important;\n}\n::-webkit-scrollbar,\n::-webkit-scrollbar-thumb {\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  background-clip: padding-box;\n  border: 2px solid transparent;\n  color: var(--semi-color-bg-0);\n}\n::-webkit-scrollbar-thumb:hover {\n  color: var(--semi-color-fill-0);\n}\n::-webkit-scrollbar-thumb:active {\n  color: var(--semi-color-fill-0);\n}\n::-webkit-scrollbar-thumb {\n  box-shadow: inset 0 0 0 10px;\n}\n::-webkit-scrollbar-corner {\n  display: none;\n}\n.semi-input-wrapper .semi-input {\n  padding-left: 6px;\n  padding-right: 6px;\n}\n.semi-input-wrapper .semi-input-append {\n  padding: 0 5px;\n}\n.workspace {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: var(--semi-color-fill-1);\n}\n.workspace .viewport-container {\n  background-color: var(--semi-color-bg-0);\n}\n.status-drag-over {\n  background-color: var(--semi-color-primary-light-default);\n  border: 2px dashed var(--semi-color-primary);\n}\nslot {\n  position: relative;\n}\n.pop-code-editor-container {\n  width: 420px;\n  margin: 5px 0;\n  height: 240px;\n  overflow: auto;\n  position: relative;\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n}\n.menu-bar {\n  position: absolute;\n  left: 5px;\n  top: 5px;\n  gap: 10px;\n  display: flex;\n  flex-direction: column;\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n  padding: 8px;\n  border-radius: 8px;\n  z-index: 101;\n}\n",""]);const a=s},7312:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".movable-panel {\n  position: absolute;\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n  padding: 4px;\n  border-radius: 5px;\n  z-index: 1000;\n}\n.movable-panel .title-bar {\n  position: relative;\n  height: 1px;\n  z-index: 1;\n}\n.movable-panel .title-bar .title-text {\n  position: absolute;\n  left: 32px;\n  top: 4px;\n}\n.movable-panel .title-bar .toggle-search {\n  z-index: 101;\n  background-color: var(--semi-color-bg-2);\n}\n.movable-panel .title-bar .toggle-search .semi-input-suffix {\n  cursor: pointer;\n}\n.movable-panel .title-bar .icon-handle {\n  position: absolute;\n  top: 5px;\n  left: 5px;\n  cursor: move;\n}\n.movable-panel .title-bar .icon-search {\n  position: absolute;\n  top: 2px;\n  right: 5px;\n}\n.movable-panel .title-bar .icon-close {\n  position: absolute;\n  top: 2px;\n  right: 5px;\n}\n.movable-panel .panel-content {\n  height: 100%;\n}\n.movable-panel .semi-tabs {\n  height: 100%;\n}\n.movable-panel .semi-tabs .semi-tabs-bar {\n  padding-left: 22px;\n}\n.movable-panel .semi-tabs .semi-tabs-bar .semi-tabs-tab {\n  padding: 3px 5px;\n}\n.movable-panel .semi-tabs .semi-tabs-bar .semi-tabs-tab.semi-tabs-tab-active {\n  padding: 3px 5px;\n}\n.movable-panel .semi-tabs .semi-tabs-content {\n  height: calc(100% - 24px);\n}\n.movable-panel .semi-tabs .semi-tabs-content .semi-tabs-pane {\n  height: 100%;\n}\n.movable-panel .semi-tabs .semi-tabs-content .semi-tabs-pane .semi-tabs-pane-motion-overlay {\n  height: 100%;\n}\n.movable-panel .semi-table-container .semi-table-thead th.semi-table-row-head {\n  padding: 2px 5px;\n}\n.movable-panel .semi-table-container td.semi-table-row-cell {\n  padding: 2px 5px;\n}\n",""]);const a=s},6749:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".setting-content {\n  width: 720px;\n  height: 640px;\n}\n",""]);const a=s},1162:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".variable-list {\n  height: calc(100% - 28px);\n}\n.variable-list .item-list {\n  height: calc(100% - 24px);\n  overflow: overlay;\n  background-color: var(--semi-color-bg-2);\n}\n.variable-list .item {\n  border-bottom: 1px solid var(--semi-color-fill-0);\n  padding: 3px 8px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  font-size: 14px;\n  line-height: 20px;\n  word-break: break-word;\n  color: var(--semi-color-text-0);\n  gap: 4px;\n}\n.variable-list .item:hover {\n  background-color: var(--semi-color-fill-0);\n}\n.variable-list .item:hover .semi-icon {\n  visibility: visible;\n}\n.variable-list .item.selected {\n  background-color: var(--semi-color-success-light-default);\n}\n.variable-list .item .name {\n  flex: 1;\n}\n.variable-list .item .value {\n  flex: 2;\n  height: 22px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.variable-list .item .semi-icon {\n  visibility: hidden;\n}\n.variable-list .item .edit-line {\n  display: flex;\n}\n.variable-list .item .edit-line .edit-name {\n  flex: 1;\n}\n.variable-list .item .edit-line .edit-value {\n  flex: 2;\n}\n.variable-list .bottom-bar {\n  height: 24px;\n  display: flex;\n  align-items: center;\n  background-color: var(--semi-color-fill-0);\n}\n.variable-list .bottom-bar .semi-icon {\n  cursor: pointer;\n  margin: 0 5px;\n  color: var(--semi-color-text-1);\n}\n.variable-list .bottom-bar .semi-icon:hover {\n  color: var(--semi-color-text-0);\n}\n",""]);const a=s},7056:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".object-form {\n  padding: 0 8px;\n  height: 100%;\n  overflow-y: overlay;\n}\n.object-form .semi-form .semi-form-field-label {\n  margin-bottom: 0;\n  margin-right: 0;\n  padding-top: 0px;\n  line-height: 24px;\n  padding-bottom: 0px;\n  font-weight: normal;\n  color: var(--semi-color-text-2);\n}\n.object-form .semi-form .row {\n  display: flex;\n}\n.object-form .semi-form .row .semi-form-field {\n  padding: 5px 0;\n  width: 100%;\n}\n.object-form .semi-form .row .semi-form-field .event-edit {\n  position: relative;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .action-add {\n  position: absolute;\n  right: 5px;\n  top: -30px;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .event-action-config {\n  background-color: var(--semi-color-tertiary-light-default);\n  border-radius: 5px;\n  padding: 8px;\n  margin-top: 5px;\n  position: relative;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .event-action-config .action-delete {\n  position: absolute;\n  right: 10px;\n  cursor: pointer;\n  color: var(--semi-color-text-2);\n}\n.object-form .semi-form .row .semi-form-field .event-edit .action-field {\n  display: flex;\n  padding: 3px 0;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .action-field .action-label {\n  width: 48px;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .action-field .semi-input-textarea-wrapper {\n  width: auto;\n  flex: 1;\n}\n.object-form .semi-form .row .semi-form-field .event-edit .action-field .semi-input-textarea-wrapper textarea {\n  height: 48px;\n}\n.object-form .semi-form .row .col-12 {\n  display: flex;\n}\n.object-form .semi-form .row .col-12 .semi-form-field {\n  width: 100px;\n}\n.object-form .semi-form .row .col-12 .semi-form-field-label {\n  width: 24px;\n}\n.object-form .semi-form .with-code-expr {\n  display: flex;\n}\n.object-form .semi-form .with-code-expr .semi-button-tertiary {\n  visibility: hidden;\n}\n.object-form .semi-form .with-code-expr .semi-button-tertiary.is-open {\n  visibility: initial;\n}\n.object-form .semi-form .with-code-expr:hover .semi-button-tertiary {\n  visibility: initial;\n}\n.object-form .semi-form .semi-form-field-main > .semi-checkbox {\n  padding: 2px;\n}\n",""]);const a=s},1171:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,"html,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nmenu,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmain,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  box-sizing: border-box;\n}\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmain,\nmenu,\nnav,\nsection {\n  display: block;\n}\n/* HTML5 hidden-attribute fix for newer browsers */\n*[hidden] {\n  display: none;\n}\nbody {\n  line-height: 1;\n}\nmenu,\nol,\nul {\n  list-style: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: '';\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n}\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n}\n.component-add-panel .package-tab {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  padding: 0 2px;\n}\n.component-add-panel .semi-tabs-bar-button .semi-tabs-tab {\n  padding: 8px 3px;\n}\n.component-add-panel .package-tab img {\n  width: 24px;\n  height: 24px;\n}\n.dialog-resource {\n  width: 80%;\n}\n",""]);const a=s},2378:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,".moveable-control {\r\n  width: 8px!important;\r\n  height: 8px!important;\r\n  border: 1px solid var(--semi-color-primary)!important;\r\n  box-sizing: border-box;\r\n  border-radius: 0!important;\r\n  background: #fff!important;\r\n  margin-top: -4px!important;\r\n  margin-left: -4px!important;\r\n  z-index: 10;\r\n}\r\n.moveable-control-box {\r\n  z-index: 100!important;\r\n}\r\n\r\n.moveable-line {\r\n  background: var(--semi-color-primary)!important;\r\n}\r\n\r\n.workspace-movable .moveable-control {\r\n  width: 18px!important;\r\n  height: 18px!important;\r\n  opacity: 0;\r\n}\r\n\r\n.workspace-movable .moveable-line {\r\n  opacity: 0;\r\n}",""]);const a=s},7543:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4933),i=n.n(r),o=n(3476),s=n.n(o)()(i());s.push([t.id,"/* shadow */\n/* sizing */\n/* spacing */\n.semi-icon {\n  display: inline-block;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  text-rendering: optimizeLegibility;\n  fill: currentColor;\n}\n\n.semi-icon-extra-small {\n  font-size: 8px;\n}\n\n.semi-icon-small {\n  font-size: 12px;\n}\n\n.semi-icon-default {\n  font-size: 16px;\n}\n\n.semi-icon-large {\n  font-size: 20px;\n}\n\n.semi-icon-extra-large {\n  font-size: 24px;\n}\n\n.semi-icon-spinning {\n  animation: 0.6s linear infinite semi-icon-animation-rotate;\n  animation-fill-mode: forwards;\n}\n\n@keyframes semi-icon-animation-rotate {\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}",""]);const a=s},3476:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);r&&s[h[0]]||(void 0!==o&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=o),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),e.push(h))}},e}},4933:t=>{"use strict";t.exports=function(t){return t[1]}},6292:(t,e,n)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(i=r))})),e.splice(i,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(9374)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},9374:(t,e,n)=>{t.exports=function(t){function e(t){let n,i,o,s=null;function a(...t){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let s=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=e.formatters[i];if("function"==typeof o){const e=t[s];n=o.call(r,e),t.splice(s,1),s--}return n})),e.formatArgs.call(r,t),(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==e.namespaces&&(i=e.namespaces,o=e.enabled(t)),o),set:t=>{s=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,n){const r=e(this.namespace+(void 0===n?":":n)+t);return r.log=this.log,r}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(i),...e.skips.map(i).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(8628),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},6051:function(t,e){var n,r;void 0===(r="function"==typeof(n=function(){var t=function(){},e={},n={},r={};function i(t,e){if(t){var i=r[t];if(n[t]=e,i)for(;i.length;)i[0](t,e),i.splice(0,1)}}function o(e,n){e.call&&(e={success:e}),n.length?(e.error||t)(n):(e.success||t)(e)}function s(e,n,r,i){var o,a,l=document,c=r.async,h=(r.numRetries||0)+1,u=r.before||t,f=e.replace(/[\?|#].*$/,""),d=e.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(f)?((a=l.createElement("link")).rel="stylesheet",a.href=d,(o="hideFocus"in a)&&a.relList&&(o=0,a.rel="preload",a.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(f)?(a=l.createElement("img")).src=d:((a=l.createElement("script")).src=e,a.async=void 0===c||c),a.onload=a.onerror=a.onbeforeload=function(t){var l=t.type[0];if(o)try{a.sheet.cssText.length||(l="e")}catch(t){18!=t.code&&(l="e")}if("e"==l){if((i+=1)<h)return s(e,n,r,i)}else if("preload"==a.rel&&"style"==a.as)return a.rel="stylesheet";n(e,l,t.defaultPrevented)},!1!==u(e,a)&&l.head.appendChild(a)}function a(t,n,r){var a,l;if(n&&n.trim&&(a=n),l=(a?r:n)||{},a){if(a in e)throw"LoadJS";e[a]=!0}function c(e,n){!function(t,e,n){var r,i,o=(t=t.push?t:[t]).length,a=o,l=[];for(r=function(t,n,r){if("e"==n&&l.push(t),"b"==n){if(!r)return;l.push(t)}--o||e(l)},i=0;i<a;i++)s(t[i],r,n)}(t,(function(t){o(l,t),e&&o({success:e,error:n},t),i(a,t)}),l)}if(l.returnPromise)return new Promise(c);c()}return a.ready=function(t,e){return function(t,e){t=t.push?t:[t];var i,o,s,a=[],l=t.length,c=l;for(i=function(t,n){n.length&&a.push(t),--c||e(a)};l--;)o=t[l],(s=n[o])?i(o,s):(r[o]=r[o]||[]).push(i)}(t,(function(t){o(e,t)})),a},a.done=function(t){i(t,[])},a.reset=function(){e={},n={},r={}},a.isDefined=function(t){return t in e},a})?n.apply(e,[]):n)||(t.exports=r)},6586:(t,e,n)=>{var r=n(7753),i=n(2452),o=n(2115),s=n(8256),a=n(7426);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},6301:(t,e,n)=>{var r=n(9417),i=n(2470),o=n(6165),s=n(1873),a=n(2556);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},4538:(t,e,n)=>{var r=n(1822)(n(7400),"Map");t.exports=r},4554:(t,e,n)=>{var r=n(9448),i=n(7738),o=n(6575),s=n(7238),a=n(8738);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},6539:(t,e,n)=>{var r=n(7400).Symbol;t.exports=r},9349:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},8213:(t,e,n)=>{var r=n(4701),i=n(2900),o=n(9785),s=n(3854),a=n(2383),l=n(8519),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),h=!n&&i(t),u=!n&&!h&&s(t),f=!n&&!h&&!u&&l(t),d=n||h||u||f,p=d?r(t.length,String):[],g=p.length;for(var m in t)!e&&!c.call(t,m)||d&&("length"==m||u&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||p.push(m);return p}},6070:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},7141:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},6446:t=>{t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},5630:t=>{t.exports=function(t){return t.split("")}},585:t=>{var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(e)||[]}},1928:(t,e,n)=>{var r=n(8799),i=n(5638),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&i(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},3382:(t,e,n)=>{var r=n(5638);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},8799:(t,e,n)=>{var r=n(2630);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},8419:(t,e,n)=>{var r=n(9729);t.exports=function(t,e){for(var n=-1,i=e.length,o=Array(i),s=null==t;++n<i;)o[n]=s?void 0:r(t,e[n]);return o}},5372:t=>{t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},3545:(t,e,n)=>{var r=n(7141),i=n(2889);t.exports=function t(e,n,o,s,a){var l=-1,c=e.length;for(o||(o=i),a||(a=[]);++l<c;){var h=e[l];n>0&&o(h)?n>1?t(h,n-1,o,s,a):r(a,h):s||(a[a.length]=h)}return a}},9867:(t,e,n)=>{var r=n(6747),i=n(7948);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},9736:(t,e,n)=>{var r=n(6539),i=n(4840),o=n(1258),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},8817:(t,e,n)=>{var r=n(5372),i=n(1129),o=n(8263);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},5829:(t,e,n)=>{var r=n(9736),i=n(2360);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},1129:t=>{t.exports=function(t){return t!=t}},3472:(t,e,n)=>{var r=n(8338),i=n(9678),o=n(1611),s=n(6532),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,h=l.toString,u=c.hasOwnProperty,f=RegExp("^"+h.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:a).test(s(t))}},6972:(t,e,n)=>{var r=n(9736),i=n(4194),o=n(2360),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},186:(t,e,n)=>{var r=n(6016),i=n(962),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},9464:(t,e,n)=>{var r=n(1611),i=n(6016),o=n(1586),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},7646:t=>{t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},1197:(t,e,n)=>{var r=n(1137),i=n(1871),o=n(3132);t.exports=function(t,e){return o(i(t,e,r),t+"")}},4459:(t,e,n)=>{var r=n(551),i=n(2630),o=n(1137),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},5733:t=>{t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},4701:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},4282:(t,e,n)=>{var r=n(6539),i=n(6070),o=n(9785),s=n(5193),a=r?r.prototype:void 0,l=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(s(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},4833:(t,e,n)=>{var r=n(6127),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},9334:t=>{t.exports=function(t){return function(e){return t(e)}}},2231:(t,e,n)=>{var r=n(6070);t.exports=function(t,e){return r(e,(function(e){return t[e]}))}},6747:(t,e,n)=>{var r=n(9785),i=n(318),o=n(3419),s=n(5567);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(s(t))}},9158:(t,e,n)=>{var r=n(5733);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},4159:(t,e,n)=>{var r=n(8817);t.exports=function(t,e){for(var n=t.length;n--&&r(e,t[n],0)>-1;);return n}},3574:(t,e,n)=>{var r=n(8817);t.exports=function(t,e){for(var n=-1,i=t.length;++n<i&&r(e,t[n],0)>-1;);return n}},5159:(t,e,n)=>{var r=n(1928),i=n(8799);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,l=e.length;++a<l;){var c=e[a],h=o?o(n[c],t[c],c,n,t):void 0;void 0===h&&(h=t[c]),s?i(n,c,h):r(n,c,h)}return n}},4937:(t,e,n)=>{var r=n(7400)["__core-js_shared__"];t.exports=r},7270:(t,e,n)=>{var r=n(1197),i=n(7535);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var l=n[r];l&&t(e,l,r,s)}return e}))}},2690:(t,e,n)=>{var r=n(9158),i=n(5348),o=n(3528),s=n(5567);t.exports=function(t){return function(e){e=s(e);var n=i(e)?o(e):void 0,a=n?n[0]:e.charAt(0),l=n?r(n,1).join(""):e.slice(1);return a[t]()+l}}},8267:(t,e,n)=>{var r=n(6446),i=n(9689),o=n(3254),s=RegExp("['’]","g");t.exports=function(t){return function(e){return r(o(i(e).replace(s,"")),t,"")}}},7e3:(t,e,n)=>{var r=n(5638),i=Object.prototype,o=i.hasOwnProperty;t.exports=function(t,e,n,s){return void 0===t||r(t,i[n])&&!o.call(s,n)?e:t}},4248:(t,e,n)=>{var r=n(7646)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});t.exports=r},2630:(t,e,n)=>{var r=n(1822),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},5022:(t,e,n)=>{var r=n(7646)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});t.exports=r},7308:t=>{var e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};t.exports=function(t){return"\\"+e[t]}},4288:(t,e,n)=>{var r=n(9754),i=n(1871),o=n(3132);t.exports=function(t){return o(i(t,void 0,r),t+"")}},9120:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},5899:(t,e,n)=>{var r=n(4479);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},1822:(t,e,n)=>{var r=n(3472),i=n(5371);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},2173:(t,e,n)=>{var r=n(8023)(Object.getPrototypeOf,Object);t.exports=r},4840:(t,e,n)=>{var r=n(6539),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},5371:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},5348:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},3909:t=>{var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return e.test(t)}},7753:(t,e,n)=>{var r=n(5718);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},2452:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},2115:(t,e,n)=>{var r=n(5718),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},8256:(t,e,n)=>{var r=n(5718),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},7426:(t,e,n)=>{var r=n(5718);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},2889:(t,e,n)=>{var r=n(6539),i=n(2900),o=n(9785),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(s&&t&&t[s])}},2383:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},7535:(t,e,n)=>{var r=n(5638),i=n(68),o=n(2383),s=n(1611);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},318:(t,e,n)=>{var r=n(9785),i=n(5193),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||s.test(t)||!o.test(t)||null!=e&&t in Object(e)}},4479:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},9678:(t,e,n)=>{var r,i=n(4937),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},6016:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},9417:t=>{t.exports=function(){this.__data__=[],this.size=0}},2470:(t,e,n)=>{var r=n(3382),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},6165:(t,e,n)=>{var r=n(3382);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},1873:(t,e,n)=>{var r=n(3382);t.exports=function(t){return r(this.__data__,t)>-1}},2556:(t,e,n)=>{var r=n(3382);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},9448:(t,e,n)=>{var r=n(6586),i=n(6301),o=n(4538);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7738:(t,e,n)=>{var r=n(5899);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},6575:(t,e,n)=>{var r=n(5899);t.exports=function(t){return r(this,t).get(t)}},7238:(t,e,n)=>{var r=n(5899);t.exports=function(t){return r(this,t).has(t)}},8738:(t,e,n)=>{var r=n(5899);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},2941:(t,e,n)=>{var r=n(6651);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},5718:(t,e,n)=>{var r=n(1822)(Object,"create");t.exports=r},962:(t,e,n)=>{var r=n(8023)(Object.keys,Object);t.exports=r},1586:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},8125:(t,e,n)=>{t=n.nmd(t);var r=n(9120),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a},1258:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},8023:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},1871:(t,e,n)=>{var r=n(9349),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),l=Array(a);++s<a;)l[s]=o[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=o[s];return c[e]=n(l),r(t,this,c)}}},9886:t=>{t.exports=/<%-([\s\S]+?)%>/g},1321:t=>{t.exports=/<%([\s\S]+?)%>/g},8611:t=>{t.exports=/<%=([\s\S]+?)%>/g},7400:(t,e,n)=>{var r=n(9120),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},3132:(t,e,n)=>{var r=n(4459),i=n(9591)(r);t.exports=i},9591:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},8263:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},3528:(t,e,n)=>{var r=n(5630),i=n(5348),o=n(4890);t.exports=function(t){return i(t)?o(t):r(t)}},3419:(t,e,n)=>{var r=n(2941),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=s},7948:(t,e,n)=>{var r=n(5193);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},6532:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},6127:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},4890:t=>{var e="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+e+"|"+n+")?",a="[\\ufe0e\\ufe0f]?",l=a+s+"(?:\\u200d(?:"+[r,i,o].join("|")+")"+a+s+")*",c="(?:"+[r+e+"?",e,i,o,"[\\ud800-\\udfff]"].join("|")+")",h=RegExp(n+"(?="+n+")|"+c+l,"g");t.exports=function(t){return t.match(h)||[]}},7025:t=>{var e="a-z\\xdf-\\xf6\\xf8-\\xff",n="A-Z\\xc0-\\xd6\\xd8-\\xde",r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i="["+r+"]",o="\\d+",s="["+e+"]",a="[^\\ud800-\\udfff"+r+o+"\\u2700-\\u27bf"+e+n+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",h="["+n+"]",u="(?:"+s+"|"+a+")",f="(?:"+h+"|"+a+")",d="(?:['’](?:d|ll|m|re|s|t|ve))?",p="(?:['’](?:D|LL|M|RE|S|T|VE))?",g="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",m="[\\ufe0e\\ufe0f]?",O=m+g+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",l,c].join("|")+")"+m+g+")*",v="(?:"+["[\\u2700-\\u27bf]",l,c].join("|")+")"+O,b=RegExp([h+"?"+s+"+"+d+"(?="+[i,h,"$"].join("|")+")",f+"+"+p+"(?="+[i,h+u,"$"].join("|")+")",h+"?"+u+"+"+d,h+"+"+p,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,v].join("|"),"g");t.exports=function(t){return t.match(b)||[]}},1827:(t,e,n)=>{var r=n(5159),i=n(7270),o=n(3893),s=i((function(t,e,n,i){r(e,o(e),t,i)}));t.exports=s},1939:(t,e,n)=>{var r=n(8419),i=n(4288)(r);t.exports=i},7636:(t,e,n)=>{var r=n(9349),i=n(1197),o=n(5446),s=i((function(t,e){try{return r(t,void 0,e)}catch(t){return o(t)?t:new Error(t)}}));t.exports=s},7429:(t,e,n)=>{var r=n(8052),i=n(8267)((function(t,e,n){return e=e.toLowerCase(),t+(n?r(e):e)}));t.exports=i},8052:(t,e,n)=>{var r=n(5567),i=n(6744);t.exports=function(t){return i(r(t).toLowerCase())}},551:t=>{t.exports=function(t){return function(){return t}}},6726:(t,e,n)=>{var r=n(1611),i=n(2846),o=n(1936),s=Math.max,a=Math.min;t.exports=function(t,e,n){var l,c,h,u,f,d,p=0,g=!1,m=!1,O=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function v(e){var n=l,r=c;return l=c=void 0,p=e,u=t.apply(r,n)}function b(t){return p=t,f=setTimeout(w,e),g?v(t):u}function y(t){var n=t-d;return void 0===d||n>=e||n<0||m&&t-p>=h}function w(){var t=i();if(y(t))return x(t);f=setTimeout(w,function(t){var n=e-(t-d);return m?a(n,h-(t-p)):n}(t))}function x(t){return f=void 0,O&&l?v(t):(l=c=void 0,u)}function S(){var t=i(),n=y(t);if(l=arguments,c=this,d=t,n){if(void 0===f)return b(d);if(m)return clearTimeout(f),f=setTimeout(w,e),v(d)}return void 0===f&&(f=setTimeout(w,e)),u}return e=o(e)||0,r(n)&&(g=!!n.leading,h=(m="maxWait"in n)?s(o(n.maxWait)||0,e):h,O="trailing"in n?!!n.trailing:O),S.cancel=function(){void 0!==f&&clearTimeout(f),p=0,l=d=c=f=void 0},S.flush=function(){return void 0===f?u:x(i())},S}},9689:(t,e,n)=>{var r=n(4248),i=n(5567),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=i(t))&&t.replace(o,r).replace(s,"")}},5638:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},4565:(t,e,n)=>{var r=n(5022),i=n(5567),o=/[&<>"']/g,s=RegExp(o.source);t.exports=function(t){return(t=i(t))&&s.test(t)?t.replace(o,r):t}},9754:(t,e,n)=>{var r=n(3545);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},9729:(t,e,n)=>{var r=n(9867);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},1137:t=>{t.exports=function(t){return t}},2900:(t,e,n)=>{var r=n(5829),i=n(2360),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=l},9785:t=>{var e=Array.isArray;t.exports=e},68:(t,e,n)=>{var r=n(8338),i=n(4194);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},3854:(t,e,n)=>{t=n.nmd(t);var r=n(7400),i=n(7714),o=e&&!e.nodeType&&e,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.Buffer:void 0,l=(a?a.isBuffer:void 0)||i;t.exports=l},5446:(t,e,n)=>{var r=n(9736),i=n(2360),o=n(861);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!o(t)}},8338:(t,e,n)=>{var r=n(9736),i=n(1611);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},4194:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},1611:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},2360:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},861:(t,e,n)=>{var r=n(9736),i=n(2173),o=n(2360),s=Function.prototype,a=Object.prototype,l=s.toString,c=a.hasOwnProperty,h=l.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==h}},5193:(t,e,n)=>{var r=n(9736),i=n(2360);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},8519:(t,e,n)=>{var r=n(6972),i=n(9334),o=n(8125),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},98:(t,e,n)=>{var r=n(8213),i=n(186),o=n(68);t.exports=function(t){return o(t)?r(t):i(t)}},3893:(t,e,n)=>{var r=n(8213),i=n(9464),o=n(68);t.exports=function(t){return o(t)?r(t,!0):i(t)}},6651:(t,e,n)=>{var r=n(4554);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},2846:(t,e,n)=>{var r=n(7400);t.exports=function(){return r.Date.now()}},7714:t=>{t.exports=function(){return!1}},631:(t,e,n)=>{var r=n(1827),i=n(7636),o=n(2231),s=n(7e3),a=n(7308),l=n(5446),c=n(7535),h=n(98),u=n(8611),f=n(9915),d=n(5567),p=/\b__p \+= '';/g,g=/\b(__p \+=) '' \+/g,m=/(__e\(.*?\)|\b__t\)) \+\n'';/g,O=/[()=,{}\[\]\/\s]/,v=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,b=/($^)/,y=/['\n\r\u2028\u2029\\]/g,w=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var x=f.imports._.templateSettings||f;n&&c(t,e,n)&&(e=void 0),t=d(t),e=r({},e,x,s);var S,k,C=r({},e.imports,x.imports,s),Q=h(C),P=o(C,Q),E=0,T=e.interpolate||b,_="__p += '",$=RegExp((e.escape||b).source+"|"+T.source+"|"+(T===u?v:b).source+"|"+(e.evaluate||b).source+"|$","g"),M=w.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace($,(function(e,n,r,i,o,s){return r||(r=i),_+=t.slice(E,s).replace(y,a),n&&(S=!0,_+="' +\n__e("+n+") +\n'"),o&&(k=!0,_+="';\n"+o+";\n__p += '"),r&&(_+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),E=s+e.length,e})),_+="';\n";var R=w.call(e,"variable")&&e.variable;if(R){if(O.test(R))throw new Error("Invalid `variable` option passed into `_.template`")}else _="with (obj) {\n"+_+"\n}\n";_=(k?_.replace(p,""):_).replace(g,"$1").replace(m,"$1;"),_="function("+(R||"obj")+") {\n"+(R?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(S?", __e = _.escape":"")+(k?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+_+"return __p\n}";var A=i((function(){return Function(Q,M+"return "+_).apply(void 0,P)}));if(A.source=_,l(A))throw A;return A}},9915:(t,e,n)=>{var r=n(4565),i={escape:n(9886),evaluate:n(1321),interpolate:n(8611),variable:"",imports:{_:{escape:r}}};t.exports=i},1936:(t,e,n)=>{var r=n(4833),i=n(1611),o=n(5193),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=a.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):s.test(t)?NaN:+t}},5567:(t,e,n)=>{var r=n(4282);t.exports=function(t){return null==t?"":r(t)}},5663:(t,e,n)=>{var r=n(4282),i=n(4833),o=n(9158),s=n(4159),a=n(3574),l=n(3528),c=n(5567);t.exports=function(t,e,n){if((t=c(t))&&(n||void 0===e))return i(t);if(!t||!(e=r(e)))return t;var h=l(t),u=l(e),f=a(h,u),d=s(h,u)+1;return o(h,f,d).join("")}},6744:(t,e,n)=>{var r=n(2690)("toUpperCase");t.exports=r},3254:(t,e,n)=>{var r=n(585),i=n(3909),o=n(5567),s=n(7025);t.exports=function(t,e,n){return t=o(t),void 0===(e=n?void 0:e)?i(t)?s(t):r(t):t.match(e)||[]}},3345:(t,e,n)=>{var r;!function(i,o,s){if(i){for(var a,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},c={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},h={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},f=1;f<20;++f)l[111+f]="f"+f;for(f=0;f<=9;++f)l[f+96]=f.toString();b.prototype.bind=function(t,e,n){var r=this;return t=t instanceof Array?t:[t],r._bindMultiple.call(r,t,e,n),r},b.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},b.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},b.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},b.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(v(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var n=t.composedPath()[0];n!==t.target&&(e=n)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},b.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},b.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(l[e]=t[e]);a=null},b.init=function(){var t=b(o);for(var e in t)"_"!==e.charAt(0)&&(b[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},b.init(),i.Mousetrap=b,t.exports&&(t.exports=b),void 0===(r=function(){return b}.call(e,n,e,t))||(t.exports=r)}function d(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function p(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return l[t.which]?l[t.which]:c[t.which]?c[t.which]:String.fromCharCode(t.which).toLowerCase()}function g(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function m(t,e,n){return n||(n=function(){if(!a)for(var t in a={},l)t>95&&t<112||l.hasOwnProperty(t)&&(a[l[t]]=t);return a}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function O(t,e){var n,r,i,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),i=0;i<n.length;++i)r=n[i],u[r]&&(r=u[r]),e&&"keypress"!=e&&h[r]&&(r=h[r],o.push("shift")),g(r)&&o.push(r);return{key:r,modifiers:o,action:e=m(r,o,e)}}function v(t,e){return null!==t&&t!==o&&(t===e||v(t.parentNode,e))}function b(t){var e=this;if(t=t||o,!(e instanceof b))return new b(t);e.target=t,e._callbacks={},e._directMap={};var n,r={},i=!1,s=!1,a=!1;function l(t){t=t||{};var e,n=!1;for(e in r)t[e]?n=!0:r[e]=0;n||(a=!1)}function c(t,n,i,o,s,a){var l,c,h,u,f=[],d=i.type;if(!e._callbacks[t])return[];for("keyup"==d&&g(t)&&(n=[t]),l=0;l<e._callbacks[t].length;++l)if(c=e._callbacks[t][l],(o||!c.seq||r[c.seq]==c.level)&&d==c.action&&("keypress"==d&&!i.metaKey&&!i.ctrlKey||(h=n,u=c.modifiers,h.sort().join(",")===u.sort().join(",")))){var p=!o&&c.combo==s,m=o&&c.seq==o&&c.level==a;(p||m)&&e._callbacks[t].splice(l,1),f.push(c)}return f}function h(t,n,r,i){e.stopCallback(n,n.target||n.srcElement,r,i)||!1===t(n,r)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function u(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=p(t);n&&("keyup"!=t.type||i!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):i=!1)}function f(t,o,s,u,d){e._directMap[t+":"+s]=o;var g,m=(t=t.replace(/\s+/g," ")).split(" ");m.length>1?function(t,e,o,s){function c(e){return function(){a=e,++r[t],clearTimeout(n),n=setTimeout(l,1e3)}}function u(e){h(o,e,t),"keyup"!==s&&(i=p(e)),setTimeout(l,10)}r[t]=0;for(var d=0;d<e.length;++d){var g=d+1===e.length?u:c(s||O(e[d+1]).action);f(e[d],g,s,t,d)}}(t,m,o,s):(g=O(t,s),e._callbacks[g.key]=e._callbacks[g.key]||[],c(g.key,g.modifiers,{type:g.action},u,t,d),e._callbacks[g.key][u?"unshift":"push"]({callback:o,modifiers:g.modifiers,action:g.action,seq:u,level:d,combo:t}))}e._handleKey=function(t,e,n){var r,i=c(t,e,n),o={},u=0,f=!1;for(r=0;r<i.length;++r)i[r].seq&&(u=Math.max(u,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=u)continue;f=!0,o[i[r].seq]=1,h(i[r].callback,n,i[r].combo,i[r].seq)}else f||h(i[r].callback,n,i[r].combo);var d="keypress"==n.type&&s;n.type!=a||g(t)||d||l(o),s=f&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var r=0;r<t.length;++r)f(t[r],e,n)},d(t,"keypress",u),d(t,"keydown",u),d(t,"keyup",u)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},8628:t=>{var e=1e3,n=60*e,r=60*n,i=24*r;function o(t,e,n,r){var i=e>=1.5*n;return Math.round(t/n)+" "+r+(i?"s":"")}t.exports=function(t,s){s=s||{};var a,l,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(t);if("number"===c&&isFinite(t))return s.long?(a=t,(l=Math.abs(a))>=i?o(a,l,i,"day"):l>=r?o(a,l,r,"hour"):l>=n?o(a,l,n,"minute"):l>=e?o(a,l,e,"second"):a+" ms"):function(t){var o=Math.abs(t);return o>=i?Math.round(t/i)+"d":o>=r?Math.round(t/r)+"h":o>=n?Math.round(t/n)+"m":o>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},4151:t=>{var e;e=function(){return function(t,e,n){function r(n,o){if(!e[n]){if(!t[n]){if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var s=e[n]={exports:{}};t[n][0].call(s.exports,(function(e){return r(t[n][1][e]||e)}),s,s.exports)}return e[n].exports}for(var i=void 0,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){var r=t("__browserify_process");r.EventEmitter||(r.EventEmitter=function(){});var i=n.EventEmitter=r.EventEmitter,o="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};i.prototype.setMaxListeners=function(t){this._events||(this._events={}),this._events.maxListeners=t},i.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||o(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);e.apply(this,n)}return!0}if(o(e)){n=Array.prototype.slice.call(arguments,1);for(var r=e.slice(),i=0,s=r.length;s>i;i++)r[i].apply(this,n);return!0}return!1},i.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",t,e),this._events[t])if(o(this._events[t])){var n;this._events[t].warned||(n=void 0!==this._events.maxListeners?this._events.maxListeners:10)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace()),this._events[t].push(e)}else this._events[t]=[this._events[t],e];else this._events[t]=e;return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){var n=this;return n.on(t,(function r(){n.removeListener(t,r),e.apply(this,arguments)})),this},i.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var n=this._events[t];if(o(n)){var r=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}(n,e);if(0>r)return this;n.splice(r,1),0==n.length&&delete this._events[t]}else this._events[t]===e&&delete this._events[t];return this},i.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},i.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),o(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},i.listenerCount=function(t,e){return t._events&&t._events[e]?"function"==typeof t._events[e]?1:t._events[e].length:0}},{__browserify_process:4}],2:[function(t,e,n){function r(t,e){for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}function i(t,e){for(var n=0,r=t.length;r>=0;r--){var i=t[r];"."==i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var o=t("__browserify_process"),s=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){for(var t="",e=!1,n=arguments.length;n>=-1&&!e;n--){var s=n>=0?arguments[n]:o.cwd();"string"==typeof s&&s&&(t=s+"/"+t,e="/"===s.charAt(0))}return(e?"/":"")+(t=i(r(t.split("/"),(function(t){return!!t})),!e).join("/"))||"."},n.normalize=function(t){var e="/"===t.charAt(0),n="/"===t.slice(-1);return(t=i(r(t.split("/"),(function(t){return!!t})),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,(function(t){return t&&"string"==typeof t})).join("/"))},n.dirname=function(t){var e=s.exec(t)[1]||"";return e?1===e.length?e:e.substring(0,e.length-1):"."},n.basename=function(t,e){var n=s.exec(t)[2]||"";return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return s.exec(t)[3]||""},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=r(t.split("/")),o=r(e.split("/")),s=Math.min(i.length,o.length),a=s,l=0;s>l;l++)if(i[l]!==o[l]){a=l;break}var c=[];for(l=a;l<i.length;l++)c.push("..");return(c=c.concat(o.slice(a))).join("/")},n.sep="/"},{__browserify_process:4}],3:[function(t,e,n){function r(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===Object.prototype.toString.call(t)}function i(t){"object"==typeof t&&Object.prototype.toString.call(t)}function o(t){return"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}t("events"),n.isArray=r,n.isDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)},n.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},n.print=function(){},n.puts=function(){},n.debug=function(){},n.inspect=function(t,e,l,c){var h=[],u=function(t,e){var n={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r={special:"cyan",number:"blue",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"}[e];return r?"["+n[r][0]+"m"+t+"["+n[r][1]+"m":t};return c||(u=function(t){return t}),function t(l,c){if(l&&"function"==typeof l.inspect&&l!==n&&(!l.constructor||l.constructor.prototype!==l))return l.inspect(c);switch(typeof l){case"undefined":return u("undefined","undefined");case"string":var f="'"+JSON.stringify(l).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return u(f,"string");case"number":return u(""+l,"number");case"boolean":return u(""+l,"boolean")}if(null===l)return u("null","null");var d,p,g,m=s(l),O=e?a(l):m;if("function"==typeof l&&0===O.length){if(i(l))return u(""+l,"regexp");var v=l.name?": "+l.name:"";return u("[Function"+v+"]","special")}if(o(l)&&0===O.length)return u(l.toUTCString(),"date");if(r(l)?(p="Array",g=["[","]"]):(p="Object",g=["{","}"]),"function"==typeof l){var b=l.name?": "+l.name:"";d=i(l)?" "+l:" [Function"+b+"]"}else d="";if(o(l)&&(d=" "+l.toUTCString()),0===O.length)return g[0]+d+g[1];if(0>c)return i(l)?u(""+l,"regexp"):u("[Object]","special");h.push(l);var y=O.map((function(e){var n,i;if(l.__lookupGetter__&&(l.__lookupGetter__(e)?i=l.__lookupSetter__(e)?u("[Getter/Setter]","special"):u("[Getter]","special"):l.__lookupSetter__(e)&&(i=u("[Setter]","special"))),m.indexOf(e)<0&&(n="["+e+"]"),i||(h.indexOf(l[e])<0?(i=null===c?t(l[e]):t(l[e],c-1)).indexOf("\n")>-1&&(i=r(l)?i.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+i.split("\n").map((function(t){return"   "+t})).join("\n")):i=u("[Circular]","special")),void 0===n){if("Array"===p&&e.match(/^\d+$/))return i;(n=JSON.stringify(""+e)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(n=n.substr(1,n.length-2),n=u(n,"name")):(n=n.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),n=u(n,"string"))}return n+": "+i}));h.pop();var w=y.reduce((function(t,e){return e.indexOf("\n"),t+e.length+1}),0);return w>50?g[0]+(""===d?"":d+"\n ")+" "+y.join(",\n  ")+" "+g[1]:g[0]+d+" "+y.join(", ")+" "+g[1]}(t,void 0===l?2:l)},n.log=function(){},n.pump=null;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.hasOwnProperty.call(t,n)&&e.push(n);return e},l=Object.create||function(t,e){var n;if(null===t)n={__proto__:null};else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var r=function(){};r.prototype=t,(n=new r).__proto__=t}return void 0!==e&&Object.defineProperties&&Object.defineProperties(n,e),n};n.inherits=function(t,e){t.super_=e,t.prototype=l(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})};var c=/%[sdj%]/g;n.format=function(t){if("string"!=typeof t){for(var e=[],r=0;r<arguments.length;r++)e.push(n.inspect(arguments[r]));return e.join(" ")}r=1;for(var i=arguments,o=i.length,s=String(t).replace(c,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":return JSON.stringify(i[r++]);default:return t}})),a=i[r];o>r;a=i[++r])s+=null===a||"object"!=typeof a?" "+a:" "+n.inspect(a);return s}},{events:1}],4:[function(t,e){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",(function(t){var e=t.source;(e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)&&n.shift()()}),!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],5:[function(t,e){function n(t,e,n){this.db=t,this.query=e||{},n&&(this.execFn=n)}var r=t("./model"),i=t("underscore");n.prototype.limit=function(t){return this._limit=t,this},n.prototype.skip=function(t){return this._skip=t,this},n.prototype.sort=function(t){return this._sort=t,this},n.prototype.projection=function(t){return this._projection=t,this},n.prototype.project=function(t){var e,n,r,o=[],s=this;return void 0===this._projection||0===Object.keys(this._projection).length?t:(e=0!==this._projection._id,this._projection=i.omit(this._projection,"_id"),(r=Object.keys(this._projection)).forEach((function(t){if(void 0!==n&&s._projection[t]!==n)throw new Error("Can't both keep and omit fields except for _id");n=s._projection[t]})),t.forEach((function(t){var s=1===n?i.pick(t,r):i.omit(t,r);e?s._id=t._id:delete s._id,o.push(s)})),o)},n.prototype._exec=function(t){var e,n,i,o=this.db.getCandidates(this.query),s=[],a=0,l=0,c=this,h=null;try{for(e=0;e<o.length;e+=1)if(r.match(o[e],this.query))if(this._sort)s.push(o[e]);else if(this._skip&&this._skip>l)l+=1;else if(s.push(o[e]),a+=1,this._limit&&this._limit<=a)break}catch(e){return t(e)}if(this._sort){n=Object.keys(this._sort);var u=[];for(e=0;e<n.length;e++)i=n[e],u.push({key:i,direction:c._sort[i]});s.sort((function(t,e){var n,i,o;for(o=0;o<u.length;o++)if(0!=(i=(n=u[o]).direction*r.compareThings(r.getDotValue(t,n.key),r.getDotValue(e,n.key),c.db.compareStrings)))return i;return 0}));var f=this._limit||s.length,d=this._skip||0;s=s.slice(d,d+f)}try{s=this.project(s)}catch(t){h=t,s=void 0}return this.execFn?this.execFn(h,s,t):t(h,s)},n.prototype.exec=function(){this.db.executor.push({this:this,fn:this._exec,arguments})},e.exports=n},{"./model":10,underscore:19}],6:[function(t,e){e.exports.uid=function(t){return function(t){function e(t){return o[63&t>>18]+o[63&t>>12]+o[63&t>>6]+o[63&t]}var n,r,i,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=t.length%3,a="";for(i=0,r=t.length-s;r>i;i+=3)a+=e(n=(t[i]<<16)+(t[i+1]<<8)+t[i+2]);switch(s){case 1:n=t[t.length-1],a+=o[n>>2],a+=o[63&n<<4],a+="==";break;case 2:n=(t[t.length-2]<<8)+t[t.length-1],a+=o[n>>10],a+=o[63&n>>4],a+=o[63&n<<2],a+="="}return a}(function(t){for(var e,n=new Array(t),r=0;t>r;r++)0==(3&r)&&(e=4294967296*Math.random()),n[r]=255&e>>>((3&r)<<3);return n}(Math.ceil(Math.max(8,2*t)))).replace(/[+\/]/g,"").slice(0,t)}},{}],7:[function(t,e){function n(t){var e;"string"==typeof t?(e=t,this.inMemoryOnly=!1):(e=(t=t||{}).filename,this.inMemoryOnly=t.inMemoryOnly||!1,this.autoload=t.autoload||!1,this.timestampData=t.timestampData||!1),e&&"string"==typeof e&&0!==e.length?this.filename=e:(this.filename=null,this.inMemoryOnly=!0),this.compareStrings=t.compareStrings,this.persistence=new h({db:this,nodeWebkitAppName:t.nodeWebkitAppName,afterSerialization:t.afterSerialization,beforeDeserialization:t.beforeDeserialization,corruptAlertThreshold:t.corruptAlertThreshold}),this.executor=new s,this.inMemoryOnly&&(this.executor.ready=!0),this.indexes={},this.indexes._id=new a({fieldName:"_id",unique:!0}),this.autoload&&this.loadDatabase(t.onload||function(t){if(t)throw t})}var r=t("./customUtils"),i=t("./model"),o=t("async"),s=t("./executor"),a=t("./indexes"),l=t("util"),c=t("underscore"),h=t("./persistence"),u=t("./cursor");l.inherits(n,t("events").EventEmitter),n.prototype.loadDatabase=function(){this.executor.push({this:this.persistence,fn:this.persistence.loadDatabase,arguments},!0)},n.prototype.getAllData=function(){return this.indexes._id.getAll()},n.prototype.resetIndexes=function(t){var e=this;Object.keys(this.indexes).forEach((function(n){e.indexes[n].reset(t)}))},n.prototype.ensureIndex=function(t,e){var n,r=e||function(){};if(!(t=t||{}).fieldName)return(n=new Error("Cannot create an index without a fieldName")).missingFieldName=!0,r(n);if(this.indexes[t.fieldName])return r(null);this.indexes[t.fieldName]=new a(t);try{this.indexes[t.fieldName].insert(this.getAllData())}catch(e){return delete this.indexes[t.fieldName],r(e)}this.persistence.persistNewState([{$$indexCreated:t}],(function(t){return r(t||null)}))},n.prototype.removeIndex=function(t,e){var n=e||function(){};delete this.indexes[t],this.persistence.persistNewState([{$$indexRemoved:t}],(function(t){return n(t||null)}))},n.prototype.addToIndexes=function(t){var e,n,r,i=Object.keys(this.indexes);for(e=0;e<i.length;e+=1)try{this.indexes[i[e]].insert(t)}catch(t){n=e,r=t;break}if(r){for(e=0;n>e;e+=1)this.indexes[i[e]].remove(t);throw r}},n.prototype.removeFromIndexes=function(t){var e=this;Object.keys(this.indexes).forEach((function(n){e.indexes[n].remove(t)}))},n.prototype.updateIndexes=function(t,e){var n,r,i,o=Object.keys(this.indexes);for(n=0;n<o.length;n+=1)try{this.indexes[o[n]].update(t,e)}catch(t){r=n,i=t;break}if(i){for(n=0;r>n;n+=1)this.indexes[o[n]].revertUpdate(t,e);throw i}},n.prototype.getCandidates=function(t){var e,n=Object.keys(this.indexes);return e=[],Object.keys(t).forEach((function(n){("string"==typeof t[n]||"number"==typeof t[n]||"boolean"==typeof t[n]||l.isDate(t[n])||null===t[n])&&e.push(n)})),(e=c.intersection(e,n)).length>0?this.indexes[e[0]].getMatching(t[e[0]]):(e=[],Object.keys(t).forEach((function(n){t[n]&&t[n].hasOwnProperty("$in")&&e.push(n)})),(e=c.intersection(e,n)).length>0?this.indexes[e[0]].getMatching(t[e[0]].$in):(e=[],Object.keys(t).forEach((function(n){t[n]&&(t[n].hasOwnProperty("$lt")||t[n].hasOwnProperty("$lte")||t[n].hasOwnProperty("$gt")||t[n].hasOwnProperty("$gte"))&&e.push(n)})),(e=c.intersection(e,n)).length>0?this.indexes[e[0]].getBetweenBounds(t[e[0]]):this.getAllData()))},n.prototype._insert=function(t,e){var n,r=e||function(){};try{n=this.prepareDocumentForInsertion(t),this._insertInCache(n)}catch(t){return r(t)}this.persistence.persistNewState(l.isArray(n)?n:[n],(function(t){return t?r(t):r(null,i.deepCopy(n))}))},n.prototype.createNewId=function(){var t=r.uid(16);return this.indexes._id.getMatching(t).length>0&&(t=this.createNewId()),t},n.prototype.prepareDocumentForInsertion=function(t){var e,n=this;if(l.isArray(t))e=[],t.forEach((function(t){e.push(n.prepareDocumentForInsertion(t))}));else{void 0===(e=i.deepCopy(t))._id&&(e._id=this.createNewId());var r=new Date;this.timestampData&&void 0===e.createdAt&&(e.createdAt=r),this.timestampData&&void 0===e.updatedAt&&(e.updatedAt=r),i.checkObject(e)}return e},n.prototype._insertInCache=function(t){l.isArray(t)?this._insertMultipleDocsInCache(t):this.addToIndexes(t)},n.prototype._insertMultipleDocsInCache=function(t){var e,n,r;for(e=0;e<t.length;e+=1)try{this.addToIndexes(t[e])}catch(t){r=t,n=e;break}if(r){for(e=0;n>e;e+=1)this.removeFromIndexes(t[e]);throw r}},n.prototype.insert=function(){this.executor.push({this:this,fn:this._insert,arguments})},n.prototype.count=function(t,e){var n=new u(this,t,(function(t,e,n){return t?n(t):n(null,e.length)}));return"function"!=typeof e?n:void n.exec(e)},n.prototype.find=function(t,e,n){switch(arguments.length){case 1:e={};break;case 2:"function"==typeof e&&(n=e,e={})}var r=new u(this,t,(function(t,e,n){var r,o=[];if(t)return n(t);for(r=0;r<e.length;r+=1)o.push(i.deepCopy(e[r]));return n(null,o)}));return r.projection(e),"function"!=typeof n?r:void r.exec(n)},n.prototype.findOne=function(t,e,n){switch(arguments.length){case 1:e={};break;case 2:"function"==typeof e&&(n=e,e={})}var r=new u(this,t,(function(t,e,n){return t?n(t):1===e.length?n(null,i.deepCopy(e[0])):n(null,null)}));return r.projection(e).limit(1),"function"!=typeof n?r:void r.exec(n)},n.prototype._update=function(t,e,n,r){var s,a,l,h,f=this,d=0;"function"==typeof n&&(r=n,n={}),s=r||function(){},a=void 0!==n.multi&&n.multi,l=void 0!==n.upsert&&n.upsert,o.waterfall([function(n){if(!l)return n();new u(f,t).limit(1)._exec((function(r,o){if(r)return s(r);if(1===o.length)return n();var a;try{i.checkObject(e),a=e}catch(n){try{a=i.modify(i.deepCopy(t,!0),e)}catch(r){return s(r)}}return f._insert(a,(function(t,e){return t?s(t):s(null,1,e)}))}))},function(){var r,o=f.getCandidates(t),l=[];try{for(h=0;h<o.length;h+=1)i.match(o[h],t)&&(a||0===d)&&(d+=1,r=i.modify(o[h],e),f.timestampData&&(r.updatedAt=new Date),l.push({oldDoc:o[h],newDoc:r}))}catch(t){return s(t)}try{f.updateIndexes(l)}catch(t){return s(t)}var u=c.pluck(l,"newDoc");f.persistence.persistNewState(u,(function(t){if(t)return s(t);if(n.returnUpdatedDocs){var e=[];return u.forEach((function(t){e.push(i.deepCopy(t))})),s(null,d,e)}return s(null,d)}))}])},n.prototype.update=function(){this.executor.push({this:this,fn:this._update,arguments})},n.prototype._remove=function(t,e,n){var r,o,s=this,a=0,l=[],c=this.getCandidates(t);"function"==typeof e&&(n=e,e={}),r=n||function(){},o=void 0!==e.multi&&e.multi;try{c.forEach((function(e){i.match(e,t)&&(o||0===a)&&(a+=1,l.push({$$deleted:!0,_id:e._id}),s.removeFromIndexes(e))}))}catch(t){return r(t)}s.persistence.persistNewState(l,(function(t){return t?r(t):r(null,a)}))},n.prototype.remove=function(){this.executor.push({this:this,fn:this._remove,arguments})},e.exports=n},{"./cursor":5,"./customUtils":6,"./executor":8,"./indexes":9,"./model":10,"./persistence":11,async:13,events:1,underscore:19,util:3}],8:[function(t,e){function n(){this.buffer=[],this.ready=!1,this.queue=i.queue((function(t,e){var n,i,o=t.arguments[t.arguments.length-1],s=[];for(i=0;i<t.arguments.length;i+=1)s.push(t.arguments[i]);"function"==typeof o?(n=function(){"function"==typeof setImmediate?setImmediate(e):r.nextTick(e),o.apply(null,arguments)},s[s.length-1]=n):(n=function(){e()},s.push(n)),t.fn.apply(t.this,s)}),1)}var r=t("__browserify_process"),i=t("async");n.prototype.push=function(t,e){this.ready||e?this.queue.push(t):this.buffer.push(t)},n.prototype.processBuffer=function(){var t;for(this.ready=!0,t=0;t<this.buffer.length;t+=1)this.queue.push(this.buffer[t]);this.buffer=[]},e.exports=n},{__browserify_process:4,async:13}],9:[function(t,e){function n(t,e){return t===e}function r(t){return null===t?"$null":"string"==typeof t?"$string"+t:"boolean"==typeof t?"$boolean"+t:"number"==typeof t?"$number"+t:l.isArray(t)?"$date"+t.getTime():t}function i(t){this.fieldName=t.fieldName,this.unique=t.unique||!1,this.sparse=t.sparse||!1,this.treeOptions={unique:this.unique,compareKeys:s.compareThings,checkValueEquality:n},this.reset()}var o=t("binary-search-tree").AVLTree,s=t("./model"),a=t("underscore"),l=t("util");i.prototype.reset=function(t){this.tree=new o(this.treeOptions),t&&this.insert(t)},i.prototype.insert=function(t){var e,n,i,o,c;if(l.isArray(t))this.insertMultipleDocs(t);else if(void 0!==(e=s.getDotValue(t,this.fieldName))||!this.sparse)if(l.isArray(e)){for(n=a.uniq(e,r),i=0;i<n.length;i+=1)try{this.tree.insert(n[i],t)}catch(t){c=t,o=i;break}if(c){for(i=0;o>i;i+=1)this.tree.delete(n[i],t);throw c}}else this.tree.insert(e,t)},i.prototype.insertMultipleDocs=function(t){var e,n,r;for(e=0;e<t.length;e+=1)try{this.insert(t[e])}catch(t){n=t,r=e;break}if(n){for(e=0;r>e;e+=1)this.remove(t[e]);throw n}},i.prototype.remove=function(t){var e,n=this;return l.isArray(t)?void t.forEach((function(t){n.remove(t)})):void(void 0===(e=s.getDotValue(t,this.fieldName))&&this.sparse||(l.isArray(e)?a.uniq(e,r).forEach((function(e){n.tree.delete(e,t)})):this.tree.delete(e,t)))},i.prototype.update=function(t,e){if(l.isArray(t))this.updateMultipleDocs(t);else{this.remove(t);try{this.insert(e)}catch(e){throw this.insert(t),e}}},i.prototype.updateMultipleDocs=function(t){var e,n,r;for(e=0;e<t.length;e+=1)this.remove(t[e].oldDoc);for(e=0;e<t.length;e+=1)try{this.insert(t[e].newDoc)}catch(t){r=t,n=e;break}if(r){for(e=0;n>e;e+=1)this.remove(t[e].newDoc);for(e=0;e<t.length;e+=1)this.insert(t[e].oldDoc);throw r}},i.prototype.revertUpdate=function(t,e){var n=[];l.isArray(t)?(t.forEach((function(t){n.push({oldDoc:t.newDoc,newDoc:t.oldDoc})})),this.update(n)):this.update(e,t)},i.prototype.getMatching=function(t){var e=this;if(l.isArray(t)){var n={},r=[];return t.forEach((function(t){e.getMatching(t).forEach((function(t){n[t._id]=t}))})),Object.keys(n).forEach((function(t){r.push(n[t])})),r}return e.tree.search(t)},i.prototype.getBetweenBounds=function(t){return this.tree.betweenBounds(t)},i.prototype.getAll=function(){var t=[];return this.tree.executeOnEveryNode((function(e){var n;for(n=0;n<e.data.length;n+=1)t.push(e.data[n])})),t},e.exports=i},{"./model":10,"binary-search-tree":14,underscore:19,util:3}],10:[function(t,e){function n(t,e){if("number"==typeof t&&(t=t.toString()),!("$"!==t[0]||"$$date"===t&&"number"==typeof e||"$$deleted"===t&&!0===e||"$$indexCreated"===t||"$$indexRemoved"===t))throw new Error("Field names cannot begin with the $ character");if(-1!==t.indexOf("."))throw new Error("Field names cannot contain a .")}function r(t){p.isArray(t)&&t.forEach((function(t){r(t)})),"object"==typeof t&&null!==t&&Object.keys(t).forEach((function(e){n(e,t[e]),r(t[e])}))}function i(t,e){var n;return"boolean"==typeof t||"number"==typeof t||"string"==typeof t||null===t||p.isDate(t)?t:p.isArray(t)?(n=[],t.forEach((function(t){n.push(i(t,e))})),n):"object"==typeof t?(n={},Object.keys(t).forEach((function(r){(!e||"$"!==r[0]&&-1===r.indexOf("."))&&(n[r]=i(t[r],e))})),n):void 0}function o(t){return"boolean"==typeof t||"number"==typeof t||"string"==typeof t||null===t||p.isDate(t)||p.isArray(t)}function s(t,e){return e>t?-1:t>e?1:0}function a(t,e){var n,r;for(n=0;n<Math.min(t.length,e.length);n+=1)if(0!==(r=l(t[n],e[n])))return r;return s(t.length,e.length)}function l(t,e,n){var r,i,o,c,h=n||s;if(void 0===t)return void 0===e?0:-1;if(void 0===e)return void 0===t?0:1;if(null===t)return null===e?0:-1;if(null===e)return null===t?0:1;if("number"==typeof t)return"number"==typeof e?s(t,e):-1;if("number"==typeof e)return"number"==typeof t?s(t,e):1;if("string"==typeof t)return"string"==typeof e?h(t,e):-1;if("string"==typeof e)return"string"==typeof t?h(t,e):1;if("boolean"==typeof t)return"boolean"==typeof e?s(t,e):-1;if("boolean"==typeof e)return"boolean"==typeof t?s(t,e):1;if(p.isDate(t))return p.isDate(e)?s(t.getTime(),e.getTime()):-1;if(p.isDate(e))return p.isDate(t)?s(t.getTime(),e.getTime()):1;if(p.isArray(t))return p.isArray(e)?a(t,e):-1;if(p.isArray(e))return p.isArray(t)?a(t,e):1;for(r=Object.keys(t).sort(),i=Object.keys(e).sort(),c=0;c<Math.min(r.length,i.length);c+=1)if(0!==(o=l(t[r[c]],e[i[c]])))return o;return s(r.length,i.length)}function c(t,e){var n,r,i="string"==typeof e?e.split("."):e;if(t){if(0===i.length)return t;if(1===i.length)return t[i[0]];if(p.isArray(t[i[0]])){if("number"==typeof(n=parseInt(i[1],10))&&!isNaN(n))return c(t[i[0]][n],i.slice(2));for(r=new Array,n=0;n<t[i[0]].length;n+=1)r.push(c(t[i[0]][n],i.slice(1)));return r}return c(t[i[0]],i.slice(1))}}function h(t,e){var n,r,i;if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e)return t===e;if(p.isDate(t)||p.isDate(e))return p.isDate(t)&&p.isDate(e)&&t.getTime()===e.getTime();if((!p.isArray(t)||!p.isArray(e))&&(p.isArray(t)||p.isArray(e))||void 0===t||void 0===e)return!1;try{n=Object.keys(t),r=Object.keys(e)}catch(t){return!1}if(n.length!==r.length)return!1;for(i=0;i<n.length;i+=1){if(-1===r.indexOf(n[i]))return!1;if(!h(t[n[i]],e[n[i]]))return!1}return!0}function u(t,e){return!("string"!=typeof t&&"number"!=typeof t&&!p.isDate(t)&&"string"!=typeof e&&"number"!=typeof e&&!p.isDate(e))&&typeof t==typeof e}function f(t,e){var n,r,i,s;if(o(t)||o(e))return d({needAKey:t},"needAKey",e);for(n=Object.keys(e),s=0;s<n.length;s+=1)if(i=e[r=n[s]],"$"===r[0]){if(!b[r])throw new Error("Unknown logical operator "+r);if(!b[r](t,i))return!1}else if(!d(t,r,i))return!1;return!0}function d(t,e,n,r){var i,o,s,a,l=c(t,e);if(p.isArray(l)&&!r){if(p.isArray(n))return d(t,e,n,!0);if(null!==n&&"object"==typeof n&&!p.isRegExp(n))for(o=Object.keys(n),i=0;i<o.length;i+=1)if(y[o[i]])return d(t,e,n,!0);for(i=0;i<l.length;i+=1)if(d({k:l[i]},"k",n))return!0;return!1}if(null!==n&&"object"==typeof n&&!p.isRegExp(n)&&!p.isArray(n)){if(o=Object.keys(n),s=g.map(o,(function(t){return t[0]})),a=g.filter(s,(function(t){return"$"===t})),0!==a.length&&a.length!==s.length)throw new Error("You cannot mix operators and normal fields");if(a.length>0){for(i=0;i<o.length;i+=1){if(!v[o[i]])throw new Error("Unknown comparison function "+o[i]);if(!v[o[i]](l,n[o[i]]))return!1}return!0}}return p.isRegExp(n)?v.$regex(l,n):!!h(l,n)}var p=t("util"),g=t("underscore"),m={},O={},v={},b={},y={};O.$set=function(t,e,n){t[e]=n},O.$unset=function(t,e){delete t[e]},O.$push=function(t,e,n){if(t.hasOwnProperty(e)||(t[e]=[]),!p.isArray(t[e]))throw new Error("Can't $push an element on non-array values");if(null!==n&&"object"==typeof n&&n.$each){if(Object.keys(n).length>1)throw new Error("Can't use another field in conjunction with $each");if(!p.isArray(n.$each))throw new Error("$each requires an array value");n.$each.forEach((function(n){t[e].push(n)}))}else t[e].push(n)},O.$addToSet=function(t,e,n){var r=!0;if(t.hasOwnProperty(e)||(t[e]=[]),!p.isArray(t[e]))throw new Error("Can't $addToSet an element on non-array values");if(null!==n&&"object"==typeof n&&n.$each){if(Object.keys(n).length>1)throw new Error("Can't use another field in conjunction with $each");if(!p.isArray(n.$each))throw new Error("$each requires an array value");n.$each.forEach((function(n){O.$addToSet(t,e,n)}))}else t[e].forEach((function(t){0===l(t,n)&&(r=!1)})),r&&t[e].push(n)},O.$pop=function(t,e,n){if(!p.isArray(t[e]))throw new Error("Can't $pop an element from non-array values");if("number"!=typeof n)throw new Error(n+" isn't an integer, can't use it with $pop");0!==n&&(t[e]=n>0?t[e].slice(0,t[e].length-1):t[e].slice(1))},O.$pull=function(t,e,n){var r,i;if(!p.isArray(t[e]))throw new Error("Can't $pull an element from non-array values");for(i=(r=t[e]).length-1;i>=0;i-=1)f(r[i],n)&&r.splice(i,1)},O.$inc=function(t,e,n){if("number"!=typeof n)throw new Error(n+" must be a number");if("number"!=typeof t[e]){if(g.has(t,e))throw new Error("Don't use the $inc modifier on non-number fields");t[e]=n}else t[e]+=n},Object.keys(O).forEach((function(t){m[t]=function(t){return function(e,n,r){var i="string"==typeof n?n.split("."):n;1===i.length?O[t](e,n,r):(e[i[0]]=e[i[0]]||{},m[t](e[i[0]],i.slice(1),r))}}(t)})),v.$lt=function(t,e){return u(t,e)&&e>t},v.$lte=function(t,e){return u(t,e)&&e>=t},v.$gt=function(t,e){return u(t,e)&&t>e},v.$gte=function(t,e){return u(t,e)&&t>=e},v.$ne=function(t,e){return void 0===t||!h(t,e)},v.$in=function(t,e){var n;if(!p.isArray(e))throw new Error("$in operator called with a non-array");for(n=0;n<e.length;n+=1)if(h(t,e[n]))return!0;return!1},v.$nin=function(t,e){if(!p.isArray(e))throw new Error("$nin operator called with a non-array");return!v.$in(t,e)},v.$regex=function(t,e){if(!p.isRegExp(e))throw new Error("$regex operator called with non regular expression");return"string"==typeof t&&e.test(t)},v.$exists=function(t,e){return e=!(!e&&""!==e),void 0===t?!e:e},v.$size=function(t,e){if(!p.isArray(t))return!1;if(0!=e%1)throw new Error("$size operator called without an integer");return t.length==e},y.$size=!0,b.$or=function(t,e){var n;if(!p.isArray(e))throw new Error("$or operator used without an array");for(n=0;n<e.length;n+=1)if(f(t,e[n]))return!0;return!1},b.$and=function(t,e){var n;if(!p.isArray(e))throw new Error("$and operator used without an array");for(n=0;n<e.length;n+=1)if(!f(t,e[n]))return!1;return!0},b.$not=function(t,e){return!f(t,e)},b.$where=function(t,e){var n;if(!g.isFunction(e))throw new Error("$where operator used without a function");if(n=e.call(t),!g.isBoolean(n))throw new Error("$where function must return boolean");return n},e.exports.serialize=function(t){return JSON.stringify(t,(function(t,e){return n(t,e),void 0===e?void 0:null===e?null:"function"==typeof this[t].getTime?{$$date:this[t].getTime()}:e}))},e.exports.deserialize=function(t){return JSON.parse(t,(function(t,e){return"$$date"===t?new Date(e):"string"==typeof e||"number"==typeof e||"boolean"==typeof e||null===e?e:e&&e.$$date?e.$$date:e}))},e.exports.deepCopy=i,e.exports.checkObject=r,e.exports.isPrimitiveType=o,e.exports.modify=function(t,e){var n,o,s=Object.keys(e),a=g.map(s,(function(t){return t[0]})),l=g.filter(a,(function(t){return"$"===t}));if(-1!==s.indexOf("_id")&&e._id!==t._id)throw new Error("You cannot change a document's _id");if(0!==l.length&&l.length!==a.length)throw new Error("You cannot mix modifiers and normal fields");if(0===l.length?(n=i(e))._id=t._id:(o=g.uniq(s),n=i(t),o.forEach((function(t){if(!m[t])throw new Error("Unknown modifier "+t);if("object"!=typeof e[t])throw new Error("Modifier "+t+"'s argument must be an object");Object.keys(e[t]).forEach((function(r){m[t](n,r,e[t][r])}))}))),r(n),t._id!==n._id)throw new Error("You can't change a document's _id");return n},e.exports.getDotValue=c,e.exports.match=f,e.exports.areThingsEqual=h,e.exports.compareThings=l},{underscore:19,util:3}],11:[function(t,e){function n(t){var e,r,i;if(this.db=t.db,this.inMemoryOnly=this.db.inMemoryOnly,this.filename=this.db.filename,this.corruptAlertThreshold=void 0!==t.corruptAlertThreshold?t.corruptAlertThreshold:.1,!this.inMemoryOnly&&this.filename&&"~"===this.filename.charAt(this.filename.length-1))throw new Error("The datafile name can't end with a ~, which is reserved for crash safe backup files");if(t.afterSerialization&&!t.beforeDeserialization)throw new Error("Serialization hook defined but deserialization hook undefined, cautiously refusing to start NeDB to prevent dataloss");if(!t.afterSerialization&&t.beforeDeserialization)throw new Error("Serialization hook undefined but deserialization hook defined, cautiously refusing to start NeDB to prevent dataloss");for(this.afterSerialization=t.afterSerialization||function(t){return t},this.beforeDeserialization=t.beforeDeserialization||function(t){return t},e=1;30>e;e+=1)for(r=0;10>r;r+=1)if(i=l.uid(e),this.beforeDeserialization(this.afterSerialization(i))!==i)throw new Error("beforeDeserialization is not the reverse of afterSerialization, cautiously refusing to start NeDB to prevent dataloss");this.filename&&t.nodeWebkitAppName&&(console.log("=================================================================="),console.log("WARNING: The nodeWebkitAppName option is deprecated"),console.log("To get the path to the directory where Node Webkit stores the data"),console.log("for your app, use the internal nw.gui module like this"),console.log("require('nw.gui').App.dataPath"),console.log("See https://github.com/rogerwang/node-webkit/issues/500"),console.log("=================================================================="),this.filename=n.getNWAppFilename(t.nodeWebkitAppName,this.filename))}var r=t("__browserify_process"),i=t("./storage"),o=t("path"),s=t("./model"),a=t("async"),l=t("./customUtils"),c=t("./indexes");n.ensureDirectoryExists=function(t,e){var n=e||function(){};i.mkdirp(t,(function(t){return n(t)}))},n.getNWAppFilename=function(t,e){var n;switch(r.platform){case"win32":case"win64":if(!(n=r.env.LOCALAPPDATA||r.env.APPDATA))throw new Error("Couldn't find the base application data folder");n=o.join(n,t);break;case"darwin":if(!(n=r.env.HOME))throw new Error("Couldn't find the base application data directory");n=o.join(n,"Library","Application Support",t);break;case"linux":if(!(n=r.env.HOME))throw new Error("Couldn't find the base application data directory");n=o.join(n,".config",t);break;default:throw new Error("Can't use the Node Webkit relative path for platform "+r.platform)}return o.join(n,"nedb-data",e)},n.prototype.persistCachedDatabase=function(t){var e=t||function(){},n="",r=this;return this.inMemoryOnly?e(null):(this.db.getAllData().forEach((function(t){n+=r.afterSerialization(s.serialize(t))+"\n"})),Object.keys(this.db.indexes).forEach((function(t){"_id"!=t&&(n+=r.afterSerialization(s.serialize({$$indexCreated:{fieldName:t,unique:r.db.indexes[t].unique,sparse:r.db.indexes[t].sparse}}))+"\n")})),void i.crashSafeWriteFile(this.filename,n,(function(t){return t?e(t):(r.db.emit("compaction.done"),e(null))})))},n.prototype.compactDatafile=function(){this.db.executor.push({this:this,fn:this.persistCachedDatabase,arguments:[]})},n.prototype.setAutocompactionInterval=function(t){var e=this,n=Math.max(t||0,5e3);this.stopAutocompaction(),this.autocompactionIntervalId=setInterval((function(){e.compactDatafile()}),n)},n.prototype.stopAutocompaction=function(){this.autocompactionIntervalId&&clearInterval(this.autocompactionIntervalId)},n.prototype.persistNewState=function(t,e){var n=this,r="",o=e||function(){};return n.inMemoryOnly?o(null):(t.forEach((function(t){r+=n.afterSerialization(s.serialize(t))+"\n"})),0===r.length?o(null):void i.appendFile(n.filename,r,"utf8",(function(t){return o(t)})))},n.prototype.treatRawData=function(t){var e,n=t.split("\n"),r={},i=[],o={},a=-1;for(e=0;e<n.length;e+=1){var l;try{(l=s.deserialize(this.beforeDeserialization(n[e])))._id?!0===l.$$deleted?delete r[l._id]:r[l._id]=l:l.$$indexCreated&&null!=l.$$indexCreated.fieldName?o[l.$$indexCreated.fieldName]=l.$$indexCreated:"string"==typeof l.$$indexRemoved&&delete o[l.$$indexRemoved]}catch(t){a+=1}}if(n.length>0&&a/n.length>this.corruptAlertThreshold)throw new Error("More than "+Math.floor(100*this.corruptAlertThreshold)+"% of the data file is corrupt, the wrong beforeDeserialization hook may be used. Cautiously refusing to start NeDB to prevent dataloss");return Object.keys(r).forEach((function(t){i.push(r[t])})),{data:i,indexes:o}},n.prototype.loadDatabase=function(t){var e=t||function(){},r=this;return r.db.resetIndexes(),r.inMemoryOnly?e(null):void a.waterfall([function(t){n.ensureDirectoryExists(o.dirname(r.filename),(function(){i.ensureDatafileIntegrity(r.filename,(function(){i.readFile(r.filename,"utf8",(function(e,n){if(e)return t(e);try{var i=r.treatRawData(n)}catch(e){return t(e)}Object.keys(i.indexes).forEach((function(t){r.db.indexes[t]=new c(i.indexes[t])}));try{r.db.resetIndexes(i.data)}catch(e){return r.db.resetIndexes(),t(e)}r.db.persistence.persistCachedDatabase(t)}))}))}))}],(function(t){return t?e(t):(r.db.executor.processBuffer(),e(null))}))},e.exports=n},{"./customUtils":6,"./indexes":9,"./model":10,"./storage":12,__browserify_process:4,async:13,path:2}],12:[function(t,e){function n(t,e,n,i){"function"==typeof n&&(i=n),r.setItem(t,e,(function(){return i()}))}var r=t("localforage");r.config({name:"NeDB",storeName:"nedbdata"}),e.exports.exists=function(t,e){r.getItem(t,(function(t,n){return e(null!==n)}))},e.exports.rename=function(t,e,n){r.getItem(t,(function(i,o){null===o?r.removeItem(e,(function(){return n()})):r.setItem(e,o,(function(){r.removeItem(t,(function(){return n()}))}))}))},e.exports.writeFile=n,e.exports.crashSafeWriteFile=n,e.exports.appendFile=function(t,e,n,i){"function"==typeof n&&(i=n),r.getItem(t,(function(n,o){o=o||"",o+=e,r.setItem(t,o,(function(){return i()}))}))},e.exports.readFile=function(t,e,n){"function"==typeof e&&(n=e),r.getItem(t,(function(t,e){return n(null,e||"")}))},e.exports.unlink=function(t,e){r.removeItem(t,(function(){return e()}))},e.exports.mkdirp=function(t,e){return e()},e.exports.ensureDatafileIntegrity=function(t,e){return e(null)}},{localforage:18}],13:[function(t,e){var n=t("__browserify_process");!function(){function t(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(r,arguments)}}var r,i,o={};null!=(r=this)&&(i=r.async),o.noConflict=function(){return r.async=i,o};var s=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n+=1)e(t[n],n,t)},a=function(t,e){if(t.map)return t.map(e);var n=[];return s(t,(function(t,r,i){n.push(e(t,r,i))})),n},l=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};void 0!==n&&n.nextTick?(o.nextTick=n.nextTick,o.setImmediate="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:o.nextTick):"function"==typeof setImmediate?(o.nextTick=function(t){setImmediate(t)},o.setImmediate=o.nextTick):(o.nextTick=function(t){setTimeout(t,0)},o.setImmediate=o.nextTick),o.each=function(e,n,r){if(r=r||function(){},!e.length)return r();var i=0;s(e,(function(o){n(o,t((function(t){t?(r(t),r=function(){}):(i+=1)>=e.length&&r(null)})))}))},o.forEach=o.each,o.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var r=0,i=function(){e(t[r],(function(e){e?(n(e),n=function(){}):(r+=1)>=t.length?n(null):i()}))};i()},o.forEachSeries=o.eachSeries,o.eachLimit=function(t,e,n,r){c(e).apply(null,[t,n,r])},o.forEachLimit=o.eachLimit;var c=function(t){return function(e,n,r){if(r=r||function(){},!e.length||0>=t)return r();var i=0,o=0,s=0;!function a(){if(i>=e.length)return r();for(;t>s&&o<e.length;)s+=1,n(e[(o+=1)-1],(function(t){t?(r(t),r=function(){}):(s-=1,(i+=1)>=e.length?r():a())}))}()}},h=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[o.each].concat(e))}},u=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[o.eachSeries].concat(e))}},f=function(t,e,n,r){var i=[];e=a(e,(function(t,e){return{index:e,value:t}})),t(e,(function(t,e){n(t.value,(function(n,r){i[t.index]=r,e(n)}))}),(function(t){r(t,i)}))};o.map=h(f),o.mapSeries=u(f),o.mapLimit=function(t,e,n,r){return d(e)(t,n,r)};var d=function(t){return function(t,e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[c(t)].concat(n))}}(t,f)};o.reduce=function(t,e,n,r){o.eachSeries(t,(function(t,r){n(e,t,(function(t,n){e=n,r(t)}))}),(function(t){r(t,e)}))},o.inject=o.reduce,o.foldl=o.reduce,o.reduceRight=function(t,e,n,r){var i=a(t,(function(t){return t})).reverse();o.reduce(i,e,n,r)},o.foldr=o.reduceRight;var p=function(t,e,n,r){var i=[];e=a(e,(function(t,e){return{index:e,value:t}})),t(e,(function(t,e){n(t.value,(function(n){n&&i.push(t),e()}))}),(function(){r(a(i.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))};o.filter=h(p),o.filterSeries=u(p),o.select=o.filter,o.selectSeries=o.filterSeries;var g=function(t,e,n,r){var i=[];e=a(e,(function(t,e){return{index:e,value:t}})),t(e,(function(t,e){n(t.value,(function(n){n||i.push(t),e()}))}),(function(){r(a(i.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))};o.reject=h(g),o.rejectSeries=u(g);var m=function(t,e,n,r){t(e,(function(t,e){n(t,(function(n){n?(r(t),r=function(){}):e()}))}),(function(){r()}))};o.detect=h(m),o.detectSeries=u(m),o.some=function(t,e,n){o.each(t,(function(t,r){e(t,(function(t){t&&(n(!0),n=function(){}),r()}))}),(function(){n(!1)}))},o.any=o.some,o.every=function(t,e,n){o.each(t,(function(t,r){e(t,(function(t){t||(n(!1),n=function(){}),r()}))}),(function(){n(!0)}))},o.all=o.every,o.sortBy=function(t,e,n){o.map(t,(function(t,n){e(t,(function(e,r){e?n(e):n(null,{value:t,criteria:r})}))}),(function(t,e){if(t)return n(t);n(null,a(e.sort((function(t,e){var n=t.criteria,r=e.criteria;return r>n?-1:n>r?1:0})),(function(t){return t.value})))}))},o.auto=function(t,e){e=e||function(){};var n=l(t);if(!n.length)return e(null);var r={},i=[],a=function(t){i.unshift(t)},c=function(t){for(var e=0;e<i.length;e+=1)if(i[e]===t)return void i.splice(e,1)},h=function(){s(i.slice(0),(function(t){t()}))};a((function(){l(r).length===n.length&&(e(null,r),e=function(){})})),s(n,(function(n){var i=t[n]instanceof Function?[t[n]]:t[n],u=function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),t){var a={};s(l(r),(function(t){a[t]=r[t]})),a[n]=i,e(t,a),e=function(){}}else r[n]=i,o.setImmediate(h)},f=i.slice(0,Math.abs(i.length-1))||[],d=function(){return function(t,e,n){return t.reduce?t.reduce(e,n):(s(t,(function(t,r,i){n=e(n,t)})),n)}(f,(function(t,e){return t&&r.hasOwnProperty(e)}),!0)&&!r.hasOwnProperty(n)};if(d())i[i.length-1](u,r);else{var p=function(){d()&&(c(p),i[i.length-1](u,r))};a(p)}}))},o.waterfall=function(t,e){if(e=e||function(){},t.constructor!==Array){var n=new Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length)return e();var r=function(t){return function(n){if(n)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),s=t.next();s?i.push(r(s)):i.push(e),o.setImmediate((function(){t.apply(null,i)}))}}};r(o.iterator(t))()};var O=function(t,e,n){if(n=n||function(){},e.constructor===Array)t.map(e,(function(t,e){t&&t((function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)}))}),n);else{var r={};t.each(l(e),(function(t,n){e[t]((function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)}))}),(function(t){n(t,r)}))}};o.parallel=function(t,e){O({map:o.map,each:o.each},t,e)},o.parallelLimit=function(t,e,n){O({map:d(e),each:c(e)},t,n)},o.series=function(t,e){if(e=e||function(){},t.constructor===Array)o.mapSeries(t,(function(t,e){t&&t((function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)}))}),e);else{var n={};o.eachSeries(l(t),(function(e,r){t[e]((function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[e]=i,r(t)}))}),(function(t){e(t,n)}))}},o.iterator=function(t){var e=function(n){var r=function(){return t.length&&t[n].apply(null,arguments),r.next()};return r.next=function(){return n<t.length-1?e(n+1):null},r};return e(0)},o.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var v=function(t,e,n,r){var i=[];t(e,(function(t,e){n(t,(function(t,n){i=i.concat(n||[]),e(t)}))}),(function(t){r(t,i)}))};o.concat=h(v),o.concatSeries=u(v),o.whilst=function(t,e,n){t()?e((function(r){return r?n(r):void o.whilst(t,e,n)})):n()},o.doWhilst=function(t,e,n){t((function(r){return r?n(r):void(e()?o.doWhilst(t,e,n):n())}))},o.until=function(t,e,n){t()?n():e((function(r){return r?n(r):void o.until(t,e,n)}))},o.doUntil=function(t,e,n){t((function(r){return r?n(r):void(e()?n():o.doUntil(t,e,n))}))},o.queue=function(e,n){function r(t,e,r,i){e.constructor!==Array&&(e=[e]),s(e,(function(e){var s={data:e,callback:"function"==typeof i?i:null};r?t.tasks.unshift(s):t.tasks.push(s),t.saturated&&t.tasks.length===n&&t.saturated(),o.setImmediate(t.process)}))}void 0===n&&(n=1);var i=0,a={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(t,e){r(a,t,!1,e)},unshift:function(t,e){r(a,t,!0,e)},process:function(){if(i<a.concurrency&&a.tasks.length){var n=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),i+=1;var r=t((function(){i-=1,n.callback&&n.callback.apply(n,arguments),a.drain&&0===a.tasks.length+i&&a.drain(),a.process()}));e(n.data,r)}},length:function(){return a.tasks.length},running:function(){return i}};return a},o.cargo=function(t,e){var n=!1,r=[],i={tasks:r,payload:e,saturated:null,empty:null,drain:null,push:function(t,n){t.constructor!==Array&&(t=[t]),s(t,(function(t){r.push({data:t,callback:"function"==typeof n?n:null}),i.saturated&&r.length===e&&i.saturated()})),o.setImmediate(i.process)},process:function o(){if(!n){if(0===r.length)return void(i.drain&&i.drain());var l="number"==typeof e?r.splice(0,e):r.splice(0),c=a(l,(function(t){return t.data}));i.empty&&i.empty(),n=!0,t(c,(function(){n=!1;var t=arguments;s(l,(function(e){e.callback&&e.callback.apply(null,t)})),o()}))}},length:function(){return r.length},running:function(){return n}};return i};var b=function(t){return function(e){var n=Array.prototype.slice.call(arguments,1);e.apply(null,n.concat([function(e){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&s(n,(function(e){console[t](e)})))}]))}};o.log=b("log"),o.dir=b("dir"),o.memoize=function(t,e){var n={},r={};e=e||function(t){return t};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),s=e.apply(null,i);s in n?o.apply(null,n[s]):s in r?r[s].push(o):(r[s]=[o],t.apply(null,i.concat([function(){n[s]=arguments;var t=r[s];delete r[s];for(var e=0,i=t.length;i>e;e++)t[e].apply(null,arguments)}])))};return i.memo=n,i.unmemoized=t,i},o.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},o.times=function(t,e,n){for(var r=[],i=0;t>i;i++)r.push(i);return o.map(r,e,n)},o.timesSeries=function(t,e,n){for(var r=[],i=0;t>i;i++)r.push(i);return o.mapSeries(r,e,n)},o.compose=function(){var t=Array.prototype.reverse.call(arguments);return function(){var e=this,n=Array.prototype.slice.call(arguments),r=n.pop();o.reduce(t,n,(function(t,n,r){n.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);r(t,e)}]))}),(function(t,n){r.apply(e,[t].concat(n))}))}};var y=function(t,e){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return t(e,(function(t,e){t.apply(n,r.concat([e]))}),i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};o.applyEach=h(y),o.applyEachSeries=u(y),o.forever=function(t,e){!function n(r){if(r){if(e)return e(r);throw r}t(n)}()},void 0!==e&&e.exports?e.exports=o:r.async=o}()},{__browserify_process:4}],14:[function(t,e){e.exports.BinarySearchTree=t("./lib/bst"),e.exports.AVLTree=t("./lib/avltree")},{"./lib/avltree":15,"./lib/bst":16}],15:[function(t,e){function n(t){this.tree=new r(t)}function r(t){t=t||{},this.left=null,this.right=null,this.parent=void 0!==t.parent?t.parent:null,t.hasOwnProperty("key")&&(this.key=t.key),this.data=t.hasOwnProperty("value")?[t.value]:[],this.unique=t.unique||!1,this.compareKeys=t.compareKeys||o.defaultCompareKeysFunction,this.checkValueEquality=t.checkValueEquality||o.defaultCheckValueEquality}var i=t("./bst"),o=t("./customUtils"),s=t("util");t("underscore"),s.inherits(r,i),n._AVLTree=r,r.prototype.checkHeightCorrect=function(){var t,e;if(this.hasOwnProperty("key")){if(this.left&&void 0===this.left.height)throw new Error("Undefined height for node "+this.left.key);if(this.right&&void 0===this.right.height)throw new Error("Undefined height for node "+this.right.key);if(void 0===this.height)throw new Error("Undefined height for node "+this.key);if(t=this.left?this.left.height:0,e=this.right?this.right.height:0,this.height!==1+Math.max(t,e))throw new Error("Height constraint failed for node "+this.key);this.left&&this.left.checkHeightCorrect(),this.right&&this.right.checkHeightCorrect()}},r.prototype.balanceFactor=function(){return(this.left?this.left.height:0)-(this.right?this.right.height:0)},r.prototype.checkBalanceFactors=function(){if(Math.abs(this.balanceFactor())>1)throw new Error("Tree is unbalanced at node "+this.key);this.left&&this.left.checkBalanceFactors(),this.right&&this.right.checkBalanceFactors()},r.prototype.checkIsAVLT=function(){r.super_.prototype.checkIsBST.call(this),this.checkHeightCorrect(),this.checkBalanceFactors()},n.prototype.checkIsAVLT=function(){this.tree.checkIsAVLT()},r.prototype.rightRotation=function(){var t,e,n,r,i=this,o=this.left;return o?(t=o.right,i.parent?(o.parent=i.parent,i.parent.left===i?i.parent.left=o:i.parent.right=o):o.parent=null,o.right=i,i.parent=o,i.left=t,t&&(t.parent=i),e=o.left?o.left.height:0,n=t?t.height:0,r=i.right?i.right.height:0,i.height=Math.max(n,r)+1,o.height=Math.max(e,i.height)+1,o):this},r.prototype.leftRotation=function(){var t,e,n,r,i=this,o=this.right;return o?(t=o.left,i.parent?(o.parent=i.parent,i.parent.left===i?i.parent.left=o:i.parent.right=o):o.parent=null,o.left=i,i.parent=o,i.right=t,t&&(t.parent=i),e=i.left?i.left.height:0,n=t?t.height:0,r=o.right?o.right.height:0,i.height=Math.max(e,n)+1,o.height=Math.max(r,i.height)+1,o):this},r.prototype.rightTooSmall=function(){return this.balanceFactor()<=1?this:(this.left.balanceFactor()<0&&this.left.leftRotation(),this.rightRotation())},r.prototype.leftTooSmall=function(){return this.balanceFactor()>=-1?this:(this.right.balanceFactor()>0&&this.right.rightRotation(),this.leftRotation())},r.prototype.rebalanceAlongPath=function(t){var e,n,r=this;if(!this.hasOwnProperty("key"))return delete this.height,this;for(n=t.length-1;n>=0;n-=1)t[n].height=1+Math.max(t[n].left?t[n].left.height:0,t[n].right?t[n].right.height:0),t[n].balanceFactor()>1&&(e=t[n].rightTooSmall(),0===n&&(r=e)),t[n].balanceFactor()<-1&&(e=t[n].leftTooSmall(),0===n&&(r=e));return r},r.prototype.insert=function(t,e){var n=[],r=this;if(!this.hasOwnProperty("key"))return this.key=t,this.data.push(e),this.height=1,this;for(;;){if(0===r.compareKeys(r.key,t)){if(r.unique){var i=new Error("Can't insert key "+t+", it violates the unique constraint");throw i.key=t,i.errorType="uniqueViolated",i}return r.data.push(e),this}if(n.push(r),r.compareKeys(t,r.key)<0){if(!r.left){n.push(r.createLeftChild({key:t,value:e}));break}r=r.left}else{if(!r.right){n.push(r.createRightChild({key:t,value:e}));break}r=r.right}}return this.rebalanceAlongPath(n)},n.prototype.insert=function(t,e){var n=this.tree.insert(t,e);n&&(this.tree=n)},r.prototype.delete=function(t,e){var n,r=[],i=this,o=[];if(!this.hasOwnProperty("key"))return this;for(;0!==i.compareKeys(t,i.key);)if(o.push(i),i.compareKeys(t,i.key)<0){if(!i.left)return this;i=i.left}else{if(!i.right)return this;i=i.right}if(i.data.length>1&&e)return i.data.forEach((function(t){i.checkValueEquality(t,e)||r.push(t)})),i.data=r,this;if(!i.left&&!i.right)return i===this?(delete i.key,i.data=[],delete i.height,this):(i.parent.left===i?i.parent.left=null:i.parent.right=null,this.rebalanceAlongPath(o));if(!i.left||!i.right)return n=i.left?i.left:i.right,i===this?(n.parent=null,n):(i.parent.left===i?(i.parent.left=n,n.parent=i.parent):(i.parent.right=n,n.parent=i.parent),this.rebalanceAlongPath(o));if(o.push(i),!(n=i.left).right)return i.key=n.key,i.data=n.data,i.left=n.left,n.left&&(n.left.parent=i),this.rebalanceAlongPath(o);for(;n.right;)o.push(n),n=n.right;return i.key=n.key,i.data=n.data,n.parent.right=n.left,n.left&&(n.left.parent=n.parent),this.rebalanceAlongPath(o)},n.prototype.delete=function(t,e){var n=this.tree.delete(t,e);n&&(this.tree=n)},["getNumberOfKeys","search","betweenBounds","prettyPrint","executeOnEveryNode"].forEach((function(t){n.prototype[t]=function(){return this.tree[t].apply(this.tree,arguments)}})),e.exports=n},{"./bst":16,"./customUtils":17,underscore:19,util:3}],16:[function(t,e){function n(t){t=t||{},this.left=null,this.right=null,this.parent=void 0!==t.parent?t.parent:null,t.hasOwnProperty("key")&&(this.key=t.key),this.data=t.hasOwnProperty("value")?[t.value]:[],this.unique=t.unique||!1,this.compareKeys=t.compareKeys||i.defaultCompareKeysFunction,this.checkValueEquality=t.checkValueEquality||i.defaultCheckValueEquality}function r(t,e){var n;for(n=0;n<e.length;n+=1)t.push(e[n])}var i=t("./customUtils");n.prototype.getMaxKeyDescendant=function(){return this.right?this.right.getMaxKeyDescendant():this},n.prototype.getMaxKey=function(){return this.getMaxKeyDescendant().key},n.prototype.getMinKeyDescendant=function(){return this.left?this.left.getMinKeyDescendant():this},n.prototype.getMinKey=function(){return this.getMinKeyDescendant().key},n.prototype.checkAllNodesFullfillCondition=function(t){this.hasOwnProperty("key")&&(t(this.key,this.data),this.left&&this.left.checkAllNodesFullfillCondition(t),this.right&&this.right.checkAllNodesFullfillCondition(t))},n.prototype.checkNodeOrdering=function(){var t=this;this.hasOwnProperty("key")&&(this.left&&(this.left.checkAllNodesFullfillCondition((function(e){if(t.compareKeys(e,t.key)>=0)throw new Error("Tree with root "+t.key+" is not a binary search tree")})),this.left.checkNodeOrdering()),this.right&&(this.right.checkAllNodesFullfillCondition((function(e){if(t.compareKeys(e,t.key)<=0)throw new Error("Tree with root "+t.key+" is not a binary search tree")})),this.right.checkNodeOrdering()))},n.prototype.checkInternalPointers=function(){if(this.left){if(this.left.parent!==this)throw new Error("Parent pointer broken for key "+this.key);this.left.checkInternalPointers()}if(this.right){if(this.right.parent!==this)throw new Error("Parent pointer broken for key "+this.key);this.right.checkInternalPointers()}},n.prototype.checkIsBST=function(){if(this.checkNodeOrdering(),this.checkInternalPointers(),this.parent)throw new Error("The root shouldn't have a parent")},n.prototype.getNumberOfKeys=function(){var t;return this.hasOwnProperty("key")?(t=1,this.left&&(t+=this.left.getNumberOfKeys()),this.right&&(t+=this.right.getNumberOfKeys()),t):0},n.prototype.createSimilar=function(t){return(t=t||{}).unique=this.unique,t.compareKeys=this.compareKeys,t.checkValueEquality=this.checkValueEquality,new this.constructor(t)},n.prototype.createLeftChild=function(t){var e=this.createSimilar(t);return e.parent=this,this.left=e,e},n.prototype.createRightChild=function(t){var e=this.createSimilar(t);return e.parent=this,this.right=e,e},n.prototype.insert=function(t,e){if(!this.hasOwnProperty("key"))return this.key=t,void this.data.push(e);if(0!==this.compareKeys(this.key,t))this.compareKeys(t,this.key)<0?this.left?this.left.insert(t,e):this.createLeftChild({key:t,value:e}):this.right?this.right.insert(t,e):this.createRightChild({key:t,value:e});else{if(this.unique){var n=new Error("Can't insert key "+t+", it violates the unique constraint");throw n.key=t,n.errorType="uniqueViolated",n}this.data.push(e)}},n.prototype.search=function(t){return this.hasOwnProperty("key")?0===this.compareKeys(this.key,t)?this.data:this.compareKeys(t,this.key)<0?this.left?this.left.search(t):[]:this.right?this.right.search(t):[]:[]},n.prototype.getLowerBoundMatcher=function(t){var e=this;return t.hasOwnProperty("$gt")||t.hasOwnProperty("$gte")?t.hasOwnProperty("$gt")&&t.hasOwnProperty("$gte")?0===e.compareKeys(t.$gte,t.$gt)?function(n){return e.compareKeys(n,t.$gt)>0}:e.compareKeys(t.$gte,t.$gt)>0?function(n){return e.compareKeys(n,t.$gte)>=0}:function(n){return e.compareKeys(n,t.$gt)>0}:t.hasOwnProperty("$gt")?function(n){return e.compareKeys(n,t.$gt)>0}:function(n){return e.compareKeys(n,t.$gte)>=0}:function(){return!0}},n.prototype.getUpperBoundMatcher=function(t){var e=this;return t.hasOwnProperty("$lt")||t.hasOwnProperty("$lte")?t.hasOwnProperty("$lt")&&t.hasOwnProperty("$lte")?0===e.compareKeys(t.$lte,t.$lt)?function(n){return e.compareKeys(n,t.$lt)<0}:e.compareKeys(t.$lte,t.$lt)<0?function(n){return e.compareKeys(n,t.$lte)<=0}:function(n){return e.compareKeys(n,t.$lt)<0}:t.hasOwnProperty("$lt")?function(n){return e.compareKeys(n,t.$lt)<0}:function(n){return e.compareKeys(n,t.$lte)<=0}:function(){return!0}},n.prototype.betweenBounds=function(t,e,n){var i=[];return this.hasOwnProperty("key")?(e=e||this.getLowerBoundMatcher(t),n=n||this.getUpperBoundMatcher(t),e(this.key)&&this.left&&r(i,this.left.betweenBounds(t,e,n)),e(this.key)&&n(this.key)&&r(i,this.data),n(this.key)&&this.right&&r(i,this.right.betweenBounds(t,e,n)),i):[]},n.prototype.deleteIfLeaf=function(){return!(this.left||this.right||(this.parent?(this.parent.left===this?this.parent.left=null:this.parent.right=null,0):(delete this.key,this.data=[],0)))},n.prototype.deleteIfOnlyOneChild=function(){var t;return this.left&&!this.right&&(t=this.left),!this.left&&this.right&&(t=this.right),!!t&&(this.parent?(this.parent.left===this?(this.parent.left=t,t.parent=this.parent):(this.parent.right=t,t.parent=this.parent),!0):(this.key=t.key,this.data=t.data,this.left=null,t.left&&(this.left=t.left,t.left.parent=this),this.right=null,t.right&&(this.right=t.right,t.right.parent=this),!0))},n.prototype.delete=function(t,e){var n,r=[],i=this;if(this.hasOwnProperty("key")){if(this.compareKeys(t,this.key)<0)return void(this.left&&this.left.delete(t,e));if(this.compareKeys(t,this.key)>0)return void(this.right&&this.right.delete(t,e));if(0!==!this.compareKeys(t,this.key))return this.data.length>1&&void 0!==e?(this.data.forEach((function(t){i.checkValueEquality(t,e)||r.push(t)})),void(i.data=r)):void(this.deleteIfLeaf()||this.deleteIfOnlyOneChild()||(Math.random()>=.5?(n=this.left.getMaxKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?(this.left=n.left,n.left&&(n.left.parent=n.parent)):(n.parent.right=n.left,n.left&&(n.left.parent=n.parent))):(n=this.right.getMinKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?(this.right=n.right,n.right&&(n.right.parent=n.parent)):(n.parent.left=n.right,n.right&&(n.right.parent=n.parent)))))}},n.prototype.executeOnEveryNode=function(t){this.left&&this.left.executeOnEveryNode(t),t(this),this.right&&this.right.executeOnEveryNode(t)},n.prototype.prettyPrint=function(t,e){e=e||"",console.log(e+"* "+this.key),t&&console.log(e+"* "+this.data),(this.left||this.right)&&(this.left?this.left.prettyPrint(t,e+"  "):console.log(e+"  *"),this.right?this.right.prettyPrint(t,e+"  "):console.log(e+"  *"))},e.exports=n},{"./customUtils":17}],17:[function(t,e){e.exports.getRandomArray=function t(e){var n,r;return 0===e?[]:1===e?[0]:(n=t(e-1),r=Math.floor(Math.random()*e),n.splice(r,0,e-1),n)},e.exports.defaultCompareKeysFunction=function(t,e){if(e>t)return-1;if(t>e)return 1;if(t===e)return 0;var n=new Error("Couldn't compare elements");throw n.a=t,n.b=e,n},e.exports.defaultCheckValueEquality=function(t,e){return t===e}},{}],18:[function(t,e,n){var r=t("__browserify_process"),i=self;!function(){var t,e,n;!function(){var r={},i={};t=function(t,e,n){r[t]={deps:e,callback:n}},n=e=function(t){function o(e){if("."!==e.charAt(0))return e;for(var n=e.split("/"),r=t.split("/").slice(0,-1),i=0,o=n.length;o>i;i++){var s=n[i];if(".."===s)r.pop();else{if("."===s)continue;r.push(s)}}return r.join("/")}if(n._eak_seen=r,i[t])return i[t];if(i[t]={},!r[t])throw new Error("Could not find module "+t);for(var s,a=r[t],l=a.deps,c=a.callback,h=[],u=0,f=l.length;f>u;u++)"exports"===l[u]?h.push(s={}):h.push(e(o(l[u])));var d=c.apply(this,h);return i[t]=s||d}}(),t("promise/all",["./utils","exports"],(function(t,e){"use strict";var n=t.isArray,r=t.isFunction;e.all=function(t){if(!n(t))throw new TypeError("You must pass an array to all.");return new this((function(e,n){function i(t){return function(e){o(t,e)}}function o(t,n){a[t]=n,0==--l&&e(a)}var s,a=[],l=t.length;0===l&&e([]);for(var c=0;c<t.length;c++)(s=t[c])&&r(s.then)?s.then(i(c),n):o(c,s)}))}})),t("promise/asap",["exports"],(function(t){"use strict";function e(){for(var t=0;t<l.length;t++){var e=l[t];(0,e[0])(e[1])}l=[]}var n,o="undefined"!=typeof window?window:{},s=o.MutationObserver||o.WebKitMutationObserver,a=void 0!==i?i:void 0===this?window:this,l=[];n=void 0!==r&&"[object process]"==={}.toString.call(r)?function(){r.nextTick(e)}:s?function(){var t=0,n=new s(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}():function(){a.setTimeout(e,1)},t.asap=function(t,e){1===l.push([t,e])&&n()}})),t("promise/config",["exports"],(function(t){"use strict";var e={instrument:!1};t.config=e,t.configure=function(t,n){return 2!==arguments.length?e[t]:void(e[t]=n)}})),t("promise/polyfill",["./promise","./utils","exports"],(function(t,e,n){"use strict";var r=t.Promise,o=e.isFunction;n.polyfill=function(){var t;"Promise"in(t=void 0!==i?i:"undefined"!=typeof window&&window.document?window:self)&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise((function(t){e=t})),o(e)}()||(t.Promise=r)}})),t("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],(function(t,e,n,r,i,o,s,a){"use strict";function l(t){if(!y(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof l))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],function(t,e){function n(t){g(e,t)}try{t((function(t){d(e,t)}),n)}catch(t){n(t)}}(t,this)}function c(t,e,n,r){var i,o,s,a,l=y(n);if(l)try{i=n(r),s=!0}catch(t){a=!0,o=t}else i=r,s=!0;f(e,i)||(l&&s?d(e,i):a?g(e,o):t===E?d(e,i):t===T&&g(e,i))}function h(t,e,n,r){var i=t._subscribers,o=i.length;i[o]=e,i[o+E]=n,i[o+T]=r}function u(t,e){for(var n=t._subscribers,r=t._detail,i=0;i<n.length;i+=3)c(e,n[i],n[i+e],r);t._subscribers=null}function f(t,e){var n,r=null;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(b(e)&&(r=e.then,y(r)))return r.call(e,(function(r){return!!n||(n=!0,void(e!==r?d(t,r):p(t,r)))}),(function(e){return!!n||(n=!0,void g(t,e))})),!0}catch(e){return n||g(t,e),!0}return!1}function d(t,e){t===e?p(t,e):f(t,e)||p(t,e)}function p(t,e){t._state===Q&&(t._state=P,t._detail=e,v.async(m,t))}function g(t,e){t._state===Q&&(t._state=P,t._detail=e,v.async(O,t))}function m(t){u(t,t._state=E)}function O(t){u(t,t._state=T)}var v=t.config;t.configure;var b=e.objectOrFunction,y=e.isFunction;e.now;var w=n.all,x=r.race,S=i.resolve,k=o.reject,C=s.asap;v.async=C;var Q=void 0,P=0,E=1,T=2;l.prototype={constructor:l,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(t,e){var n=this,r=new this.constructor((function(){}));if(this._state){var i=arguments;v.async((function(){c(n._state,r,i[n._state-1],n._detail)}))}else h(this,r,t,e);return r},catch:function(t){return this.then(null,t)}},l.all=w,l.race=x,l.resolve=S,l.reject=k,a.Promise=l})),t("promise/race",["./utils","exports"],(function(t,e){"use strict";var n=t.isArray;e.race=function(t){if(!n(t))throw new TypeError("You must pass an array to race.");return new this((function(e,n){for(var r,i=0;i<t.length;i++)(r=t[i])&&"function"==typeof r.then?r.then(e,n):e(r)}))}})),t("promise/reject",["exports"],(function(t){"use strict";t.reject=function(t){return new this((function(e,n){n(t)}))}})),t("promise/resolve",["exports"],(function(t){"use strict";t.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this((function(e){e(t)}))}})),t("promise/utils",["exports"],(function(t){"use strict";function e(t){return"function"==typeof t}var n=Date.now||function(){return(new Date).getTime()};t.objectOrFunction=function(t){return e(t)||"object"==typeof t&&null!==t},t.isFunction=e,t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.now=n})),e("promise/polyfill").polyfill()}(),function(t,r){"object"==typeof n&&"object"==typeof e?e.exports=r():"object"==typeof n?n.localforage=r():t.localforage=r()}(this,(function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";e.__esModule=!0,function(){function t(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function r(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(arguments[0][n]=u(e[n])?e[n].slice():e[n])}return arguments[0]}function i(t){for(var e in s)if(s.hasOwnProperty(e)&&s[e]===t)return!0;return!1}var o={},s={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},a=[s.INDEXEDDB,s.WEBSQL,s.LOCALSTORAGE],l=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],c={description:"",driver:a.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},h=function(t){var e=e||t.indexedDB||t.webkitIndexedDB||t.mozIndexedDB||t.OIndexedDB||t.msIndexedDB,n={};return n[s.WEBSQL]=!!t.openDatabase,n[s.INDEXEDDB]=!!function(){if(void 0!==t.openDatabase&&t.navigator&&t.navigator.userAgent&&/Safari/.test(t.navigator.userAgent)&&!/Chrome/.test(t.navigator.userAgent))return!1;try{return e&&"function"==typeof e.open&&void 0!==t.IDBKeyRange}catch(t){return!1}}(),n[s.LOCALSTORAGE]=!!function(){try{return t.localStorage&&"setItem"in t.localStorage&&t.localStorage.setItem}catch(t){return!1}}(),n}(this),u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},f=function(){function e(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),this.INDEXEDDB=s.INDEXEDDB,this.LOCALSTORAGE=s.LOCALSTORAGE,this.WEBSQL=s.WEBSQL,this._defaultConfig=r({},c),this._config=r({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return e.prototype.config=function(t){if("object"==typeof t){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t)"storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),this._config[e]=t[e];return"driver"in t&&t.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof t?this._config[t]:this._config},e.prototype.defineDriver=function(t,e,n){var r=new Promise((function(e,n){try{var r=t._driver,s=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),a=new Error("Custom driver name already in use: "+t._driver);if(!t._driver)return void n(s);if(i(t._driver))return void n(a);for(var c=l.concat("_initStorage"),u=0;u<c.length;u++){var f=c[u];if(!f||!t[f]||"function"!=typeof t[f])return void n(s)}var d=Promise.resolve(!0);"_support"in t&&(d=t._support&&"function"==typeof t._support?t._support():Promise.resolve(!!t._support)),d.then((function(n){h[r]=n,o[r]=t,e()}),n)}catch(t){n(t)}}));return r.then(e,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,e,r){var s=this,a=function(){if(i(t))switch(t){case s.INDEXEDDB:return new Promise((function(t){t(n(1))}));case s.LOCALSTORAGE:return new Promise((function(t){t(n(2))}));case s.WEBSQL:return new Promise((function(t){t(n(4))}))}else if(o[t])return Promise.resolve(o[t]);return Promise.reject(new Error("Driver not found."))}();return a.then(e,r),a},e.prototype.getSerializer=function(t){var e=new Promise((function(t){t(n(3))}));return t&&"function"==typeof t&&e.then((function(e){t(e)})),e},e.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return n.then(t,t),n},e.prototype.setDriver=function(t,e,n){function r(){i._config.driver=i.driver()}var i=this;u(t)||(t=[t]);var o=this._getSupportedDrivers(t),s=null!==this._driverSet?this._driverSet.catch((function(){return Promise.resolve()})):Promise.resolve();return this._driverSet=s.then((function(){var t=o[0];return i._dbInfo=null,i._ready=null,i.getDriver(t).then((function(t){i._driver=t._driver,r(),i._wrapLibraryMethodsWithReady(),i._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var o=t[e];return e++,i._dbInfo=null,i._ready=null,i.getDriver(o).then((function(t){return i._extend(t),r(),i._ready=i._initStorage(i._config),i._ready})).catch(n)}r();var s=new Error("No available storage method found.");return i._driverSet=Promise.reject(s),i._driverSet}()}}(o)}))})).catch((function(){r();var t=new Error("No available storage method found.");return i._driverSet=Promise.reject(t),i._driverSet})),this._driverSet.then(e,n),this._driverSet},e.prototype.supports=function(t){return!!h[t]},e.prototype._extend=function(t){r(this,t)},e.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;r>n;n++){var i=t[n];this.supports(i)&&e.push(i)}return e},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<l.length;e++)t(this,l[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),d=new f;e.default=d}.call("undefined"!=typeof window?window:self),t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,function(){function t(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new(l.BlobBuilder||l.MSBlobBuilder||l.MozBlobBuilder||l.WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}function n(e){return new Promise((function(n,r){var i=t([""],{type:"image/png"}),o=e.transaction([f],"readwrite");o.objectStore(f).put(i,"key"),o.oncomplete=function(){var t=e.transaction([f],"readwrite").objectStore(f).get("key");t.onerror=r,t.onsuccess=function(t){var e=t.target.result,r=URL.createObjectURL(e);(function(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.withCredentials=!0,r.responseType="arraybuffer",r.onreadystatechange=function(){return 4===r.readyState?200===r.status?e({response:r.response,type:r.getResponseHeader("Content-Type")}):void n({status:r.status,response:r.response}):void 0},r.send()}))})(r).then((function(t){n(!(!t||"image/png"!==t.type))}),(function(){n(!1)})).then((function(){URL.revokeObjectURL(r)}))}}})).catch((function(){return!1}))}function r(t){return"boolean"==typeof h?Promise.resolve(h):n(t).then((function(t){return h=t}))}function i(e){var n=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;e>i;i++)r[i]=t.charCodeAt(i);return n}(atob(e.data));return t([n],{type:e.type})}function o(t){return t&&t.__local_forage_encoded_blob}function s(t,e){return new Promise((function(n,r){if(t.db){if(!e)return n(t.db);t.db.close()}var i=[t.name];e&&i.push(t.version);var o=c.open.apply(c,i);e&&(o.onupgradeneeded=function(e){var n=o.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;l.console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),o.onerror=function(){r(o.error)},o.onsuccess=function(){n(o.result)}}))}function a(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}var l=this,c=c||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(c){var h,u,f="local-forage-detect-blob-support",d={_driver:"asyncStorage",_initStorage:function(t){function e(){return Promise.resolve()}var n=this,r={db:null};if(t)for(var i in t)r[i]=t[i];u||(u={});var o=u[r.name];o||(o={forages:[],db:null},u[r.name]=o),o.forages.push(this);for(var a=[],c=0;c<o.forages.length;c++){var h=o.forages[c];h!==this&&a.push(h.ready().catch(e))}var f=o.forages.slice(0);return Promise.all(a).then((function(){return r.db=o.db,function(t){return s(t,!1)}(r)})).then((function(t){return r.db=t,function(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,i=t.version>t.db.version;if(r&&(t.version!==e&&l.console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),i||n){if(n){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}(r,n._defaultConfig.version)?function(t){return s(t,!0)}(r):t})).then((function(t){for(var e in r.db=o.db=t,n._dbInfo=r,f){var i=f[e];i!==n&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))},iterate:function(t,e){var n=this,r=new Promise((function(e,r){n.ready().then((function(){var s=n._dbInfo,a=s.db.transaction(s.storeName,"readonly").objectStore(s.storeName).openCursor(),l=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;o(r)&&(r=i(r));var s=t(r,n.key,l++);void 0!==s?e(s):n.continue()}else e()},a.onerror=function(){r(a.error)}})).catch(r)}));return a(r,e),r},getItem:function(t,e){var n=this;"string"!=typeof t&&(l.console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new Promise((function(e,r){n.ready().then((function(){var s=n._dbInfo,a=s.db.transaction(s.storeName,"readonly").objectStore(s.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),o(t)&&(t=i(t)),e(t)},a.onerror=function(){r(a.error)}})).catch(r)}));return a(r,e),r},setItem:function(t,e,n){var i=this;"string"!=typeof t&&(l.console.warn(t+" used as a key, but it is not a string."),t=String(t));var o=new Promise((function(n,o){var s;i.ready().then((function(){return r((s=i._dbInfo).db)})).then((function(t){return!t&&e instanceof Blob?function(t){return new Promise((function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:t.type})},r.readAsBinaryString(t)}))}(e):e})).then((function(e){var r=s.db.transaction(s.storeName,"readwrite"),i=r.objectStore(s.storeName);null===e&&(e=void 0);var a=i.put(e,t);r.oncomplete=function(){void 0===e&&(e=null),n(e)},r.onabort=r.onerror=function(){var t=a.error?a.error:a.transaction.error;o(t)}})).catch(o)}));return a(o,n),o},removeItem:function(t,e){var n=this;"string"!=typeof t&&(l.console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new Promise((function(e,r){n.ready().then((function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readwrite"),s=o.objectStore(i.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){r(s.error)},o.onabort=function(){var t=s.error?s.error:s.transaction.error;r(t)}})).catch(r)}));return a(r,e),r},clear:function(t){var e=this,n=new Promise((function(t,n){e.ready().then((function(){var r=e._dbInfo,i=r.db.transaction(r.storeName,"readwrite"),o=i.objectStore(r.storeName).clear();i.oncomplete=function(){t()},i.onabort=i.onerror=function(){var t=o.error?o.error:o.transaction.error;n(t)}})).catch(n)}));return a(n,t),n},length:function(t){var e=this,n=new Promise((function(t,n){e.ready().then((function(){var r=e._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){n(i.error)}})).catch(n)}));return a(n,t),n},key:function(t,e){var n=this,r=new Promise((function(e,r){return 0>t?void e(null):void n.ready().then((function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),s=!1,a=o.openCursor();a.onsuccess=function(){var n=a.result;return n?void(0===t||s?e(n.key):(s=!0,n.advance(t))):void e(null)},a.onerror=function(){r(a.error)}})).catch(r)}));return a(r,e),r},keys:function(t){var e=this,n=new Promise((function(t,n){e.ready().then((function(){var r=e._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName).openCursor(),o=[];i.onsuccess=function(){var e=i.result;return e?(o.push(e.key),void e.continue()):void t(o)},i.onerror=function(){n(i.error)}})).catch(n)}));return a(n,t),n}};e.default=d}}.call("undefined"!=typeof window?window:self),t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0,function(){function t(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}var r=this,i=null;try{if(!this.localStorage||!("setItem"in this.localStorage))return;i=this.localStorage}catch(t){return}var o={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var r in t)e[r]=t[r];return e.keyPrefix=e.name+"/",e.storeName!==this._defaultConfig.storeName&&(e.keyPrefix+=e.storeName+"/"),this._dbInfo=e,new Promise((function(t){t(n(3))})).then((function(t){return e.serializer=t,Promise.resolve()}))},iterate:function(e,n){var r=this,o=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,s=i.length,a=1,l=0;s>l;l++){var c=i.key(l);if(0===c.indexOf(n)){var h=i.getItem(c);if(h&&(h=t.serializer.deserialize(h)),void 0!==(h=e(h,c.substring(o),a++)))return h}}}));return t(o,n),o},getItem:function(e,n){var o=this;"string"!=typeof e&&(r.console.warn(e+" used as a key, but it is not a string."),e=String(e));var s=o.ready().then((function(){var t=o._dbInfo,n=i.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return t(s,n),s},setItem:function(e,n,o){var s=this;"string"!=typeof e&&(r.console.warn(e+" used as a key, but it is not a string."),e=String(e));var a=s.ready().then((function(){void 0===n&&(n=null);var t=n;return new Promise((function(r,o){var a=s._dbInfo;a.serializer.serialize(n,(function(n,s){if(s)o(s);else try{i.setItem(a.keyPrefix+e,n),r(t)}catch(t){("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&o(t),o(t)}}))}))}));return t(a,o),a},removeItem:function(e,n){var o=this;"string"!=typeof e&&(r.console.warn(e+" used as a key, but it is not a string."),e=String(e));var s=o.ready().then((function(){var t=o._dbInfo;i.removeItem(t.keyPrefix+e)}));return t(s,n),s},clear:function(e){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo.keyPrefix,e=i.length-1;e>=0;e--){var r=i.key(e);0===r.indexOf(t)&&i.removeItem(r)}}));return t(r,e),r},length:function(e){var n=this.keys().then((function(t){return t.length}));return t(n,e),n},key:function(e,n){var r=this,o=r.ready().then((function(){var t,n=r._dbInfo;try{t=i.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return t(o,n),o},keys:function(e){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,e=i.length,r=[],o=0;e>o;o++)0===i.key(o).indexOf(t.keyPrefix)&&r.push(i.key(o).substring(t.keyPrefix.length));return r}));return t(r,e),r}};e.default=o}.call("undefined"!=typeof window?window:self),t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,function(){function t(t){var e,n,i,o,s,a=.75*t.length,l=t.length,c=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),u=new Uint8Array(h);for(e=0;l>e;e+=4)n=r.indexOf(t[e]),i=r.indexOf(t[e+1]),o=r.indexOf(t[e+2]),s=r.indexOf(t[e+3]),u[c++]=n<<2|i>>4,u[c++]=(15&i)<<4|o>>2,u[c++]=(3&o)<<6|63&s;return h}function n(t){var e,n=new Uint8Array(t),i="";for(e=0;e<n.length;e+=3)i+=r[n[e]>>2],i+=r[(3&n[e])<<4|n[e+1]>>4],i+=r[(15&n[e+1])<<2|n[e+2]>>6],i+=r[63&n[e+2]];return 2==n.length%3?i=i.substring(0,i.length-1)+"=":1==n.length%3&&(i=i.substring(0,i.length-2)+"=="),i}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=/^~~local_forage_type~([^~]+)~/,o="__lfsc__:",s=o.length,a="arbf",l="blob",c="si08",h="ui08",u="uic8",f="si16",d="si32",p="ur16",g="ui32",m="fl32",O="fl64",v=s+a.length,b=this,y={serialize:function(t,e){var r="";if(t&&(r=t.toString()),t&&("[object ArrayBuffer]"===t.toString()||t.buffer&&"[object ArrayBuffer]"===t.buffer.toString())){var i,s=o;t instanceof ArrayBuffer?(i=t,s+=a):(i=t.buffer,"[object Int8Array]"===r?s+=c:"[object Uint8Array]"===r?s+=h:"[object Uint8ClampedArray]"===r?s+=u:"[object Int16Array]"===r?s+=f:"[object Uint16Array]"===r?s+=p:"[object Int32Array]"===r?s+=d:"[object Uint32Array]"===r?s+=g:"[object Float32Array]"===r?s+=m:"[object Float64Array]"===r?s+=O:e(new Error("Failed to get type for BinaryArray"))),e(s+n(i))}else if("[object Blob]"===r){var v=new FileReader;v.onload=function(){var r="~~local_forage_type~"+t.type+"~"+n(this.result);e(o+l+r)},v.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}},deserialize:function(e){if(e.substring(0,s)!==o)return JSON.parse(e);var n,r=e.substring(v),y=e.substring(s,v);if(y===l&&i.test(r)){var w=r.match(i);n=w[1],r=r.substring(w[0].length)}var x=t(r);switch(y){case a:return x;case l:return function(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new(b.BlobBuilder||b.MSBlobBuilder||b.MozBlobBuilder||b.WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}([x],{type:n});case c:return new Int8Array(x);case h:return new Uint8Array(x);case u:return new Uint8ClampedArray(x);case f:return new Int16Array(x);case p:return new Uint16Array(x);case d:return new Int32Array(x);case g:return new Uint32Array(x);case m:return new Float32Array(x);case O:return new Float64Array(x);default:throw new Error("Unkown type: "+y)}},stringToBuffer:t,bufferToString:n};e.default=y}.call("undefined"!=typeof window?window:self),t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0,function(){function t(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}var r=this,i=this.openDatabase;if(i){var o={_driver:"webSQLStorage",_initStorage:function(t){var e=this,r={db:null};if(t)for(var o in t)r[o]="string"!=typeof t[o]?t[o].toString():t[o];var s=new Promise((function(n,o){try{r.db=i(r.name,String(r.version),r.description,r.size)}catch(r){return e.setDriver(e.LOCALSTORAGE).then((function(){return e._initStorage(t)})).then(n).catch(o)}r.db.transaction((function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],(function(){e._dbInfo=r,n()}),(function(t,e){o(e)}))}))}));return new Promise((function(t){t(n(3))})).then((function(t){return r.serializer=t,s}))},iterate:function(e,n){var r=this,i=new Promise((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){r.executeSql("SELECT * FROM "+i.storeName,[],(function(n,r){for(var o=r.rows,s=o.length,a=0;s>a;a++){var l=o.item(a),c=l.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,l.key,a+1)))return void t(c)}t()}),(function(t,e){n(e)}))}))})).catch(n)}));return t(i,n),i},getItem:function(e,n){var i=this;"string"!=typeof e&&(r.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new Promise((function(t,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){i.executeSql("SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=r.serializer.deserialize(i)),t(i)}),(function(t,e){n(e)}))}))})).catch(n)}));return t(o,n),o},setItem:function(e,n,i){var o=this;"string"!=typeof e&&(r.console.warn(e+" used as a key, but it is not a string."),e=String(e));var s=new Promise((function(t,r){o.ready().then((function(){void 0===n&&(n=null);var i=n,s=o._dbInfo;s.serializer.serialize(n,(function(n,o){o?r(o):s.db.transaction((function(o){o.executeSql("INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[e,n],(function(){t(i)}),(function(t,e){r(e)}))}),(function(t){t.code===t.QUOTA_ERR&&r(t)}))}))})).catch(r)}));return t(s,i),s},removeItem:function(e,n){var i=this;"string"!=typeof e&&(r.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new Promise((function(t,n){i.ready().then((function(){var r=i._dbInfo;r.db.transaction((function(i){i.executeSql("DELETE FROM "+r.storeName+" WHERE key = ?",[e],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return t(o,n),o},clear:function(e){var n=this,r=new Promise((function(t,e){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){n.executeSql("DELETE FROM "+r.storeName,[],(function(){t()}),(function(t,n){e(n)}))}))})).catch(e)}));return t(r,e),r},length:function(e){var n=this,r=new Promise((function(t,e){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){n.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,n){e(n)}))}))})).catch(e)}));return t(r,e),r},key:function(e,n){var r=this,i=new Promise((function(t,n){r.ready().then((function(){var i=r._dbInfo;i.db.transaction((function(r){r.executeSql("SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return t(i,n),i},keys:function(e){var n=this,r=new Promise((function(t,e){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){n.executeSql("SELECT key FROM "+r.storeName,[],(function(e,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);t(r)}),(function(t,n){e(n)}))}))})).catch(e)}));return t(r,e),r}};e.default=o}}.call("undefined"!=typeof window?window:self),t.exports=e.default}])}))},{__browserify_process:4}],19:[function(t,e,n){(function(){var t=this,r=t._,i={},o=Array.prototype,s=Object.prototype,a=Function.prototype,l=o.push,c=o.slice,h=o.concat,u=s.toString,f=s.hasOwnProperty,d=o.forEach,p=o.map,g=o.reduce,m=o.reduceRight,O=o.filter,v=o.every,b=o.some,y=o.indexOf,w=o.lastIndexOf,x=Array.isArray,S=Object.keys,k=a.bind,C=function(t){return t instanceof C?t:this instanceof C?void(this._wrapped=t):new C(t)};void 0!==n?(void 0!==e&&e.exports&&(n=e.exports=C),n._=C):t._=C,C.VERSION="1.4.4";var Q=C.each=C.forEach=function(t,e,n){if(null!=t)if(d&&t.forEach===d)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var s in t)if(C.has(t,s)&&e.call(n,t[s],s,t)===i)return};C.map=C.collect=function(t,e,n){var r=[];return null==t?r:p&&t.map===p?t.map(e,n):(Q(t,(function(t,i,o){r[r.length]=e.call(n,t,i,o)})),r)};var P="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),g&&t.reduce===g)return r&&(e=C.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(Q(t,(function(t,o,s){i?n=e.call(r,n,t,o,s):(n=t,i=!0)})),!i)throw new TypeError(P);return n},C.reduceRight=C.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return r&&(e=C.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=C.keys(t);o=s.length}if(Q(t,(function(a,l,c){l=s?s[--o]:--o,i?n=e.call(r,n,t[l],l,c):(n=t[l],i=!0)})),!i)throw new TypeError(P);return n},C.find=C.detect=function(t,e,n){var r;return E(t,(function(t,i,o){return e.call(n,t,i,o)?(r=t,!0):void 0})),r},C.filter=C.select=function(t,e,n){var r=[];return null==t?r:O&&t.filter===O?t.filter(e,n):(Q(t,(function(t,i,o){e.call(n,t,i,o)&&(r[r.length]=t)})),r)},C.reject=function(t,e,n){return C.filter(t,(function(t,r,i){return!e.call(n,t,r,i)}),n)},C.every=C.all=function(t,e,n){e||(e=C.identity);var r=!0;return null==t?r:v&&t.every===v?t.every(e,n):(Q(t,(function(t,o,s){return(r=r&&e.call(n,t,o,s))?void 0:i})),!!r)};var E=C.some=C.any=function(t,e,n){e||(e=C.identity);var r=!1;return null==t?r:b&&t.some===b?t.some(e,n):(Q(t,(function(t,o,s){return r||(r=e.call(n,t,o,s))?i:void 0})),!!r)};C.contains=C.include=function(t,e){return null!=t&&(y&&t.indexOf===y?-1!=t.indexOf(e):E(t,(function(t){return t===e})))},C.invoke=function(t,e){var n=c.call(arguments,2),r=C.isFunction(e);return C.map(t,(function(t){return(r?e:t[e]).apply(t,n)}))},C.pluck=function(t,e){return C.map(t,(function(t){return t[e]}))},C.where=function(t,e,n){return C.isEmpty(e)?n?null:[]:C[n?"find":"filter"](t,(function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0}))},C.findWhere=function(t,e){return C.where(t,e,!0)},C.max=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&C.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return Q(t,(function(t,i,o){var s=e?e.call(n,t,i,o):t;s>=r.computed&&(r={value:t,computed:s})})),r.value},C.min=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&C.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return Q(t,(function(t,i,o){var s=e?e.call(n,t,i,o):t;s<r.computed&&(r={value:t,computed:s})})),r.value},C.shuffle=function(t){var e,n=0,r=[];return Q(t,(function(t){e=C.random(n++),r[n-1]=r[e],r[e]=t})),r};var T=function(t){return C.isFunction(t)?t:function(e){return e[t]}};C.sortBy=function(t,e,n){var r=T(e);return C.pluck(C.map(t,(function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index<e.index?-1:1})),"value")};var _=function(t,e,n,r){var i={},o=T(e||C.identity);return Q(t,(function(e,s){var a=o.call(n,e,s,t);r(i,a,e)})),i};C.groupBy=function(t,e,n){return _(t,e,n,(function(t,e,n){(C.has(t,e)?t[e]:t[e]=[]).push(n)}))},C.countBy=function(t,e,n){return _(t,e,n,(function(t,e){C.has(t,e)||(t[e]=0),t[e]++}))},C.sortedIndex=function(t,e,n,r){for(var i=(n=null==n?C.identity:T(n)).call(r,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(r,t[a])<i?o=a+1:s=a}return o},C.toArray=function(t){return t?C.isArray(t)?c.call(t):t.length===+t.length?C.map(t,C.identity):C.values(t):[]},C.size=function(t){return null==t?0:t.length===+t.length?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:c.call(t,0,e)},C.initial=function(t,e,n){return c.call(t,0,t.length-(null==e||n?1:e))},C.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},C.rest=C.tail=C.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},C.compact=function(t){return C.filter(t,C.identity)};var $=function(t,e,n){return Q(t,(function(t){C.isArray(t)?e?l.apply(n,t):$(t,e,n):n.push(t)})),n};C.flatten=function(t,e){return $(t,e,[])},C.without=function(t){return C.difference(t,c.call(arguments,1))},C.uniq=C.unique=function(t,e,n,r){C.isFunction(e)&&(r=n,n=e,e=!1);var i=n?C.map(t,n,r):t,o=[],s=[];return Q(i,(function(n,r){(e?r&&s[s.length-1]===n:C.contains(s,n))||(s.push(n),o.push(t[r]))})),o},C.union=function(){return C.uniq(h.apply(o,arguments))},C.intersection=function(t){var e=c.call(arguments,1);return C.filter(C.uniq(t),(function(t){return C.every(e,(function(e){return C.indexOf(e,t)>=0}))}))},C.difference=function(t){var e=h.apply(o,c.call(arguments,1));return C.filter(t,(function(t){return!C.contains(e,t)}))},C.zip=function(){for(var t=c.call(arguments),e=C.max(C.pluck(t,"length")),n=new Array(e),r=0;e>r;r++)n[r]=C.pluck(t,""+r);return n},C.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},C.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return t[r=C.sortedIndex(t,e)]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},C.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(w&&t.lastIndexOf===w)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},C.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,o=new Array(r);r>i;)o[i++]=t,t+=n;return o},C.bind=function(t,e){if(t.bind===k&&k)return k.apply(t,c.call(arguments,1));var n=c.call(arguments,2);return function(){return t.apply(e,n.concat(c.call(arguments)))}},C.partial=function(t){var e=c.call(arguments,1);return function(){return t.apply(this,e.concat(c.call(arguments)))}},C.bindAll=function(t){var e=c.call(arguments,1);return 0===e.length&&(e=C.functions(t)),Q(e,(function(e){t[e]=C.bind(t[e],t)})),t},C.memoize=function(t,e){var n={};return e||(e=C.identity),function(){var r=e.apply(this,arguments);return C.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},C.delay=function(t,e){var n=c.call(arguments,2);return setTimeout((function(){return t.apply(null,n)}),e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(c.call(arguments,1)))},C.throttle=function(t,e){var n,r,i,o,s=0,a=function(){s=new Date,i=null,o=t.apply(n,r)};return function(){var l=new Date,c=e-(l-s);return n=this,r=arguments,0>=c?(clearTimeout(i),i=null,s=l,o=t.apply(n,r)):i||(i=setTimeout(a,c)),o}},C.debounce=function(t,e,n){var r,i;return function(){var o=this,s=arguments,a=function(){r=null,n||(i=t.apply(o,s))},l=n&&!r;return clearTimeout(r),r=setTimeout(a,e),l&&(i=t.apply(o,s)),i}},C.once=function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments),t=null),e}},C.wrap=function(t,e){return function(){var n=[t];return l.apply(n,arguments),e.apply(this,n)}},C.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},C.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},C.keys=S||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)C.has(t,n)&&(e[e.length]=n);return e},C.values=function(t){var e=[];for(var n in t)C.has(t,n)&&e.push(t[n]);return e},C.pairs=function(t){var e=[];for(var n in t)C.has(t,n)&&e.push([n,t[n]]);return e},C.invert=function(t){var e={};for(var n in t)C.has(t,n)&&(e[t[n]]=n);return e},C.functions=C.methods=function(t){var e=[];for(var n in t)C.isFunction(t[n])&&e.push(n);return e.sort()},C.extend=function(t){return Q(c.call(arguments,1),(function(e){if(e)for(var n in e)t[n]=e[n]})),t},C.pick=function(t){var e={},n=h.apply(o,c.call(arguments,1));return Q(n,(function(n){n in t&&(e[n]=t[n])})),e},C.omit=function(t){var e={},n=h.apply(o,c.call(arguments,1));for(var r in t)C.contains(n,r)||(e[r]=t[r]);return e},C.defaults=function(t){return Q(c.call(arguments,1),(function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])})),t},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t};var M=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof C&&(t=t._wrapped),e instanceof C&&(e=e._wrapped);var i=u.call(t);if(i!=u.call(e))return!1;switch(i){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return r[o]==e;n.push(t),r.push(e);var s=0,a=!0;if("[object Array]"==i){if(a=(s=t.length)==e.length)for(;s--&&(a=M(t[s],e[s],n,r)););}else{var l=t.constructor,c=e.constructor;if(l!==c&&!(C.isFunction(l)&&l instanceof l&&C.isFunction(c)&&c instanceof c))return!1;for(var h in t)if(C.has(t,h)&&(s++,!(a=C.has(e,h)&&M(t[h],e[h],n,r))))break;if(a){for(h in e)if(C.has(e,h)&&!s--)break;a=!s}}return n.pop(),r.pop(),a};C.isEqual=function(t,e){return M(t,e,[],[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!==t.nodeType)},C.isArray=x||function(t){return"[object Array]"==u.call(t)},C.isObject=function(t){return t===Object(t)},Q(["Arguments","Function","String","Number","Date","RegExp"],(function(t){C["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}})),C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),C.isFunction=function(t){return"function"==typeof t},C.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},C.isNaN=function(t){return C.isNumber(t)&&t!=+t},C.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==u.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return f.call(t,e)},C.noConflict=function(){return t._=r,this},C.identity=function(t){return t},C.times=function(t,e,n){for(var r=Array(t),i=0;t>i;i++)r[i]=e.call(n,i);return r},C.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var R={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};R.unescape=C.invert(R.escape);var A={escape:new RegExp("["+C.keys(R.escape).join("")+"]","g"),unescape:new RegExp("("+C.keys(R.unescape).join("|")+")","g")};C.each(["escape","unescape"],(function(t){C[t]=function(e){return null==e?"":(""+e).replace(A[t],(function(e){return R[t][e]}))}})),C.result=function(t,e){if(null==t)return null;var n=t[e];return C.isFunction(n)?n.call(t):n},C.mixin=function(t){Q(C.functions(t),(function(e){var n=C[e]=t[e];C.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),N.call(this,n.apply(C,t))}}))};var D=0;C.uniqueId=function(t){var e=++D+"";return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Z=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(t,e,n){var r;n=C.defaults({},n,C.templateSettings);var i=new RegExp([(n.escape||W).source,(n.interpolate||W).source,(n.evaluate||W).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(i,(function(e,n,r,i,a){return s+=t.slice(o,a).replace(Z,(function(t){return"\\"+j[t]})),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),o=a+e.length,e})),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(n.variable||"obj","_",s)}catch(t){throw t.source=s,t}if(e)return r(e,C);var a=function(t){return r.call(this,t,C)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},C.chain=function(t){return C(t).chain()};var N=function(t){return this._chain?C(t).chain():t};C.mixin(C),Q(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=o[t];C.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],N.call(this,n)}})),Q(["concat","join","slice"],(function(t){var e=o[t];C.prototype[t]=function(){return N.call(this,e.apply(this._wrapped,arguments))}})),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}]},{},[7])(7)},"function"==typeof bootstrap?bootstrap("nedb",e):t.exports=e()},7634:(t,e,n)=>{"use strict";var r=n(1533);e.s=r.createRoot,r.hydrateRoot},1892:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},s=[],a=0;a<t.length;a++){var l=t[a],c=r.base?l[0]+r.base:l[0],h=o[c]||0,u="".concat(c," ").concat(h);o[c]=h+1;var f=n(u),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var p=i(d,r);r.byIndex=a,e.splice(a,0,{identifier:u,updater:p,references:1})}s.push(u)}return s}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var l=r(t,i),c=0;c<o.length;c++){var h=n(o[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=l}}},8311:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},8060:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},8192:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},5760:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4865:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},1533:t=>{"use strict";t.exports=ReactDOM},2155:(t,e,n)=>{"use strict";n.d(e,{kP:()=>i});let r=t=>crypto.getRandomValues(new Uint8Array(t)),i=(t,e=21)=>((t,e,n)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*r*e/t.length);return(o=e)=>{let s="";for(;;){let e=n(i),a=i;for(;a--;)if(s+=t[e[a]&r]||"",s.length===o)return s}}})(t,e,r)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.nc=void 0,(()=>{"use strict";const t=React;var e=n.n(t),r=n(7634),i=n(6292),o=n.n(i);const s=SemiUI;function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function l(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(i[n]=t[n]);return i}function c(e){var n=(0,t.useRef)(e),r=(0,t.useRef)((function(t){n.current&&n.current(t)}));return n.current=e,r.current}var h=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t>n?n:t<e?e:t},u=function(t){return"touches"in t},f=function(t){return t&&t.ownerDocument.defaultView||self},d=function(t,e,n){var r=t.getBoundingClientRect(),i=u(e)?function(t,e){for(var n=0;n<t.length;n++)if(t[n].identifier===e)return t[n];return t[0]}(e.touches,n):e;return{left:h((i.pageX-(r.left+f(t).pageXOffset))/r.width),top:h((i.pageY-(r.top+f(t).pageYOffset))/r.height)}},p=function(t){!u(t)&&t.preventDefault()},g=t.memo((function(e){var n=e.onMove,r=e.onKey,i=l(e,["onMove","onKey"]),o=(0,t.useRef)(null),s=c(n),h=c(r),g=(0,t.useRef)(null),m=(0,t.useRef)(!1),O=(0,t.useMemo)((function(){var t=function(t){p(t),(u(t)?t.touches.length>0:t.buttons>0)&&o.current?s(d(o.current,t,g.current)):n(!1)},e=function(){return n(!1)};function n(n){var r=m.current,i=f(o.current),s=n?i.addEventListener:i.removeEventListener;s(r?"touchmove":"mousemove",t),s(r?"touchend":"mouseup",e)}return[function(t){var e=t.nativeEvent,r=o.current;if(r&&(p(e),!function(t,e){return e&&!u(t)}(e,m.current)&&r)){if(u(e)){m.current=!0;var i=e.changedTouches||[];i.length&&(g.current=i[0].identifier)}r.focus(),s(d(r,e,g.current)),n(!0)}},function(t){var e=t.which||t.keyCode;e<37||e>40||(t.preventDefault(),h({left:39===e?.05:37===e?-.05:0,top:40===e?.05:38===e?-.05:0}))},n]}),[h,s]),v=O[0],b=O[1],y=O[2];return(0,t.useEffect)((function(){return y}),[y]),t.createElement("div",a({},i,{onTouchStart:v,onMouseDown:v,className:"react-colorful__interactive",ref:o,onKeyDown:b,tabIndex:0,role:"slider"}))})),m=function(t){return t.filter(Boolean).join(" ")},O=function(e){var n=e.color,r=e.left,i=e.top,o=void 0===i?.5:i,s=m(["react-colorful__pointer",e.className]);return t.createElement("div",{className:s,style:{top:100*o+"%",left:100*r+"%"}},t.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:n}}))},v=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=Math.pow(10,e)),Math.round(n*t)/n},b=(Math.PI,function(t){return C(y(t))}),y=function(t){return"#"===t[0]&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?v(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:8===t.length?v(parseInt(t.substring(6,8),16)/255,2):1}},w=function(t){var e=function(t){var e=t.s,n=t.v,r=t.a,i=(200-e)*n/100;return{h:v(t.h),s:v(i>0&&i<200?e*n/100/(i<=100?i:200-i)*100:0),l:v(i/2),a:v(r,2)}}(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},x=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var o=Math.floor(e),s=r*(1-n),a=r*(1-(e-o)*n),l=r*(1-(1-e+o)*n),c=o%6;return{r:v(255*[r,a,s,s,l,r][c]),g:v(255*[l,r,r,a,s,s][c]),b:v(255*[s,s,l,r,r,a][c]),a:v(i,2)}},S=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},k=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,o=i<1?S(v(255*i)):"";return"#"+S(e)+S(n)+S(r)+o},C=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,o=Math.max(e,n,r),s=o-Math.min(e,n,r),a=s?o===e?(n-r)/s:o===n?2+(r-e)/s:4+(e-n)/s:0;return{h:v(60*(a<0?a+6:a)),s:v(o?s/o*100:0),v:v(o/255*100),a:i}},Q=t.memo((function(e){var n=e.hue,r=e.onChange,i=m(["react-colorful__hue",e.className]);return t.createElement("div",{className:i},t.createElement(g,{onMove:function(t){r({h:360*t.left})},onKey:function(t){r({h:h(n+360*t.left,0,360)})},"aria-label":"Hue","aria-valuenow":v(n),"aria-valuemax":"360","aria-valuemin":"0"},t.createElement(O,{className:"react-colorful__hue-pointer",left:n/360,color:w({h:n,s:100,v:100,a:1})})))})),P=t.memo((function(e){var n=e.hsva,r=e.onChange,i={backgroundColor:w({h:n.h,s:100,v:100,a:1})};return t.createElement("div",{className:"react-colorful__saturation",style:i},t.createElement(g,{onMove:function(t){r({s:100*t.left,v:100-100*t.top})},onKey:function(t){r({s:h(n.s+100*t.left,0,100),v:h(n.v-100*t.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+v(n.s)+"%, Brightness "+v(n.v)+"%"},t.createElement(O,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:w(n)})))})),E=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0};function T(e,n,r){var i=c(r),o=(0,t.useState)((function(){return e.toHsva(n)})),s=o[0],a=o[1],l=(0,t.useRef)({color:n,hsva:s});(0,t.useEffect)((function(){if(!e.equal(n,l.current.color)){var t=e.toHsva(n);l.current={hsva:t,color:n},a(t)}}),[n,e]),(0,t.useEffect)((function(){var t;E(s,l.current.hsva)||e.equal(t=e.fromHsva(s),l.current.color)||(l.current={hsva:s,color:t},i(t))}),[s,e,i]);var h=(0,t.useCallback)((function(t){a((function(e){return Object.assign({},e,t)}))}),[]);return[s,h]}var _="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,$=new Map,M=function(e){var r,i=e.className,o=e.colorModel,s=e.color,c=void 0===s?o.defaultColor:s,h=e.onChange,u=l(e,["className","colorModel","color","onChange"]),f=(0,t.useRef)(null);r=f,_((function(){var t=r.current?r.current.ownerDocument:document;if(void 0!==t&&!$.has(t)){var e=t.createElement("style");e.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',$.set(t,e);var i=n.nc;i&&e.setAttribute("nonce",i),t.head.appendChild(e)}}),[]);var d=T(o,c,h),p=d[0],g=d[1],O=m(["react-colorful",i]);return t.createElement("div",a({},u,{ref:f,className:O}),t.createElement(P,{hsva:p,onChange:g}),t.createElement(Q,{hue:p.h,onChange:g,className:"react-colorful__last-control"}))},R={defaultColor:"000",toHsva:b,fromHsva:function(t){return function(t){return k(x(t))}({h:t.h,s:t.s,v:t.v,a:1})},equal:function(t,e){return t.toLowerCase()===e.toLowerCase()||E(y(t),y(e))}},A=function(e){return t.createElement(M,a({},e,{colorModel:R}))};const D=(0,s.withField)((t=>{let n=[0,"solid","#fff"];return t.value&&(n=t.value.split(" "),n[0]=parseInt(n[0])),e().createElement(s.Space,null,e().createElement(s.InputNumber,{style:{width:"64px"},defaultValue:n[0],value:n[0],onChange:e=>{t.onChange(e+"px "+n[1]+" "+n[2])}})," ",e().createElement(s.Select,{value:n[1],optionList:[{label:"实线",value:"solid"},{label:"点划线",value:"dashed"}],onChange:e=>{t.onChange(n[0]+"px "+e+" "+n[2])}}),e().createElement(s.Popover,{content:e().createElement(A,{color:n[2],onChange:e=>{t.onChange(n[0]+"px "+n[1]+" "+e)}})},e().createElement(s.Button,{style:{backgroundColor:n[2]}})))})),W="semi";var j=n(42),Z=n.n(j),N=n(1892),B=n.n(N),V=n(5760),I=n.n(V),X=n(8311),U=n.n(X),q=n(8192),z=n.n(q),Y=n(8060),L=n.n(Y),G=n(4865),F=n.n(G),H=n(7543),K={};K.styleTagTransform=F(),K.setAttributes=z(),K.insert=U().bind(null,"head"),K.domAPI=I(),K.insertStyleElement=L(),B()(H.Z,K),H.Z&&H.Z.locals&&H.Z.locals;const J=e().forwardRef(((t,n)=>{const{svg:r,spin:i=!1,rotate:o,style:s,className:a,prefixCls:l=W,type:c,size:h="default"}=t,u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["svg","spin","rotate","style","className","prefixCls","type","size"]),f=Z()("".concat(l,"-icon"),{["".concat(l,"-icon-extra-small")]:"extra-small"===h,["".concat(l,"-icon-small")]:"small"===h,["".concat(l,"-icon-default")]:"default"===h,["".concat(l,"-icon-large")]:"large"===h,["".concat(l,"-icon-extra-large")]:"extra-large"===h,["".concat(l,"-icon-spinning")]:!0===i,["".concat(l,"-icon-").concat(c)]:Boolean(c)},a),d={};return Number.isSafeInteger(o)&&(d.transform="rotate(".concat(o,"deg)")),Object.assign(d,s),e().createElement("span",Object.assign({role:"img",ref:n,"aria-label":c,className:f,style:d},u),r)}));J.elementType="Icon";const tt=(t,n)=>{const r=e().forwardRef(((r,i)=>e().createElement(J,Object.assign({svg:e().createElement(t),type:n,ref:i},r))));return r.elementType="Icon",r},et=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M17.6568 19.7782C18.2426 20.3639 19.1924 20.3639 19.7782 19.7782C20.3639 19.1924 20.3639 18.2426 19.7782 17.6568L14.1213 12L19.7782 6.34313C20.3639 5.75734 20.3639 4.8076 19.7782 4.22181C19.1924 3.63602 18.2426 3.63602 17.6568 4.22181L12 9.87866L6.34313 4.22181C5.75734 3.63602 4.8076 3.63602 4.22181 4.22181C3.63602 4.8076 3.63602 5.75734 4.22181 6.34313L9.87866 12L4.22181 17.6568C3.63602 18.2426 3.63602 19.1924 4.22181 19.7782C4.8076 20.3639 5.75734 20.3639 6.34313 19.7782L12 14.1213L17.6568 19.7782Z",fill:"currentColor"}))}),"close"),nt=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4885 4.18603C14.5912 3.364 14.0081 2.61431 13.1861 2.51156C12.3641 2.4088 11.6144 2.99189 11.5116 3.81392L9.51162 19.8139C9.40886 20.636 9.99195 21.3856 10.814 21.4884C11.636 21.5911 12.3857 21.0081 12.4885 20.186L14.4885 4.18603ZM8.06066 5.93931C8.64645 6.5251 8.64645 7.47485 8.06066 8.06063L4.12132 12L8.06066 15.9393C8.64645 16.5251 8.64645 17.4748 8.06066 18.0606C7.47487 18.6464 6.52513 18.6464 5.93934 18.0606L0.93934 13.0606C0.353553 12.4748 0.353553 11.5251 0.93934 10.9393L5.93934 5.93931C6.52513 5.35353 7.47487 5.35353 8.06066 5.93931ZM15.9393 5.93931C16.5251 5.35353 17.4749 5.35353 18.0607 5.93931L23.0607 10.9393C23.6464 11.5251 23.6464 12.4748 23.0607 13.0606L18.0607 18.0606C17.4749 18.6464 16.5251 18.6464 15.9393 18.0606C15.3536 17.4748 15.3536 16.5251 15.9393 15.9393L19.8787 12L15.9393 8.06063C15.3536 7.47485 15.3536 6.5251 15.9393 5.93931Z",fill:"currentColor"}))}),"code"),rt=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.38055 2C9.00251 2 8.65678 2.21319 8.48703 2.55098L7.00505 5.5H3C2.44772 5.5 2 5.94772 2 6.5V7.5C2 8.05228 2.44772 8.5 3 8.5H21C21.5523 8.5 22 8.05228 22 7.5V6.5C22 5.94772 21.5523 5.5 21 5.5H16.9949L15.5129 2.55098C15.3432 2.21319 14.9975 2 14.6194 2H9.38055ZM14.8571 5.5L14.1439 4.25193C14.0549 4.09614 13.8893 4 13.7098 4H10.2901C10.1107 4 9.94505 4.09614 9.85602 4.25193L9.14284 5.5H14.8571ZM18.7192 10H5.28078C4.6302 10 4.15285 10.6114 4.31063 11.2425L6.4319 19.7276C6.76578 21.0631 7.96573 22 9.34233 22H14.6577C16.0343 22 17.2342 21.0631 17.5681 19.7276L19.6894 11.2425C19.8472 10.6114 19.3698 10 18.7192 10Z",fill:"currentColor"}))}),"delete"),it=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M14.4999 4.49994L19.4999 9.49994L21.5857 7.41416C22.3667 6.63311 22.3667 5.36678 21.5857 4.58573L19.4141 2.41415C18.6331 1.63311 17.3667 1.63311 16.5857 2.41416L14.4999 4.49994Z",fill:"currentColor"}),t.createElement("path",{d:"M2.24715 21.1346L3.92871 15.2491C3.9754 15.0857 4.06296 14.9369 4.18313 14.8167L12.9999 5.99994L17.9999 10.9999L9.18313 19.8167C9.06296 19.9369 8.91415 20.0244 8.75074 20.0711L2.86527 21.7527C2.48809 21.8605 2.13938 21.5117 2.24715 21.1346Z",fill:"currentColor"}))}),"edit"),ot=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.41549 2.17229C7.80602 1.78176 8.43918 1.78176 8.82971 2.17229L18.264 11.6066C18.6545 11.9971 18.6545 12.6303 18.264 13.0208C18.2565 13.0282 18.249 13.0356 18.2413 13.0427L11.5462 19.7379C10.5699 20.7142 8.98698 20.7142 8.01067 19.7379L2.35382 14.081C1.3775 13.1047 1.3775 11.5218 2.35382 10.5455L8.36415 4.53516L7.41549 3.5865C7.02497 3.19598 7.02497 2.56281 7.41549 2.17229ZM9.77836 5.94937L16.1423 12.3133L13.9558 14.4998H5.60107L3.76803 12.6668C3.57277 12.4715 3.57277 12.155 3.76803 11.9597L9.77836 5.94937ZM21 18.9998C21 20.1043 20.3285 20.9998 19.5 20.9998C18.6716 20.9998 18 20.1044 18 18.9998C18 17.9207 18.6615 16.5108 19.106 15.6854C19.2801 15.3618 19.7199 15.3618 19.8941 15.6854C20.3386 16.5108 21 17.9207 21 18.9998Z",fill:"currentColor"}))}),"fill_stroked"),st=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M9 7C10.1046 7 11 6.10457 11 5C11 3.89543 10.1046 3 9 3C7.89543 3 7 3.89543 7 5C7 6.10457 7.89543 7 9 7Z",fill:"currentColor"}),t.createElement("path",{d:"M9 14C10.1046 14 11 13.1046 11 12C11 10.8954 10.1046 10 9 10C7.89543 10 7 10.8954 7 12C7 13.1046 7.89543 14 9 14Z",fill:"currentColor"}),t.createElement("path",{d:"M11 19C11 20.1046 10.1046 21 9 21C7.89543 21 7 20.1046 7 19C7 17.8954 7.89543 17 9 17C10.1046 17 11 17.8954 11 19Z",fill:"currentColor"}),t.createElement("path",{d:"M15 7C16.1046 7 17 6.10457 17 5C17 3.89543 16.1046 3 15 3C13.8954 3 13 3.89543 13 5C13 6.10457 13.8954 7 15 7Z",fill:"currentColor"}),t.createElement("path",{d:"M17 12C17 13.1046 16.1046 14 15 14C13.8954 14 13 13.1046 13 12C13 10.8954 13.8954 10 15 10C16.1046 10 17 10.8954 17 12Z",fill:"currentColor"}),t.createElement("path",{d:"M15 21C16.1046 21 17 20.1046 17 19C17 17.8954 16.1046 17 15 17C13.8954 17 13 17.8954 13 19C13 20.1046 13.8954 21 15 21Z",fill:"currentColor"}))}),"handle"),at=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0001 4.5C16.1422 4.5 19.5 7.85786 19.5 12C19.5 16.1421 16.1422 19.5 12.0001 19.5C8.73699 19.5 5.95692 17.4151 4.92663 14.5001C4.65057 13.7191 3.7936 13.3097 3.01254 13.5857C2.23147 13.8618 1.82209 14.7188 2.09816 15.4999C3.53885 19.576 7.42611 22.5 12.0001 22.5C17.799 22.5 22.5 17.799 22.5 12C22.5 6.20101 17.799 1.5 12.0001 1.5C8.42348 1.5 5.26674 3.28785 3.37132 6.01642L2.93709 4.56899C2.69904 3.7755 1.86282 3.32523 1.06935 3.56328C0.275874 3.80133 -0.17439 4.63756 0.0636565 5.43105L1.56366 10.431C1.78602 11.1723 2.53574 11.6227 3.29455 11.4709L8.29447 10.4709C9.1068 10.3084 9.63362 9.51818 9.47115 8.70584C9.30869 7.8935 8.51846 7.36668 7.70613 7.52915L5.69871 7.93064C7.03543 5.86515 9.35963 4.5 12.0001 4.5ZM13.5 7.5C13.5 6.67157 12.8284 6 12 6C11.1716 6 10.5 6.67157 10.5 7.5V12C10.5 12.3978 10.658 12.7794 10.9393 13.0607L13.9393 16.0607C14.5251 16.6464 15.4749 16.6464 16.0607 16.0607C16.6464 15.4749 16.6464 14.5251 16.0607 13.9393L13.5 11.3787V7.5Z",fill:"currentColor"}))}),"history"),lt=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 4.5C2 3.67157 2.67157 3 3.5 3H20.5C21.3284 3 22 3.67157 22 4.5V9.5C22 10.3284 21.3284 11 20.5 11H9V16H14V14.5C14 13.6716 14.6716 13 15.5 13H20.5C21.3284 13 22 13.6716 22 14.5V19.5C22 20.3284 21.3284 21 20.5 21H15.5C14.6716 21 14 20.3284 14 19.5V18H8C7.44772 18 7 17.5523 7 17V11H3.5C2.67157 11 2 10.3284 2 9.5V4.5ZM7 9H9H20V5H4V9H7ZM20 15H16V19H20V15Z",fill:"currentColor"}))}),"inherit_stroked"),ct=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M4.5 4.75C4.5 3.23122 5.73122 2 7.25 2C8.76878 2 10 3.23122 10 4.75V19.25C10 20.7688 8.76878 22 7.25 22C5.73122 22 4.5 20.7688 4.5 19.25V4.75Z",fill:"currentColor"}),t.createElement("path",{d:"M14 4.75C14 3.23122 15.2312 2 16.75 2C18.2688 2 19.5 3.23122 19.5 4.75V19.25C19.5 20.7688 18.2688 22 16.75 22C15.2312 22 14 20.7688 14 19.25V4.75Z",fill:"currentColor"}))}),"pause"),ht=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M5 2.90101C5 2.09583 5.90303 1.62081 6.56653 2.07697L19.8014 11.1759C20.3794 11.5733 20.3794 12.4267 19.8014 12.824L6.56653 21.923C5.90303 22.3792 5 21.9041 5 21.0989V2.90101Z",fill:"currentColor"}))}),"play"),ut=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{d:"M20.5 13.5C21.3284 13.5 22 12.8284 22 12C22 11.1716 21.3284 10.5 20.5 10.5L13.5 10.5L13.5 3.5C13.5 2.67157 12.8284 2 12 2C11.1716 2 10.5 2.67157 10.5 3.5L10.5 10.5L3.5 10.5C2.67157 10.5 2 11.1716 2 12C2 12.8284 2.67157 13.5 3.5 13.5L10.5 13.5V20.5C10.5 21.3284 11.1716 22 12 22C12.8284 22 13.5 21.3284 13.5 20.5V13.5L20.5 13.5Z",fill:"currentColor"}))}),"plus"),ft=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 10C16 13.3137 13.3137 16 10 16C6.68629 16 4 13.3137 4 10C4 6.68629 6.68629 4 10 4C13.3137 4 16 6.68629 16 10ZM14.9056 16.3199C13.551 17.3729 11.8487 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10C18 11.8487 17.3729 13.551 16.3199 14.9056L21.7071 20.2929C22.0976 20.6834 22.0976 21.3166 21.7071 21.7071C21.3166 22.0976 20.6834 22.0976 20.2929 21.7071L14.9056 16.3199Z",fill:"currentColor"}))}),"search_stroked"),dt=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.99973 5.07197C7.19713 5.53535 6.20729 5.53113 5.40866 5.06092L5.1637 4.91669C4.55751 4.55978 3.77662 4.65563 3.34264 5.20927C2.69567 6.03462 2.17585 6.94251 1.79166 7.90124C1.53027 8.55354 1.83733 9.27693 2.449 9.62286L2.69407 9.76145C3.50107 10.2178 4.00002 11.0732 4.00002 12.0003C4.00002 12.9271 3.50145 13.7822 2.69492 14.2387L2.44842 14.3783C1.83596 14.725 1.52888 15.4497 1.79213 16.1024C1.98358 16.577 2.21048 17.044 2.47374 17.5C2.73723 17.9564 3.0285 18.3868 3.34416 18.7902C3.77773 19.3443 4.5588 19.4406 5.16498 19.0834L5.40839 18.9399C6.20714 18.4692 7.19739 18.4648 8.0003 18.9284C8.80291 19.3918 9.29417 20.2511 9.28627 21.1778L9.28386 21.4601C9.27787 22.1629 9.75107 22.7906 10.4468 22.8903C11.4692 23.0368 12.5154 23.0404 13.5537 22.8927C14.2499 22.7936 14.7231 22.1653 14.7169 21.462L14.7143 21.1785C14.7061 20.2514 15.1974 19.3916 16.0003 18.928C16.8029 18.4647 17.7927 18.4689 18.5914 18.9391L18.8363 19.0833C19.4425 19.4402 20.2234 19.3444 20.6574 18.7907C21.3044 17.9654 21.8242 17.0575 22.2084 16.0988C22.4698 15.4465 22.1627 14.7231 21.551 14.3772L21.306 14.2386C20.499 13.7822 20 12.9268 20 11.9997C20 11.0729 20.4986 10.2178 21.3051 9.76126L21.5516 9.62174C22.1641 9.27506 22.4712 8.55029 22.2079 7.89761C22.0165 7.42297 21.7896 6.95598 21.5263 6.50001C21.2628 6.04362 20.9715 5.61325 20.6559 5.20982C20.2223 4.65568 19.4412 4.55944 18.8351 4.91665L18.5916 5.06009C17.7929 5.53078 16.8026 5.53519 15.9997 5.07163C15.1971 4.60825 14.7059 3.74891 14.7138 2.82218L14.7162 2.53994C14.7222 1.83708 14.249 1.20945 13.5532 1.10973C12.5308 0.963214 11.4846 0.959581 10.4464 1.10733C9.75011 1.20641 9.27691 1.83473 9.28317 2.53798L9.28569 2.82154C9.29395 3.74862 8.80264 4.60841 7.99973 5.07197ZM14 15.4641C15.9132 14.3595 16.5687 11.9132 15.4641 9.99999C14.3595 8.08682 11.9132 7.43132 10 8.53589C8.08684 9.64046 7.43134 12.0868 8.53591 14C9.64048 15.9132 12.0868 16.5687 14 15.4641Z",fill:"currentColor"}))}),"setting"),pt=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 2C3.34315 2 2 3.34315 2 5V19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V5C22 3.34315 20.6569 2 19 2H5ZM6 5C5.44772 5 5 5.44772 5 6C5 6.55228 5.44772 7 6 7H18C18.5523 7 19 6.55228 19 6C19 5.44772 18.5523 5 18 5H6ZM5 10C5 9.44772 5.44772 9 6 9H10C10.5523 9 11 9.44772 11 10V18C11 18.5523 10.5523 19 10 19H6C5.44772 19 5 18.5523 5 18V10ZM14 9C13.4477 9 13 9.44772 13 10V15C13 15.5523 13.4477 16 14 16H18C18.5523 16 19 15.5523 19 15V10C19 9.44772 18.5523 9 18 9H14Z",fill:"currentColor"}))}),"template"),gt=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3516 4.2652C22.0336 4.73552 22.2052 5.66964 21.7348 6.35162L11.7348 20.8516C11.4765 21.2262 11.0622 21.4632 10.6084 21.4961C10.1546 21.529 9.71041 21.3541 9.40082 21.0207L2.90082 14.0207C2.33711 13.4136 2.37226 12.4645 2.97933 11.9008C3.5864 11.3371 4.53549 11.3723 5.0992 11.9793L10.3268 17.6091L19.2652 4.64842C19.7355 3.96644 20.6696 3.79487 21.3516 4.2652Z",fill:"currentColor"}))}),"tick"),mt=tt((function(e){return t.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.0283 12.0282C23.0283 18.1034 18.1035 23.0282 12.0283 23.0282C5.95319 23.0282 1.02832 18.1034 1.02832 12.0282C1.02832 5.9531 5.95319 1.02823 12.0283 1.02823C18.1035 1.02823 23.0283 5.9531 23.0283 12.0282ZM18.7229 18.0435C20.1562 16.4494 21.0283 14.3407 21.0283 12.0282C21.0283 7.05767 16.9989 3.02823 12.0283 3.02823C7.05776 3.02823 3.02832 7.05767 3.02832 12.0282C3.02832 14.3177 3.88319 16.4075 5.29113 17.9958C5.84737 16.1311 7.15981 14.5925 8.87267 13.7357C8.02627 12.9175 7.5 11.7702 7.5 10.5C7.5 8.01472 9.51472 6 12 6C14.4853 6 16.5 8.01472 16.5 10.5C16.5 11.7702 15.9737 12.9175 15.1273 13.7357C16.8548 14.5998 18.175 16.1574 18.7229 18.0435ZM16.9796 19.5451C16.7498 16.9968 14.6081 15 12 15C9.40404 15 7.27015 16.9783 7.02374 19.5096C8.45475 20.4688 10.1762 21.0282 12.0283 21.0282C13.8575 21.0282 15.5592 20.4825 16.9796 19.5451ZM12 13C13.3807 13 14.5 11.8807 14.5 10.5C14.5 9.11929 13.3807 8 12 8C10.6193 8 9.5 9.11929 9.5 10.5C9.5 11.8807 10.6193 13 12 13Z",fill:"currentColor"}))}),"user_circle_stroked");class Ot{constructor(){}lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){let r=[];return this.decompose(0,t,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(e,this.length,r,1),bt.from(r,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){let n=[];return this.decompose(t,e,n,0),bt.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),r=new xt(this),i=new xt(t);for(let t=e,o=e;;){if(r.next(t),i.next(t),t=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(o+=r.value.length,r.done||o>=n)return!0}}iter(t=1){return new xt(this,t)}iterRange(t,e=this.length){return new St(this,t,e)}iterLines(t,e){let n;if(null==t)n=this.iter();else{null==e&&(e=this.lines+1);let r=this.line(t).from;n=this.iterRange(r,Math.max(r,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new kt(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}static of(t){if(0==t.length)throw new RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new vt(t):bt.from(vt.split(t,[])):Ot.empty}}class vt extends Ot{constructor(t,e=function(t){let e=-1;for(let n of t)e+=n.length+1;return e}(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((e?n:s)>=t)return new Ct(r,s,n,o);r=s+1,n++}}decompose(t,e,n,r){let i=t<=0&&e>=this.length?this:new vt(wt(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(1&r){let t=n.pop(),e=yt(i.text,t.text.slice(),0,i.length);if(e.length<=32)n.push(new vt(e,t.length+i.length));else{let t=e.length>>1;n.push(new vt(e.slice(0,t)),new vt(e.slice(t)))}}else n.push(i)}replace(t,e,n){if(!(n instanceof vt))return super.replace(t,e,n);let r=yt(this.text,yt(n.text,wt(this.text,0,t)),e),i=this.length+n.length-(e-t);return r.length<=32?new vt(r,i):bt.from(vt.split(r,[]),i)}sliceString(t,e=this.length,n="\n"){let r="";for(let i=0,o=0;i<=e&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>t&&o&&(r+=n),t<a&&e>i&&(r+=s.slice(Math.max(0,t-i),e-i)),i=a+1}return r}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],r=-1;for(let i of t)n.push(i),r+=i.length+1,32==n.length&&(e.push(new vt(n,r)),n=[],r=-1);return r>-1&&e.push(new vt(n,r)),e}}class bt extends Ot{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let e of t)this.lines+=e.lines}lineInner(t,e,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((e?a:s)>=t)return o.lineInner(t,e,n,r);r=s+1,n=a+1}}decompose(t,e,n,r){for(let i=0,o=0;o<=e&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(t<=a&&e>=o){let i=r&((o<=t?1:0)|(a>=e?2:0));o>=t&&a<=e&&!i?n.push(s):s.decompose(t-o,e-o,n,i)}o=a+1}}replace(t,e,n){if(n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(t>=i&&e<=s){let a=o.replace(t-i,e-i,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new bt(i,this.length-(e-t)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n="\n"){let r="";for(let i=0,o=0;i<this.children.length&&o<=e;i++){let s=this.children[i],a=o+s.length;o>t&&i&&(r+=n),t<a&&e>o&&(r+=s.sliceString(t-o,e-o,n)),o=a+1}return r}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof bt))return 0;let n=0,[r,i,o,s]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;r+=e,i+=e){if(r==o||i==s)return n;let a=this.children[r],l=t.children[i];if(a!=l)return n+a.scanIdentical(l,e);n+=a.length+1}}static from(t,e=t.reduce(((t,e)=>t+e.length+1),-1)){let n=0;for(let e of t)n+=e.lines;if(n<32){let n=[];for(let e of t)e.flatten(n);return new vt(n,e)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],a=0,l=-1,c=[];function h(t){let e;if(t.lines>i&&t instanceof bt)for(let e of t.children)h(e);else t.lines>o&&(a>o||!a)?(u(),s.push(t)):t instanceof vt&&a&&(e=c[c.length-1])instanceof vt&&t.lines+e.lines<=32?(a+=t.lines,l+=t.length+1,c[c.length-1]=new vt(e.text.concat(t.text),e.length+1+t.length)):(a+t.lines>r&&u(),a+=t.lines,l+=t.length+1,c.push(t))}function u(){0!=a&&(s.push(1==c.length?c[0]:bt.from(c,l)),l=-1,a=c.length=0)}for(let e of t)h(e);return u(),1==s.length?s[0]:new bt(s,e)}}function yt(t,e,n=0,r=1e9){for(let i=0,o=0,s=!0;o<t.length&&i<=r;o++){let a=t[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(e[e.length-1]+=a,s=!1):e.push(a)),i=l+1}return e}function wt(t,e,n){return yt(t,[""],e,n)}Ot.empty=new vt([""],0);class xt{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof vt?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof vt?r.text.length:r.children.length;if(o==(e>0?s:0)){if(0==n)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(e>0?0:1)){if(this.offsets[n]+=e,0==t)return this.lineBreak=!0,this.value="\n",this;t--}else if(r instanceof vt){let i=r.text[o+(e<0?-1:0)];if(this.offsets[n]+=e,i.length>Math.max(0,t))return this.value=0==t?i:e>0?i.slice(t):i.slice(0,i.length-t),this;t-=i.length}else{let i=r.children[o+(e<0?-1:0)];t>i.length?(t-=i.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(e>0?1:(i instanceof vt?i.text.length:i.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class St{constructor(t,e,n){this.value="",this.done=!1,this.cursor=new xt(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:r}=this.cursor.next(t);return this.pos+=(r.length+t)*e,this.value=r.length<=n?r:e<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class kt{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:n,value:r}=this.inner.next(t);return e?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Ot.prototype[Symbol.iterator]=function(){return this.iter()},xt.prototype[Symbol.iterator]=St.prototype[Symbol.iterator]=kt.prototype[Symbol.iterator]=function(){return this});class Ct{constructor(t,e,n,r){this.from=t,this.to=e,this.number=n,this.text=r}get length(){return this.to-this.from}}let Qt="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t=>t?parseInt(t,36):1));for(let t=1;t<Qt.length;t++)Qt[t]+=Qt[t-1];function Pt(t){for(let e=1;e<Qt.length;e+=2)if(Qt[e]>t)return Qt[e-1]<=t;return!1}function Et(t){return t>=127462&&t<=127487}function Tt(t,e,n=!0,r=!0){return(n?_t:$t)(t,e,r)}function _t(t,e,n){if(e==t.length)return e;e&&Mt(t.charCodeAt(e))&&Rt(t.charCodeAt(e-1))&&e--;let r=At(t,e);for(e+=Wt(r);e<t.length;){let i=At(t,e);if(8205==r||8205==i||n&&Pt(i))e+=Wt(i),r=i;else{if(!Et(i))break;{let n=0,r=e-2;for(;r>=0&&Et(At(t,r));)n++,r-=2;if(n%2==0)break;e+=2}}}return e}function $t(t,e,n){for(;e>0;){let r=_t(t,e-2,n);if(r<e)return r;e--}return 0}function Mt(t){return t>=56320&&t<57344}function Rt(t){return t>=55296&&t<56320}function At(t,e){let n=t.charCodeAt(e);if(!Rt(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return Mt(r)?r-56320+(n-55296<<10)+65536:n}function Dt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Wt(t){return t<65536?1:2}const jt=/\r\n?|\n/;var Zt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Zt||(Zt={}));class Nt{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,r=0;e<this.sections.length;){let i=this.sections[e++],o=this.sections[e++];o<0?(t(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(t,e=!1){Xt(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],r=this.sections[e++];r<0?t.push(n,r):t.push(r,n)}return new Nt(t)}composeDesc(t){return this.empty?t:t.empty?this:qt(this,t)}mapDesc(t,e=!1){return t.empty?this:Ut(this,t,e)}mapPos(t,e=-1,n=Zt.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>t)return i+(t-r);i+=s}else{if(n!=Zt.Simple&&l>=t&&(n==Zt.TrackDel&&r<t&&l>t||n==Zt.TrackBefore&&r<t||n==Zt.TrackAfter&&l>t))return null;if(l>t||l==t&&e<0&&!s)return t==r||e<0?i:i+a;i+=a}r=l}if(t>r)throw new RangeError(`Position ${t} is out of range for changeset of length ${r}`);return i}touchesRange(t,e=t){for(let n=0,r=0;n<this.sections.length&&r<=e;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=e&&i>=t)return!(r<t&&i>e)||"cover";r=i}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],r=this.sections[e++];t+=(t?" ":"")+n+(r>=0?":"+r:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some((t=>"number"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Nt(t)}static create(t){return new Nt(t)}}class Bt extends Nt{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return Xt(this,((e,n,r,i,o)=>t=t.replace(r,r+(n-e),o)),!1),t}mapDesc(t,e=!1){return Ut(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let r=0,i=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s>=0){e[r]=s,e[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(Ot.empty);n.push(o?t.slice(i,i+o):Ot.empty)}i+=o}return new Bt(e,n)}compose(t){return this.empty?t:t.empty?this:qt(this,t,!0)}map(t,e=!1){return t.empty?this:Ut(this,t,e,!0)}iterChanges(t,e=!1){Xt(this,t,e)}get desc(){return Nt.create(this.sections)}filter(t){let e=[],n=[],r=[],i=new zt(this);t:for(let o=0,s=0;;){let a=o==t.length?1e9:t[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break t;let t=Math.min(i.len,a-s);Vt(r,t,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;Vt(e,t,o),o>0&&It(n,e,i.text),i.forward(t),s+=t}let l=t[o++];for(;s<l;){if(i.done)break t;let t=Math.min(i.len,l-s);Vt(e,t,-1),Vt(r,t,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(t),s+=t}}return{changes:new Bt(e,n),filtered:Nt.create(r)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],r=this.sections[e+1];r<0?t.push(n):0==r?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let r=[],i=[],o=0,s=null;function a(t=!1){if(!t&&!r.length)return;o<e&&Vt(r,e-o,-1);let n=new Bt(r,i);s=s?s.compose(n.map(s)):n,r=[],i=[],o=0}return function t(l){if(Array.isArray(l))for(let e of l)t(e);else if(l instanceof Bt){if(l.length!=e)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${e})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:t,to:s=t,insert:c}=l;if(t>s||t<0||s>e)throw new RangeError(`Invalid change range ${t} to ${s} (in doc of length ${e})`);let h=c?"string"==typeof c?Ot.of(c.split(n||jt)):c:Ot.empty,u=h.length;if(t==s&&0==u)return;t<o&&a(),t>o&&Vt(r,t-o,-1),Vt(r,s-t,u),It(i,r,h),o=s}}(t),a(!s),s}static empty(t){return new Bt(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let r=0;r<t.length;r++){let i=t[r];if("number"==typeof i)e.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((t,e)=>e&&"string"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)e.push(i[0],0);else{for(;n.length<r;)n.push(Ot.empty);n[r]=Ot.of(i.slice(1)),e.push(i[0],n[r].length)}}}return new Bt(e,n)}static createSet(t,e){return new Bt(t,e)}}function Vt(t,e,n,r=!1){if(0==e&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:0==e&&0==t[i]?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function It(t,e,n){if(0==n.length)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Ot.empty);t.push(n)}}function Xt(t,e,n){let r=t.inserted;for(let i=0,o=0,s=0;s<t.sections.length;){let a=t.sections[s++],l=t.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,h=o,u=Ot.empty;for(;c+=a,h+=l,l&&r&&(u=u.append(r[s-2>>1])),!(n||s==t.sections.length||t.sections[s+1]<0);)a=t.sections[s++],l=t.sections[s++];e(i,c,o,h,u),i=c,o=h}}}function Ut(t,e,n,r=!1){let i=[],o=r?[]:null,s=new zt(t),a=new zt(e);for(let t=-1;;)if(-1==s.ins&&-1==a.ins){let t=Math.min(s.len,a.len);Vt(i,t,-1),s.forward(t),a.forward(t)}else if(a.ins>=0&&(s.ins<0||t==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!n))){let e=a.len;for(Vt(i,a.ins,-1);e;){let n=Math.min(s.len,e);s.ins>=0&&t<s.i&&s.len<=n&&(Vt(i,0,s.ins),o&&It(o,i,s.text),t=s.i),s.forward(n),e-=n}a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?Bt.createSet(i,o):Nt.create(i);throw new Error("Mismatched change set lengths")}{let e=0,n=s.len;for(;n;)if(-1==a.ins){let t=Math.min(n,a.len);e+=t,n-=t,a.forward(t)}else{if(!(0==a.ins&&a.len<n))break;n-=a.len,a.next()}Vt(i,e,t<s.i?s.ins:0),o&&t<s.i&&It(o,i,s.text),t=s.i,s.forward(s.len-n)}}}function qt(t,e,n=!1){let r=[],i=n?[]:null,o=new zt(t),s=new zt(e);for(let t=!1;;){if(o.done&&s.done)return i?Bt.createSet(r,i):Nt.create(r);if(0==o.ins)Vt(r,o.len,0,t),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let e=Math.min(o.len2,s.len),n=r.length;if(-1==o.ins){let n=-1==s.ins?-1:s.off?0:s.ins;Vt(r,e,n,t),i&&n&&It(i,r,s.text)}else-1==s.ins?(Vt(r,o.off?0:o.len,e,t),i&&It(i,r,o.textBit(e))):(Vt(r,o.off?0:o.len,s.off?0:s.ins,t),i&&!s.off&&It(i,r,s.text));t=(o.ins>e||s.ins>=0&&s.len>e)&&(t||r.length>n),o.forward2(e),s.forward(e)}}else Vt(r,0,s.ins,t),i&&It(i,r,s.text),s.next()}}class zt{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?Ot.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?Ot.empty:e[n].slice(this.off,null==t?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class Yt{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let t=3&this.flags;return 3==t?null:t}get goalColumn(){let t=this.flags>>5;return 33554431==t?void 0:t}map(t,e=-1){let n,r;return this.empty?n=r=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),r=t.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new Yt(n,r,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return Lt.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return Lt.range(this.anchor,n)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Lt.range(t.anchor,t.head)}static create(t,e,n){return new Yt(t,e,n)}}class Lt{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:Lt.create(this.ranges.map((n=>n.map(t,e))),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Lt([this.main],0)}addRange(t,e=!0){return Lt.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,Lt.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((t=>t.toJSON())),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Lt(t.ranges.map((t=>Yt.fromJSON(t))),t.main)}static single(t,e=t){return new Lt([Lt.range(t,e)],0)}static create(t,e=0){if(0==t.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<t.length;r++){let i=t[r];if(i.empty?i.from<=n:i.from<n)return Lt.normalized(t.slice(),e);n=i.to}return new Lt(t,e)}static cursor(t,e=0,n,r){return Yt.create(t,t,(0==e?0:e<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}static range(t,e,n){let r=(null!=n?n:33554431)<<5;return e<t?Yt.create(e,t,24|r):Yt.create(t,e,r|(e>t?4:0))}static normalized(t,e=0){let n=t[e];t.sort(((t,e)=>t.from-e.from)),e=t.indexOf(n);for(let n=1;n<t.length;n++){let r=t[n],i=t[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let o=i.from,s=Math.max(r.to,i.to);n<=e&&e--,t.splice(--n,2,r.anchor>r.head?Lt.range(s,o):Lt.range(o,s))}}return new Lt(t,e)}}function Gt(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Ft=0;class Ht{constructor(t,e,n,r,i){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=r,this.id=Ft++,this.default=t([]),this.extensions="function"==typeof i?i(this):i}static define(t={}){return new Ht(t.combine||(t=>t),t.compareInput||((t,e)=>t===e),t.compare||(t.combine?(t,e)=>t===e:Kt),!!t.static,t.enables)}of(t){return new Jt([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Jt(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new Jt(t,this,2,e)}from(t,e){return e||(e=t=>t),this.compute([t],(n=>e(n.field(t))))}}function Kt(t,e){return t==e||t.length==e.length&&t.every(((t,n)=>t===e[n]))}class Jt{constructor(t,e,n,r){this.dependencies=t,this.facet=e,this.type=n,this.value=r,this.id=Ft++}dynamicSlot(t){var e;let n=this.value,r=this.facet.compareInput,i=this.id,o=t[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:0==(1&(null!==(e=t[n.id])&&void 0!==e?e:1))&&c.push(t[n.id]);return{create:t=>(t.values[o]=n(t),1),update(t,e){if(a&&e.docChanged||l&&(e.docChanged||e.selection)||ee(t,c)){let e=n(t);if(s?!te(e,t.values[o],r):!r(e,t.values[o]))return t.values[o]=e,1}return 0},reconfigure:(t,e)=>{let a,l=e.config.address[i];if(null!=l){let i=fe(e,l);if(this.dependencies.every((n=>n instanceof Ht?e.facet(n)===t.facet(n):!(n instanceof ie)||e.field(n,!1)==t.field(n,!1)))||(s?te(a=n(t),i,r):r(a=n(t),i)))return t.values[o]=i,0}else a=n(t);return t.values[o]=a,1}}}}function te(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function ee(t,e){let n=!1;for(let r of e)1&ue(t,r)&&(n=!0);return n}function ne(t,e,n){let r=n.map((e=>t[e.id])),i=n.map((t=>t.type)),o=r.filter((t=>!(1&t))),s=t[e.id]>>1;function a(t){let n=[];for(let e=0;e<r.length;e++){let o=fe(t,r[e]);if(2==i[e])for(let t of o)n.push(t);else n.push(o)}return e.combine(n)}return{create(t){for(let e of r)ue(t,e);return t.values[s]=a(t),1},update(t,n){if(!ee(t,o))return 0;let r=a(t);return e.compare(r,t.values[s])?0:(t.values[s]=r,1)},reconfigure(t,i){let o=ee(t,r),l=i.config.facets[e.id],c=i.facet(e);if(l&&!o&&Kt(n,l))return t.values[s]=c,0;let h=a(t);return e.compare(h,c)?(t.values[s]=c,0):(t.values[s]=h,1)}}}const re=Ht.define({static:!0});class ie{constructor(t,e,n,r,i){this.id=t,this.createF=e,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(t){let e=new ie(Ft++,t.create,t.update,t.compare||((t,e)=>t===e),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(re).find((t=>t.field==this));return((null==e?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:t=>(t.values[e]=this.create(t),1),update:(t,n)=>{let r=t.values[e],i=this.updateF(r,n);return this.compareF(r,i)?0:(t.values[e]=i,1)},reconfigure:(t,n)=>null!=n.config.address[this.id]?(t.values[e]=n.field(this),0):(t.values[e]=this.create(t),1)}}init(t){return[this,re.of({field:this,create:t})]}get extension(){return this}}function oe(t){return e=>new ae(e,t)}const se={highest:oe(0),high:oe(1),default:oe(2),low:oe(3),lowest:oe(4)};class ae{constructor(t,e){this.inner=t,this.prec=e}}class le{of(t){return new ce(this,t)}reconfigure(t){return le.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class ce{constructor(t,e){this.compartment=t,this.inner=e}}class he{constructor(t,e,n,r,i,o){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let r=[],i=Object.create(null),o=new Map;for(let n of function(t,e,n){let r=[[],[],[],[],[]],i=new Map;return function t(o,s){let a=i.get(o);if(null!=a){if(a<=s)return;let t=r[a].indexOf(o);t>-1&&r[a].splice(t,1),o instanceof ce&&n.delete(o.compartment)}if(i.set(o,s),Array.isArray(o))for(let e of o)t(e,s);else if(o instanceof ce){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=e.get(o.compartment)||o.inner;n.set(o.compartment,r),t(r,s)}else if(o instanceof ae)t(o.inner,o.prec);else if(o instanceof ie)r[s].push(o),o.provides&&t(o.provides,s);else if(o instanceof Jt)r[s].push(o),o.facet.extensions&&t(o.facet.extensions,2);else{let e=o.extension;if(!e)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);t(e,s)}}(t,2),r.reduce(((t,e)=>t.concat(e)))}(t,e,o))n instanceof ie?r.push(n):(i[n.facet.id]||(i[n.facet.id]=[])).push(n);let s=Object.create(null),a=[],l=[];for(let t of r)s[t.id]=l.length<<1,l.push((e=>t.slot(e)));let c=null==n?void 0:n.config.facets;for(let t in i){let e=i[t],r=e[0].facet,o=c&&c[t]||[];if(e.every((t=>0==t.type)))if(s[r.id]=a.length<<1|1,Kt(o,e))a.push(n.facet(r));else{let t=r.combine(e.map((t=>t.value)));a.push(n&&r.compare(t,n.facet(r))?n.facet(r):t)}else{for(let t of e)0==t.type?(s[t.id]=a.length<<1|1,a.push(t.value)):(s[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));s[r.id]=l.length<<1,l.push((t=>ne(t,r,e)))}}let h=l.map((t=>t(s)));return new he(t,o,h,s,a,i)}}function ue(t,e){if(1&e)return 2;let n=e>>1,r=t.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function fe(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}const de=Ht.define(),pe=Ht.define({combine:t=>t.some((t=>t)),static:!0}),ge=Ht.define({combine:t=>t.length?t[0]:void 0,static:!0}),me=Ht.define(),Oe=Ht.define(),ve=Ht.define(),be=Ht.define({combine:t=>!!t.length&&t[0]});class ye{constructor(t,e){this.type=t,this.value=e}static define(){return new we}}class we{of(t){return new ye(this,t)}}class xe{constructor(t){this.map=t}of(t){return new Se(this,t)}}class Se{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return void 0===e?void 0:e==this.value?this:new Se(this.type,e)}is(t){return this.type==t}static define(t={}){return new xe(t.map||(t=>t))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let r of t){let t=r.map(e);t&&n.push(t)}return n}}Se.reconfigure=Se.define(),Se.appendConfig=Se.define();class ke{constructor(t,e,n,r,i,o){this.startState=t,this.changes=e,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&Gt(n,e.newLength),i.some((t=>t.type==ke.time))||(this.annotations=i.concat(ke.time.of(Date.now())))}static create(t,e,n,r,i,o){return new ke(t,e,n,r,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(ke.userEvent);return!(!e||!(e==t||e.length>t.length&&e.slice(0,t.length)==t&&"."==e[t.length]))}}function Ce(t,e){let n=[];for(let r=0,i=0;;){let o,s;if(r<t.length&&(i==e.length||e[i]>=t[r]))o=t[r++],s=t[r++];else{if(!(i<e.length))return n;o=e[i++],s=e[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function Qe(t,e,n){var r;let i,o,s;return n?(i=e.changes,o=Bt.empty(e.changes.length),s=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),s=t.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(o):null===(r=t.selection)||void 0===r?void 0:r.map(i),effects:Se.mapEffects(t.effects,i).concat(Se.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Pe(t,e,n){let r=e.selection,i=_e(e.annotations);return e.userEvent&&(i=i.concat(ke.userEvent.of(e.userEvent))),{changes:e.changes instanceof Bt?e.changes:Bt.of(e.changes||[],n,t.facet(ge)),selection:r&&(r instanceof Lt?r:Lt.single(r.anchor,r.head)),effects:_e(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Ee(t,e,n){let r=Pe(t,e.length?e[0]:{},t.doc.length);e.length&&!1===e[0].filter&&(n=!1);for(let i=1;i<e.length;i++){!1===e[i].filter&&(n=!1);let o=!!e[i].sequential;r=Qe(r,Pe(t,e[i],o?r.changes.newLength:t.doc.length),o)}let i=ke.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(t){let e=t.startState,n=e.facet(ve),r=t;for(let i=n.length-1;i>=0;i--){let o=n[i](t);o&&Object.keys(o).length&&(r=Qe(r,Pe(e,o,t.changes.newLength),!0))}return r==t?t:ke.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(t){let e=t.startState,n=!0;for(let r of e.facet(me)){let e=r(t);if(!1===e){n=!1;break}Array.isArray(e)&&(n=!0===n?e:Ce(n,e))}if(!0!==n){let r,i;if(!1===n)i=t.changes.invertedDesc,r=Bt.empty(e.doc.length);else{let e=t.changes.filter(n);r=e.changes,i=e.filtered.mapDesc(e.changes).invertedDesc}t=ke.create(e,r,t.selection&&t.selection.map(i),Se.mapEffects(t.effects,i),t.annotations,t.scrollIntoView)}let r=e.facet(Oe);for(let n=r.length-1;n>=0;n--){let i=r[n](t);t=i instanceof ke?i:Array.isArray(i)&&1==i.length&&i[0]instanceof ke?i[0]:Ee(e,_e(i),!1)}return t}(i):i)}ke.time=ye.define(),ke.userEvent=ye.define(),ke.addToHistory=ye.define(),ke.remote=ye.define();const Te=[];function _e(t){return null==t?Te:Array.isArray(t)?t:[t]}var $e=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}($e||($e={}));const Me=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Re;try{Re=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(t){}class Ae{constructor(t,e,n,r,i,o){this.config=t,this.doc=e,this.selection=n,this.values=r,this.status=t.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let t=0;t<this.config.dynamicSlots.length;t++)ue(this,t<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(null!=n)return ue(this,n),fe(this,n);if(e)throw new RangeError("Field is not present in this state")}update(...t){return Ee(this,t,!0)}applyTransaction(t){let e,n=this.config,{base:r,compartments:i}=n;for(let e of t.effects)e.is(le.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((t,e)=>i.set(e,t))),n=null),i.set(e.value.compartment,e.value.extension)):e.is(Se.reconfigure)?(n=null,r=e.value):e.is(Se.appendConfig)&&(n=null,r=_e(r).concat(e.value));n?e=t.startState.values.slice():(n=he.resolve(r,i,this),e=new Ae(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((t,e)=>e.reconfigure(t,this)),null).values),new Ae(n,t.newDoc,t.newSelection,e,((e,n)=>n.update(e,t)),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:t},range:Lt.cursor(e.from+t.length)})))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),r=this.changes(n.changes),i=[n.range],o=_e(n.effects);for(let n=1;n<e.ranges.length;n++){let s=t(e.ranges[n]),a=this.changes(s.changes),l=a.map(r);for(let t=0;t<n;t++)i[t]=i[t].map(l);let c=r.mapDesc(a,!0);i.push(s.range.map(c)),r=r.compose(l),o=Se.mapEffects(o,l).concat(Se.mapEffects(_e(s.effects),c))}return{changes:r,selection:Lt.create(i,e.mainIndex),effects:o}}changes(t=[]){return t instanceof Bt?t:Bt.of(t,this.doc.length,this.facet(Ae.lineSeparator))}toText(t){return Ot.of(t.split(this.facet(Ae.lineSeparator)||jt))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return null==e?t.default:(ue(this,e),fe(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let r=t[n];r instanceof ie&&null!=this.config.address[r.id]&&(e[n]=r.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let e in n)if(Object.prototype.hasOwnProperty.call(t,e)){let i=n[e],o=t[e];r.push(i.init((t=>i.spec.fromJSON(o,t))))}return Ae.create({doc:t.doc,selection:Lt.fromJSON(t.selection),extensions:e.extensions?r.concat([e.extensions]):r})}static create(t={}){let e=he.resolve(t.extensions||[],new Map),n=t.doc instanceof Ot?t.doc:Ot.of((t.doc||"").split(e.staticFacet(Ae.lineSeparator)||jt)),r=t.selection?t.selection instanceof Lt?t.selection:Lt.single(t.selection.anchor,t.selection.head):Lt.single(0);return Gt(r,n.length),e.staticFacet(pe)||(r=r.asSingle()),new Ae(e,n,r,e.dynamicSlots.map((()=>null)),((t,e)=>e.create(t)),null)}get tabSize(){return this.facet(Ae.tabSize)}get lineBreak(){return this.facet(Ae.lineSeparator)||"\n"}get readOnly(){return this.facet(be)}phrase(t,...e){for(let e of this.facet(Ae.phrases))if(Object.prototype.hasOwnProperty.call(e,t)){t=e[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,((t,n)=>{if("$"==n)return"$";let r=+(n||1);return!r||r>e.length?t:e[r-1]}))),t}languageDataAt(t,e,n=-1){let r=[];for(let i of this.facet(de))for(let o of i(this,e,n))Object.prototype.hasOwnProperty.call(o,t)&&r.push(o[t]);return r}charCategorizer(t){return e=this.languageDataAt("wordChars",t).join(""),t=>{if(!/\S/.test(t))return $e.Space;if(function(t){if(Re)return Re.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Me.test(n)))return!0}return!1}(t))return $e.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return $e.Word;return $e.Other};var e}wordAt(t){let{text:e,from:n,length:r}=this.doc.lineAt(t),i=this.charCategorizer(t),o=t-n,s=t-n;for(;o>0;){let t=Tt(e,o,!1);if(i(e.slice(t,o))!=$e.Word)break;o=t}for(;s<r;){let t=Tt(e,s);if(i(e.slice(s,t))!=$e.Word)break;s=t}return o==s?null:Lt.range(o+n,s+n)}}function De(t,e,n={}){let r={};for(let e of t)for(let t of Object.keys(e)){let i=e[t],o=r[t];if(void 0===o)r[t]=i;else if(o===i||void 0===i);else{if(!Object.hasOwnProperty.call(n,t))throw new Error("Config merge conflict for field "+t);r[t]=n[t](o,i)}}for(let t in e)void 0===r[t]&&(r[t]=e[t]);return r}Ae.allowMultipleSelections=pe,Ae.tabSize=Ht.define({combine:t=>t.length?t[0]:4}),Ae.lineSeparator=ge,Ae.readOnly=be,Ae.phrases=Ht.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every((n=>t[n]==e[n]))}}),Ae.languageData=de,Ae.changeFilter=me,Ae.transactionFilter=Oe,Ae.transactionExtender=ve,le.reconfigure=Se.define();class We{eq(t){return this==t}range(t,e=t){return je.create(t,e,this)}}We.prototype.startSide=We.prototype.endSide=0,We.prototype.point=!1,We.prototype.mapMode=Zt.TrackDel;class je{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new je(t,e,n)}}function Ze(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class Ne{constructor(t,e,n,r){this.from=t,this.to=e,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,r=0){let i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-t||(n?this.value[r].endSide:this.value[r].startSide)-e;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(t,e,n,r){for(let i=this.findIndex(e,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+t,this.to[i]+t,this.value[i]))return!1}map(t,e){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,h=this.value[a],u=this.from[a]+t,f=this.to[a]+t;if(u==f){let t=e.mapPos(u,h.startSide,h.mapMode);if(null==t)continue;if(l=c=t,h.startSide!=h.endSide&&(c=e.mapPos(u,h.endSide),c<l))continue}else if(l=e.mapPos(u,h.startSide),c=e.mapPos(f,h.endSide),l>c||l==c&&h.startSide>0&&h.endSide<=0)continue;(c-l||h.endSide-h.startSide)<0||(o<0&&(o=l),h.point&&(s=Math.max(s,c-l)),n.push(h),r.push(l-o),i.push(c-o))}return{mapped:n.length?new Ne(r,i,n,s):null,pos:o}}}class Be{constructor(t,e,n,r){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=r}static create(t,e,n,r){return new Be(t,e,n,r)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=t,o=t.filter;if(0==e.length&&!o)return this;if(n&&(e=e.slice().sort(Ze)),this.isEmpty)return e.length?Be.of(e):this;let s=new Xe(this,null,-1).goto(0),a=0,l=[],c=new Ve;for(;s.value||a<e.length;)if(a<e.length&&(s.from-e[a].from||s.startSide-e[a].value.startSide)>=0){let t=e[a++];c.addInner(t.from,t.to,t.value)||l.push(t)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==e.length||this.chunkEnd(s.chunkIndex)<e[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(je.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?Be.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],r=-1;for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i],a=t.touchesRange(o,o+s.length);if(!1===a)r=Math.max(r,s.maxPoint),e.push(s),n.push(t.mapPos(o));else if(!0===a){let{mapped:i,pos:a}=s.map(o,t);i&&(r=Math.max(r,i.maxPoint),e.push(i),n.push(a))}}let i=this.nextLayer.map(t);return 0==e.length?i:new Be(n,e,i||Be.empty,r)}between(t,e,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(e>=i&&t<=i+o.length&&!1===o.between(i,t-i,e-i,n))return}this.nextLayer.between(t,e,n)}}iter(t=0){return Ue.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Ue.from(t).goto(e)}static compare(t,e,n,r,i=-1){let o=t.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=i)),s=e.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=i)),a=Ie(o,s,n),l=new ze(o,a,i),c=new ze(s,a,i);n.iterGaps(((t,e,n)=>Ye(l,t,c,e,n,r))),n.empty&&0==n.length&&Ye(l,0,c,0,0,r)}static eq(t,e,n=0,r){null==r&&(r=999999999);let i=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0)),o=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=Ie(i,o),a=new ze(i,s,0).goto(n),l=new ze(o,s,0).goto(n);for(;;){if(a.to!=l.to||!Le(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(t,e,n,r,i=-1){let o=new ze(t,null,i).goto(e),s=e,a=o.openStart;for(;;){let t=Math.min(o.to,n);if(o.point){let n=o.activeForPoint(o.to),i=o.pointFrom<e?n.length+1:Math.min(n.length,a);r.point(s,t,o.point,n,i,o.pointRank),a=Math.min(o.openEnd(t),n.length)}else t>s&&(r.span(s,t,o.active,a),a=o.openEnd(t));if(o.to>n)return a+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(t,e=!1){let n=new Ve;for(let r of t instanceof je?[t]:e?function(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(Ze(e,r)>0)return t.slice().sort(Ze);e=r}return t}(t):t)n.add(r.from,r.to,r.value);return n.finish()}}Be.empty=new Be([],[],null,-1),Be.empty.nextLayer=Be.empty;class Ve{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(t){this.chunks.push(new Ne(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new Ve)).add(t,e,n)}addInner(t,e,n){let r=t-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),0))}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(Be.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;let e=Be.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function Ie(t,e,n){let r=new Map;for(let e of t)for(let t=0;t<e.chunk.length;t++)e.chunk[t].maxPoint<=0&&r.set(e.chunk[t],e.chunkPos[t]);let i=new Set;for(let t of e)for(let e=0;e<t.chunk.length;e++){let o=r.get(t.chunk[e]);null==o||(n?n.mapPos(o):o)!=t.chunkPos[e]||(null==n?void 0:n.touchesRange(o,o+t.chunk[e].length))||i.add(t.chunk[e])}return i}class Xe{constructor(t,e,n,r=0){this.layer=t,this.skip=e,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){let e=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(e)||this.layer.chunkEnd(this.chunkIndex)<t||e.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Ue{constructor(t){this.heap=t}static from(t,e=null,n=-1){let r=[];for(let i=0;i<t.length;i++)for(let o=t[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new Xe(o,e,n,i));return 1==r.length?r[0]:new Ue(r)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let t=this.heap.length>>1;t>=0;t--)qe(this.heap,t);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let t=this.heap.length>>1;t>=0;t--)qe(this.heap,t);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),qe(this.heap,0)}}}function qe(t,e){for(let n=t[e];;){let r=1+(e<<1);if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class ze{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ue.from(t,e,n)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){Ge(this.active,t),Ge(this.activeTo,t),Ge(this.activeRank,t),this.minActive=He(this.active,this.activeTo)}addActive(t){let e=0,{value:n,to:r,rank:i}=this.cursor;for(;e<this.activeRank.length&&this.activeRank[e]<=i;)e++;Fe(this.active,e,n),Fe(this.activeTo,e,r),Fe(this.activeRank,e,i),t&&Fe(t,e,this.cursor.from),this.minActive=He(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>t){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&Ge(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let t=this.cursor.value;if(t.point){if(!(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=t,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=t.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let e=n.length-1;e>=0&&n[e]<t;e--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()}openEnd(t){let e=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}}function Ye(t,e,n,r,i,o){t.goto(e),n.goto(r);let s=r+i,a=r,l=r-e;for(;;){let e=t.to+l-n.to||t.endSide-n.endSide,r=e<0?t.to+l:n.to,i=Math.min(r,s);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Le(t.activeForPoint(t.to+l),n.activeForPoint(n.to))||o.comparePoint(a,i,t.point,n.point):i>a&&!Le(t.active,n.active)&&o.compareRange(a,i,t.active,n.active),r>s)break;a=r,e<=0&&t.next(),e>=0&&n.next()}}function Le(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Ge(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function Fe(t,e,n){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=n}function He(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Ke(t,e,n=t.length){let r=0;for(let i=0;i<n;)9==t.charCodeAt(i)?(r+=e-r%e,i++):(r++,i=Tt(t,i));return r}function Je(t,e,n,r){for(let r=0,i=0;;){if(i>=e)return r;if(r==t.length)break;i+=9==t.charCodeAt(r)?n-i%n:1,r=Tt(t,r)}return!0===r?-1:t.length}const tn="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),en="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),nn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class rn{constructor(t,e){this.rules=[];let{finish:n}=e||{};function r(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function i(t,e,o,s){let a=[],l=/^@(\w+)\b/.exec(t[0]),c=l&&"keyframes"==l[1];if(l&&null==e)return o.push(t[0]+";");for(let n in e){let s=e[n];if(/&/.test(n))i(n.split(/,\s*/).map((e=>t.map((t=>e.replace(/&/,t))))).reduce(((t,e)=>t.concat(e))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?t:t.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let e in t)i(r(e),t[e],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let t=nn[tn]||1;return nn[tn]=t+1,"ͼ"+t.toString(36)}static mount(t,e){(t[en]||new sn(t)).mount(Array.isArray(e)?e:[e])}}let on=null;class sn{constructor(t){if(!t.head&&t.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(on)return t.adoptedStyleSheets=[on.sheet].concat(t.adoptedStyleSheets),t[en]=on;this.sheet=new CSSStyleSheet,t.adoptedStyleSheets=[this.sheet].concat(t.adoptedStyleSheets),on=this}else{this.styleTag=(t.ownerDocument||t).createElement("style");let e=t.head||t;e.insertBefore(this.styleTag,e.firstChild)}this.modules=[],t[en]=this}mount(t){let e=this.sheet,n=0,r=0;for(let i=0;i<t.length;i++){let o=t[i],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),e)for(let t=0;t<o.rules.length;t++)e.insertRule(o.rules[t],n++)}else{for(;r<s;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!e){let t="";for(let e=0;e<this.modules.length;e++)t+=this.modules[e].getRules()+"\n";this.styleTag.textContent=t}}}for(var an={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ln={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},cn="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),hn=("undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)),un="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),fn=hn||cn&&+cn[1]<57,dn=0;dn<10;dn++)an[48+dn]=an[96+dn]=String(dn);for(dn=1;dn<=24;dn++)an[dn+111]="F"+dn;for(dn=65;dn<=90;dn++)an[dn]=String.fromCharCode(dn+32),ln[dn]=String.fromCharCode(dn);for(var pn in an)ln.hasOwnProperty(pn)||(ln[pn]=an[pn]);function gn(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function mn(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function On(t,e){if(!e.anchorNode)return!1;try{return mn(t,e.anchorNode)}catch(t){return!1}}function vn(t){return 3==t.nodeType?_n(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function bn(t,e,n,r){return!!n&&(wn(t,e,n,r,-1)||wn(t,e,n,r,1))}function yn(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function wn(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:xn(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=yn(t)+(i<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(i<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=i<0?xn(t):0}}}function xn(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}const Sn={left:0,right:0,top:0,bottom:0};function kn(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Cn(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}class Qn{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){this.set(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset)}set(t,e,n,r){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=r}}let Pn,En=null;function Tn(t){if(t.setActive)return t.setActive();if(En)return t.focus(En);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==En?{get preventScroll(){return En={preventScroll:!0},!0}}:void 0),!En){En=!1;for(let t=0;t<e.length;){let n=e[t++],r=e[t++],i=e[t++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function _n(t,e,n=e){let r=Pn||(Pn=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function $n(t,e,n){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,t.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function Mn(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}class Rn{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new Rn(t.parentNode,yn(t),e)}static after(t,e){return new Rn(t.parentNode,yn(t)+1,e)}}const An=[];class Dn{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}coordsAt(t,e){return null}sync(t){if(2&this.dirty){let e,n=this.dom,r=null;for(let i of this.children){if(i.dirty){if(!i.dom&&(e=r?r.nextSibling:n.firstChild)){let t=Dn.get(e);(!t||!t.parent&&t.canReuseDOM(i))&&i.reuseDOM(e)}i.sync(t),i.dirty=0}if(e=r?r.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&e!=i.dom&&(t.written=!0),i.dom.parentNode==n)for(;e&&e!=i.dom;)e=Wn(e);else n.insertBefore(i.dom,e);r=i.dom}for(e=r?r.nextSibling:n.firstChild,e&&t&&t.node==n&&(t.written=!0);e;)e=Wn(e)}else if(1&this.dirty)for(let e of this.children)e.dirty&&(e.sync(t),e.dirty=0)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let r=0==xn(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==r&&e.firstChild!=e.lastChild&&(r=t==e.firstChild?-1:1),t=e}n=r<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Dn.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let r=this.children[t];if(r.dom==n)return e;e+=r.length+r.breakAfter}}domBoundsAround(t,e,n=0){let r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],h=l+n.length;if(l<t&&h>e)return n.domBoundsAround(t,e,l);if(h>=t&&-1==r&&(r=a,i=l),l>e&&n.dom.parentNode==this.dom){o=a,s=c;break}c=h,l=h+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(t=!1){this.dirty|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.dirty|=2),1&e.dirty)return;e.dirty|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,this.dirty&&this.markParentsDirty(!0))}setDOM(t){this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=An){this.markDirty();for(let n=t;n<e;n++){let t=this.children[n];t.parent==this&&t.destroy()}this.children.splice(t,e-t,...n);for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new jn(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}merge(t,e,n,r,i,o){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}function Wn(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}Dn.prototype.breakAfter=0;class jn{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Zn(t,e,n,r,i,o,s,a,l){let{children:c}=t,h=c.length?c[e]:null,u=o.length?o[o.length-1]:null,f=u?u.breakAfter:s;if(!(e==r&&h&&!s&&!f&&o.length<2&&h.merge(n,i,o.length?u:null,0==n,a,l))){if(r<c.length){let t=c[r];t&&i<t.length?(e==r&&(t=t.split(i),i=0),!f&&u&&t.merge(0,i,u,!0,0,l)?o[o.length-1]=t:(i&&t.merge(0,i,null,!1,0,l),o.push(t))):(null==t?void 0:t.breakAfter)&&(u?u.breakAfter=1:s=1),r++}for(h&&(h.breakAfter=s,n>0&&(!s&&o.length&&h.merge(n,h.length,o[0],!1,a,0)?h.breakAfter=o.shift().breakAfter:(n<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(n,h.length,null,!1,a,0),e++));e<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!c[e].become(o[0]))break;e++,o.shift(),a=o.length?0:l}!o.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||o.length)&&t.replaceChildren(e,r,o)}}function Nn(t,e,n,r,i,o){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:h}=s.findPos(e,-1),u=e-n;for(let t of r)u+=t.length;t.length+=u,Zn(t,c,h,a,l,r,0,i,o)}let Bn="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Vn="undefined"!=typeof document?document:{documentElement:{style:{}}};const In=/Edge\/(\d+)/.exec(Bn.userAgent),Xn=/MSIE \d/.test(Bn.userAgent),Un=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Bn.userAgent),qn=!!(Xn||Un||In),zn=!qn&&/gecko\/(\d+)/i.test(Bn.userAgent),Yn=!qn&&/Chrome\/(\d+)/.exec(Bn.userAgent),Ln="webkitFontSmoothing"in Vn.documentElement.style,Gn=!qn&&/Apple Computer/.test(Bn.vendor),Fn=Gn&&(/Mobile\/\w+/.test(Bn.userAgent)||Bn.maxTouchPoints>2);var Hn={mac:Fn||/Mac/.test(Bn.platform),windows:/Win/.test(Bn.platform),linux:/Linux|X11/.test(Bn.platform),ie:qn,ie_version:Xn?Vn.documentMode||6:Un?+Un[1]:In?+In[1]:0,gecko:zn,gecko_version:zn?+(/Firefox\/(\d+)/.exec(Bn.userAgent)||[0,0])[1]:0,chrome:!!Yn,chrome_version:Yn?+Yn[1]:0,ios:Fn,android:/Android\b/.test(Bn.userAgent),webkit:Ln,safari:Gn,webkit_version:Ln?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=Vn.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Kn extends Dn{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return(!n||n instanceof Kn&&!(this.length-(e-t)+n.length>256))&&(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new Kn(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new Rn(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return tr(this.dom,t,e)}}class Jn extends Dn{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if(Mn(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.dirty|=6)}sync(t){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t)}merge(t,e,n,r,i,o){return!(n&&(!(n instanceof Jn&&n.mark.eq(this.mark))||t&&i<=0||e<this.length&&o<=0)||(Nn(this,t,e,n?n.children:[],i-1,o-1),this.markDirty(),0))}split(t){let e=[],n=0,r=-1,i=0;for(let o of this.children){let s=n+o.length;s>t&&e.push(n<t?o.split(t-n):o),r<0&&n>=t&&(r=i),n=s,i++}let o=this.length-t;return this.length=t,r>-1&&(this.children.length=r,this.markDirty()),new Jn(this.mark,e,o)}domAtPos(t){return sr(this,t)}coordsAt(t,e){return lr(this,t,e)}}function tr(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,o=e,s=0;0==e&&n<0||e==r&&n>=0?Hn.chrome||Hn.gecko||(e?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let a=_n(t,i,o).getClientRects();if(!a.length)return Sn;let l=a[(s?s<0:n>=0)?0:a.length-1];return Hn.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l),s?kn(l,s<0):l||null}class er extends Dn{constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}static create(t,e,n){return new(t.customView||er)(t,e,n)}split(t){let e=er.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,e,n,r,i,o){return!(n&&(!(n instanceof er&&this.widget.compare(n.widget))||t>0&&i<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}become(t){return t.length==this.length&&t instanceof er&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.eq(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return Ot.empty;let t=this;for(;t.parent;)t=t.parent;let e=t.editorView,n=e&&e.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Ot.empty}domAtPos(t){return 0==t?Rn.before(this.dom):Rn.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.dom.getClientRects(),r=null;if(!n.length)return Sn;for(let e=t>0?n.length-1:0;r=n[e],!(t>0?0==e:e==n.length-1||r.top<r.bottom);e+=t>0?-1:1);return this.length?r:kn(r,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class nr extends er{domAtPos(t){let{topView:e,text:n}=this.widget;return e?rr(t,0,e,n,((t,e)=>t.domAtPos(e)),(t=>new Rn(n,Math.min(t,n.nodeValue.length)))):new Rn(n,Math.min(t,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(t,e){let{topView:n,text:r}=this.widget;return n?ir(t,e,n,r):Math.min(e,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(t,e){let{topView:n,text:r}=this.widget;return n?rr(t,e,n,r,((t,e,n)=>t.coordsAt(e,n)),((t,e)=>tr(r,t,e))):tr(r,t,e)}destroy(){var t;super.destroy(),null===(t=this.widget.topView)||void 0===t||t.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function rr(t,e,n,r,i,o){if(n instanceof Jn){for(let s=n.dom.firstChild;s;s=s.nextSibling){let n=Dn.get(s);if(!n)return o(t,e);let a=mn(s,r),l=n.length+(a?r.nodeValue.length:0);if(t<l||t==l&&n.getSide()<=0)return a?rr(t,e,n,r,i,o):i(n,t,e);t-=l}return i(n,n.length,-1)}return n.dom==r?o(t,e):i(n,t,e)}function ir(t,e,n,r){if(n instanceof Jn)for(let i of n.children){let n=0,o=mn(i.dom,r);if(mn(i.dom,t))return n+(o?ir(t,e,i,r):i.localPosFromDOM(t,e));n+=o?r.nodeValue.length:i.length}else if(n.dom==r)return Math.min(e,r.nodeValue.length);return n.localPosFromDOM(t,e)}class or extends Dn{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof or&&t.side==this.side}split(){return new or(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return Rn.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){let e=this.dom.getBoundingClientRect(),n=function(t,e){let n=t.parent,r=n?n.children.indexOf(t):-1;for(;n&&r>=0;)if(e<0?r>0:r<n.children.length){let t=n.children[r+e];if(t instanceof Kn){let n=t.coordsAt(e<0?t.length:0,e);if(n)return n}r+=e}else{if(!(n instanceof Jn&&n.parent)){let t=n.dom.lastChild;if(t&&"BR"==t.nodeName)return t.getClientRects()[0];break}r=n.parent.children.indexOf(n)+(e<0?0:1),n=n.parent}}(this,this.side>0?-1:1);return n&&n.top<e.bottom&&n.bottom>e.top?{left:e.left,right:e.right,top:n.top,bottom:n.bottom}:e}get overrideDOMText(){return Ot.empty}}function sr(t,e){let n=t.dom,{children:r}=t,i=0;for(let t=0;i<r.length;i++){let o=r[i],s=t+o.length;if(!(s==t&&o.getSide()<=0)){if(e>t&&e<s&&o.dom.parentNode==n)return o.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=i;t>0;t--){let e=r[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=i;t<r.length;t++){let e=r[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new Rn(n,0)}function ar(t,e,n){let r,{children:i}=t;n>0&&e instanceof Jn&&i.length&&(r=i[i.length-1])instanceof Jn&&r.mark.eq(e.mark)?ar(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function lr(t,e,n){let r=null,i=-1,o=null,s=-1;!function t(e,n){for(let a=0,l=0;a<e.children.length&&l<=n;a++){let c=e.children[a],h=l+c.length;h>=n&&(c.children.length?t(c,n-l):!o&&(h>n||l==h&&c.getSide()>0)?(o=c,s=n-l):(l<n||l==h&&c.getSide()<0)&&(r=c,i=n-l)),l=h}}(t,e);let a=(n<0?r:o)||r||o;return a?a.coordsAt(Math.max(0,a==r?i:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=vn(e);return n[n.length-1]||null}(t)}function cr(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}function hr(t,e){if(t==e)return!0;if(!t||!e)return!1;let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i of n)if(-1==r.indexOf(i)||t[i]!==e[i])return!1;return!0}function ur(t,e,n){let r=null;if(e)for(let i in e)n&&i in n||t.removeAttribute(r=i);if(n)for(let i in n)e&&e[i]==n[i]||t.setAttribute(r=i,n[i]);return!!r}Kn.prototype.children=er.prototype.children=or.prototype.children=An;class fr{eq(t){return!1}updateDOM(t){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}ignoreEvent(t){return!0}get customView(){return null}destroy(t){}}var dr=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(dr||(dr={}));class pr extends We{constructor(t,e,n,r){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(t){return new gr(t)}static widget(t){let e=t.side||0,n=!!t.block;return e+=n?e>0?3e8:-4e8:e>0?1e8:-1e8,new Or(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,r=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:i,end:o}=vr(t,r);e=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new Or(t,e,n,r,t.widget||null,!0)}static line(t){return new mr(t)}static set(t,e=!1){return Be.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}pr.none=Be.empty;class gr extends pr{constructor(t){let{start:e,end:n}=vr(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){return this==t||t instanceof gr&&this.tagName==t.tagName&&this.class==t.class&&hr(this.attrs,t.attrs)}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}gr.prototype.point=!1;class mr extends pr{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof mr&&hr(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}mr.prototype.mapMode=Zt.TrackBefore,mr.prototype.point=!0;class Or extends pr{constructor(t,e,n,r,i,o){super(e,n,i,t),this.block=r,this.isReplace=o,this.mapMode=r?e<=0?Zt.TrackBefore:Zt.TrackAfter:Zt.TrackDel}get type(){return this.startSide<this.endSide?dr.WidgetRange:this.startSide<=0?dr.WidgetBefore:dr.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(t){return t instanceof Or&&function(t,e){return t==e||!!(t&&e&&t.compare(e))}(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function vr(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return null==n&&(n=t.inclusive),null==r&&(r=t.inclusive),{start:null!=n?n:e,end:null!=r?r:e}}function br(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}Or.prototype.point=!0;class yr extends Dn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,r,i,o){if(n){if(!(n instanceof yr))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),Nn(this,t,e,n?n.children:[],i,o),!0}split(t){let e=new yr;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:r}=this.childPos(t);r&&(e.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){hr(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){ar(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=cr(e,this.attrs||{})),n&&(this.attrs=cr({class:n},this.attrs||{}))}domAtPos(t){return sr(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.dirty|=6)}sync(t){var e;this.dom?4&this.dirty&&(Mn(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(ur(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t);let n=this.dom.lastChild;for(;n&&Dn.get(n)instanceof Jn;)n=n.lastChild;if(!(n&&this.length&&("BR"==n.nodeName||0!=(null===(e=Dn.get(n))||void 0===e?void 0:e.isEditable)||Hn.ios&&this.children.some((t=>t instanceof Kn))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t=0;for(let e of this.children){if(!(e instanceof Kn)||/[^ -~]/.test(e.text))return null;let n=vn(e.dom);if(1!=n.length)return null;t+=n[0].width}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length}:null}coordsAt(t,e){return lr(this,t,e)}become(t){return!1}get type(){return dr.Text}static find(t,e){for(let n=0,r=0;n<t.children.length;n++){let i=t.children[n],o=r+i.length;if(o>=e){if(i instanceof yr)return i;if(o>e)break}r=o+i.breakAfter}return null}}class wr extends Dn{constructor(t,e,n){super(),this.widget=t,this.length=e,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,r,i,o){return!(n&&(!(n instanceof wr&&this.widget.compare(n.widget))||t>0&&i<=0||e<this.length&&o<=0)||(this.length=t+(n?n.length:0)+(this.length-e),0))}domAtPos(t){return 0==t?Rn.before(this.dom):Rn.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new wr(this.widget,e,this.type);return n.breakAfter=this.breakAfter,n}get children(){return An}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ot.empty}domBoundsAround(){return null}become(t){return t instanceof wr&&t.type==this.type&&t.widget.constructor==this.widget.constructor&&(t.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class xr{constructor(t,e,n,r){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof wr&&t.type==dr.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new yr),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Sr(new or(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let r=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(Sr(new Kn(this.text.slice(this.textOff,this.textOff+r)),e),n),this.atCursorPos=!0,this.textOff+=r,t-=r,n=0}}span(t,e,n,r){this.buildText(e-t,n,r),this.pos=e,this.openStart<0&&(this.openStart=r)}point(t,e,n,r,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Or){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof Or)if(n.block){let{type:t}=n;t!=dr.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new wr(n.widget||new kr("div"),s,t))}else{let o=er.create(n.widget||new kr("span"),s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&i<=r.length&&(t<e||n.startSide>0),l=!o.isEditable&&(t<e||i>r.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(Sr(new or(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(Sr(o,r),i),this.atCursorPos=l,this.pendingBuffer=l?t<e||i>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=i)}static build(t,e,n,r,i){let o=new xr(t,e,n,i);return o.openEnd=Be.spans(r,e,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Sr(t,e){for(let n of e)t=new Jn(n,[t],t.length);return t}class kr extends fr{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}}const Cr=Ht.define(),Qr=Ht.define(),Pr=Ht.define(),Er=Ht.define(),Tr=Ht.define(),_r=Ht.define(),$r=Ht.define({combine:t=>t.some((t=>t))}),Mr=Ht.define({combine:t=>t.some((t=>t))});class Rr{constructor(t,e="nearest",n="nearest",r=5,i=5){this.range=t,this.y=e,this.x=n,this.yMargin=r,this.xMargin=i}map(t){return t.empty?this:new Rr(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin)}}const Ar=Se.define({map:(t,e)=>t.map(e)});function Dr(t,e,n){let r=t.facet(Er);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Wr=Ht.define({combine:t=>!t.length||t[0]});let jr=0;const Zr=Ht.define();class Nr{constructor(t,e,n,r){this.id=t,this.create=e,this.domEventHandlers=n,this.extension=r(this)}static define(t,e){const{eventHandlers:n,provide:r,decorations:i}=e||{};return new Nr(jr++,t,n,(t=>{let e=[Zr.of(t)];return i&&e.push(Xr.of((e=>{let n=e.plugin(t);return n?i(n):pr.none}))),r&&e.push(r(t)),e}))}static fromClass(t,e){return Nr.define((e=>new t(e)),e)}}class Br{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(Dr(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){Dr(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){Dr(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Vr=Ht.define(),Ir=Ht.define(),Xr=Ht.define(),Ur=Ht.define(),qr=Ht.define(),zr=Ht.define();class Yr{constructor(t,e,n,r){this.fromA=t,this.toA=e,this.fromB=n,this.toB=r}join(t){return new Yr(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let r=t[e-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==t.length?null:t[r],l=o-s,c=a?a.fromB:1e9;for(;i<e.length&&e[i]<c;){let t=e[i],r=e[i+1],o=Math.max(s,t),a=Math.min(c,r);if(o<=a&&new Yr(o+l,a+l,o,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new Yr(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class Lr{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Bt.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let r=[];this.changes.iterChangedRanges(((t,e,n,i)=>r.push(new Yr(t,e,n,i)))),this.changedRanges=r;let i=t.hasFocus;i!=t.inputState.notifiedFocused&&(t.inputState.notifiedFocused=i,this.flags|=1)}static create(t,e,n){return new Lr(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var Gr=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Gr||(Gr={}));const Fr=Gr.LTR,Hr=Gr.RTL;function Kr(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Jr=Kr("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ti=Kr("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ei=Object.create(null),ni=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);ei[e]=n,ei[n]=-e}const ri=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ii{constructor(t,e,n){this.from=t,this.to=e,this.level=n}get dir(){return this.level%2?Hr:Fr}side(t,e){return this.dir==e==t?this.to:this.from}static find(t,e,n,r){let i=-1;for(let o=0;o<t.length;o++){let s=t[o];if(s.from<=e&&s.to>=e){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<e:s.to>e:t[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}const oi=[];function si(t){return[new ii(0,t,0)]}let ai="";function li(t,e,n,r,i){var o;let s=r.head-t.from,a=-1;if(0==s){if(!i||!t.length)return null;e[0].level!=n&&(s=e[0].side(!1,n),a=0)}else if(s==t.length){if(i)return null;let t=e[e.length-1];t.level!=n&&(s=t.side(!0,n),a=e.length-1)}a<0&&(a=ii.find(e,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let l=e[a];s==l.side(i,n)&&(l=e[a+=i?1:-1],s=l.side(!i,n));let c=i==(l.dir==n),h=Tt(t.text,s,c);if(ai=t.text.slice(Math.min(s,h),Math.max(s,h)),h!=l.side(i,n))return Lt.cursor(h+t.from,c?-1:1,l.level);let u=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return u||l.level==n?u&&u.level<l.level?Lt.cursor(u.side(!i,n)+t.from,i?1:-1,u.level):Lt.cursor(h+t.from,i?-1:1,l.level):Lt.cursor(i?t.to:t.from,i?-1:1,n)}const ci="￿";class hi{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Ae.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=ci}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let r=t;;){this.findPointBefore(n,r),this.readNode(r);let t=r.nextSibling;if(t==e)break;let i=Dn.get(r),o=Dn.get(t);(i&&o?i.breakAfter:(i?i.breakAfter:ui(r))||ui(t)&&("BR"!=r.nodeName||r.cmIgnore))&&this.lineBreak(),r=t}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=r.exec(e))&&(o=i.index,s=i[0].length),this.append(e.slice(n,o<0?e.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=o+s}}readNode(t){if(t.cmIgnore)return;let e=Dn.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+Math.min(e,n.offset))}}function ui(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class fi{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class di extends Dn{constructor(t){super(),this.view=t,this.compositionDeco=pr.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new yr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Yr(0,0,0,t.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(t){let e=t.changedRanges;this.minWidth>0&&e.length&&(e.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=pr.none:(t.transactions.length||this.dirty)&&(this.compositionDeco=function(t,e){let n=gi(t);if(!n)return pr.none;let{from:r,to:i,node:o,text:s}=n,a=e.mapPos(r,1),l=Math.max(a,e.mapPos(i,-1)),{state:c}=t,h=3==o.nodeType?o.nodeValue:new hi([],c).readRange(o.firstChild,null).text;if(l-a<h.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+h.length),ci)==h)l=a+h.length;else{if(c.doc.sliceString(Math.max(0,l-h.length),l,ci)!=h)return pr.none;a=l-h.length}else if(c.doc.sliceString(a,l,ci)!=h)return pr.none;let u=Dn.get(o);return u instanceof nr?u=u.widget.topView:u&&(u.parent=null),pr.set(pr.replace({widget:new mi(o,s,u),inclusive:!0}).range(a,l))}(this.view,t.changes)),(Hn.ie||Hn.chrome)&&!this.compositionDeco.size&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let n=function(t,e,n){let r=new vi;return Be.compare(t,e,n,r),r.changes}(this.decorations,this.updateDeco(),t.changes);return e=Yr.extendWithRanges(e,n),(0!=this.dirty||0!=e.length)&&(this.updateInner(e,t.startState.doc.length),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=Hn.chrome||Hn.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(t),this.dirty=0,t&&(t.written||n.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof wr&&t.widget instanceof pi&&r.push(t.dom);n.updateGaps(r)}updateChildren(t,e){let n=this.childCursor(e);for(let e=t.length-1;;e--){let r=e>=0?t[e]:null;if(!r)break;let{fromA:i,toA:o,fromB:s,toB:a}=r,{content:l,breakAtStart:c,openStart:h,openEnd:u}=xr.build(this.view.state.doc,s,a,this.decorations,this.dynamicDecorationMap),{i:f,off:d}=n.findPos(o,1),{i:p,off:g}=n.findPos(i,-1);Zn(this,p,g,f,d,l,c,h,u)}}updateSelection(t=!1,e=!1){if(!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange(),!e&&!this.mayControlSelection())return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,i=this.domAtPos(r.anchor),o=r.empty?i:this.domAtPos(r.head);if(Hn.gecko&&r.empty&&1==(s=i).node.nodeType&&s.node.firstChild&&(0==s.offset||"false"==s.node.childNodes[s.offset-1].contentEditable)&&(s.offset==s.node.childNodes.length||"false"==s.node.childNodes[s.offset].contentEditable)){let t=document.createTextNode("");this.view.observer.ignore((()=>i.node.insertBefore(t,i.node.childNodes[i.offset]||null))),i=o=new Rn(t,0),n=!0}var s;let a=this.view.observer.selectionRange;!n&&a.focusNode&&bn(i.node,i.offset,a.anchorNode,a.anchorOffset)&&bn(o.node,o.offset,a.focusNode,a.focusOffset)||(this.view.observer.ignore((()=>{Hn.android&&Hn.chrome&&this.dom.contains(a.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=gn(this.view.root);if(t)if(r.empty){if(Hn.gecko){let t=(e=i.node,n=i.offset,1!=e.nodeType?0:(n&&"false"==e.childNodes[n-1].contentEditable?1:0)|(n<e.childNodes.length&&"false"==e.childNodes[n].contentEditable?2:0));if(t&&3!=t){let e=Oi(i.node,i.offset,1==t?1:-1);e&&(i=new Rn(e,1==t?0:e.nodeValue.length))}}t.collapse(i.node,i.offset),null!=r.bidiLevel&&null!=a.cursorBidiLevel&&(a.cursorBidiLevel=r.bidiLevel)}else if(t.extend){t.collapse(i.node,i.offset);try{t.extend(o.node,o.offset)}catch(t){}}else{let e=document.createRange();r.anchor>r.head&&([i,o]=[o,i]),e.setEnd(o.node,o.offset),e.setStart(i.node,i.offset),t.removeAllRanges(),t.addRange(e)}var e,n})),this.view.observer.setSelectionRange(i,o)),this.impreciseAnchor=i.precise?null:new Rn(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new Rn(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:t}=this,e=t.state.selection.main,n=gn(t.root),{anchorNode:r,anchorOffset:i}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let o=yr.find(this,e.head);if(!o)return;let s=o.posAtStart;if(e.head==s||e.head==s+o.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let h=t.observer.selectionRange;t.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=e.from&&n.collapse(r,i)}mayControlSelection(){let t=this.view.root.activeElement;return t==this.dom||On(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t))}nearest(t){for(let e=t;e;){let t=Dn.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof yr)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){for(let n=this.length,r=this.children.length-1;;r--){let i=this.children[r],o=n-i.breakAfter-i.length;if(t>o||t==o&&i.type!=dr.WidgetBefore&&i.type!=dr.WidgetAfter&&(!r||2==e||this.children[r-1].breakAfter||this.children[r-1].type==dr.WidgetBefore&&e>-2))return i.coordsAt(t-o,e);n=o}}measureVisibleLineHeights(t){let e=[],{from:n,to:r}=t,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==Gr.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],h=t+c.length;if(h>r)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),o){let e=c.dom.lastChild,r=e?vn(e):[];if(r.length){let e=r[r.length-1],o=a?e.right-n.left:n.right-e.left;o>s&&(s=o,this.minWidth=i,this.minWidthFrom=t,this.minWidthTo=h)}}}t=h+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?Gr.RTL:Gr.LTR}measureTextSize(){for(let t of this.children)if(t instanceof yr){let e=t.measureTextSize();if(e)return e}let t,e,n=document.createElement("div");return n.className="cm-line",n.style.width="99999px",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(n);let r=vn(n.firstChild)[0];t=n.getBoundingClientRect().height,e=r?r.width/27:7,n.remove()})),{lineHeight:t,charWidth:e}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new jn(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,r=0;;r++){let i=r==e.viewports.length?null:e.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=e.lineBlockAt(o).bottom-e.lineBlockAt(n).top;t.push(pr.replace({widget:new pi(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return pr.set(t)}updateDeco(){let t=this.view.state.facet(Xr).map(((t,e)=>(this.dynamicDecorationMap[e]="function"==typeof t)?t(this.view):t));for(let e=t.length;e<t.length+3;e++)this.dynamicDecorationMap[e]=!1;return this.decorations=[...t,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){let e,{range:n}=t,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,e.left),top:Math.min(r.top,e.top),right:Math.max(r.right,e.right),bottom:Math.max(r.bottom,e.bottom)});let i=0,o=0,s=0,a=0;for(let t of this.view.state.facet(qr).map((t=>t(this.view))))if(t){let{left:e,right:n,top:r,bottom:l}=t;null!=e&&(i=Math.max(i,e)),null!=n&&(o=Math.max(o,n)),null!=r&&(s=Math.max(s,r)),null!=l&&(a=Math.max(a,l))}let l={left:r.left-i,top:r.top-s,right:r.right+o,bottom:r.bottom+a};!function(t,e,n,r,i,o,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let h=t;h;)if(1==h.nodeType){let t,u=h==l.body;if(u)t=Cn(c);else{if(h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let e=h.getBoundingClientRect();t={left:e.left,right:e.left+h.clientWidth,top:e.top,bottom:e.top+h.clientHeight}}let f=0,d=0;if("nearest"==i)e.top<t.top?(d=-(t.top-e.top+s),n>0&&e.bottom>t.bottom+d&&(d=e.bottom-t.bottom+d+s)):e.bottom>t.bottom&&(d=e.bottom-t.bottom+s,n<0&&e.top-d<t.top&&(d=-(t.top+d-e.top+s)));else{let r=e.bottom-e.top,o=t.bottom-t.top;d=("center"==i&&r<=o?e.top+r/2-o/2:"start"==i||"center"==i&&n<0?e.top-s:e.bottom-o+s)-t.top}if("nearest"==r?e.left<t.left?(f=-(t.left-e.left+o),n>0&&e.right>t.right+f&&(f=e.right-t.right+f+o)):e.right>t.right&&(f=e.right-t.right+o,n<0&&e.left<t.left+f&&(f=-(t.left+f-e.left+o))):f=("center"==r?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==r==a?e.left-o:e.right-(t.right-t.left)+o)-t.left,f||d)if(u)c.scrollBy(f,d);else{let t=0,n=0;if(d){let t=h.scrollTop;h.scrollTop+=d,n=h.scrollTop-t}if(f){let e=h.scrollLeft;h.scrollLeft+=f,t=h.scrollLeft-e}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-f)<1&&(r="nearest"),n&&Math.abs(n-d)<1&&(i="nearest")}if(u)break;h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,l,n.head<n.anchor?-1:1,t.x,t.y,t.xMargin,t.yMargin,this.view.textDirection==Gr.LTR)}}class pi extends fr{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function gi(t){let e=t.observer.selectionRange,n=e.focusNode&&Oi(e.focusNode,e.focusOffset,0);if(!n)return null;let r=t.docView.nearest(n);if(!r)return null;if(r instanceof yr){let t=n;for(;t.parentNode!=r.dom;)t=t.parentNode;let e=t.previousSibling;for(;e&&!Dn.get(e);)e=e.previousSibling;let i=e?Dn.get(e).posAtEnd:r.posAtStart;return{from:i,to:i,node:t,text:n}}{for(;;){let{parent:t}=r;if(!t)return null;if(t instanceof yr)break;r=t}let t=r.posAtStart;return{from:t,to:t+r.length,node:r.dom,text:n}}}class mi extends fr{constructor(t,e,n){super(),this.top=t,this.text=e,this.topView=n}eq(t){return this.top==t.top&&this.text==t.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return nr}}function Oi(t,e,n){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0&&n<=0)e=xn(t=t.childNodes[e-1]);else{if(!(1==t.nodeType&&e<t.childNodes.length&&n>=0))return null;t=t.childNodes[e],e=0}}}class vi{constructor(){this.changes=[]}compareRange(t,e){br(t,e,this.changes)}comparePoint(t,e){br(t,e,this.changes)}}function bi(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function yi(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function wi(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function xi(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Si(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function ki(t,e,n){let r,i,o,s,a,l,c,h,u=!1;for(let f=t.firstChild;f;f=f.nextSibling){let t=vn(f);for(let d=0;d<t.length;d++){let p=t[d];i&&wi(i,p)&&(p=xi(Si(p,i.bottom),i.top));let g=bi(e,p),m=yi(n,p);if(0==g&&0==m)return 3==f.nodeType?Ci(f,e,n):ki(f,e,n);(!r||s>m||s==m&&o>g)&&(r=f,i=p,o=g,s=m,u=!g||(g>0?d<t.length-1:d>0)),0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=f,c=p):n<p.top&&(!h||h.top>p.top)&&(l=f,h=p):c&&wi(c,p)?c=Si(c,p.bottom):h&&wi(h,p)&&(h=xi(h,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):h&&h.top<=n&&(r=l,i=h),!r)return{node:t,offset:0};let f=Math.max(i.left,Math.min(i.right,e));return 3==r.nodeType?Ci(r,f,n):u&&"false"!=r.contentEditable?ki(r,f,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0)}}function Ci(t,e,n){let r=t.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=_n(t,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<o){let n=e>=(c.left+c.right)/2,r=n;if((Hn.chrome||Hn.gecko)&&_n(t,a).getBoundingClientRect().left==c.right&&(r=!n),h<=0)return{node:t,offset:a+(r?1:0)};i=a+(r?1:0),o=h}}}return{node:t,offset:i>-1?i:s>0?t.nodeValue.length:0}}function Qi(t,{x:e,y:n},r,i=-1){var o;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,h=n-l;if(h<0)return 0;if(h>c)return t.state.doc.length;for(let e=t.defaultLineHeight/2,n=!1;s=t.elementAtHeight(h),s.type!=dr.Text;)for(;h=i>0?s.bottom+e:s.top-e,!(h>=0&&h<=c);){if(n)return r?null:0;n=!0,i=-i}n=l+h;let u=s.from;if(u<t.viewport.from)return 0==t.viewport.from?0:r?null:Pi(t,a,s,e,n);if(u>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:r?null:Pi(t,a,s,e,n);let f=t.dom.ownerDocument,d=t.root.elementFromPoint?t.root:f,p=d.elementFromPoint(e,n);p&&!t.contentDOM.contains(p)&&(p=null),p||(e=Math.max(a.left+1,Math.min(a.right-1,e)),p=d.elementFromPoint(e,n),p&&!t.contentDOM.contains(p)&&(p=null));let g,m=-1;if(p&&0!=(null===(o=t.docView.nearest(p))||void 0===o?void 0:o.isEditable))if(f.caretPositionFromPoint){let t=f.caretPositionFromPoint(e,n);t&&({offsetNode:g,offset:m}=t)}else if(f.caretRangeFromPoint){let r=f.caretRangeFromPoint(e,n);r&&(({startContainer:g,startOffset:m}=r),(!t.contentDOM.contains(g)||Hn.safari&&function(t,e,n){let r;if(3!=t.nodeType||e!=(r=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return _n(t,r-1,r).getBoundingClientRect().left>n}(g,m,e)||Hn.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}return n-(1==t.nodeType?t.getBoundingClientRect():_n(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect()).left>5}(g,m,e))&&(g=void 0))}if(!g||!t.docView.dom.contains(g)){let r=yr.find(t.docView,u);if(!r)return h>s.top+s.height/2?s.to:s.from;({node:g,offset:m}=ki(r.dom,e,n))}return t.docView.posFromDOM(g,m)}function Pi(t,e,n,r,i){let o=Math.round((r-e.left)*t.defaultCharacterWidth);t.lineWrapping&&n.height>1.5*t.defaultLineHeight&&(o+=Math.floor((i-n.top)/t.defaultLineHeight)*t.viewState.heightOracle.lineLength);let s=t.state.sliceDoc(n.from,n.to);return n.from+Je(s,o,t.state.tabSize)}function Ei(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=t.bidiSpans(i),s=t.textDirectionAt(i.from);for(let a=e,l=null;;){let e=li(i,o,s,a,n),c=ai;if(!e){if(i.number==(n?t.state.doc.lines:1))return a;c="\n",i=t.state.doc.line(i.number+(n?1:-1)),o=t.bidiSpans(i),e=Lt.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return e;l=r(c)}a=e}}function Ti(t,e,n){let r=t.state.facet(Ur).map((e=>e(t)));for(;;){let t=!1;for(let i of r)i.between(n.from-1,n.from+1,((r,i,o)=>{n.from>r&&n.from<i&&(n=e.head>n.from?Lt.cursor(r,1):Lt.cursor(i,-1),t=!0)}));if(!t)return n}}class _i{constructor(t){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;let e=(e,n)=>{this.ignoreDuringComposition(n)||"keydown"==n.type&&this.keydown(t,n)||(this.mustFlushObserver(n)&&t.observer.forceFlush(),this.runCustomHandlers(n.type,t,n)?n.preventDefault():e(t,n))};for(let n in ji){let r=ji[n];t.contentDOM.addEventListener(n,(n=>{Wi(t,n)&&e(r,n)}),Zi[n]),this.registeredEvents.push(n)}t.scrollDOM.addEventListener("mousedown",(n=>{n.target==t.scrollDOM&&e(ji.mousedown,n)})),Hn.chrome&&102==Hn.chrome_version&&t.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?t.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,t.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=t.hasFocus,Hn.safari&&t.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}ensureHandlers(t,e){var n;let r;this.customHandlers=[];for(let i of e)if(r=null===(n=i.update(t).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:i.value,handlers:r});for(let e in r)this.registeredEvents.indexOf(e)<0&&"scroll"!=e&&(this.registeredEvents.push(e),t.contentDOM.addEventListener(e,(n=>{Wi(t,n)&&this.runCustomHandlers(e,t,n)&&n.preventDefault()})))}}runCustomHandlers(t,e,n){for(let r of this.customHandlers){let i=r.handlers[t];if(i)try{if(i.call(r.plugin,n,e)||n.defaultPrevented)return!0}catch(t){Dr(e.state,t)}}return!1}runScrollHandlers(t,e){this.lastScrollTop=t.scrollDOM.scrollTop,this.lastScrollLeft=t.scrollDOM.scrollLeft;for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,e,t)}catch(e){Dr(t.state,e)}}}keydown(t,e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(Hn.android&&Hn.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return t.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return!(!Hn.ios||e.synthetic||e.altKey||e.metaKey||!((n=$i.find((t=>t.keyCode==e.keyCode)))&&!e.ctrlKey||Mi.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)||(this.pendingIOSKey=n||e,setTimeout((()=>this.flushIOSKey(t)),250),0))}flushIOSKey(t){let e=this.pendingIOSKey;return!!e&&(this.pendingIOSKey=void 0,$n(t.contentDOM,e.key,e.keyCode))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(Hn.safari&&!Hn.ios&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(t){return"keydown"==t.type&&229!=t.keyCode}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const $i=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Mi="dthko",Ri=[16,17,18,20,91,92,224,225];function Ai(t){return.7*t+8}class Di{constructor(t,e,n,r){this.view=t,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParent=function(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(1==n.nodeType){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else{if(11!=n.nodeType)break;n=n.host}return null}(t.contentDOM);let i=t.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Ae.allowMultipleSelections)&&function(t,e){let n=t.state.facet(Cr);return n.length?n[0](e):Hn.mac?e.metaKey:e.ctrlKey}(t,e),this.dragMove=function(t,e){let n=t.state.facet(Qr);return n.length?n[0](e):Hn.mac?!e.altKey:!e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=gn(t.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let t=0;t<i.length;t++){let n=i[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=Fi(e))&&null,!1===this.dragging&&(e.preventDefault(),this.select(e))}move(t){var e;if(0==t.buttons)return this.destroy();if(!1!==this.dragging)return;this.select(this.lastEvent=t);let n=0,r=0,i=(null===(e=this.scrollParent)||void 0===e?void 0:e.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight};t.clientX<=i.left?n=-Ai(i.left-t.clientX):t.clientX>=i.right&&(n=Ai(t.clientX-i.right)),t.clientY<=i.top?r=-Ai(i.top-t.clientY):t.clientY>=i.bottom&&(r=Ai(t.clientY-i.bottom)),this.setScrollSpeed(n,r)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}select(t){let e=this.style.get(t,this.extend,this.multiple);!this.mustSelect&&e.eq(this.view.state.selection)&&e.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:e,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){t.docChanged&&this.dragging&&(this.dragging=this.dragging.map(t.changes)),this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function Wi(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,r=e.target;r!=t.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=Dn.get(r))&&n.ignoreEvent(e))return!1;return!0}const ji=Object.create(null),Zi=Object.create(null),Ni=Hn.ie&&Hn.ie_version<15||Hn.ios&&Hn.webkit_version<604;function Bi(t,e){let n,{state:r}=t,i=1,o=r.toText(e),s=o.lines==r.selection.ranges.length;if(null!=Ki&&r.selection.ranges.every((t=>t.empty))&&Ki==o.toString()){let t=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=r.toText((s?o.line(i++).text:e)+r.lineBreak);return{changes:{from:a.from,insert:l},range:Lt.cursor(n.from+l.length)}}))}else n=s?r.changeByRange((t=>{let e=o.line(i++);return{changes:{from:t.from,to:t.to,insert:e.text},range:Lt.cursor(t.from+e.length)}})):r.replaceSelection(o);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function Vi(t,e,n,r){if(1==r)return Lt.cursor(e,n);if(2==r)return function(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),o=e-i.from;if(0==i.length)return Lt.cursor(e);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=Tt(i.text,o,!1):a=Tt(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let t=Tt(i.text,s,!1);if(r(i.text.slice(t,s))!=l)break;s=t}for(;a<i.length;){let t=Tt(i.text,a);if(r(i.text.slice(a,t))!=l)break;a=t}return Lt.range(s+i.from,a+i.from)}(t.state,e,n);{let n=yr.find(t.docView,e),r=t.state.doc.lineAt(n?n.posAtEnd:e),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<t.state.doc.length&&o==r.to&&o++,Lt.range(i,o)}}ji.keydown=(t,e)=>{t.inputState.setSelectionOrigin("select"),27==e.keyCode?t.inputState.lastEscPress=Date.now():Ri.indexOf(e.keyCode)<0&&(t.inputState.lastEscPress=0)},ji.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},ji.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},Zi.touchstart=Zi.touchmove={passive:!0},ji.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return;let n=null;for(let r of t.state.facet(Pr))if(n=r(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=qi(t,e),r=Fi(e),i=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),i=i.map(t.changes))},get(e,o,s){let a=qi(t,e),l=Vi(t,a.pos,a.bias,r);if(n.pos!=a.pos&&!o){let e=Vi(t,n.pos,n.bias,r),i=Math.min(e.from,l.from),o=Math.max(e.to,l.to);l=i<l.from?Lt.range(i,o):Lt.range(o,i)}return o?i.replaceRange(i.main.extend(l.from,l.to)):s&&i.ranges.length>1&&i.ranges.some((t=>t.eq(l)))?function(t,e){for(let n=0;;n++)if(t.ranges[n].eq(e))return Lt.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}(i,l):s?i.addRange(l):Lt.create([l])}}}(t,e)),n){let r=t.root.activeElement!=t.contentDOM;r&&t.observer.ignore((()=>Tn(t.contentDOM))),t.inputState.startMouseSelection(new Di(t,e,n,r))}};let Ii=(t,e)=>t>=e.top&&t<=e.bottom,Xi=(t,e,n)=>Ii(e,n)&&t>=n.left&&t<=n.right;function Ui(t,e,n,r){let i=yr.find(t.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&Xi(n,r,s))return-1;let a=i.coordsAt(o,1);return a&&Xi(n,r,a)?1:s&&Ii(r,s)?-1:1}function qi(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Ui(t,n,e.clientX,e.clientY)}}const zi=Hn.ie&&Hn.ie_version<=11;let Yi=null,Li=0,Gi=0;function Fi(t){if(!zi)return t.detail;let e=Yi,n=Gi;return Yi=t,Gi=Date.now(),Li=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Li+1)%3:1}function Hi(t,e,n,r){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=t.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:i,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}ji.dragstart=(t,e)=>{let{selection:{main:n}}=t.state,{mouseSelection:r}=t.inputState;r&&(r.dragging=n),e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove")},ji.drop=(t,e)=>{if(!e.dataTransfer)return;if(t.state.readOnly)return e.preventDefault();let n=e.dataTransfer.files;if(n&&n.length){e.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&Hi(t,e,r.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=o,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(r[t]=e.result),o()},e.readAsText(n[t])}}else Hi(t,e,e.dataTransfer.getData("Text"),!0)},ji.paste=(t,e)=>{if(t.state.readOnly)return e.preventDefault();t.observer.flush();let n=Ni?null:e.clipboardData;n?(Bi(t,n.getData("text/plain")),e.preventDefault()):function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),Bi(t,n.value)}),50)}(t)};let Ki=null;function Ji(t){setTimeout((()=>{t.hasFocus!=t.inputState.notifiedFocused&&t.update([])}),10)}ji.copy=ji.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=function(t){let e=[],n=[],r=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let i=-1;for(let{from:r}of t.selection.ranges){let o=t.doc.lineAt(r);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:r}}(t.state);if(!n&&!i)return;Ki=i?n:null;let o=Ni?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",n)):function(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout((()=>{r.remove(),t.focus()}),50)}(t,n),"cut"!=e.type||t.state.readOnly||t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})},ji.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Ji(t)},ji.blur=t=>{t.observer.clearSelectionRange(),Ji(t)},ji.compositionstart=ji.compositionupdate=t=>{null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)},ji.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionFirstChange=null,Hn.chrome&&Hn.android&&t.observer.flushSoon(),setTimeout((()=>{t.inputState.composing<0&&t.docView.compositionDeco.size&&t.update([])}),50)},ji.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},ji.beforeinput=(t,e)=>{var n;let r;if(Hn.chrome&&Hn.android&&(r=$i.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let e=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}};const to=["pre-wrap","normal","pre-line","break-spaces"];class eo{constructor(t){this.lineWrapping=t,this.doc=Ot.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(t){return this.lineWrapping?(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return to.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let r=t[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(e=!0,this.heightSamples[Math.floor(10*r)]=!0)}return e}refresh(t,e,n,r,i){let o=to.indexOf(t)>-1,s=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=e,this.charWidth=n,this.lineLength=r,s){this.heightSamples={};for(let t=0;t<i.length;t++){let e=i[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return s}}class no{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class ro{constructor(t,e,n,r,i){this.from=t,this.length=e,this.top=n,this.height=r,this.type=i}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(t){let e=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(t.type)?t.type:[t]);return new ro(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var io=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(io||(io={}));const oo=.001;class so{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|-3&this.flags}setHeight(t,e){this.height!=e&&(Math.abs(this.height-e)>oo&&(t.heightChanged=!0),this.height=e)}replace(t,e,n){return so.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,r){let i=this;for(let o=r.length-1;o>=0;o--){let{fromA:s,toA:a,fromB:l,toB:c}=r[o],h=i.lineAt(s,io.ByPosNoHeight,e,0,0),u=h.to>=a?h:i.lineAt(a,io.ByPosNoHeight,e,0,0);for(c+=u.to-a,a=u.to;o>0&&h.from<=r[o-1].toA;)s=r[o-1].fromA,l=r[o-1].fromB,o--,s<h.from&&(h=i.lineAt(s,io.ByPosNoHeight,e,0,0));l+=h.from-s,s=h.from;let f=fo.build(n,t,l,c);i=i.replace(s,a,f)}return i.updateHeight(n,0)}static empty(){return new lo(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,r=0,i=0;for(;;)if(e==n)if(r>2*i){let i=t[e-1];i.break?t.splice(--e,1,i.left,null,i.right):t.splice(--e,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,i-=e.size}}else if(r<i){let n=t[e++];n&&(r+=n.size)}else{let e=t[--n];e&&(i+=e.size)}let o=0;return null==t[e-1]?(o=1,e--):null==t[e]&&(o=1,n++),new ho(so.of(t.slice(0,e)),o,so.of(t.slice(n)))}}so.prototype.size=1;class ao extends so{constructor(t,e,n){super(t,e),this.type=n}blockAt(t,e,n,r){return new ro(r,this.length,n,this.height,this.type)}lineAt(t,e,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(t,e,n,r,i,o){t<=i+this.length&&e>=i&&o(this.blockAt(0,n,r,i))}updateHeight(t,e=0,n=!1,r){return r&&r.from<=e&&r.more&&this.setHeight(t,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class lo extends ao{constructor(t,e){super(t,e,dr.Text),this.collapsed=0,this.widgetHeight=0}replace(t,e,n){let r=n[0];return 1==n.length&&(r instanceof lo||r instanceof co&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof co?r=new lo(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):so.of(n)}updateHeight(t,e=0,n=!1,r){return r&&r.from<=e&&r.more?this.setHeight(t,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class co extends so{constructor(t){super(t,0)}lines(t,e){let n=t.lineAt(e).number,r=t.lineAt(e+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(t,e,n,r){let{firstLine:i,lastLine:o,lineHeight:s}=this.lines(e,r),a=Math.max(0,Math.min(o-i,Math.floor((t-n)/s))),{from:l,length:c}=e.line(i+a);return new ro(l,c,n+s*a,s,dr.Text)}lineAt(t,e,n,r,i){if(e==io.ByHeight)return this.blockAt(t,n,r,i);if(e==io.ByPosNoHeight){let{from:e,to:r}=n.lineAt(t);return new ro(e,r-e,0,0,dr.Text)}let{firstLine:o,lineHeight:s}=this.lines(n,i),{from:a,length:l,number:c}=n.lineAt(t);return new ro(a,l,r+s*(c-o),s,dr.Text)}forEachLine(t,e,n,r,i,o){let{firstLine:s,lineHeight:a}=this.lines(n,i);for(let l=Math.max(t,i),c=Math.min(i+this.length,e);l<=c;){let e=n.lineAt(l);l==t&&(r+=a*(e.number-s)),o(new ro(e.from,e.length,r,a,dr.Text)),r+=a,l=e.to+1}}replace(t,e,n){let r=this.length-e;if(r>0){let t=n[n.length-1];t instanceof co?n[n.length-1]=new co(t.length+r):n.push(null,new co(r-1))}if(t>0){let e=n[0];e instanceof co?n[0]=new co(t+e.length):n.unshift(new co(t-1),null)}return so.of(n)}decomposeLeft(t,e){e.push(new co(t-1),null)}decomposeRight(t,e){e.push(null,new co(this.length-t-1))}updateHeight(t,e=0,n=!1,r){let i=e+this.length;if(r&&r.from<=e+this.length&&r.more){let n=[],o=Math.max(e,r.from),s=-1,a=t.heightChanged;for(r.from>e&&n.push(new co(r.from-e-1).updateHeight(t,e));o<=i&&r.more;){let e=t.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=oo&&(s=-2);let a=new lo(e,i);a.outdated=!1,n.push(a),o+=e+1}o<=i&&n.push(null,new co(i-o).updateHeight(t,o));let l=so.of(n);return t.heightChanged=a||s<0||Math.abs(l.height-this.height)>=oo||Math.abs(s-this.lines(t.doc,e).lineHeight)>=oo,l}return(n||this.outdated)&&(this.setHeight(t,t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class ho extends so{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,r){let i=n+this.left.height;return t<i?this.left.blockAt(t,e,n,r):this.right.blockAt(t,e,i,r+this.left.length+this.break)}lineAt(t,e,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=e==io.ByHeight?t<o:t<s,l=a?this.left.lineAt(t,e,n,r,i):this.right.lineAt(t,e,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==io.ByPosNoHeight?io.ByPosNoHeight:io.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,r,i).join(l)}forEachLine(t,e,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,r,i,o),e>=a&&this.right.forEachLine(t,e,n,s,a,o);else{let l=this.lineAt(a,io.ByPos,n,r,i);t<l.from&&this.left.forEachLine(t,l.from-1,n,r,i,o),l.to>=t&&l.from<=e&&o(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,o)}}replace(t,e,n){let r=this.left.length+this.break;if(e<r)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-r,e-r,n));let i=[];t>0&&this.decomposeLeft(t,i);let o=i.length;for(let t of n)i.push(t);if(t>0&&uo(i,o-1),e<this.length){let t=i.length;this.decomposeRight(e,i),uo(i,t)}return so.of(i)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,r=n+this.break;if(t>=r)return this.right.decomposeRight(t-r,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<r&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?so.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,r){let{left:i,right:o}=this,s=e+i.length+this.break,a=null;return r&&r.from<=e+i.length&&r.more?a=i=i.updateHeight(t,e,n,r):i.updateHeight(t,e,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(t,s,n,r):o.updateHeight(t,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function uo(t,e){let n,r;null==t[e]&&(n=t[e-1])instanceof co&&(r=t[e+1])instanceof co&&t.splice(e-1,3,new co(n.length+1+r.length))}class fo{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof lo?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new lo(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let i=e-t;n.block?this.addBlock(new ao(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new lo(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new co(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof lo)return t;let e=new lo(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine(),t.type!=dr.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,t.type!=dr.WidgetBefore&&(this.covering=t)}addLineDeco(t,e){let n=this.ensureLine();n.length+=e,n.collapsed+=e,n.widgetHeight=Math.max(n.widgetHeight,t),this.writtenTo=this.pos=this.pos+e}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof lo||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new lo(0,-1));let n=t;for(let t of this.nodes)t instanceof lo&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,r){let i=new fo(n,t);return Be.spans(e,n,r,i,0),i.finish(n)}}class po{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,r){(t<e||n&&n.heightRelevant||r&&r.heightRelevant)&&br(t,e,this.changes,5)}}function go(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=r.body;)if(1==e.nodeType){let n=e,r=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=r.overflow){let r=n.getBoundingClientRect();o=Math.max(o,r.left),s=Math.min(s,r.right),a=Math.max(a,r.top),l=e==t.parentNode?r.bottom:Math.min(l,r.bottom)}e="absolute"==r.position||"fixed"==r.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function mo(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Oo{constructor(t,e,n){this.from=t,this.to=e,this.size=n}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(t){return pr.replace({widget:new vo(this.size,t)}).range(this.from,this.to)}}class vo extends fr{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class bo{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=ko,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Gr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(Ir).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new eo(e),this.stateDeco=t.facet(Xr).filter((t=>"function"!=typeof t)),this.heightMap=so.empty().applyChanges(this.stateDeco,Ot.empty,this.heightOracle.setDoc(t.doc),[new Yr(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=pr.set(this.lineGaps.map((t=>t.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let r=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>r>=t&&r<=e))){let{from:e,to:n}=this.lineBlockAt(r);t.push(new yo(e,n))}}this.viewports=t.sort(((t,e)=>t.from-e.from)),this.scaler=this.heightMap.height<=7e6?ko:new Co(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(t=>{this.viewportLines.push(1==this.scaler.scale?t:Qo(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Xr).filter((t=>"function"!=typeof t));let r=t.changedRanges,i=Yr.extendWithRanges(r,function(t,e,n){let r=new po;return Be.compare(t,e,n,r,0),r.changes}(n,this.stateDeco,t?t.changes:Bt.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=o&&(t.flags|=2);let s=i.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<s.from||e.range.head>s.to)||!this.viewportIsAppropriate(s))&&(s=this.getViewport(0,e));let a=!t.changes.empty||2&t.flags||s.from!=this.viewport.from||s.to!=this.viewport.to;this.viewport=s,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(Mr)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?Gr.RTL:Gr.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),s=o||this.mustMeasureContent||this.contentDOMHeight!=e.clientHeight;this.contentDOMHeight=e.clientHeight,this.mustMeasureContent=!1;let a=0,l=0,c=parseInt(n.paddingTop)||0,h=parseInt(n.paddingBottom)||0;this.paddingTop==c&&this.paddingBottom==h||(this.paddingTop=c,this.paddingBottom=h,a|=10),this.editorWidth!=t.scrollDOM.clientWidth&&(r.lineWrapping&&(s=!0),this.editorWidth=t.scrollDOM.clientWidth,a|=8);let u=(this.printing?mo:go)(e,this.paddingTop),f=u.top-this.pixelViewport.top,d=u.bottom-this.pixelViewport.bottom;this.pixelViewport=u;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(s=!0)),!this.inView&&!this.scrollTarget)return 0;let g=e.clientWidth;if(this.contentDOMWidth==g&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=g,this.editorHeight=t.scrollDOM.clientHeight,a|=8),s){let e=t.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(e)&&(o=!0),o||r.lineWrapping&&Math.abs(g-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:s}=t.docView.measureTextSize();o=n>0&&r.refresh(i,n,s,g/s,e),o&&(t.docView.minWidth=0,a|=8)}f>0&&d>0?l=Math.max(f,d):f<0&&d<0&&(l=Math.min(f,d)),r.heightChanged=!1;for(let n of this.viewports){let i=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(o?so.empty().applyChanges(this.stateDeco,Ot.empty,this.heightOracle,[new Yr(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new no(n.from,i))}r.heightChanged&&(a|=2)}let m=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return m&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&a||m)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,t)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),r=this.heightMap,i=this.state.doc,{visibleTop:o,visibleBottom:s}=this,a=new yo(r.lineAt(o-1e3*n,io.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),io.ByHeight,i,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(t,io.ByPos,i,0,0);n="center"==e.y?(s.top+s.bottom)/2-o/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-o,a=new yo(r.lineAt(n-500,io.ByHeight,i,0,0).from,r.lineAt(n+o+500,io.ByHeight,i,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),r=e.mapPos(t.to,1);return new yo(this.heightMap.lineAt(n,io.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,io.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(t,io.ByPos,this.state.doc,0,0),{bottom:i}=this.heightMap.lineAt(e,io.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==t||r<=o-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&r>o-2e3&&i<s+2e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let r of t)e.touchesRange(r.from,r.to)||n.push(new Oo(e.mapPos(r.from),e.mapPos(r.to),r.size));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,i=r>>1,o=r<<1;if(this.defaultTextDirection!=Gr.LTR&&!n)return[];let s=[],a=(r,o,l,c)=>{if(o-r<i)return;let h=this.state.selection.main,u=[h.from];h.empty||u.push(h.to);for(let t of u)if(t>r&&t<o)return a(r,t-10,l,c),void a(t+10,o,l,c);let f=function(t,e){for(let n of t)if(e(n))return n}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-r)<i&&Math.abs(t.to-o)<i&&!u.some((e=>t.from<e&&t.to>e))));if(!f){if(o<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=o&&t.to>=o))){let t=e.moveToLineBoundary(Lt.cursor(o),!1,!0).head;t>r&&(o=t)}f=new Oo(r,o,this.gapSize(l,r,o,c))}s.push(f)};for(let t of this.viewportLines){if(t.length<o)continue;let e=wo(t.from,t.to,this.stateDeco);if(e.total<o)continue;let i,s,l=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,o,a=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=l){let r=So(e,l),i=((this.visibleBottom-this.visibleTop)/2+a)/t.height;n=r-i,o=r+i}else n=(this.visibleTop-t.top-a)/t.height,o=(this.visibleBottom-t.top+a)/t.height;i=xo(e,n),s=xo(e,o)}else{let t,n,o=e.total*this.heightOracle.charWidth,a=r*this.heightOracle.charWidth;if(null!=l){let r=So(e,l),i=((this.pixelViewport.right-this.pixelViewport.left)/2+a)/o;t=r-i,n=r+i}else t=(this.pixelViewport.left-a)/o,n=(this.pixelViewport.right+a)/o;i=xo(e,t),s=xo(e,n)}i>t.from&&a(t.from,i,t,e),s<t.to&&a(s,t.to,t,e)}return s}gapSize(t,e,n,r){let i=So(r,n)-So(r,e);return this.heightOracle.lineWrapping?t.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(t){Oo.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=pr.set(t.map((t=>t.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let e=[];Be.spans(t,this.viewport.from,this.viewport.to,{span(t,n){e.push({from:t,to:n})},point(){}},20);let n=e.length!=this.visibleRanges.length||this.visibleRanges.some(((t,n)=>t.from!=e[n].from||t.to!=e[n].to));return this.visibleRanges=e,n?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||Qo(this.heightMap.lineAt(t,io.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(t){return Qo(this.heightMap.lineAt(this.scaler.fromDOM(t),io.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(t){return Qo(this.heightMap.blockAt(this.scaler.fromDOM(t),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class yo{constructor(t,e){this.from=t,this.to=e}}function wo(t,e,n){let r=[],i=t,o=0;return Be.spans(n,t,e,{span(){},point(t,e){t>i&&(r.push({from:i,to:t}),o+=t-i),i=e}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function xo({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:i}=e[t],o=i-n;if(r<=o)return n+r;r-=o}}function So(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}const ko={toDOM:t=>t,fromDOM:t=>t,scale:1};class Co{constructor(t,e,n){let r=0,i=0,o=0;this.viewports=n.map((({from:n,to:i})=>{let o=e.lineAt(n,io.ByPos,t,0,0).top,s=e.lineAt(i,io.ByPos,t,0,0).bottom;return r+=s-o,{from:n,to:i,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(e.height-r);for(let t of this.viewports)t.domTop=o+(t.top-i)*this.scale,o=t.domBottom=t.domTop+(t.bottom-t.top),i=t.bottom}toDOM(t){for(let e=0,n=0,r=0;;e++){let i=e<this.viewports.length?this.viewports[e]:null;if(!i||t<i.top)return r+(t-n)*this.scale;if(t<=i.bottom)return i.domTop+(t-i.top);n=i.bottom,r=i.domBottom}}fromDOM(t){for(let e=0,n=0,r=0;;e++){let i=e<this.viewports.length?this.viewports[e]:null;if(!i||t<i.domTop)return n+(t-r)/this.scale;if(t<=i.domBottom)return i.top+(t-i.domTop);n=i.bottom,r=i.domBottom}}}function Qo(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new ro(t.from,t.length,n,r-n,Array.isArray(t.type)?t.type.map((t=>Qo(t,e))):t.type)}const Po=Ht.define({combine:t=>t.join(" ")}),Eo=Ht.define({combine:t=>t.indexOf(!0)>-1}),To=rn.newName(),_o=rn.newName(),$o=rn.newName(),Mo={"&light":"."+_o,"&dark":"."+$o};function Ro(t,e,n){return new rn(e,{finish:e=>/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e})}const Ao=Ro("."+To,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Mo);class Do{constructor(t,e,n,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:i,impreciseAnchor:o}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=i||o?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new fi(n,r)),i==n&&o==r||e.push(new fi(i,o))),e}(t),n=new hi(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,r=2==t.length?t[1].pos:n;return n>-1&&r>-1?Lt.single(n+e,r+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=i&&i.node==e.focusNode&&i.offset==e.focusOffset||!mn(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),r=o&&o.node==e.anchorNode&&o.offset==e.anchorOffset||!mn(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset);this.newSel=Lt.single(r,n)}}}function Wo(t,e){let n,{newSel:r}=e,i=t.state.selection.main;if(e.bounds){let{from:r,to:o}=e.bounds,s=i.from,a=null;(8===t.inputState.lastKeyCode&&t.inputState.lastKeyTime>Date.now()-100||Hn.android&&e.text.length<o-r)&&(s=i.to,a="end");let l=function(t,e,n,r){let i=Math.min(t.length,e.length),o=0;for(;o<i&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;return"end"==r&&(n-=s+Math.max(0,o-Math.min(s,a))-o),s<o&&t.length<e.length?(o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o):a<o&&(o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}(t.state.doc.sliceString(r,o,ci),e.text,s-r,a);l&&(Hn.chrome&&13==t.inputState.lastKeyCode&&l.toB==l.from+2&&"￿￿"==e.text.slice(l.from,l.toB)&&l.toB--,n={from:r+l.from,to:r+l.toA,insert:Ot.of(e.text.slice(l.from,l.toB).split(ci))})}else!r||t.hasFocus&&t.state.facet(Wr)&&!r.main.eq(i)||(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(Hn.mac||Hn.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())?(r&&2==n.insert.length&&(r=Lt.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Ot.of([" "])}):Hn.chrome&&n&&n.from==n.to&&n.from==i.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(r&&(r=Lt.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:Ot.of([" "])}),n){let e=t.state;if(Hn.ios&&t.inputState.flushIOSKey(t))return!0;if(Hn.android&&(n.from==i.from&&n.to==i.to&&1==n.insert.length&&2==n.insert.lines&&$n(t.contentDOM,"Enter",13)||n.from==i.from-1&&n.to==i.to&&0==n.insert.length&&$n(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&0==n.insert.length&&$n(t.contentDOM,"Delete",46)))return!0;let o,s=n.insert.toString();if(t.state.facet(_r).some((e=>e(t,n.from,n.to,s))))return!0;if(t.inputState.composing>=0&&t.inputState.composing++,n.from>=i.from&&n.to<=i.to&&n.to-n.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==n.from+n.insert.length)&&t.inputState.composing<0){let r=i.from<n.from?e.sliceDoc(i.from,n.from):"",s=i.to>n.to?e.sliceDoc(n.to,i.to):"";o=e.replaceSelection(t.state.toText(r+n.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=e.changes(n),a=r&&!e.selection.main.eq(r.main)&&r.main.to<=s.newLength?r.main:void 0;if(e.selection.ranges.length>1&&t.inputState.composing>=0&&n.to<=i.to&&n.to>=i.to-10){let r=t.state.sliceDoc(n.from,n.to),l=gi(t)||t.state.doc.lineAt(i.head),c=i.to-n.to,h=i.to-i.from;o=e.changeByRange((o=>{if(o.from==i.from&&o.to==i.to)return{changes:s,range:a||o.map(s)};let u=o.to-c,f=u-r.length;if(o.to-o.from!=h||t.state.sliceDoc(f,u)!=r||l&&o.to>=l.from&&o.from<=l.to)return{range:o};let d=e.changes({from:f,to:u,insert:n.insert}),p=o.to-i.to;return{changes:d,range:a?Lt.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):o.map(d)}}))}else o={changes:s,selection:a&&e.selection.replaceRange(a)}}let a="input.type";return t.composing&&(a+=".compose",t.inputState.compositionFirstChange&&(a+=".start",t.inputState.compositionFirstChange=!1)),t.dispatch(o,{scrollIntoView:!0,userEvent:a}),!0}if(r&&!r.main.eq(i)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:e,userEvent:n}),!0}return!1}const jo={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Zo=Hn.ie&&Hn.ie_version<=11;class No{constructor(t){this.view=t,this.active=!1,this.selectionRange=new Qn,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(Hn.ie&&Hn.ie_version<=11||Hn.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),Zo&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM),this.resizeContent=new ResizeObserver((()=>this.view.requestMeasure())),this.resizeContent.observe(t.contentDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runScrollHandlers(this.view,t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(Wr)?n.root.activeElement!=this.dom:!On(n.dom,r))return;let i=r.anchorNode&&n.docView.nearest(r.anchorNode);i&&i.ignoreEvent(t)?e||(this.selectionChanged=!1):(Hn.ie&&Hn.ie_version<=11||Hn.android&&Hn.chrome)&&!n.state.selection.main.empty&&r.focusNode&&bn(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=Hn.safari&&11==t.root.nodeType&&function(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function(t){let e=null;function n(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return bn(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}(this.view)||gn(t.root);if(!e||this.selectionRange.eq(e))return!1;let n=On(this.dom,e);return n&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(;;)if(r){if(1!=n.nodeType)return!1;let t=n.childNodes[r-1];"false"==t.contentEditable?r--:(n=t,r=xn(n))}else{if(n==t)return!0;r=yn(n),n=n.parentNode}}(this.dom,e)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(e),n&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,jo),Zo&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Zo&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;t&&(this.clearDelayedAndroidKey(),!this.flush()&&t.force&&$n(this.dom,t.key,t.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let t=this.queue;for(let e of this.observer.takeRecords())t.push(e);t.length&&(this.queue=[]);let e=-1,n=-1,r=!1;for(let i of t){let t=this.readMutation(i);t&&(t.typeOver&&(r=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:r}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),r=this.selectionChanged&&On(this.dom,this.selectionRange);return t<0&&!r?null:(t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new Do(this.view,t,e,n))}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return!1;let n=this.view.state,r=Wo(this.view,e);return this.view.state==n&&this.view.update([]),r}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.dirty|=4),"childList"==t.type){let n=Bo(e,t.previousSibling||t.target.previousSibling,-1),r=Bo(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:r?e.posBefore(r):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,e,n,r;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect(),null===(r=this.resizeContent)||void 0===r||r.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function Bo(t,e,n){for(;e;){let r=Dn.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}class Vo{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new bo(t.state||Ae.create(t)),this.plugins=this.state.facet(Zr).map((t=>new Br(t)));for(let t of this.plugins)t.update(this);this.observer=new No(this),this.inputState=new _i(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new di(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...t){this._dispatch(1==t.length&&t[0]instanceof ke?t[0]:this.state.update(...t))}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,r=!1,i=this.state;for(let e of t){if(e.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=e.state}if(this.destroyed)return void(this.viewState.state=i);let o=this.observer.delayedAndroidKey,s=null;if(o?(this.observer.clearDelayedAndroidKey(),s=this.observer.readChange(),(s&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(s=null)):this.observer.clear(),i.facet(Ae.phrases)!=this.state.facet(Ae.phrases))return this.setState(i);e=Lr.create(this,i,t);let a=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(a&&(a=a.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;a=new Rr(t.empty?t:Lt.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(Ar)&&(a=t.value)}this.viewState.update(e,a),this.bidiCache=Uo.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(zr)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(Po)!=e.state.facet(Po)&&(this.viewState.mustMeasureContent=!0),(n||r||a||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!e.empty)for(let t of this.state.facet(Tr))t(e);s&&!Wo(this,s)&&o.force&&$n(this.contentDOM,o.key,o.keyCode)}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new bo(t),this.plugins=t.facet(Zr).map((t=>new Br(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView=new di(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(Zr),n=t.state.facet(Zr);if(e!=n){let r=[];for(let i of n){let n=e.indexOf(i);if(n<0)r.push(new Br(i));else{let e=this.plugins[n];e.mustUpdate=t,r.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,{scrollHeight:n,scrollTop:r,clientHeight:i}=this.scrollDOM,o=r>n-i-4?n:r;try{for(let t=0;;t++){this.updateState=1;let n=this.viewport,r=this.viewState.lineBlockAtHeight(o),i=this.viewState.measure(this);if(!i&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let s=[];4&i||([this.measureRequests,s]=[s,this.measureRequests]);let a=s.map((t=>{try{return t.read(this)}catch(t){return Dr(this.state,t),Xo}})),l=Lr.create(this,this.state,[]),c=!1,h=!1;l.flags|=i,e?e.flags|=i:e=l,this.updateState=2,l.empty||(this.updatePlugins(l),this.inputState.update(l),this.updateAttrs(),c=this.docView.update(l));for(let t=0;t<s.length;t++)if(a[t]!=Xo)try{let e=s[t];e.write&&e.write(a[t],this)}catch(t){Dr(this.state,t)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,h=!0;else{let t=this.viewState.lineBlockAt(r.from).top-r.top;(t>1||t<-1)&&(this.scrollDOM.scrollTop+=t,h=!0)}if(c&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!h&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(Tr))t(e)}get themeClasses(){return To+" "+(this.state.facet(Eo)?$o:_o)+" "+this.state.facet(Po)}updateAttrs(){let t=qo(this,Vr,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Wr)?"true":"false",class:"cm-content",style:`${Hn.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),qo(this,Ir,e);let n=this.observer.ignore((()=>{let n=ur(this.contentDOM,this.contentAttrs,e),r=ur(this.dom,this.editorAttrs,t);return n||r}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)t.is(Vo.announce)&&(e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value)}mountStyles(){this.styleModules=this.state.facet(zr),rn.mount(this.root,this.styleModules.concat(Ao).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return Ti(this,t,Ei(this,t,e,n))}moveByGroup(t,e){return Ti(this,t,Ei(this,t,e,(e=>function(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return t=>{let e=r(t);return i==$e.Space&&(i=e),i==e}}(this,t.head,e))))}moveToLineBoundary(t,e,n=!0){return function(t,e,n,r){let i=t.state.doc.lineAt(e.head),o=r&&t.lineWrapping?t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head):null;if(o){let e=t.dom.getBoundingClientRect(),r=t.textDirectionAt(i.from),s=t.posAtCoords({x:n==(r==Gr.LTR)?e.right-1:e.left+1,y:(o.top+o.bottom)/2});if(null!=s)return Lt.cursor(s,n?-1:1)}let s=yr.find(t.docView,e.head),a=s?n?s.posAtEnd:s.posAtStart:n?i.to:i.from;return Lt.cursor(a,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return Ti(this,t,function(t,e,n,r){let i=e.head,o=n?1:-1;if(i==(n?t.state.doc.length:0))return Lt.cursor(i,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i),h=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-e.from))),s=(o<0?e.top:e.bottom)+h}let u=l.left+a,f=null!=r?r:t.defaultLineHeight>>1;for(let n=0;;n+=10){let r=s+(f+n)*o,c=Qi(t,{x:u,y:r},!1,o);if(r<l.top||r>l.bottom||(o<0?c<i:c>i))return Lt.cursor(c,e.assoc,void 0,a)}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),Qi(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(t),i=this.bidiSpans(r);return kn(n,i[ii.find(i,t-r.from,-1,e)].dir==Gr.LTR==e>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet($r)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>Io)return si(t.length);let e=this.textDirectionAt(t.from);for(let n of this.bidiCache)if(n.from==t.from&&n.dir==e)return n.order;let n=function(t,e){let n=t.length,r=e==Fr?1:2,i=e==Fr?2:1;if(!t||1==r&&!ri.test(t))return si(n);for(let e=0,i=r,s=r;e<n;e++){let n=(o=t.charCodeAt(e))<=247?Jr[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?ti[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8203?256:64336<=o&&o<=65023?4:8204==o?256:1;512==n?n=i:8==n&&4==s&&(n=16),oi[e]=4==n?2:n,7&n&&(s=n),i=n}var o;for(let t=0,e=r,i=r;t<n;t++){let r=oi[t];if(128==r)t<n-1&&e==oi[t+1]&&24&e?r=oi[t]=e:oi[t]=256;else if(64==r){let r=t+1;for(;r<n&&64==oi[r];)r++;let o=t&&8==e||r<n&&8==oi[r]?1==i?1:8:256;for(let e=t;e<r;e++)oi[e]=o;t=r-1}else 8==r&&1==i&&(oi[t]=1);e=r,7&r&&(i=r)}for(let e,o,s,a=0,l=0,c=0;a<n;a++)if(o=ei[e=t.charCodeAt(a)])if(o<0){for(let t=l-3;t>=0;t-=3)if(ni[t+1]==-o){let e=ni[t+2],n=2&e?r:4&e?1&e?i:r:0;n&&(oi[a]=oi[ni[t]]=n),l=t;break}}else{if(189==ni.length)break;ni[l++]=a,ni[l++]=e,ni[l++]=c}else if(2==(s=oi[a])||1==s){let t=s==r;c=t?0:1;for(let e=l-3;e>=0;e-=3){let n=ni[e+2];if(2&n)break;if(t)ni[e+2]|=2;else{if(4&n)break;ni[e+2]|=4}}}for(let t=0;t<n;t++)if(256==oi[t]){let e=t+1;for(;e<n&&256==oi[e];)e++;let i=1==(t?oi[t-1]:r),o=i==(1==(e<n?oi[e]:r))?i?1:2:r;for(let n=t;n<e;n++)oi[n]=o;t=e-1}let s=[];if(1==r)for(let t=0;t<n;){let e=t,r=1!=oi[t++];for(;t<n&&r==(1!=oi[t]);)t++;if(r)for(let n=t;n>e;){let t=n,r=2!=oi[--n];for(;n>e&&r==(2!=oi[n-1]);)n--;s.push(new ii(n,t,r?2:1))}else s.push(new ii(e,t,0))}else for(let t=0;t<n;){let e=t,r=2==oi[t++];for(;t<n&&r==(2==oi[t]);)t++;s.push(new ii(e,t,r?1:2))}return s}(t.text,e);return this.bidiCache.push(new Uo(t.from,t.to,e,n)),n}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||Hn.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Tn(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return Ar.of(new Rr("number"==typeof t?Lt.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}static domEventHandlers(t){return Nr.define((()=>({})),{eventHandlers:t})}static theme(t,e){let n=rn.newName(),r=[Po.of(n),zr.of(Ro(`.${n}`,t))];return e&&e.dark&&r.push(Eo.of(!0)),r}static baseTheme(t){return se.lowest(zr.of(Ro("."+To,t,Mo)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),r=n&&Dn.get(n)||Dn.get(t);return(null===(e=null==r?void 0:r.rootView)||void 0===e?void 0:e.view)||null}}Vo.styleModule=zr,Vo.inputHandler=_r,Vo.perLineTextDirection=$r,Vo.exceptionSink=Er,Vo.updateListener=Tr,Vo.editable=Wr,Vo.mouseSelectionStyle=Pr,Vo.dragMovesSelection=Qr,Vo.clickAddsSelectionRange=Cr,Vo.decorations=Xr,Vo.atomicRanges=Ur,Vo.scrollMargins=qr,Vo.darkTheme=Eo,Vo.contentAttributes=Ir,Vo.editorAttributes=Vr,Vo.lineWrapping=Vo.contentAttributes.of({class:"cm-lineWrapping"}),Vo.announce=Se.define();const Io=4096,Xo={};class Uo{constructor(t,e,n,r){this.from=t,this.to=e,this.dir=n,this.order=r}static update(t,e){if(e.empty)return t;let n=[],r=t.length?t[t.length-1].dir:Gr.LTR;for(let i=Math.max(0,t.length-10);i<t.length;i++){let o=t[i];o.dir!=r||e.touchesRange(o.from,o.to)||n.push(new Uo(e.mapPos(o.from,1),e.mapPos(o.to,-1),o.dir,o.order))}return n}}function qo(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let e=r[i],o="function"==typeof e?e(t):e;o&&cr(o,n)}return n}const zo=Hn.mac?"mac":Hn.windows?"win":Hn.linux?"linux":"key";function Yo(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}const Lo=se.default(Vo.domEventHandlers({keydown:(t,e)=>Jo(Ho(e.state),t,e,"editor")})),Go=Ht.define({enables:Lo}),Fo=new WeakMap;function Ho(t){let e=t.facet(Go),n=Fo.get(e);return n||Fo.set(e,n=function(t,e=zo){let n=Object.create(null),r=Object.create(null),i=(t,e)=>{let n=r[t];if(null==n)r[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},o=(t,r,o,s)=>{var a,l;let c=n[t]||(n[t]=Object.create(null)),h=r.split(/ (?!$)/).map((t=>function(t,e){const n=t.split(/-(?!$)/);let r,i,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let t=0;t<n.length-1;++t){const a=n[t];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==e?s=!0:i=!0}}return r&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(t,e)));for(let e=1;e<h.length;e++){let n=h.slice(0,e).join(" ");i(n,!0),c[n]||(c[n]={preventDefault:!0,run:[e=>{let r=Ko={view:e,prefix:n,scope:t};return setTimeout((()=>{Ko==r&&(Ko=null)}),4e3),!0}]})}let u=h.join(" ");i(u,!1);let f=c[u]||(c[u]={preventDefault:!1,run:(null===(l=null===(a=c._any)||void 0===a?void 0:a.run)||void 0===l?void 0:l.slice())||[]});o&&f.run.push(o),s&&(f.preventDefault=!0)};for(let r of t){let t=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let e of t){let t=n[e]||(n[e]=Object.create(null));t._any||(t._any={preventDefault:!1,run:[]});for(let e in t)t[e].run.push(r.any)}let i=r[e]||r.key;if(i)for(let e of t)o(e,i,r.run,r.preventDefault),r.shift&&o(e,"Shift-"+i,r.shift,r.preventDefault)}return n}(e.reduce(((t,e)=>t.concat(e)),[]))),n}let Ko=null;function Jo(t,e,n,r){let i=function(t){var e=!(fn&&(t.ctrlKey||t.altKey||t.metaKey)||un&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?ln:an)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(e),o=Wt(At(i,0))==i.length&&" "!=i,s="",a=!1;Ko&&Ko.view==n&&Ko.scope==r&&(s=Ko.prefix+" ",(a=Ri.indexOf(e.keyCode)<0)&&(Ko=null));let l,c,h=new Set,u=t=>{if(t){for(let r of t.run)if(!h.has(r)&&(h.add(r),r(n,e)))return!0;t.preventDefault&&(a=!0)}return!1},f=t[r];if(f){if(u(f[s+Yo(i,e,!o)]))return!0;if(o&&(e.altKey||e.metaKey||e.ctrlKey)&&(l=an[e.keyCode])&&l!=i){if(u(f[s+Yo(l,e,!0)]))return!0;if(e.shiftKey&&(c=ln[e.keyCode])!=i&&c!=l&&u(f[s+Yo(c,e,!1)]))return!0}else if(o&&e.shiftKey&&u(f[s+Yo(i,e,!0)]))return!0;if(u(f._any))return!0}return a}class ts{constructor(t,e,n,r,i){this.className=t,this.left=e,this.top=n,this.width=r,this.height=i}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className==this.className&&(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",null!=this.width&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,n){if(n.empty){let r=t.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let i=es(t);return[new ts(e,r.left-i.left,r.top-i.top,null,r.bottom-r.top)]}return function(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),o=t.textDirection==Gr.LTR,s=t.contentDOM,a=s.getBoundingClientRect(),l=es(t),c=window.getComputedStyle(s.firstChild),h=a.left+parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)),u=a.right-parseInt(c.paddingRight),f=rs(t,r),d=rs(t,i),p=f.type==dr.Text?f:null,g=d.type==dr.Text?d:null;if(t.lineWrapping&&(p&&(p=ns(t,r,p)),g&&(g=ns(t,i,g))),p&&g&&p.from==g.from)return O(v(n.from,n.to,p));{let e=p?v(n.from,null,p):b(f,!1),r=g?v(null,n.to,g):b(d,!0),i=[];return(p||f).to<(g||d).from-1?i.push(m(h,e.bottom,u,r.top)):e.bottom<r.top&&t.elementAtHeight((e.bottom+r.top)/2).type==dr.Text&&(e.bottom=r.top=(e.bottom+r.top)/2),O(e).concat(i).concat(O(r))}function m(t,n,r,i){return new ts(e,t-l.left,n-l.top-.01,r-t,i-n+.01)}function O({top:t,bottom:e,horizontal:n}){let r=[];for(let i=0;i<n.length;i+=2)r.push(m(n[i],t,n[i+1],e));return r}function v(e,n,r){let i=1e9,s=-1e9,a=[];function l(e,n,l,c,f){let d=t.coordsAtPos(e,e==r.to?-2:2),p=t.coordsAtPos(l,l==r.from?2:-2);i=Math.min(d.top,p.top,i),s=Math.max(d.bottom,p.bottom,s),f==Gr.LTR?a.push(o&&n?h:d.left,o&&c?u:p.right):a.push(!o&&c?h:p.left,!o&&n?u:d.right)}let c=null!=e?e:r.from,f=null!=n?n:r.to;for(let r of t.visibleRanges)if(r.to>c&&r.from<f)for(let i=Math.max(r.from,c),o=Math.min(r.to,f);;){let r=t.state.doc.lineAt(i);for(let s of t.bidiSpans(r)){let t=s.from+r.from,a=s.to+r.from;if(t>=o)break;a>i&&l(Math.max(t,i),null==e&&t<=c,Math.min(a,o),null==n&&a>=f,s.dir)}if(i=r.to+1,i>=o)break}return 0==a.length&&l(c,null==e,f,null==n,t.textDirection),{top:i,bottom:s,horizontal:a}}function b(t,e){let n=a.top+(e?t.top:t.bottom);return{top:n,bottom:n,horizontal:[]}}}(t,e,n)}}function es(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Gr.LTR?e.left:e.right-t.scrollDOM.clientWidth)-t.scrollDOM.scrollLeft,top:e.top-t.scrollDOM.scrollTop}}function ns(t,e,n){let r=Lt.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(r,!0,!0).from),type:dr.Text}}function rs(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type))for(let t of n.type)if(t.to>e||t.to==e&&(t.to==n.to||t.type==dr.Text))return t;return n}class is{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet(os)!=t.state.facet(os)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&t.view.requestMeasure(this.measureReq)}setOrder(t){let e=0,n=t.facet(os);for(;e<n.length&&n[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}draw(t){if(t.length!=this.drawn.length||t.some(((t,e)=>!function(t,e){return t.constructor==e.constructor&&t.eq(e)}(t,this.drawn[e])))){let e=this.dom.firstChild,n=0;for(let r of t)r.update&&e&&r.constructor&&this.drawn[n].constructor&&r.update(e,this.drawn[n])?(e=e.nextSibling,n++):this.dom.insertBefore(r.draw(),e);for(;e;){let t=e.nextSibling;e.remove(),e=t}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const os=Ht.define();function ss(t){return[Nr.define((e=>new is(e,t))),os.of(t)]}const as=!Hn.ios,ls=Ht.define({combine:t=>De(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})});function cs(t={}){return[ls.of(t),us,ds,gs,Mr.of(!0)]}function hs(t){return t.startState.facet(ls)!=t.startState.facet(ls)}const us=ss({above:!0,markers(t){let{state:e}=t,n=e.facet(ls),r=[];for(let i of e.selection.ranges){let o=i==e.selection.main;if(i.empty?!o||as:n.drawRangeCursor){let e=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=i.empty?i:Lt.cursor(i.head,i.head>i.anchor?-1:1);for(let i of ts.forRange(t,e,n))r.push(i)}}return r},update(t,e){t.transactions.some((t=>t.scrollIntoView))&&(e.style.animationName="cm-blink"==e.style.animationName?"cm-blink2":"cm-blink");let n=hs(t);return n&&fs(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){fs(e.state,t)},class:"cm-cursorLayer"});function fs(t,e){e.style.animationDuration=t.facet(ls).cursorBlinkRate+"ms"}const ds=ss({above:!1,markers:t=>t.state.selection.ranges.map((e=>e.empty?[]:ts.forRange(t,"cm-selectionBackground",e))).reduce(((t,e)=>t.concat(e))),update:(t,e)=>t.docChanged||t.selectionSet||t.viewportChanged||hs(t),class:"cm-selectionLayer"}),ps={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};as&&(ps[".cm-line"].caretColor="transparent !important");const gs=se.highest(Vo.theme(ps)),ms=Se.define({map:(t,e)=>null==t?null:e.mapPos(t)}),Os=ie.define({create:()=>null,update:(t,e)=>(null!=t&&(t=e.changes.mapPos(t)),e.effects.reduce(((t,e)=>e.is(ms)?e.value:t),t))}),vs=Nr.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Os);null==n?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Os)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let t=this.view.state.field(Os),e=null!=t&&this.view.coordsAtPos(t);if(!e)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-n.left+this.view.scrollDOM.scrollLeft,top:e.top-n.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(t){this.cursor&&(t?(this.cursor.style.left=t.left+"px",this.cursor.style.top=t.top+"px",this.cursor.style.height=t.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Os)!=t&&this.view.dispatch({effects:ms.of(t)})}},{eventHandlers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){t.target!=this.view.contentDOM&&this.view.contentDOM.contains(t.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function bs(t,e,n,r,i){e.lastIndex=0;for(let o,s=t.iterRange(n,r),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=e.exec(s.value);)i(a+o.index,o)}class ys{constructor(t){const{regexp:e,decoration:n,decorate:r,boundary:i,maxLength:o=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,r)this.addMatch=(t,e,n,i)=>r(i,n,n+t[0].length,t,e);else if("function"==typeof n)this.addMatch=(t,e,r,i)=>{let o=n(t,e,r);o&&i(r,r+t[0].length,o)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(t,e,r,i)=>i(r,r+t[0].length,n)}this.boundary=i,this.maxLength=o}createDeco(t){let e=new Ve,n=e.add.bind(e);for(let{from:e,to:r}of function(t,e){let n=t.visibleRanges;if(1==n.length&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(t,this.maxLength))bs(t.state.doc,this.regexp,e,r,((e,r)=>this.addMatch(r,t,e,n)));return e.finish()}updateDeco(t,e){let n=1e9,r=-1;return t.docChanged&&t.changes.iterChanges(((e,i,o,s)=>{s>t.view.viewport.from&&o<t.view.viewport.to&&(n=Math.min(o,n),r=Math.max(s,r))})),t.viewportChanged||r-n>1e3?this.createDeco(t.view):r>-1?this.updateRange(t.view,e.map(t.changes),n,r):e}updateRange(t,e,n,r){for(let i of t.visibleRanges){let o=Math.max(i.from,n),s=Math.min(i.to,r);if(s>o){let n=t.state.doc.lineAt(o),r=n.to<s?t.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let c,h=[],u=(t,e,n)=>h.push(n.range(t,e));if(n==r)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;)this.addMatch(c,t,c.index+n.from,u);else bs(t.state.doc,this.regexp,a,l,((e,n)=>this.addMatch(n,t,e,u)));e=e.update({filterFrom:a,filterTo:l,filter:(t,e)=>t<a||e>l,add:h})}}return e}}const ws=null!=/x/.unicode?"gu":"g",xs=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",ws),Ss={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ks=null;const Cs=Ht.define({combine(t){let e=De(t,{render:null,specialChars:xs,addSpecialChars:null});return(e.replaceTabs=!function(){var t;if(null==ks&&"undefined"!=typeof document&&document.body){let e=document.body.style;ks=null!=(null!==(t=e.tabSize)&&void 0!==t?t:e.MozTabSize)}return ks||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,ws)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,ws)),e}});function Qs(t={}){return[Cs.of(t),Ps||(Ps=Nr.fromClass(class{constructor(t){this.view=t,this.decorations=pr.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Cs)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new ys({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,o=At(e[0],0);if(9==o){let t=i.lineAt(r),e=n.state.tabSize,o=Ke(t.text,e,r-t.from);return pr.replace({widget:new Ts((e-o%e)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=pr.replace({widget:new Es(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Cs);t.startState.facet(Cs)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))]}let Ps=null;class Es extends fr{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=function(t){return t>=32?"•":10==t?"␤":String.fromCharCode(9216+t)}(this.code),n=t.state.phrase("Control character")+" "+(Ss[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,e);if(r)return r;let i=document.createElement("span");return i.textContent=e,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class Ts extends fr{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="\t",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}const _s=pr.line({class:"cm-activeLine"}),$s=Nr.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(_s.range(i.from)),e=i.from)}return pr.set(n)}},{decorations:t=>t.decorations}),Ms=2e3;function Rs(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,o=i>Ms?-1:i==r.length?function(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}(t,e.clientX):Ke(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function As(t){let e=(null==t?void 0:t.eventFilter)||(t=>t.altKey&&0==t.button);return Vo.mouseSelectionStyle.of(((t,n)=>e(n)?function(t,e){let n=Rs(t,e),r=t.state.selection;return n?{update(t){if(t.docChanged){let e=t.changes.mapPos(t.startState.doc.line(n.line).from),i=t.state.doc.lineAt(e);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(t.changes)}},get(e,i,o){let s=Rs(t,e);if(!s)return r;let a=function(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),o=[];if(e.off>Ms||n.off>Ms||e.col<0||n.col<0){let s=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let e=r;e<=i;e++){let n=t.doc.line(e);n.length<=a&&o.push(Lt.range(n.from+s,n.to+a))}}else{let s=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let e=r;e<=i;e++){let n=t.doc.line(e),r=Je(n.text,s,t.tabSize,!0);if(r<0)o.push(Lt.cursor(n.to));else{let e=Je(n.text,a,t.tabSize);o.push(Lt.range(n.from+r,n.from+e))}}}return o}(t.state,n,s);return a.length?o?Lt.create(a.concat(r.ranges)):Lt.create(a):r}}:null}(t,n):null))}const Ds={Alt:[18,t=>t.altKey],Control:[17,t=>t.ctrlKey],Shift:[16,t=>t.shiftKey],Meta:[91,t=>t.metaKey]},Ws={style:"cursor: crosshair"};function js(t={}){let[e,n]=Ds[t.key||"Alt"],r=Nr.fromClass(class{constructor(t){this.view=t,this.isDown=!1}set(t){this.isDown!=t&&(this.isDown=t,this.view.update([]))}},{eventHandlers:{keydown(t){this.set(t.keyCode==e||n(t))},keyup(t){t.keyCode!=e&&n(t)||this.set(!1)},mousemove(t){this.set(n(t))}}});return[r,Vo.contentAttributes.of((t=>{var e;return(null===(e=t.plugin(r))||void 0===e?void 0:e.isDown)?Ws:null}))]}const Zs="-10000px";class Ns{constructor(t,e,n){this.facet=e,this.createTooltipView=n,this.input=t.state.facet(e),this.tooltips=this.input.filter((t=>t)),this.tooltipViews=this.tooltips.map(n)}update(t){var e;let n=t.state.facet(this.facet),r=n.filter((t=>t));if(n===this.input){for(let e of this.tooltipViews)e.update&&e.update(t);return!1}let i=[];for(let e=0;e<r.length;e++){let n=r[e],o=-1;if(n){for(let t=0;t<this.tooltips.length;t++){let e=this.tooltips[t];e&&e.create==n.create&&(o=t)}if(o<0)i[e]=this.createTooltipView(n);else{let n=i[e]=this.tooltipViews[o];n.update&&n.update(t)}}}for(let t of this.tooltipViews)i.indexOf(t)<0&&(t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t));return this.input=n,this.tooltips=r,this.tooltipViews=i,!0}}function Bs(t={}){return Is.of(t)}function Vs(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Is=Ht.define({combine:t=>{var e,n,r;return{position:Hn.ios?"absolute":(null===(e=t.find((t=>t.position)))||void 0===e?void 0:e.position)||"fixed",parent:(null===(n=t.find((t=>t.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=t.find((t=>t.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||Vs}}}),Xs=Nr.fromClass(class{constructor(t){this.view=t,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Is);this.position="absolute",this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Ns(t,zs,(t=>this.createTooltip(t))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(Is);if(r.position!=this.position){this.position=r.position;for(let t of this.manager.tooltipViews)t.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let t of this.manager.tooltipViews)this.container.appendChild(t.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=Zs,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let e of this.manager.tooltipViews)e.dom.remove(),null===(t=e.destroy)||void 0===t||t.call(e);null===(e=this.intersectionObserver)||void 0===e||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect();return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map(((t,e)=>{let n=this.manager.tooltipViews[e];return n.getCoords?n.getCoords(t.pos):this.view.coordsAtPos(t.pos)})),size:this.manager.tooltipViews.map((({dom:t})=>t.getBoundingClientRect())),space:this.view.state.facet(Is).tooltipSpace(this.view)}}writeMeasure(t){let{editor:e,space:n}=t,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let o=this.manager.tooltips[i],s=this.manager.tooltipViews[i],{dom:a}=s,l=t.pos[i],c=t.size[i];if(!l||l.bottom<=Math.max(e.top,n.top)||l.top>=Math.min(e.bottom,n.bottom)||l.right<Math.max(e.left,n.left)-.1||l.left>Math.min(e.right,n.right)+.1){a.style.top=Zs;continue}let h=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,u=h?7:0,f=c.right-c.left,d=c.bottom-c.top,p=s.offset||qs,g=this.view.textDirection==Gr.LTR,m=c.width>n.right-n.left?g?n.left:n.right-c.width:g?Math.min(l.left-(h?14:0)+p.x,n.right-f):Math.max(n.left,l.left-f+(h?14:0)-p.x),O=!!o.above;!o.strictSide&&(O?l.top-(c.bottom-c.top)-p.y<n.top:l.bottom+(c.bottom-c.top)+p.y>n.bottom)&&O==n.bottom-l.bottom>l.top-n.top&&(O=!O);let v=(O?l.top-n.top:n.bottom-l.bottom)-u;if(v<d&&!1!==s.resize){if(v<this.view.defaultLineHeight){a.style.top=Zs;continue}a.style.height=(d=v)+"px"}else a.style.height&&(a.style.height="");let b=O?l.top-d-u-p.y:l.bottom+u+p.y,y=m+f;if(!0!==s.overlap)for(let t of r)t.left<y&&t.right>m&&t.top<b+d&&t.bottom>b&&(b=O?t.top-d-2-u:t.bottom+u+2);"absolute"==this.position?(a.style.top=b-t.parent.top+"px",a.style.left=m-t.parent.left+"px"):(a.style.top=b+"px",a.style.left=m+"px"),h&&(h.style.left=l.left+(g?p.x:-p.x)-(m+14-7)+"px"),!0!==s.overlap&&r.push({left:m,top:b,right:y,bottom:b+d}),a.classList.toggle("cm-tooltip-above",O),a.classList.toggle("cm-tooltip-below",!O),s.positioned&&s.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Zs}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Us=Vo.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),qs={x:0,y:0},zs=Ht.define({enables:[Xs,Us]}),Ys=Ht.define();class Ls{constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Ns(t,Ys,(t=>this.createHostedView(t)))}static create(t){return new Ls(t)}createHostedView(t){let e=t.create(this.view);return e.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(e.dom),this.mounted&&e.mount&&e.mount(this.view),e}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}}const Gs=zs.compute([Ys],(t=>{let e=t.facet(Ys).filter((t=>t));return 0===e.length?null:{pos:Math.min(...e.map((t=>t.pos))),end:Math.max(...e.filter((t=>null!=t.end)).map((t=>t.end))),create:Ls.create,above:e[0].above,arrow:e.some((t=>t.arrow))}}));class Fs{constructor(t,e,n,r,i){this.view=t,this.source=e,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:t}=this,e=this.view.contentDOM.contains(t.target)?this.view.posAtCoords(t):null;if(null==e)return;let n=this.view.coordsAtPos(e);if(null==n||t.y<n.top||t.y>n.bottom||t.x<n.left-this.view.defaultCharacterWidth||t.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(e)).find((t=>t.from<=e&&t.to>=e)),i=r&&r.dir==Gr.RTL?-1:1,o=this.source(this.view,e,t.x<n.left?-i:i);if(null==o?void 0:o.then){let t=this.pending={pos:e};o.then((e=>{this.pending==t&&(this.pending=null,e&&this.view.dispatch({effects:this.setHover.of(e)}))}),(t=>Dr(this.view.state,t,"hover tooltip")))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(t){var e;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!Hs(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,i=null!==(e=null==n?void 0:n.end)&&void 0!==e?e:r;(r==i?this.view.posAtCoords(this.lastMove)==r:function(t,e,n,r,i,o){let s=document.createRange(),a=t.domAtPos(e),l=t.domAtPos(n);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let c=s.getClientRects();s.detach();for(let t=0;t<c.length;t++){let e=c[t];if(Math.max(e.top-i,i-e.bottom,e.left-r,r-e.right)<=6)return!0}return!1}(this.view,r,i,t.clientX,t.clientY))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!Hs(t.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Hs(t){for(let e=t;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip"))return!0;return!1}function Ks(t,e={}){let n=Se.define(),r=ie.define({create:()=>null,update(t,r){if(t&&(e.hideOnChange&&(r.docChanged||r.selection)||e.hideOn&&e.hideOn(r,t)))return null;if(t&&r.docChanged){let e=r.changes.mapPos(t.pos,-1,Zt.TrackDel);if(null==e)return null;let n=Object.assign(Object.create(null),t);n.pos=e,null!=t.end&&(n.end=r.changes.mapPos(t.end)),t=n}for(let e of r.effects)e.is(n)&&(t=e.value),e.is(Js)&&(t=null);return t},provide:t=>Ys.from(t)});return[r,Nr.define((i=>new Fs(i,t,r,n,e.hoverTime||300))),Gs]}const Js=Se.define(),ta=Ht.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function ea(t,e){let n=t.plugin(na),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const na=Nr.fromClass(class{constructor(t){this.input=t.state.facet(oa),this.specs=this.input.filter((t=>t)),this.panels=this.specs.map((e=>e(t)));let e=t.state.facet(ta);this.top=new ra(t,!0,e.topContainer),this.bottom=new ra(t,!1,e.bottomContainer),this.top.sync(this.panels.filter((t=>t.top))),this.bottom.sync(this.panels.filter((t=>!t.top)));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(t){let e=t.state.facet(ta);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ra(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ra(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(oa);if(n!=this.input){let e=n.filter((t=>t)),r=[],i=[],o=[],s=[];for(let n of e){let e,a=this.specs.indexOf(n);a<0?(e=n(t.view),s.push(e)):(e=this.panels[a],e.update&&e.update(t)),r.push(e),(e.top?i:o).push(e)}this.specs=e,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let t of s)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}else for(let e of this.panels)e.update&&e.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Vo.scrollMargins.of((e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class ra{constructor(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=ia(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=ia(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function ia(t){let e=t.nextSibling;return t.remove(),e}const oa=Ht.define({enables:na});class sa extends We{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}sa.prototype.elementClass="",sa.prototype.toDOM=void 0,sa.prototype.mapMode=Zt.TrackBefore,sa.prototype.startSide=sa.prototype.endSide=-1,sa.prototype.point=!0;const aa=Ht.define(),la={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Be.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},ca=Ht.define();function ha(t){return[fa(),ca.of(Object.assign(Object.assign({},la),t))]}const ua=Ht.define({combine:t=>t.some((t=>t))});function fa(t){let e=[da];return t&&!1===t.fixed&&e.push(ua.of(!0)),e}const da=Nr.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(ca).map((e=>new Oa(t,e)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!t.state.facet(ua),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(ua)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=Be.iter(this.view.state.facet(aa),this.view.viewport.from),r=[],i=this.gutters.map((t=>new ma(t,this.view.viewport,-this.view.documentPadding.top)));for(let t of this.view.viewportLineBlocks){let e;if(Array.isArray(t.type)){for(let n of t.type)if(n.type==dr.Text){e=n;break}}else e=t.type==dr.Text?t:void 0;if(e){r.length&&(r=[]),ga(n,r,t.from);for(let t of i)t.line(this.view,e,r)}}for(let t of i)t.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(ca),n=t.state.facet(ca),r=t.docChanged||t.heightChanged||t.viewportChanged||!Be.eq(t.startState.facet(aa),t.state.facet(aa),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let e of this.gutters)e.update(t)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=e.indexOf(r);n<0?i.push(new Oa(this.view,r)):(this.gutters[n].update(t),i.push(this.gutters[n]))}for(let t of this.gutters)t.dom.remove(),i.indexOf(t)<0&&t.destroy();for(let t of i)this.dom.appendChild(t.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Vo.scrollMargins.of((e=>{let n=e.plugin(t);return n&&0!=n.gutters.length&&n.fixed?e.textDirection==Gr.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))});function pa(t){return Array.isArray(t)?t:[t]}function ga(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class ma{constructor(t,e,n){this.gutter=t,this.height=n,this.localMarkers=[],this.i=0,this.cursor=Be.iter(t.markers,e.from)}line(t,e,n){this.localMarkers.length&&(this.localMarkers=[]),ga(this.cursor,this.localMarkers,e.from);let r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(t,e,r);i&&r.unshift(i);let o=this.gutter;if(0==r.length&&!o.config.renderEmptyElements)return;let s=e.top-this.height;if(this.i==o.elements.length){let n=new va(t,e.height,s,r);o.elements.push(n),o.dom.appendChild(n.dom)}else o.elements[this.i].update(t,e.height,s,r);this.height=e.bottom,this.i++}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class Oa{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in e.domEventHandlers)this.dom.addEventListener(n,(r=>{let i=t.lineBlockAtHeight(r.clientY-t.documentTop);e.domEventHandlers[n](t,i,r)&&r.preventDefault()}));this.markers=pa(e.markers(t)),e.initialSpacer&&(this.spacer=new va(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=pa(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let e=this.config.updateSpacer(this.spacer.markers[0],t);e!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[e])}let n=t.view.viewport;return!Be.eq(this.markers,e,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(t)}destroy(){for(let t of this.elements)t.destroy()}}class va{constructor(t,e,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,n,r)}update(t,e,n,r){this.height!=e&&(this.dom.style.height=(this.height=e)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}(this.markers,r)||this.setMarkers(t,r)}setMarkers(t,e){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let s=o,a=i<e.length?e[i++]:null,l=!1;if(a){let t=a.elementClass;t&&(n+=" "+t);for(let t=o;t<this.markers.length;t++)if(this.markers[t].compare(a)){s=t,l=!0;break}}else s=this.markers.length;for(;o<s;){let t=this.markers[o++];if(t.toDOM){t.destroy(r);let e=r.nextSibling;r.remove(),r=e}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(t),r)),l&&o++}this.dom.className=n,this.markers=e}destroy(){this.setMarkers(null,[])}}const ba=Ht.define(),ya=Ht.define({combine:t=>De(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let n=Object.assign({},t);for(let t in e){let r=n[t],i=e[t];n[t]=r?(t,e,n)=>r(t,e,n)||i(t,e,n):i}return n}})});class wa extends sa{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function xa(t,e){return t.state.facet(ya).formatNumber(e,t.state)}const Sa=ca.compute([ya],(t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:t=>t.state.facet(ba),lineMarker:(t,e,n)=>n.some((t=>t.toDOM))?null:new wa(xa(t,t.state.doc.lineAt(e.from).number)),lineMarkerChange:t=>t.startState.facet(ya)!=t.state.facet(ya),initialSpacer:t=>new wa(xa(t,Ca(t.state.doc.lines))),updateSpacer(t,e){let n=xa(e.view,Ca(e.view.state.doc.lines));return n==t.number?t:new wa(n)},domEventHandlers:t.facet(ya).domEventHandlers})));function ka(t={}){return[ya.of(t),fa(),Sa]}function Ca(t){let e=9;for(;e<t;)e=10*e+9;return e}const Qa=new class extends sa{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Pa=aa.compute(["selection"],(t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(Qa.range(i)))}return Be.of(e)})),Ea=1024;let Ta=0;class _a{constructor(t,e){this.from=t,this.to=e}}class $a{constructor(t={}){this.id=Ta++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof t&&(t=Ra.match(t)),e=>{let n=t(e);return void 0===n?null:[this,n]}}}$a.closedBy=new $a({deserialize:t=>t.split(" ")}),$a.openedBy=new $a({deserialize:t=>t.split(" ")}),$a.group=new $a({deserialize:t=>t.split(" ")}),$a.contextHash=new $a({perNode:!0}),$a.lookAhead=new $a({perNode:!0}),$a.mounted=new $a({perNode:!0});const Ma=Object.create(null);class Ra{constructor(t,e,n,r=0){this.name=t,this.props=e,this.id=n,this.flags=r}static define(t){let e=t.props&&t.props.length?Object.create(null):Ma,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),r=new Ra(t.name||"",e,t.id,n);if(t.props)for(let n of t.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[n[0].id]=n[1]}return r}prop(t){return this.props[t.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(t){if("string"==typeof t){if(this.name==t)return!0;let e=this.prop($a.group);return!!e&&e.indexOf(t)>-1}return this.id==t}static match(t){let e=Object.create(null);for(let n in t)for(let r of n.split(" "))e[r]=t[n];return t=>{for(let n=t.prop($a.group),r=-1;r<(n?n.length:0);r++){let i=e[r<0?t.name:n[r]];if(i)return i}}}}Ra.none=new Ra("",Object.create(null),0,8);class Aa{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let n of this.types){let r=null;for(let e of t){let t=e(n);t&&(r||(r=Object.assign({},n.props)),r[t[0].id]=t[1])}e.push(r?new Ra(n.name,r,n.id,n.flags):n)}return new Aa(e)}}const Da=new WeakMap,Wa=new WeakMap;var ja;!function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"}(ja||(ja={}));class Za{constructor(t,e,n,r,i){if(this.type=t,this.children=e,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[t,e]of i)this.props["number"==typeof t?t:t.id]=e}}toString(){let t=this.prop($a.mounted);if(t&&!t.overlay)return t.tree.toString();let e="";for(let t of this.children){let n=t.toString();n&&(e&&(e+=","),e+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new Ga(this.topNode,t)}cursorAt(t,e=0,n=0){let r=Da.get(this)||this.topNode,i=new Ga(r);return i.moveTo(t,e),Da.set(this,i._tree),i}get topNode(){return new Ua(this,0,0,null)}resolve(t,e=0){let n=Xa(Da.get(this)||this.topNode,t,e,!1);return Da.set(this,n),n}resolveInner(t,e=0){let n=Xa(Wa.get(this)||this.topNode,t,e,!0);return Wa.set(this,n),n}iterate(t){let{enter:e,leave:n,from:r=0,to:i=this.length}=t;for(let o=this.cursor((t.mode||0)|ja.IncludeAnonymous);;){let t=!1;if(o.from<=i&&o.to>=r&&(o.type.isAnonymous||!1!==e(o))){if(o.firstChild())continue;t=!0}for(;t&&n&&!o.type.isAnonymous&&n(o),!o.nextSibling();){if(!o.parent())return;t=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:Ja(Ra.none,this.children,this.positions,0,this.children.length,0,this.length,((t,e,n)=>new Za(this.type,t,e,n,this.propValues)),t.makeTree||((t,e,n)=>new Za(Ra.none,t,e,n)))}static build(t){return function(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=Ea,reused:o=[],minRepeatType:s=r.types.length}=t,a=Array.isArray(n)?new Na(n,n.length):n,l=r.types,c=0,h=0;function u(t,e,n,g,m){let{id:O,start:v,end:b,size:y}=a,w=h;for(;y<0;){if(a.next(),-1==y){let e=o[O];return n.push(e),void g.push(v-t)}if(-3==y)return void(c=O);if(-4==y)return void(h=O);throw new RangeError(`Unrecognized record size: ${y}`)}let x,S,k=l[O],C=v-t;if(b-v<=i&&(S=function(t,e){let n=a.fork(),r=0,o=0,l=0,c=n.end-i,h={size:0,start:0,skip:0};t:for(let i=n.pos-t;n.pos>i;){let t=n.size;if(n.id==e&&t>=0){h.size=r,h.start=o,h.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-t;if(t<0||a<i||n.start<c)break;let u=n.id>=s?4:0,f=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break t;u+=4}else n.id>=s&&(u+=4);n.next()}o=f,r+=t,l+=u}return(e<0||r==t)&&(h.size=r,h.start=o,h.skip=l),h.size>4?h:void 0}(a.pos-e,m))){let e=new Uint16Array(S.size-S.skip),n=a.pos-S.size,i=e.length;for(;a.pos>n;)i=p(S.start,e,i);x=new Ba(e,b-S.start,r),C=S.start-t}else{let t=a.pos-y;a.next();let e=[],n=[],r=O>=s?O:-1,o=0,l=b;for(;a.pos>t;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(f(e,n,v,o,a.end,l,r,w),o=e.length,l=a.end),a.next()):u(v,t,e,n,r);if(r>=0&&o>0&&o<e.length&&f(e,n,v,o,v,l,r,w),e.reverse(),n.reverse(),r>-1&&o>0){let t=function(t){return(e,n,r)=>{let i,o,s=0,a=e.length-1;if(a>=0&&(i=e[a])instanceof Za){if(!a&&i.type==t&&i.length==r)return i;(o=i.prop($a.lookAhead))&&(s=n[a]+i.length+o)}return d(t,e,n,r,s)}}(k);x=Ja(k,e,n,0,e.length,0,b-v,t,t)}else x=d(k,e,n,b-v,w-b)}n.push(x),g.push(C)}function f(t,e,n,i,o,s,a,l){let c=[],h=[];for(;t.length>i;)c.push(t.pop()),h.push(e.pop()+n-o);t.push(d(r.types[a],c,h,s-o,l-s)),e.push(o-n)}function d(t,e,n,r,i=0,o){if(c){let t=[$a.contextHash,c];o=o?[t].concat(o):[t]}if(i>25){let t=[$a.lookAhead,i];o=o?[t].concat(o):[t]}return new Za(t,e,n,r,o)}function p(t,e,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=p(t,e,n)}e[--n]=s,e[--n]=o-t,e[--n]=i-t,e[--n]=r}else-3==l?c=r:-4==l&&(h=r);return n}let g=[],m=[];for(;a.pos>0;)u(t.start||0,t.bufferStart||0,g,m,-1);let O=null!==(e=t.length)&&void 0!==e?e:g.length?m[0]+g[0].length:0;return new Za(l[t.topID],g.reverse(),m.reverse(),O)}(t)}}Za.empty=new Za(Ra.none,[],[],0);class Na{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Na(this.buffer,this.index)}}class Ba{constructor(t,e,n){this.buffer=t,this.length=e,this.set=n}get type(){return Ra.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],n=this.buffer[t+3],r=this.set.types[e],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(t+=4))return i;let o=[];for(;t<n;)o.push(this.childString(t)),t=this.buffer[t+3];return i+"("+o.join(",")+")"}findChild(t,e,n,r,i){let{buffer:o}=this,s=-1;for(let a=t;a!=e&&!(Va(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(t,e,n){let r=this.buffer,i=new Uint16Array(e-t),o=0;for(let s=t,a=0;s<e;){i[a++]=r[s++],i[a++]=r[s++]-n;let e=i[a++]=r[s++]-n;i[a++]=r[s++]-t,o=Math.max(o,e)}return new Ba(i,o,this.set)}}function Va(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ia(t,e){let n=t.childBefore(e);for(;n;){let e=n.lastChild;if(!e||e.to!=n.to)break;e.type.isError&&e.from==e.to?(t=n,n=e.prevSibling):n=e}return t}function Xa(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let e=!r&&t instanceof Ua&&t.index<0?null:t.parent;if(!e)return t;t=e}let o=r?0:ja.IgnoreOverlays;if(r)for(let r=t,s=r.parent;s;r=s,s=r.parent)r instanceof Ua&&r.index<0&&(null===(i=s.enter(e,n,o))||void 0===i?void 0:i.from)!=r.from&&(t=s);for(;;){let r=t.enter(e,n,o);if(!r)return t;t=r}}class Ua{constructor(t,e,n,r){this._tree=t,this.from=e,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,n,r,i=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=e>0?s.length:-1;t!=l;t+=e){let l=s[t],c=a[t]+o.from;if(Va(r,n,c,c+l.length))if(l instanceof Ba){if(i&ja.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,e,n-c,r);if(s>-1)return new La(new Ya(o,l,t,c),null,s)}else if(i&ja.IncludeAnonymous||!l.type.isAnonymous||Fa(l)){let s;if(!(i&ja.IgnoreMounts)&&l.props&&(s=l.prop($a.mounted))&&!s.overlay)return new Ua(s.tree,c,t,o);let a=new Ua(l,c,t,o);return i&ja.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(e<0?l.children.length-1:0,e,n,r)}}if(i&ja.IncludeAnonymous||!o.type.isAnonymous)return null;if(t=o.index>=0?o.index+e:e<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,n=0){let r;if(!(n&ja.IgnoreOverlays)&&(r=this._tree.prop($a.mounted))&&r.overlay){let n=t-this.from;for(let{from:t,to:i}of r.overlay)if((e>0?t<=n:t<n)&&(e<0?i>=n:i>n))return new Ua(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(t=0){return new Ga(this,t)}get tree(){return this._tree}toTree(){return this._tree}resolve(t,e=0){return Xa(this,t,e,!1)}resolveInner(t,e=0){return Xa(this,t,e,!0)}enterUnfinishedNodesBefore(t){return Ia(this,t)}getChild(t,e=null,n=null){let r=qa(this,t,e,n);return r.length?r[0]:null}getChildren(t,e=null,n=null){return qa(this,t,e,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(t){return za(this,t)}}function qa(t,e,n,r){let i=t.cursor(),o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function za(t,e,n=e.length-1){for(let r=t.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class Ya{constructor(t,e,n,r){this.parent=t,this.buffer=e,this.index=n,this.start=r}}class La{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,n){this.context=t,this._parent=e,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}child(t,e,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.context.start,n);return i<0?null:new La(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,n=0){if(n&ja.ExcludeBuffers)return null;let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return i<0?null:new La(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new La(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new La(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}cursor(t=0){return new Ga(this,t)}get tree(){return null}toTree(){let t=[],e=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1];t.push(n.slice(r,i,o)),e.push(0)}return new Za(this.type,t,e,this.to-this.from)}resolve(t,e=0){return Xa(this,t,e,!1)}resolveInner(t,e=0){return Xa(this,t,e,!0)}enterUnfinishedNodesBefore(t){return Ia(this,t)}toString(){return this.context.buffer.childString(this.index)}getChild(t,e=null,n=null){let r=qa(this,t,e,n);return r.length?r[0]:null}getChildren(t,e=null,n=null){return qa(this,t,e,n)}get node(){return this}matchContext(t){return za(this,t)}}class Ga{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Ua)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let e=t._parent;e;e=e._parent)this.stack.unshift(e.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)}yieldBuf(t,e){this.index=t;let{start:n,buffer:r}=this.buffer;return this.type=e||r.set.types[r.buffer[t]],this.from=n+r.buffer[t+1],this.to=n+r.buffer[t+2],!0}yield(t){return!!t&&(t instanceof Ua?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],t,e-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,n=this.mode){return this.buffer?!(n&ja.ExcludeBuffers)&&this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ja.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&ja.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode));let{buffer:e}=this.buffer,n=this.stack.length-1;if(t<0){let t=n<0?0:this.stack[n]+4;if(this.index!=t)return this.yieldBuf(e.findChild(t,this.index,-1,0,4))}else{let t=e.buffer[this.index+3];if(t<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(t)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,n,{buffer:r}=this;if(r){if(t>0){if(this.index<r.buffer.buffer.length)return!1}else for(let t=0;t<this.index;t++)if(r.buffer.buffer[t+3]<this.index)return!1;({index:e,parent:n}=r)}else({index:e,_parent:n}=this._tree);for(;n;({index:e,_parent:n}=n))if(e>-1)for(let r=e+t,i=t<0?-1:n._tree.children.length;r!=i;r+=t){let t=n._tree.children[r];if(this.mode&ja.IncludeAnonymous||t instanceof Ba||!t.type.isAnonymous||Fa(t))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer)t:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=t;o;o=o._parent)if(o.index==r){if(r==this.index)return o;e=o,n=i+1;break t}r=this.stack[--i]}for(let t=n;t<this.stack.length;t++)e=new La(this.buffer,e,this.stack[t]);return this.bufferNode=new La(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==t(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&e&&e(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(t){if(!this.buffer)return za(this.node,t);let{buffer:e}=this.buffer,{types:n}=e.set;for(let r=t.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return za(this.node,t,r);let o=n[e.buffer[this.stack[i]]];if(!o.isAnonymous){if(t[r]&&t[r]!=o.name)return!1;r--}}return!0}}function Fa(t){return t.children.some((t=>t instanceof Ba||!t.type.isAnonymous||Fa(t)))}const Ha=new WeakMap;function Ka(t,e){if(!t.isAnonymous||e instanceof Ba||e.type!=t)return 1;let n=Ha.get(e);if(null==n){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Za)){n=1;break}n+=Ka(t,r)}Ha.set(e,n)}return n}function Ja(t,e,n,r,i,o,s,a,l){let c=0;for(let n=r;n<i;n++)c+=Ka(t,e[n]);let h=Math.ceil(1.5*c/8),u=[],f=[];return function e(n,r,i,s,a){for(let c=i;c<s;){let i=c,d=r[c],p=Ka(t,n[c]);for(c++;c<s;c++){let e=Ka(t,n[c]);if(p+e>=h)break;p+=e}if(c==i+1){if(p>h){let t=n[i];e(t.children,t.positions,0,t.children.length,r[i]+a);continue}u.push(n[i])}else{let e=r[c-1]+n[c-1].length-d;u.push(Ja(t,n,r,i,c,d,e,null,l))}f.push(d+a-o)}}(e,n,r,i,0),(a||l)(u,f,s)}class tl{constructor(){this.map=new WeakMap}setBuffer(t,e,n){let r=this.map.get(t);r||this.map.set(t,r=new Map),r.set(e,n)}getBuffer(t,e){let n=this.map.get(t);return n&&n.get(e)}set(t,e){t instanceof La?this.setBuffer(t.context.buffer,t.index,e):t instanceof Ua&&this.map.set(t.tree,e)}get(t){return t instanceof La?this.getBuffer(t.context.buffer,t.index):t instanceof Ua?this.map.get(t.tree):void 0}cursorSet(t,e){t.buffer?this.setBuffer(t.buffer.buffer,t.index,e):this.map.set(t.tree,e)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class el{constructor(t,e,n,r,i=!1,o=!1){this.from=t,this.to=e,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(t,e=[],n=!1){let r=[new el(0,t.length,t,0,!1,n)];for(let n of e)n.to>t.length&&r.push(n);return r}static applyChanges(t,e,n=128){if(!e.length)return t;let r=[],i=1,o=t.length?t[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<e.length?e[s]:null,h=c?c.fromA:1e9;if(h-a>=n)for(;o&&o.from<h;){let e=o;if(a>=e.from||h<=e.to||l){let t=Math.max(e.from,a)-l,n=Math.min(e.to,h)-l;e=t>=n?null:new el(t,n,e.tree,e.offset+l,s>0,!!c)}if(e&&r.push(e),o.to>h)break;o=i<t.length?t[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class nl{startParse(t,e,n){return"string"==typeof t&&(t=new rl(t)),n=n?n.length?n.map((t=>new _a(t.from,t.to))):[new _a(0,0)]:[new _a(0,t.length)],this.createParse(t,e||[],n)}parse(t,e,n){let r=this.startParse(t,e,n);for(;;){let t=r.advance();if(t)return t}}}class rl{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}new $a({perNode:!0});let il=0;class ol{constructor(t,e,n){this.set=t,this.base=e,this.modified=n,this.id=il++}static define(t){if(null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let e=new ol([],null,[]);if(e.set.push(e),t)for(let n of t.set)e.set.push(n);return e}static defineModifier(){let t=new al;return e=>e.modified.indexOf(t)>-1?e:al.get(e.base||e,e.modified.concat(t).sort(((t,e)=>t.id-e.id)))}}let sl=0;class al{constructor(){this.instances=[],this.id=sl++}static get(t,e){if(!e.length)return t;let n=e[0].instances.find((n=>n.base==t&&function(t,e){return t.length==e.length&&t.every(((t,n)=>t==e[n]))}(e,n.modified)));if(n)return n;let r=[],i=new ol(r,t,e);for(let t of e)t.instances.push(i);let o=function(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort(((t,e)=>e.length-t.length))}(e);for(let e of t.set)if(!e.modified.length)for(let t of o)r.push(al.get(e,t));return i}}function ll(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let t of n.split(" "))if(t){let n=[],i=2,o=t;for(let e=0;;){if("..."==o&&e>0&&e+3==t.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+t);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),e+=r[0].length,e==t.length)break;let s=t[e++];if(e==t.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+t);o=t.slice(e)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+t);let l=new hl(r,i,s>0?n.slice(0,s):null);e[a]=l.sort(e[a])}}return cl.add(e)}const cl=new $a;class hl{constructor(t,e,n,r){this.tags=t,this.mode=e,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function ul(t,e){let n=Object.create(null);for(let e of t)if(Array.isArray(e.tag))for(let t of e.tag)n[t.id]=e.class;else n[e.tag.id]=e.class;let{scope:r,all:i=null}=e||{};return{style:t=>{let e=i;for(let r of t)for(let t of r.set){let r=n[t.id];if(r){e=e?e+" "+r:r;break}}return e},scope:r}}function fl(t,e,n,r=0,i=t.length){let o=new dl(r,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),r,i,"",o.highlighters),o.flush(i)}hl.empty=new hl([],2,null);class dl{constructor(t,e,n){this.at=t,this.highlighters=e,this.span=n,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,n,r,i){let{type:o,from:s,to:a}=t;if(s>=n||a<=e)return;o.isTop&&(i=this.highlighters.filter((t=>!t.scope||t.scope(o))));let l=r,c=function(t){let e=t.type.prop(cl);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}(t)||hl.empty,h=function(t,e){let n=null;for(let r of t){let t=r.style(e);t&&(n=n?n+" "+t:t)}return n}(i,c.tags);if(h&&(l&&(l+=" "),l+=h,1==c.mode&&(r+=(r?" ":"")+h)),this.startSpan(t.from,l),c.opaque)return;let u=t.tree&&t.tree.prop($a.mounted);if(u&&u.overlay){let o=t.node.enter(u.overlay[0].from+s,1),c=this.highlighters.filter((t=>!t.scope||t.scope(u.tree.type))),h=t.firstChild();for(let f=0,d=s;;f++){let p=f<u.overlay.length?u.overlay[f]:null,g=p?p.from+s:a,m=Math.max(e,d),O=Math.min(n,g);if(m<O&&h)for(;t.from<O&&(this.highlightRange(t,m,O,r,i),this.startSpan(Math.min(O,t.to),l),!(t.to>=g)&&t.nextSibling()););if(!p||g>n)break;d=p.to+s,d>e&&(this.highlightRange(o.cursor(),Math.max(e,p.from+s),Math.min(n,d),r,c),this.startSpan(d,l))}h&&t.parent()}else if(t.firstChild()){do{if(!(t.to<=e)){if(t.from>=n)break;this.highlightRange(t,e,n,r,i),this.startSpan(Math.min(n,t.to),l)}}while(t.nextSibling());t.parent()}}}const pl=ol.define,gl=pl(),ml=pl(),Ol=pl(ml),vl=pl(ml),bl=pl(),yl=pl(bl),wl=pl(bl),xl=pl(),Sl=pl(xl),kl=pl(),Cl=pl(),Ql=pl(),Pl=pl(Ql),El=pl(),Tl={comment:gl,lineComment:pl(gl),blockComment:pl(gl),docComment:pl(gl),name:ml,variableName:pl(ml),typeName:Ol,tagName:pl(Ol),propertyName:vl,attributeName:pl(vl),className:pl(ml),labelName:pl(ml),namespace:pl(ml),macroName:pl(ml),literal:bl,string:yl,docString:pl(yl),character:pl(yl),attributeValue:pl(yl),number:wl,integer:pl(wl),float:pl(wl),bool:pl(bl),regexp:pl(bl),escape:pl(bl),color:pl(bl),url:pl(bl),keyword:kl,self:pl(kl),null:pl(kl),atom:pl(kl),unit:pl(kl),modifier:pl(kl),operatorKeyword:pl(kl),controlKeyword:pl(kl),definitionKeyword:pl(kl),moduleKeyword:pl(kl),operator:Cl,derefOperator:pl(Cl),arithmeticOperator:pl(Cl),logicOperator:pl(Cl),bitwiseOperator:pl(Cl),compareOperator:pl(Cl),updateOperator:pl(Cl),definitionOperator:pl(Cl),typeOperator:pl(Cl),controlOperator:pl(Cl),punctuation:Ql,separator:pl(Ql),bracket:Pl,angleBracket:pl(Pl),squareBracket:pl(Pl),paren:pl(Pl),brace:pl(Pl),content:xl,heading:Sl,heading1:pl(Sl),heading2:pl(Sl),heading3:pl(Sl),heading4:pl(Sl),heading5:pl(Sl),heading6:pl(Sl),contentSeparator:pl(xl),list:pl(xl),quote:pl(xl),emphasis:pl(xl),strong:pl(xl),link:pl(xl),monospace:pl(xl),strikethrough:pl(xl),inserted:pl(),deleted:pl(),changed:pl(),invalid:pl(),meta:El,documentMeta:pl(El),annotation:pl(El),processingInstruction:pl(El),definition:ol.defineModifier(),constant:ol.defineModifier(),function:ol.defineModifier(),standard:ol.defineModifier(),local:ol.defineModifier(),special:ol.defineModifier()};var _l;ul([{tag:Tl.link,class:"tok-link"},{tag:Tl.heading,class:"tok-heading"},{tag:Tl.emphasis,class:"tok-emphasis"},{tag:Tl.strong,class:"tok-strong"},{tag:Tl.keyword,class:"tok-keyword"},{tag:Tl.atom,class:"tok-atom"},{tag:Tl.bool,class:"tok-bool"},{tag:Tl.url,class:"tok-url"},{tag:Tl.labelName,class:"tok-labelName"},{tag:Tl.inserted,class:"tok-inserted"},{tag:Tl.deleted,class:"tok-deleted"},{tag:Tl.literal,class:"tok-literal"},{tag:Tl.string,class:"tok-string"},{tag:Tl.number,class:"tok-number"},{tag:[Tl.regexp,Tl.escape,Tl.special(Tl.string)],class:"tok-string2"},{tag:Tl.variableName,class:"tok-variableName"},{tag:Tl.local(Tl.variableName),class:"tok-variableName tok-local"},{tag:Tl.definition(Tl.variableName),class:"tok-variableName tok-definition"},{tag:Tl.special(Tl.variableName),class:"tok-variableName2"},{tag:Tl.definition(Tl.propertyName),class:"tok-propertyName tok-definition"},{tag:Tl.typeName,class:"tok-typeName"},{tag:Tl.namespace,class:"tok-namespace"},{tag:Tl.className,class:"tok-className"},{tag:Tl.macroName,class:"tok-macroName"},{tag:Tl.propertyName,class:"tok-propertyName"},{tag:Tl.operator,class:"tok-operator"},{tag:Tl.comment,class:"tok-comment"},{tag:Tl.meta,class:"tok-meta"},{tag:Tl.invalid,class:"tok-invalid"},{tag:Tl.punctuation,class:"tok-punctuation"}]);const $l=new $a;class Ml{constructor(t,e,n=[],r=""){this.data=t,this.name=r,Ae.prototype.hasOwnProperty("tree")||Object.defineProperty(Ae.prototype,"tree",{get(){return Dl(this)}}),this.parser=e,this.extension=[Ul.of(this),Ae.languageData.of(((t,e,n)=>t.facet(Rl(t,e,n))))].concat(n)}isActiveAt(t,e,n=-1){return Rl(t,e,n)==this.data}findRegions(t){let e=t.facet(Ul);if((null==e?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let n=[],r=(t,e)=>{if(t.prop($l)==this.data)return void n.push({from:e,to:e+t.length});let i=t.prop($a.mounted);if(i){if(i.tree.prop($l)==this.data){if(i.overlay)for(let t of i.overlay)n.push({from:t.from+e,to:t.to+e});else n.push({from:e,to:e+t.length});return}if(i.overlay){let t=n.length;if(r(i.tree,i.overlay[0].from+e),n.length>t)return}}for(let n=0;n<t.children.length;n++){let i=t.children[n];i instanceof Za&&r(i,t.positions[n]+e)}};return r(Dl(t),0),n}get allowsNesting(){return!0}}function Rl(t,e,n){let r=t.facet(Ul);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let r=Dl(t).topNode;r;r=r.enter(e,n,ja.ExcludeBuffers))i=r.type.prop($l)||i;return i}Ml.setState=Se.define();class Al extends Ml{constructor(t,e,n){super(t,e,[],n),this.parser=e}static define(t){let e=(n=t.languageData,Ht.define({combine:n?t=>t.concat(n):void 0}));var n;return new Al(e,t.parser.configure({props:[$l.add((t=>t.isTop?e:void 0))]}),t.name)}configure(t,e){return new Al(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Dl(t){let e=t.field(Ml.state,!1);return e?e.tree:Za.empty}class Wl{constructor(t,e=t.length){this.doc=t,this.length=e,this.cursorPos=0,this.string="",this.cursor=t.iter()}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}}let jl=null;class Zl{constructor(t,e,n=[],r,i,o,s,a){this.parser=t,this.state=e,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(t,e,n){return new Zl(t,e,[],Za.empty,0,n,[],null)}startParse(){return this.parser.startParse(new Wl(this.state.doc),this.fragments)}work(t,e){return null!=e&&e>=this.state.doc.length&&(e=void 0),this.tree!=Za.empty&&this.isDone(null!=e?e:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof t){let e=Date.now()+t;t=()=>Date.now()>e}for(this.parse||(this.parse=this.startParse()),null!=e&&(null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(el.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=e?e:this.state.doc.length)))return!0;this.parse=this.startParse()}if(t())return!1}}))}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext((()=>{for(;!(e=this.parse.advance()););})),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(el.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=jl;jl=this;try{return t()}finally{jl=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Nl(t,e.from,e.to);return t}changes(t,e){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!t.empty){let e=[];if(t.iterChangedRanges(((t,n,r,i)=>e.push({fromA:t,toA:n,fromB:r,toB:i}))),n=el.applyChanges(n,e),r=Za.empty,i=0,o={from:t.mapPos(o.from,-1),to:t.mapPos(o.to,1)},this.skipped.length){s=[];for(let e of this.skipped){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);n<r&&s.push({from:n,to:r})}}}return new Zl(this.parser,e,n,r,i,o,s,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let e=0;e<this.skipped.length;e++){let{from:n,to:r}=this.skipped[e];n<t.to&&r>t.from&&(this.fragments=Nl(this.fragments,n,r),this.skipped.splice(e--,1))}return!(this.skipped.length>=e||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends nl{createParse(e,n,r){let i=r[0].from,o=r[r.length-1].to;return{parsedPos:i,advance(){let e=jl;if(e){for(let t of r)e.tempSkipped.push(t);t&&(e.scheduleOn=e.scheduleOn?Promise.all([e.scheduleOn,t]):t)}return this.parsedPos=o,new Za(Ra.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&0==e[0].from&&e[0].to>=t}static get(){return jl}}function Nl(t,e,n){return el.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Bl{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,n)||e.takeTree(),new Bl(e)}static init(t){let e=Math.min(3e3,t.doc.length),n=Zl.create(t.facet(Ul).parser,t,{from:0,to:e});return n.work(20,e)||n.takeTree(),new Bl(n)}}Ml.state=ie.define({create:Bl.init,update(t,e){for(let t of e.effects)if(t.is(Ml.setState))return t.value;return e.startState.facet(Ul)!=e.state.facet(Ul)?Bl.init(e.state):t.apply(e)}});let Vl=t=>{let e=setTimeout((()=>t()),500);return()=>clearTimeout(e)};"undefined"!=typeof requestIdleCallback&&(Vl=t=>{let e=-1,n=setTimeout((()=>{e=requestIdleCallback(t,{timeout:400})}),100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Il="undefined"!=typeof navigator&&(null===(_l=navigator.scheduling)||void 0===_l?void 0:_l.isInputPending)?()=>navigator.scheduling.isInputPending():null,Xl=Nr.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field(Ml.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),t.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field(Ml.state);e.tree==e.context.tree&&e.context.isDone(t.doc.length)||(this.working=Vl(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(Ml.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,t&&!Il?Math.max(25,t.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work((()=>Il&&Il()||Date.now()>o),r+(s?0:1e5));this.chunkBudget-=Date.now()-e,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:Ml.setState.of(new Bl(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then((()=>this.scheduleWork())).catch((t=>Dr(this.view.state,t))).then((()=>this.workScheduled--)),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ul=Ht.define({combine:t=>t.length?t[0]:null,enables:t=>[Ml.state,Xl,Vo.contentAttributes.compute([t],(e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}}))]});class ql{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}}const zl=Ht.define(),Yl=Ht.define({combine:t=>{if(!t.length)return"  ";if(!/^(?: +|\t+)$/.test(t[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return t[0]}});function Ll(t){let e=t.facet(Yl);return 9==e.charCodeAt(0)?t.tabSize*e.length:e.length}function Gl(t,e){let n="",r=t.tabSize;if(9==t.facet(Yl).charCodeAt(0))for(;e>=r;)n+="\t",e-=r;for(let t=0;t<e;t++)n+=" ";return n}function Fl(t,e){t instanceof Ae&&(t=new Hl(t));for(let n of t.state.facet(zl)){let r=n(t,e);if(void 0!==r)return r}let n=Dl(t.state);return n?function(t,e,n){return tc(e.resolveInner(n).enterUnfinishedNodesBefore(n),n,t)}(t,n,e):null}class Hl{constructor(t,e={}){this.state=t,this.options=e,this.unit=Ll(t)}lineAt(t,e=1){let n=this.state.doc.lineAt(t),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==t?{text:"",from:t}:(e<0?r<t:r<=t)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(t,e);return n.slice(t-r,Math.min(n.length,t+100-r))}column(t,e=1){let{text:n,from:r}=this.lineAt(t,e),i=this.countColumn(n,t-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(t,e=t.length){return Ke(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:n,from:r}=this.lineAt(t,e),i=this.options.overrideIndentation;if(i){let t=i(r);if(t>-1)return t}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Kl=new $a;function Jl(t){let e=t.type.prop(Kl);if(e)return e;let n,r=t.firstChild;if(r&&(n=r.type.prop($a.closedBy))){let e=t.lastChild,r=e&&n.indexOf(e.name)>-1;return t=>oc(t,!0,1,void 0,r&&!function(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}(t)?e.from:void 0)}return null==t.parent?ec:null}function tc(t,e,n){for(;t;t=t.parent){let r=Jl(t);if(r)return r(nc.create(n,e,t))}return null}function ec(){return 0}class nc extends Hl{constructor(t,e,n){super(t.state,t.options),this.base=t,this.pos=e,this.node=n}static create(t,e,n){return new nc(t,e,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let t=this.state.doc.lineAt(this.node.from);for(;;){let e=this.node.resolve(t.from);for(;e.parent&&e.parent.from==e.from;)e=e.parent;if(rc(e,this.node))break;t=this.state.doc.lineAt(e.from)}return this.lineIndent(t.from)}continue(){let t=this.node.parent;return t?tc(t,this.pos,this.base):0}}function rc(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function ic({closing:t,align:e=!0,units:n=1}){return r=>oc(r,e,n,t)}function oc(t,e,n,r,i){let o=t.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==t.pos+s,l=e?function(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let t=n.to;;){let i=e.childAfter(t);if(!i||i==r)return null;if(!i.type.isSkipped)return i.from<s?n:null;t=i.to}}(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}function sc({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const ac=Ht.define(),lc=new $a;function cc(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function hc(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function uc(t,e,n){for(let r of t.facet(ac)){let i=r(t,e,n);if(i)return i}return function(t,e,n){let r=Dl(t);if(r.length<n)return null;let i=null;for(let o=r.resolveInner(n,1);o;o=o.parent){if(o.to<=n||o.from>n)continue;if(i&&o.from<e)break;let s=o.type.prop(lc);if(s&&(o.to<r.length-50||r.length==t.doc.length||!hc(o))){let r=s(o,t);r&&r.from<=n&&r.from>=e&&r.to>n&&(i=r)}}return i}(t,e,n)}function fc(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const dc=Se.define({map:fc}),pc=Se.define({map:fc});function gc(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some((t=>t.from<=n&&t.to>=n))||e.push(t.lineBlockAt(n));return e}const mc=ie.define({create:()=>pr.none,update(t,e){t=t.map(e.changes);for(let n of e.effects)n.is(dc)&&!vc(t,n.value.from,n.value.to)?t=t.update({add:[Cc.range(n.value.from,n.value.to)]}):n.is(pc)&&(t=t.update({filter:(t,e)=>n.value.from!=t||n.value.to!=e,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,((t,e)=>{t<r&&e>r&&(n=!0)})),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(t,e)=>e<=r||t>=r}))}return t},provide:t=>Vo.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,((t,e)=>{n.push(t,e)})),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],i=t[n++];if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid JSON for fold state");e.push(Cc.range(r,i))}return pr.set(e,!0)}});function Oc(t,e,n){var r;let i=null;return null===(r=t.field(mc,!1))||void 0===r||r.between(e,n,((t,e)=>{(!i||i.from>t)&&(i={from:t,to:e})})),i}function vc(t,e,n){let r=!1;return t.between(e,e,((t,i)=>{t==e&&i==n&&(r=!0)})),r}function bc(t,e){return t.field(mc,!1)?e:e.concat(Se.appendConfig.of(kc()))}function yc(t,e,n=!0){let r=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return Vo.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${t.state.phrase("to")} ${i}.`)}const wc=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:t=>{for(let e of gc(t)){let n=uc(t.state,e.from,e.to);if(n)return t.dispatch({effects:bc(t.state,[dc.of(n),yc(t,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:t=>{if(!t.state.field(mc,!1))return!1;let e=[];for(let n of gc(t)){let r=Oc(t.state,n.from,n.to);r&&e.push(pc.of(r),yc(t,r,!1))}return e.length&&t.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:t=>{let{state:e}=t,n=[];for(let r=0;r<e.doc.length;){let i=t.lineBlockAt(r),o=uc(e,i.from,i.to);o&&n.push(dc.of(o)),r=(o?t.lineBlockAt(o.to):i).to+1}return n.length&&t.dispatch({effects:bc(t.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:t=>{let e=t.state.field(mc,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,((t,e)=>{n.push(pc.of({from:t,to:e}))})),t.dispatch({effects:n}),!0}}],xc={placeholderDOM:null,placeholderText:"…"},Sc=Ht.define({combine:t=>De(t,xc)});function kc(t){let e=[mc,Tc];return t&&e.push(Sc.of(t)),e}const Cc=pr.replace({widget:new class extends fr{toDOM(t){let{state:e}=t,n=e.facet(Sc),r=e=>{let n=t.lineBlockAt(t.posAtDOM(e.target)),r=Oc(t.state,n.from,n.to);r&&t.dispatch({effects:pc.of(r)}),e.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(t,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),Qc={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Pc extends sa{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function Ec(t={}){let e=Object.assign(Object.assign({},Qc),t),n=new Pc(e,!0),r=new Pc(e,!1),i=Nr.fromClass(class{constructor(t){this.from=t.viewport.from,this.markers=this.buildMarkers(t)}update(t){(t.docChanged||t.viewportChanged||t.startState.facet(Ul)!=t.state.facet(Ul)||t.startState.field(mc,!1)!=t.state.field(mc,!1)||Dl(t.startState)!=Dl(t.state)||e.foldingChanged(t))&&(this.markers=this.buildMarkers(t.view))}buildMarkers(t){let e=new Ve;for(let i of t.viewportLineBlocks){let o=Oc(t.state,i.from,i.to)?r:uc(t.state,i.from,i.to)?n:null;o&&e.add(i.from,i.from,o)}return e.finish()}}),{domEventHandlers:o}=e;return[i,ha({class:"cm-foldGutter",markers(t){var e;return(null===(e=t.plugin(i))||void 0===e?void 0:e.markers)||Be.empty},initialSpacer:()=>new Pc(e,!1),domEventHandlers:Object.assign(Object.assign({},o),{click:(t,e,n)=>{if(o.click&&o.click(t,e,n))return!0;let r=Oc(t.state,e.from,e.to);if(r)return t.dispatch({effects:pc.of(r)}),!0;let i=uc(t.state,e.from,e.to);return!!i&&(t.dispatch({effects:dc.of(i)}),!0)}})}),kc()]}const Tc=Vo.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class _c{constructor(t,e){let n;function r(t){let e=rn.newName();return(n||(n=Object.create(null)))["."+e]=t,e}this.specs=t;const i="string"==typeof e.all?e.all:e.all?r(e.all):void 0,o=e.scope;this.scope=o instanceof Ml?t=>t.prop($l)==o.data:o?t=>t==o:void 0,this.style=ul(t.map((t=>({tag:t.tag,class:t.class||r(Object.assign({},t,{tag:null}))}))),{all:i}).style,this.module=n?new rn(n):null,this.themeType=e.themeType}static define(t,e){return new _c(t,e||{})}}const $c=Ht.define(),Mc=Ht.define({combine:t=>t.length?[t[0]]:null});function Rc(t){let e=t.facet($c);return e.length?e:t.facet(Mc)}function Ac(t,e){let n,r=[Wc];return t instanceof _c&&(t.module&&r.push(Vo.styleModule.of(t.module)),n=t.themeType),(null==e?void 0:e.fallback)?r.push(Mc.of(t)):n?r.push($c.computeN([Vo.darkTheme],(e=>e.facet(Vo.darkTheme)==("dark"==n)?[t]:[]))):r.push($c.of(t)),r}class Dc{constructor(t){this.markCache=Object.create(null),this.tree=Dl(t.state),this.decorations=this.buildDeco(t,Rc(t.state))}update(t){let e=Dl(t.state),n=Rc(t.state),r=n!=Rc(t.startState);e.length<t.view.viewport.to&&!r&&e.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(e!=this.tree||t.viewportChanged||r)&&(this.tree=e,this.decorations=this.buildDeco(t.view,n))}buildDeco(t,e){if(!e||!this.tree.length)return pr.none;let n=new Ve;for(let{from:r,to:i}of t.visibleRanges)fl(this.tree,e,((t,e,r)=>{n.add(t,e,this.markCache[r]||(this.markCache[r]=pr.mark({class:r})))}),r,i);return n.finish()}}const Wc=se.high(Nr.fromClass(Dc,{decorations:t=>t.decorations})),jc=_c.define([{tag:Tl.meta,color:"#404740"},{tag:Tl.link,textDecoration:"underline"},{tag:Tl.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Tl.emphasis,fontStyle:"italic"},{tag:Tl.strong,fontWeight:"bold"},{tag:Tl.strikethrough,textDecoration:"line-through"},{tag:Tl.keyword,color:"#708"},{tag:[Tl.atom,Tl.bool,Tl.url,Tl.contentSeparator,Tl.labelName],color:"#219"},{tag:[Tl.literal,Tl.inserted],color:"#164"},{tag:[Tl.string,Tl.deleted],color:"#a11"},{tag:[Tl.regexp,Tl.escape,Tl.special(Tl.string)],color:"#e40"},{tag:Tl.definition(Tl.variableName),color:"#00f"},{tag:Tl.local(Tl.variableName),color:"#30a"},{tag:[Tl.typeName,Tl.namespace],color:"#085"},{tag:Tl.className,color:"#167"},{tag:[Tl.special(Tl.variableName),Tl.macroName],color:"#256"},{tag:Tl.definition(Tl.propertyName),color:"#00c"},{tag:Tl.comment,color:"#940"},{tag:Tl.invalid,color:"#f00"}]),Zc=Vo.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Nc="()[]{}",Bc=Ht.define({combine:t=>De(t,{afterCursor:!0,brackets:Nc,maxScanDistance:1e4,renderMatch:Xc})}),Vc=pr.mark({class:"cm-matchingBracket"}),Ic=pr.mark({class:"cm-nonmatchingBracket"});function Xc(t){let e=[],n=t.matched?Vc:Ic;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const Uc=ie.define({create:()=>pr.none,update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Bc);for(let t of e.state.selection.ranges){if(!t.empty)continue;let i=Lc(e.state,t.head,-1,r)||t.head>0&&Lc(e.state,t.head-1,1,r)||r.afterCursor&&(Lc(e.state,t.head,1,r)||t.head<e.state.doc.length&&Lc(e.state,t.head+1,-1,r));i&&(n=n.concat(r.renderMatch(i,e.state)))}return pr.set(n,!0)},provide:t=>Vo.decorations.from(t)}),qc=[Uc,Zc];function zc(t={}){return[Bc.of(t),qc]}function Yc(t,e,n){let r=t.prop(e<0?$a.openedBy:$a.closedBy);if(r)return r;if(1==t.name.length){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Lc(t,e,n,r={}){let i=r.maxScanDistance||1e4,o=r.brackets||Nc,s=Dl(t),a=s.resolveInner(e,n);for(let t=a;t;t=t.parent){let e=Yc(t.type,n,o);if(e&&t.from<t.to)return Gc(0,0,n,t,e,o)}return function(t,e,n,r,i,o,s){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},h=t.doc.iterRange(e,n>0?t.doc.length:0),u=0;for(let t=0;!h.next().done&&t<=o;){let o=h.value;n<0&&(t+=o.length);let a=e+t*n;for(let t=n>0?0:o.length-1,e=n>0?o.length:-1;t!=e;t+=n){let e=s.indexOf(o[t]);if(!(e<0||r.resolveInner(a+t,1).type!=i))if(e%2==0==n>0)u++;else{if(1==u)return{start:c,end:{from:a+t,to:a+t+1},matched:e>>1==l>>1};u--}}n>0&&(t+=o.length)}return h.done?{start:c,matched:!1}:null}(t,e,n,s,a.type,i,o)}function Gc(t,e,n,r,i,o){let s=r.parent,a={from:r.from,to:r.to},l=0,c=null==s?void 0:s.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do{if(n<0?c.to<=r.from:c.from>=r.to){if(0==l&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(Yc(c.type,n,o))l++;else if(Yc(c.type,-n,o)){if(0==l)return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};l--}}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}const Fc=Object.create(null),Hc=[Ra.none],Kc=[],Jc=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Jc[t]=eh(Fc,e);function th(t,e){Kc.indexOf(t)>-1||(Kc.push(t),console.warn(e))}function eh(t,e){let n=null;for(let r of e.split(".")){let e=t[r]||Tl[r];e?"function"==typeof e?n?n=e(n):th(r,`Modifier ${r} used at start of tag`):n?th(r,`Tag ${r} used as modifier`):n=e:th(r,`Unknown highlighting tag ${r}`)}if(!n)return 0;let r=e.replace(/ /g,"_"),i=Ra.define({id:Hc.length,name:r,props:[ll({[r]:n})]});return Hc.push(i),i.id}function nh(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return!!i&&(r(n.update(i)),!0)}}const rh=nh(lh,0),ih=nh(ah,0),oh=nh(((t,e)=>ah(t,e,function(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from,to:i.to})}return e}(e))),0);function sh(t,e=t.selection.main.head){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}function ah(t,e,n=e.selection.ranges){let r=n.map((t=>sh(e,t.from).block));if(!r.every((t=>t)))return null;let i=n.map(((t,n)=>function(t,{open:e,close:n},r,i){let o,s,a=t.sliceDoc(r-50,r),l=t.sliceDoc(i,i+50),c=/\s*$/.exec(a)[0].length,h=/^\s*/.exec(l)[0].length,u=a.length-c;if(a.slice(u-e.length,u)==e&&l.slice(h,h+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:i+h,margin:h&&1}};i-r<=100?o=s=t.sliceDoc(r,i):(o=t.sliceDoc(r,r+50),s=t.sliceDoc(i-50,i));let f=/^\s*/.exec(o)[0].length,d=/\s*$/.exec(s)[0].length,p=s.length-d-n.length;return o.slice(f,f+e.length)==e&&s.slice(p,p+n.length)==n?{open:{pos:r+f+e.length,margin:/\s/.test(o.charAt(f+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(s.charAt(p-1))?1:0}}:null}(e,r[n],t.from,t.to)));if(2!=t&&!i.every((t=>t)))return{changes:e.changes(n.map(((t,e)=>i[e]?[]:[{from:t.from,insert:r[e].open+" "},{from:t.to,insert:" "+r[e].close}])))};if(1!=t&&i.some((t=>t))){let t=[];for(let e,n=0;n<i.length;n++)if(e=i[n]){let i=r[n],{open:o,close:s}=e;t.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:t}}return null}function lh(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:t,to:o}of n){let n=r.length,s=1e9;for(let n=t;n<=o;){let a=e.doc.lineAt(n);if(a.from>i&&(t==o||o>a.from)){i=a.from;let t=sh(e,n).line;if(!t)continue;let o=/^\s*/.exec(a.text)[0].length,l=o==a.length,c=a.text.slice(o,o+t.length)==t?o:-1;o<a.text.length&&o<s&&(s=o),r.push({line:a,comment:c,token:t,indent:o,empty:l,single:!1})}n=a.to+1}if(s<1e9)for(let t=n;t<r.length;t++)r[t].indent<r[t].line.text.length&&(r[t].indent=s);r.length==n+1&&(r[n].single=!0)}if(2!=t&&r.some((t=>t.comment<0&&(!t.empty||t.single)))){let t=[];for(let{line:e,token:n,indent:i,empty:o,single:s}of r)!s&&o||t.push({from:e.from+i,insert:n+" "});let n=e.changes(t);return{changes:n,selection:e.selection.map(n,1)}}if(1!=t&&r.some((t=>t.comment>=0))){let t=[];for(let{line:e,comment:n,token:i}of r)if(n>=0){let r=e.from+n,o=r+i.length;" "==e.text[o-e.from]&&o++,t.push({from:r,to:o})}return{changes:t}}return null}const ch=ye.define(),hh=ye.define(),uh=Ht.define(),fh=Ht.define({combine:t=>De(t,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}),dh=ie.define({create:()=>Th.empty,update(t,e){let n=e.state.facet(fh),r=e.annotation(ch);if(r){let i=e.docChanged?Lt.single(function(t){let e=0;return t.iterChangedRanges(((t,n)=>e=n)),e}(e.changes)):void 0,o=yh.fromTransaction(e,i),s=r.side,a=0==s?t.undone:t.done;return a=o?wh(a,a.length,n.minDepth,o):kh(a,e.startState.selection),new Th(0==s?r.rest:a,0==s?a:r.rest)}let i=e.annotation(hh);if("full"!=i&&"before"!=i||(t=t.isolate()),!1===e.annotation(ke.addToHistory))return e.changes.empty?t:t.addMapping(e.changes.desc);let o=yh.fromTransaction(e),s=e.annotation(ke.time),a=e.annotation(ke.userEvent);return o?t=t.addChanges(o,s,a,n.newGroupDelay,n.minDepth):e.selection&&(t=t.addSelection(e.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(t=t.isolate()),t},toJSON:t=>({done:t.done.map((t=>t.toJSON())),undone:t.undone.map((t=>t.toJSON()))}),fromJSON:t=>new Th(t.done.map(yh.fromJSON),t.undone.map(yh.fromJSON))});function ph(t={}){return[dh,fh.of(t),Vo.domEventHandlers({beforeinput(t,e){let n="historyUndo"==t.inputType?mh:"historyRedo"==t.inputType?Oh:null;return!!n&&(t.preventDefault(),n(e))}})]}function gh(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(dh,!1);if(!i)return!1;let o=i.pop(t,n,e);return!!o&&(r(o),!0)}}const mh=gh(0,!1),Oh=gh(1,!1),vh=gh(0,!0),bh=gh(1,!0);class yh{constructor(t,e,n,r,i){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(t){return new yh(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,n;return{changes:null===(t=this.changes)||void 0===t?void 0:t.toJSON(),mapped:null===(e=this.mapped)||void 0===e?void 0:e.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((t=>t.toJSON()))}}static fromJSON(t){return new yh(t.changes&&Bt.fromJSON(t.changes),[],t.mapped&&Nt.fromJSON(t.mapped),t.startSelection&&Lt.fromJSON(t.startSelection),t.selectionsAfter.map(Lt.fromJSON))}static fromTransaction(t,e){let n=Sh;for(let e of t.startState.facet(uh)){let r=e(t);r.length&&(n=n.concat(r))}return!n.length&&t.changes.empty?null:new yh(t.changes.invert(t.startState.doc),n,void 0,e||t.startState.selection,Sh)}static selection(t){return new yh(void 0,Sh,void 0,void 0,t)}}function wh(t,e,n,r){let i=e+1>n+20?e-n-1:0,o=t.slice(i,e);return o.push(r),o}function xh(t,e){return t.length?e.length?t.concat(e):t:e}const Sh=[];function kh(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),wh(t,t.length-1,1e9,n.setSelAfter(r)))}return[yh.selection([e])]}function Ch(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Qh(t,e){if(!t.length)return t;let n=t.length,r=Sh;for(;n;){let i=Ph(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let e=t.slice(0,n);return e[n-1]=i,e}e=i.mapped,n--,r=i.selectionsAfter}return r.length?[yh.selection(r)]:Sh}function Ph(t,e,n){let r=xh(t.selectionsAfter.length?t.selectionsAfter.map((t=>t.map(e))):Sh,n);if(!t.changes)return yh.selection(r);let i=t.changes.map(e),o=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(o):o;return new yh(i,Se.mapEffects(t.effects,e),s,t.startSelection.map(o),r)}const Eh=/^(input\.type|delete)($|\.)/;class Th{constructor(t,e,n=0,r){this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new Th(this.done,this.undone):this}addChanges(t,e,n,r,i){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&t.changes&&(!n||Eh.test(n))&&(!s.selectionsAfter.length&&e-this.prevTime<r&&function(t,e){let n=[],r=!1;return t.iterChangedRanges(((t,e)=>n.push(t,e))),e.iterChangedRanges(((t,e,i,o)=>{for(let t=0;t<n.length;){let e=n[t++],s=n[t++];o>=e&&i<=s&&(r=!0)}})),r}(s.changes,t.changes)||"input.type.compose"==n)?wh(o,o.length-1,i,new yh(t.changes.compose(s.changes),xh(t.effects,s.effects),s.mapped,s.startSelection,Sh)):wh(o,o.length,i,t),new Th(o,Sh,e,n)}addSelection(t,e,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:Sh;return i.length>0&&e-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(t,e){return t.ranges.length==e.ranges.length&&0===t.ranges.filter(((t,n)=>t.empty!=e.ranges[n].empty)).length}(i[i.length-1],t)?this:new Th(kh(this.done,t),this.undone,e,n)}addMapping(t){return new Th(Qh(this.done,t),Qh(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,n){let r=0==t?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1];if(n&&i.selectionsAfter.length)return e.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:ch.of({side:t,rest:Ch(r)}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?Sh:r.slice(0,r.length-1);return i.mapped&&(n=Qh(n,i.mapped)),e.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:ch.of({side:t,rest:n}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}Th.empty=new Th(Sh,Sh);const _h=[{key:"Mod-z",run:mh,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Oh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Oh,preventDefault:!0},{key:"Mod-u",run:vh,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:bh,preventDefault:!0}];function $h(t,e){return Lt.create(t.ranges.map(e),t.mainIndex)}function Mh(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Rh({state:t,dispatch:e},n){let r=$h(t.selection,n);return!r.eq(t.selection)&&(e(Mh(t,r)),!0)}function Ah(t,e){return Lt.cursor(e?t.to:t.from)}function Dh(t,e){return Rh(t,(n=>n.empty?t.moveByChar(n,e):Ah(n,e)))}function Wh(t){return t.textDirectionAt(t.state.selection.main.head)==Gr.LTR}const jh=t=>Dh(t,!Wh(t)),Zh=t=>Dh(t,Wh(t));function Nh(t,e){return Rh(t,(n=>n.empty?t.moveByGroup(n,e):Ah(n,e)))}function Bh(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Vh(t,e,n){let r,i,o=Dl(t).resolveInner(e.head),s=n?$a.closedBy:$a.openedBy;for(let r=e.head;;){let e=n?o.childAfter(r):o.childBefore(r);if(!e)break;Bh(t,e,s)?o=e:r=n?e.to:e.from}return i=o.type.prop(s)&&(r=n?Lc(t,o.from,1):Lc(t,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,Lt.cursor(i,n?-1:1)}function Ih(t,e){return Rh(t,(n=>{if(!n.empty)return Ah(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)}))}const Xh=t=>Ih(t,!1),Uh=t=>Ih(t,!0);function qh(t){return Math.max(t.defaultLineHeight,Math.min(t.dom.clientHeight,innerHeight)-5)}function zh(t,e){let{state:n}=t,r=$h(n.selection,(n=>n.empty?t.moveVertically(n,e,qh(t)):Ah(n,e)));if(r.eq(n.selection))return!1;let i,o=t.coordsAtPos(n.selection.main.head),s=t.scrollDOM.getBoundingClientRect();return o&&o.top>s.top&&o.bottom<s.bottom&&o.top-s.top<=t.scrollDOM.scrollHeight-t.scrollDOM.scrollTop-t.scrollDOM.clientHeight&&(i=Vo.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-s.top})),t.dispatch(Mh(n,r),{effects:i}),!0}const Yh=t=>zh(t,!1),Lh=t=>zh(t,!0);function Gh(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&e.head!=r.from+n&&(i=Lt.cursor(r.from+n))}return i}function Fh(t,e){let n=$h(t.state.selection,(t=>{let n=e(t);return Lt.range(t.anchor,n.head,n.goalColumn)}));return!n.eq(t.state.selection)&&(t.dispatch(Mh(t.state,n)),!0)}function Hh(t,e){return Fh(t,(n=>t.moveByChar(n,e)))}const Kh=t=>Hh(t,!Wh(t)),Jh=t=>Hh(t,Wh(t));function tu(t,e){return Fh(t,(n=>t.moveByGroup(n,e)))}function eu(t,e){return Fh(t,(n=>t.moveVertically(n,e)))}const nu=t=>eu(t,!1),ru=t=>eu(t,!0);function iu(t,e){return Fh(t,(n=>t.moveVertically(n,e,qh(t))))}const ou=t=>iu(t,!1),su=t=>iu(t,!0),au=({state:t,dispatch:e})=>(e(Mh(t,{anchor:0})),!0),lu=({state:t,dispatch:e})=>(e(Mh(t,{anchor:t.doc.length})),!0),cu=({state:t,dispatch:e})=>(e(Mh(t,{anchor:t.selection.main.anchor,head:0})),!0),hu=({state:t,dispatch:e})=>(e(Mh(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0);function uu(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange((r=>{let{from:i,to:o}=r;if(i==o){let r=e(i);r<i?(n="delete.backward",r=fu(t,r,!1)):r>i&&(n="delete.forward",r=fu(t,r,!0)),i=Math.min(i,r),o=Math.max(o,r)}else i=fu(t,i,!1),o=fu(t,o,!0);return i==o?{range:r}:{changes:{from:i,to:o},range:Lt.cursor(i)}}));return!i.changes.empty&&(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?Vo.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function fu(t,e,n){if(t instanceof Vo)for(let r of t.state.facet(Vo.atomicRanges).map((e=>e(t))))r.between(e,e,((t,r)=>{t<e&&r>e&&(e=n?r:t)}));return e}const du=(t,e)=>uu(t,(n=>{let r,i,{state:o}=t,s=o.doc.lineAt(n);if(!e&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,n-s.from))){if("\t"==r[r.length-1])return n-1;let t=Ke(r,o.tabSize)%Ll(o)||Ll(o);for(let e=0;e<t&&" "==r[r.length-1-e];e++)n--;i=n}else i=Tt(s.text,n-s.from,e,e)+s.from,i==n&&s.number!=(e?o.doc.lines:1)&&(i+=e?1:-1);return i})),pu=t=>du(t,!1),gu=t=>du(t,!0),mu=(t,e)=>uu(t,(n=>{let r=n,{state:i}=t,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let t=null;;){if(r==(e?o.to:o.from)){r==n&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=Tt(o.text,r-o.from,e)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=t&&c!=t)break;" "==l&&r==n||(t=c),r=a}return r})),Ou=t=>mu(t,!1),vu=t=>uu(t,(e=>{let n=t.lineBlockAt(e).to;return e<n?n:Math.min(t.state.doc.length,e+1)}));function bu(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=t.doc.lineAt(r.to-1)),n>=i.number){let t=e[e.length-1];t.to=o.to,t.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return e}function yu(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let e of bu(t)){if(n?e.to==t.doc.length:0==e.from)continue;let o=t.doc.lineAt(n?e.to+1:e.from-1),s=o.length+1;if(n){r.push({from:e.to,to:o.to},{from:e.from,insert:o.text+t.lineBreak});for(let n of e.ranges)i.push(Lt.range(Math.min(t.doc.length,n.anchor+s),Math.min(t.doc.length,n.head+s)))}else{r.push({from:o.from,to:e.from},{from:e.to,insert:t.lineBreak+o.text});for(let t of e.ranges)i.push(Lt.range(t.anchor-s,t.head-s))}}return!!r.length&&(e(t.update({changes:r,scrollIntoView:!0,selection:Lt.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0)}function wu(t,e,n){if(t.readOnly)return!1;let r=[];for(let e of bu(t))n?r.push({from:e.from,insert:t.doc.slice(e.from,e.to)+t.lineBreak}):r.push({from:e.to,insert:t.lineBreak+t.doc.slice(e.from,e.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const xu=ku(!1),Su=ku(!0);function ku(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange((n=>{let{from:r,to:i}=n,o=e.doc.lineAt(r),s=!t&&r==i&&function(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n,r=Dl(t).resolveInner(e),i=r.childBefore(e),o=r.childAfter(e);return i&&o&&i.to<=e&&o.from>=e&&(n=i.type.prop($a.closedBy))&&n.indexOf(o.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}(e,r);t&&(r=i=(i<=o.to?o:e.doc.lineAt(i)).to);let a=new Hl(e,{simulateBreak:r,simulateDoubleBreak:!!s}),l=Fl(a,r);for(null==l&&(l=/^\s*/.exec(e.doc.lineAt(r).text)[0].length);i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?({from:r,to:i}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",Gl(e,l)];return s&&c.push(Gl(e,a.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:Ot.of(c)},range:Lt.cursor(r+1+c[1].length)}}));return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Cu(t,e){let n=-1;return t.changeByRange((r=>{let i=[];for(let o=r.from;o<=r.to;){let s=t.doc.lineAt(o);s.number>n&&(r.empty||r.to>s.from)&&(e(s,i,r),n=s.number),o=s.to+1}let o=t.changes(i);return{changes:i,range:Lt.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}const Qu=[{key:"ArrowLeft",run:jh,shift:Kh,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:t=>Nh(t,!Wh(t)),shift:t=>tu(t,!Wh(t)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:t=>Rh(t,(e=>Gh(t,e,!Wh(t)))),shift:t=>Fh(t,(e=>Gh(t,e,!Wh(t)))),preventDefault:!0},{key:"ArrowRight",run:Zh,shift:Jh,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:t=>Nh(t,Wh(t)),shift:t=>tu(t,Wh(t)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:t=>Rh(t,(e=>Gh(t,e,Wh(t)))),shift:t=>Fh(t,(e=>Gh(t,e,Wh(t)))),preventDefault:!0},{key:"ArrowUp",run:Xh,shift:nu,preventDefault:!0},{mac:"Cmd-ArrowUp",run:au,shift:cu},{mac:"Ctrl-ArrowUp",run:Yh,shift:ou},{key:"ArrowDown",run:Uh,shift:ru,preventDefault:!0},{mac:"Cmd-ArrowDown",run:lu,shift:hu},{mac:"Ctrl-ArrowDown",run:Lh,shift:su},{key:"PageUp",run:Yh,shift:ou},{key:"PageDown",run:Lh,shift:su},{key:"Home",run:t=>Rh(t,(e=>Gh(t,e,!1))),shift:t=>Fh(t,(e=>Gh(t,e,!1))),preventDefault:!0},{key:"Mod-Home",run:au,shift:cu},{key:"End",run:t=>Rh(t,(e=>Gh(t,e,!0))),shift:t=>Fh(t,(e=>Gh(t,e,!0))),preventDefault:!0},{key:"Mod-End",run:lu,shift:hu},{key:"Enter",run:xu},{key:"Mod-a",run:({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:pu,shift:pu},{key:"Delete",run:gu},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ou},{key:"Mod-Delete",mac:"Alt-Delete",run:t=>mu(t,!0)},{mac:"Mod-Backspace",run:t=>uu(t,(e=>{let n=t.lineBlockAt(e).from;return e>n?n:Math.max(0,e-1)}))},{mac:"Mod-Delete",run:vu}].concat([{key:"Ctrl-b",run:jh,shift:Kh,preventDefault:!0},{key:"Ctrl-f",run:Zh,shift:Jh},{key:"Ctrl-p",run:Xh,shift:nu},{key:"Ctrl-n",run:Uh,shift:ru},{key:"Ctrl-a",run:t=>Rh(t,(e=>Lt.cursor(t.lineBlockAt(e.head).from,1))),shift:t=>Fh(t,(e=>Lt.cursor(t.lineBlockAt(e.head).from)))},{key:"Ctrl-e",run:t=>Rh(t,(e=>Lt.cursor(t.lineBlockAt(e.head).to,-1))),shift:t=>Fh(t,(e=>Lt.cursor(t.lineBlockAt(e.head).to)))},{key:"Ctrl-d",run:gu},{key:"Ctrl-h",run:pu},{key:"Ctrl-k",run:vu},{key:"Ctrl-Alt-h",run:Ou},{key:"Ctrl-o",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:Ot.of(["",""])},range:Lt.cursor(t.from)})));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let n=e.from,r=t.doc.lineAt(n),i=n==r.from?n-1:Tt(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:Tt(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:t.doc.slice(n,o).append(t.doc.slice(i,n))},range:Lt.cursor(o)}}));return!n.changes.empty&&(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Lh}].map((t=>({mac:t.key,run:t.run,shift:t.shift})))),Pu=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t=>Rh(t,(e=>Vh(t.state,e,!Wh(t)))),shift:t=>Fh(t,(e=>Vh(t.state,e,!Wh(t))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:t=>Rh(t,(e=>Vh(t.state,e,Wh(t)))),shift:t=>Fh(t,(e=>Vh(t.state,e,Wh(t))))},{key:"Alt-ArrowUp",run:({state:t,dispatch:e})=>yu(t,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:t,dispatch:e})=>wu(t,e,!1)},{key:"Alt-ArrowDown",run:({state:t,dispatch:e})=>yu(t,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:t,dispatch:e})=>wu(t,e,!0)},{key:"Escape",run:({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=Lt.create([n.main]):n.main.empty||(r=Lt.create([Lt.cursor(n.main.head)])),!!r&&(e(Mh(t,r)),!0)}},{key:"Mod-Enter",run:Su},{key:"Alt-l",mac:"Ctrl-l",run:({state:t,dispatch:e})=>{let n=bu(t).map((({from:e,to:n})=>Lt.range(e,Math.min(n+1,t.doc.length))));return e(t.update({selection:Lt.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:t,dispatch:e})=>{let n=$h(t.selection,(e=>{var n;let r=Dl(t).resolveInner(e.head,1);for(;!(r.from<e.from&&r.to>=e.to||r.to>e.to&&r.from<=e.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return Lt.range(r.to,r.from)}));return e(Mh(t,n)),!0},preventDefault:!0},{key:"Mod-[",run:({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(Cu(t,((e,n)=>{let r=/^\s*/.exec(e.text)[0];if(!r)return;let i=Ke(r,t.tabSize),o=0,s=Gl(t,Math.max(0,i-Ll(t)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:e.from+o,to:e.from+r.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(Cu(t,((e,n)=>{n.push({from:e.from,insert:t.facet(Yl)})})),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new Hl(t,{overrideIndentation:t=>{let e=n[t];return null==e?-1:e}}),i=Cu(t,((e,i,o)=>{let s=Fl(r,e.from);if(null==s)return;/\S/.test(e.text)||(s=0);let a=/^\s*/.exec(e.text)[0],l=Gl(t,s);(a!=l||o.from<e.from+a.length)&&(n[e.from]=s,i.push({from:e.from,to:e.from+a.length,insert:l}))}));return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(bu(e).map((({from:t,to:n})=>(t>0?t--:n<e.doc.length&&n++,{from:t,to:n})))),r=$h(e.selection,(e=>t.moveVertically(e,!0))).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:t,dispatch:e})=>function(t,e,n){let r=!1,i=$h(t.selection,(e=>{let i=Lc(t,e.head,-1)||Lc(t,e.head,1)||e.head>0&&Lc(t,e.head-1,1)||e.head<t.doc.length&&Lc(t,e.head+1,-1);if(!i||!i.end)return e;r=!0;let o=i.start.from==e.head?i.end.to:i.end.from;return n?Lt.range(e.anchor,o):Lt.cursor(o)}));return!!r&&(e(Mh(t,i)),!0)}(t,e,!1)},{key:"Mod-/",run:t=>{let e=sh(t.state);return e.line?rh(t):!!e.block&&oh(t)}},{key:"Alt-A",run:ih}].concat(Qu);function Eu(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?t.setAttribute(r,i):null!=i&&(t[r]=i)}e++}for(;e<arguments.length;e++)Tu(t,arguments[e]);return t}function Tu(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var n=0;n<e.length;n++)Tu(t,e[n])}}const _u="function"==typeof String.prototype.normalize?t=>t.normalize("NFKD"):t=>t;class $u{constructor(t,e,n=0,r=t.length,i,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,r),this.bufferStart=n,this.normalize=i?t=>i(_u(t)):_u,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return At(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=Dt(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=Wt(t);let r=this.normalize(e);for(let t=0,i=n;;t++){let o=r.charCodeAt(t),s=this.match(o,i);if(s)return this.value=s,this;if(t==r.length-1)break;i==n&&t<e.length&&e.charCodeAt(t)==o&&i++}}}match(t,e){let n=null;for(let r=0;r<this.matches.length;r+=2){let i=this.matches[r],o=!1;this.query.charCodeAt(i)==t&&(i==this.query.length-1?n={from:this.matches[r+1],to:e+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==t&&(1==this.query.length?n={from:e,to:e+1}:this.matches.push(1,e)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferPos)&&(n=null),n}}"undefined"!=typeof Symbol&&($u.prototype[Symbol.iterator]=function(){return this});const Mu={from:-1,to:-1,match:/.*/.exec("")},Ru="gm"+(null==/x/.unicode?"":"u");class Au{constructor(t,e,n,r=0,i=t.length){if(this.text=t,this.to=i,this.curLine="",this.done=!1,this.value=Mu,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new ju(t,e,n,r,i);this.re=new RegExp(e,Ru+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=t.iter();let o=t.lineAt(r);this.curLineStart=o.from,this.matchPos=Zu(t,r),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let n=this.curLineStart+e.index,r=n+e[0].length;if(this.matchPos=Zu(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,e)))return this.value={from:n,to:r,match:e},this;t=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),t=0}}}}const Du=new WeakMap;class Wu{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,n){let r=Du.get(t);if(!r||r.from>=n||r.to<=e){let r=new Wu(e,t.sliceString(e,n));return Du.set(t,r),r}if(r.from==e&&r.to==n)return r;let{text:i,from:o}=r;return o>e&&(i=t.sliceString(e,o)+i,o=e),r.to<n&&(i+=t.sliceString(r.to,n)),Du.set(t,new Wu(o,i)),new Wu(e,i.slice(e-o,n-o))}}class ju{constructor(t,e,n,r,i){this.text=t,this.to=i,this.done=!1,this.value=Mu,this.matchPos=Zu(t,r),this.re=new RegExp(e,Ru+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=Wu.get(t,r,this.chunkEnd(r+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let t=this.flat.from+e.index,n=t+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(t,n,e)))return this.value={from:t,to:n,match:e},this.matchPos=Zu(this.text,n+(t==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Wu.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function Zu(t,e){if(e>=t.length)return e;let n,r=t.lineAt(e);for(;e<r.to&&(n=r.text.charCodeAt(e-r.from))>=56320&&n<57344;)e++;return e}function Nu(t){let e=Eu("input",{class:"cm-textfield",name:"line"});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!n)return;let{state:r}=t,i=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=n,c=a?+a.slice(1):0,h=s?+s:i.number;if(s&&l){let t=h/100;o&&(t=t*("-"==o?-1:1)+i.number/r.doc.lines),h=Math.round(r.doc.lines*t)}else s&&o&&(h=h*("-"==o?-1:1)+i.number);let u=r.doc.line(Math.max(1,Math.min(r.doc.lines,h)));t.dispatch({effects:Bu.of(!1),selection:Lt.cursor(u.from+Math.max(0,Math.min(c,u.length))),scrollIntoView:!0}),t.focus()}return{dom:Eu("form",{class:"cm-gotoLine",onkeydown:e=>{27==e.keyCode?(e.preventDefault(),t.dispatch({effects:Bu.of(!1)}),t.focus()):13==e.keyCode&&(e.preventDefault(),n())},onsubmit:t=>{t.preventDefault(),n()}},Eu("label",t.state.phrase("Go to line"),": ",e)," ",Eu("button",{class:"cm-button",type:"submit"},t.state.phrase("go")))}}"undefined"!=typeof Symbol&&(Au.prototype[Symbol.iterator]=ju.prototype[Symbol.iterator]=function(){return this});const Bu=Se.define(),Vu=ie.define({create:()=>!0,update(t,e){for(let n of e.effects)n.is(Bu)&&(t=n.value);return t},provide:t=>oa.from(t,(t=>t?Nu:null))}),Iu=Vo.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Xu={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Uu=Ht.define({combine:t=>De(t,Xu,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})});function qu(t){let e=[Fu,Gu];return t&&e.push(Uu.of(t)),e}const zu=pr.mark({class:"cm-selectionMatch"}),Yu=pr.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Lu(t,e,n,r){return!(0!=n&&t(e.sliceDoc(n-1,n))==$e.Word||r!=e.doc.length&&t(e.sliceDoc(r,r+1))==$e.Word)}const Gu=Nr.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(Uu),{state:n}=t,r=n.selection;if(r.ranges.length>1)return pr.none;let i,o=r.main,s=null;if(o.empty){if(!e.highlightWordAroundCursor)return pr.none;let t=n.wordAt(o.head);if(!t)return pr.none;s=n.charCategorizer(o.head),i=n.sliceDoc(t.from,t.to)}else{let t=o.to-o.from;if(t<e.minSelectionLength||t>200)return pr.none;if(e.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!Lu(s,n,o.from,o.to)||!function(t,e,n,r){return t(e.sliceDoc(n,n+1))==$e.Word&&t(e.sliceDoc(r-1,r))==$e.Word}(s,n,o.from,o.to))return pr.none}else if(i=n.sliceDoc(o.from,o.to).trim(),!i)return pr.none}let a=[];for(let r of t.visibleRanges){let t=new $u(n.doc,i,r.from,r.to);for(;!t.next().done;){let{from:r,to:i}=t.value;if((!s||Lu(s,n,r,i))&&(o.empty&&r<=o.from&&i>=o.to?a.push(Yu.range(r,i)):(r>=o.to||i<=o.from)&&a.push(zu.range(r,i)),a.length>e.maxMatches))return pr.none}}return pr.set(a)}},{decorations:t=>t.decorations}),Fu=Vo.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Hu=Ht.define({combine:t=>De(t,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:t=>new Cf(t)})});class Ku{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||function(t){try{return new RegExp(t,Ru),!0}catch(t){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,((t,e)=>"n"==e?"\n":"r"==e?"\r":"t"==e?"\t":"\\"))}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new sf(this):new ef(this)}getCursor(t,e=0,n){let r=t.doc?t:Ae.create({doc:t});return null==n&&(n=r.doc.length),this.regexp?nf(this,r,e,n):tf(this,r,e,n)}}class Ju{constructor(t){this.spec=t}}function tf(t,e,n,r){return new $u(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:t=>t.toLowerCase(),t.wholeWord?function(t,e){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=t.sliceString(o,Math.min(t.length,r+2))),!(e(rf(i,n-o))==$e.Word&&e(of(i,n-o))==$e.Word||e(of(i,r-o))==$e.Word&&e(rf(i,r-o))==$e.Word))}(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}class ef extends Ju{constructor(t){super(t)}nextMatch(t,e,n){let r=tf(this.spec,t,n,t.doc.length).nextOverlapping();return r.done&&(r=tf(this.spec,t,0,e).nextOverlapping()),r.done?null:r.value}prevMatchInRange(t,e,n){for(let r=n;;){let n=Math.max(e,r-1e4-this.spec.unquoted.length),i=tf(this.spec,t,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==e)return null;r-=1e4}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let n=tf(this.spec,t,0,t.doc.length),r=[];for(;!n.next().done;){if(r.length>=e)return null;r.push(n.value)}return r}highlight(t,e,n,r){let i=tf(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,t.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function nf(t,e,n,r){return new Au(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?(i=e.charCategorizer(e.selection.main.head),(t,e,n)=>!n[0].length||(i(rf(n.input,n.index))!=$e.Word||i(of(n.input,n.index))!=$e.Word)&&(i(of(n.input,n.index+n[0].length))!=$e.Word||i(rf(n.input,n.index+n[0].length))!=$e.Word)):void 0},n,r);var i}function rf(t,e){return t.slice(Tt(t,e,!1),e)}function of(t,e){return t.slice(e,Tt(t,e))}class sf extends Ju{nextMatch(t,e,n){let r=nf(this.spec,t,n,t.doc.length).next();return r.done&&(r=nf(this.spec,t,0,e).next()),r.done?null:r.value}prevMatchInRange(t,e,n){for(let r=1;;r++){let i=Math.max(e,n-1e4*r),o=nf(this.spec,t,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==e||s.from>i+10))return s;if(i==e)return null}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,((e,n)=>"$"==n?"$":"&"==n?t.match[0]:"0"!=n&&+n<t.match.length?t.match[n]:e)))}matchAll(t,e){let n=nf(this.spec,t,0,t.doc.length),r=[];for(;!n.next().done;){if(r.length>=e)return null;r.push(n.value)}return r}highlight(t,e,n,r){let i=nf(this.spec,t,Math.max(0,e-250),Math.min(n+250,t.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}const af=Se.define(),lf=Se.define(),cf=ie.define({create:t=>new hf(wf(t).create(),null),update(t,e){for(let n of e.effects)n.is(af)?t=new hf(n.value.create(),t.panel):n.is(lf)&&(t=new hf(t.query,n.value?yf:null));return t},provide:t=>oa.from(t,(t=>t.panel))});class hf{constructor(t,e){this.query=t,this.panel=e}}const uf=pr.mark({class:"cm-searchMatch"}),ff=pr.mark({class:"cm-searchMatch cm-searchMatch-selected"}),df=Nr.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(cf))}update(t){let e=t.state.field(cf);(e!=t.startState.field(cf)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return pr.none;let{view:n}=this,r=new Ve;for(let e=0,i=n.visibleRanges,o=i.length;e<o;e++){let{from:s,to:a}=i[e];for(;e<o-1&&a>i[e+1].from-500;)a=i[++e].to;t.highlight(n.state,s,a,((t,e)=>{let i=n.state.selection.ranges.some((n=>n.from==t&&n.to==e));r.add(t,e,i?ff:uf)}))}return r.finish()}},{decorations:t=>t.decorations});function pf(t){return e=>{let n=e.state.field(cf,!1);return n&&n.query.spec.valid?t(e,n):xf(e)}}const gf=pf(((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);return!!r&&(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Ef(t,r),userEvent:"select.search"}),!0)})),mf=pf(((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);return!!i&&(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Ef(t,i),userEvent:"select.search"}),!0)})),Of=pf(((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!(!n||!n.length||(t.dispatch({selection:Lt.create(n.map((t=>Lt.range(t.from,t.to)))),userEvent:"select.search.matches"}),0))})),vf=pf(((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,r,r);if(!o)return!1;let s,a,l=[],c=[];if(o.from==r&&o.to==i&&(a=n.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:a}),o=e.nextMatch(n,o.from,o.to),c.push(Vo.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let e=0==l.length||l[0].from>=o.to?0:o.to-o.from-a.length;s={anchor:o.from-e,head:o.to-e},c.push(Ef(t,o))}return t.dispatch({changes:l,selection:s,scrollIntoView:!!s,effects:c,userEvent:"input.replace"}),!0})),bf=pf(((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map((t=>{let{from:n,to:r}=t;return{from:n,to:r,insert:e.getReplacement(t)}}));if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Vo.announce.of(r),userEvent:"input.replace.all"}),!0}));function yf(t){return t.state.facet(Hu).createPanel(t)}function wf(t,e){var n,r,i,o;let s=t.selection.main,a=s.empty||s.to>s.from+100?"":t.sliceDoc(s.from,s.to);if(e&&!a)return e;let l=t.facet(Hu);return new Ku({search:(null!==(n=null==e?void 0:e.literal)&&void 0!==n?n:l.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:null!==(r=null==e?void 0:e.caseSensitive)&&void 0!==r?r:l.caseSensitive,literal:null!==(i=null==e?void 0:e.literal)&&void 0!==i?i:l.literal,wholeWord:null!==(o=null==e?void 0:e.wholeWord)&&void 0!==o?o:l.wholeWord})}const xf=t=>{let e=t.state.field(cf,!1);if(e&&e.panel){let n=ea(t,yf);if(!n)return!1;let r=n.dom.querySelector("[main-field]");if(r&&r!=t.root.activeElement){let n=wf(t.state,e.query.spec);n.valid&&t.dispatch({effects:af.of(n)}),r.focus(),r.select()}}else t.dispatch({effects:[lf.of(!0),e?af.of(wf(t.state,e.query.spec)):Se.appendConfig.of(_f)]});return!0},Sf=t=>{let e=t.state.field(cf,!1);if(!e||!e.panel)return!1;let n=ea(t,yf);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:lf.of(!1)}),!0},kf=[{key:"Mod-f",run:xf,scope:"editor search-panel"},{key:"F3",run:gf,shift:mf,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:gf,shift:mf,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Sf,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let e=new $u(t.doc,t.sliceDoc(r,i));!e.next().done;){if(o.length>1e3)return!1;e.value.from==r&&(s=o.length),o.push(Lt.range(e.value.from,e.value.to))}return e(t.update({selection:Lt.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:t=>{let e=ea(t,Nu);if(!e){let n=[Bu.of(!0)];null==t.state.field(Vu,!1)&&n.push(Se.appendConfig.of([Vu,Iu])),t.dispatch({effects:n}),e=ea(t,Nu)}return e&&e.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some((t=>t.from===t.to)))return(({state:t,dispatch:e})=>{let{selection:n}=t,r=Lt.create(n.ranges.map((e=>t.wordAt(e.head)||Lt.cursor(e.head))),n.mainIndex);return!r.eq(n)&&(e(t.update({selection:r})),!0)})({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=r)))return!1;let i=function(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new $u(t.doc,e,r[r.length-1].to);;){if(i.next(),!i.done){if(n&&r.some((t=>t.from==i.value.from)))continue;if(o){let e=t.wordAt(i.value.from);if(!e||e.from!=i.value.from||e.to!=i.value.to)continue}return i.value}if(n)return null;i=new $u(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),n=!0}}(t,r);return!!i&&(e(t.update({selection:t.selection.addRange(Lt.range(i.from,i.to),!1),effects:Vo.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class Cf{constructor(t){this.view=t;let e=this.query=t.state.field(cf).query.spec;function n(t,e,n){return Eu("button",{class:"cm-button",name:t,onclick:e,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=Eu("input",{value:e.search,placeholder:Qf(t,"Find"),"aria-label":Qf(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Eu("input",{value:e.replace,placeholder:Qf(t,"Replace"),"aria-label":Qf(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Eu("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=Eu("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=Eu("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit}),this.dom=Eu("div",{onkeydown:t=>this.keydown(t),class:"cm-search"},[this.searchField,n("next",(()=>gf(t)),[Qf(t,"next")]),n("prev",(()=>mf(t)),[Qf(t,"previous")]),n("select",(()=>Of(t)),[Qf(t,"all")]),Eu("label",null,[this.caseField,Qf(t,"match case")]),Eu("label",null,[this.reField,Qf(t,"regexp")]),Eu("label",null,[this.wordField,Qf(t,"by word")]),...t.state.readOnly?[]:[Eu("br"),this.replaceField,n("replace",(()=>vf(t)),[Qf(t,"replace")]),n("replaceAll",(()=>bf(t)),[Qf(t,"replace all")])],Eu("button",{name:"close",onclick:()=>Sf(t),"aria-label":Qf(t,"close"),type:"button"},["×"])])}commit(){let t=new Ku({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:af.of(t)}))}keydown(t){var e,n;n=t,Jo(Ho((e=this.view).state),n,e,"search-panel")?t.preventDefault():13==t.keyCode&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?mf:gf)(this.view)):13==t.keyCode&&t.target==this.replaceField&&(t.preventDefault(),vf(this.view))}update(t){for(let e of t.transactions)for(let t of e.effects)t.is(af)&&!t.value.eq(this.query)&&this.setQuery(t.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Hu).top}}function Qf(t,e){return t.state.phrase(e)}const Pf=/[\s\.,:;?!]/;function Ef(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,o=Math.max(r.from,e-30),s=Math.min(i,n+30),a=t.state.sliceDoc(o,s);if(o!=r.from)for(let t=0;t<30;t++)if(!Pf.test(a[t+1])&&Pf.test(a[t])){a=a.slice(t);break}if(s!=i)for(let t=a.length-1;t>a.length-30;t--)if(!Pf.test(a[t-1])&&Pf.test(a[t])){a=a.slice(0,t);break}return Vo.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const Tf=Vo.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),_f=[cf,se.lowest(df),Tf];class $f{constructor(t,e,n){this.state=t,this.pos=e,this.explicit=n,this.abortListeners=[]}tokenBefore(t){let e=Dl(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),r=e.text.slice(n-e.from,this.pos-e.from),i=r.search(Wf(t,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(t,e){"abort"==t&&this.abortListeners&&this.abortListeners.push(e)}}function Mf(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Rf(t){let e=t.map((t=>"string"==typeof t?{label:t}:t)),[n,r]=e.every((t=>/^\w+$/.test(t.label)))?[/\w*$/,/\w+$/]:function(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let t=1;t<r.length;t++)n[r[t]]=!0}let r=Mf(e)+Mf(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(e);return t=>{let i=t.matchBefore(r);return i||t.explicit?{from:i?i.from:t.pos,options:e,validFor:n}:null}}class Af{constructor(t,e,n){this.completion=t,this.source=e,this.match=n}}function Df(t){return t.selection.main.head}function Wf(t,e){var n;let{source:r}=t,i=e&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(n=t.flags)&&void 0!==n?n:t.ignoreCase?"i":""):t}const jf=ye.define();function Zf(t,e){const n=e.completion.apply||e.completion.label;let r=e.source;var i,o,s,a;"string"==typeof n?t.dispatch(Object.assign(Object.assign({},(i=t.state,o=n,s=r.from,a=r.to,Object.assign(Object.assign({},i.changeByRange((t=>{if(t==i.selection.main)return{changes:{from:s,to:a,insert:o},range:Lt.cursor(s+o.length)};let e=a-s;return!t.empty||e&&i.sliceDoc(t.from-e,t.from)!=i.sliceDoc(s,a)?{range:t}:{changes:{from:t.from-e,to:t.from,insert:o},range:Lt.cursor(t.from-e+o.length)}}))),{userEvent:"input.complete"}))),{annotations:jf.of(e.completion)})):n(t,e.completion,r.from,r.to)}const Nf=new WeakMap;function Bf(t){if(!Array.isArray(t))return t;let e=Nf.get(t);return e||Nf.set(t,e=Rf(t)),e}class Vf{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let e=0;e<t.length;){let n=At(t,e),r=Wt(n);this.chars.push(n);let i=t.slice(e,e+r),o=i.toUpperCase();this.folded.push(At(o==i?i.toLowerCase():o,0)),e+=r}this.astral=t.length!=this.chars.length}match(t){if(0==this.pattern.length)return[0];if(t.length<this.pattern.length)return null;let{chars:e,folded:n,any:r,precise:i,byWord:o}=this;if(1==e.length){let r=At(t,0);return r==e[0]?[0,0,Wt(r)]:r==n[0]?[-200,0,Wt(r)]:null}let s=t.indexOf(this.pattern);if(0==s)return[0,0,this.pattern.length];let a=e.length,l=0;if(s<0){for(let i=0,o=Math.min(t.length,200);i<o&&l<a;){let o=At(t,i);o!=e[l]&&o!=n[l]||(r[l++]=i),i+=Wt(o)}if(l<a)return null}let c=0,h=0,u=!1,f=0,d=-1,p=-1,g=/[a-z]/.test(t),m=!0;for(let r=0,l=Math.min(t.length,200),O=0;r<l&&h<a;){let l=At(t,r);s<0&&(c<a&&l==e[c]&&(i[c++]=r),f<a&&(l==e[f]||l==n[f]?(0==f&&(d=r),p=r+1,f++):f=0));let v,b=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(v=Dt(l))!=v.toLowerCase()?1:v!=v.toUpperCase()?2:0;(!r||1==b&&g||0==O&&0!=b)&&(e[h]==l||n[h]==l&&(u=!0)?o[h++]=r:o.length&&(m=!1)),O=b,r+=Wt(l)}return h==a&&0==o[0]&&m?this.result((u?-200:0)-100,o,t):f==a&&0==d?[-200-t.length,0,p]:s>-1?[-700-t.length,s,s+this.pattern.length]:f==a?[-900-t.length,d,p]:h==a?this.result((u?-200:0)-100-700+(m?0:-1100),o,t):2==e.length?null:this.result((r[0]?-700:0)-200-1100,r,t)}result(t,e,n){let r=[t-n.length],i=1;for(let t of e){let e=t+(this.astral?Wt(At(n,t)):1);i>1&&r[i-1]==t?r[i-1]=e:(r[i++]=t,r[i++]=e)}return r}}const If=Ht.define({combine:t=>De(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>n=>Xf(t(n),e(n)),optionClass:(t,e)=>n=>Xf(t(n),e(n)),addToOptions:(t,e)=>t.concat(e)})});function Xf(t,e){return t?e?t+" "+e:t:e}function Uf(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let t=Math.floor(e/n);return{from:t*n,to:(t+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class qf{constructor(t,e){this.view=t,this.stateField=e,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:t=>this.positionInfo(t),key:this},this.space=null,this.currentClass="";let n=t.state.field(e),{options:r,selected:i}=n.open,o=t.state.facet(If);this.optionContent=function(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(t){let e=document.createElement("div");return e.classList.add("cm-completionIcon"),t.type&&e.classList.add(...t.type.split(/\s+/g).map((t=>"cm-completionIcon-"+t))),e.setAttribute("aria-hidden","true"),e},position:20}),e.push({render(t,e,n){let r=document.createElement("span");r.className="cm-completionLabel";let{label:i}=t,o=0;for(let t=1;t<n.length;){let e=n[t++],s=n[t++];e>o&&r.appendChild(document.createTextNode(i.slice(o,e)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(i.slice(e,s))),a.className="cm-completionMatchedText",o=s}return o<i.length&&r.appendChild(document.createTextNode(i.slice(o))),r},position:50},{render(t){if(!t.detail)return null;let e=document.createElement("span");return e.className="cm-completionDetail",e.textContent=t.detail,e},position:80}),e.sort(((t,e)=>t.position-e.position)).map((t=>t.render))}(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=Uf(r.length,i,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",(e=>{for(let n,i=e.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(n=/-(\d+)$/.exec(i.id))&&+n[1]<r.length)return Zf(t,r[+n[1]]),void e.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(t){var e,n,r;let i=t.state.field(this.stateField),o=t.startState.field(this.stateField);this.updateTooltipClass(t.state),i!=o&&(this.updateSel(),(null===(e=i.open)||void 0===e?void 0:e.disabled)!=(null===(n=o.open)||void 0===n?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(null===(r=i.open)||void 0===r?void 0:r.disabled)))}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let t of this.currentClass.split(" "))t&&this.dom.classList.remove(t);for(let t of e.split(" "))t&&this.dom.classList.add(t);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=Uf(e.options.length,e.selected,this.view.state.facet(If).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e.options,t.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(e.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=e.options[e.selected],{info:r}=n;if(!r)return;let i="string"==typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then((e=>{e&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(e)})).catch((t=>Dr(this.view.state,t,"completion info"))):this.addInfoPane(i)}}addInfoPane(t){let e=this.info=document.createElement("div");e.className="cm-tooltip cm-completionInfo",e.appendChild(t),this.dom.appendChild(e),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(t){let e=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),e=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return e&&function(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<n.top?t.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(t.scrollTop+=r.bottom-n.bottom)}(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=t.getBoundingClientRect(),i=this.space;if(!i){let t=this.dom.ownerDocument.defaultView||window;i={left:0,top:0,right:t.innerWidth,bottom:t.innerHeight}}if(r.top>Math.min(i.bottom,e.bottom)-10||r.bottom<Math.max(i.top,e.top)+10)return null;let o,s=this.view.textDirection==Gr.RTL,a=s,l=!1,c="",h="",u=e.left-i.left,f=i.right-e.right;if(a&&u<Math.min(n.width,f)?a=!1:!a&&f<Math.min(n.width,u)&&(a=!0),n.width<=(a?u:f))c=Math.max(i.top,Math.min(r.top,i.bottom-n.height))-e.top+"px",o=Math.min(400,a?u:f)+"px";else{l=!0,o=Math.min(400,(s?e.right:i.right-e.left)-30)+"px";let t=i.bottom-e.bottom;t>=n.height||t>e.top?c=r.bottom-e.top+"px":h=e.bottom-r.top+"px"}return{top:c,bottom:h,maxWidth:o,class:l?s?"left-narrow":"right-narrow":a?"left":"right"}}positionInfo(t){this.info&&(t?(this.info.style.top=t.top,this.info.style.bottom=t.bottom,this.info.style.maxWidth=t.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+t.class):this.info.style.top="-1e6px")}createListBox(t,e,n){const r=document.createElement("ul");r.id=e,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let i=n.from;i<n.to;i++){let{completion:n,match:o}=t[i];const s=r.appendChild(document.createElement("li"));s.id=e+"-"+i,s.setAttribute("role","option");let a=this.optionClass(n);a&&(s.className=a);for(let t of this.optionContent){let e=t(n,this.view.state,o);e&&s.appendChild(e)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function zf(t){return 100*(t.boost||0)+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}class Yf{constructor(t,e,n,r,i,o){this.options=t,this.attrs=e,this.tooltip=n,this.timestamp=r,this.selected=i,this.disabled=o}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new Yf(this.options,Ff(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,n,r,i){let o=function(t,e){let n=[],r=0;for(let i of t)if(i.hasResult())if(!1===i.result.filter){let t=i.result.getMatch;for(let e of i.result.options){let o=[1e9-r++];if(t)for(let n of t(e))o.push(n);n.push(new Af(e,i,o))}}else{let t,r=new Vf(e.sliceDoc(i.from,i.to));for(let e of i.result.options)(t=r.match(e.label))&&(null!=e.boost&&(t[0]+=e.boost),n.push(new Af(e,i,t)))}let i=[],o=null,s=e.facet(If).compareCompletions;for(let t of n.sort(((t,e)=>e.match[0]-t.match[0]||s(t.completion,e.completion))))!o||o.label!=t.completion.label||o.detail!=t.completion.detail||null!=o.type&&null!=t.completion.type&&o.type!=t.completion.type||o.apply!=t.completion.apply?i.push(t):zf(t.completion)>zf(o)&&(i[i.length-1]=t),o=t.completion;return i}(t,e);if(!o.length)return r&&t.some((t=>1==t.state))?new Yf(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let s=e.facet(If).selectOnOpen?0:-1;if(r&&r.selected!=s&&-1!=r.selected){let t=r.options[r.selected].completion;for(let e=0;e<o.length;e++)if(o[e].completion==t){s=e;break}}return new Yf(o,Ff(n,s),{pos:t.reduce(((t,e)=>e.hasResult()?Math.min(t,e.from):t),1e8),create:(a=od,t=>new qf(t,a)),above:i.aboveCursor},r?r.timestamp:Date.now(),s,!1);var a}map(t){return new Yf(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Lf{constructor(t,e,n){this.active=t,this.id=e,this.open=n}static start(){return new Lf(Hf,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(t){let{state:e}=t,n=e.facet(If),r=(n.override||e.languageDataAt("autocomplete",Df(e)).map(Bf)).map((e=>{let r=this.active.find((t=>t.source==e))||new Jf(e,this.active.some((t=>0!=t.state))?1:0);return r.update(t,n)}));r.length==this.active.length&&r.every(((t,e)=>t==this.active[e]))&&(r=this.active);let i=this.open;i&&t.docChanged&&(i=i.map(t.changes)),t.selection||r.some((e=>e.hasResult()&&t.changes.touchesRange(e.from,e.to)))||!function(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;r<e.length&&!e[r].hasResult;)r++;let i=n==t.length,o=r==e.length;if(i||o)return i==o;if(t[n++].result!=e[r++].result)return!1}}(r,this.active)?i=Yf.build(r,e,this.id,i,n):i&&i.disabled&&!r.some((t=>1==t.state))&&(i=null),!i&&r.every((t=>1!=t.state))&&r.some((t=>t.hasResult()))&&(r=r.map((t=>t.hasResult()?new Jf(t.source,0):t)));for(let e of t.effects)e.is(id)&&(i=i&&i.setSelected(e.value,this.id));return r==this.active&&i==this.open?this:new Lf(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Gf}}const Gf={"aria-autocomplete":"list"};function Ff(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Hf=[];function Kf(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class Jf{constructor(t,e,n=-1){this.source=t,this.state=e,this.explicitPos=n}hasResult(){return!1}update(t,e){let n=Kf(t),r=this;n?r=r.handleUserEvent(t,n,e):t.docChanged?r=r.handleChange(t):t.selection&&0!=r.state&&(r=new Jf(r.source,0));for(let e of t.effects)if(e.is(ed))r=new Jf(r.source,1,e.value?Df(t.state):-1);else if(e.is(nd))r=new Jf(r.source,0);else if(e.is(rd))for(let t of e.value)t.source==r.source&&(r=t);return r}handleUserEvent(t,e,n){return"delete"!=e&&n.activateOnTyping?new Jf(this.source,1):this.map(t.changes)}handleChange(t){return t.changes.touchesRange(Df(t.startState))?new Jf(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new Jf(this.source,this.state,t.mapPos(this.explicitPos))}}class td extends Jf{constructor(t,e,n,r,i){super(t,2,e),this.result=n,this.from=r,this.to=i}hasResult(){return!0}handleUserEvent(t,e,n){var r;let i=t.changes.mapPos(this.from),o=t.changes.mapPos(this.to,1),s=Df(t.state);if((this.explicitPos<0?s<=i:s<this.from)||s>o||"delete"==e&&Df(t.startState)==this.from)return new Jf(this.source,"input"==e&&n.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos);return function(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return"function"==typeof t?t(i,n,r,e):Wf(t,!0).test(i)}(this.result.validFor,t.state,i,o)?new td(this.source,l,this.result,i,o):this.result.update&&(a=this.result.update(this.result,i,o,new $f(t.state,s,l>=0)))?new td(this.source,l,a,a.from,null!==(r=a.to)&&void 0!==r?r:Df(t.state)):new Jf(this.source,1,l)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new Jf(this.source,0):this.map(t.changes)}map(t){return t.empty?this:new td(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1))}}const ed=Se.define(),nd=Se.define(),rd=Se.define({map:(t,e)=>t.map((t=>t.map(e)))}),id=Se.define(),od=ie.define({create:()=>Lf.start(),update:(t,e)=>t.update(e),provide:t=>[zs.from(t,(t=>t.tooltip)),Vo.contentAttributes.from(t,(t=>t.attrs))]});function sd(t,e="option"){return n=>{let r=n.state.field(od,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(If).interactionDelay)return!1;let i,o=1;"page"==e&&(i=function(t,e){let n=t.plugin(Xs);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+o*(t?1:-1):t?0:s-1;return a<0?a="page"==e?0:s-1:a>=s&&(a="page"==e?s-1:0),n.dispatch({effects:id.of(a)}),!0}}class ad{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const ld=Nr.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of t.state.field(od).active)1==e.state&&this.startQuery(e)}update(t){let e=t.state.field(od);if(!t.selectionSet&&!t.docChanged&&t.startState.field(od)==e)return;let n=t.transactions.some((t=>(t.selection||t.docChanged)&&!Kf(t)));for(let e=0;e<this.running.length;e++){let r=this.running[e];if(n||r.updates.length+t.transactions.length>50&&Date.now()-r.time>1e3){for(let t of r.context.abortListeners)try{t()}catch(t){Dr(this.view.state,t)}r.context.abortListeners=null,this.running.splice(e--,1)}else r.updates.push(...t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some((t=>1==t.state&&!this.running.some((e=>e.active.source==t.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let e of t.transactions)"input"==Kf(e)?this.composing=2:2==this.composing&&e.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:t}=this.view,e=t.field(od);for(let t of e.active)1!=t.state||this.running.some((e=>e.active.source==t.source))||this.startQuery(t)}startQuery(t){let{state:e}=this.view,n=Df(e),r=new $f(e,n,t.explicitPos==n),i=new ad(t,r);this.running.push(i),Promise.resolve(t.source(r)).then((t=>{i.context.aborted||(i.done=t||null,this.scheduleAccept())}),(t=>{this.view.dispatch({effects:nd.of(null)}),Dr(this.view.state,t)}))}scheduleAccept(){this.running.every((t=>void 0!==t.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(If);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let r=new td(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(t=i.done.to)&&void 0!==t?t:Df(i.updates.length?i.updates[0].startState:this.view.state));for(let t of i.updates)r=r.update(t,n);if(r.hasResult()){e.push(r);continue}}let o=this.view.state.field(od).active.find((t=>t.source==i.active.source));if(o&&1==o.state)if(null==i.done){let t=new Jf(i.active.source,0);for(let e of i.updates)t=t.update(e,n);1!=t.state&&e.push(t)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:rd.of(e)})}},{eventHandlers:{blur(){let t=this.view.state.field(od,!1);t&&t.tooltip&&this.view.state.facet(If).closeOnBlur&&this.view.dispatch({effects:nd.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:ed.of(!1)})),20),this.composing=0}}}),cd=Vo.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class hd{constructor(t,e,n,r){this.field=t,this.line=e,this.from=n,this.to=r}}class ud{constructor(t,e,n){this.field=t,this.from=e,this.to=n}map(t){let e=t.mapPos(this.from,-1,Zt.TrackDel),n=t.mapPos(this.to,1,Zt.TrackDel);return null==e||null==n?null:new ud(this.field,e,n)}}class fd{constructor(t,e){this.lines=t,this.fieldPositions=e}instantiate(t,e){let n=[],r=[e],i=t.doc.lineAt(e),o=/^\s*/.exec(i.text)[0];for(let i of this.lines){if(n.length){let n=o,s=/^\t*/.exec(i)[0].length;for(let e=0;e<s;e++)n+=t.facet(Yl);r.push(e+n.length-s),i=n+i.slice(s)}n.push(i),e+=i.length+1}let s=this.fieldPositions.map((t=>new ud(t.field,r[t.line]+t.from,r[t.line]+t.to)));return{text:n,ranges:s}}static parse(t){let e,n=[],r=[],i=[];for(let o of t.split(/\r\n?|\n/)){for(;e=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let t=e[1]?+e[1]:null,s=e[2]||e[3]||"",a=-1;for(let e=0;e<n.length;e++)(null!=t?n[e].seq==t:s&&n[e].name==s)&&(a=e);if(a<0){let e=0;for(;e<n.length&&(null==t||null!=n[e].seq&&n[e].seq<t);)e++;n.splice(e,0,{seq:t,name:s}),a=e;for(let t of i)t.field>=a&&t.field++}i.push(new hd(a,r.length,e.index,e.index+s.length)),o=o.slice(0,e.index)+s+o.slice(e.index+e[0].length)}for(let t;t=/\\([{}])/.exec(o);){o=o.slice(0,t.index)+t[1]+o.slice(t.index+t[0].length);for(let e of i)e.line==r.length&&e.from>t.index&&(e.from--,e.to--)}r.push(o)}return new fd(r,i)}}let dd=pr.widget({widget:new class extends fr{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),pd=pr.mark({class:"cm-snippetField"});class gd{constructor(t,e){this.ranges=t,this.active=e,this.deco=pr.set(t.map((t=>(t.from==t.to?dd:pd).range(t.from,t.to))))}map(t){let e=[];for(let n of this.ranges){let r=n.map(t);if(!r)return null;e.push(r)}return new gd(e,this.active)}selectionInsideField(t){return t.ranges.every((t=>this.ranges.some((e=>e.field==this.active&&e.from<=t.from&&e.to>=t.to))))}}const md=Se.define({map:(t,e)=>t&&t.map(e)}),Od=Se.define(),vd=ie.define({create:()=>null,update(t,e){for(let n of e.effects){if(n.is(md))return n.value;if(n.is(Od)&&t)return new gd(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>Vo.decorations.from(t,(t=>t?t.deco:pr.none))});function bd(t,e){return Lt.create(t.filter((t=>t.field==e)).map((t=>Lt.range(t.from,t.to))))}function yd(t){let e=fd.parse(t);return(t,n,r,i)=>{let{text:o,ranges:s}=e.instantiate(t.state,r),a={changes:{from:r,to:i,insert:Ot.of(o)},scrollIntoView:!0};if(s.length&&(a.selection=bd(s,0)),s.length>1){let e=new gd(s,0),n=a.effects=[md.of(e)];void 0===t.state.field(vd,!1)&&n.push(Se.appendConfig.of([vd,kd,Qd,cd]))}t.dispatch(t.state.update(a))}}function wd(t){return({state:e,dispatch:n})=>{let r=e.field(vd,!1);if(!r||t<0&&0==r.active)return!1;let i=r.active+t,o=t>0&&!r.ranges.some((e=>e.field==i+t));return n(e.update({selection:bd(r.ranges,i),effects:md.of(o?null:new gd(r.ranges,i))})),!0}}const xd=[{key:"Tab",run:wd(1),shift:wd(-1)},{key:"Escape",run:({state:t,dispatch:e})=>!!t.field(vd,!1)&&(e(t.update({effects:md.of(null)})),!0)}],Sd=Ht.define({combine:t=>t.length?t[0]:xd}),kd=se.highest(Go.compute([Sd],(t=>t.facet(Sd))));function Cd(t,e){return Object.assign(Object.assign({},e),{apply:yd(t)})}const Qd=Vo.domEventHandlers({mousedown(t,e){let n,r=e.state.field(vd,!1);if(!r||null==(n=e.posAtCoords({x:t.clientX,y:t.clientY})))return!1;let i=r.ranges.find((t=>t.from<=n&&t.to>=n));return!(!i||i.field==r.active||(e.dispatch({selection:bd(r.ranges,i.field),effects:md.of(r.ranges.some((t=>t.field>i.field))?new gd(r.ranges,i.field):null)}),0))}}),Pd={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ed=Se.define({map(t,e){let n=e.mapPos(t,-1,Zt.TrackAfter);return null==n?void 0:n}}),Td=Se.define({map:(t,e)=>e.mapPos(t)}),_d=new class extends We{};_d.startSide=1,_d.endSide=-1;const $d=ie.define({create:()=>Be.empty,update(t,e){if(e.selection){let n=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;n!=e.changes.mapPos(r,-1)&&(t=Be.empty)}t=t.map(e.changes);for(let n of e.effects)n.is(Ed)?t=t.update({add:[_d.range(n.value,n.value+1)]}):n.is(Td)&&(t=t.update({filter:t=>t!=n.value}));return t}}),Md="()[]{}<>";function Rd(t){for(let e=0;e<Md.length;e+=2)if(Md.charCodeAt(e)==t)return Md.charAt(e+1);return Dt(t<128?t:t+1)}function Ad(t,e){return t.languageDataAt("closeBrackets",e)[0]||Pd}const Dd="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Wd=Vo.inputHandler.of(((t,e,n,r)=>{if((Dd?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||2==r.length&&1==Wt(At(r,0))||e!=i.from||n!=i.to)return!1;let o=function(t,e){let n=Ad(t,t.selection.main.head),r=n.brackets||Pd.brackets;for(let i of r){let o=Rd(At(i,0));if(e==i)return o==i?Id(t,i,r.indexOf(i+i+i)>-1,n):Bd(t,i,o,n.before||Pd.before);if(e==o&&Zd(t,t.selection.main.from))return Vd(t,0,o)}return null}(t.state,r);return!!o&&(t.dispatch(o),!0)})),jd=[{key:"Backspace",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Ad(t,t.selection.main.head).brackets||Pd.brackets,r=null,i=t.changeByRange((e=>{if(e.empty){let r=function(t,e){let n=t.sliceString(e-2,e);return Wt(At(n,0))==n.length?n:n.slice(1)}(t.doc,e.head);for(let i of n)if(i==r&&Nd(t.doc,e.head)==Rd(At(i,0)))return{changes:{from:e.head-i.length,to:e.head+i.length},range:Lt.cursor(e.head-i.length)}}return{range:r=e}}));return r||e(t.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!r}}];function Zd(t,e){let n=!1;return t.field($d).between(0,t.doc.length,(t=>{t==e&&(n=!0)})),n}function Nd(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Wt(At(n,0)))}function Bd(t,e,n,r){let i=null,o=t.changeByRange((o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Ed.of(o.to+e.length),range:Lt.range(o.anchor+e.length,o.head+e.length)};let s=Nd(t.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:e+n,from:o.head},effects:Ed.of(o.head+e.length),range:Lt.cursor(o.head+e.length)}:{range:i=o}}));return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Vd(t,e,n){let r=null,i=t.selection.ranges.map((e=>e.empty&&Nd(t.doc,e.head)==n?Lt.cursor(e.head+n.length):r=e));return r?null:t.update({selection:Lt.create(i,t.selection.mainIndex),scrollIntoView:!0,effects:t.selection.ranges.map((({from:t})=>Td.of(t)))})}function Id(t,e,n,r){let i=r.stringPrefixes||Pd.stringPrefixes,o=null,s=t.changeByRange((r=>{if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:e,from:r.to}],effects:Ed.of(r.to+e.length),range:Lt.range(r.anchor+e.length,r.head+e.length)};let s,a=r.head,l=Nd(t.doc,a);if(l==e){if(Xd(t,a))return{changes:{insert:e+e,from:a},effects:Ed.of(a+e.length),range:Lt.cursor(a+e.length)};if(Zd(t,a)){let r=n&&t.sliceDoc(a,a+3*e.length)==e+e+e;return{range:Lt.cursor(a+e.length*(r?3:1)),effects:Td.of(a)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(s=Ud(t,a-2*e.length,i))>-1&&Xd(t,s))return{changes:{insert:e+e+e+e,from:a},effects:Ed.of(a+e.length),range:Lt.cursor(a+e.length)};if(t.charCategorizer(a)(l)!=$e.Word&&Ud(t,a,i)>-1&&!function(t,e,n,r){let i=Dl(t).resolveInner(e,-1),o=r.reduce(((t,e)=>Math.max(t,e.length)),0);for(let s=0;s<5;s++){let s=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),a=s.indexOf(n);if(!a||a>-1&&r.indexOf(s.slice(0,a))>-1){let e=i.firstChild;for(;e&&e.from==i.from&&e.to-e.from>n.length+a;){if(t.sliceDoc(e.to-n.length,e.to)==n)return!1;e=e.firstChild}return!0}let l=i.to==e&&i.parent;if(!l)break;i=l}return!1}(t,a,e,i))return{changes:{insert:e+e,from:a},effects:Ed.of(a+e.length),range:Lt.cursor(a+e.length)}}return{range:o=r}}));return o?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Xd(t,e){let n=Dl(t).resolveInner(e+1);return n.parent&&n.from==e}function Ud(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=$e.Word)return e;for(let i of n){let n=e-i.length;if(t.sliceDoc(n,e)==i&&r(t.sliceDoc(n-1,n))!=$e.Word)return n}return-1}function qd(t={}){return[od,If.of(t),ld,Yd,cd]}const zd=[{key:"Ctrl-Space",run:t=>!!t.state.field(od,!1)&&(t.dispatch({effects:ed.of(!0)}),!0)},{key:"Escape",run:t=>{let e=t.state.field(od,!1);return!(!e||!e.active.some((t=>0!=t.state))||(t.dispatch({effects:nd.of(null)}),0))}},{key:"ArrowDown",run:sd(!0)},{key:"ArrowUp",run:sd(!1)},{key:"PageDown",run:sd(!0,"page")},{key:"PageUp",run:sd(!1,"page")},{key:"Enter",run:t=>{let e=t.state.field(od,!1);return!(t.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<t.state.facet(If).interactionDelay||(e.open.disabled||Zf(t,e.open.options[e.open.selected]),0))}}],Yd=se.highest(Go.computeN([If],(t=>t.facet(If).defaultKeymap?[zd]:[])));class Ld{constructor(t,e,n){this.from=t,this.to=e,this.diagnostic=n}}class Gd{constructor(t,e,n){this.diagnostics=t,this.panel=e,this.selected=n}static init(t,e,n){let r=t,i=n.facet(cp).markerFilter;i&&(r=i(r));let o=pr.set(r.map((t=>t.from==t.to||t.from==t.to-1&&n.doc.lineAt(t.from).to==t.from?pr.widget({widget:new fp(t),diagnostic:t}).range(t.from):pr.mark({attributes:{class:"cm-lintRange cm-lintRange-"+t.severity},diagnostic:t}).range(t.from,t.to))),!0);return new Gd(o,e,Fd(o))}}function Fd(t,e=null,n=0){let r=null;return t.between(n,1e9,((t,n,{spec:i})=>{if(!e||i.diagnostic==e)return r=new Ld(t,n,i.diagnostic),!1})),r}function Hd(t,e){return!(!t.effects.some((t=>t.is(Jd)))&&!t.changes.touchesRange(e.pos))}function Kd(t,e){return t.field(np,!1)?e:e.concat(Se.appendConfig.of([np,Vo.decorations.compute([np],(t=>{let{selected:e,panel:n}=t.field(np);return e&&n&&e.from!=e.to?pr.set([rp.range(e.from,e.to)]):pr.none})),Ks(ip,{hideOn:Hd}),mp]))}const Jd=Se.define(),tp=Se.define(),ep=Se.define(),np=ie.define({create:()=>new Gd(pr.none,null,null),update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),r=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);r=Fd(n,t.selected.diagnostic,i)||Fd(n,null,i)}t=new Gd(n,t.panel,r)}for(let n of e.effects)n.is(Jd)?t=Gd.init(n.value,t.panel,e.state):n.is(tp)?t=new Gd(t.diagnostics,n.value?pp.open:null,t.selected):n.is(ep)&&(t=new Gd(t.diagnostics,t.panel,n.value));return t},provide:t=>[oa.from(t,(t=>t.panel)),Vo.decorations.from(t,(t=>t.diagnostics))]}),rp=pr.mark({class:"cm-lintRange cm-lintRange-active"});function ip(t,e,n){let{diagnostics:r}=t.state.field(np),i=[],o=2e8,s=0;r.between(e-(n<0?1:0),e+(n>0?1:0),((t,r,{spec:a})=>{e>=t&&e<=r&&(t==r||(e>t||n>0)&&(e<r||n<0))&&(i.push(a.diagnostic),o=Math.min(t,o),s=Math.max(r,s))}));let a=t.state.facet(cp).tooltipFilter;return a&&(i=a(i)),i.length?{pos:o,end:s,above:t.state.doc.lineAt(o).to<s,create:()=>({dom:op(t,i)})}:null}function op(t,e){return Eu("ul",{class:"cm-tooltip-lint"},e.map((e=>up(t,e,!1))))}const sp=t=>{let e=t.state.field(np,!1);return!(!e||!e.panel||(t.dispatch({effects:tp.of(!1)}),0))},ap=[{key:"Mod-Shift-m",run:t=>{let e=t.state.field(np,!1);e&&e.panel||t.dispatch({effects:Kd(t.state,[tp.of(!0)])});let n=ea(t,pp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:t=>{let e=t.state.field(np,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!(!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)||(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),0))}}],lp=Nr.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(cp);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:t}=this.view,{sources:e}=t.facet(cp);Promise.all(e.map((t=>Promise.resolve(t(this.view))))).then((e=>{let n=e.reduce(((t,e)=>t.concat(e)));this.view.state.doc==t.doc&&this.view.dispatch(function(t,e){return{effects:Kd(t,[Jd.of(e)])}}(this.view.state,n))}),(t=>{Dr(this.view.state,t)}))}}update(t){let e=t.state.facet(cp);(t.docChanged||e!=t.startState.facet(cp))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),cp=Ht.define({combine:t=>Object.assign({sources:t.map((t=>t.source))},De(t.map((t=>t.config)),{delay:750,markerFilter:null,tooltipFilter:null})),enables:lp});function hp(t){let e=[];if(t)t:for(let{name:n}of t){for(let t=0;t<n.length;t++){let r=n[t];if(/[a-zA-Z]/.test(r)&&!e.some((t=>t.toLowerCase()==r.toLowerCase()))){e.push(r);continue t}}e.push("")}return e}function up(t,e,n){var r;let i=n?hp(e.actions):[];return Eu("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Eu("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),null===(r=e.actions)||void 0===r?void 0:r.map(((n,r)=>{let o=r=>{r.preventDefault();let i=Fd(t.state.field(np).diagnostics,e);i&&n.apply(t,i.from,i.to)},{name:s}=n,a=i[r]?s.indexOf(i[r]):-1,l=a<0?s:[s.slice(0,a),Eu("u",s.slice(a,a+1)),s.slice(a+1)];return Eu("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":` Action: ${s}${a<0?"":` (access key "${i[r]})"`}.`},l)})),e.source&&Eu("div",{class:"cm-diagnosticSource"},e.source))}class fp extends fr{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return Eu("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class dp{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=up(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class pp{constructor(t){this.view=t,this.items=[],this.list=Eu("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e=>{if(27==e.keyCode)sp(this.view),this.view.focus();else if(38==e.keyCode||33==e.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==e.keyCode||34==e.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==e.keyCode)this.moveSelection(0);else if(35==e.keyCode)this.moveSelection(this.items.length-1);else if(13==e.keyCode)this.view.focus();else{if(!(e.keyCode>=65&&e.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=hp(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==e.keyCode){let e=Fd(this.view.state.field(np).diagnostics,n);e&&n.actions[i].apply(t,e.from,e.to)}}}e.preventDefault()},onclick:t=>{for(let e=0;e<this.items.length;e++)this.items[e].dom.contains(t.target)&&this.moveSelection(e)}}),this.dom=Eu("div",{class:"cm-panel-lint"},this.list,Eu("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>sp(this.view)},"×")),this.update()}get selectedIndex(){let t=this.view.state.field(np).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(np),n=0,r=!1,i=null;for(t.between(0,this.view.state.doc.length,((t,o,{spec:s})=>{let a,l=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==s.diagnostic){l=t;break}l<0?(a=new dp(this.view,s.diagnostic),this.items.splice(n,0,a),r=!0):(a=this.items[l],l>n&&(this.items.splice(n,l-n),r=!0)),e&&a.diagnostic==e.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new dp(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:t,panel:e})=>{t.top<e.top?this.list.scrollTop-=e.top-t.top:t.bottom>e.bottom&&(this.list.scrollTop+=t.bottom-e.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let t=this.list.firstChild;function e(){let e=t;t=e.nextSibling,e.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)e();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=Fd(this.view.state.field(np).diagnostics,this.items[t].diagnostic);e&&this.view.dispatch({selection:{anchor:e.from,head:e.to},scrollIntoView:!0,effects:ep.of(e)})}static open(t){return new pp(t)}}function gp(t){return function(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const mp=Vo.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:gp("#d11")},".cm-lintRange-warning":{backgroundImage:gp("orange")},".cm-lintRange-info":{backgroundImage:gp("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),Op=(()=>[ka(),Pa,Qs(),ph(),Ec(),cs(),[Os,vs],Ae.allowMultipleSelections.of(!0),Ae.transactionFilter.of((t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return t;let o=n.sliceString(i.from,r);if(!e.some((t=>t.test(o))))return t;let{state:s}=t,a=-1,l=[];for(let{head:t}of s.selection.ranges){let e=s.doc.lineAt(t);if(e.from==a)continue;a=e.from;let n=Fl(s,e.from);if(null==n)continue;let r=/^\s*/.exec(e.text)[0],i=Gl(s,n);r!=i&&l.push({from:e.from,to:e.from+r.length,insert:i})}return l.length?[t,{changes:l,sequential:!0}]:t})),Ac(jc,{fallback:!0}),zc(),[Wd,$d],qd(),As(),js(),$s,qu(),Go.of([...jd,...Pu,...kf,..._h,...wc,...zd,...ap])])();class vp{constructor(t,e,n,r,i,o,s,a,l,c=0,h){this.p=t,this.stack=e,this.state=n,this.reducePos=r,this.pos=i,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=h}toString(){return`[${this.stack.filter(((t,e)=>e%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,n=0){let r=t.parser.context;return new vp(t,[],e,n,n,0,[],0,r?new bp(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){let e=t>>19,n=65535&t,{parser:r}=this.p,i=r.dynamicPrecedence(n);if(i&&(this.score+=i),0==e)return this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.reduceContext(n,this.reducePos);let o=this.stack.length-3*(e-1)-(262144&t?6:0),s=this.stack[o-2],a=this.stack[o-1],l=this.bufferBase+this.buffer.length-a;if(n<r.minRepeatTerm||131072&t){let t=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,s,t,l+4,!0)}if(262144&t)this.state=this.stack[o];else{let t=this.stack[o-3];this.state=r.getGoto(t,n,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(n,s)}storeNode(t,e,n,r=4,i=!1){if(0==t&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let t=this,r=this.buffer.length;if(0==r&&t.parent&&(r=t.bufferBase-t.parent.bufferBase,t=t.parent),r>0&&0==t.buffer[r-4]&&t.buffer[r-1]>-1){if(e==n)return;if(t.buffer[r-2]>=e)return void(t.buffer[r-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4])for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4);this.buffer[i]=t,this.buffer[i+1]=e,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(t,e,n,r)}shift(t,e,n){let r=this.pos;if(131072&t)this.pushState(65535&t,this.pos);else if(0==(262144&t)){let i=t,{parser:o}=this.p;(n>this.pos||e<=o.maxNode)&&(this.pos=n,o.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),this.shiftContext(e,r),e<=o.maxNode&&this.buffer.push(e,r,n,4)}else this.pos=n,this.shiftContext(e,r),e<=this.p.parser.maxNode&&this.buffer.push(e,r,n,4)}apply(t,e,n){65536&t?this.reduce(t):this.shift(t,e,n)}useNode(t,e){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=t)&&(this.p.reused.push(t),n++);let r=this.pos;this.reducePos=this.pos=r+t.length,this.pushState(e,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let n=t.buffer.slice(e),r=t.bufferBase+e;for(;t&&r==t.bufferBase;)t=t.parent;return new vp(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let n=t<=this.p.parser.maxNode;n&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,n?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new wp(this);;){let n=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(0==n)return!1;if(0==(65536&n))return!0;e.reduce(n)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>8||this.stack.length>=120){let n=[];for(let r,i=0;i<e.length;i+=2)(r=e[i+1])!=this.state&&this.p.parser.hasAction(r,t)&&n.push(e[i],r);if(this.stack.length<120)for(let t=0;n.length<8&&t<e.length;t+=2){let r=e[t+1];n.some(((t,e)=>1&e&&t==r))||n.push(e[t],r)}e=n}let n=[];for(let t=0;t<e.length&&n.length<4;t+=2){let r=e[t+1];if(r==this.state)continue;let i=this.split();i.pushState(r,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(e[t],this.pos),i.score-=200,n.push(i)}return n}forceReduce(){let t=this.p.parser.stateSlot(this.state,5);if(0==(65536&t))return!1;let{parser:e}=this.p;if(!e.validAction(this.state,t)){let n=t>>19,r=65535&t,i=this.stack.length-3*n;if(i<0||e.getGoto(this.stack[i],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:t}=this.p;return 65535==t.data[t.stateSlot(this.state,1)]&&!t.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||-3!=this.buffer[t])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||-4!=this.buffer[t])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new bp(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class bp{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}var yp;!function(t){t[t.Insert=200]="Insert",t[t.Delete=190]="Delete",t[t.Reduce=100]="Reduce",t[t.MaxNext=4]="MaxNext",t[t.MaxInsertStackDepth=300]="MaxInsertStackDepth",t[t.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(yp||(yp={}));class wp{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=65535&t,n=t>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=r}}class xp{constructor(t,e,n){this.stack=t,this.pos=e,this.index=n,this.buffer=t.buffer,0==this.index&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new xp(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;null!=t&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new xp(this.stack,this.pos,this.index)}}class Sp{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const kp=new Sp;class Cp{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=kp,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let n=this.range,r=this.rangeIndex,i=this.pos+t;for(;i<n.from;){if(!r)return null;let t=this.ranges[--r];i-=n.from-t.to,n=t}for(;e<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;let t=this.ranges[++r];i+=t.from-n.to,n=t}return i}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e,n,r=this.chunkOff+t;if(r>=0&&r<this.chunk.length)e=this.pos+t,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(t,1);if(null==r)return-1;if(e=r,e>=this.chunk2Pos&&e<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(e-this.chunk2Pos);else{let t=this.rangeIndex,r=this.range;for(;r.to<=e;)r=this.ranges[++t];this.chunk2=this.input.chunk(this.chunk2Pos=e),e+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-e)),n=this.chunk2.charCodeAt(0)}}return e>=this.token.lookAhead&&(this.token.lookAhead=e+1),n}acceptToken(t,e=0){let n=e?this.resolveOffset(e,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=kp,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let n="";for(let r of this.ranges){if(r.from>=e)break;r.to>t&&(n+=this.input.read(Math.max(r.from,t),Math.min(r.to,e)))}return n}}class Qp{constructor(t,e){this.data=t,this.id=e}token(t,e){!function(t,e,n,r){let i=0,o=1<<r,{parser:s}=n.p,{dialect:a}=s;t:for(;0!=(o&t[i]);){let n=t[i+1];for(let r=i+3;r<n;r+=2)if((t[r+1]&o)>0){let n=t[r];if(a.allows(n)&&(-1==e.token.value||e.token.value==n||s.overrides(n,e.token.value))){e.acceptToken(n);break}}let r=e.next,l=0,c=t[i+2];if(!(e.next<0&&c>l&&65535==t[n+3*c-3]&&65535==t[n+3*c-3])){for(;l<c;){let o=l+c>>1,s=n+o+(o<<1),a=t[s],h=t[s+1]||65536;if(r<a)c=o;else{if(!(r>=h)){i=t[s+2],e.advance();continue t}l=o+1}}break}i=t[n+3*c-1]}}(this.data,t,e,this.id)}}Qp.prototype.contextual=Qp.prototype.fallback=Qp.prototype.extend=!1;class Pp{constructor(t,e={}){this.token=t,this.contextual=!!e.contextual,this.fallback=!!e.fallback,this.extend=!!e.extend}}function Ep(t,e=Uint16Array){if("string"!=typeof t)return t;let n=null;for(let r=0,i=0;r<t.length;){let o=0;for(;;){let e=t.charCodeAt(r++),n=!1;if(126==e){o=65535;break}e>=92&&e--,e>=34&&e--;let i=e-32;if(i>=46&&(i-=46,n=!0),o+=i,n)break;o*=46}n?n[i++]=o:n=new e(o)}return n}const Tp="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let _p=null;var $p,Mp;function Rp(t,e,n){let r=t.cursor(ja.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}!function(t){t[t.Margin=25]="Margin"}($p||($p={}));class Ap{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?Rp(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?Rp(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let n=this.trees[e],r=this.index[e];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],o=this.start[e]+n.positions[r];if(o>t)return this.nextStart=o,null;if(i instanceof Za){if(o==t){if(o<this.safeFrom)return null;let t=o+i.length;if(t<=this.safeTo){let e=i.prop($a.lookAhead);if(!e||t+e<this.fragment.to)return i}}this.index[e]++,o+i.length>=Math.max(this.safeFrom,t)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[e]++,this.nextStart=o+i.length}}}class Dp{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map((t=>new Sp))}getActions(t){let e=0,n=null,{parser:r}=t.p,{tokenizers:i}=r,o=r.stateSlot(t.state,3),s=t.curContext?t.curContext.hash:0,a=0;for(let r=0;r<i.length;r++){if(0==(1<<r&o))continue;let l=i[r],c=this.tokens[r];if((!n||l.fallback)&&((l.contextual||c.start!=t.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,l,t),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let r=e;if(c.extended>-1&&(e=this.addActions(t,c.extended,c.end,e)),e=this.addActions(t,c.value,c.end,e),!l.extend&&(n=c,e>r))break}}for(;this.actions.length>e;)this.actions.pop();return a&&t.setLookAhead(a),n||t.pos!=this.stream.end||(n=new Sp,n.value=t.p.parser.eofTerm,n.start=n.end=t.pos,e=this.addActions(t,n.value,n.end,e)),this.mainToken=n,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new Sp,{pos:n,p:r}=t;return e.start=n,e.end=Math.min(n+1,r.stream.end),e.value=n==r.stream.end?r.parser.eofTerm:0,e}updateCachedToken(t,e,n){let r=this.stream.clipPos(n.pos);if(e.token(this.stream.reset(r,t),n),t.value>-1){let{parser:e}=n.p;for(let r=0;r<e.specialized.length;r++)if(e.specialized[r]==t.value){let i=e.specializers[r](this.stream.read(t.start,t.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?t.value=i>>1:t.extended=i>>1;break}}}else t.value=0,t.end=this.stream.clipPos(r+1)}putAction(t,e,n,r){for(let e=0;e<r;e+=3)if(this.actions[e]==t)return r;return this.actions[r++]=t,this.actions[r++]=e,this.actions[r++]=n,r}addActions(t,e,n,r){let{state:i}=t,{parser:o}=t.p,{data:s}=o;for(let t=0;t<2;t++)for(let a=o.stateSlot(i,t?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==r&&2==s[a+1]&&(r=this.putAction(Vp(s,a+2),e,n,r));break}a=Vp(s,a+2)}s[a]==e&&(r=this.putAction(Vp(s,a+1),e,n,r))}return r}}!function(t){t[t.Distance=5]="Distance",t[t.MaxRemainingPerStep=3]="MaxRemainingPerStep",t[t.MinBufferLengthPrune=500]="MinBufferLengthPrune",t[t.ForceReduceLimit=10]="ForceReduceLimit",t[t.CutDepth=15e3]="CutDepth",t[t.CutTo=9e3]="CutTo"}(Mp||(Mp={}));class Wp{constructor(t,e,n,r){this.parser=t,this.input=e,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new Cp(e,r),this.tokens=new Dp(t,this.stream),this.topTerm=t.top[1];let{from:i}=r[0];this.stacks=[vp.start(this,t.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*t.bufferLength?new Ap(n,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t,e,n=this.stacks,r=this.minStackPos,i=this.stacks=[];for(let o=0;o<n.length;o++){let s=n[o];for(;;){if(this.tokens.mainToken=null,s.pos>r)i.push(s);else{if(this.advanceStack(s,i,n))continue;{t||(t=[],e=[]),t.push(s);let n=this.tokens.getMainToken(s);e.push(n.value,n.end)}}break}}if(!i.length){let e=t&&function(t){let e=null;for(let n of t){let t=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=t&&n.pos>t)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}(t);if(e)return this.stackToTree(e);if(this.parser.strict)throw Tp&&t&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&t){let n=null!=this.stoppedAt&&t[0].pos>this.stoppedAt?t[0]:this.runRecovery(t,e,i);if(n)return this.stackToTree(n.forceAll())}if(this.recovering){let t=1==this.recovering?1:3*this.recovering;if(i.length>t)for(i.sort(((t,e)=>e.score-t.score));i.length>t;)i.pop();i.some((t=>t.reducePos>r))&&this.recovering--}else if(i.length>1)t:for(let t=0;t<i.length-1;t++){let e=i[t];for(let n=t+1;n<i.length;n++){let r=i[n];if(e.sameState(r)||e.buffer.length>500&&r.buffer.length>500){if(!((e.score-r.score||e.buffer.length-r.buffer.length)>0)){i.splice(t--,1);continue t}i.splice(n--,1)}}}this.minStackPos=i[0].pos;for(let t=1;t<i.length;t++)i[t].pos<this.minStackPos&&(this.minStackPos=i[t].pos);return null}stopAt(t){if(null!=this.stoppedAt&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,n){let r=t.pos,{parser:i}=this,o=Tp?this.stackID(t)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let e=t.curContext&&t.curContext.tracker.strict,n=e?t.curContext.hash:0;for(let s=this.fragments.nodeAt(r);s;){let r=this.parser.nodeSet.types[s.type.id]==s.type?i.getGoto(t.state,s.type.id):-1;if(r>-1&&s.length&&(!e||(s.prop($a.contextHash)||0)==n))return t.useNode(s,r),Tp&&console.log(o+this.stackID(t)+` (via reuse of ${i.getName(s.type.id)})`),!0;if(!(s instanceof Za)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof Za&&0==s.positions[0]))break;s=a}}let s=i.stateSlot(t.state,4);if(s>0)return t.reduce(s),Tp&&console.log(o+this.stackID(t)+` (via always-reduce ${i.getName(65535&s)})`),!0;if(t.stack.length>=15e3)for(;t.stack.length>9e3&&t.forceReduce(););let a=this.tokens.getActions(t);for(let s=0;s<a.length;){let l=a[s++],c=a[s++],h=a[s++],u=s==a.length||!n,f=u?t:t.split();if(f.apply(l,c,h),Tp&&console.log(o+this.stackID(f)+` (via ${0==(65536&l)?"shift":`reduce of ${i.getName(65535&l)}`} for ${i.getName(c)} @ ${r}${f==t?"":", split"})`),u)return!0;f.pos>r?e.push(f):n.push(f)}return!1}advanceFully(t,e){let n=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>n)return jp(t,e),!0}}runRecovery(t,e,n){let r=null,i=!1;for(let o=0;o<t.length;o++){let s=t[o],a=e[o<<1],l=e[1+(o<<1)],c=Tp?this.stackID(s)+" -> ":"";if(s.deadEnd){if(i)continue;if(i=!0,s.restart(),Tp&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))continue}let h=s.split(),u=c;for(let t=0;h.forceReduce()&&t<10&&(Tp&&console.log(u+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,n));t++)Tp&&(u=this.stackID(h)+" -> ");for(let t of s.recoverByInsert(a))Tp&&console.log(c+this.stackID(t)+" (via recover-insert)"),this.advanceFully(t,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),Tp&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),jp(s,n)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(t){return t.close(),Za.build({buffer:xp.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(_p||(_p=new WeakMap)).get(t);return e||_p.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function jp(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t))return void(e[n].score<t.score&&(e[n]=t))}e.push(t)}class Zp{constructor(t,e,n){this.source=t,this.flags=e,this.disabled=n}allows(t){return!this.disabled||0==this.disabled[t]}}const Np=t=>t;class Bp extends nl{constructor(t){if(super(),this.wrappers=[],14!=t.version)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (14)`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let n=0;n<t.repeatNodeCount;n++)e.push("");let n=Object.keys(t.topRules).map((e=>t.topRules[e][1])),r=[];for(let t=0;t<e.length;t++)r.push([]);function i(t,e,n){r[t].push([e,e.deserialize(String(n))])}if(t.nodeProps)for(let e of t.nodeProps){let t=e[0];"string"==typeof t&&(t=$a[t]);for(let n=1;n<e.length;){let r=e[n++];if(r>=0)i(r,t,e[n++]);else{let o=e[n+-r];for(let s=-r;s>0;s--)i(e[n++],t,o);n++}}}this.nodeSet=new Aa(e.map(((e,i)=>Ra.define({name:i>=this.minRepeatTerm?void 0:e,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:t.skippedNodes&&t.skippedNodes.indexOf(i)>-1})))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=Ea;let o=Ep(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let t=0;t<this.specializerSpecs.length;t++)this.specialized[t]=this.specializerSpecs[t].term;this.specializers=this.specializerSpecs.map(Xp),this.states=Ep(t.states,Uint32Array),this.data=Ep(t.stateData),this.goto=Ep(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map((t=>"number"==typeof t?new Qp(o,t):t)),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,n){let r=new Wp(this,t,e,n);for(let i of this.wrappers)r=i(r,t,e,n);return r}getGoto(t,e,n=!1){let r=this.goto;if(e>=r[0])return-1;for(let i=r[e+1];;){let e=r[i++],o=1&e,s=r[i++];if(o&&n)return s;for(let n=i+(e>>1);i<n;i++)if(r[i]==t)return s;if(o)return-1}}hasAction(t,e){let n=this.data;for(let r=0;r<2;r++)for(let i,o=this.stateSlot(t,r?2:1);;o+=3){if(65535==(i=n[o])){if(1!=n[o+1]){if(2==n[o+1])return Vp(n,o+2);break}i=n[o=Vp(n,o+2)]}if(i==e||0==i)return Vp(n,o+1)}return 0}stateSlot(t,e){return this.states[6*t+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){if(e==this.stateSlot(t,4))return!0;for(let n=this.stateSlot(t,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=Vp(this.data,n+2)}if(e==Vp(this.data,n+1))return!0}}nextStates(t){let e=[];for(let n=this.stateSlot(t,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=Vp(this.data,n+2)}if(0==(1&this.data[n+2])){let t=this.data[n+1];e.some(((e,n)=>1&n&&e==t))||e.push(this.data[n],t)}}return e}overrides(t,e){let n=Ip(this.data,this.tokenPrecTable,e);return n<0||Ip(this.data,this.tokenPrecTable,t)<n}configure(t){let e=Object.assign(Object.create(Bp.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let n=this.topRules[t.top];if(!n)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=n}return t.tokenizers&&(e.tokenizers=this.tokenizers.map((e=>{let n=t.tokenizers.find((t=>t.from==e));return n?n.to:e}))),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map(((n,r)=>{let i=t.specializers.find((t=>t.from==n.external));if(!i)return n;let o=Object.assign(Object.assign({},n),{external:i.to});return e.specializers[r]=Xp(o),o}))),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),null!=t.strict&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),null!=t.bufferLength&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return null==e?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),n=e.map((()=>!1));if(t)for(let r of t.split(" ")){let t=e.indexOf(r);t>=0&&(n[t]=!0)}let r=null;for(let t=0;t<e.length;t++)if(!n[t])for(let n,i=this.dialects[e[t]];65535!=(n=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[n]=1;return new Zp(t,n,r)}static deserialize(t){return new Bp(t)}}function Vp(t,e){return t[e]|t[e+1]<<16}function Ip(t,e,n){for(let r,i=e;65535!=(r=t[i]);i++)if(r==n)return i-e;return-1}function Xp(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const Up=294,qp=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],zp=new class{constructor(t){this.start=t.start,this.shift=t.shift||Np,this.reduce=t.reduce||Np,this.reuse=t.reuse||Np,this.hash=t.hash||(()=>0),this.strict=!1!==t.strict}}({start:!1,shift:(t,e)=>4==e||5==e||298==e?t:299==e,strict:!1}),Yp=new Pp(((t,e)=>{let{next:n}=t;(125==n||-1==n||e.context)&&e.canShift(296)&&t.acceptToken(296)}),{contextual:!0,fallback:!0}),Lp=new Pp(((t,e)=>{let n,{next:r}=t;qp.indexOf(r)>-1||(47!=r||47!=(n=t.peek(1))&&42!=n)&&125!=r&&59!=r&&-1!=r&&!e.context&&e.canShift(293)&&t.acceptToken(293)}),{contextual:!0}),Gp=new Pp(((t,e)=>{let{next:n}=t;if((43==n||45==n)&&(t.advance(),n==t.next)){t.advance();let n=!e.context&&e.canShift(1);t.acceptToken(n?1:2)}}),{contextual:!0}),Fp=new Pp((t=>{for(let e=!1,n=0;;n++){let{next:r}=t;if(r<0){n&&t.acceptToken(Up);break}if(96==r){n?t.acceptToken(Up):t.acceptToken(295,1);break}if(123==r&&e){1==n?t.acceptToken(3,1):t.acceptToken(Up,-1);break}if(10==r&&n){t.advance(),t.acceptToken(Up);break}92==r&&t.advance(),e=36==r,t.advance()}})),Hp=ll({"get set async static":Tl.modifier,"for while do if else switch try catch finally return throw break continue default case":Tl.controlKeyword,"in of await yield void typeof delete instanceof":Tl.operatorKeyword,"let var const function class extends":Tl.definitionKeyword,"import export from":Tl.moduleKeyword,"with debugger as new":Tl.keyword,TemplateString:Tl.special(Tl.string),super:Tl.atom,BooleanLiteral:Tl.bool,this:Tl.self,null:Tl.null,Star:Tl.modifier,VariableName:Tl.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Tl.function(Tl.variableName),VariableDefinition:Tl.definition(Tl.variableName),Label:Tl.labelName,PropertyName:Tl.propertyName,PrivatePropertyName:Tl.special(Tl.propertyName),"CallExpression/MemberExpression/PropertyName":Tl.function(Tl.propertyName),"FunctionDeclaration/VariableDefinition":Tl.function(Tl.definition(Tl.variableName)),"ClassDeclaration/VariableDefinition":Tl.definition(Tl.className),PropertyDefinition:Tl.definition(Tl.propertyName),PrivatePropertyDefinition:Tl.definition(Tl.special(Tl.propertyName)),UpdateOp:Tl.updateOperator,LineComment:Tl.lineComment,BlockComment:Tl.blockComment,Number:Tl.number,String:Tl.string,ArithOp:Tl.arithmeticOperator,LogicOp:Tl.logicOperator,BitOp:Tl.bitwiseOperator,CompareOp:Tl.compareOperator,RegExp:Tl.regexp,Equals:Tl.definitionOperator,Arrow:Tl.function(Tl.punctuation),": Spread":Tl.punctuation,"( )":Tl.paren,"[ ]":Tl.squareBracket,"{ }":Tl.brace,"InterpolationStart InterpolationEnd":Tl.special(Tl.brace),".":Tl.derefOperator,", ;":Tl.separator,"@":Tl.meta,TypeName:Tl.typeName,TypeDefinition:Tl.definition(Tl.typeName),"type enum interface implements namespace module declare":Tl.definitionKeyword,"abstract global Privacy readonly override":Tl.modifier,"is keyof unique infer":Tl.operatorKeyword,JSXAttributeValue:Tl.attributeValue,JSXText:Tl.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Tl.angleBracket,"JSXIdentifier JSXNameSpacedName":Tl.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Tl.attributeName,"JSXBuiltin/JSXIdentifier":Tl.standard(Tl.tagName)}),Kp={__proto__:null,export:16,as:21,from:27,default:30,async:35,function:36,extends:46,this:50,true:58,false:58,null:68,void:72,typeof:76,super:92,new:126,await:143,yield:145,delete:146,class:156,public:211,private:211,protected:211,readonly:213,instanceof:232,satisfies:235,in:236,const:238,import:270,keyof:325,unique:329,infer:335,is:371,abstract:391,implements:393,type:395,let:398,var:400,interface:407,enum:411,namespace:417,module:419,declare:423,global:427,for:448,of:457,while:460,with:464,do:468,if:472,else:474,switch:478,case:484,try:490,catch:494,finally:498,return:502,throw:506,break:510,continue:514,debugger:518},Jp={__proto__:null,async:113,get:115,set:117,public:173,private:173,protected:173,static:175,abstract:177,override:179,readonly:185,accessor:187,new:375},tg={__proto__:null,"<":133},eg=Bp.deserialize({version:14,states:"$>YO`QYOOO$}QYOOO)WQ(CjO'#CgO)_OSO'#DYO+jQYO'#D_O+zQYO'#DjO$}QYO'#DtO.OQYO'#DzOOQ(CY'#ES'#ESO.fQWO'#EPOOQO'#IV'#IVO.nQWO'#GfOOQO'#Ed'#EdO.yQWO'#EcO/OQWO'#EcO1QQ(CjO'#JPO3qQ(CjO'#JQO4_QWO'#FRO4dQpO'#FjOOQ(CY'#FZ'#FZO4oO!bO'#FZO4}Q#tO'#FqO6bQWO'#FpOOQ(CY'#JQ'#JQOOQ(CW'#JP'#JPOOQQ'#Jj'#JjO6gQWO'#HzO6lQ(C`O'#H{OOQQ'#It'#ItOOQQ'#H}'#H}Q`QYOOO$}QYO'#DlO6tQWO'#GfO6yQ#tO'#ClO7XQWO'#EbO7dQWO'#EmO7iQ#tO'#FYO8TQWO'#GfO8YQWO'#GjO8eQWO'#GjO8sQWO'#GmO8sQWO'#GnO8sQWO'#GpO6tQWO'#GsO9dQWO'#GvO:uQWO'#CcO;VQWO'#HTO;_QWO'#HZO;_QWO'#H]O`QYO'#H_O;_QWO'#HaO;_QWO'#HdO;dQWO'#HjO;iQ(CaO'#HpO$}QYO'#HrO;tQ(CaO'#HtO<PQ(CaO'#HvO6lQ(C`O'#HxO<[Q(CjO'#CgO<xQ&jO'#DdQOQWOOO=mQWO'#D{O6yQ#tO'#EbO=xQWO'#EbO>TQ`O'#FYO$}QYO'#DZOOOS'#IP'#IPO>]OSO,59tOOQ(CY,59t,59tO>hQYO'#IQO>{QWO'#JRO@}QbO'#JRO)jQYO'#JROAUQWO,59yOAlQWO'#EdOAyQWO'#J_OBUQWO'#J^OBUQWO'#J^OB^QWO,5;QOBcQWO'#J]OOQ(CY,5:U,5:UOBjQYO,5:UODkQ(CjO,5:`OE[QWO,5:fOEaQWO'#JZOFZQ(C`O'#J[O8YQWO'#JZOFbQWO'#JZOFjQWO,5;POFoQWO'#JZOOQ(CY'#Cg'#CgO$}QYO'#DzOGcQ`O,5:kOOQO'#JW'#JWOOQO-E<T-E<TO6tQWO,5=QOGyQWO,5=QOHOQYO,5:}OJOQ#tO'#E_OK`QWO,5:}OLuQ#tO'#DnOL|QYO'#DsOMWQ&jO,5;WOM`Q&jO,5;WO$}QYO,5;WOOQQ'#Ey'#EyOOQQ'#E{'#E{O$}QYO,5;XO$}QYO,5;XO$}QYO,5;XO$}QYO,5;XO$}QYO,5;XO$}QYO,5;XO$}QYO,5;XO$}QYO,5;XO$}QYO,5;XO$}QYO,5;XO$}QYO,5;XOOQQ'#FP'#FPOMnQYO,5;jOOQ(CY,5;o,5;oOOQ(CY,5;p,5;pO! nQWO,5;pOOQ(CY,5;q,5;qO$}QYO'#I]O! vQ(C`O,5<^OJOQ#tO,5;XO!!eQ#tO,5;XO$}QYO,5;mO!!lQpO'#F`O!#iQpO'#JcO!#TQpO'#JcO!#pQpO'#JcOOQO'#Jc'#JcO!$UQpO,5;xOOOO,5<U,5<UO!$gQYO'#FlOOOO'#I['#I[O4oO!bO,5;uO!$nQpO'#FnOOQ(CY,5;u,5;uO!%_Q,UO'#CrOOQ(CY'#Cv'#CvO!%rQWO'#CvO!%wOSO'#CzO!&eQ#tO,5<ZO!&lQWO,5<]O!(OQ7[O'#F{O!(]QWO'#F|O!(bQWO'#F|O!(gQ7[O'#GQO!)fQ&jO'#GUO!*XQ,UO'#I|OOQ(CY'#I|'#I|O!*cQWO'#I{O!*qQWO'#IzO!*yQWO'#CqOOQ(CY'#Ct'#CtOOQ(CY'#C}'#C}OOQ(CY'#DP'#DPO.iQWO'#DROKeQ#tO'#FsOKeQ#tO'#FuO!+RQWO'#FwO!+WQWO'#FxO!(bQWO'#GOOKeQ#tO'#GTO!+]QWO'#EeO!+wQWO,5<[O`QYO,5>fOOQQ'#Iw'#IwOOQQ,5>g,5>gOOQQ-E;{-E;{O!-vQ(CjO,5:WOOQ(CW'#Co'#CoO!.jQ#tO,5=QOOQO'#Ce'#CeO!.xQ(C`O'#IxO6bQWO'#IxO;dQWO,59WO!/ZQpO,59WO!/cQ#tO,59WO6yQ#tO,59WO!/nQWO,5:}O!/vQWO'#HSO!0UQWO'#JnO$}QYO,5;rO!0^Q&jO,5;tO!0cQWO,5=mO!0hQWO,5=mO!0mQWO,5=mO6lQ(C`O,5=mO!0{QWO'#EfO!1rQ&jO'#EgOOQ(CW'#J]'#J]O!1yQ(C`O'#JkO6lQ(C`O,5=UO8sQWO,5=[OOQO'#Cr'#CrO!2UQpO,5=XO!2^Q#tO,5=YO!2iQWO,5=[O!2nQ`O,5=_O;dQWO'#GxO6tQWO'#GzO!2vQWO'#GzO6yQ#tO'#G}O!2{QWO'#G}OOQQ,5=b,5=bO!3QQWO'#HOO!3YQWO'#ClO!3_QWO,58}O!3iQWO,58}O!5nQYO,58}OOQQ,58},58}O!5{Q(C`O,58}O$}QYO,58}O!6WQYO'#HVOOQQ'#HW'#HWOOQQ'#HX'#HXO`QYO,5=oO!6hQWO,5=oO`QYO,5=uO`QYO,5=wO!6mQWO,5=yO`QYO,5={O!6rQWO,5>OO!6wQYO,5>UOOQQ,5>[,5>[O$}QYO,5>[O6lQ(C`O,5>^OOQQ,5>`,5>`O!:{QWO,5>`OOQQ,5>b,5>bO!:{QWO,5>bOOQQ,5>d,5>dO!;QQpO'#DWOOQ(CW'#JT'#JTO$}QYO'#JTO!;oQpO'#JTO!<^QpO'#DeO!<oQ&jO'#DeO!>zQYO'#DeO!?RQWO'#JSO!?ZQWO,5:OO!?`QWO'#EhO!?nQWO'#J`O!?vQWO,5;RO!@^Q&jO'#DeO!@hQ&jO'#D}OOQ(CY,5:g,5:gO$}QYO,5:gO!AeQWO,5:gO;dQWO,5:|O!/ZQpO,5:|O!/cQ#tO,5:|O6yQ#tO,5:|O!AmQ`O,59uOOOS-E;}-E;}OOQ(CY1G/`1G/`O!ArQbO,5>lO)jQYO,5>lOOQO,5>r,5>rO!A|QYO'#IQOOQO-E<O-E<OO!BZQWO,5?mO!BcQbO,5?mO!BjQWO,5?xOOQ(CY1G/e1G/eO$}QYO,5?yO!BrQWO'#IWOOQO-E<U-E<UO!BjQWO,5?xOOQ(CW1G0l1G0lOOQ(CY1G/p1G/pOOQ(CY1G0Q1G0QO!CWQWO,5?uO8YQWO,5?uO!C`QWO,5?uOOQ(CW'#E^'#E^O$}QYO,5?vO!CnQ(C`O,5?vO!DPQ(C`O,5?vO!DWQWO'#IYO!CWQWO,5?uOOQ(CW1G0k1G0kOMWQ&jO,5:mOMcQ&jO,5:mOOQO,5:o,5:oO!DuQWO,5:oO!D}Q#tO1G2lO6tQWO1G2lOOQ(CY1G0i1G0iO!E]Q(CjO1G0iO!FbQ(ChO,5:yOOQ(CY'#Fz'#FzO!GOQ(CjO'#I|OHOQYO1G0iO!IWQ#tO'#JUO!IbQWO,5:YO!IgQbO'#JVO$}QYO'#JVO!IqQWO,5:_OOQ(CY'#DW'#DWOOQ(CY1G0r1G0rO$}QYO1G0rOOQ(CY1G1[1G1[O!IvQWO1G0rO!L_Q(CjO1G0sO!LfQ(CjO1G0sO# PQ(CjO1G0sO# WQ(CjO1G0sO##bQ(CjO1G0sO##xQ(CjO1G0sO#&rQ(CjO1G0sO#&yQ(CjO1G0sO#)dQ(CjO1G0sO#)kQ(CjO1G0sO#+cQ(CjO1G0sO#.cQMjO'#CgO#0aQMjO1G1UO#2_QMjO'#JQO! qQWO1G1[O#2rQ(CjO,5>wOOQ(CW-E<Z-E<ZO#3fQ(CjO1G0sOOQ(CY1G0s1G0sO#5qQ(CjO1G1XO#6eQpO,5;|O#6mQpO,5;}O#6uQpO'#FeO#7^QWO'#FdOOQO'#Jd'#JdOOQO'#IZ'#IZO#7cQpO1G1dOOQ(CY1G1d1G1dOOOO1G1o1G1oO#7tQMjO'#JPO#8OQWO,5<WOMnQYO,5<WOOOO-E<Y-E<YOOQ(CY1G1a1G1aOOQ(CY,5<Y,5<YO#8TQpO,5<YOOQ(CY,59b,59bOJOQ#tO'#C|OOOS'#IO'#IOO#8YOSO,59fOOQ(CY,59f,59fO$}QYO1G1uO!+WQWO'#I_O#8eQWO,5<nOOQ(CY,5<k,5<kOOQO'#Ga'#GaOKeQ#tO,5<zOOQO'#Gc'#GcOKeQ#tO,5<|OJOQ#tO,5=OOOQO1G1w1G1wO#8pQ`O'#CoO#9TQ`O,5<gO#9[QWO'#JgO6tQWO'#JgO#9jQWO,5<iOKeQ#tO,5<hO#9oQWO'#F}O#9zQWO,5<hO#:PQ`O'#FzO#:^Q`O'#JhO#:hQWO'#JhOJOQ#tO'#JhO#:mQWO,5<lOOQ(CW'#Di'#DiO#:rQpO'#GVO!)aQ&jO'#GVO#;TQWO'#GXO#;YQWO'#GZO!(bQWO'#G^O#;_Q(C`O'#IaO#;jQ&jO,5<pOOQ(CY,5<p,5<pO#;qQ&jO'#GVO#<PQ&jO'#GWO#<XQ&jO'#GWOOQ(CY,5=P,5=POKeQ#tO,5?gOKeQ#tO,5?gO#<^QWO'#IbO#<iQWO,5?fO#<qQWO,59]O#=bQ#tO,59mOOQ(CY,59m,59mO#>TQ#tO,5<_O#>vQ#tO,5<aO#?QQWO,5<cOOQ(CY,5<d,5<dO#?VQWO,5<jO#?[Q#tO,5<oOHOQYO1G1vO#?lQWO1G1vOOQQ1G4Q1G4QOOQ(CY1G/r1G/rO! nQWO1G/rOOQQ1G2l1G2lOJOQ#tO1G2lO$}QYO1G2lO#?qQWO1G2lO#AWQ#tO'#E_OOQ(CW,5?d,5?dO#AbQ(C`O,5?dOOQQ1G.r1G.rO;dQWO1G.rO!/ZQpO1G.rO!/cQ#tO1G.rO#AsQWO1G0iO#AxQWO'#CgO#BTQWO'#JoO#B]QWO,5=nO#BbQWO'#JoO#BgQWO'#JoO#BoQWO'#IjO#B}QWO,5@YO#CVQbO1G1^OOQ(CY1G1`1G1`O6tQWO1G3XO#C^QWO1G3XO#CcQWO1G3XO#ChQWO1G3XOOQQ1G3X1G3XO8YQWO'#J^O8YQWO'#EhO$}QYO'#EhO8YQWO'#IdO#CmQ(C`O,5@VOOQQ1G2p1G2pO!2iQWO1G2vOJOQ#tO1G2sO#CxQWO1G2sOOQQ1G2t1G2tOJOQ#tO1G2tO#C}QWO1G2tO#DVQ&jO'#GrOOQQ1G2v1G2vO!)aQ&jO'#IfO!2nQ`O1G2yOOQQ1G2y1G2yOOQQ,5=d,5=dO#D_Q#tO,5=fO6tQWO,5=fO#;YQWO,5=iO6bQWO,5=iO!/ZQpO,5=iO!/cQ#tO,5=iO6yQ#tO,5=iO#DmQWO'#JmO#DxQWO,5=jOOQQ1G.i1G.iO#D}Q(C`O1G.iO#EYQWO1G.iO#E_QWO1G.iO6lQ(C`O1G.iO#EgQbO,5@[O#EzQWO,5@[O#FVQYO,5=qO#F^QWO,5=qO8YQWO,5@[OOQQ1G3Z1G3ZO`QYO1G3ZOOQQ1G3a1G3aOOQQ1G3c1G3cO;_QWO1G3eO#FcQYO1G3gO#JaQYO'#HfOOQQ1G3j1G3jO#JnQWO'#HlO;dQWO'#HnOOQQ1G3p1G3pO#JvQYO1G3pO6lQ(C`O1G3vOOQQ1G3x1G3xOOQ(CW'#GR'#GRO6lQ(C`O1G3zO6lQ(C`O1G3|O#NwQWO,5?oOMnQYO,5;SO8YQWO,5;SO;dQWO,5:POMnQYO,5:PO$}QYO'#JTO!/ZQpO,5:PO#N|QMjO,5:POOQO,5;S,5;SO$ WQ&jO'#IRO$ nQWO,5?nOOQ(CY1G/j1G/jO$ vQ&jO'#IXO$!QQWO,5?zOOQ(CW1G0m1G0mO!<oQ&jO,5:PO$!YQ&jO'#EZOOQ(CW'#EY'#EYO$#PQ(CxO'#EZO$#kQ&jO'#EOOOQO'#IU'#IUO$#|Q&jO,5:iOOQ(CY,5:i,5:iO$$yQ&jO'#EOO$%WQ&jO'#EZO$%nQ&jO'#EaO$%qQ&jO'#EZO$&[Q&jO'#EZO$#kQ&jO'#EZO!AhQWO1G0ROOQ(CY1G0R1G0RO$}QYO1G0ROOQ(CY1G0h1G0hO;dQWO1G0hO!/ZQpO1G0hO!/cQ#tO1G0hOOOS1G/a1G/aO$&{Q`O,5<^O$'TQbO1G4WOOQO1G4^1G4^O$}QYO,5>lO$'_QWO1G5XO$'gQWO1G5dO$'oQbO1G5eO8YQWO,5>rO$'yQWO1G5aO$'yQWO1G5aO8YQWO1G5aO$(RQ(CjO1G5bO$}QYO1G5bO$(cQ(C`O1G5bO$(tQWO,5>tO8YQWO,5>tOOQO,5>t,5>tO$)YQWO,5>tOOQO-E<W-E<WOOQO1G0X1G0XOOQO1G0Z1G0ZO! qQWO1G0ZOOQQ7+(W7+(WOJOQ#tO7+(WO$}QYO7+(WO$)hQWO7+(WO$)sQ#tO7+(WO$*RQ(CjO,59mO$,ZQ(CjO,5<_O$.fQ(CjO,5<aO$0qQ(CjO,5<oOOQ(CY7+&T7+&TO$3SQ(CjO7+&TO$3vQ#tO'#ISO$4QQWO,5?pOOQ(CY1G/t1G/tO$4YQYO'#ITO$4gQWO,5?qO$4oQbO,5?qOOQ(CY1G/y1G/yO$4yQWO7+&^OOQ(CY7+&^7+&^O$5OQMjO,5:`O$}QYO7+&pO$5YQMjO,5:WOOQ(CY7+&v7+&vOOQO1G1h1G1hOOQO1G1i1G1iO$5gQ!LQO,5<POMnQYO,5<OOOQO-E<X-E<XOOQ(CY7+'O7+'OOOOO7+'Z7+'ZOOOO1G1r1G1rO$5rQWO1G1rOOQ(CY1G1t1G1tO$5wQ`O,59hOOOS-E;|-E;|OOQ(CY1G/Q1G/QO$6OQ(CjO7+'aOOQ(CY,5>y,5>yO$6rQWO,5>yOOQ(CY1G2Y1G2YP$6wQWO'#I_POQ(CY-E<]-E<]O$7hQ#tO1G2fO$8ZQ#tO1G2hO$8eQ`O1G2jOOQ(CY1G2R1G2RO$8lQWO'#I^O$8zQWO,5@RO$8zQWO,5@RO$9SQWO,5@RO$9_QWO,5@ROOQO1G2T1G2TO$9mQ#tO1G2SOKeQ#tO1G2SO$9}Q7[O'#I`O$:_QWO,5@SOJOQ#tO,5@SO$:gQ`O,5@SOOQ(CY1G2W1G2WOOQ(CW,5<q,5<qOOQ(CW,5<r,5<rO$:qQWO,5<rO#;OQWO,5<rO!/ZQpO,5<qOOQO'#GY'#GYO$:vQWO,5<sOOQ(CW,5<u,5<uO$:qQWO,5<xOOQO,5>{,5>{OOQO-E<_-E<_OOQ(CY1G2[1G2[O!)aQ&jO,5<qO$;OQWO,5<rO#;TQWO,5<sO!)aQ&jO,5<rO$;ZQ#tO1G5RO$;eQ#tO1G5ROOQO,5>|,5>|OOQO-E<`-E<`OOQO1G.w1G.wO!0^Q&jO,59oO$}QYO,59oO$;rQWO1G1}OKeQ#tO1G2UO$;wQ(CjO7+'bOOQ(CY7+'b7+'bOHOQYO7+'bOOQ(CY7+%^7+%^O$<kQ`O'#JiO!AhQWO7+(WO$<uQbO7+(WO$)kQWO7+(WO$<|Q(ChO'#CgO$=aQ(ChO,5<vO$>RQWO,5<vOOQ(CW1G5O1G5OOOQQ7+$^7+$^O;dQWO7+$^O!/ZQpO7+$^OHOQYO7+&TO$>WQWO'#IiO$>iQWO,5@ZOOQO1G3Y1G3YO6tQWO,5@ZO$>iQWO,5@ZO$>qQWO,5@ZOOQO,5?U,5?UOOQO-E<h-E<hOOQ(CY7+&x7+&xO$>vQWO7+(sO6lQ(C`O7+(sO6tQWO7+(sO$>{QWO7+(sO$?QQWO,5;SOOQ(CW,5?O,5?OOOQ(CW-E<b-E<bOOQQ7+(b7+(bO$?VQ(ChO7+(_OJOQ#tO7+(_O$?aQ`O7+(`OOQQ7+(`7+(`OJOQ#tO7+(`O$?hQWO'#JlO$?sQWO,5=^OOQO,5?Q,5?QOOQO-E<d-E<dOOQQ7+(e7+(eO$@|Q&jO'#G{OOQQ1G3Q1G3QOJOQ#tO1G3QO$}QYO1G3QO$ATQWO1G3QO$A`Q#tO1G3QO6lQ(C`O1G3TO#;YQWO1G3TO6bQWO1G3TO!/ZQpO1G3TO!/cQ#tO1G3TO$AnQWO'#IhO$AyQWO,5@XO$BRQ&jO,5@XOOQ(CW1G3U1G3UOOQQ7+$T7+$TO$BZQWO7+$TO6lQ(C`O7+$TO$B`QWO7+$TO$}QYO1G5vO$}QYO1G5wO$BeQYO1G3]O$BlQWO1G3]O$BqQYO1G3]O$BxQ(C`O1G5vOOQQ7+(u7+(uO6lQ(C`O7+)PO`QYO7+)ROOQQ'#Jr'#JrOOQQ'#Ik'#IkO$CSQYO,5>QOOQQ,5>Q,5>QO$}QYO'#HgO$CaQWO'#HiOOQQ,5>W,5>WO8YQWO,5>WOOQQ,5>Y,5>YOOQQ7+)[7+)[OOQQ7+)b7+)bOOQQ7+)f7+)fOOQQ7+)h7+)hO$CfQpO1G5ZO$CzQMjO1G0nO$DUQWO1G0nOOQO1G/k1G/kO$DaQMjO1G/kO$DkQWO,5?oO;dQWO1G/kOMnQYO'#DeOOQO,5>m,5>mOOQO-E<P-E<POOQO,5>s,5>sOOQO-E<V-E<VO!/ZQpO1G/kO$DpQ$ISO,5:kO$EpQ(CxO,5:uO$#kQ&jO,5:jO$F[Q&jO,5:jO$FiQ&jO,5:uO$GPQ&jO,5:uO$GjQ&jO,5:uO$#kQ&jO,5:uO;dQWO,5:jOOQO,5:u,5:uO$}QYO,5:uO$HZQ(C`O,5:uO$HfQ(C`O,5:uO!/ZQpO,5:jOOQO-E<S-E<SOOQ(CY1G0T1G0TOOQO,5:{,5:{O$HtQ(C`O,5:uOOQ(CY7+%m7+%mO!AhQWO7+%mOOQ(CY7+&S7+&SO;dQWO7+&SO!/ZQpO7+&SO$IYQWO7+*{O$IYQWO7+*{O$IbQ(CjO7+*|O$}QYO7+*|OOQO1G4`1G4`O8YQWO1G4`O$IrQWO1G4`OOQO7+%u7+%uO!AhQWO<<KrO$<uQbO<<KrO$JQQWO<<KrOOQQ<<Kr<<KrOJOQ#tO<<KrO$}QYO<<KrO$JYQWO<<KrO$JeQ(CjO1G2fO$LpQ(CjO1G2hO$N{Q(CjO1G2SO%#^Q#tO,5>nOOQO-E<Q-E<QO%#hQbO,5>oO$}QYO,5>oOOQO-E<R-E<RO%#rQWO1G5]OOQ(CY<<Ix<<IxO%#zQMjO1G0iO%&UQMjO1G0sO%&]QMjO1G0sO%(aQMjO1G0sO%(hQMjO1G0sO%*]QMjO1G0sO%*sQMjO1G0sO%-WQMjO1G0sO%-_QMjO1G0sO%/cQMjO1G0sO%/jQMjO1G0sO%1bQMjO1G0sO%1uQ(CjO<<J[O%2zQMjO1G0sO%4pQMjO'#I|O%6sQMjO1G1XOMnQYO'#FgOOQO'#Je'#JeOOQO1G1k1G1kO%7QQWO1G1jO%7VQMjO,5>wOOOO7+'^7+'^OOOS1G/S1G/SOOQ(CY1G4e1G4eOKeQ#tO7+(UO%7aQWO,5>xO6tQWO,5>xOOQO-E<[-E<[O%7oQWO1G5mO%7oQWO1G5mO%7wQWO1G5mO%8SQ#tO7+'nO%8dQ`O,5>zO%8nQWO,5>zOJOQ#tO,5>zOOQO-E<^-E<^O%8sQ`O1G5nO%8}QWO1G5nOOQ(CW1G2^1G2^O$:qQWO1G2^OOQ(CW1G2]1G2]O%9VQWO1G2_OJOQ#tO1G2_OOQ(CW1G2d1G2dO!/ZQpO1G2]O#;OQWO1G2^O%9[QWO1G2_O%9dQWO1G2^OKeQ#tO7+*mOOQ(CY1G/Z1G/ZO%9oQWO1G/ZOOQ(CY7+'i7+'iO%9tQ#tO7+'pO%:UQ(CjO<<J|OOQ(CY<<J|<<J|OJOQ#tO'#IcO%:xQWO,5@TOJOQ#tO1G2bOOQQ<<Gx<<GxO;dQWO<<GxO%;QQ(CjO<<IoOOQ(CY<<Io<<IoOOQO,5?T,5?TO%;tQWO,5?TO%;yQWO,5?TOOQO-E<g-E<gO%<RQWO1G5uO%<RQWO1G5uO6tQWO1G5uO%<ZQWO<<L_OOQQ<<L_<<L_O%<`QWO<<L_O6lQ(C`O<<L_O%<eQWO1G0nOOQQ<<Ky<<KyO$?VQ(ChO<<KyOOQQ<<Kz<<KzO$?aQ`O<<KzO%<jQ&jO'#IeO%<uQWO,5@WOMnQYO,5@WOOQQ1G2x1G2xO%<}Q(CxO'#JTO%=iQYO'#JTO%=pQ&jO'#EZO%>ZQ(C`O'#EZO$#PQ(CxO'#EZO$#tQ&jO'#G|OOQO'#Ig'#IgO6lQ(C`O'#IgO%>oQ&jO,5=gOOQQ,5=g,5=gO%>vQ&jO'#EZO%>PQ&jO'#EZO%?XQ&jO'#EZO%?rQ&jO'#EZO%@cQ&jO'#G|O%@tQWO7+(lO%@yQWO7+(lOOQQ7+(l7+(lOJOQ#tO7+(lO$}QYO7+(lO%ARQWO7+(lOOQQ7+(o7+(oO6lQ(C`O7+(oO#;YQWO7+(oO6bQWO7+(oO!/ZQpO7+(oO%A^QWO,5?SOOQO-E<f-E<fOOQO'#HP'#HPO%AiQWO1G5sO6lQ(C`O<<GoOOQQ<<Go<<GoO%AqQWO<<GoO%AvQWO7++bO%A{QWO7++cOOQQ7+(w7+(wO%BQQWO7+(wO%BVQYO7+(wO%B^QWO7+(wO$}QYO7++bO$}QYO7++cOOQQ<<Lk<<LkOOQQ<<Lm<<LmOOQQ-E<i-E<iOOQQ1G3l1G3lO%BcQWO,5>ROOQQ,5>T,5>TO%BhQWO1G3rO8YQWO7+&YOMnQYO7+&YOOQ(CW1G5Z1G5ZOOQO7+%V7+%VO%BmQMjO1G5eO;dQWO7+%VO;dQWO1G0UOOQO1G0a1G0aO$}QYO1G0aO%BwQ(C`O1G0aO%CSQ(C`O1G0aO!/ZQpO1G0UO$#kQ&jO1G0UO%CbQ(CxO1G0aO%C|Q&jO1G0UO$#kQ&jO1G0aO%DZQ&jO1G0aO%DqQ&jO1G0aO%E[Q(C`O1G0aOOQO1G0U1G0UO%EpQ(CjO1G0aOOQ(CY<<IX<<IXOOQ(CY<<In<<InO;dQWO<<InO%EzQWO<<NgO%FSQ(CjO<<NhOOQO7+)z7+)zO8YQWO7+)zOOQQANA^ANA^O%FdQWOANA^OJOQ#tOANA^O!AhQWOANA^O$<uQbOANA^O$}QYOANA^O%FlQ(CjO7+'nO%H}Q(CjO7+'pO%K`QbO1G4ZO%KjQMjO7+&TO%KwQMjO,59mO%MzQMjO,5<_O& }QMjO,5<aO&$QQMjO,5<oO&%vQMjO7+'aO&&TQMjO7+'bO&&bQWO,5<ROOQO7+'U7+'UO&&gQ#tO<<KpOOQO1G4d1G4dO&&nQWO1G4dO&&yQWO1G4dO&'XQWO7++XO&'XQWO7++XOJOQ#tO1G4fO&'aQ`O1G4fO&'kQWO7++YOOQ(CW7+'x7+'xO$:qQWO7+'yO&'sQ`O7+'yOOQ(CW7+'w7+'wO$:qQWO7+'xO&'zQWO7+'yOJOQ#tO7+'yO#;OQWO7+'xO&(PQ#tO<<NXOOQ(CY7+$u7+$uO&(ZQ`O,5>}OOQO-E<a-E<aO&(eQ(ChO7+'|OOQQAN=dAN=dO6tQWO1G4oOOQO1G4o1G4oO&(uQWO1G4oO&(zQWO7++aO&(zQWO7++aO6lQ(C`OANAyO&)SQWOANAyOOQQANAyANAyOOQQANAeANAeOOQQANAfANAfO&)XQWO,5?POOQO-E<c-E<cO&)dQMjO1G5rO#;YQWO,5=hO6bQWO,5=hO&+tQbO'#CgO&,OQ&jO,5:uO&,YQ&jO,5:uO&,gQ&jO,5:uO!/ZQpO,5=hOOQO,5?R,5?ROOQO-E<e-E<eOOQQ1G3R1G3RO%=iQYO,5<sO%<}Q(CxO,5=hO$EpQ(CxO,5:uO$#tQ&jO,5=hO&,zQ&jO,5=hO&-]Q&jO,5:uOOQQ<<LW<<LWOJOQ#tO<<LWO%@tQWO<<LWO&-vQWO<<LWO$}QYO<<LWOOQQ<<LZ<<LZO6lQ(C`O<<LZO#;YQWO<<LZO6bQWO<<LZO&.OQ&jO1G4nO&.WQWO7++_OOQQAN=ZAN=ZO6lQ(C`OAN=ZOOQQ<<N|<<N|OOQQ<<N}<<N}OOQQ<<Lc<<LcO&.`QWO<<LcO&.eQYO<<LcO&.lQWO<<N|O&.qQWO<<N}OOQQ1G3m1G3mO;dQWO7+)^O&.vQWO<<ItO&/RQMjO<<ItOOQO<<Hq<<HqOOQO7+%p7+%pO%EpQ(CjO7+%{OOQO7+%{7+%{O$}QYO7+%{O&/]Q(C`O7+%{O;dQWO7+%pO!/ZQpO7+%pO&/hQ(C`O7+%{O$#kQ&jO7+%pO&/vQ(C`O7+%{O&0[Q(CxO7+%{O&0fQ&jO7+%pO$#kQ&jO7+%{O&0sQ&jO7+%{OOQ(CYAN?YAN?YOOQO<<Mf<<MfOOQQG26xG26xOJOQ#tOG26xO!AhQWOG26xO&1ZQWOG26xO$<uQbOG26xO&1cQMjO<<J[O&1pQMjO1G2SO&3fQMjO1G2fO&5iQMjO1G2hO&7lQMjO<<J|O&7yQMjO<<IoOOQO1G1m1G1mOKeQ#tOANA[OOQO7+*O7+*OO&8WQWO7+*OO&8cQWO<<NsO&8kQ`O7+*QOOQ(CW<<Ke<<KeO$:qQWO<<KeOOQ(CW<<Kd<<KdO&8uQ`O<<KeO$:qQWO<<KdOOQO7+*Z7+*ZO6tQWO7+*ZO&8|QWO<<N{OOQQG27eG27eO6lQ(C`OG27eOMnQYO1G4kO&9UQWO7++^O6lQ(C`O1G3SO#;YQWO1G3SO&9^Q&jO1G0aO&9hQ&jO1G0aO6bQWO1G3SO!/ZQpO1G3SO$#tQ&jO1G3SO%<}Q(CxO1G3SO%CbQ(CxO1G0aO&9uQ&jO1G3SO%@tQWOANArOOQQANArANArOJOQ#tOANArO&:WQWOANArOOQQANAuANAuO6lQ(C`OANAuO#;YQWOANAuOOQO'#HQ'#HQOOQO7+*Y7+*YOOQQG22uG22uOOQQANA}ANA}O&:`QWOANA}OOQQANDhANDhOOQQANDiANDiOOQQ<<Lx<<LxOMnQYOAN?`OOQO<<Ig<<IgO%EpQ(CjO<<IgO$}QYO<<IgOOQO<<I[<<I[O;dQWO<<I[O&:eQ(C`O<<IgO!/ZQpO<<I[O&:pQ(C`O<<IgO$#kQ&jO<<I[O&;OQ(C`O<<IgO&;dQ(CxO<<IgO&;nQ&jO<<I[O$#kQ&jO<<IgO!AhQWOLD,dOOQQLD,dLD,dOJOQ#tOLD,dO&;{QWOLD,dO&<TQMjO7+'nO&=yQMjO7+'pO&?oQ#tOG26vOOQO<<Mj<<MjOOQ(CWANAPANAPO$:qQWOANAPOOQ(CWANAOANAOOOQO<<Mu<<MuOOQQLD-PLD-PO&@PQMjO7+*VOOQO7+(n7+(nO6lQ(C`O7+(nO&@ZQ&jO7+%{O#;YQWO7+(nO6bQWO7+(nO!/ZQpO7+(nO$#tQ&jO7+(nOOQQG27^G27^O%@tQWOG27^OJOQ#tOG27^OOQQG27aG27aO6lQ(C`OG27aOOQQG27iG27iO&@eQMjOG24zOOQOAN?RAN?RO%EpQ(CjOAN?ROOQOAN>vAN>vO$}QYOAN?RO;dQWOAN>vO&@oQ(C`OAN?RO!/ZQpOAN>vO&@zQ(C`OAN?RO$#kQ&jOAN>vO&AYQ(C`OAN?ROOQQ!$(!O!$(!OO!AhQWO!$(!OOJOQ#tO!$(!OO&AnQ(CjOG26vOOQ(CWG26kG26kOOQO<<LY<<LYO6lQ(C`O<<LYO#;YQWO<<LYO6bQWO<<LYO!/ZQpO<<LYOOQQLD,xLD,xO%@tQWOLD,xOOQQLD,{LD,{OOQOG24mG24mO%EpQ(CjOG24mOOQOG24bG24bO$}QYOG24mO;dQWOG24bO&DPQ(C`OG24mO!/ZQpOG24bO&D[Q(C`OG24mOOQQ!)9Ej!)9EjO!AhQWO!)9EjOOQOANAtANAtO6lQ(C`OANAtO#;YQWOANAtO6bQWOANAtOOQQ!$(!d!$(!dOOQOLD*XLD*XO%EpQ(CjOLD*XOOQOLD)|LD)|O$}QYOLD*XO;dQWOLD)|O&DjQ(C`OLD*XOOQQ!.K;U!.K;UO&DuQMjOG26vOOQOG27`G27`O6lQ(C`OG27`O#;YQWOG27`OOQO!$'Ms!$'MsO%EpQ(CjO!$'MsOOQO!$'Mh!$'MhO$}QYO!$'MsOOQOLD,zLD,zO6lQ(C`OLD,zOOQO!)9C_!)9C_O%EpQ(CjO!)9C_OOQO!$(!f!$(!fOOQO!.K8y!.K8yOMnQYO'#DtO.fQWO'#EPO&FkQbO'#JPOMnQYO'#DlO&FrQbO'#CgO&IYQbO'#CgO&IjQYO,5:}OMnQYO,5;XOMnQYO,5;XOMnQYO,5;XOMnQYO,5;XOMnQYO,5;XOMnQYO,5;XOMnQYO,5;XOMnQYO,5;XOMnQYO,5;XOMnQYO,5;XOMnQYO,5;XOMnQYO'#I]O&KjQWO,5<^O&KrQ#tO,5;XO&MSQ#tO,5;XOMnQYO,5;mO.iQWO'#DRO.iQWO'#DROJOQ#tO'#FsO&KrQ#tO'#FsOJOQ#tO'#FuO&KrQ#tO'#FuOJOQ#tO'#GTO&KrQ#tO'#GTOMnQYO,5?yO&IjQYO1G0iO&MZQMjO'#CgOMnQYO1G1uOJOQ#tO,5<zO&KrQ#tO,5<zOJOQ#tO,5<|O&KrQ#tO,5<|OJOQ#tO,5<hO&KrQ#tO,5<hO&IjQYO1G1vOMnQYO7+&pOJOQ#tO1G2SO&KrQ#tO1G2SOJOQ#tO1G2UO&KrQ#tO1G2UO&IjQYO7+'bO&IjQYO7+&TOJOQ#tOANA[O&KrQ#tOANA[O&MeQWO'#EcO&MjQWO'#EcO&MrQWO'#FRO&MwQWO'#EmO&M|QWO'#J_O&NXQWO'#J]O&NdQWO,5:}O&NiQ#tO,5<ZO&NpQWO'#F|O&NuQWO'#F|O&NzQWO,5<[O' SQWO,5:}O' [QMjO1G1UO' cQWO,5<hO' hQWO,5<hO' mQWO,5<jO' rQWO,5<jO' wQWO1G1vO' |QWO1G0iO'!RQ#tO<<KpO'!YQ#tO<<KpO4}Q#tO'#FqO6bQWO'#FpO=xQWO'#EbOMnQYO,5;jO!(bQWO'#F|O!(bQWO'#F|O!(bQWO'#GOO!(bQWO'#GOOKeQ#tO7+(UOKeQ#tO7+(UO$8eQ`O1G2jO$8eQ`O1G2jOJOQ#tO,5=OOJOQ#tO,5=O",stateData:"'#b~O'fOS'gOSSOSTOS~OPUOQUOW}O[gO^lOarObqOigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!VTO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!ppO!tXO#kwO#{tO$PbO%ZuO%]xO%_vO%`vO%cyO%ezO%h{O%i{O%k|O%x!OO&O!PO&Q!QO&S!RO&U!SO&X!TO&_!UO&e!VO&g!WO&i!XO&k!YO&m!ZO'iQO'qRO'{WO(YeO~OPUOQUO[gOa!aOb!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#{!bO$PbO'i![O'qRO'{WO(YeO~OPZXYZX^ZXkZXxZXyZX{ZX!TZX!cZX!dZX!fZX!lZX#SZX#_cX#bZX#cZX#dZX#eZX#fZX#gZX#hZX#iZX#jZX#lZX#nZX#pZX#qZX#vZX'dZX'qZX'|ZX(TZX(UZX~O!_$uX~P&}OR!cO'b!dO'c!fO~OPUOQUO[gOa!aOb!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#{!bO$PbO'i;SO'qRO'{WO(YeO~O!S!jO!T!gO!Q'uP!Q(QP~P)jO!U!rO~P`OPUOQUO[gOa!aOb!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#{!bO$PbO'qRO'{WO(YeO~O!S!xO!tXO#]!{O#^!xO'i;TO!e'}P~P,RO!f!}O'i!|O~O!p#RO!tXO%Z#SO~O#_#TO~O!_#UO#_#TO~OP#lOY#sOk#aOx#YOy#ZO{#[O!T#pO!c#cO!d#WO!f#XO!l#lO#b#_O#c#`O#d#`O#e#`O#f#bO#g#cO#h#cO#i#rO#j#cO#l#dO#n#fO#p#hO#q#iO'qRO'|#jO(T#]O(U#^O~O^'sX'd'sX'`'sX!e'sX!Q'sX!V'sX%['sX!_'sX~P/WO#S#tO#v#tOP'tXY'tXk'tXx'tXy'tX{'tX!T'tX!c'tX!f'tX!l'tX#b'tX#c'tX#d'tX#e'tX#f'tX#g'tX#h'tX#i'tX#j'tX#l'tX#n'tX#p'tX#q'tX'q'tX'|'tX(T'tX(U'tX!V'tX%['tX~O^'tX!d'tX'd'tX'`'tX!Q'tX!e'tXo'tX!_'tX~P1nO#S#tO~O$R#vO$T#uO$[#{O~O!V#|O$PbO$_#}O$a$PO~O[$SOi$cOk$TOl$SOm$SOr$dOt$eOv$fO{$[O!V$]O!a$kO!f$XO#^$lO#{$iO$h$gO$j$hO$m$jO'i$RO'm$bO'q$UOd'nP~O!f$mO~O!_$oO~O^$pO'd$pO~O'i$tO~O!f$mO'i$tO'j$vO'm$bO~Ob$|O!f$mO'i$tO~O#j#cO~O[%VOx%RO!V%OO!f%QO%]%UO'i$tO'j$vO](bP~O!p#RO~O{%WO!V%XO'i$tO~O{%WO!V%XO%e%]O'i$tO~O'i%^O~O#kwO%]xO%_vO%`vO%cyO%ezO%h{O%i{O~Oa%gOb%fO!p%dO%Z%eO%m%cO~P8xOa%jObqO!V%iO!ppO!tXO#kwO%ZuO%_vO%`vO%cyO%ezO%h{O%i{O%k|O~O_%mO#S%pO%]%kO'j$vO~P9wO!f%qO!i%uO~O!f!}O~O!VTO~O^$pO'a%}O'd$pO~O^$pO'a&QO'd$pO~O^$pO'a&SO'd$pO~O'`ZXoZX!QZX!eZX%|ZX!VZX%[ZX!_ZX~P&}O[&XOl&XO{&WO!S&[O!Y&bO!Z&ZO![&ZO'j$vO'r&UO!U'vP!U(SP~Og&eO!V&cO'i$tO~Ob&jO!f$mO'i$tO~Ox%RO!f%QO~OR!cO'b!dO'c&mO~O!S&oO!Q&tX!Q&zX!T&tX!T&zX~P)jO!T&qO!Q'uX~OP#lOY#sOk#aOx#YOy#ZO{#[O!T&qO!c#cO!d#WO!f#XO!l#lO#b#_O#c#`O#d#`O#e#`O#f#bO#g#cO#h#cO#i#rO#j#cO#l#dO#n#fO#p#hO#q#iO'qRO'|#jO(T#]O(U#^O~O!Q'uX~P?TO!Q&vO~O!Q(PX!T(PX!_(PX!e(PX'|(PX~O#S(PX#_#WX!U(PX~PAZO#S&wO!Q(RX!T(RX~O!T&xO!Q(QX~O!Q&{O~O#S#tO~PAZO!U&|O~P`Ox#YOy#ZO{#[O!d#WO!f#XO'qROP!haY!hak!ha!T!ha!c!ha!l!ha#b!ha#c!ha#d!ha#e!ha#f!ha#g!ha#h!ha#i!ha#j!ha#l!ha#n!ha#p!ha#q!ha'|!ha(T!ha(U!ha~O^!ha'd!ha'`!ha!Q!ha!e!hao!ha!V!ha%[!ha!_!ha~PBqO!e&}O~O{%WO!V%XO!tXO#]'QO#^'PO'i$tO~O!_#UO#S'SO'|'RO!T(OX^(OX'd(OX~O!e(OX~PEuO!T'VO!e'}X~O!e'XO~O{%WO!V%XO#^'PO'i$tO~Ox'YOy'ZO!d#WO!f#XO!t!sa{!sa~O!p!sa%Z!sa!V!sa#]!sa#^!sa'i!sa~PF}O!p'_O~OPUOQUO[gOa!aOb!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!VTO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#{!bO$PbO'i![O'qRO'{WO(YeO~O[$SOi$cOk$TOl$SOm$SOr$dOt$eOv;gO{$[O!V$]O!a<pO!f$XO#^;mO#{$iO$h;iO$j;kO$m$jO'i'cO'm$bO'q$UO~O#_'eO~O[$SOi$cOk$TOl$SOm$SOr$dOt$eOv$fO{$[O!V$]O!a$kO!f$XO#^$lO#{$iO$h$gO$j$hO$m$jO'i'cO'm$bO'q$UO~Od'xP~PKeO!S'iO!e'yP~P$}O'r'kO'{WO~O{'mO!f#XO'r'kO'{WO~OP;OOQ;OO[gOa<lOb!`OigOk;OOlgOmgOrgOt;OOv;OO{SO!OgO!PgO!V!]O!a;RO!fVO!i;OO!j;OO!k;OO!l;OO!m;OO!p!_O#{!bO$PbO'i'{O'qRO'{WO(Y<jO~Oy(OO!f#XO~O!T#pO^$fa'd$fa'`$fa!e$fa!Q$fa!V$fa%[$fa!_$fa~O#k(SO~PJOOx(VO!_(UO!V$SX$O$SX$R$SX$T$SX$[$SX~O!_(UO!V(VX$O(VX$R(VX$T(VX$[(VX~Ox(VO~P!#TOx(VO!V(VX$O(VX$R(VX$T(VX$[(VX~O!V(XO$O(]O$R(WO$T(WO$[(^O~O!S(aO~PMnO$R#vO$T#uO$[(dO~Og$nXx$nX{$nX!d$nX(T$nX(U$nX~OdfXd$nXgfX!TfX#SfX~P!$yOl(fO~OR(gO'b(hO'c(jO~Og(sOx(lO{(mO(T(oO(U(qO~Od(kO~P!&SOd(tO~O[$SOi$cOk$TOl$SOm$SOr$dOt$eOv;gO{$[O!V$]O!a<pO!f$XO#^;mO#{$iO$h;iO$j;kO$m$jO'm$bO'q$UO~O!S(xO'i(uO!e(ZP~P!&qO#_(zO~O!f({O~O!S)QO'i(}O!Q([P~P!&qOk)_O{)VO!Y)]O!Z)UO![)UO!f({O#O)^O%R)XO'j$vO'r)SO~O!U)[O~P!(tO!d#WOg'pXx'pX{'pX(T'pX(U'pX!T'pX#S'pX~Od'pX#t'pX~P!)mOg)bO#S)aOd'oX!T'oX~O!T)cOd'nX~O'i%^Od'nP~O!f)jO~O'i'cO~O{%WO!S!xO!V%XO!tXO#]!{O#^!xO'i$tO!e'}P~O!_#UO#_)nO~OP#lOY#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#b#_O#c#`O#d#`O#e#`O#f#bO#g#cO#h#cO#i#rO#j#cO#l#dO#n#fO#p#hO#q#iO'qRO'|#jO(T#]O(U#^O~O^!`a!T!`a'd!`a'`!`a!Q!`a!e!`ao!`a!V!`a%[!`a!_!`a~P!,POg)uO!V&cO%[)tO'm$bO~O!_)wO!V'lX^'lX!T'lX'd'lX~O!f$mO'm$bO~O!f$mO'i$tO'm$bO~O!_#UO#_'eO~O[*SO%]*TO'i*PO!U(cP~O!T*UO](bX~O'r'kO~OY*YO~O]*ZO~O!V%OO'i$tO'j$vO](bP~O{%WO!S*_O!T&xO!V%XO'i$tO!Q(QP~O[&_Ol&_O{*aO!S*`O'r'kO~O!U(SP~P!1aO!T*bO^(_X'd(_X~O#S*fO'm$bO~Og*iO!V$]O'm$bO~O!V*kO~Ox*mO!VTO~O!p*rO~Ob*wO~O'i!|O!U(aP~Ob$|O~O%]xO'i%^O~P9wOY*}O]*|O~OPUOQUO[gOarObqOigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!ppO!tXO$PbO%ZuO'qRO'{WO(YeO~O!V!]O#{!bO'i![O~P!3qO]*|O^$pO'd$pO~O^+RO#k+TO%_+TO%`+TO~P$}O!f%qO~O&O+YO~O!V+[O~O&a+^O&c+_OP&^aQ&^aW&^a[&^a^&^aa&^ab&^ai&^ak&^al&^am&^ar&^at&^av&^a{&^a!O&^a!P&^a!V&^a!a&^a!f&^a!i&^a!j&^a!k&^a!l&^a!m&^a!p&^a!t&^a#k&^a#{&^a$P&^a%Z&^a%]&^a%_&^a%`&^a%c&^a%e&^a%h&^a%i&^a%k&^a%x&^a&O&^a&Q&^a&S&^a&U&^a&X&^a&_&^a&e&^a&g&^a&i&^a&k&^a&m&^a'`&^a'i&^a'q&^a'{&^a(Y&^a!U&^a&V&^a_&^a&[&^a~O'i+dO~O!TzX!T!]X!UzX!U!]X!_zX!_!]X!f!]X#SzX'm!]X~O!_+iO#S+hO!T#[X!T'wX!U#[X!U'wX!_'wX!f'wX'm'wX~O!_+kO!f$mO'm$bO!T!XX!U!XX~O[&VOl&VO{+lO'r)SO~OP;OOQ;OO[gOa<lOb!`OigOk;OOlgOmgOrgOt;OOv;OO{SO!OgO!PgO!V!]O!a;RO!fVO!i;OO!j;OO!k;OO!l;OO!m;OO!p!_O#{!bO$PbO'qRO'{WO(Y<jO~O'i;qO~P!<}O!T+pO!U'vX~O!U+rO~O!_+iO#S+hO!T#[X!U#[X~O!T+sO!U(SX~O!U+uO~O[&VOl&VO{+lO'j$vO'r)SO~O!Z+vO![+vO~P!?{O^+{O!U+}O!Y,OO!Z+zO![+zO!t;PO!x,SO!y,QO!z,RO!{,PO#O,TO#P,TO'{+xO~P!?{Og,WO!V&cO~Oo,]O~O!Q&ta!T&ta~P!,PO!S,aO!Q&tX!T&tX~P$}O!T&qO!Q'ua~O!Q'ua~P?TO!T&xO!Q(Qa~O{%WO!S,eO!V%XO'i$tO!Q&zX!T&zX~O!T'VO!e'}a~O{%WO!V%XO#^,hO'i$tO~O#S,jO!T(Oa!e(Oa^(Oa'd(Oa~O!_#UO~P!CnO{%WO!S,mO!V%XO!tXO#],oO#^,mO'i$tO!T&|X!e&|X~Oy,sO!f#XO~Og,vO!V&cO%[,uO'm$bO~O^#Vi!T#Vi'd#Vi'`#Vi!Q#Vi!e#Vio#Vi!V#Vi%[#Vi!_#Vi~P!,POg<vOx(lO{(mO(T(oO(U(qO~O#_#Ra!T#Ra!e#Ra#S#Ra!V#Ra^#Ra'd#Ra!Q#Ra~P!FPO#_'pXP'pXY'pX^'pXk'pXy'pX!c'pX!f'pX!l'pX#b'pX#c'pX#d'pX#e'pX#f'pX#g'pX#h'pX#i'pX#j'pX#l'pX#n'pX#p'pX#q'pX'd'pX'q'pX'|'pX!e'pX!Q'pX'`'pXo'pX!V'pX%['pX!_'pX~P!)mO!T-POd'xX~P!&SOd-RO~O!T-SO!e'yX~P!,PO!e-VO~O!Q-XO~OP#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO'qROY#ai^#aik#ai!T#ai!c#ai#c#ai#d#ai#e#ai#f#ai#g#ai#h#ai#i#ai#j#ai#l#ai#n#ai#p#ai#q#ai'd#ai'|#ai(T#ai(U#ai'`#ai!Q#ai!e#aio#ai!V#ai%[#ai!_#ai~O#b#ai~P!I{O#b#_O~P!I{OP#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#b#_O#c#`O#d#`O#e#`O'qROY#ai^#ai!T#ai!c#ai#f#ai#g#ai#h#ai#i#ai#j#ai#l#ai#n#ai#p#ai#q#ai'd#ai'|#ai(T#ai(U#ai'`#ai!Q#ai!e#aio#ai!V#ai%[#ai!_#ai~Ok#ai~P!LmOk#aO~P!LmOP#lOk#aOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#b#_O#c#`O#d#`O#e#`O#f#bO'qRO^#ai!T#ai#l#ai#n#ai#p#ai#q#ai'd#ai'|#ai(T#ai(U#ai'`#ai!Q#ai!e#aio#ai!V#ai%[#ai!_#ai~OY#ai!c#ai#g#ai#h#ai#i#ai#j#ai~P# _OY#sO!c#cO#g#cO#h#cO#i#rO#j#cO~P# _OP#lOY#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#b#_O#c#`O#d#`O#e#`O#f#bO#g#cO#h#cO#i#rO#j#cO#l#dO'qRO^#ai!T#ai#n#ai#p#ai#q#ai'd#ai'|#ai(U#ai'`#ai!Q#ai!e#aio#ai!V#ai%[#ai!_#ai~O(T#ai~P#$`O(T#]O~P#$`OP#lOY#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#b#_O#c#`O#d#`O#e#`O#f#bO#g#cO#h#cO#i#rO#j#cO#l#dO#n#fO'qRO(T#]O^#ai!T#ai#p#ai#q#ai'd#ai'|#ai'`#ai!Q#ai!e#aio#ai!V#ai%[#ai!_#ai~O(U#ai~P#'QO(U#^O~P#'QOP#lOY#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#b#_O#c#`O#d#`O#e#`O#f#bO#g#cO#h#cO#i#rO#j#cO#l#dO#n#fO#p#hO'qRO(T#]O(U#^O~O^#ai!T#ai#q#ai'd#ai'|#ai'`#ai!Q#ai!e#aio#ai!V#ai%[#ai!_#ai~P#)rOPZXYZXkZXxZXyZX{ZX!cZX!dZX!fZX!lZX#SZX#_cX#bZX#cZX#dZX#eZX#fZX#gZX#hZX#iZX#jZX#lZX#nZX#pZX#qZX#vZX'qZX'|ZX(TZX(UZX!TZX!UZX~O#tZX~P#,]OP#lOY;eOk;XOx#YOy#ZO{#[O!c;ZO!d#WO!f#XO!l#lO#b;VO#c;WO#d;WO#e;WO#f;YO#g;ZO#h;ZO#i;dO#j;ZO#l;[O#n;^O#p;`O#q;aO'qRO'|#jO(T#]O(U#^O~O#t-ZO~P#.jOP'tXY'tXk'tXx'tXy'tX{'tX!c'tX!d'tX!f'tX!l'tX#b'tX#c'tX#d'tX#e'tX#f'tX#g'tX#h'tX#i'tX#l'tX#n'tX#p'tX#q'tX'q'tX'|'tX(T'tX(U'tX!T'tX~O#S;fO#v;fO#j'tX#t'tX!U'tX~P#0hO^'Pa!T'Pa'd'Pa'`'Pa!e'Pao'Pa!Q'Pa!V'Pa%['Pa!_'Pa~P!,POP#aiY#ai^#aik#aiy#ai!T#ai!c#ai!d#ai!f#ai!l#ai#b#ai#c#ai#d#ai#e#ai#f#ai#g#ai#h#ai#i#ai#j#ai#l#ai#n#ai#p#ai#q#ai'd#ai'q#ai'|#ai'`#ai!Q#ai!e#aio#ai!V#ai%[#ai!_#ai~P!FPO^#ui!T#ui'd#ui'`#ui!Q#ui!e#uio#ui!V#ui%[#ui!_#ui~P!,PO$R-^O$T-^O~O$R-_O$T-_O~O!_(UO#S-`O!V$XX$O$XX$R$XX$T$XX$[$XX~O!S-aO~O!V(XO$O-cO$R(WO$T(WO$[-dO~O!T;bO!U'sX~P#.jO!U-eO~O$[-gO~OR(gO'b(hO'c-jO~O[-mOl-mO!Q-nO~O!TcX!_cX!ecX!e$nX'|cX~P!$yO!e-tO~P!FPO!T-uO!_#UO'|'RO!e(ZX~O!e-zO~O!S(xO'i$tO!e(ZP~O#_-|O~O!Q$nX!T$nX!_$uX~P!$yO!T-}O!Q([X~P!FPO!_.PO~O!Q.RO~Ok.VO!_#UO!f$mO'm$bO'|'RO~O'i.XO~O!_)wO~O^$pO!T.]O'd$pO~O!U._O~P!(tO!Z.`O![.`O'j$vO'r)SO~O{.bO'r)SO~O#O.cO~O'i%^Od'UX!T'UX~O!T)cOd'na~Od.hO~Ox.iOy.iO{.jOgua(Tua(Uua!Tua#Sua~Odua#tua~P#<vOx(lO{(mOg$ga(T$ga(U$ga!T$ga#S$ga~Od$ga#t$ga~P#=lOx(lO{(mOg$ia(T$ia(U$ia!T$ia#S$ia~Od$ia#t$ia~P#>_O[.kO~O#_.lO~Od$wa!T$wa#S$wa#t$wa~P!&SO#_.oO~Og,vO!V&cO%[,uO~O[$SOk$TOl$SOm$SOr$dOt$eOv;gO{$[O!V$]O!a<pO!f$XO#^;mO#{$iO$h;iO$j;kO$m$jO'm$bO'q$UO~Oi.vO'i.uO~P#?|O!_)wO!V'la^'la!T'la'd'la~O#_.|O~OYZX!TcX!UcX~O!T.}O!U(cX~O!U/PO~OY/QO~O[/SO'i*PO~O!V%OO'i$tO]'^X!T'^X~O!T*UO](ba~O!e/VO~P!,PO[/XO~OY/YO~O]/ZO~O!T*bO^(_a'd(_a~O#S/aO~Og/dO!V$]O~O'r'kO!U(`P~Og/mO!V/jO%[/lO'm$bO~OY/wO!T/uO!U(aX~O!U/xO~O]/zO^$pO'd$pO~O[/{O~O[/|O'i!|O~O#S#tO#j/}O#v#tO%|0OO^'tX~P#0hO#S#tO#j/}O%|0OO~O^0PO~P$}O^0RO~O&V0VOP&TiQ&TiW&Ti[&Ti^&Tia&Tib&Tii&Tik&Til&Tim&Tir&Tit&Tiv&Ti{&Ti!O&Ti!P&Ti!V&Ti!a&Ti!f&Ti!i&Ti!j&Ti!k&Ti!l&Ti!m&Ti!p&Ti!t&Ti#k&Ti#{&Ti$P&Ti%Z&Ti%]&Ti%_&Ti%`&Ti%c&Ti%e&Ti%h&Ti%i&Ti%k&Ti%x&Ti&O&Ti&Q&Ti&S&Ti&U&Ti&X&Ti&_&Ti&e&Ti&g&Ti&i&Ti&k&Ti&m&Ti'`&Ti'i&Ti'q&Ti'{&Ti(Y&Ti!U&Ti_&Ti&[&Ti~O_0]O!U0ZO&[0[O~P`O!VTO!f0_O~O&c+_OP&^iQ&^iW&^i[&^i^&^ia&^ib&^ii&^ik&^il&^im&^ir&^it&^iv&^i{&^i!O&^i!P&^i!V&^i!a&^i!f&^i!i&^i!j&^i!k&^i!l&^i!m&^i!p&^i!t&^i#k&^i#{&^i$P&^i%Z&^i%]&^i%_&^i%`&^i%c&^i%e&^i%h&^i%i&^i%k&^i%x&^i&O&^i&Q&^i&S&^i&U&^i&X&^i&_&^i&e&^i&g&^i&i&^i&k&^i&m&^i'`&^i'i&^i'q&^i'{&^i(Y&^i!U&^i&V&^i_&^i&[&^i~O!Q0eO~O!T!Xa!U!Xa~P#.jO!S0lO!Y&bO!Z&ZO![&ZO!T&uX!U&uX~P!?{O!T+pO!U'va~O!T&{X!U&{X~P!1aO!T+sO!U(Sa~O!Y0uO!Z0tO![0tO!t;PO!x0xO!y0wO!z0wO!{0vO#O0yO#P0yO'{+xO~P!?{O^$pO!_#UO!f$mO!l1OO#S0|O'd$pO'm$bO'|'RO~O[&VOl&VO{+lO'r)SO'{+xO~O^+{O!U1RO!Y,OO!Z+zO![+zO!t;PO!x,SO!y,QO!z,RO!{,PO#O,TO#P,TO'{+xO~P!?{O!Z0tO![0tO'{+xO~P!?{O!Y0uO!Z0tO![0tO#O0yO#P0yO'{+xO~P!?{O!VTO!Y0uO!Z0tO![0tO!{0vO#O0yO#P0yO'{+xO~P!?{O!Y0uO!Z0tO![0tO!y0wO!z0wO!{0vO#O0yO#P0yO'{+xO~P!?{O!T#pOo$fa~O!Q&ti!T&ti~P!,PO!T&qO!Q'ui~O!T&xO!Q(Qi~O!Q(Ri!T(Ri~P!,PO!T'VO!e'}i~O!T(Oi!e(Oi^(Oi'd(Oi~P!,PO#S1^O!T(Oi!e(Oi^(Oi'd(Oi~O{%WO!V%XO!tXO#]1aO#^1`O'i$tO~O{%WO!V%XO#^1`O'i$tO~Og1hO!V&cO%[1gO~Og1hO!V&cO%[1gO'm$bO~O#_uaPuaYua^uakua!cua!dua!fua!lua#bua#cua#dua#eua#fua#gua#hua#iua#jua#lua#nua#pua#qua'dua'qua'|ua!eua!Qua'`uaoua!Vua%[ua!_ua~P#<vO#_$gaP$gaY$ga^$gak$gay$ga!c$ga!d$ga!f$ga!l$ga#b$ga#c$ga#d$ga#e$ga#f$ga#g$ga#h$ga#i$ga#j$ga#l$ga#n$ga#p$ga#q$ga'd$ga'q$ga'|$ga!e$ga!Q$ga'`$gao$ga!V$ga%[$ga!_$ga~P#=lO#_$iaP$iaY$ia^$iak$iay$ia!c$ia!d$ia!f$ia!l$ia#b$ia#c$ia#d$ia#e$ia#f$ia#g$ia#h$ia#i$ia#j$ia#l$ia#n$ia#p$ia#q$ia'd$ia'q$ia'|$ia!e$ia!Q$ia'`$iao$ia!V$ia%[$ia!_$ia~P#>_O#_$waP$waY$wa^$wak$way$wa!T$wa!c$wa!d$wa!f$wa!l$wa#b$wa#c$wa#d$wa#e$wa#f$wa#g$wa#h$wa#i$wa#j$wa#l$wa#n$wa#p$wa#q$wa'd$wa'q$wa'|$wa!e$wa!Q$wa'`$wa#S$wao$wa!V$wa%[$wa!_$wa~P!FPO^#Vq!T#Vq'd#Vq'`#Vq!Q#Vq!e#Vqo#Vq!V#Vq%[#Vq!_#Vq~P!,POd&vX!T&vX~PKeO!T-POd'xa~O!S1pO!T&wX!e&wX~P$}O!T-SO!e'ya~O!T-SO!e'ya~P!,PO!Q1sO~O#t!ha!U!ha~PBqO#t!`a!T!`a!U!`a~P#.jO!V2UO$PbO$Y2VO~O!U2ZO~Oo2[O~P!FPO^$cq!T$cq'd$cq'`$cq!Q$cq!e$cqo$cq!V$cq%[$cq!_$cq~P!,PO!Q2]O~O[-mOl-mO~Ox(lO{(mO(U(qOg%Si(T%Si!T%Si#S%Si~Od%Si#t%Si~P$7POx(lO{(mOg%Ui(T%Ui(U%Ui!T%Ui#S%Ui~Od%Ui#t%Ui~P$7rO'|#jO~P!FPO!S2`O'i$tO!T'QX!e'QX~O!T-uO!e(Za~O!T-uO!_#UO!e(Za~O!T-uO!_#UO'|'RO!e(Za~Od$pi!T$pi#S$pi#t$pi~P!&SO!S2hO'i(}O!Q'SX!T'SX~P!&qO!T-}O!Q([a~O!T-}O!Q([a~P!FPO!_#UO~O!_#UO#j2pO~Ok2sO!_#UO'|'RO~Od'oi!T'oi~P!&SO#S2vOd'oi!T'oi~P!&SO!e2yO~O^$dq!T$dq'd$dq'`$dq!Q$dq!e$dqo$dq!V$dq%[$dq!_$dq~P!,PO!T2}O!V(]X~P!FPO!d#WO~P1nO!V$nX%PZX^$nX!T$nX'd$nX~P!$yO%P3POghXxhX{hX!VhX(ThX(UhX^hX!ThX'dhX~O%P3PO~O[3VO%]3WO'i*PO!T']X!U']X~O!T.}O!U(ca~OY3[O~O]3]O~O[3`O~O!Q3aO~O^$pO'd$pO~P!FPO!V$]O~P!FPO!T3fO#S3hO!U(`X~O!U3iO~O[&VOl&VO{3kO!Y3xO!Z3oO![3oO!t;PO!x3wO!y3vO!z3vO!{3uO#O3tO#P,TO'j$vO'r)SO'{+xO~O!U3sO~P$?xOg3}O!V/jO%[3|O~Og3}O!V/jO%[3|O'm$bO~O'i!|O!T'[X!U'[X~O!T/uO!U(aa~O[4XO'r4WO~O[4YO~O]4[O~O!e4_O~P$}O^4aO~O^4aO~P$}O#j4cO%|4dO~PEuO_0]O!U4hO&[0[O~P`O!_4jO~O!_4lO!T'wi!U'wi!_'wi!f'wi'm'wi~O!T#[i!U#[i~P#.jO#S4mO!T#[i!U#[i~O!T!Xi!U!Xi~P#.jO!Q4nO~O[!sal!sa!Y!sa!Z!sa![!sa!x!sa!y!sa!z!sa!{!sa#O!sa#P!sa'j!sa'r!sa'{!sa~PF}O^$pO!_#UO!f$mO!l4vO#S4tO'd$pO'm$bO'|'RO~O!Z4xO![4xO'{+xO~P!?{O!Y4zO!Z4xO![4xO#O4{O#P4{O'{+xO~P!?{O!Y4zO!Z4xO![4xO!{4|O#O4{O#P4{O'{+xO~P!?{O!Y4zO!Z4xO![4xO!y4}O!z4}O!{4|O#O4{O#P4{O'{+xO~P!?{O^$pO#S4tO'd$pO~O^$pO!_#UO#S4tO'd$pO~O^$pO!_#UO!l4vO#S4tO'd$pO'|'RO~O!T'VO!e'}q~O!T(Oq!e(Oq^(Oq'd(Oq~P!,PO{%WO!V%XO#^5XO'i$tO~O!V&cO%[5[O~Og5_O!V&cO%[5[O~O#_%SiP%SiY%Si^%Sik%Siy%Si!c%Si!d%Si!f%Si!l%Si#b%Si#c%Si#d%Si#e%Si#f%Si#g%Si#h%Si#i%Si#j%Si#l%Si#n%Si#p%Si#q%Si'd%Si'q%Si'|%Si!e%Si!Q%Si'`%Sio%Si!V%Si%[%Si!_%Si~P$7PO#_%UiP%UiY%Ui^%Uik%Uiy%Ui!c%Ui!d%Ui!f%Ui!l%Ui#b%Ui#c%Ui#d%Ui#e%Ui#f%Ui#g%Ui#h%Ui#i%Ui#j%Ui#l%Ui#n%Ui#p%Ui#q%Ui'd%Ui'q%Ui'|%Ui!e%Ui!Q%Ui'`%Uio%Ui!V%Ui%[%Ui!_%Ui~P$7rO#_$piP$piY$pi^$pik$piy$pi!T$pi!c$pi!d$pi!f$pi!l$pi#b$pi#c$pi#d$pi#e$pi#f$pi#g$pi#h$pi#i$pi#j$pi#l$pi#n$pi#p$pi#q$pi'd$pi'q$pi'|$pi!e$pi!Q$pi'`$pi#S$pio$pi!V$pi%[$pi!_$pi~P!FPOd&va!T&va~P!&SO!T&wa!e&wa~P!,PO!T-SO!e'yi~O#t#Vi!T#Vi!U#Vi~P#.jOP#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO'qROY#aik#ai!c#ai#c#ai#d#ai#e#ai#f#ai#g#ai#h#ai#i#ai#j#ai#l#ai#n#ai#p#ai#q#ai#t#ai'|#ai(T#ai(U#ai!T#ai!U#ai~O#b#ai~P%$XO#b;VO~P%$XOP#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#b;VO#c;WO#d;WO#e;WO'qROY#ai!c#ai#f#ai#g#ai#h#ai#i#ai#j#ai#l#ai#n#ai#p#ai#q#ai#t#ai'|#ai(T#ai(U#ai!T#ai!U#ai~Ok#ai~P%&dOk;XO~P%&dOP#lOk;XOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#b;VO#c;WO#d;WO#e;WO#f;YO'qRO#l#ai#n#ai#p#ai#q#ai#t#ai'|#ai(T#ai(U#ai!T#ai!U#ai~OY#ai!c#ai#g#ai#h#ai#i#ai#j#ai~P%(oOY;eO!c;ZO#g;ZO#h;ZO#i;dO#j;ZO~P%(oOP#lOY;eOk;XOx#YOy#ZO{#[O!c;ZO!d#WO!f#XO!l#lO#b;VO#c;WO#d;WO#e;WO#f;YO#g;ZO#h;ZO#i;dO#j;ZO#l;[O'qRO#n#ai#p#ai#q#ai#t#ai'|#ai(U#ai!T#ai!U#ai~O(T#ai~P%+ZO(T#]O~P%+ZOP#lOY;eOk;XOx#YOy#ZO{#[O!c;ZO!d#WO!f#XO!l#lO#b;VO#c;WO#d;WO#e;WO#f;YO#g;ZO#h;ZO#i;dO#j;ZO#l;[O#n;^O'qRO(T#]O#p#ai#q#ai#t#ai'|#ai!T#ai!U#ai~O(U#ai~P%-fO(U#^O~P%-fOP#lOY;eOk;XOx#YOy#ZO{#[O!c;ZO!d#WO!f#XO!l#lO#b;VO#c;WO#d;WO#e;WO#f;YO#g;ZO#h;ZO#i;dO#j;ZO#l;[O#n;^O#p;`O'qRO(T#]O(U#^O~O#q#ai#t#ai'|#ai!T#ai!U#ai~P%/qO^#ry!T#ry'd#ry'`#ry!Q#ry!e#ryo#ry!V#ry%[#ry!_#ry~P!,POg<wOx(lO{(mO(T(oO(U(qO~OP#aiY#aik#aiy#ai!c#ai!d#ai!f#ai!l#ai#b#ai#c#ai#d#ai#e#ai#f#ai#g#ai#h#ai#i#ai#j#ai#l#ai#n#ai#p#ai#q#ai#t#ai'q#ai'|#ai!T#ai!U#ai~P%2iO!d#WOP'pXY'pXg'pXk'pXx'pXy'pX{'pX!c'pX!f'pX!l'pX#b'pX#c'pX#d'pX#e'pX#f'pX#g'pX#h'pX#i'pX#j'pX#l'pX#n'pX#p'pX#q'pX#t'pX'q'pX'|'pX(T'pX(U'pX!T'pX!U'pX~O#t#ui!T#ui!U#ui~P#.jO!U5kO~O!T'Pa!U'Pa~P#.jO!_#UO'|'RO!T'Qa!e'Qa~O!T-uO!e(Zi~O!T-uO!_#UO!e(Zi~Od$pq!T$pq#S$pq#t$pq~P!&SO!Q'Sa!T'Sa~P!FPO!_5rO~O!T-}O!Q([i~P!FPO!T-}O!Q([i~O!Q5vO~O!_#UO#j5{O~Ok5|O!_#UO'|'RO~O!Q6OO~Od$rq!T$rq#S$rq#t$rq~P!&SO^$dy!T$dy'd$dy'`$dy!Q$dy!e$dyo$dy!V$dy%[$dy!_$dy~P!,PO!T2}O!V(]a~O^#Vy!T#Vy'd#Vy'`#Vy!Q#Vy!e#Vyo#Vy!V#Vy%[#Vy!_#Vy~P!,POY6TO~O[6VO'i*PO~O!T.}O!U(ci~O[6YO~O]6ZO~O!_4lO~O'r'kO!T'XX!U'XX~O!T3fO!U(`a~O!f$mO'm$bO^'wX!_'wX!l'wX#S'wX'd'wX'|'wX~O'i6dO~P,RO!t;PO!x6gO!y6fO!z6fO!{6eO#O0yO#P0yO~P$#kO^$pO!_#UO!l1OO#S0|O'd$pO'|'RO~O!U6kO~P$?xO[&VOl&VO{6lO'r)SO'{+xO~O!Y6pO!Z6oO![6oO!{6eO#O0yO#P0yO'{+xO~P!?{O!Y6pO!Z6oO![6oO!y6qO!z6qO!{6eO#O0yO#P0yO'{+xO~P!?{O!Z6oO![6oO'j$vO'r)SO'{+xO~O!V/jO~O!V/jO%[6sO~Og6vO!V/jO%[6sO~OY6{O!T'[a!U'[a~O!T/uO!U(ai~O[7OO~O!e7PO~O!e7QO~O!e7RO~O!e7RO~P$}O^7TO~O!_7WO~O!e7XO~O!T(Ri!U(Ri~P#.jO^$pO#S7`O'd$pO~O^$pO!_#UO#S7`O'd$pO~O^$pO!_#UO!f$mO!l7dO#S7`O'd$pO'm$bO'|'RO~O!Z7eO![7eO'{+xO~P!?{O!Y7hO!Z7eO![7eO#O7iO#P7iO'{+xO~P!?{O!Y7hO!Z7eO![7eO!{7jO#O7iO#P7iO'{+xO~P!?{O^$pO!_#UO!l7dO#S7`O'd$pO'|'RO~O^$pO'd$pO~P!,PO!T'VO!e'}y~O!T(Oy!e(Oy^(Oy'd(Oy~P!,PO!V&cO%[7nO~O#_$pqP$pqY$pq^$pqk$pqy$pq!T$pq!c$pq!d$pq!f$pq!l$pq#b$pq#c$pq#d$pq#e$pq#f$pq#g$pq#h$pq#i$pq#j$pq#l$pq#n$pq#p$pq#q$pq'd$pq'q$pq'|$pq!e$pq!Q$pq'`$pq#S$pqo$pq!V$pq%[$pq!_$pq~P!FPO#_$rqP$rqY$rq^$rqk$rqy$rq!T$rq!c$rq!d$rq!f$rq!l$rq#b$rq#c$rq#d$rq#e$rq#f$rq#g$rq#h$rq#i$rq#j$rq#l$rq#n$rq#p$rq#q$rq'd$rq'q$rq'|$rq!e$rq!Q$rq'`$rq#S$rqo$rq!V$rq%[$rq!_$rq~P!FPO!T&wi!e&wi~P!,PO#t#Vq!T#Vq!U#Vq~P#.jOx.iOy.iO{.jOPuaYuaguakua!cua!dua!fua!lua#bua#cua#dua#eua#fua#gua#hua#iua#jua#lua#nua#pua#qua#tua'qua'|ua(Tua(Uua!Tua!Uua~Ox(lO{(mOP$gaY$gag$gak$gay$ga!c$ga!d$ga!f$ga!l$ga#b$ga#c$ga#d$ga#e$ga#f$ga#g$ga#h$ga#i$ga#j$ga#l$ga#n$ga#p$ga#q$ga#t$ga'q$ga'|$ga(T$ga(U$ga!T$ga!U$ga~Ox(lO{(mOP$iaY$iag$iak$iay$ia!c$ia!d$ia!f$ia!l$ia#b$ia#c$ia#d$ia#e$ia#f$ia#g$ia#h$ia#i$ia#j$ia#l$ia#n$ia#p$ia#q$ia#t$ia'q$ia'|$ia(T$ia(U$ia!T$ia!U$ia~OP$waY$wak$way$wa!c$wa!d$wa!f$wa!l$wa#b$wa#c$wa#d$wa#e$wa#f$wa#g$wa#h$wa#i$wa#j$wa#l$wa#n$wa#p$wa#q$wa#t$wa'q$wa'|$wa!T$wa!U$wa~P%2iO#t$cq!T$cq!U$cq~P#.jO#t$dq!T$dq!U$dq~P#.jO!U7xO~O#t7yO~P!&SO!_#UO!T'Qi!e'Qi~O!_#UO'|'RO!T'Qi!e'Qi~O!T-uO!e(Zq~O!Q'Si!T'Si~P!FPO!T-}O!Q([q~O!Q8PO~P!FPO!Q8PO~Od'oy!T'oy~P!&SO!T'Va!V'Va~P!FPO!V%Oq^%Oq!T%Oq'd%Oq~P!FPOY8UO~O!T.}O!U(cq~O[8XO~O#S8YO!T'Xa!U'Xa~O!T3fO!U(`i~P#.jOPZXYZXkZXxZXyZX{ZX!QZX!TZX!cZX!dZX!fZX!lZX#SZX#_cX#bZX#cZX#dZX#eZX#fZX#gZX#hZX#iZX#jZX#lZX#nZX#pZX#qZX#vZX'qZX'|ZX(TZX(UZX~O!_$|X#j$|X~P&)nO#O4{O#P4{O~P$#kO!{8^O#O4{O#P4{O~P$#kO!y8_O!z8_O!{8^O#O4{O#P4{O~P$#kO!Z8bO![8bO'j$vO'r)SO'{+xO~O!Y8eO!Z8bO![8bO!{8^O#O4{O#P4{O'{+xO~P!?{O!V/jO%[8hO~O[8nO'r8mO~O!T/uO!U(aq~O!e8pO~O!e8pO~P$}O!e8rO~O!e8sO~O#S8uO!T#[y!U#[y~O!T#[y!U#[y~P#.jO^$pO#S8xO'd$pO~O^$pO!_#UO#S8xO'd$pO~O^$pO!_#UO!l8}O#S8xO'd$pO'|'RO~O!f$mO'm$bO~P&/vO!Z9OO![9OO'{+xO~P!?{O!Y9RO!Z9OO![9OO#O9SO#P9SO'{+xO~P!?{O!V&cO%[9VO~O#t#ry!T#ry!U#ry~P#.jOP$piY$pik$piy$pi!c$pi!d$pi!f$pi!l$pi#b$pi#c$pi#d$pi#e$pi#f$pi#g$pi#h$pi#i$pi#j$pi#l$pi#n$pi#p$pi#q$pi#t$pi'q$pi'|$pi!T$pi!U$pi~P%2iOx(lO{(mO(U(qOP%SiY%Sig%Sik%Siy%Si!c%Si!d%Si!f%Si!l%Si#b%Si#c%Si#d%Si#e%Si#f%Si#g%Si#h%Si#i%Si#j%Si#l%Si#n%Si#p%Si#q%Si#t%Si'q%Si'|%Si(T%Si!T%Si!U%Si~Ox(lO{(mOP%UiY%Uig%Uik%Uiy%Ui!c%Ui!d%Ui!f%Ui!l%Ui#b%Ui#c%Ui#d%Ui#e%Ui#f%Ui#g%Ui#h%Ui#i%Ui#j%Ui#l%Ui#n%Ui#p%Ui#q%Ui#t%Ui'q%Ui'|%Ui(T%Ui(U%Ui!T%Ui!U%Ui~O#t$dy!T$dy!U$dy~P#.jO#t#Vy!T#Vy!U#Vy~P#.jO!_#UO!T'Qq!e'Qq~O!T-uO!e(Zy~O!Q'Sq!T'Sq~P!FPO!Q9^O~P!FPO!T.}O!U(cy~O!T3fO!U(`q~O#O7iO#P7iO~P$#kO!{9eO#O7iO#P7iO~P$#kO!Z9iO![9iO'j$vO'r)SO'{+xO~O!V/jO%[9lO~O!e9oO~O^$pO#S9tO'd$pO~O^$pO!_#UO#S9tO'd$pO~O^$pO!_#UO!l9xO#S9tO'd$pO'|'RO~O!f$mO'm$bO~P&;OO!Z9yO![9yO'{+xO~P!?{O!V&cO%[9}O~OP$pqY$pqk$pqy$pq!c$pq!d$pq!f$pq!l$pq#b$pq#c$pq#d$pq#e$pq#f$pq#g$pq#h$pq#i$pq#j$pq#l$pq#n$pq#p$pq#q$pq#t$pq'q$pq'|$pq!T$pq!U$pq~P%2iOP$rqY$rqk$rqy$rq!c$rq!d$rq!f$rq!l$rq#b$rq#c$rq#d$rq#e$rq#f$rq#g$rq#h$rq#i$rq#j$rq#l$rq#n$rq#p$rq#q$rq#t$rq'q$rq'|$rq!T$rq!U$rq~P%2iOd%W!Z!T%W!Z#S%W!Z#t%W!Z~P!&SO!T'Xq!U'Xq~P#.jO#O9SO#P9SO~P$#kO!T#[!Z!U#[!Z~P#.jO^$pO#S:]O'd$pO~O^$pO!_#UO#S:]O'd$pO~O^$pO!_#UO!l:aO#S:]O'd$pO'|'RO~O#_%W!ZP%W!ZY%W!Z^%W!Zk%W!Zy%W!Z!T%W!Z!c%W!Z!d%W!Z!f%W!Z!l%W!Z#b%W!Z#c%W!Z#d%W!Z#e%W!Z#f%W!Z#g%W!Z#h%W!Z#i%W!Z#j%W!Z#l%W!Z#n%W!Z#p%W!Z#q%W!Z'd%W!Z'q%W!Z'|%W!Z!e%W!Z!Q%W!Z'`%W!Z#S%W!Zo%W!Z!V%W!Z%[%W!Z!_%W!Z~P!FPO^$pO#S:lO'd$pO~O^$pO!_#UO#S:lO'd$pO~O^$pO#S:wO'd$pO~OP%W!ZY%W!Zk%W!Zy%W!Z!c%W!Z!d%W!Z!f%W!Z!l%W!Z#b%W!Z#c%W!Z#d%W!Z#e%W!Z#f%W!Z#g%W!Z#h%W!Z#i%W!Z#j%W!Z#l%W!Z#n%W!Z#p%W!Z#q%W!Z#t%W!Z'q%W!Z'|%W!Z!T%W!Z!U%W!Z~P%2iOo'sX~P/WO!QcX!TcX#ScX~P&)nOPZXYZXkZXxZXyZX{ZX!TZX!TcX!cZX!dZX!fZX!lZX#SZX#ScX#_cX#bZX#cZX#dZX#eZX#fZX#gZX#hZX#iZX#jZX#lZX#nZX#pZX#qZX#vZX'qZX'|ZX(TZX(UZX~O!_cX!eZX!ecX'|cX~P&GPOP;OOQ;OO[gOa<lOb!`OigOk;OOlgOmgOrgOt;OOv;OO{SO!OgO!PgO!VTO!a;RO!fVO!i;OO!j;OO!k;OO!l;OO!m;OO!p!_O#{!bO$PbO'i'{O'qRO'{WO(Y<jO~O!T;bO!U$fa~O[$SOi$cOk$TOl$SOm$SOr$dOt$eOv;hO{$[O!V$]O!a<qO!f$XO#^;nO#{$iO$h;jO$j;lO$m$jO'i'cO'm$bO'q$UO~O#k(SO~P&KrO!UZX!UcX~P&GPO#_;UO~O!_#UO#_;UO~O#S;fO~O#j;ZO~O#S;oO!T(RX!U(RX~O#S;fO!T(PX!U(PX~O#_;pO~Od;rO~P!&SO#_;wO~O#_;xO~O!_#UO#_;yO~O!_#UO#_;pO~O#t;zO~P#.jO#_;{O~O#_;|O~O#_;}O~O#_<OO~O#_<PO~O#_<QO~O#t<RO~P!&SO#t<SO~P!&SO$P~!d!x!z!{#O#]#^#i(Y$h$j$m%P%Z%[%]%c%e%h%i%k%m~TS$P(Y#c!P'f'j#dl#b#ekx'g'r'g'i$R$T$R~",goto:"$$Z(gPPPPPPP(hP(xP*sPPPP.rPP/XP5P8pP9TP9TPPP9TP:s9TP9TP9TP:wPP:|P;g@VPPP@ZPPPP@ZCVPPPC]E[P@ZPGrPPPPI}@ZPPPPPLY@ZP! i!!k!!oP!#`!#d!#`PPPP!&j!(nPP!(v!*QP!!k@Z@Z!-d!0i!5l!5l!9^PPP!9e@ZPPPPPPPPPPP!<mP!>RPP@Z!?cP@ZP@Z@Z@Z@ZP@Z!@xPP!C{P!FzP!GO!GW!G[!G[P!CxP!G`!G`P!J_P!Jc@Z@Z!Ji!Mg9TP9TP9T9TP!Nq9T9T#!k9T#$x9T#&l9T9T#'Y#)U#)U#)Y#)b#)U#)jP#)UP9T#*f9T#+n9T9T.rPPP#,yPP#-c#-cP#-cP#-x#-cPP#.OP#-uP#-u#.b!(r#-u#.|#/S#/V(h#/Y(hP#/a#/a#/aP(hP(hP(hP(hPP(hP#/g#/jP#/j(hP#/nP#/qP(hP(hP(hP(hP(hP(h(hP#/w#0R#0X#0_#0m#0s#0y#1T#1Z#2U#2e#2k#2}#3T#3Z#3i#4O#5`#5n#5t#5z#6Q#6W#6b#6h#6n#6x#7[#7bPPPPPPPP#7hPP#8[#;vP#=c#=j#=rPP#A|#Dr#KO#KR#KU#MQ#MT#MWPP#M^#Mb#NZ$ Z$ _$ sPP$ w$ }$!RP$!U$!Y$!]$#R$#i$#n$#q$#t$#z$#}$$R$$VmlOTn!R!s$o%t%v%w%y+V+[0V0YQ${qQ%StQ%l}S&Z!]+pQ&i!`S)U$])ZQ)}$|Q*[%UQ*v%fQ+v&bS+z&c+|Q,[&jQ.`)]Q/t*w[0t+w,O,P,Q,R,SS3o/j3rW4x0u0v0w0xU6o3v3w3xU7e4z4|4}S8b6p6qS9O7h7jQ9i8eR9y9R$z`OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&o&q&w'S'e'i'm(k)n*a+R+V+[+l,W,a,j-S-Z.j.o.|/m/}0O0P0R0V0Y0[0|1^1p3k3}4a4c4d4t6l6v7T7`8x9t:]:l:wS#PX;P!l'}#k#|&[(a+h+k-a0l2U3h4m8Y8u;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<mQ)f$fQ*S%OQ*x%iQ+P%qQ,y;gQ.s)uQ.w)wQ/S*TQ/|*}Q1d,vQ3V.}Q4U/uQ5^1hQ5d;hQ6V3WR7q5_piOTn}!R!s$o%k%t%v%w%y+V+[0V0YR*z%m&l[OPTUnor!R!W!a!c!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&e&q&w'S'e'i'm(a(k)n)u*a+R+V+[+h+k+l,W,a,j,v-S-Z-a.j.o.|/m/}0O0P0R0V0Y0[0l0|1^1h1p2U3h3k3}4a4c4d4m4t5_6l6v7T7`8Y8u8x9t:]:l:w;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<l<m[!lSV!g!j&[&oQ$upQ$zqS%Pt%U!U%Yvw!v!x!{$m%W&x'P'Q'V*_*`*b+T+i,e,h,l,m,o0_1`1a4l5XQ%b{Q&f!_Q&h!`Q'^#RS(w$X({S)|${$|Q*Q%OQ*q%dQ*u%fS,Z&i&jQ,x'_Q-y(xQ.{)}Q/R*TQ/T*UQ/W*YQ/o*rS/s*v*wQ1Y,[Q2_-uQ3U.}Q3Y/QQ3_/YQ4T/tQ5o2`Q6U3WQ6X3[Q8T6TR9`8Uv$Ze#W$g$h$l(p(r(z)a)b-P-|.l2^2v7y<j<r<s!`$xq!`$z${$|&Y&h&i&j)T)|)}+m+y,Z,[.W.{0q0s1P1Y2r4w4y7c7g8|9Q9w:`Q)v$uQ*g%_Q*j%`Q*t%fQ,w'^Q/n*qU/r*u*v*wQ1i,xQ4O/oS4S/s/tS6c3j3nQ6z4TU8`6h6m6nU9g8a8c8dQ:T9hQ:g:U!z<n#U#r#s$X$[(g(s)Q)t)w*f*i,u-}.P/a/d/l1g2h2p2}3P3|5[5r5{6s7n8h9V9l9};i;k;m;s;u;w;{;}<R<v<wg<o;d;e;j;l;n;t;v;x;|<O<SW$`e$b)c<jS%_x%kQ%`yQ%azR*e%]$Z$_e#U#W#r#s$X$[$g$h$l(g(p(r(s(z)Q)a)b)t)w*f*i,u-P-|-}.P.l/a/d/l1g2^2h2p2v2}3P3|5[5r5{6s7n7y8h9V9l9};d;e;i;j;k;l;m;n;s;t;u;v;w;x;{;|;}<O<R<S<j<r<s<v<wT(h$U(iV)g$f;g;hU&_!]%X+sS'l#Y#ZQ*X%RS,q'Y'ZQ/e*kQ2w.iR6_3f&rgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&o&q&w'S'e'i'm(a(k)n)u*a+R+V+[+h+k+l,W,a,j,v-S-Z-a.j.o.|/m/}0O0P0R0V0Y0[0l0|1^1h1p2U3h3k3}4a4c4d4m4t5_6l6v7T7`8Y8u8x9t:]:l:w;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<m$c#o_!i!t$s&n&t'a'h'p'q'r's't'u'v'w'x'y'z'|(P(T(_*W+n,_,d,i-O-U-Y-[-k.m0f0i1]1o1t1u1v1w1x1y1z1{1|1}2O2P2Q2T2Y2{3S4p5Q5V5b5c5h5i6a7Z7^7r7v7w8w9b9p9r:Z:j:u:{;Q<aT!dR!e&sgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&o&q&w'S'e'i'm(a(k)n)u*a+R+V+[+h+k+l,W,a,j,v-S-Z-a.j.o.|/m/}0O0P0R0V0Y0[0l0|1^1h1p2U3h3k3}4a4c4d4m4t5_6l6v7T7`8Y8u8x9t:]:l:w;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<mQ&]!]R0m+p!x&V!]&Z&b&c+p+v+w+z+|,O,P,Q,R,S,T0t0u0v0w0x0y3l3t3u4x4z4{4|4}6e6f6g7e7h7i7j8^8_9O9R9S9e9yS)T$])ZS.W)U)]Q.a)^Q/g*mQ2r.`Q2u.cS3j/j3rS6h3o3xS6m3v3wS8a6o6pQ8c6qS9h8b8eR:U9illOTn!R!s$o%t%v%w%y+V+[0V0YQ%{!US'`#T;UQ)z$yQ*o%bQ*p%cQ,X&gS,}'e;pS.n)n;yQ.y){Q/i*nQ0^+^Q0`+_Q0h+jQ1S,QQ1W,YS2|.o<PQ3Q.zS3T.|<QQ4o0kQ5P0zQ5S1XQ6S3RQ7[4qQ7]4rQ7k5TQ8t7XQ8y7bQ9s8zQ:[9uQ:k:^R:v:m$^#n_!i!t&n&t'a'h'p'q'r's't'u'v'w'x'y'z'|(P(T(_*W+n,_,d,i-O-U-Y-k.m0f0i1]1o1t1u1v1w1x1y1z1{1|1}2O2P2Q2T2Y2{3S4p5Q5V5b5c5h5i6a7Z7^7r7v7w8w9b9p9r:Z:j:u:{;Q<aS']#O0rU)`$^'d2SS)r$s-[Q1e.sQ5Z1dQ7p5^R9W7q$^#m_!i!t&n&t'a'h'p'q'r's't'u'v'w'x'y'z'|(P(T(_*W+n,_,d,i-O-U-Y-k.m0f0i1]1o1t1u1v1w1x1y1z1{1|1}2O2P2Q2T2Y2{3S4p5Q5V5b5c5h5i6a7Z7^7r7v7w8w9b9p9r:Z:j:u:{;Q<aS'[#O0rS'n#Z#nS)q$s-[S,r'Z']Q-](OQ.p)rR1b,s&rgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&o&q&w'S'e'i'm(a(k)n)u*a+R+V+[+h+k+l,W,a,j,v-S-Z-a.j.o.|/m/}0O0P0R0V0Y0[0l0|1^1h1p2U3h3k3}4a4c4d4m4t5_6l6v7T7`8Y8u8x9t:]:l:w;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<mS#PX;PQ%v!PQ%w!QQ%y!SQ%z!TR0U+YQ&d!_Q)s$uQ,V&fS,t'^)vQ1U,UW1f,w,x.r.tQ5R1VU5Y1c1e1iS7m5Z5]S9U7o7pS9{9T9WQ:b9|R:o:cT+{&c+|!]YOTVZn}!R!s!v$m$o%k%m%t%v%w%y&c'V+V+[+w+|,l/j0V0Y3l3rT#PX;P%UsOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&o&q&w'S'e'i'm(k)n)u*a+R+V+[+l,W,a,j,v-S-Z.j.o.|/m/}0O0P0R0V0Y0[0|1^1h1p3k3}4a4c4d4t5_6l6v7T7`8x9t:]:l:wS'l#Y#ZS,q'Y'Z!m<W#k#|&[(a+h+k-a0l2U3h4m8Y8u;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<mS+y&c+|Y0s+w,P,Q,R,SS1P+z,OW1T,T3l3t3uS3n/j3rS4w0t0uU4y0v0w0xW5O0y6e6f6gS6h3o3xS6n3v3wS7c4x4zU7f4{8^8_S7g4|4}S8a6o6pQ8d6qS8|7e7hS9P7i9eQ9Q7jS9h8b8eS9w9O9RQ9z9SQ:U9iR:`9yS+{&c+|T3p/j3rS'U!w0SQ-x(wQ.U)TU1O+y3m3nQ2d-yS2m.V.aU4v0s1T6nQ5n2_S5y2s2uU7d4y5O8dQ7{5oQ8S5|S8}7f7gS9x9P9QR:a9zQ#V^S'T!w0SQ)o$nQ)x$wQ*O$}Q,k'UQ-w(wQ.T)TQ.Z)WQ.x)yQ/p*sU0}+y3m3nS2c-x-yS2l.U.aQ2o.YQ2q.[Q4Q/qW4u0s1O1T6nQ5m2_Q5q2dS5u2m2uQ5z2tQ6x4RW7a4v4y5O8dS7z5n5oQ8O5vQ8Q5yQ8[6bQ8k6yU8{7d7f7gQ9[7{Q9]8PQ9_8SQ9d8]Q9n8lU9v8}9P9QQ:P9^Q:R9fS:_9x9zQ:e:SQ:n:aQ:r:fQ:y:sQ<Z<UQ<f<_R<g<`%U]OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&o&q&w'S'e'i'm(k)n)u*a+R+V+[+l,W,a,j,v-S-Z.j.o.|/m/}0O0P0R0V0Y0[0|1^1h1p3k3}4a4c4d4t5_6l6v7T7`8x9t:]:l:wS#Vr!a!l<T#k#|&[(a+h+k-a0l2U3h4m8Y8u;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<mR<Z<l%U^OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&o&q&w'S'e'i'm(k)n)u*a+R+V+[+l,W,a,j,v-S-Z.j.o.|/m/}0O0P0R0V0Y0[0|1^1h1p3k3}4a4c4d4t5_6l6v7T7`8x9t:]:l:wQ$nf!`$wq!`$z${$|&Y&h&i&j)T)|)}+m+y,Z,[.W.{0q0s1P1Y2r4w4y7c7g8|9Q9w:`S$}r!aQ)y$xQ*s%fW/q*t*u*v*wU4R/r/s/tS6b3j3nS6y4S4TW8]6c6h6m6nQ8l6zW9f8`8a8c8dS:S9g9hS:f:T:UQ:s:g!l<U#k#|&[(a+h+k-a0l2U3h4m8Y8u;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<mQ<_<kR<`<l$xaOPTUno!R!W!c!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&q&w'S'e'i'm(k)n)u*a+R+V+[+l,W,a,j,v-S-Z.j.o.|/m/}0O0P0R0V0Y0[0|1^1h1p3k3}4a4c4d4t5_6l6v7T7`8x9t:]:l:wY!qSV!g!j&o!U%Yvw!v!x!{$m%W&x'P'Q'V*_*`*b+T+i,e,h,l,m,o0_1`1a4l5XQ+Q%q!j<V#k#|(a+h+k-a0l2U3h4m8Y8u;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<mR<Y&[S&`!]%XR0o+s$z`OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&o&q&w'S'e'i'm(k)n*a+R+V+[+l,W,a,j-S-Z.j.o.|/m/}0O0P0R0V0Y0[0|1^1p3k3}4a4c4d4t6l6v7T7`8x9t:]:l:w!l'}#k#|&[(a+h+k-a0l2U3h4m8Y8u;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<mQ+P%qQ.s)uQ1d,vQ5^1hR7q5_!l#e_!i$s&n&t'a'h'w'x'y'z(P(T*W,_,d,i-O-U-k.m1]1o2Q2{3S5Q5V5b7^8w9r:Z:j:u:{;Q!T;]'|(_+n-[0f0i1t1|1}2O2P2T2Y4p5c5h5i6a7Z7r7v7w9b9p<a!h#g_!i$s&n&t'a'h'y'z(P(T*W,_,d,i-O-U-k.m1]1o2Q2{3S5Q5V5b7^8w9r:Z:j:u:{;Q!P;_'|(_+n-[0f0i1t2O2P2T2Y4p5c5h5i6a7Z7r7v7w9b9p<a!d#k_!i$s&n&t'a'h(P(T*W,_,d,i-O-U-k.m1]1o2Q2{3S5Q5V5b7^8w9r:Z:j:u:{;QQ2^-sz<m'|(_+n-[0f0i1t2T2Y4p5c5h5i6a7Z7r7v7w9b9p<aQ<r<tR<s<u&rgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&o&q&w'S'e'i'm(a(k)n)u*a+R+V+[+h+k+l,W,a,j,v-S-Z-a.j.o.|/m/}0O0P0R0V0Y0[0l0|1^1h1p2U3h3k3}4a4c4d4m4t5_6l6v7T7`8Y8u8x9t:]:l:w;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<mS#}d$OR2V-`&ycOPSTUVdno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$O$o%Q%m%p%q%t%v%w%y%}&W&[&e&o&q&w'S'e'i'm(a(k)n)u*a+R+V+[+h+k+l,W,a,j,v-S-Z-`-a.j.o.|/m/}0O0P0R0V0Y0[0l0|1^1h1p2U3h3k3}4a4c4d4m4t5_6l6v7T7`8Y8u8x9t:]:l:w;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<mT#yb$PS#wb$PT(W#z([T#xb$PT(Y#z([&ydOPSTUVdno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$O$o%Q%m%p%q%t%v%w%y%}&W&[&e&o&q&w'S'e'i'm(a(k)n)u*a+R+V+[+h+k+l,W,a,j,v-S-Z-`-a.j.o.|/m/}0O0P0R0V0Y0[0l0|1^1h1p2U3h3k3}4a4c4d4m4t5_6l6v7T7`8Y8u8x9t:]:l:w;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<mT#}d$OQ$QdR(c$O%UfOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&o&q&w'S'e'i'm(k)n)u*a+R+V+[+l,W,a,j,v-S-Z.j.o.|/m/}0O0P0R0V0Y0[0|1^1h1p3k3}4a4c4d4t5_6l6v7T7`8x9t:]:l:w!m<k#k#|&[(a+h+k-a0l2U3h4m8Y8u;O;R;U;V;W;X;Y;Z;[;];^;_;`;a;b;f;o;p;r;y;z<P<Q<m#ahOPTVn!R!W!c!s!}#[#|$o%m%p%q%t%v%w%y%}&W&e'm(a)u*a+R+V+[+l,W,v-a.j/m/}0O0P0R0V0Y0[1h2U3k3}4a4c4d5_6l6v7Tv$^e#W$g$h$l(p(r(z)a)b-P-|.l2^2v7y<j<r<s!z'd#U#r#s$X$[(g(s)Q)t)w*f*i,u-}.P/a/d/l1g2h2p2}3P3|5[5r5{6s7n8h9V9l9};i;k;m;s;u;w;{;}<R<v<wQ)k$jQ-l(lg2S;d;e;j;l;n;t;v;x;|<O<Sv$Ye#W$g$h$l(p(r(z)a)b-P-|.l2^2v7y<j<r<sQ(|$ZS)W$])ZQ)l$kQ.[)X!z<]#U#r#s$X$[(g(s)Q)t)w*f*i,u-}.P/a/d/l1g2h2p2}3P3|5[5r5{6s7n8h9V9l9};i;k;m;s;u;w;{;}<R<v<wf<^;d;e;j;l;n;t;v;x;|<O<SQ<b<nQ<c<oQ<d<pR<e<qv$^e#W$g$h$l(p(r(z)a)b-P-|.l2^2v7y<j<r<s!z'd#U#r#s$X$[(g(s)Q)t)w*f*i,u-}.P/a/d/l1g2h2p2}3P3|5[5r5{6s7n8h9V9l9};i;k;m;s;u;w;{;}<R<v<wg2S;d;e;j;l;n;t;v;x;|<O<SljOTn!R!s$o%t%v%w%y+V+[0V0YQ)P$[Q+e&QQ+f&SR2g-}$Y$_e#U#W#r#s$X$[$g$h$l(g(p(r(s(z)Q)a)b)t)w*f*i,u-P-|-}.P.l/a/d/l1g2^2h2p2v2}3P3|5[5r5{6s7n7y8h9V9l9};d;e;i;j;k;l;m;n;s;t;u;v;w;x;{;|;}<O<R<S<j<r<s<v<wQ*h%`Q/c*jQ3d/bR6^3eT)Y$])ZS)Y$])ZT3q/j3rS.Y)V3kT2t.b6lQ)x$wQ.Z)WQ.x)yQ/p*sQ4Q/qQ6x4RQ8[6bQ8k6yQ9d8]Q9n8lQ:R9fQ:e:SQ:r:fR:y:sn(p$V'f)m-{.d.e1m2e2z5l5}9Z<[<h<i!W;s'b(R(v)O,|-h-s.Q.q/`/b1l2f2j3c3e5`5a5s5w6P6R7}8R:O<t<u];t2R5g7s9X9Y:pp(r$V'f)m-q-{.d.e1m2e2z5l5}9Z<[<h<i!Y;u'b(R(v)O,|-h-s.Q.q/`/b1j1l2f2j3c3e5`5a5s5w6P6R7}8R:O<t<u_;v2R5g7s7t9X9Y:ppiOTn}!R!s$o%k%t%v%w%y+V+[0V0YQ%h|R+R%qpiOTn}!R!s$o%k%t%v%w%y+V+[0V0YR%h|Q*l%aR/_*eqiOTn}!R!s$o%k%t%v%w%y+V+[0V0YQ/k*qS3{/n/oU6r3y3z4OS8g6t6uS9j8f8iQ:V9kR:h:WQ%o}R*{%kR4X/wR8n6{S%Pt%UR/T*UQ%t!OR+V%uR+]%zT0W+[0YR+a%{Q+`%{R0a+aQnOQ!sTT$rn!sQ(i$UR-i(iQ!eRR&l!eQ!hSU&r!h&s,bQ&s!iR,b&tQ+q&]R0n+qQ-Q'fR1n-QQ-T'hS1q-T1rR1r-UQ+|&cR1Q+|rZOTn}!R!s$o%k%m%t%v%w%y+V+[0V0YS!vV$mY#QZ!v+w,l3lS+w&c+|Q,l'VT3l/j3rS!nS%WU&y!n&z,cQ&z!oR,c&uQ+t&`R0p+tQ'W!yQ,f'OW,p'W,f1Z5UQ1Z,gR5U1[Q([#zR-b([Q$OdR(b$OQ#q_U(Q#q,^;cQ,^;QR;c(_Q-v(wW2a-v2b5p7|U2b-w-x-yS5p2c2dR7|5q#m(n$V'b'f(R(v)O)h)i)m,z,{,|-h-q-r-s-{.Q.d.e.q/`/b1j1k1l1m2R2e2f2j2z3c3e5`5a5e5f5g5l5s5w5}6P6R7s7t7u7}8R9X9Y9Z:O:p<[<h<i<t<uQ.O)OU2i.O2k5tQ2k.QR5t2jQ)Z$]R.^)ZQ)d$aR.g)dQ3O.qR6Q3OQ*c%ZR/^*cQ3g/eS6`3g8ZR8Z6aQ*n%bR/h*nQ3r/jR6j3rQ/v*xS4V/v6|R6|4XQ/O*QW3X/O3Z6W8VQ3Z/RQ6W3YR8V6XQ*V%PR/U*VQ0Y+[R4g0YWmOTn!sQ%x!RQ)p$oQ+U%tQ+W%vQ+X%wQ+Z%yQ0T+VS0W+[0YR4f0VQ$qkQ%|!VQ&P!XQ&R!YQ&T!ZQ*^%VQ*d%[Q*z%oQ+c&OQ.])YS/y*{+OQ0b+bQ0c+eQ0d+fU0{+y3m3nQ3^/XQ3b/`Q4P/pQ4Z/{Q4e0UY4s0s0}1O1T6nQ6[3`Q6]3cQ6i3qQ6w4QQ6}4Y[7_4u4v4y5O5Q8dQ8W6YQ8j6xQ8o7OY8v7^7a7d7f7gQ9a8XQ9c8[Q9m8kY9q8w8{8}9P9QQ:Q9dQ:X9nW:Y9r9v9x9zQ:d:RU:i:Z:_:aQ:q:eS:t:j:nQ:x:rQ:z:uQ:|:yR:}:{Q$yqQ&g!`U){$z${$|Q+j&YU,Y&h&i&jQ.S)TS.z)|)}Q0k+mQ0z+yS1X,Z,[Q2n.WQ3R.{Q4q0qS4r0s1PQ5T1YQ5x2rS7b4w4yS8z7c7gS9u8|9QQ:^9wR:m:`S$We<jR)e$bU$ae$b<jR.f)cQ$VeS'b#U)wQ'f#WS(R#r#sQ(v$XQ)O$[Q)h$gQ)i$hQ)m$lQ,z;iQ,{;kQ,|;mQ-h(gQ-q(pQ-r(rQ-s(sQ-{(zQ.Q)QQ.d)aQ.e)bh.q)t,u/l1g3|5[6s7n8h9V9l9}Q/`*fQ/b*iQ1j;sQ1k;uQ1l;wQ1m-PS2R;d;eQ2e-|Q2f-}Q2j.PQ2z.lQ3c/aQ3e/dQ5`;{Q5a;}Q5e;jQ5f;lQ5g;nQ5l2^Q5s2hQ5w2pQ5}2vQ6P2}Q6R3PQ7s;xQ7t;tQ7u;vQ7}5rQ8R5{Q9X;|Q9Y<OQ9Z7yQ:O<RQ:p<SQ<[<jQ<h<rQ<i<sQ<t<vR<u<wlkOTn!R!s$o%t%v%w%y+V+[0V0YQ!^PS!uV!}Q&O!WQ&k!cQ'o#[Q(`#|S+O%m%pQ+S%qQ+b%}Q+g&WQ,U&eQ-W'mQ-f(aQ.t)uQ/[*aQ0Q+RU0j+l3k6lQ1V,WQ1e,vQ2X-aQ2x.jQ3z/mQ4]/}Q4^0OQ4`0PQ4b0RQ4i0[Q5Z1hQ5j2UQ6u3}Q7S4aQ7U4cQ7V4dQ7p5_Q8i6vR8q7T#U_OPTVn!R!W!s!}#[$o%m%p%q%t%v%w%y%}&W&e'm)u*a+R+V+[+l,W,v.j/m/}0O0P0R0V0Y0[1h3k3}4a4c4d5_6l6v7TQ!iSQ!tUQ$soS&n!g&qQ&t!jQ'a#TQ'h#XQ'p#_Q'q#`Q'r#aQ's#bQ't#cQ'u#dQ'v#eQ'w#fQ'x#gQ'y#hQ'z#iQ'|#kQ(P#pQ(T#tW(_#|(a-a2UQ*W%QS+n&[0lS,_&o,aQ,d&wQ,i'SQ-O'eQ-U'iQ-Y;OQ-[;RQ-k(kQ.m)nQ0f+hQ0i+kQ1],jQ1o-SQ1t;UQ1u;VQ1v;WQ1w;XQ1x;YQ1y;ZQ1z;[Q1{;]Q1|;^Q1};_Q2O;`Q2P;aQ2Q-ZQ2T;fQ2Y;bQ2{.oQ3S.|Q4p;oQ5Q0|Q5V1^Q5b1pQ5c;pQ5h;rQ5i;yQ6a3hQ7Z4mQ7^4tQ7r;zQ7v<PQ7w<QQ8w7`Q9b8YQ9p8uQ9r8xQ:Z9tQ:j:]Q:u:lQ:{:wQ;Q!cR<a<mR!kSR&^!]S&Y!]+pS+m&Z&bS+y&c+|Q0q+vY0s+w,P,Q,R,SS1P+z,O[1T,T3l3t3u3v3wS3m/j3rS4w0t0uU4y0v0w0xY5O0y6e6f6g6qS7c4x4zU7f4{8^8_S7g4|4}S8|7e7hS9P7i9eQ9Q7jS9w9O9RQ9z9SR:`9yR'g#WR'j#XQ#OXR0r;PT!zV$mS!yV$mU%Zvw+TU'O!v!x!{S,g'P'QQ,n'VQ/]*bQ1[,hU1_,l,m,oS5W1`1aR7l5X`!mS!g!j%W&o&x*_,et!wVvw!v!x!{$m'P'Q'V*b,h,l,m,o1`1a5XQ0S+TQ0g+iQ4k0_Q7Y4lT<X&[*`T!pS%WS!oS%WS&p!g&xS&u!j*_S+o&[*`T,`&o,eT&a!]%XQ#zbR(e$PT(Z#z([R2W-`T(y$X({R)R$[Q.r)tQ1c,uQ3y/lQ5]1gQ6t3|Q7o5[Q8f6sQ9T7nQ9k8hQ9|9VQ:W9lR:c9}llOTn!R!s$o%t%v%w%y+V+[0V0YQ%n}R*z%kV%[vw+TR/f*kR*y%iQ%TtR*]%UR*R%OT%r!O%uT%s!O%uT0X+[0Y",nodeNames:"⚠ ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression",maxTerm:344,context:zp,nodeProps:[["closedBy",3,"InterpolationEnd",43,"]",53,"}",68,")",139,"JSXSelfCloseEndTag JSXEndTag",155,"JSXEndTag"],["group",-26,7,14,16,60,194,198,201,202,204,207,210,221,223,229,231,233,235,238,244,250,252,254,256,258,260,261,"Statement",-30,11,12,25,28,29,34,44,46,47,49,54,62,70,76,77,98,99,108,109,126,129,131,132,133,134,136,137,157,158,160,"Expression",-23,24,26,30,33,35,37,161,163,165,166,168,169,170,172,173,174,176,177,178,188,190,192,193,"Type",-3,80,91,97,"ClassItem"],["openedBy",31,"InterpolationStart",48,"[",52,"{",67,"(",138,"JSXStartTag",150,"JSXStartTag JSXStartCloseTag"]],propSources:[Hp],skippedNodes:[0,4,5],repeatNodeCount:29,tokenData:"#2k~R!bOX%ZXY%uYZ'kZ[%u[]%Z]^'k^p%Zpq%uqr(Rrs)mst7]tu9guv<avw=bwx>lxyJcyzJyz{Ka{|Lm|}MW}!OLm!O!PMn!P!Q!$v!Q!R!Er!R![!G_![!]!Nc!]!^!N{!^!_# c!_!`#!`!`!a##d!a!b#%s!b!c#'h!c!}9g!}#O#(O#O#P%Z#P#Q#(f#Q#R#(|#R#S9g#S#T#)g#T#o#)}#o#p#,w#p#q#,|#q#r#-j#r#s#.S#s$f%Z$f$g%u$g#BY9g#BY#BZ#.j#BZ$IS9g$IS$I_#.j$I_$I|9g$I|$I}#1X$I}$JO#1X$JO$JT9g$JT$JU#.j$JU$KV9g$KV$KW#.j$KW&FU9g&FU&FV#.j&FV;'S9g;'S;=`<Z<%l?HT9g?HT?HU#.j?HUO9gW%`T$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZW%rP;=`<%l%ZMg%|i$_W'fM_OX%ZXY%uYZ%ZZ[%u[p%Zpq%uq!^%Z!_#o%Z#p$f%Z$f$g%u$g#BY%Z#BY#BZ%u#BZ$IS%Z$IS$I_%u$I_$JT%Z$JT$JU%u$JU$KV%Z$KV$KW%u$KW&FU%Z&FU&FV%u&FV;'S%Z;'S;=`%o<%l?HT%Z?HT?HU%u?HUO%ZMg'rT$_W'gM_O!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&y(YU$_W!l&qO!^%Z!_!`(l!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t(sU#l&l$_WO!^%Z!_!`)V!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t)^T#l&l$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZFc)t]$_W[;TOY)mYZ*mZr)mrs,js!^)m!^!_-S!_#O)m#O#P1q#P#o)m#o#p-S#p;'S)m;'S;=`7V<%lO)m,^*rX$_WOr*mrs+_s!^*m!^!_+u!_#o*m#o#p+u#p;'S*m;'S;=`,d<%lO*m,^+fT$Y,U$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,U+xTOr+urs,Xs;'S+u;'S;=`,^<%lO+u,U,^O$Y,U,U,aP;=`<%l+u,^,gP;=`<%l*mFc,sT$Y,U$_W[;TO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZFZ-XX[;TOY-SYZ+uZr-Srs-ts#O-S#O#P-{#P;'S-S;'S;=`1k<%lO-SFZ-{O$Y,U[;TFZ.OUOr-Srs.bs;'S-S;'S;=`0y;=`<%l/R<%lO-SFZ.iW$Y,U[;TOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s<%lO/R;T/WW[;TOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s<%lO/R;T/uO[;T;T/xRO;'S/R;'S;=`0R;=`O/R;T0WX[;TOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l/R<%lO/R;T0vP;=`<%l/RFZ1OX[;TOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l-S<%lO/RFZ1nP;=`<%l-SFc1vY$_WOr)mrs2fs!^)m!^!_-S!_#o)m#o#p-S#p;'S)m;'S;=`6e;=`<%l/R<%lO)mFc2o]$Y,U$_W[;TOY3hYZ%ZZr3hrs4hs!^3h!^!_/R!_#O3h#O#P5O#P#o3h#o#p/R#p;'S3h;'S;=`6_<%lO3h;]3o]$_W[;TOY3hYZ%ZZr3hrs4hs!^3h!^!_/R!_#O3h#O#P5O#P#o3h#o#p/R#p;'S3h;'S;=`6_<%lO3h;]4oT$_W[;TO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]5TW$_WO!^3h!^!_/R!_#o3h#o#p/R#p;'S3h;'S;=`5m;=`<%l/R<%lO3h;]5rX[;TOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l3h<%lO/R;]6bP;=`<%l3hFc6jX[;TOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l)m<%lO/RFc7YP;=`<%l)m8V7b]$_WOt%Ztu8Zu!^%Z!_!c%Z!c!}8Z!}#R%Z#R#S8Z#S#T%Z#T#o8Z#p$g%Z$g;'S8Z;'S;=`9a<%lO8Z8V8b_$_W'{7}Ot%Ztu8Zu!Q%Z!Q![8Z![!^%Z!_!c%Z!c!}8Z!}#R%Z#R#S8Z#S#T%Z#T#o8Z#p$g%Z$g;'S8Z;'S;=`9a<%lO8Z8V9dP;=`<%l8ZBa9ra$_W'r7|'i+V$RSOt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$g%Z$g;'S9g;'S;=`<Z<%lO9g[;Oa$_W$RSOt%Ztu:wu}%Z}!O:w!O!Q%Z!Q![:w![!^%Z!_!c%Z!c!}:w!}#R%Z#R#S:w#S#T%Z#T#o:w#p$g%Z$g;'S:w;'S;=`<T<%lO:w[<WP;=`<%l:wBa<^P;=`<%l9g&t<hU$_W#d&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t=RT$_W#v&lO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z(h=iW(U(`$_WOv%Zvw>Rw!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t>YU$_W#p&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%ZFc>s]$_W[;TOY>lYZ?lZw>lwx,jx!^>l!^!_@|!_#O>l#O#PE_#P#o>l#o#p@|#p;'S>l;'S;=`J]<%lO>l,^?qX$_WOw?lwx+_x!^?l!^!_@^!_#o?l#o#p@^#p;'S?l;'S;=`@v<%lO?l,U@aTOw@^wx,Xx;'S@^;'S;=`@p<%lO@^,U@sP;=`<%l@^,^@yP;=`<%l?lFZARX[;TOY@|YZ@^Zw@|wx-tx#O@|#O#PAn#P;'S@|;'S;=`EX<%lO@|FZAqUOw@|wxBTx;'S@|;'S;=`Dg;=`<%lBt<%lO@|FZB[W$Y,U[;TOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da<%lOBt;TByW[;TOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da<%lOBt;TCfRO;'SBt;'S;=`Co;=`OBt;TCtX[;TOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%lBt<%lOBt;TDdP;=`<%lBtFZDlX[;TOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%l@|<%lOBtFZE[P;=`<%l@|FcEdY$_WOw>lwxFSx!^>l!^!_@|!_#o>l#o#p@|#p;'S>l;'S;=`Ik;=`<%lBt<%lO>lFcF]]$Y,U$_W[;TOYGUYZ%ZZwGUwx4hx!^GU!^!_Bt!_#OGU#O#PHU#P#oGU#o#pBt#p;'SGU;'S;=`Ie<%lOGU;]G]]$_W[;TOYGUYZ%ZZwGUwx4hx!^GU!^!_Bt!_#OGU#O#PHU#P#oGU#o#pBt#p;'SGU;'S;=`Ie<%lOGU;]HZW$_WO!^GU!^!_Bt!_#oGU#o#pBt#p;'SGU;'S;=`Hs;=`<%lBt<%lOGU;]HxX[;TOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%lGU<%lOBt;]IhP;=`<%lGUFcIpX[;TOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%l>l<%lOBtFcJ`P;=`<%l>l@}JjT!f@u$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$PKQT!e#w$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z>TKjW$_W'j8_#e&lOz%Zz{LS{!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&tLZU$_W#b&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z*qLtU$_Wk*iO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z,TM_T!T+{$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZBaMuX$_Wx>pO!O%Z!O!PNb!P!Q%Z!Q![! d![!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$oNgV$_WO!O%Z!O!PN|!P!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$o! TT!S$g$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]! k]$_Wl;TO!Q%Z!Q![! d![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S! d#S#X%Z#X#Y!!d#Y#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]!!i]$_WO{%Z{|!#b|}%Z}!O!#b!O!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]!#gX$_WO!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]!$ZX$_Wl;TO!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%ZMg!$}b$_W#c&lOY!&VYZ%ZZz!&Vz{!-n{!P!&V!P!Q!BV!Q!^!&V!^!_!(f!_!`!Ch!`!a!Dm!a!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!&^^$_W!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!'aa$_W!PPO!^%Z!_#Z%Z#Z#[!'Y#[#]%Z#]#^!'Y#^#a%Z#a#b!'Y#b#g%Z#g#h!'Y#h#i%Z#i#j!'Y#j#m%Z#m#n!'Y#n#o%Z#p;'S%Z;'S;=`%o<%lO%ZP!(kX!PPOY!(fZ!P!(f!P!Q!)W!Q!}!(f!}#O!)o#O#P!*n#P;'S!(f;'S;=`!*}<%lO!(fP!)]U!PP#Z#[!)W#]#^!)W#a#b!)W#g#h!)W#i#j!)W#m#n!)WP!)rVOY!)oZ#O!)o#O#P!*X#P#Q!(f#Q;'S!)o;'S;=`!*h<%lO!)oP!*[SOY!)oZ;'S!)o;'S;=`!*h<%lO!)oP!*kP;=`<%l!)oP!*qSOY!(fZ;'S!(f;'S;=`!*}<%lO!(fP!+QP;=`<%l!(fX!+Y[$_WOY!+TYZ%ZZ!^!+T!^!_!)o!_#O!+T#O#P!,O#P#Q!&V#Q#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+TX!,TX$_WOY!+TYZ%ZZ!^!+T!^!_!)o!_#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+TX!,sP;=`<%l!+TX!,{X$_WOY!&VYZ%ZZ!^!&V!^!_!(f!_#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!-kP;=`<%l!&VMg!-u`$_W!PPOY!-nYZ!.wZz!-nz{!2U{!P!-n!P!Q!@m!Q!^!-n!^!_!4m!_!}!-n!}#O!;l#O#P!?o#P#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-nMg!.|X$_WOz!.wz{!/i{!^!.w!^!_!0w!_#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.wMg!/nZ$_WOz!.wz{!/i{!P!.w!P!Q!0a!Q!^!.w!^!_!0w!_#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.wMg!0hT$_WTM_O!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZM_!0zTOz!0wz{!1Z{;'S!0w;'S;=`!1x<%lO!0wM_!1^VOz!0wz{!1Z{!P!0w!P!Q!1s!Q;'S!0w;'S;=`!1x<%lO!0wM_!1xOTM_M_!1{P;=`<%l!0wMg!2RP;=`<%l!.wMg!2]`$_W!PPOY!-nYZ!.wZz!-nz{!2U{!P!-n!P!Q!3_!Q!^!-n!^!_!4m!_!}!-n!}#O!;l#O#P!?o#P#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-nMg!3ha$_WTM_!PPO!^%Z!_#Z%Z#Z#[!'Y#[#]%Z#]#^!'Y#^#a%Z#a#b!'Y#b#g%Z#g#h!'Y#h#i%Z#i#j!'Y#j#m%Z#m#n!'Y#n#o%Z#p;'S%Z;'S;=`%o<%lO%ZM_!4r[!PPOY!4mYZ!0wZz!4mz{!5h{!P!4m!P!Q!:b!Q!}!4m!}#O!6|#O#P!9r#P;'S!4m;'S;=`!:[<%lO!4mM_!5m[!PPOY!4mYZ!0wZz!4mz{!5h{!P!4m!P!Q!6c!Q!}!4m!}#O!6|#O#P!9r#P;'S!4m;'S;=`!:[<%lO!4mM_!6jUTM_!PP#Z#[!)W#]#^!)W#a#b!)W#g#h!)W#i#j!)W#m#n!)WM_!7PYOY!6|YZ!0wZz!6|z{!7o{#O!6|#O#P!9S#P#Q!4m#Q;'S!6|;'S;=`!9l<%lO!6|M_!7r[OY!6|YZ!0wZz!6|z{!7o{!P!6|!P!Q!8h!Q#O!6|#O#P!9S#P#Q!4m#Q;'S!6|;'S;=`!9l<%lO!6|M_!8mVTM_OY!)oZ#O!)o#O#P!*X#P#Q!(f#Q;'S!)o;'S;=`!*h<%lO!)oM_!9VVOY!6|YZ!0wZz!6|z{!7o{;'S!6|;'S;=`!9l<%lO!6|M_!9oP;=`<%l!6|M_!9uVOY!4mYZ!0wZz!4mz{!5h{;'S!4m;'S;=`!:[<%lO!4mM_!:_P;=`<%l!4mM_!:ga!PPOz!0wz{!1Z{#Z!0w#Z#[!:b#[#]!0w#]#^!:b#^#a!0w#a#b!:b#b#g!0w#g#h!:b#h#i!0w#i#j!:b#j#m!0w#m#n!:b#n;'S!0w;'S;=`!1x<%lO!0wMg!;q^$_WOY!;lYZ!.wZz!;lz{!<m{!^!;l!^!_!6|!_#O!;l#O#P!>q#P#Q!-n#Q#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;lMg!<r`$_WOY!;lYZ!.wZz!;lz{!<m{!P!;l!P!Q!=t!Q!^!;l!^!_!6|!_#O!;l#O#P!>q#P#Q!-n#Q#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;lMg!={[$_WTM_OY!+TYZ%ZZ!^!+T!^!_!)o!_#O!+T#O#P!,O#P#Q!&V#Q#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+TMg!>vZ$_WOY!;lYZ!.wZz!;lz{!<m{!^!;l!^!_!6|!_#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;lMg!?lP;=`<%l!;lMg!?tZ$_WOY!-nYZ!.wZz!-nz{!2U{!^!-n!^!_!4m!_#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-nMg!@jP;=`<%l!-nMg!@te$_W!PPOz!.wz{!/i{!^!.w!^!_!0w!_#Z!.w#Z#[!@m#[#]!.w#]#^!@m#^#a!.w#a#b!@m#b#g!.w#g#h!@m#h#i!.w#i#j!@m#j#m!.w#m#n!@m#n#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.wMg!B^X$_WSM_OY!BVYZ%ZZ!^!BV!^!_!By!_#o!BV#o#p!By#p;'S!BV;'S;=`!Cb<%lO!BVM_!COSSM_OY!ByZ;'S!By;'S;=`!C[<%lO!ByM_!C_P;=`<%l!ByMg!CeP;=`<%l!BV&u!Cq^$_W#v&l!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&V]!Dv^$OS$_W!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&V;]!Eyf$_Wl;TO!O%Z!O!P! d!P!Q%Z!Q![!G_![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S!G_#S#U%Z#U#V!IR#V#X%Z#X#Y!!d#Y#b%Z#b#c!Hk#c#d!Js#d#l%Z#l#m!L_#m#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]!Gfa$_Wl;TO!O%Z!O!P! d!P!Q%Z!Q![!G_![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S!G_#S#X%Z#X#Y!!d#Y#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]!HrT$_Wl;TO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]!IWY$_WO!Q%Z!Q!R!Iv!R!S!Iv!S!^%Z!_#R%Z#R#S!Iv#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]!I}[$_Wl;TO!Q%Z!Q!R!Iv!R!S!Iv!S!^%Z!_#R%Z#R#S!Iv#S#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]!JxX$_WO!Q%Z!Q!Y!Ke!Y!^%Z!_#R%Z#R#S!Ke#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]!KlZ$_Wl;TO!Q%Z!Q!Y!Ke!Y!^%Z!_#R%Z#R#S!Ke#S#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]!Ld]$_WO!Q%Z!Q![!M]![!^%Z!_!c%Z!c!i!M]!i#R%Z#R#S!M]#S#T%Z#T#Z!M]#Z#o%Z#p;'S%Z;'S;=`%o<%lO%Z;]!Md_$_Wl;TO!Q%Z!Q![!M]![!^%Z!_!c%Z!c!i!M]!i#R%Z#R#S!M]#S#T%Z#T#Z!M]#Z#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m!NlT!_V$_W#t(^O!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z!P# ST^w$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZLu# nR'm$Y!c>[$P,_(YP!P!Q# w!^!_# |!_!`#!ZW# |O$aW&l#!RP#f&l!_!`#!U&l#!ZO#v&l&l#!`O#g&l(m#!gV#S(e$_WO!^%Z!_!`(l!`!a#!|!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&u##TT#_&m$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m##oVd!s#g&l$[S$_WO!^%Z!_!`#$U!`!a#$l!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#$]T#g&l$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#$sV#f&l$_WO!^%Z!_!`<z!`!a#%Y!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#%aU#f&l$_WO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z=g#%zX'|&q$_WO!O%Z!O!P#&g!P!^%Z!_!a%Z!a!b#&}!b#o%Z#p;'S%Z;'S;=`%o<%lO%Z=c#&nTy=Z$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#'UU$_W#q&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z8X#'oT!t8P$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZB]#(VT{BT$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$P#(mT!Q#w$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#)TU#n&l$_WO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z){#)nT$_W'q)sO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZBa#*Ya$_W'r7|'i+V$TSOt%Ztu#)}u}%Z}!O#+_!O!Q%Z!Q![#)}![!^%Z!_!c%Z!c!}#)}!}#R%Z#R#S#)}#S#T%Z#T#o#)}#p$g%Z$g;'S#)};'S;=`#,q<%lO#)}[#+fa$_W$TSOt%Ztu#+_u}%Z}!O#+_!O!Q%Z!Q![#+_![!^%Z!_!c%Z!c!}#+_!}#R%Z#R#S#+_#S#T%Z#T#o#+_#p$g%Z$g;'S#+_;'S;=`#,k<%lO#+_[#,nP;=`<%l#+_Ba#,tP;=`<%l#)}~#,|O!V~(h#-TV(T(`$_WO!^%Z!_!`<z!`#o%Z#p#q#&}#q;'S%Z;'S;=`%o<%lO%Z'k#-sT!U'aoQ$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZX#.ZT!mP$_WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZMg#.wt$_W'fM_'r7|'i+V$RSOX%ZXY%uYZ%ZZ[%u[p%Zpq%uqt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$f%Z$f$g%u$g#BY9g#BY#BZ#.j#BZ$IS9g$IS$I_#.j$I_$JT9g$JT$JU#.j$JU$KV9g$KV$KW#.j$KW&FU9g&FU&FV#.j&FV;'S9g;'S;=`<Z<%l?HT9g?HT?HU#.j?HUO9gMg#1fa$_W'gM_'r7|'i+V$RSOt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$g%Z$g;'S9g;'S;=`<Z<%lO9g",tokenizers:[Lp,Gp,Fp,0,1,2,3,4,5,6,7,8,9,10,Yp],topRules:{Script:[0,6],SingleExpression:[1,262]},dialects:{jsx:12759,ts:12761},dynamicPrecedences:{158:1,186:1},specialized:[{term:301,get:t=>Kp[t]||-1},{term:310,get:t=>Jp[t]||-1},{term:65,get:t=>tg[t]||-1}],tokenPrec:12784}),ng=[Cd("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),Cd("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),Cd("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Cd("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Cd("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),Cd("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),Cd("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),Cd("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),Cd("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),Cd('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Cd('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],rg=new tl,ig=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function og(t){return(e,n)=>{let r=e.node.getChild("VariableDefinition");return r&&n(r,t),!0}}const sg=["FunctionDeclaration"],ag={FunctionDeclaration:og("function"),ClassDeclaration:og("class"),ClassExpression:()=>!0,EnumDeclaration:og("constant"),TypeAliasDeclaration:og("type"),NamespaceDeclaration:og("namespace"),VariableDefinition(t,e){t.matchContext(sg)||e(t,"variable")},TypeDefinition(t,e){e(t,"type")},__proto__:null};function lg(t,e){let n=rg.get(e);if(n)return n;let r=[],i=!0;function o(e,n){let i=t.sliceString(e.from,e.to);r.push({label:i,type:n})}return e.cursor(ja.IncludeAnonymous).iterate((e=>{if(i)i=!1;else if(e.name){let t=ag[e.name];if(t&&t(e,o)||ig.has(e.name))return!1}else if(e.to-e.from>8192){for(let n of lg(t,e.node))r.push(n);return!1}})),rg.set(e,r),r}const cg=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,hg=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function ug(t){let e=Dl(t.state).resolveInner(t.pos,-1);if(hg.indexOf(e.name)>-1)return null;let n="VariableName"==e.name||e.to-e.from<20&&cg.test(t.state.sliceDoc(e.from,e.to));if(!n&&!t.explicit)return null;let r=[];for(let n=e;n;n=n.parent)ig.has(n.name)&&(r=r.concat(lg(t.state.doc,n)));return{options:r,from:n?e.from:t.pos,validFor:cg}}const fg=Al.define({name:"javascript",parser:eg.configure({props:[Kl.add({IfStatement:sc({except:/^\s*({|else\b)/}),TryStatement:sc({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:t=>t.baseIndent,SwitchBody:t=>{let e=t.textAfter,n=/^\s*\}/.test(e),r=/^\s*(case|default)\b/.test(e);return t.baseIndent+(n?0:r?1:2)*t.unit},Block:ic({closing:"}"}),ArrowFunction:t=>t.baseIndent+t.unit,"TemplateString BlockComment":()=>null,"Statement Property":sc({except:/^{/}),JSXElement(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},JSXEscape(t){let e=/\s*\}/.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"JSXOpenTag JSXSelfClosingTag":t=>t.column(t.node.from)+t.unit}),lc.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":cc,BlockComment:t=>({from:t.from+2,to:t.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),dg=fg.configure({dialect:"ts"},"typescript"),pg=fg.configure({dialect:"jsx"}),gg=fg.configure({dialect:"jsx ts"},"typescript"),mg="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map((t=>({label:t,type:"keyword"})));function Og(t={}){let e=t.jsx?t.typescript?gg:pg:t.typescript?dg:fg;return new ql(e,[fg.data.of({autocomplete:(n=hg,r=Rf(ng.concat(mg)),t=>{for(let e=Dl(t.state).resolveInner(t.pos,-1);e;e=e.parent)if(n.indexOf(e.name)>-1)return null;return r(t)})}),fg.data.of({autocomplete:ug}),t.jsx?yg:[]]);var n,r}function vg(t,e,n=t.length){for(let r=null==e?void 0:e.firstChild;r;r=r.nextSibling)if("JSXIdentifier"==r.name||"JSXBuiltin"==r.name||"JSXNamespacedName"==r.name||"JSXMemberExpression"==r.name)return t.sliceString(r.from,Math.min(r.to,n));return""}const bg="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),yg=Vo.inputHandler.of(((t,e,n,r)=>{if((bg?t.composing:t.compositionStarted)||t.state.readOnly||e!=n||">"!=r&&"/"!=r||!fg.isActiveAt(t.state,e,-1))return!1;let{state:i}=t,o=i.changeByRange((t=>{var e,n;let o,{head:s}=t,a=Dl(i).resolveInner(s,-1);if("JSXStartTag"==a.name&&(a=a.parent),">"==r&&"JSXFragmentTag"==a.name)return{range:Lt.cursor(s+1),changes:{from:s,insert:"><>"}};if("/"==r&&"JSXFragmentTag"==a.name){let t=a.parent,n=null==t?void 0:t.parent;if(t.from==s-1&&"JSXEndTag"!=(null===(e=n.lastChild)||void 0===e?void 0:e.name)&&(o=vg(i.doc,null==n?void 0:n.firstChild,s))){let t=`/${o}>`;return{range:Lt.cursor(s+t.length),changes:{from:s,insert:t}}}}else if(">"==r){let t=function(t){for(;;){if("JSXOpenTag"==t.name||"JSXSelfClosingTag"==t.name||"JSXFragmentTag"==t.name)return t;if(!t.parent)return null;t=t.parent}}(a);if(t&&"JSXEndTag"!=(null===(n=t.lastChild)||void 0===n?void 0:n.name)&&"</"!=i.sliceDoc(s,s+2)&&(o=vg(i.doc,t,s)))return{range:Lt.cursor(s+1),changes:{from:s,insert:`></${o}>`}}}return{range:t}}));return!o.changes.empty&&(t.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)})),wg=ll({String:Tl.string,Number:Tl.number,"True False":Tl.bool,PropertyName:Tl.propertyName,Null:Tl.null,",":Tl.separator,"[ ]":Tl.squareBracket,"{ }":Tl.brace}),xg=Bp.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[wg],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),Sg=()=>t=>{try{JSON.parse(t.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const n=function(t,e){let n;return(n=t.message.match(/at position (\d+)/))?Math.min(+n[1],e.length):(n=t.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+n[1]).from+ +n[2]-1,e.length):0}(e,t.state.doc);return[{from:n,message:e.message,severity:"error",to:n}]}return[]},kg=Al.define({name:"json",parser:xg.configure({props:[Kl.add({Object:sc({except:/^\s*\}/}),Array:sc({except:/^\s*\]/})}),lc.add({"Object Array":cc})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function Cg(){return new ql(kg)}const{Text:Qg}=s.Typography,Pg=({children:n,completion:r={},msg:i,type:o="js",value:a,toggleOpen:l,onChange:c})=>{const h=e().createRef(),[u,f]=(0,t.useState)(!1),{methods:d,variables:p}=r,g=(p||[]).map((t=>({label:t.name,type:"variable"})));g.push({label:"$scope",type:"variable"});const m=(d||[]).map((t=>({label:t.label,type:"method"}))),O=t=>{const e=t.matchBefore(/[\w.\\$]+/);return t.explicit||e?{from:e?e.from:t.pos,options:[...g,...m],validFor:/^\w*$/}:null};return e().createElement(s.Popover,{onVisibleChange:t=>{l&&l(t),t?(h.current.editorView=new Vo({doc:a,extensions:[Op,"js"===o?Og():Cg(),Bs({position:"absolute"}),qd({override:[O]})],parent:h.current}),"json"===o&&(h.current.editorView.jsonParseLinter=Sg)):h.current.editorView&&c(h.current.editorView.state.doc.toString())},visible:u,showArrow:!0,trigger:"click",content:e().createElement("article",{style:{padding:4,width:430}},e().createElement(Qg,{type:"secondary"},i),e().createElement("div",{className:"pop-code-editor-container",ref:h}))},n)},Eg=(0,s.withField)((({value:n,options:r,onChange:i})=>{const[o,a]=(0,t.useState)(!1);return e().createElement(Pg,{type:"js",completion:{variables:r.pageVariables,methods:[{label:"Math.floor",type:"method"}]},msg:"请输入取值表达式",value:n,onChange:i,toggleOpen:t=>{a(t)}},n&&e().createElement(s.Button,{placeholder:"绑定表达式",type:"primary",size:"small",theme:"borderless",icon:e().createElement(nt,null)}),!n&&e().createElement(s.Button,{className:o?"is-open":"",type:"tertiary",size:"small",theme:"borderless",icon:e().createElement(nt,null)}))})),Tg=Eg,_g=(0,s.withField)((({value:t,options:n,onChange:r})=>{const{Option:i}=s.Select,o=t||[],a=(t,e,n)=>{const i=o.map(((r,i)=>(i===n&&(r[t]=e),r)));r(i)},l=n.pageVariables.map((t=>({label:t.name,value:t.name}))),c=({index:t,value:r})=>e().createElement(Pg,{completion:{variables:n.pageVariables,methods:[{label:"Math.floor",type:"method"}]},msg:"请输入取值表达式",type:"json",value:r,onChange:e=>{a("value",e,t)}},e().createElement(it,{className:"action-edit",style:{cursor:"pointer"}}));return e().createElement("div",{className:"event-edit"},o.map(((t,n)=>e().createElement("div",{key:n,className:"event-action-config"},e().createElement(rt,{className:"action-delete",onClick:()=>{(t=>{o.splice(t,1),r(JSON.parse(JSON.stringify(o)))})(n)}}),e().createElement("div",{className:"action-field"},e().createElement("div",{className:"action-label"},"动作"),e().createElement(s.Select,{label:"动作",value:t.name,size:"small",onChange:t=>a("name",t,n)},e().createElement(i,{value:"setvar"},"设置页面变量"),e().createElement(i,{value:"setglobal"},"设置全局变量"))),"setvar"===t.name&&e().createElement(e().Fragment,null,e().createElement("div",{className:"action-field"},e().createElement("div",{className:"action-label"},"目标"),e().createElement(s.Select,{size:"small",style:{width:120},filter:!0,optionList:l,value:t.target,onChange:t=>a("target",t,n)})),e().createElement("div",{className:"action-field"},e().createElement("div",{className:"action-label"},"取值"),e().createElement(s.Input,{size:"small",value:t.value,addonAfter:e().createElement(c,{index:n,value:t.value}),onChange:t=>a("value",t,n)}))),"setglobal"===t.name&&e().createElement(s.Select,null)))),e().createElement(s.Button,{size:"small",className:"action-add",icon:e().createElement(ut,null),onClick:()=>{const t=o.concat({name:"setvar",target:"",value:""});r(t)}}))})),$g=_g,Mg=(0,s.withField)((({value:t,options:n,onChange:r})=>{const i=JSON.stringify(t);return e().createElement(s.Input,{size:"small",value:i,addonAfter:e().createElement(it,{style:{cursor:"pointer"},onClick:()=>(t=>{const{Ridge:e}=window;e&&e.openCodeEditor&&e.openCodeEditor({lang:"json",code:t,completed:t=>{r(JSON.parse(t))}})})(i)}),onChange:t=>r(JSON.parse(t))})}));var Rg=n(7056),Ag={};Ag.styleTagTransform=F(),Ag.setAttributes=z(),Ag.insert=U().bind(null,"head"),Ag.domAPI=I(),Ag.insertStyleElement=L(),B()(Rg.Z,Ag),Rg.Z&&Rg.Z.locals&&Rg.Z.locals;class Dg extends e().Component{constructor(t){super(t),this.ref=e().createRef()}renderCol(t){const{InputNumber:n,TextArea:r,Select:i,Checkbox:o,Input:a,Upload:l}=s.Form,{options:c}=this.props,h=!!t.readonly&&t.readonly(this.api.getValues());if(t.hidden&&t.hidden(this.api.getValues()))return;null==t.control&&(t.control=t.type);let u=null;switch(t.control){case"number":u=e().createElement(n,{size:"small",label:t.label,disabled:h,field:t.field});break;case"text":case"string":u=e().createElement(a,{size:"small",label:t.label,field:t.field});break;case"boolean":case"checkbox":u=e().createElement(o,{size:"small",label:t.label,field:t.field});break;case"select":u=t.required?e().createElement(i,{size:"small",label:t.label,field:t.field,optionList:t.optionList}):e().createElement(i,{placeholder:"请选择",showClear:!0,size:"small",label:t.label,field:t.field,optionList:t.optionList});break;case"border":u=e().createElement(D,{label:t.label,field:t.field});break;case"css-style":u=e().createElement(r,{label:t.label,field:t.field});break;case"event":u=e().createElement($g,{labelPosition:"top",label:t.label,field:t.field,options:c});break;case"json-editor":u=e().createElement(Mg,{label:t.label,field:t.field});break;case"file":u=e().createElement(l,{label:t.label,field:t.field});break;case"button":u=e().createElement(s.Button,{label:t.label})}return!1===t.bindable?u:e().createElement("div",{className:"with-code-expr"},u,e().createElement(Tg,{noLabel:!0,fieldStyle:{width:"36px"},field:t.fieldEx,options:c}))}render(){const{Section:t}=s.Form,n=this.renderCol.bind(this),r=(t,r)=>e().createElement("div",{className:"row",key:r},t.cols.length>1&&e().createElement(e().Fragment,null,t.cols.map(((r,i)=>e().createElement("div",{key:i,className:"col-"+24/t.cols.length},n(r))))),1===t.cols.length&&n(t.cols[0])),{sections:i,getFormApi:o,onValueChange:a,style:l,initValues:c}=this.props;return e().createElement("div",{className:"object-form",style:l},e().createElement(s.Form,{size:"small",labelPosition:"left",getFormApi:t=>{this.api=t,o&&o(t)},initValues:c,onValueChange:a},i.map(((n,i)=>e().createElement("div",{key:i,className:"object-section"},n.title&&e().createElement(t,null,n.rows.map(r)),!n.title&&n.rows.map(r))))))}}var Wg=n(1533),jg=n.n(Wg),Zg=n(2378),Ng={};function Bg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map((function(e){return e.split(" ").map((function(e){return e?""+t+e:""})).join(" ")})).join(" ")}function Vg(t,e){return function(n){n&&(t[e]=n)}}function Ig(t,e,n){return function(r){r&&(t[e][n]=r)}}function Xg(t,e){return function(n){var r=n.prototype;t.forEach((function(t){e(r,t)}))}}Ng.styleTagTransform=F(),Ng.setAttributes=z(),Ng.insert=U().bind(null,"head"),Ng.domAPI=I(),Ng.insertStyleElement=L(),B()(Zg.Z,Ng),Zg.Z&&Zg.Z.locals&&Zg.Z.locals;var Ug=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,i=n.indexOf(t),o=-1===i?n.length:i;n[o]=t,r[o]=e},t}(),qg=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),zg="function"==typeof Map,Yg=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}(),Lg=function(){function t(t,e,n,r,i,o,s,a){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=s,this.fixed=a}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t=function(t,e){var n=[],r=[];return t.forEach((function(t){var e=t[0],i=t[1],o=new Yg;n[e]=o,r[i]=o})),n.forEach((function(t,e){t.connect(n[e-1])})),t.filter((function(t,n){return!e[n]})).map((function(t,e){var i=t[0],o=t[1];if(i===o)return[0,0];var s=n[i],a=r[o-1],l=s.getIndex();return s.disconnect(),a?s.connect(a,a.next):s.connect(void 0,n[0]),[l,s.getIndex()]}))}(this.changedBeforeAdded,this.fixed),e=this.changed,n=[];this.cacheOrdered=t.filter((function(t,r){var i=t[0],o=t[1],s=e[r],a=s[0],l=s[1];if(i!==o)return n.push([a,l]),!0})),this.cachePureChanged=n},t}();function Gg(t,e,n){var r=zg?Map:n?qg:Ug,i=n||function(t){return t},o=[],s=[],a=[],l=t.map(i),c=e.map(i),h=new r,u=new r,f=[],d=[],p={},g=[],m=0,O=0;return l.forEach((function(t,e){h.set(t,e)})),c.forEach((function(t,e){u.set(t,e)})),l.forEach((function(t,e){var n=u.get(t);void 0===n?(++O,s.push(e)):p[n]=O})),c.forEach((function(t,e){var n=h.get(t);void 0===n?(o.push(e),++m):(a.push([n,e]),O=p[e]||0,f.push([n-O,e-m]),d.push(e===n),n!==e&&g.push([n,e]))})),s.reverse(),new Lg(t,e,o,s,g,a,f,d)}var Fg=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var e=[].slice.call(t),n=Gg(this.list,e,this.findKeyCallback);return this.list=e,n},t}();const Hg=Fg;var Kg="undefined",Jg=typeof window!==Kg,tm=(typeof document!==Kg&&document,[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}]),em=1e-7,nm={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};function rm(t,e,n,r){return(t*r+e*n)/(n+r)}function im(t){return typeof t===Kg}function om(t){return t&&"object"==typeof t}function sm(t){return Array.isArray(t)}function am(t){return"string"==typeof t}function lm(t){return"number"==typeof t}function cm(t){return"function"==typeof t}function hm(t,e,n,r,i){return um(t,e,n)?n:function(t,e,n,r,i){for(var o,s=function(n){var s=e[n].trim();if(s===t.close&&!um(t,e,n))return{value:n};var a=n,l=wm(i,(function(t){return t.open===s}));if(l&&(a=hm(l,e,n,r,i)),-1===a)return o=n,"break";o=n=a},a=n;a<r;++a){var l=s(a);if(a=o,"object"==typeof l)return l.value;if("break"===l)break}return-1}(t,e,n+1,r,i)}function um(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function fm(t,e){var n=am(e)?{separator:e}:e,r=n.separator,i=void 0===r?",":r,o=n.isSeparateFirst,s=n.isSeparateOnlyOpenClose,a=n.isSeparateOpenClose,l=void 0===a?s:a,c=n.openCloseCharacters,h=void 0===c?tm:c,u=h.map((function(t){var e=t.open,n=t.close;return e===n?e:e+"|"+n})).join("|"),f=new RegExp("(\\s*"+i+"\\s*|"+u+"|\\s+)","g"),d=t.split(f).filter(Boolean),p=d.length,g=[],m=[];function O(){return!!m.length&&(g.push(m.join("")),m=[],!0)}for(var v,b=function(e){var n=d[e].trim(),r=e,a=wm(h,(function(t){return t.open===n})),c=wm(h,(function(t){return t.close===n}));if(a){if(-1!==(r=hm(a,d,e,p,h))&&l)return O()&&o?(v=e,"break"):(g.push(d.slice(e,r+1).join("")),e=r,o?(v=e,"break"):(v=e,"continue"))}else{if(c&&!um(c,d,e)){var u=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(h);return u.splice(h.indexOf(c),1),{value:fm(t,{separator:i,isSeparateFirst:o,isSeparateOnlyOpenClose:s,isSeparateOpenClose:l,openCloseCharacters:u})}}if(function(t,e){return(""===e||" "==e)&&(""===t||" "==t)||t===e}(n,i)&&!s)return O(),o?(v=e,"break"):(v=e,"continue")}-1===r&&(r=p-1),m.push(d.slice(e,r+1).join("")),v=e=r},y=0;y<p;++y){var w=b(y);if(y=v,"object"==typeof w)return w.value;if("break"===w)break}return m.length&&g.push(m.join("")),g}function dm(t){return fm(t,"")}function pm(t){return fm(t,",")}function gm(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function mm(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2];return{prefix:n,unit:e[3],value:parseFloat(r)}}function Om(t){return t.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()}))}function vm(t,e){return void 0===e&&(e="-"),t.replace(/([a-z])([A-Z])/g,(function(t,n,r){return""+n+e+r.toLowerCase()}))}function bm(){return Date.now?Date.now():(new Date).getTime()}function ym(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function wm(t,e,n){var r=ym(t,e);return r>-1?t[r]:n}var xm=function(){var t=bm(),e=Jg&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(e){var n=bm();return window.setTimeout((function(){e(n-t)}),1e3/60)}}(),Sm=function(){var t=Jg&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function km(t){return Object.keys(t)}function Cm(t,e){var n=mm(t),r=n.value,i=n.unit;if(om(e)){var o=e[i];if(o){if(cm(o))return o(r);if(nm[i])return nm[i](r,o)}}else if("%"===i)return r*e/100;return nm[i]?nm[i](r):r}function Qm(t,e,n){return Math.max(e,Math.min(t,n))}function Pm(t,e,n,r){return void 0===r&&(r=t[0]/t[1]),[[Rm(e[0],em),Rm(e[0]/r,em)],[Rm(e[1]*r,em),Rm(e[1],em)]].filter((function(t){return t.every((function(t,r){var i=e[r],o=Rm(i,em);return n?t<=i||t<=o:t>=i||t>=o}))}))[0]||t}function Em(t,e,n,r){if(!r)return t.map((function(t,r){return Qm(t,e[r],n[r])}));var i=t[0],o=t[1],s=!0===r?i/o:r,a=Pm(t,e,!1,s),l=a[0],c=a[1],h=Pm(t,n,!0,s),u=h[0],f=h[1];return i<l||o<c?(i=l,o=c):(i>u||o>f)&&(i=u,o=f),[i,o]}function Tm(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function _m(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+2*Math.PI}function $m(t){var e=function(t){return[0,1].map((function(e){return Tm(t.map((function(t){return t[e]})))}))}(t),n=_m(e,t[0]),r=_m(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function Mm(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Rm(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function Am(t,e){return t.forEach((function(n,r){t[r]=Rm(t[r],e)})),t}function Dm(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Wm(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function jm(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function Zm(t,e,n,r){t.addEventListener(e,n,r)}function Nm(t,e,n,r){t.removeEventListener(e,n,r)}var Bm=function(t,e){return Bm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Bm(t,e)};function Vm(t,e){function n(){this.constructor=t}Bm(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Im=function(){return Im=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Im.apply(this,arguments)};function Xm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Um(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function qm(t,e){var n=Object.keys(t),r=Object.keys(e),i=Gg(n,r,(function(t){return t})),o={},s={},a={};return i.added.forEach((function(t){var n=r[t];o[n]=e[n]})),i.removed.forEach((function(e){var r=n[e];s[r]=t[r]})),i.maintained.forEach((function(r){var i=r[0],o=n[i],s=[t[o],e[o]];t[o]!==e[o]&&(a[o]=s)})),{added:o,removed:s,changed:a}}function zm(t){t.forEach((function(t){t()}))}function Ym(t){var e=0;return t.map((function(t){return null==t?"$compat"+ ++e:""+t}))}function Lm(t,e,n,r){return am(t)||lm(t)?new eO("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?nO:t.type.prototype.render?aO:oO)(t.type,e,n,r,t.ref,t.props)}function Gm(t){var e=[];return t.forEach((function(t){e=e.concat(sm(t)?Gm(t):t)})),e}function Fm(t){var e=t.className,n=Xm(t,["className"]);return null!=e&&(n.class=e),delete n.style,delete n.children,n}function Hm(t,e){if(!e)return t;for(var n in e)im(t[n])&&(t[n]=e[n]);return t}function Km(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},o=i.key,s=i.ref,a=Xm(i,["key","ref"]);return{type:t,key:o,ref:s,props:Im(Im({},a),{children:Gm(n).filter((function(t){return null!=t&&!1!==t}))})}}var Jm=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=i,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!am(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);var i=this.props;return am(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?i:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function tO(t){var e={},n={};for(var r in t)0===r.indexOf("on")?n[r.replace("on","").toLowerCase()]=t[r]:e[r]=t[r];return{attributes:e,events:n}}var eO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Vm(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push((function(){n?e._mounted():e._updated()})),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(Jm),nO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events={},e._isSVG=!1,e}Vm(e,t);var n=e.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return Um(this.props,t)},n._render=function(t,e){var n=this,r=!this.base;if(r){var i=this._hasSVG();this._isSVG=i;var o=this.props.portalContainer;if(!o){var s=this.type;o=i?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)}this.base=o}uO(this,this._providers,this.props.children,t,null);var a=this.base,l=tO(e),c=l.attributes,h=l.events,u=tO(this.props),f=u.attributes,d=u.events;return function(t,e,n){var r=qm(t,e),i=r.added,o=r.removed,s=r.changed;for(var a in i)n.setAttribute(a,i[a]);for(var a in s)n.setAttribute(a,s[a][1]);for(var a in o)n.removeAttribute(a)}(Fm(c),Fm(f),a),function(t,e,n){var r=qm(t,e),i=r.added,o=r.removed,s=r.changed;for(var a in o)n.removeEventListener(a);for(var a in i)n.addEventListener(a,i[a]);for(var a in s)n.removeEventListener(a),n.addEventListener(a,s[a][1]);for(var a in o)n.removeEventListener(a)}(h,d,this),function(t,e,n){var r=n.style,i=qm(t,e),o=i.added,s=i.removed,a=i.changed;for(var l in o){var c=vm(l,"-");r.setProperty?r.setProperty(c,o[l]):r[c]=o[l]}for(var l in a)c=vm(l,"-"),r.setProperty?r.setProperty(c,a[l][1]):r[c]=a[l][1];for(var l in s)c=vm(l,"-"),r.removeProperty?r.removeProperty(c):r[c]=""}(e.style||{},this.props.style||{},a),t.push((function(){r?n._mounted():n._updated()})),!0},n._unmount=function(){var t=this.events,e=this.base;for(var n in t)e.removeEventListener(n,t[n]);this._providers.forEach((function(t){t._unmount()})),this.events={},this.props.portalContainer||e.parentNode.removeChild(e)},n._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=rO(this.container);return t&&"ownerSVGElement"in t},e}(Jm);function rO(t){if(!t)return null;var e=t.base;return e instanceof Node?e:rO(t.container)}function iO(t){if(!t)return null;if(t instanceof Node)return t;var e=t.$_provider._providers;return e.length?iO(e[0].base):null}var oO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Vm(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return uO(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach((function(t){t._unmount()}))},e}(Jm),sO=function(t){function e(e){var n=t.call(this,"container","container",0,null)||this;return n.base=e,n}Vm(e,t);var n=e.prototype;return n._render=function(){return!0},n._unmount=function(){},e}(Jm),aO=function(t){function e(e,n,r,i,o,s){return void 0===s&&(s={}),t.call(this,e,n,r,i,o,Hm(s,e.defaultProps))||this}Vm(e,t);var n=e.prototype;return n._should=function(t,e){return this.base.shouldComponentUpdate(Hm(t,this.type.defaultProps),e||this.base.state)},n._render=function(t,e){var n=this;this.props=Hm(this.props,this.type.defaultProps);var r=!this.base;r?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var i=this.base,o=i.state,s=i.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),uO(this,this._providers,s?[s]:[],t),t.push((function(){r?(n._mounted(),i.componentDidMount()):(n._updated(),i.componentDidUpdate(e,o))}))},n._setState=function(t){var e=this.base;e&&t&&(e.state=t)},n._unmount=function(){this._providers.forEach((function(t){t._unmount()})),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},e}(Jm),lO=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=Im(Im({},this.$_state),t),n?this.$_setState(e,n):this.$_timer=setTimeout((function(){r.$_timer=0,r.$_setState(e,n)}))},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var n=[],r=this.$_provider;uO(r.container,[r],[r.original],n,Im(Im({},this.state),this.$_state),e)&&(t&&n.push(t),zm(n))},t}(),cO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vm(e,t),e.prototype.shouldComponentUpdate=function(t,e){return Um(this.props,t)||Um(this.state,e)},e}(lO),hO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Vm(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,n=t.container;this._portalProvider=new sO(n),fO(e,n,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;fO(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){fO(null,this.props.container,this._portalProvider),this._portalProvider=null},e}(cO);function uO(t,e,n,r,i,o){var s=function(t,e,n){var r=n.map((function(t){return am(t)?null:t.key})),i=Ym(e.map((function(t){return t.key}))),o=Gg(i,Ym(r),(function(t){return t}));o.removed.forEach((function(t){e.splice(t,1)[0]._unmount()})),o.ordered.forEach((function(t){var n=t[0],r=t[1],i=e.splice(n,1)[0];e.splice(r,0,i);var o=iO(i.base),s=iO(e[r+1]&&e[r+1].base);o&&o.parentNode.insertBefore(o,s)})),o.added.forEach((function(i){e.splice(i,0,Lm(n[i],r[i],i,t))}));var s=o.maintained.filter((function(i){i[0];var o=i[1],s=n[o],a=e[o];return(am(s)?"text_"+s:s.type)!==a.type?(a._unmount(),e.splice(o,1,Lm(s,r[o],o,t)),!0):(a.index=o,!1)}));return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(o.added,s.map((function(t){return t[0],t[1]})))}(t,e,n),a=e.filter((function(t,e){return t._update(r,n[e],i,o)})),l=rO(t);return l&&s.reverse().forEach((function(n){var r=e[n],i=iO(r.base);if(i&&l!==i&&!i.parentNode){var o=function(t,e){for(var n=t._providers,r=n.length,i=e.index+1;i<r;++i){var o=iO(n[i].base);if(o)return o}return null}(t,r);l.insertBefore(i,o)}})),a.length>0}function fO(t,e,n){void 0===n&&(n=e.__REACT_COMPAT__);var r=!!n;return n||(n=new sO(e)),function(t,e,n){var r=[];uO(t,t._providers,e,r,void 0),zm(r)}(n,t?[t]:[]),r||(e.__REACT_COMPAT__=n),n}function dO(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),fO(t,e,r),n&&n()}function pO(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function gO(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function mO(t){var e=t;if(void 0===e){if("undefined"==typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function OO(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function vO(t){return t.replace(/_/g,".")}function bO(t,e){var n=null,r="-1";return pO(t,(function(t){var i=OO("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!i||t.brand||(n=t,r=i[3]||"-1",t.versionAlias?r=t.versionAlias:t.versionTest&&(r=function(t,e){var n=OO("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}(t.versionTest.toLowerCase(),e)||r),r=vO(r),0))})),{preset:n,version:r}}function yO(t,e){var n={brand:"",version:"-1"};return pO(t,(function(t){var r=wO(e,t);return!!r&&(n.brand=t.id,n.version=t.versionAlias||r.version,"-1"!==n.version)})),n}function wO(t,e){return gO(t,(function(t){var n=t.brand;return OO(""+e.test,n.toLowerCase())}))}var xO=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],SO=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],kO=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],CO=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],QO=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function PO(t){return!!bO(CO,t).preset}const EO=function(t){return void 0===t&&function(){if("undefined"==typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}()?function(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=t&&t.fullVersionList,i=e.mobile||!1,o=n[0],s=(t&&t.platform||e.platform||navigator.platform).toLowerCase(),a={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!yO(CO,n).brand||PO(mO())},l={name:"unknown",version:"-1",majorVersion:-1};a.webkit=!a.chromium&&pO(kO,(function(t){return wO(n,t)}));var c=yO(SO,n);if(a.chromium=!!c.brand,a.chromiumVersion=c.version,!a.chromium){var h=yO(kO,n);a.webkit=!!h.brand,a.webkitVersion=h.version}var u=gO(QO,(function(t){return new RegExp(""+t.test,"g").exec(s)}));if(l.name=u?u.id:"",t&&(l.version=t.platformVersion),r&&r.length){var f=yO(xO,r);a.name=f.brand||a.name,a.version=f.version||a.version}else{var d=yO(xO,n);a.name=d.brand||a.name,a.version=d.brand&&t?t.uaFullVersion:d.version}return a.webkit&&(l.name=i?"ios":"mac"),"ios"===l.name&&a.webview&&(a.version="-1"),l.version=vO(l.version),a.version=vO(a.version),l.majorVersion=parseInt(l.version,10),a.majorVersion=parseInt(a.version,10),{browser:a,os:l,isMobile:i,isHints:!0}}():function(t){var e=mO(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:PO(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},o=bO(xO,e),s=o.preset,a=o.version,l=bO(QO,e),c=l.preset,h=l.version,u=bO(SO,e);if(r.chromium=!!u.preset,r.chromiumVersion=u.version,!r.chromium){var f=bO(kO,e);r.webkit=!!f.preset,r.webkitVersion=f.version}return c&&(i.name=c.id,i.version=h,i.majorVersion=parseInt(h,10)),s&&(r.name=s.id,r.version=a,r.webview&&"ios"===i.name&&"safari"!==r.name&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}(t)};function TO(t,e,n,r,i,o){for(var s=0;s<i;++s){var a=n+s*i,l=r+s*i;t[a]+=t[l]*o,e[a]+=e[l]*o}}function _O(t,e,n,r,i){for(var o=0;o<i;++o){var s=n+o*i,a=r+o*i,l=t[s],c=e[s];t[s]=t[a],t[a]=l,e[s]=e[a],e[a]=c}}function $O(t,e,n,r,i){for(var o=0;o<r;++o){var s=n+o*r;t[s]/=i,e[s]/=i}}function MO(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function RO(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=HO(e),i=0;i<e;++i){var o=e*i+i;if(!Rm(n[o],em))for(var s=i+1;s<e;++s)if(n[e*i+s]){_O(n,r,i,s,e);break}if(!Rm(n[o],em))return[];for($O(n,r,i,e,n[o]),s=0;s<e;++s){var a=s,l=n[s+i*e];Rm(l,em)&&i!==s&&TO(n,r,a,i,e,-l)}}return r}function AO(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function DO(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function WO(t,e,n){if(void 0===e&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=HO(n),i=Math.min(e,n),o=0;o<i-1;++o){for(var s=0;s<i-1;++s)r[o*n+s]=t[o*e+s];r[(o+1)*n-1]=t[(o+1)*e-1],r[(n-1)*n+o]=t[(e-1)*e+o]}return r[n*n-1]=t[e*e-1],r}function jO(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=HO(t);return e.forEach((function(e){r=ZO(r,e,t)})),r}function ZO(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,o=e.length/i;if(!i)return e;if(!o)return t;for(var s=0;s<n;++s)for(var a=0;a<o;++a){r[a*n+s]=0;for(var l=0;l<i;++l)r[a*n+s]+=t[l*n+s]*e[a*i+l]}return r}function NO(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function BO(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function VO(t,e){return void 0===e&&(e=9===t.length),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function IO(t,e,n){void 0===n&&(n=e.length);var r=ZO(t,e,n),i=r[n-1];return r.map((function(t){return t/i}))}function XO(t,e){return ZO(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function UO(t,e){return ZO(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function qO(t,e){return ZO(t,FO(e,4))}function zO(t,e){var n=e[0],r=void 0===n?1:n,i=e[1],o=void 0===i?1:i,s=e[2];return ZO(t,[r,0,0,0,0,o,0,0,0,0,void 0===s?1:s,0,0,0,0,1],4)}function YO(t,e){return IO(FO(e,3),DO(t,3))}function LO(t,e){var n=e[0],r=void 0===n?0:n,i=e[1],o=void 0===i?0:i,s=e[2];return ZO(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,void 0===s?0:s,1],4)}function GO(t,e){return ZO(t,e,4)}function FO(t,e){var n=Math.cos(t),r=Math.sin(t),i=HO(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function HO(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function KO(t,e){for(var n=HO(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function JO(t,e){for(var n=HO(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function tv(t,e,n,r,i,o,s,a){var l=t[0],c=t[1],h=e[0],u=e[1],f=n[0],d=n[1],p=r[0],g=r[1],m=i[0],O=i[1],v=o[0],b=o[1],y=s[0],w=s[1],x=a[0],S=a[1],k=RO([l,0,h,0,f,0,p,0,c,0,u,0,d,0,g,0,1,0,1,0,1,0,1,0,0,l,0,h,0,f,0,p,0,c,0,u,0,d,0,g,0,1,0,1,0,1,0,1,-m*l,-O*l,-v*h,-b*h,-y*f,-w*f,-x*p,-S*p,-m*c,-O*c,-v*u,-b*u,-y*d,-w*d,-x*g,-S*g],8);if(!k.length)return[];var C=ZO(k,[m,O,v,b,y,w,x,S],8);return C[8]=1,WO(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}(C),3,4)}function ev(t){return rv(iv(t))}function nv(t,e){var n=IO(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function rv(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(t){var n=t.matrixFunction,r=t.functionValue;n&&(e=n(e,r))})),e}function iv(t){return(sm(t)?t:dm(t)).map((function(t){var e=gm(t),n=e.prefix,r=e.value,i=null,o=n,s="";if("translate"===n||"translateX"===n||"translate3d"===n){var a=pm(r).map((function(t){return parseFloat(t)})),l=a[0],c=a[1],h=void 0===c?0:c,u=a[2];i=LO,s=[l,h,void 0===u?0:u]}else if("translateY"===n)i=LO,s=[0,h=parseFloat(r),0];else if("translateZ"===n)i=LO,s=[0,0,parseFloat(r)];else if("scale"===n||"scale3d"===n){var f=pm(r).map((function(t){return parseFloat(t)})),d=f[0],p=f[1],g=void 0===p?d:p,m=f[2];i=zO,s=[d,g,void 0===m?1:m]}else if("scaleX"===n)i=zO,s=[d=parseFloat(r),1,1];else if("scaleY"===n)i=zO,s=[1,g=parseFloat(r),1];else if("scaleZ"===n)i=zO,s=[1,1,parseFloat(r)];else if("rotate"===n||"rotateZ"===n||"rotateX"===n||"rotateY"===n){var O=mm(r),v=O.unit,b=O.value;"rotate"===n||"rotateZ"===n?(o="rotateZ",i=qO):"rotateX"===n?i=XO:"rotateY"===n&&(i=UO),s="rad"===v?b:b*Math.PI/180}else if("matrix3d"===n)i=GO,s=pm(r).map((function(t){return parseFloat(t)}));else if("matrix"===n){var y=pm(r).map((function(t){return parseFloat(t)}));i=GO,s=[y[0],y[1],0,0,y[2],y[3],0,0,0,0,1,0,y[4],y[5],0,1]}else o="";return{name:n,functionName:o,value:r,matrixFunction:i,functionValue:s}}))}var ov,sv=function(t,e){return sv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},sv(t,e)},av="function"==typeof Map?void 0:(ov=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++ov)}),lv=function(t){function e(e){return void 0===e&&(e=[]),t.call(this,e,av)||this}return function(t,e){function n(){this.constructor=t}sv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Hg);function cv(t,e){return Gg(t,e,av)}const hv=lv;function uv(t){return Rm(t,em)}function fv(t){return t.length<3?0:Math.abs(function(t){for(var e=0,n=t.length-1;n>=0;--n)e+=t[n];return e}(t.map((function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]}))))/2}function dv(t,e){var n=e.width,r=e.height,i=e.left,o=e.top,s=pv(t),a=s.minX,l=s.minY,c=s.maxX,h=s.maxY,u=n/(c-a),f=r/(h-l);return t.map((function(t){return[i+(t[0]-a)*u,o+(t[1]-l)*f]}))}function pv(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function gv(t,e,n){var r=t[0],i=t[1],o=pv(e),s=o.minX,a=o.maxX,l=[[s,i],[a,i]],c=mv(l[0],l[1]),h=bv(e),u=[];if(h.forEach((function(e){var n,r=mv(e[0],e[1]),o=e[0];n=r,c.every((function(t,e){return 0===uv(t-n[e])}))?u.push({pos:t,line:e,type:"line"}):vv(Ov(c,r),[l,e]).forEach((function(t){e.some((function(e){return r=t,!uv((n=e)[0]-r[0])&&!uv(n[1]-r[1]);var n,r}))?u.push({pos:t,line:e,type:"point"}):0!==uv(o[1]-i)&&u.push({pos:t,line:e,type:"intersection"})}))})),!n&&wm(u,(function(t){return t[0]===r})))return!0;var f=0,d={};return u.forEach((function(t){var e=t.pos,n=t.type,o=t.line;if(!(e[0]>r))if("intersection"===n)++f;else{if("line"===n)return;if("point"===n){var s=wm(o,(function(t){return t[1]!==i})),a=d[e[0]],l=s[1]>i?1:-1;a?a!==l&&++f:d[e[0]]=l}}})),f%2==1}function mv(t,e){var n=t[0],r=t[1],i=e[0]-n,o=e[1]-r;Math.abs(i)<em&&(i=0),Math.abs(o)<em&&(o=0);var s=0,a=0,l=0;return i?o?(a=1,l=-(s=-o/i)*n-r):(a=1,l=-r):o&&(s=-1,l=n),[s,a,l]}function Ov(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],l=0===n&&0===o,c=0===r&&0===s,h=[];if(l&&c)return[];if(l){var u=-i/r;return u!==-a/s?[]:[[-1/0,u],[1/0,u]]}if(c){var f=-i/n;return f!==-a/o?[]:[[f,-1/0],[f,1/0]]}if(0===n)h=[[d=-(s*(p=-i/r)+a)/o,p]];else if(0===o)h=[[d=-(r*(p=-a/s)+i)/n,p]];else if(0===r)h=[[d=-i/n,p=-(o*d+a)/s]];else if(0===s)h=[[d=-a/o,p=-(n*d+i)/r]];else{var d,p;h=[[d=(r*a-s*i)/(s*n-r*o),p=-(n*d+i)/r]]}return h.map((function(t){return[t[0],t[1]]}))}function vv(t,e){var n=e.map((function(t){return[0,1].map((function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]}))})),r=[];if(2===t.length){var i=t[0],o=i[0],s=i[1];if(uv(o-t[1][0])){if(!uv(s-t[1][1])){var a=Math.max.apply(Math,n.map((function(t){return t[0][0]}))),l=Math.min.apply(Math,n.map((function(t){return t[0][1]})));if(uv(a-l)>0)return[];r=[[a,s],[l,s]]}}else{var c=Math.max.apply(Math,n.map((function(t){return t[1][0]}))),h=Math.min.apply(Math,n.map((function(t){return t[1][1]})));if(uv(c-h)>0)return[];r=[[o,c],[o,h]]}}return r.length||(r=t.filter((function(t){var e=t[0],r=t[1];return n.every((function(t){return 0<=uv(e-t[0][0])&&0<=uv(t[0][1]-e)&&0<=uv(r-t[1][0])&&0<=uv(t[1][1]-r)}))}))),r.map((function(t){return[uv(t[0]),uv(t[1])]}))}function bv(t){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(t.slice(1),[t[0]]).map((function(e,n){return[t[n],e]}))}function yv(t,e){return function(t,e){var n=t.slice(),r=e.slice();-1===$m(n)&&n.reverse(),-1===$m(r)&&r.reverse();var i=bv(n),o=bv(r),s=i.map((function(t){return mv(t[0],t[1])})),a=o.map((function(t){return mv(t[0],t[1])})),l=[];s.forEach((function(t,e){var n=i[e],s=[];a.forEach((function(r,i){var a=vv(Ov(t,r),[n,o[i]]);s.push.apply(s,a.map((function(t){return{index1:e,index2:i,pos:t,type:"intersection"}})))})),s.sort((function(t,e){return Mm(n[0],t.pos)-Mm(n[0],e.pos)})),l.push.apply(l,s),gv(n[1],r)&&l.push({index1:e,index2:-1,pos:n[1],type:"inside"})})),o.forEach((function(t,e){if(gv(t[1],n)){var r=!1,i=ym(l,(function(t){return t.index2===e?(r=!0,!1):!!r}));-1===i&&(r=!1,i=ym(l,(function(t){var n=t.index1,i=t.index2;return-1===n&&i+1===e?(r=!0,!1):!!r}))),-1===i?l.push({index1:-1,index2:e,pos:t[1],type:"inside"}):l.splice(i,0,{index1:-1,index2:e,pos:t[1],type:"inside"})}}));var c={};return l.filter((function(t){var e=t.pos,n=e[0]+"x"+e[1];return!c[n]&&(c[n]=!0,!0)}))}(t,e).map((function(t){return t.pos}))}var wv=function(){return wv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},wv.apply(this,arguments)},xv=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(om(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(om(t))for(var n in t)this.off(n);else if(e){var r=this._events[t];if(r){var i=ym(r,(function(t){return t.listener===e}));i>-1&&r.splice(i,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var n=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){n._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var n=this;void 0===e&&(e={});var r=this._events[t];if(!t||!r)return!0;var i=!1;return e.eventType=t,e.stop=function(){i=!0},e.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(r).forEach((function(r){r.listener(e),r.once&&n.off(t,r.listener)})),!i},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(wv({listener:e},n))},t}();const Sv=xv;"undefined"!=typeof document&&document;var kv=function(t,e){return kv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},kv(t,e)},Cv=function(){return Cv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Cv.apply(this,arguments)};function Qv(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function Pv(t){return t?"string"==typeof t?document.querySelector(t):function(t){return"function"==typeof t}(t)?t():t instanceof Element?t:"current"in t?t.current:"value"in t?t.value:void 0:null}var Ev=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._startRect=null,e._startPos=[],e._prevTime=0,e._timer=0,e._prevScrollPos=[0,0],e._isWait=!1,e._flag=!1,e}!function(t,e){function n(){this.constructor=t}kv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.dragStart=function(t,e){var n=Pv(e.container);if(n){var r=0,i=0,o=0,s=0;if(n===document.body)o=window.innerWidth,s=window.innerHeight;else{var a=n.getBoundingClientRect();r=a.top,i=a.left,o=a.width,s=a.height}this._flag=!0,this._startPos=[t.clientX,t.clientY],this._startRect={top:r,left:i,width:o,height:s},this._prevScrollPos=this._getScrollPosition([0,0],e)}else this._flag=!1},n.drag=function(t,e){if(this._flag){var n=t.clientX,r=t.clientY,i=e.threshold,o=void 0===i?0:i,s=this._startRect,a=this._startPos,l=[0,0];return s.top>r-o?(a[1]>s.top||r<a[1])&&(l[1]=-1):s.top+s.height<r+o&&(a[1]<s.top+s.height||r>a[1])&&(l[1]=1),s.left>n-o?(a[0]>s.left||n<a[0])&&(l[0]=-1):s.left+s.width<n+o&&(a[0]<s.left+s.width||n>a[0])&&(l[0]=1),clearTimeout(this._timer),!(!l[0]&&!l[1])&&this._continueDrag(Cv(Cv({},e),{direction:l,inputEvent:t,isDrag:!0}))}},n.checkScroll=function(t){var e=this;if(this._isWait)return!1;var n=t.prevScrollPos,r=void 0===n?this._prevScrollPos:n,i=t.direction,o=t.throttleTime,s=void 0===o?0:o,a=t.inputEvent,l=t.isDrag,c=this._getScrollPosition(i||[0,0],t),h=c[0]-r[0],u=c[1]-r[1],f=i||[h?Math.abs(h)/h:0,u?Math.abs(u)/u:0];return this._prevScrollPos=c,!(!h&&!u||(this.trigger("move",{offsetX:f[0]?h:0,offsetY:f[1]?u:0,inputEvent:a}),s&&l&&(this._timer=window.setTimeout((function(){e._continueDrag(t)}),s)),0))},n.dragEnd=function(){clearTimeout(this._timer)},n._getScrollPosition=function(t,e){var n=e.container,r=e.getScrollPosition;return(void 0===r?Qv:r)({container:Pv(n),direction:t})},n._continueDrag=function(t){var e=this,n=t.container,r=t.direction,i=t.throttleTime,o=t.useScroll,s=t.isDrag,a=t.inputEvent;if(!s||!this._isWait){var l=Date.now?Date.now():(new Date).getTime(),c=Math.max(i+this._prevTime-l,0);if(c>0)return this._timer=window.setTimeout((function(){e._continueDrag(t)}),c),!1;this._prevTime=l;var h=this._getScrollPosition(r,t);return this._prevScrollPos=h,s&&(this._isWait=!0),this.trigger("scroll",{container:Pv(n),direction:r,inputEvent:a}),this._isWait=!1,o||this.checkScroll(Cv(Cv({},t),{prevScrollPos:h,direction:r,inputEvent:a}))}},e}(Sv);const Tv=Ev;var _v=function(t,e){return _v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},_v(t,e)},$v=function(){return $v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},$v.apply(this,arguments)};function Mv(t){return 180*(e=[t[0].clientX,t[0].clientY],r=(n=[t[1].clientX,t[1].clientY])[0]-e[0],i=n[1]-e[1],((o=Math.atan2(i,r))>=0?o:o+2*Math.PI)/Math.PI);var e,n,r,i,o}function Rv(t){return t?t.touches?function(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(Wv(t[r]));return n}(t.touches):[Wv(t)]:[]}function Av(t,e,n){var r=n.length,i=jv(t,r),o=i.clientX,s=i.clientY,a=i.originalClientX,l=i.originalClientY,c=jv(e,r),h=c.clientX,u=c.clientY,f=jv(n,r);return{clientX:a,clientY:l,deltaX:o-h,deltaY:s-u,distX:o-f.clientX,distY:s-f.clientY}}function Dv(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Wv(t){return{clientX:t.clientX,clientY:t.clientY}}function jv(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var i=t[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var Zv=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var e=t.prototype;return e.getAngle=function(t){return void 0===t&&(t=this.prevClients),Mv(t)},e.getRotation=function(t){return void 0===t&&(t=this.prevClients),Mv(t)-Mv(this.startClients)},e.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var n=Av(t||this.prevClients,this.prevClients,this.startClients),r=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(r*r+i*i),this.prevClients=t,n},e.getPositions=function(t){void 0===t&&(t=this.prevClients);var e=this.prevClients;return this.startClients.map((function(n,r){return Av([t[r]],[e[r]],[n])}))},e.getMovement=function(t){var e=this.movement;if(!t)return e;var n=jv(t,this.length),r=jv(this.prevClients,this.length),i=n.clientX-r.clientX,o=n.clientY-r.clientY;return Math.sqrt(i*i+o*o)+e},e.getDistance=function(t){return void 0===t&&(t=this.prevClients),Dv(t)},e.getScale=function(t){return void 0===t&&(t=this.prevClients),Dv(t)/Dv(this.startClients)},e.move=function(t,e){this.startClients.forEach((function(n){n.clientX-=t,n.clientY-=e}))},t}(),Nv=["textarea","input"],Bv=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;r.options={},r.flag=!1,r.pinchFlag=!1,r.data={},r.isDrag=!1,r.isPinch=!1,r.isMouse=!1,r.isTouch=!1,r.clientStores=[],r.targets=[],r.prevTime=0,r.doubleFlag=!1,r._dragFlag=!1,r._isMouseEvent=!1,r._isSecondaryButton=!1,r._preventMouseEvent=!1,r.onDragStart=function(t,e){if(void 0===e&&(e=!0),r.flag||!1!==t.cancelable){var n=r.options,i=n.container,o=n.pinchOutside,s=n.preventWheelClick,a=n.preventRightClick,l=n.preventDefault,c=n.checkInput,h=n.preventClickEventOnDragStart,u=n.preventClickEventOnDrag,f=n.preventClickEventByCondition,d=r.isTouch,p=!r.flag;if(r._isSecondaryButton=3===t.which||2===t.button,s&&(2===t.which||1===t.button)||a&&(3===t.which||2===t.button))return r.stop(),!1;if(p){var g=document.activeElement,m=t.target;if(m){var O=m.tagName.toLowerCase(),v=Nv.indexOf(O)>-1,b=m.isContentEditable;if(v||b){if(c||g===m)return!1;if(g&&b&&g.isContentEditable&&g.contains(m))return!1}else if((l||"touchstart"===t.type)&&g){var y=g.tagName.toLowerCase();(g.isContentEditable||Nv.indexOf(y)>-1)&&g.blur()}(h||u||f)&&Zm(window,"click",r._onClick,!0)}r.clientStores=[new Zv(Rv(t))],r.flag=!0,r.isDrag=!1,r._dragFlag=!0,r.data={},r.doubleFlag=bm()-r.prevTime<200,r._isMouseEvent=function(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}(t),!r._isMouseEvent&&r._preventMouseEvent&&(r._preventMouseEvent=!1),!1===(r._preventMouseEvent||r.emit("dragStart",$v($v({data:r.data,datas:r.data,inputEvent:t,isMouseEvent:r._isMouseEvent,isSecondaryButton:r._isSecondaryButton,isTrusted:e,isDouble:r.doubleFlag},r.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){r._dragFlag=!1}})))&&r.stop(),r._isMouseEvent&&r.flag&&l&&t.preventDefault()}if(!r.flag)return!1;var w=0;if(p?(r._attchDragEvent(),d&&o&&(w=setTimeout((function(){Zm(i,"touchstart",r.onDragStart,{passive:!1})})))):d&&o&&Nm(i,"touchstart",r.onDragStart),r.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(w),p&&t.touches.length!==t.changedTouches.length)return;r.pinchFlag||r.onPinchStart(t)}}},r.onDrag=function(t,e){if(r.flag){var n=r.options.preventDefault;!r._isMouseEvent&&n&&t.preventDefault();var i=Rv(t),o=r.moveClients(i,t,!1);if(r._dragFlag){if((r.pinchFlag||o.deltaX||o.deltaY)&&!1===(r._preventMouseEvent||r.emit("drag",$v($v({},o),{isScroll:!!e,inputEvent:t}))))return void r.stop();r.pinchFlag&&r.onPinch(t,i)}r.getCurrentStore().getPosition(i,!0)}},r.onDragEnd=function(t){if(r.flag){var e=r.options,n=e.pinchOutside,i=e.container,o=e.preventClickEventOnDrag,s=e.preventClickEventOnDragStart,a=e.preventClickEventByCondition,l=r.isDrag;(o||s||a)&&requestAnimationFrame((function(){r._allowClickEvent()})),a||s||!o||l||r._allowClickEvent(),r.isTouch&&n&&Nm(i,"touchstart",r.onDragStart),r.pinchFlag&&r.onPinchEnd(t);var c=(null==t?void 0:t.touches)?Rv(t):[];0!==c.length&&r.options.keepDragging?r._addStore(new Zv(c)):r.flag=!1;var h=r._getPosition(),u=bm(),f=!l&&r.doubleFlag;r.prevTime=l||f?0:u,r.flag||(r._dettachDragEvent(),r._preventMouseEvent||r.emit("dragEnd",$v({data:r.data,datas:r.data,isDouble:f,isDrag:l,isClick:!l,isMouseEvent:r._isMouseEvent,isSecondaryButton:r._isSecondaryButton,inputEvent:t},h)),r.clientStores=[],r._isMouseEvent||(r._preventMouseEvent=!0,requestAnimationFrame((function(){requestAnimationFrame((function(){r._preventMouseEvent=!1}))}))))}},r.onBlur=function(){r.onDragEnd()},r._allowClickEvent=function(){Nm(window,"click",r._onClick,!0)},r._onClick=function(t){r._allowClickEvent(),r._preventMouseEvent=!1;var e=r.options.preventClickEventByCondition;(null==e?void 0:e(t))||(t.stopPropagation(),t.preventDefault())},r._onContextMenu=function(t){r.options.preventRightClick?r.onDragEnd(t):t.preventDefault()},r._passCallback=function(){};var i=[].concat(e);r.options=$v({checkInput:!1,container:i.length>1?window:i[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var o=r.options,s=o.container,a=o.events,l=o.checkWindowBlur;if(r.isTouch=a.indexOf("touch")>-1,r.isMouse=a.indexOf("mouse")>-1,r.targets=i,r.isMouse&&(i.forEach((function(t){Zm(t,"mousedown",r.onDragStart),Zm(t,"mousemove",r._passCallback)})),Zm(s,"contextmenu",r._onContextMenu)),l&&Zm(window,"blur",r.onBlur),r.isTouch){var c={passive:!1};i.forEach((function(t){Zm(t,"touchstart",r.onDragStart,c),Zm(t,"touchmove",r._passCallback,c)}))}return r}!function(t,e){function n(){this.constructor=t}_v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return n.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent(),this._dettachDragEvent()},n.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,e){return t+e.movement}),0)},n.isDragging=function(){return this.isDrag},n.isFlag=function(){return this.flag},n.isPinchFlag=function(){return this.pinchFlag},n.isDoubleFlag=function(){return this.doubleFlag},n.isPinching=function(){return this.isPinch},n.scrollBy=function(t,e,n,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,e),r&&this.onDrag(n,!0))},n.move=function(t,e){var n=t[0],r=t[1],i=this.getCurrentStore().prevClients;return this.moveClients(i.map((function(t){var e=t.clientX,i=t.clientY;return{clientX:e+n,clientY:i+r,originalClientX:e,originalClientY:i}})),e,!0)},n.triggerDragStart=function(t){this.onDragStart(t,!1)},n.setEventData=function(t){var e=this.data;for(var n in t)e[n]=t[n];return this},n.setEventDatas=function(t){return this.setEventData(t)},n.getCurrentEvent=function(t){return $v($v({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},n.getEventData=function(){return this.data},n.getEventDatas=function(){return this.data},n.unset=function(){var t=this,e=this.targets,n=this.options.container;this.off(),Nm(window,"blur",this.onBlur),this.isMouse&&(e.forEach((function(e){Nm(e,"mousedown",t.onDragStart)})),Nm(n,"contextmenu",this._onContextMenu)),this.isTouch&&(e.forEach((function(e){Nm(e,"touchstart",t.onDragStart)})),Nm(n,"touchstart",this.onDragStart)),this._allowClickEvent(),this._dettachDragEvent()},n.onPinchStart=function(t){var e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var n=new Zv(Rv(t));this.pinchFlag=!0,this._addStore(n),!1===this.emit("pinchStart",$v($v({data:this.data,datas:this.data,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition()),{inputEvent:t}))&&(this.pinchFlag=!1)}},n.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var n=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",$v($v({data:this.data,datas:this.data,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e)),{inputEvent:t}))}},n.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var n=this.getCurrentStore();this.emit("pinchEnd",$v($v({data:this.data,datas:this.data,isPinch:e,touches:n.getPositions()},n.getPosition()),{inputEvent:t}))}},n.getCurrentStore=function(){return this.clientStores[0]},n.moveClients=function(t,e,n){var r=this._getPosition(t,n);return(r.deltaX||r.deltaY)&&(this.isDrag=!0),$v($v({data:this.data,datas:this.data},r),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e})},n._addStore=function(t){this.clientStores.splice(0,0,t)},n._getPosition=function(t,e){var n=this.getCurrentStore().getPosition(t,e),r=this.clientStores.slice(1).reduce((function(t,e){var n=e.getPosition();return t.distX+=n.distX,t.distY+=n.distY,t}),n),i=r.distX,o=r.distY;return $v($v({},n),{distX:i,distY:o})},n._attchDragEvent=function(){var t=this.options.container,e={passive:!1};this.isMouse&&(Zm(t,"mousemove",this.onDrag),Zm(t,"mouseup",this.onDragEnd)),this.isTouch&&(Zm(t,"touchmove",this.onDrag,e),Zm(t,"touchend",this.onDragEnd,e),Zm(t,"touchcancel",this.onDragEnd,e))},n._dettachDragEvent=function(){var t=this.options.container;this.isMouse&&(Nm(t,"mousemove",this.onDrag),Nm(t,"mouseup",this.onDragEnd)),this.isTouch&&(Nm(t,"touchstart",this.onDragStart),Nm(t,"touchmove",this.onDrag),Nm(t,"touchend",this.onDragEnd),Nm(t,"touchcancel",this.onDragEnd))},e}(Sv);const Vv=Bv;const Iv=function(t){var e,n="rCS"+function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}(t).toString(36),r=0;return{className:n,inject:function(i,o){void 0===o&&(o={});var s,a=function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(i),l=0===r;return(a||l)&&(s=function(t,e,n,r){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",t),n.nonce&&i.setAttribute("nonce",n.nonce),i.innerHTML=function(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(e,n){var r=n.trim();return(r?pm(r):[""]).map((function(e){var n=e.trim();return 0===n.indexOf("@")?n:n.indexOf(":global")>-1?n.replace(/\:global/g,""):n.indexOf(":host")>-1?""+n.replace(/\:host/g,"."+t):n?"."+t+" "+n:"."+t})).join(", ")+" {"}))}(t,e,n),(r||document.head||document.body).appendChild(i),i}(n,t,o,a)),l&&(e=s),a||++r,{destroy:function(){a?(a.removeChild(s),s=null):(r>0&&--r,0===r&&e&&(e.parentNode.removeChild(e),e=null))}}}}};var Xv=function(t,e){return Xv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Xv(t,e)};function Uv(t,e){function n(){this.constructor=t}Xv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var qv=function(){return qv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},qv.apply(this,arguments)},zv=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.injectResult=null,e.tag="div",e}Uv(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=t.className,n=void 0===e?"":e,r=(t.cspNonce,t.portalContainer),i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["className","cspNonce","portalContainer"]),o=this.injector.className,s=this.tag,a={};return"simple-1.1.0".indexOf("simple")>-1&&r&&(a={portalContainer:r}),Km(s,qv({ref:Vg(this,"element"),"data-styled-id":o,className:n+" "+o},a,i))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},e}(lO);const Yv=function(t,e){var n=Iv(e);return function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.injector=n,r.tag=t,r}return Uv(r,e),r}(zv)};var Lv=function(t,e){return Lv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Lv(t,e)};function Gv(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Lv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Fv=function(){return Fv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Fv.apply(this,arguments)};function Hv(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function Kv(t,e){var n;return Fv({events:{},props:(n={},n[t]=Boolean,n),name:t},e)}var Jv,tb,eb=EO(),nb=eb.browser.webkit,rb=nb&&(Jv="undefined"==typeof window?{userAgent:""}:window.navigator,!!(tb=/applewebkit\/([^\s]+)/g.exec(Jv.userAgent.toLowerCase()))&&parseFloat(tb[1])<605),ib="firefox"===eb.browser.name,ob=parseInt(eb.browser.webkitVersion,10)>=612||parseInt(eb.browser.version,10)>=15,sb="moveable-",ab="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.edge {\n    z-index: 1;\n    background: transparent;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n".concat([0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'.concat(t,'"], :global .view-control-rotation').concat(t," {\n\t").concat(function(t){var e=function(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32,'px" height="').concat(32,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}(0,t),n=45*Math.round(t/45)%180,r="ns-resize";return 135===n?r="nwse-resize":45===n?r="nesw-resize":90===n&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}(t),"\n}\n")})).join("\n"),"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n").concat(rb?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"","\n"),lb=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],cb=1e-7,hb=1e-9,ub=Math.pow(10,10),fb=-ub,db=["n","w","s","e"],pb=["n","w","s","e","nw","ne","sw","se"],gb={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},mb={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Ob={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},vb=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets"];function bb(t,e,n,r,i,o){void 0===o&&(o="draggable");var s=e.gestos[o].move(n,t.inputEvent),a=s.originalDatas||s.datas,l=a[o]||(a[o]={});return Fv(Fv({},i?Ry(e,s):s),{isPinch:!!r,parentEvent:!0,datas:l,originalDatas:t.originalDatas})}var yb=function(){function t(t){var e;void 0===t&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),Fv(Fv({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0)):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),this.prevX=n,this.prevY=r,{type:"drag",clientX:n,clientY:r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function wb(t,e){var n=e.clientX,r=e.clientY,i=e.datas,o=t.state,s=o.moveableClientRect,a=o.rootMatrix,l=o.is3d,c=o.pos1,h=BO(My(a,[n-s.left,r-s.top],l?4:3),c),u=Pb({datas:i,distX:h[0],distY:h[1]});return[u[0],u[1]]}function xb(t,e){var n=e.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,s=r.is3d,a=r.left,l=r.top,c=r.origin,h=r.offsetMatrix,u=r.targetMatrix,f=r.transformOrigin,d=s?4:3;n.is3d=s,n.matrix=i,n.targetMatrix=u,n.beforeMatrix=o,n.offsetMatrix=h,n.transformOrigin=f,n.inverseMatrix=RO(i,d),n.inverseBeforeMatrix=RO(o,d),n.absoluteOrigin=DO(NO([a,l],c),d),n.startDragBeforeDist=IO(n.inverseBeforeMatrix,n.absoluteOrigin,d),n.startDragDist=IO(n.inverseMatrix,n.absoluteOrigin,d)}function Sb(t,e){var n=t.datas,r=t.originalDatas.beforeRenderable,i=n.transformIndex,o=r.nextTransforms,s=o.length,a=r.nextTransformAppendedIndexes,l=0;-1===i?(l=o.length,n.transformIndex=l):l=wm(a,(function(t){return t.index===i&&t.functionName===e}))?i:i+a.filter((function(t){return t.index<i})).length;var c=function(t,e){var n=t.slice(0,e<0?void 0:e),r=t.slice(0,e<0?void 0:e+1),i=t[e]||"",o=e<0?[]:t.slice(e),s=e<0?[]:t.slice(e+1),a=iv(n),l=iv(r),c=iv([i]),h=iv(o),u=iv(s),f=rv(a),d=rv(l),p=rv(h),g=rv(u),m=ZO(f,p,4);return{transforms:t,beforeFunctionMatrix:f,beforeFunctionMatrix2:d,targetFunctionMatrix:rv(c),afterFunctionMatrix:p,afterFunctionMatrix2:g,allFunctionMatrix:m,beforeFunctions:a,beforeFunctions2:l,targetFunction:c[0],afterFunctions:h,afterFunctions2:u,beforeFunctionTexts:n,beforeFunctionTexts2:r,targetFunctionText:i,afterFunctionTexts:o,afterFunctionTexts2:s}}(o,l),h=c.targetFunction,u="rotate"===e?"rotateZ":e;n.beforeFunctionTexts=c.beforeFunctionTexts,n.afterFunctionTexts=c.afterFunctionTexts,n.beforeTransform=c.beforeFunctionMatrix,n.beforeTransform2=c.beforeFunctionMatrix2,n.targetTansform=c.targetFunctionMatrix,n.afterTransform=c.afterFunctionMatrix,n.afterTransform2=c.afterFunctionMatrix2,n.targetAllTransform=c.allFunctionMatrix,h.functionName===u?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,r.nextTransformAppendedIndexes=Hv(Hv([],a,!0),[{functionName:e,index:l,isAppend:!0}],!1))}function kb(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Cb(t,e,n){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,s=t.afterTransform2,a=t.targetAllTransform,l=n?ZO(a,e,4):ZO(e,a,4),c=ZO(RO(n?o:r,4),l,4);return ZO(c,RO(n?s:i,4),4)}function Qb(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,o=e.is3d,s=e.startDragBeforeDist,a=o?4:3;return BO(IO(i,NO(e.absoluteOrigin,[n,r]),a),s)}function Pb(t,e){var n=t.datas,r=t.distX,i=t.distY,o=n.inverseBeforeMatrix,s=n.inverseMatrix,a=n.is3d,l=n.startDragBeforeDist,c=n.startDragDist,h=a?4:3;return BO(IO(e?o:s,NO(n.absoluteOrigin,[r,i]),h),e?l:c)}function Eb(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function Tb(t,e){var n=(e[0]+1)/2,r=(e[1]+1)/2,i=[rm(t[0][0],t[1][0],n,1-n),rm(t[0][1],t[1][1],n,1-n)],o=[rm(t[2][0],t[3][0],n,1-n),rm(t[2][1],t[3][1],n,1-n)];return[rm(i[0],o[0],r,1-r),rm(i[1],o[1],r,1-r)]}function _b(t,e,n,r){return ZO(t,qb(e,r,n),r)}function $b(t){var e=Db(t);return{setTransform:function(n,r){void 0===r&&(r=-1),e.startTransforms=sm(n)?n:dm(n),Rb(t,r)},setTransformIndex:function(e){Rb(t,e)}}}function Mb(t,e){Rb(t,ym(Db(t).startTransforms,(function(t){return 0===t.indexOf("".concat(e,"("))})))}function Rb(t,e){var n=Db(t),r=t.datas;if(r.transformIndex=e,-1!==e){var i=n.startTransforms[e];if(i){var o=iv([i]);r.startValue=o[0].functionValue}}}function Ab(t,e){Db(t).nextTransforms=dm(e)}function Db(t){return t.originalDatas.beforeRenderable}function Wb(t){return t.originalDatas.beforeRenderable.nextTransforms}function jb(t){return Wb(t).join(" ")}function Zb(t){return Db(t).nextStyle}function Nb(t,e,n,r,i){Ab(i,e);var o=Lw.drag(t,bb(i,t.state,n,r,!1)),s=o?o.transform:e;return Fv(Fv({transform:e,drag:o},yy({transform:s},i)),{afterTransform:s})}function Bb(t,e,n,r,i){var o=t.state,s=o.left,a=o.top,l=t.props.groupable,c=function(t,e,n){var r=t.transformOrigin,i=t.offsetMatrix,o=t.is3d,s=e.beforeTransform,a=e.afterTransform,l=o?4:3;return _b(i,WO(ZO(ZO(s,ev([n]),4),a,4),4,l),r,l)}(t.state,i,e),h=l?s:0,u=l?a:0,f=BO(r,Vb(t,n,c));return BO(f,[h,u])}function Vb(t,e,n){void 0===n&&(n=t.state.allMatrix);var r=t.state,i=r.width,o=r.height,s=r.is3d?4:3;return ny(n,[i/2*(1+e[0]),o/2*(1+e[1])],s)}function Ib(t,e){return Tb(vy(t.state),e)}function Xb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Bg.apply(void 0,Hv([sb],t,!1))}function Ub(t){t()}function qb(t,e,n){return jO(e,JO(n,e),t,JO(n.map((function(t){return-t})),e))}function zb(t){var e=t.transformOrigin;return e?e.split(" "):["0","0"]}function Yb(t,e){void 0===e&&(e=Qy(t));var n=e.transform;if(n&&"none"!==n)return e.transform;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var i=r.length;if(!i)return"";for(var o=[],s=function(t){var e=r[t].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map((function(t){return e[t]})).join(", "),")"))},a=0;a<i;++a)s(a);return o.join(" ")}return""}function Lb(t,e,n){var r,i,o,s,a=document.body,l=!1;if(!t||n)o=t;else{var c=null===(r=null==t?void 0:t.assignedSlot)||void 0===r?void 0:r.parentElement,h=t.parentElement;c?(l=!0,s=h,o=c):o=h}for(var u=!1,f=t===e||o===e,d="relative";o&&o!==a;){e===o&&(f=!0);var p=Qy(o),g=o.tagName.toLowerCase(),m=Yb(o,p),O=p.willChange;if(d=p.position,"svg"===g||"static"!==d||m&&"none"!==m||"transform"===O)break;var v=null===(i=null==t?void 0:t.assignedSlot)||void 0===i?void 0:i.parentNode,b=o.parentNode;v&&(l=!0,s=b);var y=v||b;if(y&&11===y.nodeType){o=y.host,u=!0;break}o=y,d="relative"}return{hasSlot:l,parentSlotElement:s,isCustomElement:u,isStatic:"static"===d,isEnd:f||!o||o===a,offsetParent:o||a}}function Gb(t,e,n){var r,i,o,s=t.tagName.toLowerCase(),a=t.offsetLeft,l=t.offsetTop,c=im(a),h=!c;return h||"svg"===s?o=(i=zb(n).map((function(t){return parseFloat(t)}))).slice():(o=(i=rb?function(t){return zb(Qy(t,":before")).map((function(e,n){var r=mm(e),i=r.value,o=r.unit;return i*function(t,e,n){return"%"===e?ty(t.ownerSVGElement)[n?"width":"height"]/100:1}(t,o,0===n)}))}(t):zb(n).map((function(t){return parseFloat(t)}))).slice(),h=!0,r=function(t,e,n){if(!t.getBBox||!n&&"g"===t.tagName.toLowerCase())return[0,0,0,0];var r=t.getBBox(),i=ty(t.ownerSVGElement),o=r.x-i.x,s=r.y-i.y;return[o,s,e[0]-o,e[1]-s]}(t,i,t===e&&"g"===e.tagName.toLowerCase()),a=r[0],l=r[1],i[0]=r[2],i[1]=r[3]),{tagName:s,isSVG:c,hasOffset:h,offset:[a||0,l||0],origin:i,targetOrigin:o}}function Fb(t,e,n){void 0===n&&(n=Qy(t));var r=Qy(document.body),i=r.position;if(!(e||i&&"static"!==i))return[0,0];var o=parseInt(r.marginLeft,10),s=parseInt(r.marginTop,10);return"absolute"===n.position&&("auto"===n.top&&"auto"===n.bottom||(s=0),"auto"===n.left&&"auto"===n.right||(o=0)),[o,s]}function Hb(t){t.forEach((function(t){var e=t.matrix;e&&(t.matrix=WO(e,3,4))}))}function Kb(t){for(var e=t.parentElement,n=!1;e;){var r=Qy(e).transform;if(r&&"none"!==r){n=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:n}}function Jb(t,e){return void 0===e&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(VO(t,!e).join(","),")")}function ty(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function ey(t,e){var n=ty(t),r=n.width,i=n.height,o=n.clientWidth,s=n.clientHeight,a=o/r,l=s/i,c=t.preserveAspectRatio.baseVal,h=c.align,u=c.meetOrSlice,f=[0,0],d=[a,l],p=[0,0];if(1!==h){var g=(h-2)%3,m=Math.floor((h-2)/3);f[0]=r*g/2,f[1]=i*m/2;var O=2===u?Math.max(l,a):Math.min(a,l);d[0]=O,d[1]=O,p[0]=(o-r)/2*g,p[1]=(s-i)/2*m}var v=KO(d,e);return v[e*(e-1)]=p[0],v[e*(e-1)+1]=p[1],qb(v,e,f)}function ny(t,e,n){return IO(t,DO(e,n),n)}function ry(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map((function(e){return ny(t,e,r)}))}function iy(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]})),r=Math.min.apply(Math,e),i=Math.min.apply(Math,n),o=Math.max.apply(Math,e),s=Math.max.apply(Math,n);return{left:r,top:i,right:o,bottom:s,width:o-r,height:s-i}}function oy(t,e,n,r){return iy(ry(t,e,n,r))}function sy(t,e,n,r){var i=16===t.length?4:3,o=ry(t,n,r,i),s=o[0],a=s[0],l=s[1],c=o[1],h=c[0],u=c[1],f=o[2],d=f[0],p=f[1],g=o[3],m=g[0],O=g[1],v=ny(t,e,i),b=v[0],y=v[1],w=Math.min(a,h,d,m),x=Math.min(l,u,p,O),S=Math.max(a,h,d,m);return a=a-w||0,{left:w,top:x,right:S,bottom:Math.max(l,u,p,O),origin:[b=b-w||0,y=y-x||0],pos1:[a,l=l-x||0],pos2:[h=h-w||0,u=u-x||0],pos3:[d=d-w||0,p=p-x||0],pos4:[m=m-w||0,O=O-x||0],direction:$m(o)}}function ay(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ly(t,e){return ay([e[0]-t[0],e[1]-t[1]])}function cy(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=_m(t,e));var i=ly(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function hy(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,o=n.reduce((function(t,e){return t+e[0]}),0)/i,s=n.reduce((function(t,e){return t+e[1]}),0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(s,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function uy(t,e){var n=t[e];return om(n)?Fv(Fv({},t),n):t}function fy(t,e){void 0===e&&(e=t?Qy(t):null);var n=t&&!im(t.offsetWidth),r=0,i=0,o=0,s=0,a=0,l=0,c=0,h=0,u=0,f=0,d=0,p=0,g=1/0,m=1/0,O=1/0,v=1/0,b=!1;if(t)if(n||"svg"===t.tagName.toLowerCase()){var y=t.style,w="border-box"===e.boxSizing,x=parseFloat(e.borderLeftWidth)||0,S=parseFloat(e.borderRightWidth)||0,k=parseFloat(e.borderTopWidth)||0,C=parseFloat(e.borderBottomWidth)||0,Q=(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0),P=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0),E=Q+(x+S),T=P+(k+C),_=e.position,$=0,M=0;if("clientLeft"in t){var R=null;if(R="absolute"===_?Lb(t,document.body,!1).offsetParent:t.parentElement){var A=Qy(R);$=parseFloat(A.width),M=parseFloat(A.height)}}u=Math.max(Q,Cm(e.minWidth,$)||0),f=Math.max(P,Cm(e.minHeight,M)||0),g=Cm(e.maxWidth,$),m=Cm(e.maxHeight,M),isNaN(g)&&(g=1/0),isNaN(m)&&(m=1/0);var D=Cm(y.width,0)||0,W=Cm(y.height,0)||0,j=parseFloat(e.width)||0,Z=parseFloat(e.height)||0;a=parseFloat(e.width),l=parseFloat(e.height),r=c=Math.abs(j-D)<1?Qm(u,D||a,g):j,i=h=Math.abs(Z-W)<1?Qm(f,W||l,m):Z,o=c,s=h,w?(O=g,v=m,d=u,p=f,c=r-E,h=i-T):(O=g+E,v=m+T,d=u+E,p=f+T,r=c+E,i=h+T),o=c+Q,s=h+P}else{var N=t.getBBox();b=!0,a=r=N.width,l=i=N.height,c=r,h=i,o=r,s=i}return{svg:b,offsetWidth:r,offsetHeight:i,clientWidth:o,clientHeight:s,contentWidth:c,contentHeight:h,cssWidth:a,cssHeight:l,minWidth:u,minHeight:f,maxWidth:g,maxHeight:m,minOffsetWidth:d,minOffsetHeight:p,maxOffsetWidth:O,maxOffsetHeight:v}}function dy(t,e){return _m(e>0?t[0]:t[1],e>0?t[1]:t[0])}function py(t,e){var n,r=0,i=0,o=0,s=0;if(t)if(t===document.body||t===document.documentElement){o=window.innerWidth,s=window.innerHeight;var a=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop];r=(n=[-a[0],-a[1]])[0],i=n[1]}else{var l=t.getBoundingClientRect();r=l.left,i=l.top,o=l.width,s=l.height}var c={left:r,top:i,width:o,height:s,right:r+o,bottom:i+s};return t&&e&&(c.clientLeft=t.clientLeft,c.clientTop=t.clientTop,c.clientWidth=t.clientWidth,c.clientHeight=t.clientHeight,c.scrollWidth=t.scrollWidth,c.scrollHeight=t.scrollHeight,c.overflow="visible"!==Qy(t).overflow),c}function gy(t,e,n,r){return t||(e?[0,0]:my(n.target,r))}function my(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function Oy(t,e){return[NO(e,t[0]),NO(e,t[1]),NO(e,t[2]),NO(e,t[3])]}function vy(t){var e=t.left,n=t.top;return Oy([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function by(t,e){var n;null===(n=t[e])||void 0===n||n.unset(),t[e]=null}function yy(t,e){if(e){var n=Db(e);n.nextStyle=Fv(Fv({},n.nextStyle),t)}return{style:t,cssText:km(t).map((function(e){return"".concat(vm(e,"-"),": ").concat(t[e],";")})).join("")}}function wy(t,e,n){var r=e.afterTransform||e.transform;return Fv(Fv({},yy(Fv(Fv(Fv({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function xy(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var o=Fv(Fv({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,stopDrag:function(){var t;null===(t=e.stop)||void 0===t||t.call(e)}});return i.isStartEvent?r||(i.lastEvent=o):i.isStartEvent=!0,o}function Sy(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),Fv(Fv({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas})}function ky(t,e,n){t._emitter.on(e,n)}function Cy(t,e,n,r){return t.triggerEvent(e,n,r)}function Qy(t,e){return window.getComputedStyle(t,e)}function Py(t,e,n){var r={},i={};return t.filter((function(t){var o=t.name;if(r[o]||!e.some((function(e){return t[e]})))return!1;if(!n&&t.ableGroup){if(i[t.ableGroup])return!1;i[t.ableGroup]=!0}return r[o]=!0,!0}))}function Ey(t,e){return t===e||null==t&&null==e}function Ty(t,e){var n=[],r=[];return t.forEach((function(i,o){var s=e(i,o,t),a=r.indexOf(s),l=n[a]||[];-1===a&&(r.push(s),n.push(l)),l.push(i)})),n}function _y(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function $y(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort((function(t,e){return Math.abs(e)-Math.abs(t)})),t[0]}function My(t,e,n){return IO(RO(t,n),DO(e,n),n)}function Ry(t,e){var n,r=t.is3d?4:3;return n=My(t.rootMatrix,[e.distX,e.distY],r),e.distX=n[0],e.distY=n[1],e}function Ay(t,e,n,r,i){return BO(ny(t,NO(n,e),i),r)}function Dy(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function Wy(t){return Math.abs(t)<=cb?0:t}function jy(t){return function(e){if(!e.isDragging(t))return"";var n=function(t,e){var n,r=t.targetGesto,i=t.controlGesto;return(null==r?void 0:r.isFlag())&&(n=r.getEventData()[e]),!n&&(null==i?void 0:i.isFlag())&&(n=i.getEventData()[e]),n||{}}(e,t),r=n.deg;return r?Xb("view-".concat(t,"-dragging"),"view-control-rotation".concat(r)):""}}function Zy(t,e){return void 0===e&&(e=[t]),function(n,r){if(r.isRequest)return!!e.some((function(t){return r.requestAble===t}))&&r.parentDirection;var i=r.inputEvent.target;return Dm(i,Xb("direction"))&&(!t||Dm(i,Xb(t)))}}function Ny(t){var e={};for(var n in t)e[t[n]]=n;return e}function By(t,e){return t?t instanceof Element?t:am(t)?e?document.querySelector(t):t:cm(t)?t():"current"in t?t.current:t:null}function Vy(t,e){return t?(!(n=t)||!om(n)||n instanceof Element||!sm(n)&&!("length"in n)?[t]:[].slice.call(t)).reduce((function(t,n){return am(n)&&e?Hv(Hv([],t,!0),[].slice.call(document.querySelectorAll(n)),!0):(sm(n)?t.push(Vy(n,e)):t.push(By(n,e)),t)}),[]):[];var n}function Iy(t,e){var n=t.rootMatrix,r=t.is3d,i=RO(n,r?4:3);return r||(i=WO(i,3,4)),i[12]=0,i[13]=0,i[14]=0,nv(i,e)}function Xy(t,e,n,r,i){var o=t[0],s=t[1],a=0,l=0;if(i&&o&&s){var c=_m([0,0],e),h=_m([0,0],r),u=ay(e),f=Math.cos(c-h)*u;if(r[0])if(r[1]){var d=2*r[0]*o,p=2*r[1]*s,g=ay([d+e[0],p+e[1]])-ay([d,p]),m=_m([0,0],[n,1]);a=Math.cos(m)*g,l=Math.sin(m)*g}else l=(a=f)/n;else a=(l=f)*n}else a=r[0]*e[0],l=r[1]*e[1];return[a,l]}function Uy(t,e,n,r){var i,o=n.ratio,s=n.startOffsetWidth,a=n.startOffsetHeight,l=0,c=0,h=r.distX,u=r.distY,f=r.parentDistance,d=r.parentDist,p=r.parentScale,g=n.fixedDirection,m=[0,1].map((function(e){return Math.abs(t[e]-g[e])})),O=[0,1].map((function(t){var e=m[t];return 0!==e&&(e=2/e),e}));if(d)l=d[0],c=d[1],e&&(l?c||(c=l/o):l=c*o);else if(p)l=(p[0]-1)*s,c=(p[1]-1)*a;else if(f){var v=s*m[0],b=a*m[1],y=ay([v,b]);l=f/y*v*O[0],c=f/y*b*O[1]}else{var w=Pb({datas:n,distX:h,distY:u});w=O.map((function(t,e){return w[e]*t})),l=(i=Xy([s,a],w,o,t,e))[0],c=i[1]}return{distWidth:l,distHeight:c}}var qy=Kv("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,o=e.originalDatas,s=t.props,a=s.pinchable,l=s.ables;if(!a)return!1;var c="onPinch".concat(r?"Group":"","Start"),h="drag".concat(r?"Group":"","ControlStart"),u=(!0===a?t.controlAbles:l.filter((function(t){return a.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[h]})),f=xy(t,e,{});r&&(f.targets=r);var d=Cy(t,c,f);n.isPinch=!1!==d,n.ables=u;var p=n.isPinch;return!!p&&(u.forEach((function(n){if(o[n.name]=o[n.name]||{},n[h]){var r=Fv(Fv({},e),{datas:o[n.name],parentRotate:i,isPinch:!0});n[h](t,r)}})),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p)},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,o=e.originalDatas,s=e.inputEvent,a=e.targets,l=e.angle;if(n.isPinch){var c=i*(1-1/r),h=xy(t,e,{});a&&(h.targets=a);var u="onPinch".concat(a?"Group":"");Cy(t,u,h);var f=n.ables,d="drag".concat(a?"Group":"","Control");return f.forEach((function(n){n[d]&&n[d](t,Fv(Fv({},e),{datas:o[n.name],inputEvent:s,parentDistance:c,parentRotate:l,isPinch:!0}))})),h}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=e.targets,s=e.originalDatas;if(n.isPinch){var a="onPinch".concat(o?"Group":"","End"),l=Sy(t,e,{isDrag:r});o&&(l.targets=o),Cy(t,a,l);var c=n.ables,h="drag".concat(o?"Group":"","ControlEnd");return c.forEach((function(n){n[h]&&n[h](t,Fv(Fv({},e),{isDrag:r,datas:s[n.name],inputEvent:i,isPinch:!0}))})),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,Fv(Fv({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,Fv(Fv({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,Fv(Fv({},e),{targets:t.props.targets}))}});function zy(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map((function(t,r){return o[r]=o[r]||{},o[r][e]=o[r][e]||{},Fv(Fv({},n),{datas:o[r][e],originalDatas:o[r]})}))}function Yy(t,e,n,r,i,o,s){var a=!!n.match(/Start$/g),l=!!n.match(/End$/g),c=i.isPinch,h=i.datas,u=zy(t,e.name,i),f=t.moveables,d=u.map((function(t,i){var u=f[i],d=u.state,p=d.gestos,g=t;if(a)g=new yb(s).dragStart(r,t);else{if(p[s]||(p[s]=h.childGestos[i]),!p[s])return;g=bb(t,d,r,c,o,s)}var m=e[n](u,Fv(Fv({},g),{parentFlag:!0}));return l&&(p[s]=null),m}));return a&&(h.childGestos=f.map((function(t){return t.state.gestos[s]}))),d}function Ly(t,e,n,r,i,o){void 0===i&&(i=function(t,e){return e});var s=!!n.match(/End$/g),a=zy(t,e.name,r),l=t.moveables,c=a.map((function(t,r){var a,c=l[r];a=i(c,t);var h=e[n](c,Fv(Fv({},a),{parentFlag:!0}));return h&&o&&o(c,t,h,r),s&&(c.state.gestos={}),h}));return c}var Gy=["left","right","center"],Fy=["top","bottom","middle"],Hy={start:"left",end:"right",center:"center"},Ky={start:"top",end:"bottom",center:"middle"};function Jy(t,e){var n=t.props,r=n.snappable,i=n.bounds,o=n.innerBounds,s=n.verticalGuidelines,a=n.horizontalGuidelines,l=n.snapGridWidth,c=n.snapGridHeight,h=t.state,u=h.guidelines,f=h.enableSnap;return!(!r||!f||e&&!0!==r&&r.indexOf(e)<0||!(l||c||i||o||u&&u.length||s&&s.length||a&&a.length))}function tw(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function ew(t,e){var n=function(t,e){var n=tw(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}(t,e),r=Fy.filter((function(t){return t in n})),i=Gy.filter((function(t){return t in n}));return{horizontal:r.map((function(t){return n[t]})),vertical:i.map((function(t){return n[t]}))}}function nw(t,e,n,r){var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!im(i))return i}return t[n]}(r,t.props.snapThreshold,5);return rw(t.state.guidelines,e,n,i)}function rw(t,e,n,r){return{vertical:sw(t,"vertical",e,r),horizontal:sw(t,"horizontal",n,r)}}function iw(t,e,n){var r=ew(t.props.snapDirections,e);return nw(t,r.vertical,r.horizontal,n)}function ow(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,o=r.dist,s=r.guideline;return{isSnap:e,offset:i,dist:o,pos:n.pos,guideline:s}}function sw(t,e,n,r){if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var i="vertical"===e?0:1,o=n.map((function(n,o){var s=t.map((function(t){var e=t.pos,r=n-e[i];return{offset:r,dist:Math.abs(r),guideline:t}})).filter((function(t){var n=t.guideline,i=t.dist;return!(n.type!==e||i>r)})).sort((function(t,e){return t.dist-e.dist}));return{pos:n,index:o,guidelineInfos:s}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist})),s=o.length>0;return{isSnap:s,index:s?o[0].index:-1,posInfos:o}}function aw(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<cb?1:r<cb?-1:n-r}function lw(t,e){return t.slice().sort((function(t,n){var r=t.sign[e],i=n.sign[e],o=t.offset[e],s=n.offset[e];return r?i?aw({isBound:t.isBound,isSnap:t.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s}):-1:1}))[0]}function cw(t,e){var n=Tm([e[0][0],e[1][0]]),r=Tm([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function hw(t,e){var n,r,i=e[0],o=e[1],s=o[0]-i[0],a=o[1]-i[1];return Math.abs(s)<cb&&(s=0),Math.abs(a)<cb&&(a=0),s?a?(n=a/s*(t[0]-i[0])+i[1],r=t[1]):(n=i[1],r=t[1]):(n=i[0],r=t[0]),n-r}function uw(t,e,n,r){return void 0===r&&(r=cb),t.every((function(t){var i=hw(t,e);return i<=0===n||Math.abs(i)<=r}))}function fw(t,e,n,r,i){return void 0===i&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function dw(t,e,n,r,i,o){var s,a=e[0],l=e[1],c=t[0],h=n[0],u=n[1],f=Wy(u[1]-h[1]),d=l,p=a,g=-a/l;if(!Wy(u[0]-h[0])){if(o&&!p)return{isBound:!1,offset:0};if(d)return fw(g*(h[0]-c[0])+c[1],h[1],u[1],r,i);var m=h[0]-c[0];return{isBound:s=Math.abs(m)<=(i||0),offset:s?m:0}}return f||o&&!d?{isBound:!1,offset:0}:p?fw((h[1]-c[1])/g+c[0],h[0],u[0],r,i):(m=h[1]-c[1],{isBound:s=Math.abs(m)<=(i||0),offset:s?m:0})}function pw(t,e,n){return e.map((function(e){var r=function(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,o=e.horizontalSign,s=e.lineConstants,a=t.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=a.left,c=a.top,h=a.width,u=a.height,f=[[l,c],[l,c+u]],d=[[l,c],[l+h,c]],p=[[l+h,c],[l+h,c+u]],g=[[l,c+u],[l+h,c+u]];if(uw([[l,c],[l+h,c],[l,c+u],[l+h,c+u]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var m=dw(n,s,d,i),O=dw(n,s,g,i),v=dw(n,s,f,o),b=dw(n,s,p,o),y=m.isBound&&O.isBound,w=m.isBound||O.isBound,x=v.isBound&&b.isBound,S=v.isBound||b.isBound,k=$y(m.offset,O.offset),C=$y(v.offset,b.offset),Q=[0,0],P=!1,E=!1;return Math.abs(C)<Math.abs(k)?(Q=[k,0],P=w,E=y):(Q=[0,C],P=S,E=x),{isAllBound:E,isVerticalBound:w,isHorizontalBound:S,isBound:P,offset:Q}}(t,e),i=r.isBound,o=r.offset,s=r.isVerticalBound,a=r.isHorizontalBound,l=e.multiple,c=Pb({datas:n,distX:o[0],distY:o[1]}).map((function(t,e){return t*(l[e]?2/l[e]:0)}));return{sign:l,isBound:i,isVerticalBound:s,isHorizontalBound:a,isSnap:!1,offset:c}}))}function gw(t,e,n,r){var i=t.state,o=ry(i.allMatrix,100,100,i.is3d?4:3),s=Tb(o,[0,0]);return function(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,2*i],t,[-r,i]],[[2*r,0],t,[r,-i]]):r?(n.push([[2*r,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,2*i],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}(n,r).map((function(t){var n=t[0],r=t[1],i=t[2],a=[Tb(o,r),Tb(o,i)],l=function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];Math.abs(r)<em&&(r=0),Math.abs(i)<em&&(i=0);var o=0,s=0,a=0;return r?i?(s=1,a=(o=-i/r)*e[0]-e[1]):(s=1,a=-e[1]):(o=-1,a=e[0]),[o,s,a].map((function(t){return Rm(t,em)}))}(a),c=cw(s,a),h=c.vertical,u=c.horizontal;return{multiple:n,centerSign:hw(s,a)<=0,verticalSign:h,horizontalSign:u,lineConstants:l,line:[Tb(e,r),Tb(e,i)]}}))}function mw(t,e,n,r){var i=r?t.map((function(t){return YO(t,r)})):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some((function(t){var r=hw(n,t)<=0;return!uw(e,t,r)}))}function Ow(t,e,n){var r=t||{},i=r.position,o=void 0===i?"client":i,s=r.left,a=void 0===s?-1/0:s,l=r.top,c=void 0===l?-1/0:l,h=r.right,u=void 0===h?1/0:h,f=r.bottom,d={position:o,left:a,top:c,right:u,bottom:void 0===f?1/0:f};return{vertical:bw(d,e,!0),horizontal:bw(d,n,!1)}}function vw(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,o=r.clientWidth,s=r.clientLeft,a=r.clientTop,l=n.snapOffset,c=l.left,h=l.top,u=l.right,f=l.bottom,d=e||t.props.bounds||{},p="css"===(d.position||"client"),g=d.left,m=void 0===g?-1/0:g,O=d.top,v=void 0===O?-1/0:O,b=d.right,y=void 0===b?p?-1/0:1/0:b,w=d.bottom,x=void 0===w?p?-1/0:1/0:w;return p&&(y=o+u-c-y,x=i+f-h-x),{left:m+c-s,right:y+c-s,top:v+h-a,bottom:x+h-a}}function bw(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],o=Math.min.apply(Math,e),s=Math.max.apply(Math,e),a=[];return r+1>o&&a.push({isBound:!0,offset:o-r,pos:r}),i-1<s&&a.push({isBound:!0,offset:s-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort((function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)}))}function yw(t,e,n){return(n?t.map((function(t){return YO(t,n)})):t).some((function(t){return t[0]<e.left&&Math.abs(t[0]-e.left)>.1||t[0]>e.right&&Math.abs(t[0]-e.right)>.1||t[1]<e.top&&Math.abs(t[1]-e.top)>.1||t[1]>e.bottom&&Math.abs(t[1]-e.bottom)>.1}))}function ww(t,e){return function(t,e){var n,r=t.direction,i=t.classNames,o=t.size,s=t.pos,a=t.zoom,l=t.key,c="horizontal"===r,h=c?"Y":"X";return e.createElement("div",{key:l,className:i.join(" "),style:(n={},n[c?"width":"height"]="".concat(o),n.transform="translate(".concat(s[0],", ").concat(s[1],") translate").concat(h,"(-50%) scale").concat(h,"(").concat(a,")"),n)})}(Fv(Fv({},t),{classNames:Hv([Xb("line","guideline",t.direction)],t.classNames,!0).filter((function(t){return t})),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map((function(t){return"".concat(Rm(t,.1),"px")}))}),e)}function xw(t,e,n,r,i,o,s,a){var l=t.props.zoom;return n.map((function(t,n){var c=t.type,h=t.pos,u=[0,0];return u[s]=r,u[s?0:1]=-i+h,ww({key:"".concat(e,"TargetGuideline").concat(n),classNames:[Xb("target","bold",c)],posValue:u,sizeValue:o,zoom:l,direction:e},a)}))}function Sw(t,e,n,r,i,o){var s=t.props,a=s.zoom,l=s.isDisplayInnerSnapDigit,c="horizontal"===e?Hy:Ky,h=i[c.start],u=i[c.end];return n.filter((function(t){var e=t.hide,n=t.elementRect;if(e)return!1;if(l&&n){var r=n.rect;if(r[c.start]<=h&&u<=r[c.end])return!1}return!0})).map((function(t,n){var i=t.pos,s=t.size,l=t.element,c=t.className,h=[-r[0]+i[0],-r[1]+i[1]];return ww({key:"".concat(e,"-default-guideline-").concat(n),classNames:l?[Xb("bold"),c]:[Xb("normal"),c],direction:e,posValue:h,sizeValue:s,zoom:a},o)}))}function kw(t,e,n,r,i,o,s,a){var l,c=t.props,h=c.snapDigit,u=void 0===h?0:h,f=c.isDisplaySnapDigit,d=void 0===f||f,p=c.snapDistFormat,g=void 0===p?function(t,e){return t}:p,m=c.zoom,O="horizontal"===e?"X":"Y",v="vertical"===e?"height":"width",b=Math.abs(i),y=d?parseFloat(b.toFixed(u)):0;return a.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Xb("guideline-group",e),style:(l={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")},l[v]="".concat(b,"px"),l)},ww({direction:e,classNames:[Xb(n),s],size:"100%",posValue:[0,0],sizeValue:b,zoom:m},a),a.createElement("div",{className:Xb("size-value","gap"),style:{transform:"translate".concat(O,"(-50%) scale(").concat(m,")")}},y>0?g(y,e):""))}function Cw(t,e,n,r,i){var o=function(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1];if(Math.abs(i)<em&&(i=0),Math.abs(o)<em&&(o=0),!i)return r?[0,0]:[0,n];if(!o)return r?[n,0]:[0,0];var s=o/i,a=t[1]-s*t[0];return r?[n,s*(e[0]+n)+a-e[1]]:[(e[1]+n-a)/s-e[0],n]}(t,e,n,r);if(!o)return{isOutside:!1,offset:[0,0]};var s=Mm(t,e),a=Mm(o,t),l=Mm(o,e),c=a>s||l>s,h=Pb({datas:i,distX:o[0],distY:o[1]});return{offset:[h[0],h[1]],isOutside:c}}function Qw(t,e){return t.isBound?t.offset:e.isSnap?ow(e).offset:0}function Pw(t,e,n,r,i,o){if(!Jy(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var s=Oy(o.absolutePoses,[e,n]),a=iy(s),l=a.left,c=a.right,h=a.top,u=a.bottom,f={horizontal:s.map((function(t){return t[1]})),vertical:s.map((function(t){return t[0]}))},d=Ew(t,i,ew(tw(t.props.snapDirections),{left:l,right:c,top:h,bottom:u,center:(l+c)/2,middle:(h+u)/2}),f),p=d.vertical,g=d.horizontal,m=function(t,e,n){var r,i=pw(t,gw(t,e,[0,0],!1).map((function(t){return Fv(Fv({},t),{multiple:t.multiple.map((function(t){return 2*Math.abs(t)}))})})),n),o=lw(i,0),s=lw(i,1),a=0,l=0,c=o.isVerticalBound||s.isVerticalBound,h=o.isHorizontalBound||s.isHorizontalBound;return(c||h)&&(r=function(t,e){var n=t.datas,r=t.distX,i=t.distY,o=(n.beforeMatrix,n.matrix),s=n.is3d,a=(n.startDragBeforeDist,n.startDragDist),l=n.absoluteOrigin,c=s?4:3;return BO(IO(o,NO(a,[r,i]),c),l)}({datas:n,distX:-o.offset[0],distY:-s.offset[1]}),a=r[0],l=r[1]),{vertical:{isBound:c,offset:a},horizontal:{isBound:h,offset:l}}}(t,s,o),O=m.vertical,v=m.horizontal,b=p.isSnap,y=g.isSnap,w=p.isBound||O.isBound,x=g.isBound||v.isBound,S=function(t,e,n,r,i){var o=e[0],s=e[1],a=n[0],l=n[1],c=r[0],h=r[1],u=i[0],f=i[1],d=-u,p=-f;if(t&&o&&s){d=0,p=0;var g=[];if(a&&l?g.push([0,f],[u,0]):a?g.push([u,0]):l?g.push([0,f]):c&&h?g.push([0,f],[u,0]):c?g.push([u,0]):h&&g.push([0,f]),g.length){g.sort((function(t,e){return ay(BO([o,s],t))-ay(BO([o,s],e))}));var m=g[0];if(m[0]&&Math.abs(o)>em)d=-m[0],p=s*Math.abs(o+d)/Math.abs(o)-s;else if(m[1]&&Math.abs(s)>em){var O=s;p=-m[1],d=o*Math.abs(s+p)/Math.abs(O)-o}if(t&&l&&a)if(Math.abs(d)>em&&Math.abs(d)<Math.abs(u))d*=v=Math.abs(u)/Math.abs(d),p*=v;else if(Math.abs(p)>em&&Math.abs(p)<Math.abs(f)){var v;d*=v=Math.abs(f)/Math.abs(p),p*=v}else d=$y(-u,d),p=$y(-f,p)}}else d=o||a?-u:0,p=s||l?-f:0;return[d,p]}(r,[e,n],[w,x],[b,y],[$y(p.offset,O.offset),$y(g.offset,v.offset)]);return[{isBound:w,isSnap:b,offset:S[0]},{isBound:x,isSnap:y,offset:S[1]}]}function Ew(t,e,n,r){void 0===r&&(r=n);var i=Ow(vw(t),r.vertical,r.horizontal),o=i.horizontal,s=i.vertical,a=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:nw(t,n.vertical,n.horizontal),l=a.horizontal,c=a.vertical,h=Qw(o[0],l),u=Qw(s[0],c),f=Math.abs(h),d=Math.abs(u);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:h,dist:f,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:u,dist:d,bounds:s,snap:c}}}function Tw(t,e,n,r,i){var o=Ow(e,n,r),s=o.horizontal,a=o.vertical,l=rw(t,n,r,i),c=l.horizontal,h=l.vertical,u=Qw(s[0],c),f=Qw(a[0],h),d=Math.abs(u),p=Math.abs(f);return{horizontal:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:u,dist:d,bounds:s,snap:c},vertical:{isBound:a[0].isBound,isSnap:h.isSnap,snapIndex:h.index,offset:f,dist:p,bounds:a,snap:h}}}function _w(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function $w(t){var e=t.state,n=e.snapOffset,r=e.containerClientRect,i=r.overflow,o=r.scrollHeight,s=r.scrollWidth,a=r.clientHeight,l=r.clientWidth,c=r.clientLeft,h=r.clientTop,u=t.props,f=u.snapGap,d=void 0===f||f,p=u.verticalGuidelines,g=u.horizontalGuidelines,m=u.snapThreshold,O=void 0===m?5:m,v=u.snapGridWidth,b=void 0===v?0:v,y=u.snapGridHeight,w=void 0===y?0:y,x=u.maxSnapElementGuidelineDistance,S=void 0===x?1/0:x,k=iy(vy(t.state)),C=k.top,Q=k.left,P=k.bottom,E=k.right,T={top:C,left:Q,bottom:P,right:E,center:(Q+E)/2,middle:(C+P)/2},_=function(t){var e=t.state,n=t.props.elementGuidelines,r=void 0===n?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter((function(t){return!t.refresh})),o=r.map((function(t){return om(t)&&"element"in t?Fv(Fv({},t),{element:By(t.element,!0)}):{element:By(t,!0)}})).filter((function(t){return t.element})),s=cv(i.map((function(t){return t.element})),o.map((function(t){return t.element}))),a=s.maintained,l=s.added,c=[];a.forEach((function(t){var e=t[0],n=t[1];c[n]=i[e]})),function(t,e){if(!e.length)return[];var n=t.state,r=n.containerClientRect,i=n.targetClientRect,o=i.top,s=i.left,a=n.rootMatrix,l=n.is3d?4:3,c=function(t,e,n){var r=ny(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}(a,r,l),h=c[0],u=c[1],f=pv(vy(n)),d=BO([f.minX,f.minY],My(a,[s-h,o-u],l)).map((function(t){return e=t,Math.round(e%1==-.5?e-1:e);var e})),p=d[0],g=d[1];return e.map((function(t){var e=t.element.getBoundingClientRect(),n=e.left-h,r=e.top-u,i=r+e.height,o=n+e.width,s=My(a,[n,r],l),c=s[0],f=s[1],d=My(a,[o,i],l),m=d[0],O=d[1];return Fv(Fv({},t),{rect:{left:c+p,right:m+p,top:f+g,bottom:O+g,center:(c+m)/2+p,middle:(f+O)/2+g}})}))}(t,l.map((function(t){return o[t]}))).map((function(t,e){c[l[e]]=t})),e.elementRects=c;var h=tw(t.props.elementSnapDirections),u=[];return c.forEach((function(t){var e=t.element,n=t.top,r=void 0===n?h.top:n,i=t.left,o=void 0===i?h.left:i,s=t.right,a=void 0===s?h.right:s,l=t.bottom,c=void 0===l?h.bottom:l,f=t.center,d=void 0===f?h.center:f,p=t.middle,g=void 0===p?h.middle:p,m=t.className,O=t.rect,v=ew({top:r,right:a,left:o,bottom:c,center:d,middle:g},O),b=v.horizontal,y=v.vertical,w=O.top,x=O.left,S=O.right-x,k=O.bottom-w,C=[S,k];y.forEach((function(n){u.push({type:"vertical",element:e,pos:[Rm(n,.1),w],size:k,sizes:C,className:m,elementRect:t})})),b.forEach((function(n){u.push({type:"horizontal",element:e,pos:[x,Rm(n,.1)],size:S,sizes:C,className:m,elementRect:t})}))})),u}(t),$=Hv([],_,!0);return d&&$.push.apply($,function(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,o=void 0===i?1/0:i,s=r.maxSnapElementGapDistance,a=void 0===s?1/0:s,l=t.state.elementRects,c=[];return[["vertical",Hy,Ky],["horizontal",Ky,Hy]].forEach((function(t){var r=t[0],i=t[1],s=t[2],h=e[i.start],u=e[i.end],f=e[i.center],d=e[s.start],p=e[s.end];function g(t){var e=t.rect;return e[i.end]<h+n?h-e[i.end]:u-n<e[i.start]?e[i.start]-u:-1}var m=l.filter((function(t){var e=t.rect;return!(e[s.start]>p||e[s.end]<d)&&g(t)>0})).sort((function(t,e){return g(t)-g(e)})),O=[];m.forEach((function(t){m.forEach((function(e){if(t!==e){var n=t.rect,r=e.rect,i=n[s.start],o=n[s.end],a=r[s.start];i>r[s.end]||a>o||O.push([t,e])}}))})),O.forEach((function(t){var s=t[0],l=t[1],d=s.rect,p=l.rect,g=d[i.start],m=d[i.end],O=p[i.start],v=p[i.end],b=0,y=0,w=!1,x=!1,S=!1;if(m<=h&&u<=O){if(x=!0,y=m+(b=(O-m-(u-h))/2)+(u-h)/2,Math.abs(y-f)>n)return}else if(m<O&&v<h+n){if(w=!0,y=v+(b=O-m),Math.abs(y-h)>n)return}else{if(!(m<O&&u-n<g))return;if(S=!0,y=g-(b=O-m),Math.abs(y-u)>n)return}b&&Mw(e,p,r,o)&&(b>a||c.push({type:r,pos:"vertical"===r?[y,0]:[0,y],element:l.element,size:0,className:l.className,isStart:w,isCenter:x,isEnd:S,gap:b,hide:!0,gapRects:[s,l]}))}))})),c}(t,T,O)),$.push.apply($,function(t,e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var s=[];if(e)for(var a=0;a<=r;a+=e)s.push({type:"horizontal",pos:[0,Rm(a-o,.1)],size:n,hide:!0});if(t)for(a=0;a<=n;a+=t)s.push({type:"vertical",pos:[Rm(a-i,.1),0],size:r,hide:!0});return s}(b,w,i?s:l,i?o:a,c,h)),$.push.apply($,Rw(g||!1,p||!1,i?s:l,i?o:a,c,h,n)),$=$.filter((function(t){var e=t.element,n=t.elementRect,r=t.type;if(!e||!n)return!0;var i=n.rect;return Mw(T,i,r,S)})),$}function Mw(t,e,n,r){return"horizontal"===n?Math.abs(t.right-e.left)<=r||Math.abs(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:"vertical"!==n||Math.abs(t.bottom-e.top)<=r||Math.abs(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom}function Rw(t,e,n,r,i,o,s){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s={left:0,top:0,right:0,bottom:0});var a=[],l=s.left,c=s.top,h=s.bottom,u=n+s.right-l,f=r+h-c;return t&&t.forEach((function(t){var e=om(t)?t:{pos:t};a.push({type:"horizontal",pos:[l,Rm(e.pos-o+c,.1)],size:u,className:e.className})})),e&&e.forEach((function(t){var e=om(t)?t:{pos:t};a.push({type:"vertical",pos:[Rm(e.pos-i+l,.1),c],size:f,className:e.className})})),a}function Aw(t){var e=t.state;if(!e.guidelines||!e.guidelines.length){var n=t.state.container,r=t.props.snapContainer||n,i=e.containerClientRect,o={left:0,top:0,bottom:0,right:0};if(n!==r){var s=By(r,!0);if(s){var a=py(s),l=Iy(e,[a.left-i.left,a.top-i.top]),c=Iy(e,[a.right-i.right,a.bottom-i.bottom]);o.left=Rm(l[0],1e-5),o.top=Rm(l[1],1e-5),o.right=Rm(c[0],1e-5),o.bottom=Rm(c[1],1e-5)}}e.snapOffset=o,e.guidelines=$w(t),e.enableSnap=!0}}function Dw(t,e,n,r,i,o){var s=ry(t,e,n,o?4:3);return Oy(s,BO(i,Tb(s,r)))}function Ww(t,e,n,r,i,o){var s=function(t,e,n){var r=[];if(n)1!==Math.abs(e[0])||1!==Math.abs(e[1])?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach((function(t){[1,-1].forEach((function(n){var o=[t*i[0],n*i[1]];e[0]===o[0]&&e[1]===o[1]||r.push([e,o])}))}))}else t[0]?(1===Math.abs(e[0])?[1]:[1,-1]).forEach((function(n){r.push([[e[0],-1],[n*t[0],-1]],[[e[0],0],[n*t[0],0]],[[e[0],1],[n*t[0],1]])})):t[1]&&(1===Math.abs(e[1])?[1]:[1,-1]).forEach((function(n){r.push([[-1,e[1]],[-1,n*t[1]]],[[0,e[1]],[0,n*t[1]]],[[1,e[1]],[1,n*t[1]]])}));return r}(n,o.fixedDirection,r),a=gw(t,e,n,r),l=Hv(Hv([],function(t,e,n,r,i,o){return n.map((function(n){var s=n[0],a=n[1],l=Tb(e,s),c=Tb(e,a),h=r?function(t,e,n,r){var i=function(t,e,n){var r=vw(t),i=r.left,o=r.top,s=r.right,a=r.bottom,l=n[0],c=n[1],h=BO(n,e),u=h[0],f=h[1];Math.abs(u)<cb&&(u=0),Math.abs(f)<cb&&(f=0);var d=f>0,p=u>0,g={isBound:!1,offset:0,pos:0},m={isBound:!1,offset:0,pos:0};if(0===u&&0===f)return{vertical:g,horizontal:m};if(0===u)d?a<c&&(m.pos=a,m.offset=c-a):o>c&&(m.pos=o,m.offset=c-o);else if(0===f)p?s<l&&(g.pos=s,g.offset=l-s):i>l&&(g.pos=i,g.offset=l-i);else{var O=f/u,v=n[1]-O*l,b=0,y=0,w=!1;p&&s<=l?(b=O*s+v,y=s,w=!0):!p&&l<=i&&(b=O*i+v,y=i,w=!0),w&&(b<o||b>a)&&(w=!1),w||(d&&a<=c?(y=((b=a)-v)/O,w=!0):!d&&c<=o&&(y=((b=o)-v)/O,w=!0)),w&&(g.isBound=!0,g.pos=y,g.offset=l-y,m.isBound=!0,m.pos=b,m.offset=c-b)}return{vertical:g,horizontal:m}}(t,e,n),o=i.horizontal,s=i.vertical,a=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=n[0],i=n[1],o=e[0],s=e[1],a=BO(n,e),l=a[0],c=a[1],h=c>0,u=l>0;l=Wy(l),c=Wy(c);var f={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===l&&0===c)return{vertical:f,horizontal:d};var p=nw(t,l?[r]:[],c?[i]:[]),g=p.vertical,m=p.horizontal;g.posInfos.filter((function(t){var e=t.pos;return u?e>=o:e<=o})),m.posInfos.filter((function(t){var e=t.pos;return h?e>=s:e<=s})),g.isSnap=g.posInfos.length>0,m.isSnap=m.posInfos.length>0;var O=ow(g),v=O.isSnap,b=O.guideline,y=ow(m),w=y.isSnap,x=y.guideline,S=w?x.pos[1]:0,k=v?b.pos[0]:0;if(0===l)w&&(d.isSnap=!0,d.pos=x.pos[1],d.offset=i-d.pos);else if(0===c)v&&(f.isSnap=!0,f.pos=k,f.offset=r-k);else{var C=c/l,Q=n[1]-C*r,P=0,E=0,T=!1;v?(P=C*(E=k)+Q,T=!0):w&&(E=((P=S)-Q)/C,T=!0),T&&(f.isSnap=!0,f.pos=E,f.offset=r-E,d.isSnap=!0,d.pos=P,d.offset=i-P)}return{vertical:f,horizontal:d}}(t,e,n),l=a.horizontal,c=a.vertical,h=_w(o,l),u=_w(s,c),f=Math.abs(h),d=Math.abs(u);return{horizontal:{isBound:o.isBound,isSnap:l.isSnap,offset:h,dist:f},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:u,dist:d}}}(t,l,c,i):Ew(t,i,{vertical:[c[0]],horizontal:[c[1]]}),u=h.horizontal,f=u.offset,d=u.isBound,p=u.isSnap,g=h.vertical,m=g.offset,O=g.isBound,v=g.isSnap,b=BO(a,s);if(!m&&!f)return{isBound:O||d,isSnap:v||p,sign:b,offset:[0,0]};var y=function(t,e,n,r){var i=_m(t,e)/Math.PI*180,o=n.vertical,s=o.isBound,a=o.isSnap,l=o.dist,c=n.horizontal,h=c.isBound,u=c.isSnap,f=i%180,d=f<3||f>177,p=f>87&&f<93;return c.dist<l&&(s||a&&!p&&(!r||!d))?"vertical":!h&&(!u||d||r&&p)?"":"horizontal"}(l,c,h,r);if(!y)return{sign:b,isBound:!1,isSnap:!1,offset:[0,0]};var w="vertical"===y,x=[0,0];return x=(x=r||1!==Math.abs(a[0])||1!==Math.abs(a[1])||s[0]===a[0]||s[1]===a[1]?Cw(l,c,-(w?m:f),w,o).offset:Pb({datas:o,distX:-m,distY:-f})).map((function(t,e){return t*(b[e]?2/b[e]:0)})),{sign:b,isBound:w?O:d,isSnap:w?v:p,offset:x}}))}(t,e,s,r,i,o),!0),pw(t,a,o),!0),c=lw(l,0),h=lw(l,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:h.isBound,offset:h.offset[1]}}}function jw(t,e,n,r,i,o,s,a){for(var l=vy(t.state),c=t.props.keepRatio,h=0,u=0,f=0;f<2;++f){var d=Ww(t,e(h,u),i,c,s,a),p=d.width,g=d.height,m=p.isBound,O=g.isBound,v=p.offset,b=g.offset;if(1===f&&(m||(v=0),O||(b=0)),0===f&&s&&!m&&!O)return[0,0];if(c){var y=Math.abs(v)*(n?1/n:1),w=Math.abs(b)*(r?1/r:1);(m&&O?y<w:O||!m&&y<w)?v=n*b/r:b=r*v/n}h+=v,u+=b}if(i[0]&&i[1]){var x=function(t,e,n,r,i){var o=[-n[0],-n[1]],s=t.state,a=s.width,l=s.height,c=t.props.bounds,h=1/0,u=1/0;if(c){var f=[[n[0],-n[1]],[-n[0],n[1]]],d=c.left,p=void 0===d?-1/0:d,g=c.top,m=void 0===g?-1/0:g,O=c.right,v=void 0===O?1/0:O,b=c.bottom,y=void 0===b?1/0:b;f.forEach((function(t){var n=t[0]!==o[0],s=t[1]!==o[1],c=Tb(e,t),f=360*_m(r,c)/Math.PI;if(s){var d=c.slice();(Math.abs(f-360)<2||Math.abs(f-180)<2)&&(d[1]=r[1]);var g=Cw(r,d,(r[1]<c[1]?y:m)-c[1],!1,i),O=g.offset[1],b=g.isOutside;isNaN(O)||(u=l+(b?1:-1)*Math.abs(O))}if(n){d=c.slice(),(Math.abs(f-90)<2||Math.abs(f-270)<2)&&(d[0]=r[0]);var w=Cw(r,d,(r[0]<c[0]?v:p)-c[0],!0,i),x=w.offset[0],S=w.isOutside;isNaN(x)||(h=a+(S?1:-1)*Math.abs(x))}}))}return{maxWidth:h,maxHeight:u}}(t,l,i,o,a),S=x.maxWidth,k=x.maxHeight,C=function(t,e,n,r,i,o,s,a,l){var c=Tb(e,s),h=Ew(t,a,{vertical:[c[0]],horizontal:[c[1]]}),u=h.horizontal.offset,f=h.vertical.offset;if(f||u){var d=Pb({datas:l,distX:-f,distY:-u}),p=d[0],g=d[1];return[Math.min(i||1/0,n+s[0]*p)-n,Math.min(o||1/0,r+s[1]*g)-r]}return[0,0]}(t,e(h,u).map((function(t){return t.map((function(t){return Rm(t,1e-4)}))})),n+h,r+u,S,k,i,s,a);h+=v=C[0],u+=b=C[1]}return[h,u]}function Zw(t){var e=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var n=t.guideline;e.indexOf(n)>-1||e.push(n)}))})),e}function Nw(t,e,n,r,i,o){var s=Ow(vw(t,o),e,n),a=s.vertical,l=s.horizontal;a.forEach((function(t){t.isBound&&r.push({type:"bounds",pos:t.pos})})),l.forEach((function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}));var c=function(t){var e=t.props.innerBounds;if(!e)return{vertical:[],horizontal:[]};var n=t.getRect(),r=[n.pos1,n.pos2,n.pos3,n.pos4],i=Tb(r,[0,0]),o=e.left,s=e.top,a=e.width,l=e.height,c=[[o,s],[o,s+l]],h=[[o,s],[o+a,s]],u=[[o+a,s],[o+a,s+l]],f=[[o,s+l],[o+a,s+l]],d=gw(t,r,[0,0],!1),p=[],g=[],m={top:!1,bottom:!1,left:!1,right:!1};return d.forEach((function(t){var e=t.line,n=t.lineConstants,r=cw(i,e),d=r.horizontal,O=r.vertical,v=dw(e,n,h,O,1,!0),b=dw(e,n,f,O,1,!0),y=dw(e,n,c,d,1,!0),w=dw(e,n,u,d,1,!0);v.isBound&&!m.top&&(p.push(s),m.top=!0),b.isBound&&!m.bottom&&(p.push(s+l),m.bottom=!0),y.isBound&&!m.left&&(g.push(o),m.left=!0),w.isBound&&!m.right&&(g.push(o+a),m.right=!0)})),{horizontal:p,vertical:g}}(t),h=c.vertical,u=c.horizontal;h.forEach((function(t){ym(r,(function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t}))>=0||r.push({type:"bounds",pos:t})})),u.forEach((function(t){ym(i,(function(e){var n=e.type,r=e.pos;return"bounds"===n&&r===t}))>=0||i.push({type:"bounds",pos:t})}))}var Bw=Zy("",["resizable","scalable"]),Vw={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function,maxSnapElementGuidelineDistance:Number,maxSnapElementGapDistance:Number},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var n=t.state,r=n.top,i=n.left,o=n.pos1,s=n.pos2,a=n.pos3,l=n.pos4,c=n.snapRenderInfo;if(!c||!Jy(t,""))return[];n.guidelines=$w(t);var h=Math.min(o[0],s[0],a[0],l[0]),u=Math.min(o[1],s[1],a[1],l[1]),f=c.externalPoses||[],d=vy(t.state),p=[],g=[],m=[],O=[],v=[],b=iy(d),y=b.width,w=b.height,x=b.top,S=b.left,k=b.bottom,C=b.right,Q={left:S,right:C,top:x,bottom:k,center:(S+C)/2,middle:(x+k)/2},P=f.length>0,E=P?iy(f):{};if(!c.request){if(c.direction&&v.push(function(t,e,n){var r=[];if(n[0]&&n[1])r=[n,[-n[0],n[1]],[n[0],-n[1]]].map((function(t){return Tb(e,t)}));else if(n[0]||n[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],n].map((function(t){return Tb(e,t)})):(r=function(t,e){return Eb(e).map((function(e){return t[e]}))}(e,n),r.length>1&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]));else for(var i=[e[0],e[1],e[3],e[2],e[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return nw(t,r.map((function(t){return t[0]})),r.map((function(t){return t[1]})),1)}(t,d,c.direction)),c.snap){var T=iy(d);c.center&&(T.middle=(T.top+T.bottom)/2,T.center=(T.left+T.right)/2),v.push(iw(t,T,1))}P&&(c.center&&(E.middle=(E.top+E.bottom)/2,E.center=(E.left+E.right)/2),v.push(iw(t,E,1))),v.forEach((function(t){var e=t.vertical.posInfos,n=t.horizontal.posInfos;p.push.apply(p,e.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),g.push.apply(g,n.filter((function(t){return t.guidelineInfos.some((function(t){return!t.guideline.hide}))})).map((function(t){return{type:"snap",pos:t.pos}}))),m.push.apply(m,Zw(e)),O.push.apply(O,Zw(n))}))}Nw(t,[S,C],[x,k],p,g),P&&Nw(t,[E.left,E.right],[E.top,E.bottom],p,g,c.externalBounds);var _=Hv(Hv([],m,!0),O,!0),$=_.filter((function(t){return t.element&&!t.gapRects})),M=_.filter((function(t){return t.gapRects})).sort((function(t,e){return t.gap-e.gap}));return Cy(t,"onSnap",{guidelines:_.filter((function(t){return!t.element})),elements:$,gaps:M},!0),Hv(Hv(Hv(Hv(Hv(Hv([],function(t,e,n,r,i){var o=t.props.isDisplayInnerSnapDigit,s=[];return["vertical","horizontal"].forEach((function(a){var l=e.filter((function(t){return t.type===a})),c="vertical"===a?1:0,h=c?0:1,u=function(t,e,n,r){var i="vertical"===t?0:1,o="vertical"===t?1:0,s=i?Hy:Ky,a=n[s.start],l=n[s.end];return Ty(e,(function(t){return t.pos[i]})).map((function(e){var n=[],c=[];return e.forEach((function(e){var h,u,f=e.element,d=e.elementRect.rect;if(d[s.end]<a)n.push(e);else if(l<d[s.start])c.push(e);else if(d[s.start]<=a&&l<=d[s.end]&&r){var p=e.pos,g={element:f,rect:Fv(Fv({},d),(h={},h[s.end]=d[s.start],h))},m={element:f,rect:Fv(Fv({},d),(u={},u[s.start]=d[s.end],u))},O=[0,0],v=[0,0];O[i]=p[i],O[o]=p[o],v[i]=p[i],v[o]=p[o]+e.size,n.push({type:t,pos:O,size:0,elementRect:g}),c.push({type:t,pos:v,size:0,elementRect:m})}})),n.sort((function(t,e){return e.pos[o]-t.pos[o]})),c.sort((function(t,e){return t.pos[o]-e.pos[o]})),{total:e,start:n,end:c,inner:[]}}))}(a,l,r,o),f=c?Ky:Hy,d=c?Hy:Ky,p=r[f.start],g=r[f.end];u.forEach((function(e){var o=e.total,l=e.start,u=e.end,m=e.inner,O=n[h]+o[0].pos[h]-r[d.start],v=r;l.forEach((function(e){var r=e.elementRect.rect,o=v[f.start]-r[f.end];if(o>0){var l=[0,0];l[c]=n[c]+v[f.start]-p-o,l[h]=O,s.push(kw(t,a,"dashed",s.length,o,l,e.className,i))}v=r})),v=r,u.forEach((function(e){var r=e.elementRect.rect,o=r[f.start]-v[f.end];if(o>0){var l=[0,0];l[c]=n[c]+v[f.end]-p,l[h]=O,s.push(kw(t,a,"dashed",s.length,o,l,e.className,i))}v=r})),m.forEach((function(e){var r=e.elementRect.rect,o=p-r[f.start],l=r[f.end]-g,u=[0,0],d=[0,0];u[c]=n[c]-o,u[h]=O,d[c]=n[c]+g-p,d[h]=O,s.push(kw(t,a,"dashed",s.length,o,u,e.className,i)),s.push(kw(t,a,"dashed",s.length,l,d,e.className,i))}))}))})),s}(t,$,[h,u],Q,e),!0),function(t,e,n,r,i){var o=[];return["horizontal","vertical"].forEach((function(s){var a=e.filter((function(t){return t.type===s})).slice(0,1),l="vertical"===s?0:1,c=l?0:1,h=l?Ky:Hy,u=l?Hy:Ky,f=r[h.start],d=r[h.end],p=r[u.start],g=r[u.end];a.forEach((function(e){var r=e.gap,s=e.gapRects,a=Math.max.apply(Math,Hv([p],s.map((function(t){return t.rect[u.start]})),!1)),m=Math.min.apply(Math,Hv([g],s.map((function(t){return t.rect[u.end]})),!1)),O=(a+m)/2;a!==m&&O!==(p+g)/2&&s.forEach((function(e){var s=e.rect,a=e.className,u=[n[0],n[1]];if(s[h.end]<f)u[l]+=s[h.end]-f;else{if(!(d<s[h.start]))return;u[l]+=s[h.start]-f-r}u[c]+=O-p,o.push(kw(t,l?"vertical":"horizontal","gap",o.length,r,u,a,i))}))}))})),o}(t,M,[h,u],Q,e),!0),Sw(t,"horizontal",O,[i,r],Q,e),!0),Sw(t,"vertical",m,[i,r],Q,e),!0),xw(t,"horizontal",g,h,r,y,0,e),!0),xw(t,"vertical",p,u,i,w,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Aw(t)},drag:function(t){t.state.guidelines=$w(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!Bw(t,e)&&!ex(t,e))||(!e.isRequest&&e.inputEvent?Dm(e.inputEvent.target,Xb("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,Aw(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Aw(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function Iw(t,e,n,r){var i=t.getState(),o=i.renderPoses,s=i.rotation,a=i.direction,l=uy(t.props,e).zoom,c=a>0?1:-1,h=s/Math.PI*180,u={},f=t.renderState;f.renderDirectionMap||(f.renderDirectionMap={});var d=f.renderDirectionMap;return n.forEach((function(t){var e=t.dir;u[e]=!0})),n.map((function(t){var n=t.data,i=t.classNames,a=t.dir,f=mb[a];if(!f||!u[a])return null;d[a]=!0;var p=(Rm(h,15)+c*Ob[a]+720)%180,g={};return km(n).forEach((function(t){g["data-".concat(t)]=n[t]})),r.createElement("div",Fv({className:Xb.apply(void 0,Hv(["control","direction",a,e],i,!1)),"data-rotation":p,"data-direction":a},g,{key:"direction-".concat(a),style:hy.apply(void 0,Hv([s,l],f.map((function(t){return o[t]})),!1))}))}))}function Xw(t,e,n,r){var i=uy(t.props,n).renderDirections,o=void 0===i?e:i;return o?Iw(t,n,(!0===o?pb:o).map((function(t){return{data:{},classNames:[],dir:t}})),r):[]}function Uw(t,e,n,r,i,o){for(var s=[],a=6;a<arguments.length;a++)s[a-6]=arguments[a];var l=_m(n,r),c=e?Rm(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(o),className:Xb.apply(void 0,Hv(["line","direction",e?"edge":"",e],s,!1)),"data-rotation":c,"data-line-key":o,"data-direction":e,style:cy(n,r,i,l)})}function qw(t,e,n,r,i){return(!0===n?db:n).map((function(n,o){var s=mb[n],a=s[0],l=s[1];if(null!=l)return Uw(t,n,r[a],r[l],i,"".concat(e,"Edge").concat(o),e)})).filter(Boolean)}function zw(t){return function(e,n){var r=uy(e.props,t).edge;return r&&(!0===r||r.length)?Hv(Hv([],qw(n,t,r,e.getState().renderPoses,e.props.zoom),!0),function(t,e,n){return Xw(t,["nw","ne","sw","se"],e,n)}(e,t,n),!0):Yw(e,t,n)}}function Yw(t,e,n){return Xw(t,pb,e,n)}var Lw={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var n=t.props,r=n.throttleDragRotate,i=n.zoom,o=t.getState(),s=o.dragInfo,a=o.beforeOrigin;if(!r||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var c=ay(l),h=_m(l,[0,0]);return[e.createElement("div",{className:Xb("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(a[0],"px, ").concat(a[1],"px) rotate(").concat(h,"rad) scaleY(").concat(i,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,o=t.state,s=o.target,a=o.gestos;if(a.draggable)return!1;a.draggable=i||t.targetGesto;var l=Qy(s);n.datas={},n.left=parseFloat(l.left||"")||0,n.top=parseFloat(l.top||"")||0,n.bottom=parseFloat(l.bottom||"")||0,n.right=parseFloat(l.right||"")||0,n.startValue=[0,0],xb(t,e),Mb(e,"translate"),function(t,e){e.absolutePoses=vy(t.state)}(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var c=xy(t,e,Fv({set:function(t){n.startValue=t}},$b(e)));return!1!==(r||Cy(t,"onDragStart",c))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(a.draggable=null,n.isPinch=!1),!!n.isDrag&&c},drag:function(t,e){if(e){Sb(e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.isPinch,s=e.isRequest,a=e.deltaOffset,l=e.distX,c=e.distY,h=n.isDrag,u=n.prevDist,f=n.prevBeforeDist,d=n.startValue;if(h){a&&(l+=a[0],c+=a[1]);var p=t.props,g=p.parentMoveable,m=r?0:p.throttleDrag||0,O=r?0:p.throttleDragRotate||0,v=!1,b=0;if(!r&&O>0&&(l||c)){var y=p.startDragRotate||0,w=Rm(y+180*_m([0,0],[l,c])/Math.PI,O)-y,x=c*Math.abs(Math.cos((w-90)/180*Math.PI)),S=ay([l*Math.abs(Math.cos(w/180*Math.PI)),x]);b=w*Math.PI/180,l=S*Math.cos(b),c=S*Math.sin(b)}if(!o&&!r&&!i&&(!O||l||c)){var k=Pw(t,l,c,O,s||a,n),C=k[0],Q=k[1],P=C.isSnap,E=C.isBound,T=C.offset,_=Q.isSnap,$=Q.isBound;v=P||_||E||$,l+=T,c+=Q.offset}var M=NO(Qb({datas:n,distX:l,distY:c}),d),R=NO(function(t){var e=t.datas,n=Qb({datas:e,distX:t.distX,distY:t.distY}),r=Cb(e,function(t,e){for(var n=HO(4),r=0;r<3;++r)n[12+r]=t[r]||0;return n}([n[0],n[1]]));return IO(r,DO([0,0,0],4),4)}({datas:n,distX:l,distY:c}),d);O||v||(Am(R,m),Am(M,m)),Am(R,cb),Am(M,cb);var A=BO(M,d),D=BO(R,d),W=BO(D,u),j=BO(A,f);n.prevDist=D,n.prevBeforeDist=A,n.passDelta=W,n.passDist=D;var Z=n.left+A[0],N=n.top+A[1],B=n.right-A[0],V=n.bottom-A[1],I=kb(n,"translate(".concat(R[0],"px, ").concat(R[1],"px)"),"translate(".concat(D[0],"px, ").concat(D[1],"px)"));if(Ab(e,I),t.state.dragInfo.dist=r?[0,0]:D,r||g||!W.every((function(t){return!t}))||!j.some((function(t){return!t}))){var X=t.state,U=X.width,q=X.height,z=xy(t,e,Fv({transform:I,dist:D,delta:W,translate:R,beforeDist:A,beforeDelta:j,beforeTranslate:M,left:Z,top:N,right:B,bottom:V,width:U,height:q,isPinch:o},yy({transform:I},e)));return!r&&Cy(t,"onDrag",z),z}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return!(!r[0]&&!r[1])&&(n.deltaOffset=[0,0],this.drag(t,Fv(Fv({},e),{deltaOffset:r})))},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,r.isDrag){r.isDrag=!1;var i=Sy(t,e,{});return!n&&Cy(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=this.dragStart(t,e);if(!o)return!1;var s=Yy(t,this,"dragStart",[r||0,i||0],e,!1,"draggable"),a=Cy(t,"onDragGroupStart",Fv(Fv({},o),{targets:t.props.targets,events:s}));return n.isDrag=!1!==a,!!n.isDrag&&o},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),r=Yy(t,this,"drag",e.datas.passDelta,e,!1,"draggable");if(n){var i=Fv({targets:t.props.targets,events:r},n);return Cy(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var n=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var r=Yy(t,this,"dragEnd",[0,0],e,!1,"draggable");return Cy(t,"onDragGroupEnd",Sy(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:r,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}},Gw=Zy("resizable"),Fw={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:zw("resizable"),dragControlCondition:Gw,viewClassName:jy("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,o=e.isGroup,s=e.parentDirection,a=e.parentGesto,l=e.datas,c=e.parentFixedDirection,h=e.parentEvent,u=gy(s,i,r,l),f=t.state,d=f.target,p=f.width,g=f.height,m=f.gestos;if(!u||!d)return!1;if(m.resizable)return!1;m.resizable=a||t.controlGesto,!i&&xb(t,e),l.datas={},l.direction=u,l.startOffsetWidth=p,l.startOffsetHeight=g,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.cssWidth,l.startHeight=f.cssHeight,l.maxSize=[1/0,1/0],o||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var O=t.props.transformOrigin||"% %";function v(t){l.ratio=t&&isFinite(t)?t:0}function b(t){l.fixedDirection=t,l.fixedPosition=Tb(l.startPositions,t)}function y(t){l.minSize=[Cm("".concat(t[0]),0)||0,Cm("".concat(t[1]),0)||0]}function w(t){var e=[t[0]||1/0,t[1]||1/0];lm(e[0])&&!isFinite(e[0])||(e[0]=Cm("".concat(e[0]),0)||1/0),lm(e[1])&&!isFinite(e[1])||(e[1]=Cm("".concat(e[1]),0)||1/0),l.maxSize=e}l.transformOrigin=O&&am(O)?O.split(" "):O,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=null!==(n=null==e?void 0:e.parentIsWidth)&&void 0!==n?n:!u[0]&&!u[1]||u[0]||!u[1],l.startPositions=vy(t.state),v(p/g),b(c||[-u[0],-u[1]]),l.setFixedDirection=b,l.setMin=y,l.setMax=w;var x=xy(t,e,{direction:u,startRatio:l.ratio,set:function(t){var e=t[0],n=t[1];l.startWidth=e,l.startHeight=n},setMin:y,setMax:w,setRatio:v,setFixedDirection:b,setOrigin:function(t){l.transformOrigin=t},dragStart:Lw.dragStart(t,(new yb).dragStart([0,0],e))}),S=h||Cy(t,"onResizeStart",x);return l.startFixedDirection=l.fixedDirection,!1!==S&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:u}),!!l.isResize&&x},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,o=e.isPinch,s=e.parentKeepRatio,a=e.dragClient,l=e.parentDist,c=e.isRequest,h=e.isGroup,u=e.parentEvent,f=e.resolveMatrix,d=r.isResize,p=r.transformOrigin,g=r.startWidth,m=r.startHeight,O=r.prevWidth,v=r.prevHeight,b=r.minSize,y=r.maxSize,w=r.ratio,x=r.startOffsetWidth,S=r.startOffsetHeight,k=r.isWidth;if(d){if(f){var C=t.state.is3d,Q=r.startOffsetMatrix,P=r.startTransformOrigin,E=C?4:3,T=ev(Wb(e)),_=Math.sqrt(T.length);E!==_&&(T=WO(T,_,E));var $=_b(Q,T,P,E),M=ry($,x,S,E);r.startPositions=M,r.nextTargetMatrix=T,r.nextAllMatrix=$}var R=uy(t.props,"resizable"),A=R.resizeFormat,D=R.throttleResize,W=void 0===D?i?0:1:D,j=R.parentMoveable,Z=R.keepRatioFinally,N=r.direction,B=N,V=0,I=0;N[0]||N[1]||(B=[1,1]);var X=w&&(null!=s?s:R.keepRatio)||!1,U=rt(),q=U[0],z=U[1];u||(r.setFixedDirection(r.fixedDirection),Cy(t,"onBeforeResize",xy(t,e,{startFixedDirection:r.startFixedDirection,setFixedDirection:function(t){var e;return r.setFixedDirection(t),e=rt(),q=e[0],z=e[1],[q,z]},boundingWidth:q,boundingHeight:z,setSize:function(t){q=t[0],z=t[1]}},!0)));var Y=a;a||(Y=!i&&o?Ib(t,[0,0]):r.fixedPosition);var L=[0,0];if(o||(L=function(t,e,n,r,i,o,s){if(!Jy(t,"resizable"))return[0,0];var a=s.fixedDirection,l=s.nextAllMatrix,c=t.state,h=c.allMatrix,u=c.is3d;return jw(t,(function(t,r){return Dw(l||h,e+t,n+r,a,i,u)}),e,n,r,i,o,s)}(t,q,z,N,Y,c,r)),l&&(!l[0]&&(L[0]=0),!l[1]&&(L[1]=0)),X){B[0]&&B[1]&&L[0]&&L[1]&&(Math.abs(L[0])>Math.abs(L[1])?L[1]=0:L[0]=0);var G=!L[0]&&!L[1];G&&it(),B[0]&&!B[1]||L[0]&&!L[1]||G&&k?(q+=L[0],z=q/w):(!B[0]&&B[1]||!L[0]&&L[1]||G&&!k)&&(z+=L[1],q=z*w)}else q+=L[0],z+=L[1],q=Math.max(0,q),z=Math.max(0,z);n=Em([q,z],b,y,!!X&&w),q=n[0],z=n[1],it(),X&&(h||Z)&&(k?z=q/w:q=z*w);var F=[(V=q-x)-O,(I=z-S)-v];r.prevWidth=V,r.prevHeight=I;var H=function(t,e,n,r,i,o){var s=t.props.groupable,a=t.state,l=a.transformOrigin,c=a.offsetMatrix,h=a.is3d,u=a.width,f=a.height,d=a.left,p=a.top,g=o.fixedDirection,m=o.nextTargetMatrix||a.targetMatrix,O=h?4:3,v=function(t,e,n,r,i,o){return void 0===r&&(r=e),void 0===i&&(i=n),void 0===o&&(o=[0,0]),t?t.map((function(t,s){var a=mm(t),l=a.value,c=a.unit,h=s?i:r,u=s?n:e;return"%"===t||isNaN(l)?u*(h?o[s]/h:0):"%"!==c?l:u*l/100})):o}(i,e,n,u,f,l),b=s?d:0,y=s?p:0,w=function(t,e,n,r,i,o){var s=Tb(ry(e,n,r,i),o);return[t[0]-s[0],t[1]-s[1]]}(r,_b(c,m,v,O),e,n,O,g);return BO(w,[b,y])}(t,q,z,Y,p,r);if(j||!F.every((function(t){return!t}))||!H.every((function(t){return!t}))){var K=Lw.drag(t,bb(e,t.state,H,!!o,!1,"draggable")),J=K.transform,tt=g+V,et=m+I,nt=xy(t,e,Fv({width:tt,height:et,offsetWidth:Math.round(q),offsetHeight:Math.round(z),startRatio:w,boundingWidth:q,boundingHeight:z,direction:N,dist:[V,I],delta:F,isPinch:!!o,drag:K},wy({style:{width:"".concat(tt,"px"),height:"".concat(et,"px")},transform:J},K,e)));return!u&&Cy(t,"onResize",nt),nt}}function rt(){var t=r.fixedDirection,n=Uy(B,X,r,e);V=n.distWidth,I=n.distHeight;var i=B[0]-t[0]||X?Math.max(x+V,cb):x,o=B[1]-t[1]||X?Math.max(S+I,cb):S;return X&&x&&S&&(k?o=i/w:i=o*w),[i,o]}function it(){var t;A&&(t=A([q,z]),q=t[0],z=t[1]),q=Rm(q,W),z=Rm(z,W)}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,o=n.startOffsetHeight,s=n.prevWidth,a=n.prevHeight;if(r){var l=t.state,c=l.width-(i+s),h=l.height-(o+a),u=Math.abs(c)>3,f=Math.abs(h)>3;return u&&(n.startWidth+=c,n.startOffsetWidth+=c,n.prevWidth+=c),f&&(n.startHeight+=h,n.startOffsetHeight+=h,n.prevHeight+=h),u||f?this.dragControl(t,e):void 0}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=Sy(t,e,{});return!r&&Cy(t,"onResizeEnd",i),i}},dragGroupControlCondition:Gw,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,Fv(Fv({},e),{isGroup:!0}));if(!r)return!1;var i=zy(t,"resizable",e);function o(e,r){var i=n.fixedDirection,o=n.fixedPosition,s=Tb(r.datas.startPositions||vy(e.state),i),a=IO(FO(-t.rotation/180*Math.PI,3),[s[0]-o[0],s[1]-o[1],1],3),l=a[0],c=a[1];return r.datas.originalX=l,r.datas.originalY=c,r}var s=n.startOffsetWidth,a=n.startOffsetHeight;function l(){var t=n.minSize;i.forEach((function(e){var n=e.datas,r=n.minSize,i=n.startOffsetWidth,o=n.startOffsetHeight,l=s*(i?r[0]/i:0),c=a*(o?r[1]/o:0);t[0]=Math.max(t[0],l),t[1]=Math.max(t[1],c)}))}function c(){var t=n.maxSize;i.forEach((function(e){var n=e.datas,r=n.maxSize,i=n.startOffsetWidth,o=n.startOffsetHeight,l=s*(i?r[0]/i:0),c=a*(o?r[1]/o:0);t[0]=Math.min(t[0],l),t[1]=Math.min(t[1],c)}))}var h=Ly(t,this,"dragControlStart",e,(function(t,e){return o(t,e)}));l(),c();var u=function(t){r.setFixedDirection(t),h.forEach((function(e,n){e.setFixedDirection(t),o(e.moveable,i[n])}))};n.setFixedDirection=u;var f=Fv(Fv({},r),{targets:t.props.targets,events:h.map((function(t){return Fv(Fv({},t),{setMin:function(e){t.setMin(e),l()},setMax:function(e){t.setMax(e),c()}})})),setFixedDirection:u,setMin:function(t){r.setMin(t),l()},setMax:function(t){r.setMax(t),c()}}),d=Cy(t,"onResizeGroupStart",f);return n.isResize=!1!==d,!!n.isResize&&r},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=uy(t.props,"resizable");ky(t,"onBeforeResize",(function(n){Cy(t,"onBeforeResizeGroup",xy(t,e,Fv(Fv({},n),{targets:r.targets}),!0))}));var i=this.dragControl(t,Fv(Fv({},e),{isGroup:!0}));if(i){var o=i.boundingWidth,s=i.boundingHeight,a=i.dist,l=r.keepRatio,c=[o/(o-a[0]),s/(s-a[1])],h=n.fixedPosition,u=Ly(t,this,"dragControl",e,(function(e,n){var r=IO(FO(t.rotation/180*Math.PI,3),[n.datas.originalX*c[0],n.datas.originalY*c[1],1],3),i=r[0],o=r[1];return Fv(Fv({},n),{parentDist:null,parentScale:c,dragClient:NO(h,[i,o]),parentKeepRatio:l})})),f=Fv({targets:r.targets,events:u},i);return Cy(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var r=Ly(t,this,"dragControlEnd",e);return Cy(t,"onResizeGroupEnd",Sy(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){var n;return{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null===(n=null==t?void 0:t.horizontal)||void 0===n||n}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.gestos.resizable=null}};function Hw(t,e,n,r,i){var o=t.props.groupable,s=t.state,a=s.is3d?4:3,l=e.origin,c=ny(t.state.rootMatrix,BO([l[0],l[1]],o?[0,0]:[s.left,s.top]),a),h=NO([i.left,i.top],c);e.startAbsoluteOrigin=h,e.prevDeg=_m(h,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Mm(h,[n,r])}function Kw(t,e,n){var r=n.defaultDeg,i=n.prevDeg,o=i%360,s=Math.floor(i/360);o<0&&(o+=360),o>t&&o>270&&t<90?++s:o<t&&o<90&&t>270&&--s;var a=e*(360*s+t-r);return n.prevDeg=r+a,a}function Jw(t,e,n,r){return Kw(_m(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function tx(t,e,n,r,i,o){var s=t.props.throttleRotate,a=void 0===s?0:s,l=n.prevSnapDeg,c=0,h=!1;if(o){var u=function(t,e,n){if(!Jy(t,"rotatable"))return{isSnap:!1,rotation:n};var r=e.pos1,i=e.pos2,o=e.pos3,s=e.pos4,a=e.origin,l=n*Math.PI/180,c=[r,i,o,s].map((function(t){return BO(t,a)})),h=c.map((function(t){return YO(t,l)})),u=Hv(Hv([],function(t,e,n,r,i){if(!t.props.bounds)return[];var o=i*Math.PI/180,s=vw(t),a=s.left,l=s.top,c=s.right,h=s.bottom,u=a-r[0],f=c-r[0],d=l-r[1],p=h-r[1],g={left:u,top:d,right:f,bottom:p};if(!yw(n,g,0))return[];var m=[];return[[u,0],[f,0],[d,1],[p,1]].forEach((function(t){var r=t[0],i=t[1];n.forEach((function(t){var n=_m([0,0],t);m.push.apply(m,function(t,e,n){var r=ay(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort((function(e,r){return Math.abs(e-t[n?0:1])-Math.abs(r-t[n?0:1])})).map((function(t){return _m([0,0],n?[t,e]:[e,t])}))}(t,r,i).map((function(t){return o+t-n})).filter((function(t){return!yw(e,g,t)})).map((function(t){return Rm(180*t/Math.PI,cb)})))}))})),m}(t,c,h,a,n),!0),function(t,e,n,r,i){var o=t.props.innerBounds,s=i*Math.PI/180;if(!o)return[];var a=o.left,l=o.top,c=o.width,h=o.height,u=a-r[0],f=a+c-r[0],d=l-r[1],p=l+h-r[1],g=[[u,d],[f,d],[u,p],[f,p]],m=Tb(n,[0,0]);if(!mw(n,g,m,0))return[];var O=[],v=g.map((function(t){return[ay(t),_m([0,0],t)]}));return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach((function(t){var n=_m([0,0],function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return[e[0],0];if(!i)return[0,e[1]];var o=i/r,s=-o*e[0]+e[1];return[-s/(o+1/o),s/(o*o+1)]}(t)),r=function(t){var e=t[0],n=t[1],r=n[0]-e[0],i=n[1]-e[1];if(!r)return Math.abs(e[0]);if(!i)return Math.abs(e[1]);var o=i/r;return Math.abs((-o*e[0]+e[1])/Math.sqrt(Math.pow(o,2)+1))}(t);O.push.apply(O,v.filter((function(t){var e=t[0];return e&&r<=e})).map((function(t){var e=t[0],i=t[1],o=Math.acos(e?r/e:0);return[s+(i+o)-n,s+(i-o)-n]})).reduce((function(t,e){return t.push.apply(t,e),t}),[]).filter((function(t){return!mw(e,g,m,t)})).map((function(t){return Rm(180*t/Math.PI,cb)})))})),O}(t,c,h,a,n),!0);u.sort((function(t,e){return Math.abs(t-n)-Math.abs(e-n)}));var f=u.length>0;return{isSnap:f,rotation:f?u[0]:n}}(t,e,r);h=u.isSnap,c=i+u.rotation}h||(c=Rm(i+r,a));var f=c-i;return n.prevSnapDeg=f,[f-l,f,c]}function ex(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var n=e.inputEvent.target;if(Dm(n,Xb("rotation-control"))||Dm(n,Xb("around-control"))||Dm(n,Xb("control"))&&Dm(n,Xb("rotatable")))return!0;var r=t.props.rotationTarget;return!!r&&Vy(r,!0).some((function(t){return!!t&&(n===t||n.contains(t))}))}var nx=pb.map((function(t){var e="",n="",r="center",i="center";return t.indexOf("n")>-1&&(e="top: -20px;",i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: -20px;",r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(n).concat(e,"\n        transform-origin: ").concat(r," ").concat(i,";\n    }")})).join("\n"),rx=".rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n.rotation .rotation-line {\n    display: block;\n    width: 100%;\n    height: 100%;\n    transform-origin: 50% 50%;\n}\n.rotation .rotation-control {\n    border-color: #4af;\n    border-color: var(--moveable-color);\n    background:#fff;\n    cursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\n    cursor: alias;\n}\n.around-control {\n    position: absolute;\n    will-change: transform;\n    width: 20px;\n    height: 20px;\n    left: -10px;\n    top: -10px;\n    box-sizing: border-box;\n    background: transparent;\n    z-index: 8;\n    cursor: alias;\n    transform-origin: center center;\n}\n.rotatable.direction.control.move {\n    cursor: move;\n}\n".concat(nx,"\n"),ix={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[rx],viewClassName:function(t){return t.isDragging("rotatable")?Xb("view-rotation-dragging"):""},render:function(t,e){var n=uy(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,o=n.zoom,s=n.renderDirections,a=n.rotateAroundControls,l=n.resolveAblesWithRotatable,c=t.getState(),h=c.renderPoses,u=c.direction;if(!r)return null;var f=function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];if("none"!==t){var a=(t||"top").split("-"),l=a[0],c=a[1],h=[r,i];"left"===l?h=[o,r]:"right"===l?h=[i,s]:"bottom"===l&&(h=[s,o]);var u=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2],f=dy(h,n);if(c){var d="top"===c||"left"===c,p="bottom"===l||"left"===l;u=h[d&&!p||!d&&p?0:1]}return[u,f]}}(i,h,u),d=[];if(f){var p=f[0],g=f[1];d.push(e.createElement("div",{key:"rotation",className:Xb("rotation"),style:{transform:"translate(-50%) translate(".concat(p[0],"px, ").concat(p[1],"px) rotate(").concat(g,"rad)")}},e.createElement("div",{className:Xb("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:Xb("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))}if(s){var m=km(l||{}),O={};m.forEach((function(t){l[t].forEach((function(e){O[e]=t}))}));var v=[];sm(s)&&(v=s.map((function(t){var e=O[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}}))),d.push.apply(d,Iw(t,"rotatable",v,e))}return a&&d.push.apply(d,function(t,e){var n=t.renderState;n.renderDirectionMap||(n.renderDirectionMap={});var r=t.getState(),i=r.renderPoses,o=r.rotation,s=r.direction,a=n.renderDirectionMap,l=t.props.zoom,c=s>0?1:-1,h=o/Math.PI*180;return km(a).map((function(t){var n=mb[t];if(!n)return null;var r=(Rm(h,15)+c*Ob[t]+720)%180;return e.createElement("div",{className:Xb("around-control"),"data-rotation":r,"data-direction":t,key:"direction-around-".concat(t),style:hy.apply(void 0,Hv([o,l],n.map((function(t){return i[t]})),!1))})}))}(t,e)),d},dragControlCondition:ex,dragControlStart:function(t,e){var n,r,i=e.datas,o=e.clientX,s=e.clientY,a=e.parentRotate,l=e.parentFlag,c=e.isPinch,h=e.isRequest,u=t.state,f=u.target,d=u.left,p=u.top,g=u.direction,m=u.beforeDirection,O=u.targetTransform,v=u.moveableClientRect,b=u.offsetMatrix,y=u.targetMatrix,w=u.allMatrix,x=u.width,S=u.height;if(!h&&!f)return!1;var k=t.getRect();i.rect=k,i.transform=O,i.left=d,i.top=p;var C=function(e){i.fixedDirection=e,i.fixedPosition=Vb(t,e),W&&W.setFixedDirection(e)},Q=o,P=s;if(h||c||l){var E=a||0;i.beforeInfo={origin:k.beforeOrigin,prevDeg:E,defaultDeg:E,prevSnapDeg:0,startDist:0},i.afterInfo=Fv(Fv({},i.beforeInfo),{origin:k.origin}),i.absoluteInfo=Fv(Fv({},i.beforeInfo),{origin:k.origin,startValue:E})}else{var T=null===(r=e.inputEvent)||void 0===r?void 0:r.target;if(T){var _=T.getAttribute("data-direction")||"",$=gb[_];if($){i.isControl=!0,i.isAroundControl=Dm(T,Xb("around-control")),i.controlDirection=$;var M=T.getAttribute("data-resolve");M&&(i.resolveAble=M);var R=function(t,e,n){var r=16===t.length?4:3,i=e.map((function(e){return ny(t,e,r)})),o=n.left,s=n.top;return i.map((function(t){return[t[0]+o,t[1]+s]}))}(u.rootMatrix,u.renderPoses,v);n=Tb(R,$),Q=n[0],P=n[1]}}i.beforeInfo={origin:k.beforeOrigin},i.afterInfo={origin:k.origin},i.absoluteInfo={origin:k.origin,startValue:k.rotation};var A=C;C=function(e){var n=u.is3d?4:3,r=Tb([[0,0],[x,0],[0,S],[x,S]],e),o=NO(AO(y,n),r),s=o[0],a=o[1],l=IO(b,DO([s,a],n)),c=IO(w,DO([r[0],r[1]],n));A(e),i.beforeInfo.origin=l,i.afterInfo.origin=c,i.absoluteInfo.origin=c,Hw(t,i.beforeInfo,Q,P,v),Hw(t,i.afterInfo,Q,P,v),Hw(t,i.absoluteInfo,Q,P,v)}}i.startClientX=Q,i.startClientY=P,i.direction=g,i.beforeDirection=m,i.startValue=0,i.datas={},Mb(e,"rotate");var D=!1,W=!1;i.isControl&&i.resolveAble&&"resizable"===i.resolveAble&&(W=Fw.dragControlStart(t,Fv(Fv({},new yb("resizable").dragStart([0,0],e)),{parentDirection:i.controlDirection,parentFixedDirection:i.fixedDirection}))),W||(D=Lw.dragStart(t,(new yb).dragStart([0,0],e))),C(function(t){var e=t.state,n=e.width,r=e.height,i=e.transformOrigin;return[i[0]/(n/2)-1,i[1]/(r/2)-1]}(t));var j=xy(t,e,Fv(Fv({set:function(t){i.startValue=t*Math.PI/180},setFixedDirection:C},$b(e)),{dragStart:D,resizeStart:W})),Z=Cy(t,"onRotateStart",j);return i.isRotate=!1!==Z,u.snapRenderInfo={request:e.isRequest},!!i.isRotate&&j},dragControl:function(t,e){var n,r,i,o=e.datas,s=e.distX,a=e.distY,l=e.parentRotate,c=e.parentFlag,h=e.isPinch,u=e.groupDelta,f=o.beforeDirection,d=o.beforeInfo,p=o.afterInfo,g=o.absoluteInfo,m=o.isRotate,O=o.startValue,v=o.rect,b=o.startClientX,y=o.startClientY;if(m){Sb(e,"rotate");var w,x,S,k,C,Q,P,E,T,_=function(t){return sy(t.datas.beforeTransform,[50,50],100,100).direction}(e),$=f*_,M=t.props.parentMoveable,R=180/Math.PI*O,A=g.startValue,D=!1,W=b+s,j=y+a;if(!c&&"parentDist"in e){var Z=e.parentDist;x=Z,C=Z,E=Z}else h||c?(x=Kw(l,f,d),C=Kw(l,$,p),E=Kw(l,$,g)):(x=Jw(W,j,f,d),C=Jw(W,j,$,p),E=Jw(W,j,$,g),D=!0);if(Cy(t,"onBeforeRotate",xy(t,e,{beforeRotation:R+x,rotation:R+C,absoluteRotation:A+E,setRotation:function(t){x=C=t-R,E=C}},!0)),w=(n=tx(t,v,d,x,R,D))[0],x=n[1],S=n[2],k=(r=tx(t,v,p,C,R,D))[0],C=r[1],Q=r[2],P=(i=tx(t,v,g,E,A,D))[0],E=i[1],T=i[2],P||k||w||M){var N=kb(o,"rotate(".concat(Q,"deg)"),"rotate(".concat(C,"deg)")),B=function(t,e,n){var r=n.fixedDirection,i=n.fixedPosition;return Bb(t,"rotate(".concat(e,"deg)"),r,i,n)}(t,C,o),V=BO(NO(u||[0,0],B),o.prevInverseDist||[0,0]);o.prevInverseDist=B,o.requestValue=null;var I=Nb(t,N,V,h,e),X=I,U=Mm([W,j],g.startAbsoluteOrigin)-g.startDist,q=void 0;if("resizable"===o.resolveAble){var z=Fw.dragControl(t,Fv(Fv({},bb(e,t.state,[e.deltaX,e.deltaY],!!h,!1,"resizable")),{resolveMatrix:!0,parentDistance:U}));z&&(q=z,X=wy(X,z,e))}var Y=xy(t,e,Fv(Fv({delta:k,dist:C,rotate:Q,rotation:Q,beforeDist:x,beforeDelta:w,beforeRotate:S,beforeRotation:S,absoluteDist:E,absoluteDelta:P,absoluteRotate:T,absoluteRotation:T,isPinch:!!h,resize:q},I),X));return Cy(t,"onRotate",Y),Y}}},dragControlAfter:function(t,e){e.datas.requestValue},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=Sy(t,e,{});return Cy(t,"onRotateEnd",r),r}},dragGroupControlCondition:ex,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,o=r.top,s=r.beforeOrigin,a=this.dragControlStart(t,e);if(!a)return!1;a.set(n.beforeDirection*t.rotation);var l=Ly(t,this,"dragControlStart",e,(function(t,e){var n=t.state,r=n.left,a=n.top,l=n.beforeOrigin,c=NO(BO([r,a],[i,o]),BO(l,s));return e.datas.startGroupClient=c,e.datas.groupClient=c,Fv(Fv({},e),{parentRotate:0})})),c=Cy(t,"onRotateGroupStart",Fv(Fv({},a),{targets:t.props.targets,events:l}));return n.isRotate=!1!==c,!!n.isRotate&&a},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){ky(t,"onBeforeRotate",(function(n){Cy(t,"onBeforeRotateGroup",xy(t,e,Fv(Fv({},n),{targets:t.props.targets}),!0))}));var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,o=r.beforeDist,s=o/180*Math.PI,a=Ly(t,this,"dragControl",e,(function(t,e){var n=e.datas.startGroupClient,r=e.datas.groupClient,a=r[0],l=r[1],c=YO(n,s*i),h=c[0],u=c[1],f=[h-a,u-l];return e.datas.groupClient=[h,u],Fv(Fv({},e),{parentRotate:o,groupDelta:f})}));t.rotation=i*r.beforeRotation;var l=Fv({targets:t.props.targets,events:a,set:function(e){t.rotation=e},setGroupRotation:function(e){t.rotation=e}},r);return Cy(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var r=Ly(t,this,"dragControlEnd",e);return Cy(t,"onRotateGroupEnd",Sy(t,e,{targets:t.props.targets,events:r})),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},ox=Zy("scalable"),sx={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:zw("scalable"),dragControlCondition:ox,viewClassName:jy("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,o=gy(e.parentDirection,r,i,n),s=t.state,a=s.width,l=s.height,c=s.targetTransform,h=s.target,u=s.pos1,f=s.pos2,d=s.pos4;if(!o||!h)return!1;r||xb(t,e),n.datas={},n.transform=c,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=a,n.startOffsetHeight=l,n.startValue=[1,1];var p=Mm(u,f),g=Mm(f,d),m=!o[0]&&!o[1]||o[0]||!o[1];function O(t){n.ratio=t&&isFinite(t)?t:0}function v(t){n.fixedDirection=t,n.fixedPosition=Tb(n.startPositions,t)}n.scaleWidth=p,n.scaleHeight=g,n.scaleXRatio=p/a,n.scaleYRatio=g/l,Mb(e,"scale"),n.isWidth=m,n.startPositions=vy(t.state),n.setFixedDirection=v,O(Mm(u,f)/Mm(f,d)),v([-o[0],-o[1]]);var b=xy(t,e,Fv(Fv({direction:o,set:function(t){n.startValue=t},setRatio:O,setFixedDirection:v},$b(e)),{dragStart:Lw.dragStart(t,(new yb).dragStart([0,0],e))})),y=Cy(t,"onScaleStart",b);return n.startFixedDirection=n.fixedDirection,!1!==y&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!n.isScale&&b},dragControl:function(t,e){Sb(e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,o=e.isPinch,s=e.dragClient,a=e.isRequest,l=n.prevDist,c=n.direction,h=n.startOffsetWidth,u=n.startOffsetHeight,f=n.isScale,d=n.startValue,p=n.isWidth,g=n.ratio;if(!f)return!1;var m=t.props,O=m.throttleScale,v=m.parentMoveable,b=c;c[0]||c[1]||(b=[1,1]);var y=g&&(null!=r?r:m.keepRatio)||!1,w=t.state;function x(){var t=Uy(b,y,n,e),r=t.distWidth,i=t.distHeight,o=(h+r)/h,s=(u+i)/u;return o=b[0]||y?o*d[0]:d[0],s=b[1]||y?s*d[1]:d[1],0===o&&(o=(l[0]>0?1:-1)*hb),0===s&&(s=(l[1]>0?1:-1)*hb),[o,s]}var S=x();if(!o&&t.props.groupable){var k=(w.snapRenderInfo||{}).direction;sm(k)&&(k[0]||k[1])&&(w.snapRenderInfo={direction:c,request:e.isRequest})}Cy(t,"onBeforeScale",xy(t,e,{scale:S,setFixedDirection:function(t){return n.setFixedDirection(t),S=x()},startFixedDirection:n.startFixedDirection,setScale:function(t){S=t}},!0));var C=[S[0]/d[0],S[1]/d[1]],Q=s,P=[0,0];if(s||(Q=!i&&o?Ib(t,[0,0]):n.fixedPosition),o||(P=function(t,e,n,r,i){if(!Jy(t,"scalable"))return[0,0];var o=i.startOffsetWidth,s=i.startOffsetHeight,a=i.fixedPosition,l=i.fixedDirection,c=i.is3d,h=jw(t,(function(t,n){return Dw(function(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d?4:3;return _b(r,ZO(t.targetMatrix,KO(e,i),i),n,i)}(i,NO(e,[t/o,n/s])),o,s,l,a,c)}),o,s,n,a,r,i);return[h[0]/o,h[1]/s]}(t,C,c,a,n)),y){b[0]&&b[1]&&P[0]&&P[1]&&(Math.abs(P[0]*h)>Math.abs(P[1]*u)?P[1]=0:P[0]=0);var E=!P[0]&&!P[1];if(E&&(p?C[0]=Rm(C[0]*d[0],O)/d[0]:C[1]=Rm(C[1]*d[1],O)/d[1]),b[0]&&!b[1]||P[0]&&!P[1]||E&&p){C[0]+=P[0];var T=h*C[0]*d[0]/g;C[1]=T/u/d[1]}else if(!b[0]&&b[1]||!P[0]&&P[1]||E&&!p){C[1]+=P[1];var _=u*C[1]*d[1]*g;C[0]=_/h/d[0]}}else C[0]+=P[0],C[1]+=P[1],P[0]||(C[0]=Rm(C[0]*d[0],O)/d[0]),P[1]||(C[1]=Rm(C[1]*d[1],O)/d[1]);0===C[0]&&(C[0]=(l[0]>0?1:-1)*hb),0===C[1]&&(C[1]=(l[1]>0?1:-1)*hb);var $,M,R=[C[0]/l[0],C[1]/l[1]];M=d,S=[($=C)[0]*M[0],$[1]*M[1]];var A=function(t,e,n,r,i){return Bb(t,"scale(".concat(e.join(", "),")"),n,r,i)}(t,C,n.fixedDirection,Q,n),D=BO(A,n.prevInverseDist||[0,0]);if(n.prevDist=C,n.prevInverseDist=A,S[0]===l[0]&&S[1]===l[1]&&D.every((function(t){return!t}))&&!v)return!1;var W=kb(n,"scale(".concat(S.join(", "),")"),"scale(".concat(C.join(", "),")")),j=xy(t,e,Fv({offsetWidth:h,offsetHeight:u,direction:c,scale:S,dist:C,delta:R,isPinch:!!o},Nb(t,W,D,o,e)));return Cy(t,"onScale",j),j},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=Sy(t,e,{});return Cy(t,"onScaleEnd",r),r},dragGroupControlCondition:ox,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=zy(t,"resizable",e);function o(e,r){var i=n.fixedDirection,o=n.fixedPosition,s=Tb(r.datas.startPositions||vy(e.state),i),a=IO(FO(-t.rotation/180*Math.PI,3),[s[0]-o[0],s[1]-o[1],1],3),l=a[0],c=a[1];return r.datas.originalX=l,r.datas.originalY=c,r}n.moveableScale=t.scale;var s=Ly(t,this,"dragControlStart",e,(function(t,e){return o(t,e)})),a=function(t){r.setFixedDirection(t),s.forEach((function(e,n){e.setFixedDirection(t),o(e.moveable,i[n])}))};n.setFixedDirection=a;var l=Fv(Fv({},r),{targets:t.props.targets,events:s,setFixedDirection:a}),c=Cy(t,"onScaleGroupStart",l);return n.isScale=!1!==c,!!n.isScale&&l},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){ky(t,"onBeforeScale",(function(n){Cy(t,"onBeforeScaleGroup",xy(t,e,Fv(Fv({},n),{targets:t.props.targets}),!0))}));var r=this.dragControl(t,e);if(r){var i=n.moveableScale;t.scale=[r.scale[0]*i[0],r.scale[1]*i[1]];var o=t.props.keepRatio,s=r.dist,a=r.scale,l=n.fixedPosition,c=Ly(t,this,"dragControl",e,(function(e,n){var r=IO(FO(t.rotation/180*Math.PI,3),[n.datas.originalX*s[0],n.datas.originalY*s[1],1],3),i=r[0],c=r[1];return Fv(Fv({},n),{parentDist:null,parentScale:a,parentKeepRatio:o,dragClient:NO(l,[i,c])})})),h=Fv({targets:t.props.targets,events:c},r);return Cy(t,"onScaleGroup",h),h}}},dragGroupControlEnd:function(t,e){var n=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var r=Ly(t,this,"dragControlEnd",e);return Cy(t,"onScaleGroupEnd",Sy(t,e,{targets:t.props.targets,events:r})),n}},request:function(){var t={},e=0,n=0;return{isControl:!0,requestStart:function(e){return{datas:t,parentDirection:e.direction||[1,1]}},request:function(r){return e+=r.deltaWidth,n+=r.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:r.keepRatio}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function ax(t,e){return t.map((function(t,n){return rm(t,e[n],1,2)}))}function lx(t,e,n){var r=_m(t,e),i=_m(t,n)-r;return i>=0?i:i+2*Math.PI}var cx={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},viewClassName:jy("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.warpable,s=n.zoom;if(r||i||!o)return[];var a=t.state,l=a.pos1,c=a.pos2,h=a.pos3,u=a.pos4,f=ax(l,c),d=ax(c,l),p=ax(l,h),g=ax(h,l),m=ax(h,u),O=ax(u,h),v=ax(c,u),b=ax(u,c);return Hv([e.createElement("div",{className:Xb("line"),key:"middeLine1",style:cy(f,m,s)}),e.createElement("div",{className:Xb("line"),key:"middeLine2",style:cy(d,O,s)}),e.createElement("div",{className:Xb("line"),key:"middeLine3",style:cy(p,v,s)}),e.createElement("div",{className:Xb("line"),key:"middeLine4",style:cy(g,b,s)})],Yw(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Dm(n,Xb("direction"))&&Dm(n,Xb("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,o=my(r.target,n);if(!o||!i)return!1;var s=t.state,a=s.transformOrigin,l=s.is3d,c=s.targetTransform,h=s.targetMatrix,u=s.width,f=s.height,d=s.left,p=s.top;return n.datas={},n.targetTransform=c,n.warpTargetMatrix=l?h:WO(h,3,4),n.targetInverseMatrix=MO(RO(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=d,n.top=p,n.poses=[[0,0],[u,0],[0,f],[u,f]].map((function(t){return BO(t,a)})),n.nextPoses=n.poses.map((function(t){var e=t[0],r=t[1];return IO(n.warpTargetMatrix,[e,r,0,1],4)})),n.startValue=HO(4),n.prevMatrix=HO(4),n.absolutePoses=vy(s),n.posIndexes=Eb(o),xb(t,e),Mb(e,"matrix3d"),s.snapRenderInfo={request:e.isRequest,direction:o},!1!==Cy(t,"onWarpStart",xy(t,e,Fv({set:function(t){n.startValue=t}},$b(e))))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,o=e.distY,s=n.targetInverseMatrix,a=n.prevMatrix,l=n.isWarp,c=n.startValue,h=n.poses,u=n.posIndexes,f=n.absolutePoses;if(!l)return!1;if(Sb(e,"matrix3d"),Jy(t,"warpable")){var d=u.map((function(t){return f[t]}));d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var p=Ew(t,r,{horizontal:d.map((function(t){return t[1]+o})),vertical:d.map((function(t){return t[0]+i}))}),g=p.horizontal,m=p.vertical;o-=g.offset,i-=m.offset}var O=Pb({datas:n,distX:i,distY:o},!0),v=n.nextPoses.slice();if(u.forEach((function(t){v[t]=NO(v[t],O)})),!lb.every((function(t){return e=t.map((function(t){return h[t]})),n=t.map((function(t){return v[t]})),r=lx(e[0],e[1],e[2]),i=lx(n[0],n[1],n[2]),!(r>=(o=Math.PI)&&i<=o||r<=o&&i>=o);var e,n,r,i,o})))return!1;var b=tv(h[0],h[2],h[1],h[3],v[0],v[2],v[1],v[3]);if(!b.length)return!1;var y=Cb(n,ZO(s,b,4),!0),w=ZO(RO(a,4),y,4);n.prevMatrix=y;var x=ZO(c,y,4),S=kb(n,"matrix3d(".concat(x.join(", "),")"),"matrix3d(".concat(y.join(", "),")"));return Ab(e,S),Cy(t,"onWarp",xy(t,e,{delta:w,matrix:x,dist:y,multiply:ZO,transform:S})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,Cy(t,"onWarpEnd",Sy(t,e,{})),r)}},hx=Xb("area-pieces"),ux=Xb("area-piece"),fx=Xb("avoid"),dx=Xb("view-dragging");function px(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;jm(e,fx),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function gx(t){return t.createElement("div",{key:"area_pieces",className:hx},t.createElement("div",{className:ux}),t.createElement("div",{className:ux}),t.createElement("div",{className:ux}),t.createElement("div",{className:ux}))}var mx={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,o=n.groupable,s=n.passDragArea,a=t.getState(),l=a.width,c=a.height,h=a.renderPoses,u=s?Xb("area","pass"):Xb("area");if(o)return[e.createElement("div",{key:"area",ref:Vg(t,"areaElement"),className:u}),gx(e)];if(!r||!i)return[];var f=tv([0,0],[l,0],[0,c],[l,c],h[0],h[1],h[2],h[3]),d=f.length?Jb(f,!0):"none";return[e.createElement("div",{key:"area",ref:Vg(t,"areaElement"),className:u,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(c,"px"),transformOrigin:"0 0",transform:d}}),gx(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;n.isDragArea=!1;var o=t.areaElement,s=t.state,a=s.moveableClientRect,l=s.renderPoses,c=s.rootMatrix,h=s.is3d,u=a.left,f=a.top,d=iy(l),p=d.left,g=d.top,m=d.width,O=d.height,v=My(c,[r-u,i-f],h?4:3),b=v[0],y=v[1],w=[{left:p,top:g,width:m,height:(y-=g)-10},{left:p,top:g,width:(b-=p)-10,height:O},{left:p,top:g+y+10,width:m,height:O-y-10},{left:p+b+10,top:g,width:m-b-10,height:O}],x=[].slice.call(o.nextElementSibling.children);w.forEach((function(t,e){x[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")})),Wm(o,fx),s.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,px(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||px(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){px(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&xm((function(){e.disableNativeEvent=!1}))}},Ox=Kv("origin",{render:function(t,e){var n=t.props.zoom,r=t.getState(),i=r.beforeOrigin,o=r.rotation;return[e.createElement("div",{className:Xb("control","origin"),style:hy(o,n,i),key:"beforeOrigin"})]}});function vx(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var bx={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(t,e){var n=t.props.scrollContainer,r=void 0===n?t.getContainer():n,i=new Tv,o=By(r,!0);e.datas.dragScroll=i;var s=e.isControl?"controlGesto":"targetGesto",a=e.targets;i.on("scroll",(function(n){var r=n.container,i=n.direction,o=xy(t,e,{scrollContainer:r,direction:i}),s=a?"onScrollGroup":"onScroll";a&&(o.targets=a),Cy(t,s,o)})).on("move",(function(n){var r=n.offsetX,i=n.offsetY;t[s].scrollBy(r,i,e.inputEvent,!1)})),i.dragStart(e,{container:o})},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,o=void 0===i?t.getContainer():i,s=r.scrollThreshold,a=void 0===s?0:s,l=r.getScrollPosition,c=void 0===l?vx:l;return n.drag(e,{container:o,threshold:a,getScrollPosition:function(t){return c({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,Fv(Fv({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,Fv(Fv({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,Fv(Fv({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,Fv(Fv({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,Fv(Fv({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,Fv(Fv({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,Fv(Fv({},e),{targets:t.props.targets}))}},yx={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function,stopPropagation:Boolean,preventClickEventOnDrag:Boolean,preventClickDefault:Boolean,viewContainer:Object},events:{}},wx=Kv("padding",{render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=n.padding||{},i=r.left,o=void 0===i?0:i,s=r.top,a=void 0===s?0:s,l=r.right,c=void 0===l?0:l,h=r.bottom,u=void 0===h?0:h,f=t.getState(),d=f.renderPoses,p=[f.pos1,f.pos2,f.pos3,f.pos4],g=[];return o>0&&g.push([0,2]),a>0&&g.push([0,1]),c>0&&g.push([1,3]),u>0&&g.push([2,3]),g.map((function(t,n){var r=t[0],i=t[1],o=tv([0,0],[100,0],[0,100],[100,100],p[r],p[i],d[r],d[i]);if(o.length)return e.createElement("div",{key:"padding".concat(n),className:Xb("padding"),style:{transform:Jb(o,!0)}})}))}}),xx=["nw","ne","se","sw"];function Sx(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var kx=[1,2,5,6],Cx=[0,3,4,7],Qx=[1,-1,-1,1],Px=[1,1,-1,-1];function Ex(t,e,n,r,i,o,s,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=n),void 0===a&&(a=r);var l=[],c=!1,h=t.filter((function(t){return!t.virtual})),u=h.map((function(t){var h=t.horizontal,u=t.vertical,f=t.pos;if(u&&!c&&(c=!0,l.push("/")),c){var d=Math.max(0,1===u?f[1]-o:a-f[1]);return l.push(Dy(d,r,e)),d}return d=Math.max(0,1===h?f[0]-i:s-f[0]),l.push(Dy(d,n,e)),d}));return{radiusPoses:h,styles:l,raws:u}}function Tx(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),o.vertical&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function _x(t,e,n,r,i,o,s){var a,l,c,h;void 0===o&&(o=[0,0]),void 0===s&&(s=!1);var u=t.indexOf("/"),f=(u>-1?t.slice(0,u):t).length,d=t.slice(0,f),p=t.slice(f+1),g=d.length,m=p.length,O=m>0,v=d[0],b=void 0===v?"0px":v,y=d[1],w=void 0===y?b:y,x=d[2],S=void 0===x?b:x,k=d[3],C=void 0===k?w:k,Q=p[0],P=void 0===Q?b:Q,E=p[1],T=void 0===E?O?P:w:E,_=p[2],$=void 0===_?O?P:S:_,M=p[3],R=void 0===M?O?T:C:M,A=[b,w,S,C].map((function(t){return Cm(t,e)})),D=[P,T,$,R].map((function(t){return Cm(t,n)})),W=A.slice(),j=D.slice();a=Sx([W[0],W[1]],e),W[0]=a[0],W[1]=a[1],l=Sx([W[3],W[2]],e),W[3]=l[0],W[2]=l[1],c=Sx([j[0],j[3]],n),j[0]=c[0],j[3]=c[1],h=Sx([j[1],j[2]],n),j[1]=h[0],j[2]=h[1];var Z=s?W:W.slice(0,Math.max(o[0],g)),N=s?j:j.slice(0,Math.max(o[1],m));return Hv(Hv([],Z.map((function(t,e){var o=xx[e];return{virtual:e>=g,horizontal:Qx[e],vertical:0,pos:[r+t,i+(-1===Px[e]?n:0)],sub:!0,raw:A[e],direction:o}})),!0),N.map((function(t,n){var o=xx[n];return{virtual:n>=m,horizontal:0,vertical:Px[n],pos:[r+(-1===Qx[n]?e:0),i+t],sub:!0,raw:D[n],direction:o}})),!0)}var $x=[[0,-1,"n"],[1,0,"e"]],Mx=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Rx(t,e,n){var r=t.props.clipRelative,i=t.state,o=i.width,s=i.height,a=e,l=a.type,c=a.poses,h="rect"===l,u="circle"===l;if("polygon"===l)return n.map((function(t){return"".concat(Dy(t[0],o,r)," ").concat(Dy(t[1],s,r))}));if(h||"inset"===l){var f=n[1][1],d=n[3][0],p=n[7][0],g=n[5][1];if(h)return[f,d,g,p].map((function(t){return"".concat(t,"px")}));var m=[f,o-d,s-g,p].map((function(t,e){return Dy(t,e%2?o:s,r)}));if(n.length>8){var O=BO(n[4],n[0]),v=O[0],b=O[1];m.push.apply(m,Hv(["round"],Ex(c.slice(8).map((function(t,e){return Fv(Fv({},t),{pos:n[e]})})),r,v,b,p,f,d,g).styles,!1))}return m}if(u||"ellipse"===l){var y=n[0],w=Dy(Math.abs(n[1][1]-y[1]),u?Math.sqrt((o*o+s*s)/2):s,r);return(m=u?[w]:[Dy(Math.abs(n[2][0]-y[0]),o,r),w]).push("at",Dy(y[0],o,r),Dy(y[1],s,r)),m}}function Ax(t,e,n,r){var i=[r,(r+e)/2,e],o=[t,(t+n)/2,n];return Mx.map((function(t){var e=t[0],n=t[1],r=t[2],s=i[e+1],a=o[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(e),direction:r,pos:[s,a]}}))}function Dx(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach((function(t){var r=t.pos;e[0]=Math.min(e[0],r[0]),e[1]=Math.max(e[1],r[0]),n[0]=Math.min(n[0],r[1]),n[1]=Math.max(n[1],r[1])})),[Math.abs(e[1]-e[0]),Math.abs(n[1]-n[0])]}function Wx(t,e,n,r,i){var o,s,a,l,c,h,u,f=i;if(!f){var d=Qy(t),p=d.clipPath;f="none"!==p?p:d.clip}if(f&&"none"!==f&&"auto"!==f||(f=r)){var g=gm(f),m=g.prefix,O=void 0===m?f:m,v=g.value,b=void 0===v?"":v,y="circle"===O,w=" ";if("polygon"===O){w=",";var x=(_=pm(b||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var r=t.split(" "),i=r[0],o=r[1];return{vertical:1,horizontal:1,pos:[Cm(i,e),Cm(o,n)]}}));return{type:O,clipText:f,poses:x,splitter:w}}if(y||"ellipse"===O){var S,k,C,Q="",P="",E=0,T=0,_=dm(b);if(y)S=void 0===(o=_[0])?"50%":o,Q=void 0===(s=_[2])?"50%":s,P=void 0===(a=_[3])?"50%":a,E=Cm(S,Math.sqrt((e*e+n*n)/2)),T=E;else k=void 0===(l=_[0])?"50%":l,C=void 0===(c=_[1])?"50%":c,Q=void 0===(h=_[3])?"50%":h,P=void 0===(u=_[4])?"50%":u,E=Cm(k,e),T=Cm(C,n);var $=[Cm(Q,e),Cm(P,n)];return x=Hv([{vertical:1,horizontal:1,pos:$,direction:"nesw"}],$x.slice(0,y?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[$[0]+t[0]*E,$[1]+t[1]*T]}})),!0),{type:O,clipText:f,radiusX:E,radiusY:T,left:$[0]-E,top:$[1]-T,poses:x,splitter:w}}if("inset"===O){var M=(_=dm(b||"0 0 0 0")).indexOf("round"),R=(M>-1?_.slice(0,M):_).length,A=_.slice(R+1),D=_.slice(0,R),W=D[0],j=D[1],Z=void 0===j?W:j,N=D[2],B=void 0===N?W:N,V=D[3],I=void 0===V?Z:V,X=[W,B].map((function(t){return Cm(t,n)})),U=X[0],q=X[1],z=[I,Z].map((function(t){return Cm(t,e)})),Y=z[0],L=z[1],G=e-L,F=n-q,H=_x(A,G-Y,F-U,Y,U);return{type:"inset",clipText:f,poses:x=Hv(Hv([],Ax(U,G,F,Y),!0),H,!0),top:U,left:Y,right:G,bottom:F,radius:A,splitter:w}}if("rect"===O){w=",";var K=(_=pm(b||"0px, ".concat(e,"px, ").concat(n,"px, 0px"))).map((function(t){return mm(t).value}));return{type:"rect",clipText:f,poses:x=Ax(U=K[0],L=K[1],q=K[2],Y=K[3]),top:U,right:L,bottom:q,left:Y,values:_,splitter:w}}}}var jx={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,o=n.clipArea,s=n.zoom,a=t.getState(),l=a.target,c=a.width,h=a.height,u=a.allMatrix,f=a.is3d,d=a.left,p=a.top,g=a.pos1,m=a.pos2,O=a.pos3,v=a.pos4,b=a.clipPathState,y=a.snapBoundInfos,w=a.rotation;if(!l)return[];var x=Wx(l,c,h,i||"inset",b||r);if(!x)return[];var S=f?4:3,k=x.type,C=x.poses.map((function(t){var e=ny(u,t.pos,S);return[e[0]-d,e[1]-p]})),Q=[],P=[],E="rect"===k,T="inset"===k,_="polygon"===k;if(E||T||_){var $=T?C.slice(0,8):C;P=$.map((function(t,n){var r=0===n?$[$.length-1]:$[n-1],i=_m(r,t),o=ly(r,t);return e.createElement("div",{key:"clipLine".concat(n),className:Xb("line","clip-line","snap-control"),"data-clip-index":n,style:{width:"".concat(o,"px"),transform:"translate(".concat(r[0],"px, ").concat(r[1],"px) rotate(").concat(i,"rad) scaleY(").concat(s,")")}})}))}if(Q=C.map((function(t,n){return e.createElement("div",{key:"clipControl".concat(n),className:Xb("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(w,"rad) scale(").concat(s,")")}})})),T&&Q.push.apply(Q,C.slice(8).map((function(t,n){return e.createElement("div",{key:"clipRadiusControl".concat(n),className:Xb("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(w,"rad) scale(").concat(s,")")}})}))),"circle"===k||"ellipse"===k){var M=x.left,R=x.top,A=x.radiusX,D=x.radiusY,W=BO(ny(u,[M,R],S),ny(u,[0,0],S)),j=W[0],Z=W[1],N="none";if(!o){for(var B=Math.max(10,A/5,D/5),V=[],I=0;I<=B;++I){var X=2*Math.PI/B*I;V.push([A+(A-s)*Math.cos(X),D+(D-s)*Math.sin(X)])}V.push([A,-2]),V.push([-2,-2]),V.push([-2,2*D+2]),V.push([2*A+2,2*D+2]),V.push([2*A+2,-2]),V.push([A,-2]),N="polygon(".concat(V.map((function(t){return"".concat(t[0],"px ").concat(t[1],"px")})).join(", "),")")}Q.push(e.createElement("div",{key:"clipEllipse",className:Xb("clip-ellipse","snap-control"),style:{width:"".concat(2*A,"px"),height:"".concat(2*D,"px"),clipPath:N,transform:"translate(".concat(-d+j,"px, ").concat(-p+Z,"px) ").concat(Jb(u))}}))}if(o){var U=iy(Hv([g,m,O,v],C,!0)),q=U.width,z=U.height,Y=U.left,L=U.top;(_||E||T)&&(V=T?C.slice(0,8):C,Q.push(e.createElement("div",{key:"clipArea",className:Xb("clip-area","snap-control"),style:{width:"".concat(q,"px"),height:"".concat(z,"px"),transform:"translate(".concat(Y,"px, ").concat(L,"px)"),clipPath:"polygon(".concat(V.map((function(t){return"".concat(t[0]-Y,"px ").concat(t[1]-L,"px")})).join(", "),")")}})))}return y&&["vertical","horizontal"].forEach((function(t){var n=y[t],r="horizontal"===t;n.isSnap&&P.push.apply(P,n.snap.posInfos.map((function(n,i){var o=n.pos,a=BO(ny(u,r?[0,o]:[o,0],S),[d,p]),l=BO(ny(u,r?[c,o]:[o,h],S),[d,p]);return Uw(e,"",a,l,s,"clip".concat(t,"snap").concat(i),"guideline")}))),n.isBound&&P.push.apply(P,n.bounds.map((function(n,i){var o=n.pos,a=BO(ny(u,r?[0,o]:[o,0],S),[d,p]),l=BO(ny(u,r?[c,o]:[o,h],S),[d,p]);return Uw(e,"",a,l,s,"clip".concat(t,"bounds").concat(i),"guideline","bounds","bold")})))})),Hv(Hv([],Q,!0),P,!0)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props.dragWithClip;return!(void 0===n||n)&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,Fv(Fv({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,s=n.target,a=n.width,l=n.height,c=e.inputEvent?e.inputEvent.target:null,h=c&&c.getAttribute("class")||"",u=e.datas,f=Wx(s,a,l,i||"inset",o);if(!f)return!1;var d=f.clipText;return!1===Cy(t,"onClipStart",xy(t,e,{clipType:f.type,clipStyle:d,poses:f.poses.map((function(t){return t.pos}))}))?(u.isClipStart=!1,!1):(u.isControl=h&&h.indexOf("clip-control")>-1,u.isLine=h.indexOf("clip-line")>-1,u.isArea=h.indexOf("clip-area")>-1||h.indexOf("clip-ellipse")>-1,u.clipIndex=c?parseInt(c.getAttribute("data-clip-index"),10):-1,u.clipPath=f,u.isClipStart=!0,n.clipPathState=d,xb(t,e),!0)},dragControl:function(t,e){var n,r=e.datas,i=e.originalDatas,o=e.isDragTarget;if(!r.isClipStart)return!1;var s=r,a=s.isControl,l=s.isLine,c=s.isArea,h=s.clipIndex,u=s.clipPath;if(!u)return!1;var f=uy(t.props,"clippable"),d=f.keepRatio,p=0,g=0,m=i.draggable,O=Pb(e);o&&m?(n=m.prevBeforeDist,p=n[0],g=n[1]):(p=O[0],g=O[1]);var v=[p,g],b=t.state,y=b.width,w=b.height,x=!c&&!a&&!l,S=u.type,k=u.poses,C=u.splitter,Q=k.map((function(t){return t.pos}));x&&(p=-p,g=-g);var P=!a||"nesw"===k[h].direction,E="inset"===S||"rect"===S,T=k.map((function(){return[0,0]}));if(a&&!P){var _=k[h],$=_.horizontal,M=_.vertical,R=[p*Math.abs($),g*Math.abs(M)];T=function(t,e,n,r,i){var o=t[e],s=o.direction,a=o.sub,l=t.map((function(){return[0,0]})),c=s?s.split(""):[];if(r&&e<8){var h=c.filter((function(t){return"w"===t||"e"===t})),u=c.filter((function(t){return"n"===t||"s"===t})),f=h[0],d=u[0];l[e]=n;var p=Dx(t),g=p[0],m=p[1],O=g&&m?g/m:0;if(O&&i){var v=t[(e+4)%8].pos,b=[0,0];s.indexOf("w")>-1?b[0]=-1:s.indexOf("e")>-1&&(b[0]=1),s.indexOf("n")>-1?b[1]=-1:s.indexOf("s")>-1&&(b[1]=1);var y=Xy([g,m],n,O,b,!0),w=g+y[0],x=m+y[1],S=v[1],k=v[1],C=v[0],Q=v[0];-1===b[0]?C=Q-w:1===b[0]?Q=C+w:(C-=w/2,Q+=w/2),-1===b[1]?S=k-x:k=1===b[1]?S+x:(S=k-x/2)+x;var P=Ax(S,Q,k,C);t.forEach((function(t,e){l[e][0]=P[e].pos[0]-t.pos[0],l[e][1]=P[e].pos[1]-t.pos[1]}))}else t.forEach((function(t,e){var r=t.direction;r&&(r.indexOf(f)>-1&&(l[e][0]=n[0]),r.indexOf(d)>-1&&(l[e][1]=n[1]))})),f&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),d&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else s&&!a?c.forEach((function(e){var r="n"===e||"s"===e;t.forEach((function(t,i){var o=t.direction,s=t.horizontal,a=t.vertical;o&&-1!==o.indexOf(e)&&(l[i]=[r||!s?0:n[0],r&&a?n[1]:0])}))})):l[e]=n;return l}(k,h,R,E,d)}else P&&(T=Q.map((function(){return[p,g]})));var A=Q.map((function(t,e){return NO(t,T[e])})),D=Hv([],A,!0);b.snapBoundInfos=null;var W="circle"===u.type,j="ellipse"===u.type;if(W||j){var Z=iy(A),N=Math.abs(Z.bottom-Z.top),B=Math.abs(j?Z.right-Z.left:N),V=A[0][1]+N,I=A[0][0]-B,X=A[0][0]+B;W&&(D.push([X,Z.bottom]),T.push([1,0])),D.push([Z.left,V]),T.push([0,1]),D.push([I,Z.bottom]),T.push([1,0])}var U=Rw((f.clipHorizontalGuidelines||[]).map((function(t){return Cm("".concat(t),w)})),(f.clipVerticalGuidelines||[]).map((function(t){return Cm("".concat(t),y)})),y,w),q=[],z=[];if(W||j)q=[D[4][0],D[2][0]],z=[D[1][1],D[3][1]];else if(E){var Y=[D[0],D[2],D[4],D[6]],L=[T[0],T[2],T[4],T[6]];q=Y.filter((function(t,e){return L[e][0]})).map((function(t){return t[0]})),z=Y.filter((function(t,e){return L[e][1]})).map((function(t){return t[1]}))}else q=D.filter((function(t,e){return T[e][0]})).map((function(t){return t[0]})),z=D.filter((function(t,e){return T[e][1]})).map((function(t){return t[1]}));var G=[0,0],F=Tw(U,f.clipTargetBounds&&{left:0,top:0,right:y,bottom:w},q,z,5),H=F.horizontal,K=F.vertical,J=H.offset,tt=K.offset;if(H.isBound&&(G[1]+=J),K.isBound&&(G[0]+=tt),(j||W)&&0===T[0][0]&&0===T[0][1]){var et=(Z=iy(A)).bottom-Z.top,nt=j?Z.right-Z.left:et;nt-=K.isBound?Math.abs(tt):0===K.snapIndex?-tt:tt,et-=H.isBound?Math.abs(J):0===H.snapIndex?-J:J,W&&(nt=et=aw(K,H)>0?et:nt);var rt=D[0];D[1][1]=rt[1]-et,D[2][0]=rt[0]+nt,D[3][1]=rt[1]+et,D[4][0]=rt[0]-nt}else if(E&&d&&a){var it=Dx(k),ot=it[0],st=it[1],at=ot&&st?ot/st:0,lt=k[h].direction||"",ct=D[1][1];V=D[5][1],I=D[7][0],X=D[3][0],J<=tt?J=tt/at:tt=J*at,lt.indexOf("w")>-1?I-=tt:lt.indexOf("e")>-1?X-=tt:(I+=tt/2,X-=tt/2),lt.indexOf("n")>-1?ct-=J:lt.indexOf("s")>-1?V-=J:(ct+=J/2,V-=J/2);var ht=Ax(ct,X,V,I);D.forEach((function(t,e){var n;n=ht[e].pos,t[0]=n[0],t[1]=n[1]}))}else D.forEach((function(t,e){var n=T[e];n[0]&&(t[0]-=tt),n[1]&&(t[1]-=J)}));var ut=Rx(t,u,A),ft="".concat(S,"(").concat(ut.join(C),")");if(b.clipPathState=ft,W||j?(q=[D[4][0],D[2][0]],z=[D[1][1],D[3][1]]):E?(q=(Y=[D[0],D[2],D[4],D[6]]).map((function(t){return t[0]})),z=Y.map((function(t){return t[1]}))):(q=D.map((function(t){return t[0]})),z=D.map((function(t){return t[1]}))),b.snapBoundInfos=Tw(U,f.clipTargetBounds&&{left:0,top:0,right:y,bottom:w},q,z,1),m){var dt=b.is3d,pt=b.allMatrix,gt=dt?4:3,mt=G;o&&(mt=[v[0]+G[0]-O[0],v[1]+G[1]-O[1]]),m.deltaOffset=ZO(pt,[mt[0],mt[1],0,0],gt)}return Cy(t,"onClip",xy(t,e,{clipEventType:"changed",clipType:S,poses:A,clipStyle:ft,clipStyles:ut,distX:p,distY:g})),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,o=r.isLine,s=r.isClipStart,a=r.isControl;return!!s&&(Cy(t,"onClipEnd",Sy(t,e,{})),i&&(a?function(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,o=r,s=o.type,a=o.poses,l=o.splitter,c=a.map((function(t){return t.pos})),h=c.length;if("polygon"===s)a.splice(i,1),c.splice(i,1);else{if("inset"!==s)return;if(i<8)return;if(function(t,e,n,r,i){void 0===i&&(i=e.length);var o=Tx(t.slice(8)),s=o.horizontalRange,a=o.verticalRange,l=n-8,c=0;if(0===l)c=i;else if(l>0&&l<s[1])c=s[1]-l;else{if(!(l>=a[0]))return;c=a[0]+a[1]-l}t.splice(n,c),e.splice(n,c)}(a,c,i,0,h),h===a.length)return}var u=Rx(t,r,c);Cy(t,"onClip",xy(t,e,{clipEventType:"removed",clipType:s,poses:c,clipStyles:u,clipStyle:"".concat(s,"(").concat(u.join(l),")"),distX:0,distY:0}))}(t,e):o&&function(t,e){var n=wb(t,e),r=n[0],i=n[1],o=e.datas,s=o.clipPath,a=o.clipIndex,l=s,c=l.type,h=l.poses,u=l.splitter,f=h.map((function(t){return t.pos}));if("polygon"===c)f.splice(a,0,[r,i]);else{if("inset"!==c)return;var d=kx.indexOf(a),p=Cx.indexOf(a),g=h.length;if(function(t,e,n,r,i,o,s,a,l,c,h){void 0===c&&(c=0),void 0===h&&(h=0);var u=Tx(t.slice(8)),f=u.horizontalRange,d=u.verticalRange;if(r>-1)for(var p=1===Qx[r]?o-c:a-o,g=f[1];g<=r;++g){var m=1===Px[g]?h:l,O=0;if(r===g?O=o:0===g?O=c+p:-1===Qx[g]&&(O=a-(e[8][0]-c)),t.splice(8+g,0,{horizontal:Qx[g],vertical:0,pos:[O,m]}),e.splice(8+g,0,[O,m]),0===g)break}else if(i>-1){var v=1===Px[i]?s-h:l-s;if(0===f[1]&&0===d[1]){var b=[c+v,h];t.push({horizontal:Qx[0],vertical:0,pos:b}),e.push(b)}var y=d[0];for(g=d[1];g<=i&&(O=1===Qx[g]?c:a,m=0,i===g?m=s:0===g?m=h+v:1===Px[g]?m=e[8+y][1]:-1===Px[g]&&(m=l-(e[8+y][1]-h)),t.push({horizontal:0,vertical:Px[g],pos:[O,m]}),e.push([O,m]),0!==g);++g);}}(h,f,0,d,p,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),g===h.length)return}var m=Rx(t,s,f);Cy(t,"onClip",xy(t,e,{clipEventType:"added",clipType:c,poses:f,clipStyles:m,clipStyle:"".concat(c,"(").concat(m.join(u),")"),distX:0,distY:0}))}(t,e)),i||n)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Zx={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:Dm(e.inputEvent.target,Xb("origin"))},dragControlStart:function(t,e){var n=e.datas;xb(t,e);var r=xy(t,e,{dragStart:Lw.dragStart(t,(new yb).dragStart([0,0],e))}),i=Cy(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,!1===i?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var o=Pb(e),s=o[0],a=o[1],l=t.state,c=l.width,h=l.height,u=l.offsetMatrix,f=l.targetMatrix,d=l.is3d,p=t.props.originRelative,g=void 0===p||p,m=d?4:3,O=[s,a];if(i){var v=e.distOrigin;(v[0]||v[1])&&(O=v)}var b=NO(n.startOrigin,O),y=NO(n.startTargetOrigin,O),w=BO(O,n.prevOrigin),x=_b(u,f,b,m),S=t.getRect(),k=iy(ry(x,c,h,m)),C=[S.left-k.left,S.top-k.top];n.prevOrigin=O;var Q=xy(t,e,{width:c,height:h,origin:b,dist:O,delta:w,transformOrigin:[Dy(y[0],c,g),Dy(y[1],h,g)].join(" "),drag:Lw.drag(t,bb(e,t.state,C,!!r,!1))});return Cy(t,"onDragOrigin",Q),Q},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(Cy(t,"onDragOriginEnd",Sy(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return!!n&&(t.transformOrigin=n.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=n.transformOrigin,s=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(s[0]+=t.deltaOrigin[0],s[1]+=t.deltaOrigin[1]):"origin"in t?(s[0]=t.origin[0]-o[0],s[1]=t.origin[1]-o[1]):("x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY)),{datas:e,distX:r,distY:i,distOrigin:s}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Nx(t,e,n,r,i,o){var s;if(void 0===r&&(r=[0,0]),i)s=i;else{var a=Qy(t);s=a&&a.borderRadius||""}return _x(!s||!i&&"0px"===s?[]:dm(s),e,n,0,0,r,o)}function Bx(t,e,n,r,i){var o=t.state,s=o.width,a=o.height,l=Ex(i,t.props.roundRelative,s,a),c=l.raws,h=l.styles,u=function(t,e){void 0===e&&(e=t.map((function(t){return t.raw})));var n=t.map((function(t,n){return t.horizontal?e[n]:null})).filter((function(t){return null!=t})),r=t.map((function(t,n){return t.vertical?e[n]:null})).filter((function(t){return null!=t}));return{horizontals:n,verticals:r}}(l.radiusPoses,c),f=u.horizontals,d=u.verticals,p=h.join(" ");o.borderRadiusState=p,Cy(t,"onRound",xy(t,e,Fv({horizontals:f,verticals:d,borderRadius:p,width:s,height:a,delta:r,dist:n},yy({borderRadius:p},e))))}var Vx={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean,roundPadding:Number,isDisplayShadowRoundControls:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n    z-index: 3;\n}",".control.border-radius.vertical {\n    background: #d6d;\n    z-index: 2;\n}",".control.border-radius.virtual {\n    opacity: 0.5;\n    z-index: 1;\n}",":host.round-line-clickable .line.direction {\n    cursor: pointer;\n}"],className:function(t){var e=t.props.roundClickable;return!0===e||"line"===e?Xb("round-line-clickable"):""},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,o=n.height,s=n.allMatrix,a=n.is3d,l=n.left,c=n.top,h=n.borderRadiusState,u=t.props,f=u.minRoundControls,d=void 0===f?[0,0]:f,p=u.maxRoundControls,g=void 0===p?[4,4]:p,m=u.zoom,O=u.roundPadding,v=void 0===O?0:O,b=u.isDisplayShadowRoundControls;if(!r)return null;var y=a?4:3,w=Nx(r,i,o,d,h,!0);if(!w)return null;var x=0,S=0;return w.map((function(t,n){var r=t.horizontal,i=t.vertical,o=t.direction||"",a=Hv([],t.pos,!0);S+=Math.abs(r),x+=Math.abs(i),r&&o.indexOf("n")>-1&&(a[1]-=v),i&&o.indexOf("w")>-1&&(a[0]-=v),r&&o.indexOf("s")>-1&&(a[1]+=v),i&&o.indexOf("e")>-1&&(a[0]+=v);var h=BO(ny(s,a,y),[l,c]),u=t.vertical?x<=g[1]&&(b||!t.virtual):S<=g[0]&&(b||!t.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(n),className:Xb("control","border-radius",t.vertical?"vertical":"",t.virtual?"virtual":""),"data-radius-index":n,style:{display:u?"block":"none",transform:"translate(".concat(h[0],"px, ").concat(h[1],"px) scale(").concat(m,")")}})}))},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,o=i.getAttribute("class")||"",s=o.indexOf("border-radius")>-1,a=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,l=s?parseInt(i.getAttribute("data-radius-index"),10):-1,c=-1;if(a){var h=i.getAttribute("data-line-key")||"";h&&(c=parseInt(h.replace(/render-line-/g,""),10),isNaN(c)&&(c=-1))}if(!s&&!a)return!1;if(!1===Cy(t,"onRoundStart",xy(t,e,{})))return!1;r.lineIndex=c,r.controlIndex=l,r.isControl=s,r.isLine=a,xb(t,e);var u=t.props,f=u.roundRelative,d=u.minRoundControls,p=void 0===d?[0,0]:d,g=t.state,m=g.target,O=g.width,v=g.height;r.isRound=!0,r.prevDist=[0,0];var b=Nx(m,O,v,p,"",!0)||[];return r.controlPoses=b,g.borderRadiusState=Ex(b,f,O,v).styles.join(" "),!0},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,o=Pb(e),s=o[0],a=o[1],l=[s,a],c=BO(l,n.prevDist),h=t.props.maxRoundControls,u=void 0===h?[4,4]:h,f=t.state,d=f.width,p=f.height,g=r[i],m=g.vertical,O=g.horizontal,v=r.map((function(t){var e=t.horizontal,n=t.vertical,r=[e*O*l[0],n*m*l[1]];if(e){if(1===u[0])return r;if(u[0]<4&&e!==O)return r}else{if(0===u[1])return r[1]=n*O*l[0]/d*p,r;if(m){if(1===u[1])return r;if(u[1]<4&&n!==m)return r}}return[0,0]}));v[i]=l;var b=r.map((function(t,e){return Fv(Fv({},t),{pos:NO(t.pos,v[e])})}));return i<4?b.slice(0,i+1).forEach((function(t){t.virtual=!1})):b.slice(4,i+1).forEach((function(t){t.virtual=!1})),n.prevDist=[s,a],Bx(t,e,l,c,b),!0},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var o=r.isControl,s=r.controlIndex,a=r.isLine,l=r.lineIndex,c=r.controlPoses,h=c.filter((function(t){return t.virtual})).length,u=t.props.roundClickable,f=void 0===u||u;if(i&&f){if(!o||!0!==f&&"control"!==f){if(a&&(!0===f||"line"===f)){var d=wb(t,e);!function(t,e,n,r){var i=t.filter((function(t){var e=t.virtual;return t.horizontal&&!e})).length,o=t.filter((function(t){var e=t.virtual;return t.vertical&&!e})).length,s=-1;if(0===e&&(0===i?s=0:1===i&&(s=1)),2===e&&(i<=2?s=2:i<=3&&(s=3)),3===e&&(0===o?s=4:o<4&&(s=7)),1===e&&(o<=1?s=5:o<=2&&(s=6)),-1!==s&&t[s].virtual){var a=t[s];!function(t,e){e<4?t.slice(0,e+1).forEach((function(t){t.virtual=!1})):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach((function(t){t.virtual=!1})))}(t,s),s<4?a.pos[0]=n:a.pos[1]=r}}(c,l,d[0],d[1])}}else!function(t,e){e<4?t.slice(e,4).forEach((function(t){t.virtual=!0})):t.slice(e).forEach((function(t){t.virtual=!0}))}(c,s);h!==c.filter((function(t){return t.virtual})).length&&Bx(t,e,[0,0],[0,0],c)}return Cy(t,"onRoundEnd",Sy(t,e,{})),n.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}},Ix={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.target,o=n.targetMatrix,s=null==i?void 0:i.style.transform,a=r?"matrix3d(".concat(o.join(","),")"):"matrix(".concat(VO(o,!0),")"),l=s&&"none"!==s?s:a;e.datas.startTransforms=function(t,e){var n=HO(e?4:3);return t==="matrix".concat(e?"3d":"","(").concat(n.join(","),")")||"matrix(1,0,0,1,0,0)"===t}(l,r)?[]:dm(l)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return xy(t,e,{setTransform:function(t){e.datas.startTransforms=sm(t)?t:dm(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return xy(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),Cy(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetStyle(e),Cy(t,"onBeforeRender",xy(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){Cy(t,"onBeforeRenderEnd",xy(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=zy(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.setTransform(r,t),n.resetStyle(t),n.fillDragStartParams(r,t)}));Cy(t,"onBeforeRenderGroupStart",xy(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=zy(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.resetStyle(t),n.fillDragParams(r,t)}));Cy(t,"onBeforeRenderGroup",xy(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),Cy(t,"onBeforeRenderGroupEnd",xy(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},Xx={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){Cy(t,"onRenderStart",xy(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){Cy(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){Cy(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){Cy(t,"onRenderGroupStart",xy(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=zy(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.fillDragParams(r,t)}));Cy(t,"onRenderGroup",xy(t,e,Fv(Fv({isPinch:!!e.isPinch,targets:t.props.targets,transform:jb(e)},yy(Zb(e))),{events:o})))},dragGroupEnd:function(t,e){var n=this,r=zy(t,"beforeRenderable",e),i=t.moveables,o=r.map((function(t,e){var r=i[e];return n.fillDragEndParams(r,t)}));Cy(t,"onRenderGroupEnd",xy(t,e,Fv({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o,transform:jb(e)},yy(Zb(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return xy(t,e,Fv({isPinch:!!e.isPinch,transform:jb(e)},yy(Zb(e))))},fillDragEndParams:function(t,e){return xy(t,e,Fv({isPinch:!!e.isPinch,isDrag:e.isDrag,transform:jb(e)},yy(Zb(e))))}};function Ux(t,e,n,r,i,o,s){var a="Start"===i,l=t.state.target,c=o.isRequest;if(!l||a&&r.indexOf("Control")>-1&&!c&&t.areaElement===o.inputEvent.target)return!1;var h="".concat(n).concat(r).concat(i),u="".concat(n).concat(r,"Condition"),f="End"===i,d="After"===i,p=a&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());p&&t.updateRect(i,!0,!1),""!==i||c||Ry(t.state,o);var g=Hv([],t[e],!0);if(c){var m=o.requestAble;g.some((function(t){return t.name===m}))||g.push.apply(g,t.props.ables.filter((function(t){return t.name===m})))}if(!g.length||g.every((function(t){return t.dragRelation})))return!1;var O=Hv(Hv([Ix],g,!0),[Xx],!1).filter((function(t){return t[h]})),v=o.datas;p&&O.forEach((function(e){e.unset&&e.unset(t)}));var b,y=o.inputEvent;f&&y&&(b=document.elementFromPoint(o.clientX,o.clientY)||y.target);var w=0,x=!1,S=function(){var t;x=!0,null===(t=o.stop)||void 0===t||t.call(o)},k=O.filter((function(e){var n=e.name,r=v[n]||(v[n]={});if(a&&(r.isEventStart=!e[u]||e[u](t,o)),r.isEventStart){var i=e[h](t,Fv(Fv({},o),{stop:S,resultCount:w,datas:r,originalDatas:v,inputTarget:b}));return t._emitter.off(),a&&!1===i&&(r.isEventStart=!1),w+=i?1:0,i}return!1})).length,C=!1;return a&&(x||O.length&&!k)&&(C=x||O.filter((function(t){var e=t.name;return!!v[e].isEventStart&&"strong"!==t.dragRelation})).length),(f||C)&&(t.state.gestos={},t.moveables&&t.moveables.forEach((function(t){t.state.gestos={}}))),p&&C&&O.forEach((function(e){e.unset&&e.unset(t)})),a&&!C&&!c&&k&&(null==o||o.preventDefault()),!t.isUnmounted&&!C&&((!a&&k&&!s||f)&&(t.props.flushSync||Ub)((function(){t.updateRect(f?i:"",!0,!1),t.forceUpdate()})),a||f||d||!k||s||Ux(t,e,n,r,i+"After",o),!0)}function qx(t){var e=t.props.dragTarget;return function(n){var r=n.inputEvent.target,i=t.areaElement;return e&&(r===e||e.contains(r))||r===i||!t.isMoveableElement(r)&&!t.controlBox.getElement().contains(r)||Dm(r,"moveable-area")||Dm(r,"moveable-padding")||Dm(r,"moveable-edgeDraggable")}}function zx(t,e,n){var r=t.controlBox.getElement(),i=[],o=t.props.dragTarget;return i.push(r),t.props.dragArea&&!o||i.push(e),Yx(t,i,"targetAbles",n,{dragStart:qx(t),pinchStart:qx(t)})}function Yx(t,e,n,r,i){void 0===i&&(i={});var o="targetAbles"===n,s=t.props,a=s.pinchOutside,l=s.pinchThreshold,c=s.preventClickEventOnDrag,h=s.preventClickDefault,u=s.checkInput,f={preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:l,pinchOutside:a,preventClickEventOnDrag:!!o&&c,preventClickEventOnDragStart:!!o&&h,preventClickEventByCondition:o?null:function(e){return t.controlBox.getElement().contains(e.target)},checkInput:!!o&&u},d=new Vv(e,f),p="Control"===r;return["drag","pinch"].forEach((function(e){["Start","","End"].forEach((function(o){d.on("".concat(e).concat(o),(function(s){var a,l=s.eventType;(!i[l]||i[l](s))&&Ux(t,n,e,r,o,s)?(t.props.stopPropagation||"Start"===o&&p)&&(null===(a=null==s?void 0:s.inputEvent)||void 0===a||a.stopPropagation()):s.stop()}))}))})),d}var Lx=function(){function t(t,e,n){var r=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(t){var e=r.eventName,n=r.moveable;n.state.disableNativeEvent||r.ables.forEach((function(r){r[e](n,{inputEvent:t})}))},t.addEventListener(n.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function Gx(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}function Fx(t,e,n){for(var r,i,o,s=t,a=[],l=!n&&t===e||t===document.body,c=l,h=!1,u=3,f=!1,d=Lb(e,e,!0).offsetParent;s&&!c;){c=l;var p=getComputedStyle(s),g=p.position,m=(z=Yb(s,p),U=z&&"none"!==z?om(z)?z:ev(z):[1,0,0,1,0,0],void 0===(q=void 0)&&(q=6===U.length),q?[U[0],U[1],0,U[2],U[3],0,U[4],U[5],1]:U),O="fixed"===g,v={hasTransform:!1,fixedContainer:null};O&&(f=!0,d=(v=Kb(s)).fixedContainer);var b=m.length;h||16!==b||(h=!0,u=4,Hb(a),o&&(o=WO(o,3,4))),h&&9===b&&(m=WO(m,3,4));var y=Gb(s,t,p),w=y.tagName,x=y.hasOffset,S=y.isSVG,k=y.origin,C=y.targetOrigin,Q=y.offset,P=Q[0],E=Q[1];"svg"===w&&o&&(a.push({type:"target",target:s,matrix:ey(s,u)}),a.push({type:"offset",target:s,matrix:HO(u)}));var T=void 0,_=!1,$=!1;if(O)T=v.fixedContainer,_=!0;else{var M=Lb(s,e);if(T=M.offsetParent,_=M.isEnd,$=M.isStatic,ib&&M.parentSlotElement){for(var R=T,A=0,D=0;R&&Gx(R);)A+=R.offsetLeft,D+=R.offsetTop,R=R.offsetParent;P-=A,E-=D}}!nb||ob||!x||S||!$||"relative"!==g&&"static"!==g||(P-=T.offsetLeft,E-=T.offsetTop,l=l||_);var W=0,j=0,Z=0,N=0;if(O)x&&v.hasTransform&&(Z=T.clientLeft,N=T.clientTop);else if(x&&d!==T&&(W=T.clientLeft,j=T.clientTop),x&&T===document.body){var B=Fb(s,!1,p);P+=B[0],E+=B[1]}if(a.push({type:"target",target:s,matrix:qb(m,u,k)}),x){var V=s===t,I=V?0:s.scrollLeft,X=V?0:s.scrollTop;a.push({type:"offset",target:s,matrix:JO([P-I+W-Z,E-X+j-N],u)})}else a.push({type:"offset",target:s,origin:k});if(o||(o=m),r||(r=k),i||(i=C),c||O)break;s=T,l=_,n&&s!==document.body||(c=l)}var U,q,z;return o||(o=HO(u)),r||(r=[0,0]),i||(i=[0,0]),{offsetContainer:d,matrixes:a,targetMatrix:o,transformOrigin:r,targetOrigin:i,is3d:h,hasFixed:f}}function Hx(t,e,n,r){void 0===n&&(n=e);var i=0,o=0,s=0,a={},l=fy(t);if(t&&(i=l.offsetWidth,o=l.offsetHeight),t){var c=function(t,e,n,r){var i;void 0===n&&(n=e);var o=Fx(t,e),s=o.matrixes,a=o.is3d,l=o.targetMatrix,c=o.transformOrigin,h=o.targetOrigin,u=o.offsetContainer,f=o.hasFixed,d=Fx(u,n,!0),p=d.matrixes,g=d.is3d,m=d.offsetContainer,O=r||g||a,v=O?4:3,b="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,y=l,w=HO(v),x=HO(v),S=HO(v),k=HO(v),C=s.length;p.reverse(),s.reverse(),!a&&O&&(y=WO(y,3,4),Hb(s)),!g&&O&&Hb(p),p.forEach((function(t){x=ZO(x,t.matrix,v)}));var Q=n||document.body,P=(null===(i=p[0])||void 0===i?void 0:i.target)||Lb(Q,Q,!0).offsetParent,E=p.slice(1).reduce((function(t,e){return ZO(t,e.matrix,v)}),HO(v));s.forEach((function(t,e){if(C-2===e&&(S=w.slice()),C-1===e&&(k=w.slice()),!t.matrix){var n=function(t,e,n,r,i){var o,s=t.target,a=t.origin,l=e.matrix,c=fy(s),h=c.offsetWidth,u=c.offsetHeight,f=n.getBoundingClientRect(),d=[0,0];n===document.body&&(d=Fb(s,!0));for(var p=s.getBoundingClientRect(),g=p.left-f.left+n.scrollLeft-(n.clientLeft||0)+d[0],m=p.top-f.top+n.scrollTop-(n.clientTop||0)+d[1],O=p.width,v=p.height,b=jO(r,i,l),y=oy(b,h,u,r),w=y.left,x=y.top,S=y.width,k=y.height,C=ny(b,a,r),Q=BO(C,[w,x]),P=[g+Q[0]*O/S,m+Q[1]*v/k],E=[0,0],T=0;++T<10;){var _=RO(i,r);o=BO(ny(_,P,r),ny(_,C,r)),E[0]=o[0],E[1]=o[1];var $=oy(jO(r,i,JO(E,r),l),h,u,r),M=$.left-g,R=$.top-m;if(Math.abs(M)<2&&Math.abs(R)<2)break;P[0]-=M,P[1]-=R}return E.map((function(t){return Math.round(t)}))}(t,s[e+1],P,v,ZO(E,w,v));t.matrix=JO(n,v)}w=ZO(w,t.matrix,v)}));var T=!b&&a;y||(y=HO(T?4:3));var _=Jb(b&&16===y.length?WO(y,4,3):y,T);return{hasFixed:f,rootMatrix:x=MO(x,v,v),beforeMatrix:S,offsetMatrix:k,allMatrix:w,targetMatrix:y,targetTransform:_,transformOrigin:c,targetOrigin:h,is3d:O,offsetContainer:u,offsetRootContainer:m}}(t,e,n,r),h=sy(c.allMatrix,c.transformOrigin,i,o);a=Fv(Fv({},c),h);var u=sy(c.allMatrix,[50,50],100,100);s=dy([u.pos1,u.pos2],u.direction)}var f=r?4:3;return Fv(Fv(Fv({width:i,height:o,rotation:s},l),{rootMatrix:HO(f),beforeMatrix:HO(f),offsetMatrix:HO(f),allMatrix:HO(f),targetMatrix:HO(f),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),a)}function Kx(t,e,n,r,i){var o=1,s=[0,0],a={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},h={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},u=Hx(e,n,i,!0);if(e){var f=u.is3d?4:3,d=sy(u.offsetMatrix,NO(u.transformOrigin,AO(u.targetMatrix,f)),u.width,u.height);o=d.direction,s=NO(d.origin,[d.left-u.left,d.top-u.top]),a=py(e),c=py(Lb(r,r,!0).offsetParent||u.offsetRootContainer,!0),h=py(u.offsetRootContainer),t&&(l=py(t))}return Fv({targetClientRect:a,containerClientRect:c,moveableClientRect:l,rootContainerClientRect:h,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:e},u)}var Jx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=Fv({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},Kx(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new Sv,e._prevTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._observer=null,e._observerId=0,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;t?t.checkUpdateRect():(Sm(e._observerId),e._observerId=xm((function(){e.isDragging()||e.updateRect()})))}},e._onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e}Gv(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=this.getState(),n=t.parentPosition,r=t.className,i=t.target,o=t.zoom,s=t.cspNonce,a=t.translateZ,l=t.cssStyled,c=t.portalContainer,h=t.groupable;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var u=n||[0,0],f=u[0],d=u[1],p=e.left,g=e.top,m=e.target,O=e.direction,v=e.hasFixed,b=t.targets,y=(b&&b.length||i)&&(m||h),w=this.isDragging(),x={};this.getEnabledAbles().forEach((function(t){x["data-able-".concat(t.name.toLowerCase())]=!0}));var S=this._getAbleClassName();return Km(l,Fv({cspNonce:s,ref:Vg(this,"controlBox"),className:"".concat(Xb("control-box",-1===O?"reverse":"",w?"dragging":"")," ").concat(S," ").concat(r)},x,{onClick:this._onPreventClick,portalContainer:c,style:{position:v?"fixed":"absolute",display:y?"block":"none",visibility:this.controlBox||this.props.firstRenderState?"visible":"hidden",transform:"translate3d(".concat(p-f,"px, ").concat(g-d,"px, ").concat(a,")"),"--zoom":o,"--zoompx":"".concat(o,"px")}}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container,r=t.wrapperMoveable;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),n||e||r||(this.updateRect("",!1,!0),this.forceUpdate())},n.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},n.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),this._viewContainer&&this._changeAbleViewClassNames([]),by(this,"targetGesto"),by(this,"controlGesto");var t=this.events;for(var e in t){var n=t[e];n&&n.destroy()}},n.getTargets=function(){var t=this.props.target;return t?[t]:[]},n.getAble=function(t){return wm(this.props.ables||[],(function(e){return e.name===t}))},n.getContainer=function(){var t=this.props,e=t.parentMoveable,n=t.wrapperMoveable;return t.container||n&&n.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){var e;return t&&((null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"class"))||"").indexOf(sb)>-1},n.dragStart=function(t){var e=this.targetGesto,n=this.controlGesto;return e&&qx(this)({inputEvent:t})?e.isFlag()||e.triggerDragStart(t):n&&this.isMoveableElement(t.target)&&(n.isFlag()||n.triggerDragStart(t)),this},n.hitTest=function(t){var e,n=this.state,r=n.target,i=n.pos1,o=n.pos2,s=n.pos3,a=n.pos4,l=n.targetClientRect;if(!r)return 0;if(t instanceof Element){var c=t.getBoundingClientRect();e={left:c.left,top:c.top,width:c.width,height:c.height}}else e=Fv({width:0,height:0},t);var h=e.left,u=e.top,f=e.width,d=e.height,p=dv([i,o,a,s],l),g=fv(yv(p,[[h,u],[h+f,u],[h+f,u+d],[h,u+d]])),m=fv(p);return g&&m?Math.min(100,g/m*100):0},n.isInside=function(t,e){var n=this.state,r=n.target,i=n.pos1,o=n.pos2,s=n.pos3,a=n.pos4,l=n.targetClientRect;return!!r&&gv([t,e],dv([i,o,a,s],l))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props.parentMoveable,i=this.state.target||this.props.target,o=this.getContainer(),s=r?r._rootContainer:this._rootContainer;this.updateState(Kx(this.controlBox&&this.controlBox.getElement(),i,o,o,s||o),!r&&n)},n.isDragging=function(t){var e,n,r=this.targetGesto,i=this.controlGesto;return(null==r?void 0:r.isFlag())?!t||!!(null===(e=r.getEventData()[t])||void 0===e?void 0:e.isEventStart):!(!(null==i?void 0:i.isFlag())||t&&!(null===(n=i.getEventData()[t])||void 0===n?void 0:n.isEventStart))},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=vy(this.state),n=e[0],r=e[1],i=e[2],o=e[3],s=iy(e),a=t.width,l=t.height,c=s.width,h=s.height,u=s.left,f=s.top,d=[t.left,t.top],p=NO(d,t.origin);return{width:c,height:h,left:u,top:f,pos1:n,pos2:r,pos3:i,pos4:o,offsetWidth:a,offsetHeight:l,beforeOrigin:NO(d,t.beforeOrigin),origin:p,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},n.getManager=function(){return this},n.getRotation=function(){var t,e,n,r,i=this.state;return t=i.pos1,e=i.pos2,n=i.direction,r=_m(t,e)/Math.PI*180,(r=n>=0?r:180-r)>=0?r:360+r},n.request=function(t,e,n){void 0===e&&(e={});var r=this.props,i=r.ables,o=r.groupable,s=i.filter((function(e){return e.name===t}))[0];if(this.isDragging()||!s||!s.request)return{request:function(){return this},requestEnd:function(){return this}};var a=this,l=s.request(this),c=n||e.isInstant,h=l.isControl?"controlAbles":"targetAbles",u="".concat(o?"Group":"").concat(l.isControl?"Control":""),f={request:function(e){return Ux(a,h,"drag",u,"",Fv(Fv({},l.request(e)),{requestAble:t,isRequest:!0}),c),this},requestEnd:function(){return Ux(a,h,"drag",u,"End",Fv(Fv({},l.requestEnd()),{requestAble:t,isRequest:!0}),c),this}};return Ux(a,h,"drag",u,"Start",Fv(Fv({},l.requestStart(e)),{requestAble:t,isRequest:!0}),c),c?f.request(e).requestEnd():f},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var t=this.getState(),e=this.props,n=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,s=t.pos1,a=t.pos2,l=t.pos3,c=t.pos4,h=t.left,u=t.top,f=e.padding||{},d=f.left,p=void 0===d?0:d,g=f.top,m=void 0===g?0:g,O=f.bottom,v=void 0===O?0:O,b=f.right,y=void 0===b?0:b,w=o?4:3,x=this.controlBox&&e.groupable?n:NO(n,[h,u]);t.renderPoses=[NO(s,Ay(i,[-p,-m],r,x,w)),NO(a,Ay(i,[y,-m],r,x,w)),NO(l,Ay(i,[-p,v],r,x,w)),NO(c,Ay(i,[y,v],r,x,w))]},n.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,e=t.target,n=t.container,r=t.parentMoveable,i=this.state,o=i.target,s=i.container;if(o||e){this.updateAbles();var a=!Ey(o,e);if(a||!Ey(s,n)){var l=n||this.controlBox;l&&this.unsetAbles(),this.updateState({target:e,container:n}),!r&&l&&this.updateRect("End",!1,!1),this._isPropTargetChanged=a}}},n.waitToChangeTarget=function(){return new Promise((function(){}))},n.triggerEvent=function(t,e){this._emitter.trigger(t,e);var n=this.props[t];return n&&n(e)},n.useCSS=function(t,e){var n=this.props.customStyledMap,r=t+e;return n[r]||(n[r]=Yv(t,e)),n[r]},n.getState=function(){var t=this.props.firstRenderState;return t&&!this.controlBox?t:this.state},n.updateSelectors=function(){},n.unsetAbles=function(){var t=this;this.targetAbles.forEach((function(e){e.unset&&e.unset(t)}))},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=n.triggerAblesSimultaneously,i=t.filter((function(t){return t&&(t.always&&!1!==n[t.name]||n[t.name])})),o="drag".concat(e,"Start"),s="pinch".concat(e,"Start"),a="drag".concat(e,"ControlStart"),l=Py(i,[o,s],r),c=Py(i,[a],r);this.enabledAbles=i,this.targetAbles=l,this.controlAbles=c},n.updateState=function(t,e){if(e){if(this.isUnmounted)return;this.setState(t)}else{var n=this.state;for(var r in t)n[r]=t[r]}},n.getEnabledAbles=function(){var t=this.props;return t.ables.filter((function(e){return e&&t[e.name]}))},n.renderAbles=function(){var t,e,n,r,i=this,o=this.props.triggerAblesSimultaneously,s={createElement:Km};return this.renderState={},(t=_y(Py(this.getEnabledAbles(),["render"],o).map((function(t){return(0,t.render)(i,s)||[]}))).filter((function(t){return t})),e=function(t){return t.key},n=[],r={},t.forEach((function(t,i){var o=e(t),s=r[o];s||(s=[],r[o]=s,n.push(s)),s.push(t)})),n).map((function(t){return t[0]}))},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._updateObserver=function(t){var e,n=this.props,r=n.target;if(window.ResizeObserver&&r&&n.useResizeObserver){if(t.target!==r||!this._observer){var i=new ResizeObserver(this.checkUpdateRect);i.observe(r,{box:"border-box"}),this._observer=i}}else null===(e=this._observer)||void 0===e||e.disconnect()},n._updateEvents=function(){var t=this.controlBox.getElement(),e=this.targetAbles.length,n=this.controlAbles.length,r=this.props,i=r.dragTarget||r.target;(!e&&this.targetGesto||this._isTargetChanged(!0))&&(by(this,"targetGesto"),this.updateState({gesto:null})),n||by(this,"controlGesto"),i&&e&&!this.targetGesto&&(this.targetGesto=zx(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=Yx(this,t,"controlAbles","Control"))},n._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},n._renderLines=function(){var t=this.props,e=t.zoom,n=t.hideDefaultLines,r=t.hideChildMoveableDefaultLines,i=t.parentMoveable;if(n||i&&r)return[];var o=this.getState().renderPoses,s={createElement:Km};return[[0,1],[1,3],[3,2],[2,0]].map((function(t,n){var r=t[0],i=t[1];return Uw(s,"",o[r],o[i],e,"render-line-".concat(n))}))},n._isTargetChanged=function(t){var e=this.props,n=e.dragTarget||e.target,r=this._prevTarget,i=this._prevDragArea,o=e.dragArea;return!o&&r!==n||(t||o)&&i!==o},n._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,n=this.events,r=km(n);if(this._isTargetChanged())for(var i in n){var o=n[i];o&&o.destroy(),n[i]=null}if(e){var s=this.enabledAbles;r.forEach((function(r){var i=Py(s,[r]),o=i.length>0,a=n[r];o?(a||(a=new Lx(e,t,r),n[r]=a),a.setAbles(i)):a&&(a.destroy(),n[r]=null)}))}},n._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=By(t,!0))},n._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=By(t,!0)),this._viewContainer&&this._changeAbleViewClassNames(Hv(Hv([],this._getAbleViewClassNames(),!0),[this.isDragging()?dx:""],!1))},n._changeAbleViewClassNames=function(t){var e=this._viewContainer,n=Ty(t.filter(Boolean),(function(t){return t})).map((function(t){return t[0]})),r=this._viewClassNames,i=Gg(r,n),o=i.removed,s=i.added;o.forEach((function(t){jm(e,r[t])})),s.forEach((function(t){Wm(e,n[t])})),this._viewClassNames=n},n._getAbleViewClassNames=function(){var t=this;return this.getEnabledAbles().map((function(e){var n;return(null===(n=e.viewClassName)||void 0===n?void 0:n.call(e,t))||""})).join(" ").split(/\s+/g)},n._getAbleClassName=function(){var t=this,e=this.getEnabledAbles(),n=this.targetGesto,r=this.controlGesto,i=(null==n?void 0:n.isFlag())?n.getEventData():{},o=(null==r?void 0:r.isFlag())?r.getEventData():{};return e.map((function(e){var n,r,s,a=e.name,l=(null===(n=e.className)||void 0===n?void 0:n.call(e,t))||"";return((null===(r=i[a])||void 0===r?void 0:r.isEventStart)||(null===(s=o[a])||void 0===s?void 0:s.isEventStart))&&(l+=" ".concat(Xb("".concat(a,"-dragging")))),l.trim()})).filter(Boolean).join(" ")},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Ub,firstRenderState:null,viewContainer:null},e}(cO),tS={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,targetGroups:Object,hideChildMoveableDefaultLines:Boolean},events:{},render:function(t,e){var n=t.props.targets||[];t.moveables=[];var r=t.state,i=[r.left,r.top],o=t.props,s=o.zoom||1,a=t.renderGroupRects;return Hv(Hv([],n.map((function(n,r){return e.createElement(Jx,{key:"moveable"+r,ref:Ig(t,"moveables",r),target:n,origin:!1,cssStyled:o.cssStyled,customStyledMap:o.customStyledMap,useResizeObserver:o.useResizeObserver,hideChildMoveableDefaultLines:o.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:i,zoom:s})})),!0),_y(a.map((function(t,n){var r=[t.pos1,t.pos2,t.pos3,t.pos4];return[[0,1],[1,3],[3,2],[2,0]].map((function(t,o){var a=t[0],l=t[1];return Uw(e,"",BO(r[a],i),BO(r[l],i),s,"group-rect-".concat(n,"-").concat(o))}))}))),!0)}},eS=Kv("clickable",{props:{clickable:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.getElement().contains(i);if(r&&i&&!e.isDrag&&!t.isMoveableElement(i)&&!o){var s=n.contains(i);Cy(t,"onClick",xy(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:s}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(n&&r&&!e.isDrag&&!t.isMoveableElement(r)&&e.datas.inputTarget!==r){var i=t.props.targets,o=i.indexOf(r),s=o>-1,a=!1;-1===o&&(a=(o=ym(i,(function(t){return t.contains(r)})))>-1),Cy(t,"onClickGroup",xy(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:o,isTarget:s,containsTarget:a,moveableTarget:i[o]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function nS(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),Fv(Fv({},t),{datas:e})}var rS=Kv("edgeDraggable",{css:[".edge.edgeDraggable.line {\n    cursor: move;\n}"],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?qw(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return Dm(n,Xb("direction"))&&Dm(n,Xb("edge"))&&Dm(n,Xb("edgeDraggable"))},dragControlStart:function(t,e){return t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Lw.dragStart(t,nS(e))},dragControl:function(t,e){return Lw.drag(t,nS(e))},dragControlEnd:function(t,e){return Lw.dragEnd(t,nS(e))},dragGroupControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;var n=e.inputEvent.target;return Dm(n,Xb("direction"))&&Dm(n,Xb("line"))},dragGroupControlStart:function(t,e){return Lw.dragGroupStart(t,nS(e))},dragGroupControl:function(t,e){return Lw.dragGroup(t,nS(e))},dragGroupControlEnd:function(t,e){return Lw.dragGroupEnd(t,nS(e))},unset:function(t){return Lw.unset(t)}}),iS={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},oS=[Ix,yx,Vw,qy,Lw,rS,Fw,sx,cx,ix,bx,wx,Ox,Zx,jx,Vx,tS,iS,eS,mx,Xx],sS=oS.reduce((function(t,e){return Fv(Fv({},t),"events"in e?e.events:{})}),{}),aS=oS.reduce((function(t,e){return Fv(Fv({},t),e.props)}),{}),lS=Ny(sS),cS=Object.keys(lS),hS=Object.keys(aS);function uS(t,e){var n=t[0],r=t[1],i=t[2];return(n*e[0]+r*e[1]+i)/Math.sqrt(n*n+r*r)}function fS(t,e){var n=t[0],r=t[1];return-n*e[0]-r*e[1]}function dS(t,e){return Math.max.apply(Math,t.map((function(t){var n=t[0],r=t[1],i=t[2],o=t[3];return Math.max(n[e],r[e],i[e],o[e])})))}function pS(t,e){return Math.min.apply(Math,t.map((function(t){var n=t[0],r=t[1],i=t[2],o=t[3];return Math.min(n[e],r[e],i[e],o[e])})))}function gS(t,e){var n=e.map((function(e){if(sm(e)){var n=gS(t,e),r=n.length;return r>1?n:1===r?n[0]:null}var i=wm(t,(function(t){return t.manager.props.target===e}));return i?(i.finded=!0,i.manager):null})).filter(Boolean);return 1===n.length&&sm(n[0])?n[0]:n}var mS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new hv,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e}Gv(e,t);var n=e.prototype;return n.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},n.getTargets=function(){return this.props.targets},n.updateRect=function(t,e,n){if(void 0===n&&(n=!0),this.controlBox){this.moveables.forEach((function(e){e.updateRect(t,!1,!1)}));var r=this.state,i=this.props,o=this.moveables,s=r.target||i.target,a=o.map((function(t){return{finded:!1,manager:t}})),l=gS(a,this.props.targetGroups||[]);l.push.apply(l,a.filter((function(t){return!t.finded})).map((function(t){return t.manager})));var c=[],h=!e||""!==t&&i.updateGroup,u=function t(e,n,r){var o,s=e.map((function(e){if(sm(e)){var r=t(e,n),i=[r.pos1,r.pos2,r.pos3,r.pos4];return c.push(r),{poses:i,rotation:r.rotation}}return{poses:vy(e.state),rotation:e.getRotation()}})),a=s.map((function(t){return t.rotation})),l=a[0],u=a.every((function(t){return Math.abs(l-t)<.1}));o=h?u?l:i.defaultGroupRotate||0:!r&&u?l:n;var f=s.map((function(t){return t.poses})),d=function(t,e){var n,r=[0,0],i=[0,0],o=[0,0],s=[0,0],a=0,l=0;if(!t.length)return{pos1:r,pos2:i,pos3:o,pos4:s,minX:0,minY:0,width:a,height:l,rotation:e};var c=Rm(e,cb);if(c%90){var h=c/180*Math.PI,u=Math.tan(h),f=-1/u,d=[ub,fb],p=[[0,0],[0,0]],g=[ub,fb],m=[[0,0],[0,0]];t.forEach((function(t){t.forEach((function(t){var e=uS([-u,1,0],t),n=uS([-f,1,0],t);d[0]>e&&(p[0]=t,d[0]=e),d[1]<e&&(p[1]=t,d[1]=e),g[0]>n&&(m[0]=t,g[0]=n),g[1]<n&&(m[1]=t,g[1]=n)}))}));var O=p[0],v=p[1],b=m[0],y=m[1],w=[-u,1,fS([-u,1],O)],x=[-u,1,fS([-u,1],v)],S=[-f,1,fS([-f,1],b)],k=[-f,1,fS([-f,1],y)];r=(n=[[w,S],[w,k],[x,S],[x,k]].map((function(t){return Ov(t[0],t[1])[0]})))[0],i=n[1],o=n[2],s=n[3],a=g[1]-g[0],l=d[1]-d[0]}else{var C,Q=pS(t,0),P=pS(t,1),E=dS(t,0),T=dS(t,1);r=[Q,P],i=[E,P],o=[Q,T],s=[E,T],a=E-Q,l=T-P,c%180&&(r=(C=[o,r,s,i])[0],i=C[1],o=C[2],s=C[3],a=T-P,l=E-Q)}c%360>180&&(r=(C=[s,o,i,r])[0],i=C[1],o=C[2],s=C[3]);var _=pv([r,i,o,s]);return{pos1:r,pos2:i,pos3:o,pos4:s,width:a,height:l,minX:_.minX,minY:_.minY,rotation:e}}(f,o);return d}(l,this.rotation,!0);h&&(this.rotation=u.rotation,this.transformOrigin=i.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this.renderGroupRects=c;var f=this.rotation,d=this.scale,p=u.width,g=u.height,m=u.minX,O=u.minY,v="rotate(".concat(f,"deg) scale(").concat(d[0]>=0?1:-1,", ").concat(d[1]>=0?1:-1,")");s.style.cssText+="left:0px;top:0px; transform-origin: ".concat(this.transformOrigin,"; width:").concat(p,"px; height:").concat(g,"px;")+"transform:".concat(v),r.width=p,r.height=g;var b=this.getContainer(),y=Kx(this.controlBox.getElement(),s,this.controlBox.getElement(),this.getContainer(),this._rootContainer||b),w=[y.left,y.top],x=vy(y),S=x[0],k=x[1],C=x[2],Q=x[3],P=pv([S,k,C,Q]),E=[P.minX,P.minY];y.pos1=BO(S,E),y.pos2=BO(k,E),y.pos3=BO(C,E),y.pos4=BO(Q,E),y.left=m-y.left+E[0],y.top=O-y.top+E[1],y.origin=BO(NO(w,y.origin),E),y.beforeOrigin=BO(NO(w,y.beforeOrigin),E),y.originalBeforeOrigin=NO(w,y.originalBeforeOrigin);var T=y.targetClientRect,_=d[0]*d[1]>0?1:-1;T.top+=y.top-r.top,T.left+=y.left-r.left,s.style.transform="translate(".concat(-E[0],"px, ").concat(-E[1],"px) ").concat(v),this.updateState(Fv(Fv({},y),{direction:_,beforeDirection:_}),n)}},n.getRect=function(){return Fv(Fv({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},n.triggerEvent=function(e,n,r){if(r||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,n);this._emitter.trigger(e,n)},n.updateAbles=function(){t.prototype.updateAbles.call(this,Hv(Hv([],this.props.ables,!0),[tS],!1),"Group")},n._updateTargets=function(){t.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},n._updateEvents=function(){var t=this.state,e=this.props,n=this._prevTarget,r=e.dragTarget||this.areaElement;n!==r&&(by(this,"targetGesto"),by(this,"controlGesto"),t.target=null),t.target||(t.target=this.areaElement,this.controlBox.getElement().style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=zx(this,r,"Group")),this.controlGesto||(this.controlGesto=Yx(this,this.controlBox.getElement(),"controlAbles","GroupControl")));var i=!Ey(t.container,e.container);i&&(t.container=e.container);var o=this.differ.update(e.targets),s=o.added,a=o.changed,l=o.removed,c=s.length||l.length;(i||c||a.length)&&this.updateRect(),this._isPropTargetChanged=!!c},n._updateObserver=function(){},e.defaultProps=Fv(Fv({},Jx.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Jx),OS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}Gv(e,t);var n=e.prototype;return n.render=function(){var t=this,e=this.props,n=e.cspNonce,r=e.cssStyled,i=e.targets;return Km(r,{cspNonce:n,ref:Vg(this,"controlBox"),className:Xb("control-box")},i.map((function(e,n){return Km(Jx,Fv({key:"moveable"+n,ref:Ig(t,"moveables",n)},t.props,{target:e,wrapperMoveable:t}))})))},n.componentDidUpdate=function(){},n.getTargets=function(){return this.props.targets},n.updateRect=function(t,e,n){void 0===n&&(n=!0),this.moveables.forEach((function(r){r.updateRect(t,e,n)}))},n.getRect=function(){return Fv(Fv({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},e}(Jx);function vS(t,e){var n=[];return t.forEach((function(t){t&&(am(t)?e[t]&&n.push.apply(n,e[t]):sm(t)?n.push.apply(n,vS(t,e)):n.push(t))})),n}function bS(t,e){var n=[];return t.forEach((function(t){t&&(am(t)?e[t]&&n.push.apply(n,e[t]):sm(t)?n.push(bS(t,e)):n.push(t))})),n}function yS(t,e){return t.length!==e.length||t.some((function(t,n){var r=e[n];return!(!t&&!r)&&t!=r&&(!sm(t)||!sm(r)||yS(t,r))}))}var wS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new hv,e._elementTargets=[],e._onChangetarget=null,e}Gv(e,t);var n,r,i=e.prototype;return e.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(e){var n=e.css;n&&n.forEach((function(e){t[e]=!0}))}));var e=km(t).join("\n");this.defaultStyled=Yv("div",function(t,e){return e.replace(/([^}{]*){/gm,(function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,".moveable-$1")+"{"}))}(0,ab+e))},e.getTotalAbles=function(){return Hv([yx,tS,iS,mx],this.defaultAbles,!0)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var e=this.props,n=e.ables,r=e.props,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(e,["ables","props"]),o=this._updateRefs(!0),s=vS(o,this.selectorMap),a=s.length>1,l=Hv(Hv([],t.getTotalAbles(),!0),n||[],!0),c=Fv(Fv(Fv({},i),r||{}),{ables:l,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});this._elementTargets=s;var h=null,u=this.moveable;if(a){if(i.individualGroupable)return Km(OS,Fv({key:"individual-group",ref:Vg(this,"moveable")},c,{target:null,targets:s}));var f=bS(o,this.selectorMap);if(u&&!u.props.groupable&&!u.props.individualGroupable){var d=u.props.target;d&&s.indexOf(d)>-1&&(h=Fv({},u.state))}return Km(mS,Fv({key:"group",ref:Vg(this,"moveable")},c,{target:null,targets:s,targetGroups:f,firstRenderState:h}))}var p=s[0];if(u&&(u.props.groupable||u.props.individualGroupable)){var g=wm(u.moveables||[],(function(t){return t.props.target===p}));g&&(h=Fv({},g.state))}return Km(Jx,Fv({key:"single",ref:Vg(this,"moveable")},c,{target:p,firstRenderState:h}))},i.componentDidMount=function(){this._updateRefs()},i.componentDidUpdate=function(){var t=this._differ.update(this._elementTargets),e=t.added,n=t.removed;(e.length||n.length)&&this._onChangetarget&&this._onChangetarget(),this._updateRefs()},i.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},i.getTargets=function(){var t,e;return null!==(e=null===(t=this.moveable)||void 0===t?void 0:t.getTargets())&&void 0!==e?e:[]},i.updateSelectors=function(){this.selectorMap={},this._updateRefs()},i.waitToChangeTarget=function(){var t,e=this;return this._onChangetarget=function(){e._onChangetarget=null,t()},new Promise((function(e){t=e}))},i.getManager=function(){return this.moveable},i._updateRefs=function(t){var e=this.refTargets,n=Vy(this.props.target||this.props.targets),r="undefined"!=typeof document,i=yS(e,n),o=this.selectorMap,s={};return this.refTargets.forEach((function t(e){am(e)?o[e]?s[e]=o[e]:r&&(i=!0,s[e]=[].slice.call(document.querySelectorAll(e))):sm(e)&&e.forEach(t)})),this.refTargets=n,this.selectorMap=s,!t&&i&&this.forceUpdate(),n},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);o>3&&s&&Object.defineProperty(e,n,s)}([(n=vb,void 0===r&&(r={}),function(t,e){n.forEach((function(n){var i=r[n]||n;i in t||(t[i]=function(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=(t=this[e])[n].apply(t,r);return o===this[e]?this:o})}))})],e.prototype,"moveable",void 0),e}(cO),xS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Gv(e,t),e.defaultAbles=oS,e}(wS),SS=xS,kS=function(t,e){return kS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},kS(t,e)};function CS(t,e){function n(){this.constructor=t}kS(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var QS=function(){return QS=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},QS.apply(this,arguments)},PS=function(t){function e(e){var n=t.call(this,e)||this;return n.state={},n.state=n.props,n}return CS(e,t),e.prototype.render=function(){return function(t,e){return Km(hO,{element:t,container:e})}(Km(SS,QS({ref:Vg(this,"moveable")},this.state)),this.state.parentElement)},e}(lO),ES=hS,TS=vb,_S=cS,$S=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;r.tempElement=document.createElement("div");var i=QS({},n),o={};_S.forEach((function(t){o[Om("on ".concat(t))]=function(e){return r.trigger(t,e)}})),dO(Km(PS,QS({ref:Vg(r,"innerMoveable"),parentElement:e},i,o)),r.tempElement);var s=i.target;return sm(s)&&s.length>1&&r.updateRect(),r}CS(e,t);var n=e.prototype;return n.setState=function(t,e){this.innerMoveable.setState(t,e)},n.forceUpdate=function(t){this.innerMoveable.forceUpdate(t)},n.dragStart=function(t){this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(t)},n.destroy=function(){dO(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},e=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([Xg(TS,(function(t,e){t[e]||(t[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.getMoveable();if(r&&r[e])return r[e].apply(r,t)})})),Xg(ES,(function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var n;this.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})}))],e),e}(Sv),MS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return CS(e,t),e}($S);const RS=t=>new MS(document.body,Object.assign({dimensionViewable:!0,deleteButtonViewable:!1,container:document.body,snappable:!1,snapGap:!1,isDisplayInnerSnapDigit:!1,draggable:!0,resizable:!0,scalable:!1,rotatable:!1,warpable:!1,pinchable:!0,origin:!0,keepRatio:!1,edge:!1,throttleDrag:0,throttleResize:1,throttleScale:0,throttleRotate:0,clipTargetBounds:!0},t));var AS=n(7312),DS={};DS.styleTagTransform=F(),DS.setAttributes=z(),DS.insert=U().bind(null,"head"),DS.domAPI=I(),DS.insertStyleElement=L(),B()(AS.Z,DS),AS.Z&&AS.Z.locals&&AS.Z.locals;const{Text:WS}=s.Typography;class jS extends e().Component{constructor(){super(),this.ref=e().createRef(),this.state={state:"normal",openSearch:!1,search:""}}componentDidMount(){this.enablePanelMoveResize()}enablePanelMoveResize(){const t=RS({className:"workspace-movable",target:this.ref.current,dragTarget:this.ref.current.querySelector(".title-bar .icon-handle")});t.on("resize",(({target:t,width:e,height:n,delta:r,transform:i})=>{t.style.transform=i,r[0]&&(t.style.width=`${e}px`),r[1]&&(t.style.height=`${n}px`)})),t.on("drag",(t=>{t.target.style.transform=t.transform,Array.from(document.querySelectorAll(".movable-panel")).forEach((t=>{t.style.zIndex=1e3})),this.ref.current.style.zIndex=1001}))}render(){const{onClose:t,position:n,visible:r,title:i,padding:o="0"}=this.props,{state:a,openSearch:l,search:c}=this.state,h={};if(Array.isArray(n)&&6===n.length){const[t,e,r,i,o,s]=n;t&&(h.left=t+"px"),e&&(h.top=e+"px"),r&&(h.right=r+"px"),i&&(h.bottom=i+"px"),o&&(h.width=o+"px"),s&&(h.height=s+"px")}return r||(h.display="none"),jg().createPortal(e().createElement("div",{ref:this.ref,className:"movable-panel",style:h,id:this.props.id},e().createElement("div",{className:"title-bar"},e().createElement(st,{className:"icon-handle"}),i&&e().createElement(WS,{className:"title-text"},i),l&&e().createElement(s.Input,{placeholder:"输入查询条件",prefix:e().createElement(ft,null),suffix:e().createElement(et,{onClick:()=>{this.setState({openSearch:!1,search:""})}}),className:"toggle-search"}),e().createElement(s.Button,{className:"icon-search",icon:e().createElement(ft,null),theme:"borderless",size:"small",type:"tertiary",onClick:()=>{this.setState({openSearch:!0,search:""})}})),e().createElement("div",{className:"panel-content",style:{marginTop:i?"28px":"0",borderTop:i?"1px solid var(--semi-color-border)":"none"}},this.props.children)),document.body)}}const ZS="pageLoaded",NS="pageVariableChange",BS="pagePropChange",VS="elementSelected",IS="elementDragEnd",XS="componentPropChange",US="componentEventChange",qS="elementCreated",zS=[{rows:[{cols:[{label:"页面名称",control:"text",bindable:!1,field:"title"}]},{cols:[{label:"页面布局",control:"select",field:"type",bindable:!1,optionList:[{label:"固定宽高",value:"fixed"},{label:"宽度自适应",value:"fit-w"},{label:"宽高自适应",value:"fit-wh"}]}]},{cols:[{label:"W",when:'type === "fixed"',bindable:!1,control:"number",field:"width"},{label:"H",when:'type === "fixed"',bindable:!1,control:"number",field:"height"}]}]}],YS={ADD:[45,5,0,0,320,450],OUTLINE:[45,460,0,8,320,0],PROP:[0,5,5,0,320,540],DATA:[0,550,5,5,320,0]},LS={ADD:[45,5,0,0,280,360],OUTLINE:[45,370,0,5,280,0],PROP:[0,5,5,0,280,400],DATA:[0,410,5,5,280,0]},GS=new(n(6729)),FS=GS.emit.bind(GS),HS=GS.on.bind(GS),KS=[{rows:[{cols:[{label:"名称",control:"text",bindable:!1,field:"name"}]},{cols:[{label:"X",control:"number",readonly:t=>!(t&&t.style&&"absolute"===t.style.position),field:"style.x",fieldEx:"styleEx.x"},{label:"Y",control:"number",readonly:t=>!(t&&t.style&&"absolute"===t.style.position),field:"style.y",fieldEx:"styleEx.Y"}]},{cols:[{label:"W",control:"number",field:"style.width",fieldEx:"styleEx.width"},{label:"H",control:"number",field:"style.height",fieldEx:"styleEx.height"}]},{cols:[{label:"显示",type:"boolean",control:"checkbox",field:"style.visible",fieldEx:"styleEx.visible"}]}]}];class JS extends e().Component{constructor(t){super(t),this.ref=e().createRef(),this.componentPropFormApi=null,this.componentEventFormApi=null,this.pagePropFormApi=null,this.state={pageVariables:[],nodePropsSection:[],nodeEventsSection:[]},this.initEvents()}initEvents(){HS(ZS,(({pageProperties:t,pageVariables:e})=>{this.pagePropFormApi.setValues(t,{notNotify:!0}),this.setState({pageVariables:e})})),HS(BS,(t=>{"workspace"===t.from&&this.pagePropFormApi.setValues(t.properties,{notNotify:!0})})),HS(NS,(t=>{this.setState({pageVariables:t})})),HS(VS,(t=>{"workspace"===t.from&&this.elementSelected(t.element)}))}elementMoved(t){this.componentPropFormApi.setValue("style",t.elementWrapper.getStyle(),{notNotify:!0})}updatePanelConfig(){const t=this.currentElement.elementWrapper;if(this.componentPropFormApi.setValue("style",t.config.style,{notNotify:!0}),t.componentDefinition){const e=t.componentDefinition.props,n=[];let r=null;for(const t of e){const e={label:t.label,type:t.type,bindable:t.bindable,control:t.control,optionList:t.optionList,field:"props."+t.name,fieldEx:"propsEx."+t.name};t.party?r=e:(n.push({cols:r?[r,e]:[e]}),r=null)}const i=KS.concat({rows:n}),o=[];for(const e of t.componentDefinition.events||[]){const t={label:e.label,type:"function",control:"event",bindable:!1,field:"event."+e.name};o.push({cols:[t]})}this.setState({nodePropsSection:i,nodeEventsSection:[{rows:o}]},(()=>{this.componentPropFormApi.setValue("name",t.config.title,{notNotify:!0}),this.componentPropFormApi.setValue("props",t.config.props,{notNotify:!0}),this.componentPropFormApi.setValue("propsEx",t.config.propEx,{notNotify:!0}),this.componentPropFormApi.setValue("styleEx",t.config.styleEx,{notNotify:!0}),this.componentEventFormApi.setValue("event",t.config.events,{notNotify:!0})}))}}elementSelected(t){if(this.currentElement=t,this.interval&&(window.clearInterval(this.interval),this.interval=null),t){const t=this.currentElement.elementWrapper;t&&t.componentDefinition?this.updatePanelConfig():this.interval=setInterval((()=>{t&&t.componentDefinition&&(this.updatePanelConfig(),window.clearInterval(this.interval),this.interval=null)}),200)}else this.currentElement=null,this.setState({nodePropsSection:[],nodeEventsSection:[]})}nodeRectChange(t){this.styleChange(t)}render(){const{nodePropsSection:t,nodeEventsSection:n,pageVariables:r}=this.state,i=(t,e)=>{FS(US,{el:this.currentElement,values:t,field:e})};return e().createElement(jS,this.props,e().createElement(s.Tabs,{type:"card",style:{display:0===t.length?"none":"initial"}},e().createElement(s.TabPane,{tab:"属性",itemKey:"style"},e().createElement(Dg,{sections:t,getFormApi:t=>{this.componentPropFormApi=t},onValueChange:(t,e)=>{FS(XS,{el:this.currentElement,values:t,field:e})},options:{pageVariables:r}})),e().createElement(s.TabPane,{tab:"交互",itemKey:"interact"},e().createElement(Dg,{sections:n,getFormApi:t=>{this.componentEventFormApi=t},onValueChange:i,options:{pageVariables:r}}))),e().createElement(s.Tabs,{type:"card",style:{display:0===t.length?"initial":"none"}},e().createElement(s.TabPane,{tab:"属性",itemKey:"style"},e().createElement(Dg,{sections:zS,getFormApi:t=>{this.pagePropFormApi=t},onValueChange:(t,e)=>{FS(BS,{from:"panel",properties:t})}})),e().createElement(s.TabPane,{tab:"交互",itemKey:"interact"},e().createElement(Dg,{sections:n,getFormApi:t=>{},onValueChange:i,options:{pageVariables:r}}))))}}var tk=n(1162),ek={};ek.styleTagTransform=F(),ek.setAttributes=z(),ek.insert=U().bind(null,"head"),ek.domAPI=I(),ek.insertStyleElement=L(),B()(tk.Z,ek),tk.Z&&tk.Z.locals&&tk.Z.locals;const nk=({variables:n,variableChange:r})=>{const[i,o]=(0,t.useState)(-1),[a,l]=(0,t.useState)(""),[c,h]=(0,t.useState)(!1),[u,f]=(0,t.useState)(!1),d=(t,e,i)=>{r(n.map(((n,r)=>r===t?{...n,[e]:i}:n)))},p=t=>{if(i===t){if(-1===c)return;if(c)return;l(n[t].name),h(!0)}else h(!1),l(""),o(t)},g=({index:t,value:n})=>e().createElement(Pg,{type:"json",msg:"编辑变量初始值",value:n,onChange:e=>{d(t,"value",e)}},e().createElement(it,{className:"action-edit",style:{cursor:"pointer"}}));return e().createElement("div",{className:"variable-list"},e().createElement("div",{className:"item-list",onClick:()=>{p(-1)}},n.map(((t,o)=>e().createElement("div",{className:"item "+(i===o?"selected":""),key:o,onClick:t=>{p(o),t.stopPropagation(),t.preventDefault()}},c&&i===o&&e().createElement("div",{className:"edit-line"},e().createElement("div",{className:"edit-name"},e().createElement(s.Input,{size:"small",validateStatus:u?"error":"default",value:a,onChange:t=>{((t,e)=>{if(l(e),e.match("^([a-zA-Z_$一-龥][a-zA-Z\\d_$一-龥]*)$")){let i=!1;n.forEach(((n,r)=>{r!==t&&n.name===e&&(i=!0)})),i?f(!0):(f(!1),r(n.map(((n,r)=>r===t?Object.assign(n,{name:e}):n))))}else f(!0)})(o,t)}})),e().createElement("div",{className:"edit-value"},e().createElement(s.Input,{size:"small",value:t.value,onChange:t=>{d(o,"value",t)},addonAfter:e().createElement(g,{index:o,value:t.value})}))),(!c||i!==o)&&e().createElement(e().Fragment,null,e().createElement("div",{className:"name"},t.name),e().createElement("div",{className:"value"},t.value)))))),e().createElement("div",{className:"bottom-bar"},e().createElement(s.Button,{icon:e().createElement(ut,null),onClick:()=>{let t=n.length+1;for(;n.filter((e=>e.name==="Var"+t)).length;)t++;r([...n,{name:"Var"+t,save:!1,value:""}])},theme:"borderless",size:"small"}),e().createElement(s.Button,{icon:e().createElement(rt,null),onClick:t=>{i>-1&&(r(n.filter((t=>t!==n[i]))),l(""),h(!1))},theme:"borderless",size:"small"})))};var rk=n(7318),ik={};function ok(){return ok=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ok.apply(this,arguments)}ik.styleTagTransform=F(),ik.setAttributes=z(),ik.insert=U().bind(null,"head"),ik.domAPI=I(),ik.insertStyleElement=L(),B()(rk.Z,ik),rk.Z&&rk.Z.locals&&rk.Z.locals;class sk extends e().Component{constructor(){super(),this.state={show:!0}}render(){return e().createElement(jS,ok({right:"10px",bottom:"10px",width:"300px",height:"240px"},this.props),e().createElement(nk,{variables:this.props.variables,variableChange:this.props.variableChange}))}}class ak{constructor(){this.packageNames=["ridge-antd","ridge-basic","ridge-container"],this.packagesDetails=[]}async getBuildInPackages(){return this.packagesDetails.length||await this.loadPackages(),this.packagesDetails}async loadPackages(){const t=[],e=await window.Ridge.loader.getDebugPackage();e&&t.push(await window.Ridge.loader.getPackageJSON(e.name));for(const n of this.packageNames)e.name!==n&&t.push(await window.Ridge.loader.getPackageJSON(n));return await Promise.allSettled(t),this.packagesDetails=t.filter((t=>null!=t)),this.packagesDetails}}var lk=n(2696),ck={};function hk(){return hk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hk.apply(this,arguments)}ck.styleTagTransform=F(),ck.setAttributes=z(),ck.insert=U().bind(null,"head"),ck.domAPI=I(),ck.insertStyleElement=L(),B()(lk.Z,ck),lk.Z&&lk.Z.locals&&lk.Z.locals;class uk extends e().Component{constructor(){super(),this.el=document.createElement("div"),this.ref=e().createRef(),this.packageManager=new ak,this.state={packages:[],currentPackage:"ridge-basic",packageListingLoaded:!1}}showPanel(){}renderPackageComponents(){const t=this.state.packages.filter((t=>t.name===this.state.currentPackage))[0];t.components.forEach((({path:t})=>{}))}tabChange(t){this.setState({currentPackage:t},(()=>{this.renderPackageComponents()}))}componentDidMount(){this.state.packageListingLoaded||this.packageManager.getBuildInPackages().then((t=>{this.setState({currentPackage:this.packageManager.packageNames[0],packages:t,packageListingLoaded:!0},(()=>{this.renderPackageComponents()}))}))}dragStart(t,e){t.dataTransfer.setData("text/plain",JSON.stringify(e));const n=new window.Image;n.src=e.icon,t.dataTransfer.setDragImage(n,60,60)}render(){const{position:t}=this.props,{packageListingLoaded:n,packages:r}=this.state,{dragStart:i}=this,o=this.tabChange.bind(this);return e().createElement(jS,hk({position:t},this.props),!n&&e().createElement(s.Spin,{size:"large"}),e().createElement(s.Tabs,{type:"card",size:"small",onChange:t=>o(t)},r&&r.map((t=>e().createElement(s.TabPane,{style:{padding:"4px"},className:"tab-title",tab:e().createElement("div",{className:"package-tab"},e().createElement("span",null,t.description)),key:t.name,itemKey:t.name},e().createElement(s.List,{grid:{gutter:6,span:8},dataSource:t.components,renderItem:n=>e().createElement(s.List.Item,null,e().createElement("div",{draggable:!0,onDragStart:e=>i(e,Object.assign(n,{componentPath:t.name+"/"+n.path})),className:"component-container"},e().createElement("img",{src:n.icon})),e().createElement("div",null,n.title))}))))))}}const fk=uk;class dk extends e().Component{constructor(){super(),this.el=document.createElement("div"),this.ref=e().createRef(),this.state={elements:[],selected:null}}componentDidMount(){HS(ZS,(({elements:t})=>{this.setState({elements:t})})),HS(IS,(({elements:t})=>{this.setState({elements:t})})),HS(VS,(t=>{"workspace"===t.from&&(this.setState({selected:t.element?t.element.elementWrapper.id:null}),t.elements&&this.setState({elements:t.elements}))}))}onNodeSelected(t){FS(VS,{from:"outline",element:this.state.elements[t].el})}buildElementTree(t){const e=[],n=Object.values(t).filter((t=>t.isRoot()));for(const t of n)e.push(this.getElementTree(t));return e}getElementTree(t,e){const n={key:t.id,label:t.config.title,value:t.id,tags:e,element:t,children:[]};if(t.config.props.children&&t.config.props.children.length)for(const e of t.config.props.children)e.id&&n.children.push(this.getElementTree(e));const r=t.getSlotChildren();for(const t of r)t.element&&t.element.id&&n.children.push(this.getElementTree(t.element,{tag:t.name}));return n}render(){const{selected:t,elements:n}=this.state,r=this.buildElementTree(n);return e().createElement(jS,this.props,e().createElement(s.Tabs,{type:"card"},e().createElement(s.TabPane,{tab:"页面列表",itemKey:"resource"}),e().createElement(s.TabPane,{tab:"元素导航",itemKey:"outline"},e().createElement(s.Tree,{value:t,onChange:t=>{this.onNodeSelected(t)},treeData:r}))))}}const pk=dk;var gk=n(6749),mk={};mk.styleTagTransform=F(),mk.setAttributes=z(),mk.insert=U().bind(null,"head"),mk.domAPI=I(),mk.insertStyleElement=L(),B()(gk.Z,mk),gk.Z&&gk.Z.locals&&gk.Z.locals;const Ok=[{rows:[{cols:[{label:"启用",type:"boolean",field:"enabled",bindable:!1}]},{cols:[{label:"本地地址",type:"string",field:"debugUrl",bindable:!1}]}]}],vk=[{rows:[{cols:[{label:"从本地还原",type:"file",field:"import",bindable:!1}]},{cols:[{label:"备份到本地",type:"button",field:"debugUrl",bindable:!1}]}]}],bk=()=>{const{Title:t}=s.Typography;return e().createElement(e().Fragment,null,e().createElement(t,{heading:5,style:{margin:"8px 0"}},"Ridge 应用配置"),e().createElement("div",{className:"setting-content"},e().createElement(s.Tabs,{tabPosition:"left",type:"button"},e().createElement(s.TabPane,{tab:e().createElement("span",null,e().createElement(mt,null),"您与Ridge"),itemKey:"user"}),e().createElement(s.TabPane,{tab:e().createElement("span",null,e().createElement(at,null),"备份与清理"),itemKey:"app-manage"},e().createElement(Dg,{sections:vk,onValueChange:t=>{console.log(t)}})),e().createElement(s.TabPane,{tab:e().createElement("span",null,e().createElement(ot,null),"主题颜色"),itemKey:"theme"}),e().createElement(s.TabPane,{tab:e().createElement("span",null,e().createElement(lt,null),"开发调试"),itemKey:"debug"},e().createElement(Dg,{initValues:{enabled:!1,debugUrl:"http://localhost:8700"},sections:Ok,getFormApi:t=>{},onValueChange:t=>{console.log(t)}})))))},yk=()=>e().createElement("span",{style:{width:"21px"}}),wk=t=>{const{dataPanelVisible:n,componentPanelVisible:r,propPanelVisible:i,outlinePanelVisible:o,pagesPanelVisible:a,modeRun:l,toggleVisible:c,toggoleRunMode:h}=t;return e().createElement("div",{className:"menu-bar",style:{}},e().createElement(s.Button,{size:"small",disabled:l,icon:e().createElement(ut,null),type:r?"primary":"tertiary",theme:r?"solid":"borderless",onClick:()=>c("componentPanelVisible")}),e().createElement(s.Dropdown,{trigger:"click",position:"rightTop",render:e().createElement(s.Dropdown.Menu,null,e().createElement(s.Dropdown.Item,{onClick:()=>c("dataPanelVisible")},n?e().createElement(gt,null):e().createElement(yk,null)," 数据面板"),e().createElement(s.Dropdown.Item,{onClick:()=>c("propPanelVisible")},i?e().createElement(gt,null):e().createElement(yk,null)," 属性面板"),e().createElement(s.Dropdown.Item,{onClick:()=>c("outlinePanelVisible")},o?e().createElement(gt,null):e().createElement(yk,null)," 导航列表"),e().createElement(s.Dropdown.Item,{onClick:()=>c("pagesPanelVisible")},a?e().createElement(gt,null):e().createElement(yk,null)," 应用页面列表"))},e().createElement(s.Button,{disabled:l,icon:e().createElement(pt,null),theme:"borderless",size:"small",type:"tertiary"})),e().createElement(s.Popover,{showArrow:!0,trigger:"click",position:"right",content:e().createElement(bk,null)},e().createElement(s.Button,{disabled:l,icon:e().createElement(dt,null),theme:"borderless",size:"small",type:"tertiary"})),e().createElement(s.Button,{type:l?"primary":"tertiary",theme:l?"solid":"borderless",icon:l?e().createElement(ct,null):e().createElement(ht,null),size:"small",onClick:h}))};var xk=n(7053),Sk={};Sk.styleTagTransform=F(),Sk.setAttributes=z(),Sk.insert=U().bind(null,"head"),Sk.domAPI=I(),Sk.insertStyleElement=L(),B()(xk.Z,Sk),xk.Z&&xk.Z.locals&&xk.Z.locals;let kk=null;const Ck=({visible:n,value:r,lang:i,output:o,onCancel:a})=>{const l=e().createRef(),[c,h]=(0,t.useState)("");return(0,t.useEffect)((()=>{n&&(kk&&(kk.destroy(),kk=null),"js"===i?kk=new Vo({doc:r,extensions:[Op,Og()],root:l.current.parent,parent:l.current}):"json"===i&&(kk=new Vo({doc:r,extensions:[Op,Cg()],parent:l.current}),kk.jsonParseLinter=Sg))}),[n]),e().createElement(s.Modal,{size:"small",motion:!1,style:{width:"800px",height:"460px"},title:"代码编辑",lazyRender:!0,visible:n,maskClosable:!1,onCancel:a,onOk:()=>{kk&&o(kk.state.doc.toString())}},e().createElement("div",{ref:l,className:"editor-wrapper"}),c&&e().createElement(s.Banner,{className:"code-error-banner",fullMode:!1,type:"danger",bordered:!0,icon:null,closeIcon:null,description:c}))};var Qk,Pk,Ek,Tk=n(6726),_k=n.n(Tk),$k=function(t,e){return $k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},$k(t,e)},Mk=(Qk=function(t,e){function n(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return s[t];var n,o=String(t);return(n=r[o.toLowerCase()])?n:(n=i[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"==typeof t){var n=t.which||t.keyCode||t.charCode;if(null==n)return!1;if("string"==typeof e){var o;if(o=r[e.toLowerCase()])return o===n;if(o=i[e.toLowerCase()])return o===n}else if("number"==typeof e)return e===n;return!1}};var r=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var s=e.names=e.title={};for(o in r)s[r[o]]=o;for(var a in i)r[a]=i[a]},Qk(Pk={exports:{}},Pk.exports),Pk.exports),Rk=(Mk.code,Mk.codes,Mk.aliases,Mk.names),Ak=(Mk.title,{"+":"plus","left command":"meta","right command":"meta"}),Dk={shift:1,ctrl:2,alt:3,meta:4};function Wk(t,e){var n=(Rk[t]||e||"").toLowerCase();for(var r in Ak)n=n.replace(r,Ak[r]);return n.replace(/\s/g,"")}function jk(t,e){void 0===e&&(e=Wk(t.keyCode,t.key));var n=function(t){return[t.shiftKey&&"shift",t.ctrlKey&&"ctrl",t.altKey&&"alt",t.metaKey&&"meta"].filter(Boolean)}(t);return-1===n.indexOf(e)&&n.push(e),n.filter(Boolean)}function Zk(t){var e=t.slice();return e.sort((function(t,e){return(Dk[t]||5)-(Dk[e]||5)})),e}var Nk=function(t){function e(e){void 0===e&&(e=window);var n=t.call(this)||this;return n.container=e,n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n.clear=function(){return n.ctrlKey=!1,n.altKey=!1,n.shiftKey=!1,n.metaKey=!1,n},n.keydownEvent=function(t){n.triggerEvent("keydown",t)},n.keyupEvent=function(t){n.triggerEvent("keyup",t)},n.blur=function(){n.clear(),n.trigger("blur")},Zm(e,"blur",n.blur),Zm(e,"keydown",n.keydownEvent),Zm(e,"keyup",n.keyupEvent),n}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}$k(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t);var n=e.prototype;return Object.defineProperty(e,"global",{get:function(){return Ek||(Ek=new e)},enumerable:!1,configurable:!0}),e.setGlobal=function(){return this.global},n.destroy=function(){var t=this.container;this.clear(),this.off(),Nm(t,"blur",this.blur),Nm(t,"keydown",this.keydownEvent),Nm(t,"keyup",this.keyupEvent)},n.keydown=function(t,e){return this.addEvent("keydown",t,e)},n.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},n.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},n.keyup=function(t,e){return this.addEvent("keyup",t,e)},n.addEvent=function(t,e,n){return sm(e)?this.on("".concat(t,".").concat(Zk(e).join(".")),n):am(e)?this.on("".concat(t,".").concat(e),n):this.on(t,e),this},n.removeEvent=function(t,e,n){return sm(e)?this.off("".concat(t,".").concat(Zk(e).join(".")),n):am(e)?this.off("".concat(t,".").concat(e),n):this.off(t,e),this},n.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=Wk(e.keyCode,e.key),r={key:n,isToggle:"ctrl"===n||"shift"===n||"meta"===n||"alt"===n,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,r),this.trigger("".concat(t,".").concat(n),r);var i=jk(e,n);i.length>1&&this.trigger("".concat(t,".").concat(i.join(".")),r)},e}(Sv);const Bk=Nk;var Vk=function(t,e){return Vk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Vk(t,e)};function Ik(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Vk(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Xk=function(){return Xk=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Xk.apply(this,arguments)};function Uk(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function qk(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function zk(t,e){return document.elementFromPoint&&document.elementFromPoint(t,e)||null}function Yk(t,e,n){var r=t.tag,i=t.children,o=t.attributes,s=t.className,a=t.style,l=e||document.createElement(r);for(var c in o)l.setAttribute(c,o[c]);var h=l.children;if(i.forEach((function(t,e){Yk(t,h[e],l)})),s&&s.split(" ").forEach((function(t){Dm(l,t)||Wm(l,t)})),a){var u=l.style;for(var c in a)u[c]=a[c]}return!e&&n&&n.appendChild(l),l}function Lk(t,e,n){t!==e&&n(t,e)}function Gk(t,e,n){var r;void 0===n&&(n=t.data.boundArea);var i=t.distX,o=void 0===i?0:i,s=t.distY,a=void 0===s?0:s,l=t.data,c=l.startX,h=l.startY;if(e>0){var u=Math.sqrt((o*o+a*a)/(1+e*e));o=e*u*(o>=0?1:-1),a=(a>=0?1:-1)*u}var f=Math.abs(o),d=Math.abs(a);o=(o>=0?1:-1)*(f=(r=Em([f,d],[0,0],[o<0?c-n.left:n.right-c,a<0?h-n.top:n.bottom-h],!!e))[0]),a=(a>=0?1:-1)*(d=r[1]);var p=c+Math.min(0,o),g=h+Math.min(0,a);return{left:p,top:g,right:p+f,bottom:g+d,width:f,height:d}}function Fk(t){var e=t.getBoundingClientRect(),n=e.left,r=e.top,i=e.width,o=e.height;return{pos1:[n,r],pos2:[n+i,r],pos3:[n,r+o],pos4:[n+i,r+o]}}function Hk(t,e,n){var r=cv(t,e),i=r.list,o=r.prevList,s=r.added,a=r.removed,l=r.maintained;return qk(qk(qk([],s.map((function(t){return i[t]})),!0),a.map((function(t){return o[t]})),!0),n?l.map((function(t){var e=t[1];return i[e]})):[],!0)}var Kk=Iv("\n:host {\n    position: fixed;\n    display: none;\n    border: 1px solid #4af;\n    background: rgba(68, 170, 255, 0.5);\n    pointer-events: none;\n    will-change: transform;\n    z-index: 100;\n}\n"),Jk="selecto-selection ".concat(Kk.className),tC=["boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd"],eC=(qk(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],tC,!0),Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;n.selectedTargets=[],n.dragScroll=new Tv,n._onDragStart=function(t,e){var r=t.data,i=t.clientX,o=t.clientY,s=t.inputEvent,a=n.options,l=a.selectFromInside,c=a.selectByClick,h=a.rootContainer,u=a.boundContainer,f=a.preventDragFromInside,d=void 0===f||f,p=a.clickBySelectEnd,g=a.dragCondition;if(!g||g(t)){r.data={},r.innerWidth=window.innerWidth,r.innerHeight=window.innerHeight,n.findSelectableTargets(r),r.startSelectedTargets=n.selectedTargets,r.scaleMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.containerX=0,r.containerY=0;var m={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(h){var O=n.container.getBoundingClientRect();r.containerX=O.left,r.containerY=O.top,r.scaleMatrix=function(t,e){void 0===e&&(e=document.body);for(var n=t,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];n&&(r=GO(ev(getComputedStyle(n).transform),r),n!==e);)n=n.parentElement;return(r=RO(r,4))[12]=0,r[13]=0,r[14]=0,r}(n.container,h)}if(u){var v=om(u)&&"element"in u?Xk({left:!0,top:!0,bottom:!0,right:!0},u):{element:u,left:!0,top:!0,bottom:!0,right:!0},b=v.element;if(b){var y=(am(b)?document.querySelector(b):!0===b?n.container:b).getBoundingClientRect();v.left&&(m.left=y.left),v.top&&(m.top=y.top),v.right&&(m.right=y.right),v.bottom&&(m.bottom=y.bottom)}}r.boundArea=m;var w={left:i,top:o,right:i,bottom:o,width:0,height:0},x=[];if(!l||c&&!p){var S=n._findElement(e||zk(i,o),r.selectableTargets);x=S?[S]:[]}var k=x.length>0,C=!l&&k;if(C&&!c)return t.stop(),!1;var Q=s.type,P="mousedown"===Q||"touchstart"===Q;if(!t.isClick&&P&&!n.emit("dragStart",Xk(Xk({},t),{data:r.data})))return t.stop(),!1;if(n.continueSelect?(x=Hk(n.selectedTargets,x,n.continueSelectWithoutDeselect),r.startPassedTargets=n.selectedTargets):r.startPassedTargets=[],n._select(x,w,t,!0),r.startX=i,r.startY=o,r.selectFlag=!1,r.preventDragFromInside=!1,s.target){var E=nv(r.scaleMatrix,[i-r.containerX,o-r.containerY]);n.target.style.cssText+="position: ".concat(h?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(E[0],"px, ").concat(E[1],"px)")}if(C&&c&&!p)s.preventDefault(),d&&(n._selectEnd(r.startSelectedTargets,r.startPassedTargets,w,t),r.preventDragFromInside=!0);else{r.selectFlag=!0,"touchstart"===Q&&s.preventDefault();var T=n.options.scrollOptions;T&&T.container&&n.dragScroll.dragStart(t,T),p&&(r.selectFlag=!1,t.preventDrag())}return!0}t.stop()},n._onDrag=function(t){if(t.data.selectFlag){var e=n.scrollOptions;if((null==e?void 0:e.container)&&n.dragScroll.drag(t,e))return}n._checkSelected(t)},n._onDragEnd=function(t){var e=t.data,r=t.inputEvent,i=Gk(t,n.options.ratio),o=e.selectFlag;if(r&&n.emit("dragEnd",Xk(Xk({isDouble:!!t.isDouble,isClick:!!t.isClick,isDrag:!1,isSelect:o},t),{data:e.data,rect:i})),n.target.style.cssText+="display: none;",o)e.selectFlag=!1,n.dragScroll.dragEnd();else if(n.selectByClick&&n.clickBySelectEnd){var s=n._findElement(zk(t.clientX,t.clientY),e.selectableTargets);n._select(s?[s]:[],i,t)}e.preventDragFromInside||n._selectEnd(e.startSelectedTargets,e.startPassedTargets,i,t)},n._onKeyDown=function(t){var e=n.options,r=!1;if(!n._keydownContinueSelect){var i=n._sameCombiKey(t,e.toggleContinueSelect);n._keydownContinueSelect=i,r=i}n._keydownContinueSelectWithoutDeselection||(i=n._sameCombiKey(t,e.toggleContinueSelectWithoutDeselect),n._keydownContinueSelectWithoutDeselection=i,r=r||i),r&&n.emit("keydown",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection})},n._onKeyUp=function(t){var e=n.options,r=!1;if(n._keydownContinueSelect){var i=n._sameCombiKey(t,e.toggleContinueSelect,!0);n._keydownContinueSelect=!i,r=i}n._keydownContinueSelectWithoutDeselection&&(i=n._sameCombiKey(t,e.toggleContinueSelectWithoutDeselect,!0),n._keydownContinueSelectWithoutDeselection=!i,r=r||i),r&&n.emit("keyup",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection})},n._onBlur=function(){(n._keydownContinueSelect||n._keydownContinueSelectWithoutDeselection)&&(n._keydownContinueSelect=!1,n._keydownContinueSelectWithoutDeselection=!1,n.emit("keyup",{keydownContinueSelect:n._keydownContinueSelect,keydownContinueSelectWithoutDeselection:n._keydownContinueSelectWithoutDeselection}))},n._onDocumentSelectStart=function(t){if(n.gesto.isFlag()){var e=n.dragContainer;e===window&&(e=document.documentElement);var r=e instanceof Element?[e]:[].slice.call(e),i=t.target;r.some((function(e){if(e===i||e.contains(i))return t.preventDefault(),!0}))}},n.target=e.portalContainer;var r=e.container;n.options=Xk({portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:void 0,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,getElementRect:Fk,cspNonce:"",ratio:0},e);var i=n.options.portalContainer;return i&&(r=i.parentElement),n.container=r||document.body,n.initElement(),n.initDragScroll(),n.setKeyController(),n}Ik(e,t);var n=e.prototype;return n.setSelectedTargets=function(t){var e=this.selectedTargets,n=cv(e,t),r=n.added,i=n.removed,o=n.prevList,s=n.list;return this.selectedTargets=t,{added:r.map((function(t){return s[t]})),removed:i.map((function(t){return o[t]})),beforeSelected:e,selected:t}},n.setSelectedTargetsByPoints=function(t,e){var n=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]),i=Math.max(t[0],e[0]),o=Math.max(t[1],e[1]),s={left:n,top:r,right:i,bottom:o,width:i-n,height:o-r},a={ignoreClick:!0};this.findSelectableTargets(a);var l=this.hitTest(s,a),c=this.setSelectedTargets(l);return Xk(Xk({},c),{rect:s})},n.selectTargetsByPoints=function(t,e){var n=new MouseEvent("mousedown",{clientX:t[0],clientY:t[1],cancelable:!0,bubbles:!0}),r=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),i=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),o=this.gesto;!1!==o.onDragStart(n)&&(o.onDrag(r),o.onDragEnd(i))},n.getSelectedTargets=function(){return this.selectedTargets},n.triggerDragStart=function(t){return this.gesto.triggerDragStart(t),this},n.destroy=function(){this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),Nm(document,"selectstart",this._onDocumentSelectStart),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},n.getElementPoints=function(t){var e=this.getElementRect||Fk,n=e(t),r=[n.pos1,n.pos2,n.pos4,n.pos3];return e!==Fk?dv(r,t.getBoundingClientRect()):r},n.getSelectableElements=function(){var t=[];return this.options.selectableTargets.forEach((function(e){om(e)?t.push(e):[].slice.call(document.querySelectorAll(e)).forEach((function(e){t.push(e)}))})),t},n.checkScroll=function(){if(this.gesto.isFlag()){var t=this.scrollOptions;(null==t?void 0:t.container)&&this.dragScroll.checkScroll(Xk({inputEvent:this.gesto.getCurrentEvent()},t))}},n.findSelectableTargets=function(t){var e=this;void 0===t&&(t=this.gesto.getEventData());var n=this.getSelectableElements(),r=n.map((function(t){return e.getElementPoints(t)}));t.selectableTargets=n,t.selectablePoints=r,this._refreshGroups(t)},n.clickTarget=function(t,e){var n=function(t){if("touches"in t){var e=t.touches[0]||t.changedTouches[0];return{clientX:e.clientX,clientY:e.clientY}}return{clientX:t.clientX,clientY:t.clientY}}(t),r={data:{selectFlag:!1},clientX:n.clientX,clientY:n.clientY,inputEvent:t,isClick:!0,stop:function(){return!1}};return this._onDragStart(r,e)&&this._onDragEnd(r),this},n.setKeyController=function(){var t=this.options,e=t.keyContainer,n=t.toggleContinueSelect,r=t.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(n||r)&&(this.keycon=new Bk(e||window),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},n.setKeyEvent=function(){var t=this.options,e=t.toggleContinueSelect,n=t.toggleContinueSelectWithoutDeselect;!e&&!n||this.keycon||this.setKeyController()},n.setKeyContainer=function(t){var e=this,n=this.options;Lk(n.keyContainer,t,(function(){n.keyContainer=t,e.setKeyController()}))},n.getContinueSelect=function(){var t=this.options,e=t.continueSelect;return t.toggleContinueSelect&&this._keydownContinueSelect?!e:e},n.getContinueSelectWithoutDeselect=function(){var t=this.options,e=t.continueSelectWithoutDeselect;return t.toggleContinueSelectWithoutDeselect&&this._keydownContinueSelectWithoutDeselection?!e:e},n.setToggleContinueSelect=function(t){var e=this,n=this.options;Lk(n.toggleContinueSelect,t,(function(){n.toggleContinueSelect=t,e.setKeyEvent()}))},n.setToggleContinueSelectWithoutDeselect=function(t){var e=this,n=this.options;Lk(n.toggleContinueSelectWithoutDeselect,t,(function(){n.toggleContinueSelectWithoutDeselect=t,e.setKeyEvent()}))},n.setPreventDefault=function(t){this.gesto.options.preventDefault=t},n.setCheckInput=function(t){this.gesto.options.checkInput=t},n.initElement=function(){this.target=Yk(function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e||{},o=i.className,s=void 0===o?"":o,a=i.style,l=void 0===a?{}:a,c=Uk(i,["className","style"]);return{tag:t,className:s,style:l,attributes:c,children:n}}("div",{className:Jk}),this.target,this.container);var t=this.target,e=this.options,n=e.dragContainer,r=e.checkInput,i=e.preventDefault,o=e.preventClickEventOnDragStart,s=e.preventClickEventOnDrag,a=e.preventClickEventByCondition,l=e.preventRightClick,c=void 0===l||l;this.dragContainer="string"==typeof n?[].slice.call(document.querySelectorAll(n)):n||this.target.parentNode,this.gesto=new Vv(this.dragContainer,{checkWindowBlur:!0,container:window,checkInput:r,preventDefault:i,preventClickEventOnDragStart:o,preventClickEventOnDrag:s,preventClickEventByCondition:a,preventRightClick:c}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),Zm(document,"selectstart",this._onDocumentSelectStart),this.injectResult=Kk.inject(t,{nonce:this.options.cspNonce})},n.hitTest=function(t,e){var n=this.options,r=n.hitRate,i=n.selectByClick,o=t.left,s=t.top,a=t.right,l=t.bottom,c=e.innerGroups,h=e.innerWidth,u=e.innerHeight,f=e.clientX,d=e.clientY,p=e.ignoreClick,g=[[o,s],[a,s],[a,l],[o,l]],m=function(t){var e=!p&&gv([f,d],t);if(i&&e)return!0;var n=yv(g,t);if(!n.length)return!1;var o=fv(n),s=fv(t),a=mm("".concat(r));return"px"===a.unit?o>=a.value:Qm(Math.round(o/s*100),0,100)>=Math.min(100,a.value)};if(!c){var O=e.selectableTargets,v=e.selectablePoints;return O.filter((function(t,e){return m(v[e])}))}for(var b=[],y=Math.floor(o/h),w=Math.floor(a/h),x=Math.floor(s/u),S=Math.floor(l/u),k=y;k<=w;++k){var C=c[k];if(C)for(var Q=function(t){var e=C[t];if(!e)return"continue";var n=e.points,r=e.targets;n.forEach((function(t,e){m(t)&&b.push(r[e])}))},P=x;P<=S;++P)Q(P)}return function(t){if("undefined"==typeof Map)return t.filter((function(e,n){return t.indexOf(e)===n}));var e=new Map;return t.filter((function(t){return!e.has(t)&&(e.set(t,!0),!0)}))}(b)},n.initDragScroll=function(){var t=this;this.dragScroll.on("scroll",(function(e){var n=e.container,r=e.direction;t.emit("scroll",{container:n,direction:r})})).on("move",(function(e){var n=e.offsetX,r=e.offsetY,i=e.inputEvent,o=t.gesto;if(o&&o.isFlag()){var s=t.gesto.getEventData(),a=s.boundArea;s.startX-=n,s.startY-=r,s.selectablePoints.forEach((function(t){t.forEach((function(t){t[0]-=n,t[1]-=r}))})),t._refreshGroups(s),a.left-=n,a.right-=n,a.top-=r,a.bottom-=r,t.gesto.scrollBy(n,r,i.inputEvent,!1),t._checkSelected(t.gesto.getCurrentEvent())}}))},n._select=function(t,e,n,r){var i=n.inputEvent,o=n.data,s=this.setSelectedTargets(t);r&&this.emit("selectStart",Xk(Xk({},s),{rect:e,inputEvent:i,data:o.data})),(s.added.length||s.removed.length)&&this.emit("select",Xk(Xk({},s),{rect:e,inputEvent:i,data:o.data}))},n._selectEnd=function(t,e,n,r){var i=r.inputEvent,o=r.isDouble,s=r.data,a=cv(t,this.selectedTargets),l=a.added,c=a.removed,h=a.prevList,u=a.list,f=cv(e,this.selectedTargets),d=f.added,p=f.removed,g=f.prevList,m=f.list,O=i&&i.type,v="mousedown"===O||"touchstart"===O;this.emit("selectEnd",{startSelected:t,beforeSelected:e,selected:this.selectedTargets,added:l.map((function(t){return u[t]})),removed:c.map((function(t){return h[t]})),afterAdded:d.map((function(t){return m[t]})),afterRemoved:p.map((function(t){return g[t]})),isDragStart:v,isClick:!!r.isClick,isDouble:!!o,rect:n,inputEvent:i,data:s.data})},n._checkSelected=function(t,e){void 0===e&&(e=Gk(t,this.options.ratio));var n=t.data,r=e.top,i=e.left,o=e.width,s=e.height,a=n.selectFlag,l=n.containerX,c=n.containerY,h=n.scaleMatrix,u=nv(h,[i-l,r-c]),f=nv(h,[o,s]),d=[];if(a){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(u[0],"px, ").concat(u[1],"px);")+"width:".concat(f[0],"px;height:").concat(f[1],"px;");var p=this.hitTest(e,n);d=Hk(n.startPassedTargets,p,this.continueSelect&&this.continueSelectWithoutDeselect)}if(!1===this.emit("drag",Xk(Xk({},t),{data:n.data,isSelect:a,rect:e})))return this.target.style.cssText+="display: none;",void t.stop();a&&this._select(d,e,t)},n._sameCombiKey=function(t,e,n){if(!e)return!1;var r=jk(t.inputEvent,t.key),i=[].concat(e),o=sm(i[0])?i:[i];if(n){var s=t.key;return o.some((function(t){return t.some((function(t){return t===s}))}))}return o.some((function(t){return t.every((function(t){return r.indexOf(t)>-1}))}))},n._findElement=function(t,e){for(var n=t;n&&!(e.indexOf(n)>-1);)n=n.parentElement;return n},n._refreshGroups=function(t){var e=t.innerWidth,n=t.innerHeight;if(e&&n){var r=t.selectableTargets,i=t.selectablePoints,o={};i.forEach((function(t,i){var s=1/0,a=-1/0,l=1/0,c=-1/0;t.forEach((function(t){var r=Math.floor(t[0]/e),i=Math.floor(t[1]/n);s=Math.min(r,s),a=Math.max(r,a),l=Math.min(i,l),c=Math.max(i,c)}));for(var h=s;h<=a;++h)for(var u=l;u<=c;++u){o[h]=o[h]||{},o[h][u]=o[h][u]||{points:[],targets:[]};var f=o[h][u],d=f.targets,p=f.points;d.push(r[i]),p.push(t)}})),t.innerGroups=o}else t.innerGroups=null},e=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}([Xg(tC,(function(t,e){var n={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},r=Om("get ".concat(e));t[r]?n.get=function(){return this[r]()}:n.get=function(){return this.options[e]};var i=Om("set ".concat(e));t[i]?n.set=function(t){this[i](t)}:n.set=function(t){this.options[e]=t},Object.defineProperty(t,e,n)}))],e),e}(Sv)),nC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ik(e,t),e}(eC);const rC=nC;var iC=n(3345),oC=n.n(iC);class sC{constructor({ridge:t,workspaceEl:e,viewPortEl:n,zoomable:r}){this.workspaceEl=e,this.viewPortEl=n,this.zoomable=r,this.ridge=t,this.selectorDropableTarget=[".ridge-element.container","slot"],this.init()}init(){this.initSelecto(),this.initMoveable(),this.initComponentDrop(),this.initKeyBind(),this.setWorkSpaceMovable(),HS(VS,(t=>{"outline"===t.from&&this.selectElements([t.element])}))}disable(){this.selecto.destroy(),this.moveable.destroy(),this.workspaceMovable&&(this.workspaceMovable.destroy(),this.workspaceMovable=null)}setPageManager(t){this.pageManager=t}fitToCenter(){if(this.zoomable){const t=this.workspaceEl.getBoundingClientRect(),e=this.viewPortEl.getBoundingClientRect(),n=function(t,e){if(t.width<e.width&&t.height<e.height)return t;const n={};return t.width/t.height>e.width/e.height?(n.fitTo="width",n.width=parseInt(e.width),n.height=Math.floor(t.height*(e.width/t.width))):(n.fitTo="height",n.width=Math.floor(t.width*(e.height/t.height)),n.height=parseInt(e.height)),n}(e,t);this.viewPortEl.style.transform=`translate(${(t.width-n.width)/2}px, ${(t.height-n.height)/2}px) scale(${n.width/e.width})`,this.viewPortEl.style.transformOrigin="center"}}setZoom(t){}setWorkSpaceMovable(){this.workspaceMovable=RS({target:this.viewPortEl,className:"workspace-movable"}),this.workspaceMovable.on("drag",(t=>{t.inputEvent.ctrlKey&&(t.target.style.transform=t.transform)})),this.workspaceMovable.on("resize",(t=>{t.delta&&t.delta[0]&&t.delta[1]&&FS(BS,{from:"workspace",properties:{width:t.width,height:t.height}})}))}initMoveable(){const t=this;this.moveable=RS({target:[],snappable:!0,warpable:!0,scalable:!0}),this.moveable.on("dragStart",(e=>{t.moveable.elementGuidelines=this.guidelines})),this.moveable.on("drag",(e=>{e.target.style.transform=e.transform,t.checkDropTargetStatus(e),t.onm&&t.onm(e.target)})),this.moveable.on("dragEnd",(e=>{const n=e.target.getBoundingClientRect();t.onElementDragEnd(e.target,n.left+n.width/2,n.top+n.height/2)})),this.moveable.on("resize",(({target:t,width:e,height:n,drag:r,delta:i,transform:o})=>{const s={};o.match(/[0-9.]+/g),s.x=r.translate[0],s.y=r.translate[1],i[0]&&(s.width=e),i[1]&&(s.height=n),t.elementWrapper.setStyle(s)})),this.moveable.on("resizeEnd",(({target:t,width:e,height:n,delta:r,transform:i})=>{this.selectElements([t])})),this.moveable.on("dragGroup",(({events:t})=>{t.forEach((({target:t,transform:e})=>{t.elementWrapper.config.parent||(t.style.transform=e)}))})),this.moveable.on("dragGroupEnd",(()=>{FS(IS,{elements:this.pageManager.getPageElements()})})),this.moveable.on("resizeGroup",(({events:t})=>{t.forEach((({target:t,width:e,height:n,delta:r,transform:i})=>{t.style.transform=i,r[0]&&(t.style.width=`${e}px`),r[1]&&(t.style.height=`${n}px`)}))}))}initSelecto(){this.selecto=new rC({rootContainer:null,dragContainer:this.workspaceEl,selectableTargets:[".ridge-element"],selectByClick:!0,selectFromInside:!1,continueSelect:!1,toggleContinueSelect:"shift",preventDefault:!0,keyContainer:window,hitRate:0}),this.selecto.on("dragStart",(t=>{const e=t.inputEvent,n=e.target;(n.className.indexOf("moveable-area")>-1||n.className.indexOf("moveable-control")>-1)&&t.stop();const r=n.closest(".ridge-element");r&&(this.moveable.target=r,this.guidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll(".ridge-element")).filter((t=>t!==r))],this.moveable.elementGuidelines=this.guidelines,this.moveable.dragStart(e),this.selectElements([r]),t.inputEvent&&t.inputEvent.stopPropagation(),t.inputEvent&&t.inputEvent.preventDefault(),t.stop()),e.ctrlKey&&t.stop()})),this.selecto.on("selectEnd",(({isDragStart:t,selected:e,inputEvent:n,rect:r})=>{t&&n.preventDefault(),this.moveable.elementGuidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll(".ridge-element")).filter((t=>-1===e.indexOf(t)))],this.guidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll('.ridge-element[snappable="true"]')).filter((t=>-1===e.indexOf(t)))],this.selectElements(e)}))}updateMovable(){this.moveable.updateTarget()}initComponentDrop(){this.workspaceEl.addEventListener("dragover",(t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"})),this.workspaceEl.addEventListener("drop",(t=>{this.workspaceDrop(t)}))}initKeyBind(){oC().bind("del",(()=>{if(this.selected){for(const t of this.selected)this.pageManager.removeElement(t.elementWrapper.id);this.selectElements([])}})),oC().bind("ctrl+s",(()=>(this.ridge.saveCurrentPage(),!1)))}checkDropTargetStatus({target:t,clientX:e,clientY:n}){this.getDroppableTarget(t,{x:e,y:n})}onElementDragEnd(t,e,n){const r=this.getDroppableTarget(t,{x:e,y:n}),i=t.elementWrapper,o=i.config.parent?this.pageManager.getElement(i.config.parent):null,s=r?r.elementWrapper:null;if(null!=o||null!=s){if(o===s&&null!=s)s.invoke("updateChild",[i]),s.config.props.children=s.invoke("getChildren");else if(o&&null==s)this.putElementToRoot(t,e,n),this.pageManager.detachChildElement(o,i);else if(null==o&&s){const t="SLOT"===r.tagName?r.getAttribute("name")||"slot":null;this.pageManager.attachToParent(s,i,t)}else if(o!==s){const t="SLOT"===r.tagName?r.getAttribute("name")||"slot":null;this.pageManager.attachToParent(s,i,t),this.pageManager.detachChildElement(o,i)}i.config.parent=s?s.id:null,s&&s.removeStatus("drag-over",r),FS(IS,{sourceElement:i,sourceParentElement:o,targetParentElement:s,elements:this.pageManager.getPageElements()}),this.selectElements([t]),this.moveable.updateTarget()}else this.putElementToRoot(t,e,n)}putElementToRoot(t,e,n){this.viewPortEl.appendChild(t);const r=this.viewPortEl.getBoundingClientRect(),i=t.getBoundingClientRect();t.elementWrapper.setStyle({position:"absolute",x:e-r.x-i.width/2,y:n-r.y-i.height/2}),this.moveable.updateTarget()}selectElements(t,e){this.moveable.target=t,!e&&t.length<=1&&FS(VS,{from:"workspace",element:t[0],elements:this.pageManager.getPageElements()}),this.selected=t}workspaceDrop(t){t.preventDefault();const e=t.dataTransfer.getData("text/plain"),n=JSON.parse(e),r=document.createElement("div"),i=this.pageManager.createElement(n);i.mount(r),this.onElementDragEnd(r,t.pageX,t.pageY),FS(qS,[i])}onNodeResize(t){this.onr=t}onNodeMove(t){this.onm=t}getDroppableTarget(t,e){let n=[];for(const t of this.selectorDropableTarget)n=n.concat(Array.from(document.querySelectorAll(t)));const r=Array.from(n).filter((n=>{if(t.contains(n))return!1;if("SLOT"===n.tagName&&n.getAttribute("tpl")&&n.getAttribute("tpl")!==t.getAttribute("ridge-id"))return!1;const{x:r,y:i,width:o,height:s}=n.getBoundingClientRect();return e.x>r&&e.x<r+o&&e.y>i&&e.y<i+s&&n!==t&&n.closest("[ridge-id]")!==t}));let i=null;if(1===r.length)i=r[0];else if(r.length>1){const t=r.sort(((t,e)=>t.contains(e)?1:e.contains(t)?-1:t.style.zIndex>e.style.zIndex?1:-1));i=t[0]}return n.forEach((t=>{t!==i?t.elementWrapper.removeStatus("drag-over",t):t.elementWrapper.setStatus("drag-over",t)})),i}}var aC=n(4551),lC=n.n(aC);const{nanoid:cC}=n(1349);class hC{constructor(){this.collection=new(lC())("ridge.app.db")}async addImage(t,e){await this.resourceStore.setItem(t,e)}async getImages(){const t=await this.resourceStore.keys(),e=[];for(const n of t)e.push({name:n,src:URL.createObjectURL(await this.resourceStore.getItem(n))});return e}async getRecentPage(){const t=await this.collection.find({parent:-1,type:"page"},{sort:{name:1}});return 0===t.length?this.createNewPage(-1):t[0]}async rename(t,e){const n=await this.collection.findOne(t);return!!n&&(!await this.collection.findOne({parent:n.parent,name:e})&&void await this.collection.patch(t,{name:e}))}async createNewFolder(t){let e=1;for(;await this.collection.findOne({parent:t,name:"文件夹"+e});)e++;const n={parent:t,id:cC(10),name:"文件夹"+e,type:"folder"};await this.collection.insert(n)}async createNewPage(t){let e=1;for(;await this.collection.findOne({parent:t,name:"页面"+e});)e++;const n={id:cC(10),title:"页面"+e,type:"page",parent:t,properties:{type:"fixed",width:800,height:600},variables:[],elements:[]};await this.collection.insert(n)}async saveUpdatePage(t){return await this.collection.findOne({id:t.id})?await this.collection.update({id:t.id},t):await this.collection.insert(t)}async listPage(){let t=await this.baseStore.getItem("pages");return t||(t=[]),t}deletePage(t){}saveAppResource(t,e,n){}listAppResource(t){}}var uC=n(1439),fC={};fC.styleTagTransform=F(),fC.setAttributes=z(),fC.insert=U().bind(null,"head"),fC.domAPI=I(),fC.insertStyleElement=L(),B()(uC.Z,fC),uC.Z&&uC.Z.locals&&uC.Z.locals;var dC=n(6668),pC=n.n(dC);const gC={},mC=t=>"undefined"!=typeof self&&self&&t in self?self:"undefined"!=typeof window&&window&&t in window?window:void 0!==n.g&&n.g&&t in n.g?n.g:"undefined"!=typeof globalThis&&globalThis?globalThis:void 0,OC=["Headers","Request","Response","ReadableStream","fetch","AbortController","FormData"];for(const t of OC)Object.defineProperty(gC,t,{get(){const e=mC(t),n=e&&e[t];return"function"==typeof n?n.bind(e):n}});const vC=t=>null!==t&&"object"==typeof t,bC="function"==typeof gC.AbortController,yC="function"==typeof gC.ReadableStream,wC="function"==typeof gC.FormData,xC=(t,e)=>{const n=new gC.Headers(t||{}),r=e instanceof gC.Headers,i=new gC.Headers(e||{});for(const[t,e]of i)r&&"undefined"===e||void 0===e?n.delete(t):n.set(t,e);return n},SC=(...t)=>{let e={},n={};for(const r of t){if(Array.isArray(r))Array.isArray(e)||(e=[]),e=[...e,...r];else if(vC(r)){for(let[t,n]of Object.entries(r))vC(n)&&Reflect.has(e,t)&&(n=SC(e[t],n)),e={...e,[t]:n};vC(r.headers)&&(n=xC(n,r.headers))}e.headers=n}return e},kC=["get","post","put","patch","head","delete"],CC={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},QC=[413,429,503],PC=Symbol("stop");class EC extends Error{constructor(t){super(t.statusText||String(0===t.status||t.status?t.status:"Unknown response error")),this.name="HTTPError",this.response=t}}class TC extends Error{constructor(t){super("Request timed out"),this.name="TimeoutError",this.request=t}}const _C=t=>new Promise((e=>setTimeout(e,t))),$C=t=>kC.includes(t)?t.toUpperCase():t,MC={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:QC},RC=(t={})=>{if("number"==typeof t)return{...MC,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...MC,...t,afterStatusCodes:QC}},AC=2147483647;class DC{constructor(t,e={}){if(this._retryCount=0,this._input=t,this._options={credentials:this._input.credentials||"same-origin",...e,headers:xC(this._input.headers,e.headers),hooks:SC({beforeRequest:[],beforeRetry:[],afterResponse:[]},e.hooks),method:$C(e.method||this._input.method),prefixUrl:String(e.prefixUrl||""),retry:RC(e.retry),throwHttpErrors:!1!==e.throwHttpErrors,timeout:void 0===e.timeout?1e4:e.timeout,fetch:e.fetch||gC.fetch},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof gC.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(bC&&(this.abortController=new gC.AbortController,this._options.signal&&this._options.signal.addEventListener("abort",(()=>{this.abortController.abort()})),this._options.signal=this.abortController.signal),this.request=new gC.Request(this._input,this._options),this._options.searchParams){const t="?"+new URLSearchParams(this._options.searchParams).toString(),e=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,t);!(wC&&this._options.body instanceof gC.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new gC.Request(new gC.Request(e,this.request),this._options)}void 0!==this._options.json&&(this._options.body=JSON.stringify(this._options.json),this.request.headers.set("content-type","application/json"),this.request=new gC.Request(this.request,{body:this._options.body}));const n=async()=>{if(this._options.timeout>AC)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await _C(1);let t=await this._fetch();for(const e of this._options.hooks.afterResponse){const n=await e(this.request,this._options,this._decorateResponse(t.clone()));n instanceof gC.Response&&(t=n)}if(this._decorateResponse(t),!t.ok&&this._options.throwHttpErrors)throw new EC(t);if(this._options.onDownloadProgress){if("function"!=typeof this._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!yC)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return this._stream(t.clone(),this._options.onDownloadProgress)}return t},r=this._options.retry.methods.includes(this.request.method.toLowerCase())?this._retry(n):n();for(const[t,n]of Object.entries(CC))r[t]=async()=>{this.request.headers.set("accept",this.request.headers.get("accept")||n);const i=(await r).clone();if("json"===t){if(204===i.status)return"";if(e.parseJson)return e.parseJson(await i.text())}return i[t]()};return r}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount<this._options.retry.limit&&!(t instanceof TC)){if(t instanceof EC){if(!this._options.retry.statusCodes.includes(t.response.status))return 0;const e=t.response.headers.get("Retry-After");if(e&&this._options.retry.afterStatusCodes.includes(t.response.status)){let t=Number(e);return Number.isNaN(t)?t=Date.parse(e)-Date.now():t*=1e3,void 0!==this._options.retry.maxRetryAfter&&t>this._options.retry.maxRetryAfter?0:t}if(413===t.response.status)return 0}return.3*2**(this._retryCount-1)*1e3}return 0}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(e){const n=Math.min(this._calculateRetryDelay(e),AC);if(0!==n&&this._retryCount>0){await _C(n);for(const t of this._options.hooks.beforeRetry)if(await t({request:this.request,options:this._options,error:e,retryCount:this._retryCount})===PC)return;return this._retry(t)}if(this._options.throwHttpErrors)throw e}}async _fetch(){for(const t of this._options.hooks.beforeRequest){const e=await t(this.request,this._options);if(e instanceof Request){this.request=e;break}if(e instanceof Response)return e}return!1===this._options.timeout?this._options.fetch(this.request.clone()):((t,e,n)=>new Promise(((r,i)=>{const o=setTimeout((()=>{e&&e.abort(),i(new TC(t))}),n.timeout);n.fetch(t).then(r).catch(i).then((()=>{clearTimeout(o)}))})))(this.request.clone(),this.abortController,this._options)}_stream(t,e){const n=Number(t.headers.get("content-length"))||0;let r=0;return new gC.Response(new gC.ReadableStream({start(i){const o=t.body.getReader();e&&e({percent:0,transferredBytes:0,totalBytes:n},new Uint8Array),async function t(){const{done:s,value:a}=await o.read();s?i.close():(e&&(r+=a.byteLength,e({percent:0===n?0:r/n,transferredBytes:r,totalBytes:n},a)),i.enqueue(a),t())}()}}))}}const WC=(...t)=>{for(const e of t)if((!vC(e)||Array.isArray(e))&&void 0!==e)throw new TypeError("The `options` argument must be an object");return SC({},...t)},jC=t=>{const e=(e,n)=>new DC(e,WC(t,n));for(const n of kC)e[n]=(e,r)=>new DC(e,WC(t,r,{method:n}));return e.HTTPError=EC,e.TimeoutError=TC,e.create=t=>jC(WC(t)),e.extend=e=>jC(WC(t,e)),e.stop=PC,e},ZC=jC();var NC=n(6051),BC=n.n(NC);const VC=o()("editor:ridge-loader"),IC=o()("important");class XC{setOption(t){}updateProps(t){}layout(t){}invoke(t,e){}on(t,e){}destroy(){}}const UC=[t=>window.antd?React.createElement(window.antd.ConfigProvider,{prefixCls:window.top.fdreConfig&&window.top.fdreConfig.antdPrefixCls||"ant"},[t]):t,...window.top.fdreConfig&&window.top.fdreConfig.reactContextProviders||[]];class qC extends XC{constructor(t,e,n={}){super(),this.el=e,this.JSXComponent=t,this.props=n,this.props.ref||(this.props.ref=React.createRef()),this.renderRef=this.props.ref,this.root=ReactDOM.createRoot(e),this.root.render(this.getRenderInstance())}getRenderInstance(){let t=React.createElement(this.JSXComponent,this.props);for(let e=0;e<UC.length;e++)t=UC[e](t);return t}on(t,e){Object.assign(this.props,{[t]:e}),ReactDOM.render(React.createElement(this.JSXComponent,this.props),this.el)}invoke(t,e){return this.renderRef&&this.renderRef.current&&this.renderRef.current[t]&&"function"==typeof this.renderRef.current[t]?this.renderRef.current[t](...e||[]):(console.error("无法调用无状态组件的方法!"),null)}setOption(t){this.updateProps(t)}updateProps(t){this.props=t,this.renderRef&&this.renderRef.current&&"function"==typeof this.renderRef.current.updateProps?this.renderRef.current.updateProps(t):ReactDOM.render(this.getRenderInstance(),this.el)}layout(t){ReactDOM.render(React.createElement(this.JSXComponent,t),this.el)}destroy(){ReactDOM.unmountComponentAtNode(this.el),this.renderRef&&(this.renderRef=null)}}class zC extends XC{constructor(t,e,n={}){super(),this.el=e,this.VannilaComponent=t,this.props=n,this.getRenderInstance().mount(e)}getRenderInstance(){return this.instance||(this.instance=new this.VannilaComponent(this.props)),this.instance}on(t,e){this.instance.on(t,e)}invoke(t,e){if(this.getRenderInstance()[t])return this.getRenderInstance()[t].apply(this.getRenderInstance(),e)}setOption(t){this.updateProps(t)}updateProps(t){this.getRenderInstance().update(t)}layout(t){this.getRenderInstance().layout(t)}destroy(){this.instance&&(this.instance.destroy&&this.instance.destroy(),this.instance=null)}}var YC=n(631),LC=n.n(YC),GC=n(1939),FC=n.n(GC);const HC=o()("rg:template"),KC=new Map;function JC(t,e,n){if(HC.enabled&&HC("模板计算",t,e),n&&Object.assign(e,n),"string"!=typeof t)return t;if(t.startsWith("${"))try{return new Function(...Object.keys(e),`return \`${t}\`;`)(...Object.values(e))}catch(t){return null}else{if(t.match(/{{([\s\S]+?)}}/g))return KC.get(t)||KC.set(t,LC()(t,{interpolate:/{{([\s\S]+?)}}/g})),KC.get(t)(e);try{const n=`{{JSON.stringify(${t})}}`,r=LC()(n,{interpolate:/{{([\s\S]+?)}}/g});return JSON.parse(r(e))}catch(n){try{return FC()(e,t)[0]}catch(e){return JSON.parse(t)}}}}const tQ=o()("ridge:el-wrapper"),eQ=o()("ridge:error");class nQ{constructor({config:t,pageManager:e}){this.config=t,this.id=t.id,this.componentPath=t.path,this.pageManager=e,this.systemProperties={__ridge:e.ridge,__pageManager:e,__elementWrapper:this},this.properties={},this.scopeVariableValues={}}setMode(t){this.mode=t,this.systemProperties.__mode=t,this.forceUpdate()}isRoot(){return null==this.config.parent}clone(){const t=new nQ({config:this.toJSON(),pageManager:this.pageManager});return t.componentDefinition=this.componentDefinition,t.preloaded=!0,t.config.props.children&&(t.config.props.children=t.config.props.children.map((e=>{const n=this.pageManager.getElement(e).clone();return n.parentWrapper=t,n}))),t}async preload(){this.preloaded||(this.setStatus("Loading"),this.componentDefinition=await this.loadComponentDefinition(),this.componentDefinition?(this.removeStatus("Loading"),this.preloaded=!0):this.setStatus("Error"))}async loadComponentDefinition(){if(this.componentPath){const t=await this.pageManager.ridge.loadComponent(this.componentPath);return t&&t.component?t:(tQ("加载图元失败: 未获取组件",this.componentPath),this.setStatus("加载失败"),null)}}appendChild(t){this.children.push(t)}initPropsAndEvents(){this.slotProps=[],this.config.parent&&!this.parentWrapper&&(this.parentWrapper=this.pageManager.getElement(this.config.parent));for(const t of this.componentDefinition.props||[]){if(this.config.isNew&&null==this.config.props[t.name]&&null!=t.value&&(this.config.props[t.name]=t.value),"value"===t.name&&(this.properties.input=t=>{this.emit("input",t)}),!0===t.input){const e="set"+t.name.substr(0,1).toUpperCase()+t.name.substr(1);this.properties[e]=t=>{this.emit(e,t)}}"children"===t.name?(this.children=[],this.isContainer=!0,this.el.classList.add("container"),Array.isArray(this.config.props.children)&&(this.config.props.children=this.config.props.children.map((t=>"string"==typeof t?this.pageManager.getElement(t):t)))):"slot"===t.type&&(this.isContainer=!0,this.slotProps.push(t.name),this.config.props[t.name]&&"string"==typeof this.config.props[t.name]&&(this.config.props[t.name]=this.pageManager.getElement(this.config.props[t.name])))}for(const t of this.componentDefinition.events||[])this.properties[t.name]=(...e)=>{this.emit(t.name,...e)};this.updateExpressionedProperties(),delete this.config.isNew}isMounted(){return null!=this.el}mount(t){this.el=t,this.el.classList.add("ridge-element"),this.el.setAttribute("ridge-id",this.id),this.el.elementWrapper=this,this.forceUpdateStyle(),this.preloaded?(this.initPropsAndEvents(),this.renderer=this.createRenderer()):this.preload().then((()=>{this.initPropsAndEvents(),this.renderer=this.createRenderer()}))}unmount(){if(this.children&&this.children.length)for(const t of this.children)t.unmount();this.renderer&&(this.renderer.destroy(),this.renderer=null),this.el&&(this.el.parentElement.removeChild(this.el),this.el=null)}createRenderer(){try{return"vanilla"===this.componentDefinition.type?new zC(this.componentDefinition.component,this.el,this.getProperties()):new qC(this.componentDefinition.component,this.el,this.getProperties())}catch(t){eQ("create render error",t)}return null}getProperties(){return"edit"===this.mode?Object.assign({},this.config.props,this.systemProperties):Object.assign({},this.config.props,this.systemProperties,this.properties)}forceUpdateStyle(){this.el&&(this.el.style.width=this.config.style.width?this.config.style.width+"px":"",this.el.style.height=this.config.style.height?this.config.style.height+"px":"",this.el.style.position=this.config.style.position,"absolute"===this.config.style.position?this.el.style.transform=`translate(${this.config.style.x}px, ${this.config.style.y}px)`:this.el.style.transform="",Object.keys(this.config.styleEx).length&&this.instanceStyleEx.width&&(this.el.style.width=JC(this.config.styleEx.width,this.getVariableContext())+"px"))}updateProperties(t){if(t&&Object.assign(this.properties,t),this.renderer)try{tQ("updateProps",this.id,this.properties),this.renderer.updateProps(this.getProperties())}catch(t){tQ("用属性渲染组件出错",t)}else tQ("updateProps umounted",this.id)}setScopeVariableValues(t){this.scopeVariableValues=t}getScopeVariableValues(){return this.parentWrapper?Object.assign(this.parentWrapper.getScopeVariableValues(),this.scopeVariableValues):this.scopeVariableValues}getVariableContext(){return Object.assign({},this.pageManager.getVariableValues(),this.getScopeVariableValues())}forceUpdate(){this.updateExpressionedProperties(),this.updateProperties()}updateExpressionedProperties(){for(const t of Object.keys(this.config.propEx))this.hasExpression(t)&&(this.properties[t]=JC(this.config.propEx[t],this.getVariableContext()))}hasExpression(t){return""!==this.config.propEx[t]&&null!=this.config.propEx[t]}invoke(t,e){return this.renderer.invoke(t,e)}reactBy(t){this.configUseVariable(this.config.propEx,t)&&this.forceUpdate(),this.configUseVariable(this.config.styleEx,t)&&this.forceUpdateStyle()}configUseVariable(t,e){let n=!1;for(const r of Object.values(t)){if(n)break;for(const t of e)r.indexOf(t)>-1&&(n=!0)}return n}emit(t,e){if("input"!==t||this.config.events[t]){if(this.config.events[t])for(const e of this.config.events[t])if("setvar"===e.name)try{const t=JC(e.value,this.getVariableContext());this.pageManager.updatePageVariableValue({[e.target]:t})}catch(t){tQ("Event Action[setvar] Error",t)}}else this.config.propEx.value&&Object.keys(this.getVariableContext()).indexOf(this.config.propEx.value)>-1&&this.pageManager.updatePageVariableValue({[this.config.propEx.value]:e})}getCreateChildElement(t){}getName(){return this.el.dataset.name}getPropsValue(){return this.instancePropConfig}getPropsBinding(){return this.instancePropConfigEx}getStyleBinding(){return this.instanceStyleEx}getEventActionsConfig(){return this.eventActionsConfig}attachElEvent(t,e){t[e]=t=>{try{this.emit(e,this.componentConfig),t.stopPropagation()}catch(t){console.error("事件处理异常",t)}return!1}}setStatus(t,e){this.status!==t&&(this.status=t,this.addMaskLayer({el:e||this.el,name:t,className:"status-"+t,zIndex:-1}))}removeStatus(t,e){this.status===t&&(this.status=null,this.removeMaskLayer(t,e||this.el))}removeMaskLayer(t,e){e&&e.querySelector('[name="'+t+'"]')&&e.removeChild(e.querySelector('[name="'+t+'"]'))}addMaskLayer({el:t,name:e,zIndex:n,className:r,text:i,content:o}){if(!t)return;if(t.querySelector('[name="'+e+'"]'))return;const s=document.createElement("div");s.setAttribute("name",e),s.classList.add("layer"),s.style.position="absolute",s.style.left=0,s.style.right=0,s.style.top=0,s.style.bottom=0,r&&s.classList.add(r),n&&(s.style.zIndex=n),s.innerHTML=o||i||"",t.appendChild(s)}setStyle(t){Object.assign(this.config.style,t),t.width&&(this.el.style.width=t.width+"px"),t.height&&(this.el.style.height=t.height+"px"),"absolute"===this.config.style.position?("absolute"!==this.el.style.position&&(this.el.style.position="absolute",this.el.style.left=0,this.el.style.top=0),this.el.style.transform=`translate(${this.config.style.x}px, ${this.config.style.y}px)`):(this.el.style.transform="",this.el.style.position="relative")}setPropsConfig(t,e){for(const t of Object.keys(e)){const[n,r]=t.split(".");"props"===n&&Object.assign(this.config.props,{[r]:e[t]}),"style"===n&&this.setStyle({[r]:e[t]}),"propsEx"===n&&Object.assign(this.config.propEx,{[r]:e[t]}),"styleEx"===n&&Object.assign(this.config.styleEx,{[r]:e[t]})}this.forceUpdateStyle(),this.forceUpdate()}setEventsConfig(t,e){Object.assign(this.config.events,t.event)}getStyle(){return this.config.style}getChildrenIds(){return this.config.props.children||[]}getSlotChildren(){return this.slotProps?this.slotProps.map((t=>({name:t,element:this.config.props[t]}))):[]}toJSON(){if(this.isContainer){const t=Object.assign({},this.config);if(t.props=Object.assign({},this.config.props),this.config.props.children&&(t.props.children=this.config.props.children.map((t=>t.id))),this.slotProps&&this.slotProps.length)for(const e of this.slotProps)t.props[e]&&(t.props[e]=t.props[e].id);return t}return this.config}}const rQ=nQ;var iQ=n(2155),oQ=(n(7429),n(5663)),sQ=n.n(oQ);const aQ=(0,iQ.kP)("1234567890abcdefghijklmnopqrstuvwxyz",10),lQ=t=>{try{return JSON.parse(t)}catch(e){return t}},cQ=class{constructor(t,e,n){this.pageConfig=t,this.ridge=e,this.ElementWrapper=n||rQ,this.initialize()}initialize(){this.id=this.pageConfig.id,this.pageVariableValues={};for(const t of this.pageConfig.variables||[])sQ()(t.name)&&(this.pageVariableValues[sQ()(t.name)]=lQ(t.value));this.pageElements={};for(const t of this.pageConfig.elements){const e=new this.ElementWrapper({pageManager:this,config:t});this.pageElements[e.id]=e}}getPageProperties(){return this.pageConfig.properties}getVariableConfig(){return this.pageConfig.variables}getVariableValues(){return this.pageVariableValues}updatePageProperties(t){Object.assign(this.pageConfig.properties,t),this.updateRootElStyle()}updatePageVariableValue(t){Object.assign(this.pageVariableValues,t),this.updateVariableRelated(t)}updateVariableConfig(t){this.pageConfig.variables=t,this.pageVariableValues={};for(const t of this.pageConfig.variables)sQ()(t.name)&&(this.pageVariableValues[sQ()(t.name)]=lQ(t.value));this.forceUpdate()}getElement(t){return this.pageElements[t]}getPageElements(){return this.pageElements}async mount(t){for(const e of Object.values(this.pageElements).filter((t=>t.isRoot()))){const n=document.createElement("div");e.mount(n),t.appendChild(n)}this.el=t,this.updateRootElStyle()}updateRootElStyle(){this.el.style.width=this.pageConfig.properties.width+"px",this.el.style.height=this.pageConfig.properties.height+"px"}async unmount(){for(const t of Object.values(this.pageElements).filter((t=>t.isRoot())))t.unmount()}async preload(){const t=[];for(const e of this.pageElements)t.push(await e.preload());await Promise.allSettled(t)}forceUpdate(){for(const t of Object.values(this.pageElements))t.forceUpdateStyle(),t.forceUpdate()}updateVariableRelated(t){const e=Object.keys(t);for(const t of Object.values(this.pageElements))t.reactBy(e)}setMode(t){for(const e of Object.values(this.pageElements))e.setMode(t)}createElement(t){const e={title:t.title,id:aQ(5),isNew:!0,path:t.componentPath,style:{position:"absolute",width:t.width??100,height:t.height??100},styleEx:{},props:{},propEx:{},events:[]},n=new rQ({config:e,pageManager:this});return n.setMode("edit"),this.pageElements[n.id]=n,n}removeElement(t){const e=this.pageElements[t];if(e){for(const t of e.getChildrenIds())this.removeElement(t);for(const t of e.getSlotChildren())this.removeElement(t.element.id);e.config.parent&&this.detachChildElement(this.pageElements[e.config.parent],t),e.unmount(),delete this.pageElements[t]}}detachChildElement(t,e){let n=!1;for(const r of t.componentDefinition.props.filter((t=>"slot"===t.type)))t.config.props[r.name]===e&&(t.setPropsConfig(null,{["props."+r.name]:null}),n=!0);n||(t.config.props.children=t.invoke("getChildren"))}attachToParent(t,e,n){n?t.setPropsConfig(null,{["props."+n]:e}):(t.invoke("appendChild",[e]),t.config.props.children=t.invoke("getChildren"))}getPageJSON(){const t={properties:this.pageConfig.properties,variables:this.pageConfig.variables,elements:[]};for(const e of Object.values(this.pageElements))t.elements.push(e.toJSON());return t}updateVariableConfigFromValue(){for(const e of this.pageConfig.variables)this.pageConfig.variables[sQ()(e.name)]&&(e.value=(t=this.pageConfig.variables[sQ()(e.name)],JSON.stringify(t)));var t}};function hQ(){return hQ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hQ.apply(this,arguments)}const uQ=o()("ridge:editor");class fQ extends e().Component{constructor(t){super(t),this.workspaceRef=e().createRef(),this.viewPortRef=e().createRef(),this.rightPanelRef=e().createRef(),this.dataPanelRef=e().createRef(),this.addComponentRef=e().createRef(),this.state={variables:[],properties:{},componentPanelVisible:!0,propPanelVisible:!0,outlinePanelVisible:!0,pagesPanelVisible:!0,dataPanelVisible:!0,editorLang:null,editorVisible:!1,modeRun:!1,editorCode:"",panelPosition:YS},window.screen.width<=1366&&(this.state.panelPosition=LS),this.debouncedSaveUpdatePage=_k()(this.saveCurrentPage,5e3),this.currentId=null,this.initialize()}initialize(){this.ridge=new class{constructor(t){const e=t.baseUrl??"/npm_packages",n=t.unkpgUrl??e,r=t.debugUrl;this.loader=new class{constructor({baseUrl:t,unpkgUrl:e,debugUrl:n,externalOptions:r}){this.baseUrl=t??"",this.unpkgUrl=e??"http://unpkg.com",this.debugUrl=n,IC("RidgeLoader baseUrl: "+this.baseUrl),this.componentCache={},this.packageJSONCache={},this.packageNotInstalled=[],this.loadedFonts=[],window.fcExternalLoaded=[],this.debugPackageName=null,this.packageLoadingPromises={},this.externalOptions=r??{},window.top.ridgeConfig&&window.top.ridgeConfig.loaderExternalOptions&&Object.assign(this.externalOptions,window.top.ridgeConfig.loaderExternalOptions),this.scriptLoadingPromises={},this.eventCallbacks=[],this.scriptUrlLibName={},this.pelCacheByLibName={},this.componentLoading=new Map}async getDebugPackage(){if(void 0!==this.debugPackage)return this.debugPackage;if(this.debugUrl)try{this.debugPackage=await ZC.get(this.debugUrl+"/package.json").json()}catch(t){this.debugPackage=null}else this.debugPackage=null;return this.debugPackage}setExternalOptions(t){this.externalOptions=t}setAppName(t){t&&(this.appName=t)}setProjectId(t){t&&(this.projectId=t)}setDebugUrl(t){this.debugUrl=t}setDebugPackageName(t){this.debugPackageName=t}getServePath(t){return t&&this.projectId?this.baseUrl+"/"+this.appName+"/"+this.projectId:this.appName?this.baseUrl+"/"+this.appName:this.baseUrl}getComponentUrl({packageName:t,path:e}){return this.debugPackage&&t===this.debugPackage.name?`${this.debugUrl}/${e}`:`${this.baseUrl}/${t}/${e}`}getPackageJSONUrl(t){return`${this.baseUrl}/${t}/package.json`}getComponentLibName({packageName:t,path:e}){return`/${t}/${e}`}async loadComponent(t){let e,n;if("object"==typeof t)e=t.packageName,n=t.path;else{const r=t.split("/");r[0].startsWith("@")?(e=r.splice(0,2).join("/"),n=r.join("/")):(e=r.splice(0,1).join("/"),n=r.join("/"))}const r=this.getComponentUrl({packageName:e,path:n}),i=this.getComponent(r);if(i)return i;if("loading"===this.componentLoading.get(r))return new Promise(((t,e)=>{this.on("component-ready",((e,n)=>{e===r&&t(n)})),this.on("component-fail",(e=>{e===r&&t(null)}))}));if("fail"===this.componentLoading.get(r))return null;this.componentLoading.set(r,"loading");try{const t=await this.doLoadComponent({packageName:e,path:n});return this.notifyComponentLoaded(r,t),this.componentCache[r]=t,t}catch(t){return this.setPelLoadFail(r),VC("组件加载异常",t),null}}async doLoadComponent({packageName:t,path:e}){await this.confirmPackageDependencies(t);const n=await this.loadComponentScript({packageName:t,path:e});if(!n)throw new Error;return await this.prepareComponent(n,{packageName:t,path:e}),n}async prepareComponent(t,{packageName:e,path:n}){if(t.packageName=e,t.path=n,t.requires&&t.requires.length&&await this.loadExternals(t.requires),t.icon&&/\.(jpg|gif|png|jpeg|svg)$/i.test(t.icon)&&(this.debugPackageName===e&&this.debugUrl?t.previewUrl=`${this.debugUrl}${t.icon}`:t.previewUrl=`/npm_packages/${e}/${t.icon}`),t.component){let e=t.component;"function"==typeof e&&"AsyncFunction"===e.constructor.name&&(e=(await e()).default)}else VC("组件 Component定义未加载到",t)}notifyComponentLoaded(t,e){this.componentLoading.set(t,"loaded");try{this.eventCallbacks.filter((t=>"component-ready"===t.eventName)).forEach((n=>{n.callback(t,e)}))}catch(t){}}setPelLoadFail(t){this.componentLoading.set(t,"fail");try{this.eventCallbacks.filter((t=>"component-fail"===t.eventName)).forEach((e=>{e.callback(t)}))}catch(t){}}on(t,e){this.eventCallbacks.push({eventName:t,callback:e})}async loadComponentScript({packageName:t,path:e}){const n=this.getComponentUrl({packageName:t,path:e}),r=this.getComponentLibName({packageName:t,path:e});return await this.loadScript(n),window[r]?window[r].default:null}getComponent(t){return this.componentCache[t]?this.componentCache[t]:null}async loadExternals(t){const e=Object.assign(pC(),window.globalExternalConfig);for(const n of t){const t=e.externals.filter((t=>n===t.module))[0];if(t){if(t.root&&window[t.root])continue;t.dependencies&&await this.loadExternals(t.dependencies);const e=`${this.unpkgUrl}/${t.dist}`;if(t.style)if(null!=this.externalOptions[t.module]){if(Array.isArray(this.externalOptions[t.module]))try{for(const e of this.externalOptions[t.module])await this.loadScript(e)}catch(e){console.warn("加载应用定义的样式失败 地址是:"+this.externalOptions[t.module])}else if("string"==typeof this.externalOptions[t.module])try{await this.loadScript(this.externalOptions[t.module])}catch(e){console.warn("加载应用定义的样式失败 地址是:"+this.externalOptions[t.module])}}else"string"==typeof t.style&&await this.loadScript(`${this.unpkgUrl}/${t.style}`);this.scriptLoadingPromises[e]||(this.scriptLoadingPromises[e]=(async()=>{try{VC("加载第三方库:"+e),await BC()(e,{returnPromise:!0,before:function(t,e){e.crossOrigin=!0}})}catch(e){console.error("第三方库加载异常 ",`${t.module}`)}})()),await this.scriptLoadingPromises[e],window.fcExternalLoaded.push(t.module)}else VC("忽略库:"+n)}}async loadFont(t,e,n){if(e&&!(this.loadedFonts.indexOf(e)>-1)&&"default"!==e)try{const r=t?t+"/"+n:e;let i=this.getServePath()+"/npm_packages/"+(t?t+"/"+n:e);t||n||-1!==e.indexOf(".woff")||(await this.confirmPackageDependencies("@gw/web-font-assets"),this.packageJSONCache["@gw/web-font-assets"]?this.packageJSONCache["@gw/web-font-assets"].fonts[e]&&(i=this.getServePath()+"/npm_packages/@gw/web-font-assets/"+this.packageJSONCache["@gw/web-font-assets"].fonts[e].url):console.error("加载字体地址未找到",e));const o=new FontFace(r,`url(${i})`);await o.load(),document.fonts.add(o),this.loadedFonts.push(e)}catch(n){console.error("加载字体异常",e,t,n)}}async loadCss(t){const e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.getElementsByTagName("HEAD")[0].appendChild(e)}async loadScript(t){this.scriptLoadingPromises[t]||(this.scriptLoadingPromises[t]=(async()=>{try{VC("加载库:"+t),await BC()(t,{returnPromise:!0,before:function(t,e){e.crossOrigin=!0}})}catch(e){console.error("第三方库加载异常 ",`${t}`)}})()),await this.scriptLoadingPromises[t]}setPackageCache(t,e){this.packageJSONCache[t]=e}async reloadDebugCache(){for(const t of Object.keys(this.fcCache))if(t.startsWith("https://")&&(delete this.scriptLoadingPromises[t],await this.loadScript(t),window[this.scriptUrlLibName[t]])){const e=window[this.scriptUrlLibName[t]].default;await this.initFcp(e,this.pelCacheByLibName[this.scriptUrlLibName[t]]),this.fcCache[t]=e}}async getPackageJSON(t){if(this.packageJSONCache[t])return this.packageJSONCache[t];if(this.debugUrl){const e=await this.getDebugPackage();if(e&&e.name===t)return this.prefixPackageJSON(e,this.debugUrl),this.setPackageCache(e.name,e),e}const e=this.getPackageJSONUrl(t);try{const n=await ZC.get(e).json();return this.prefixPackageJSON(n,this.baseUrl+"/"+t),this.setPackageCache(n),n}catch(e){console.error("NPM Package Not Loaded: ",t,e)}}prefixPackageJSON(t,e){t.icon&&(t.icon=`${e}/${t.icon}`);for(const n of t.components??[])n.icon&&(n.icon=`${e}/${n.icon}`)}async confirmPackageDependencies(t){const e=await this.getPackageJSON(t);e&&e.dependencies&&await this.loadExternals(Object.keys(e.dependencies))}}({baseUrl:e,debugUrl:r,unpkgUrl:n}),this.pageElementManagers={}}loadComponent(t){return this.loader.loadComponent(t)}createPageManager(t){return new cQ(t,this)}getPageElementManager(t){return this.pageElementManagers[t]}registerMethod(t,e){this[t]=e}}({debugUrl:"https://localhost:8700"}),this.ridge.appService=new hC,window.Ridge=this.ridge,this.ridge.appService.getRecentPage().then((t=>{console.log("pageObject",t),this.loadPage(t)})),HS(NS,(t=>{this.pageElementManager.updateVariableConfig(t),this.debouncedSaveUpdatePage()})),HS(BS,(({from:t,properties:e})=>{this.pageElementManager.updatePageProperties(e),this.debouncedSaveUpdatePage()})),HS(XS,(({el:t,values:e,field:n})=>{t.elementWrapper.setPropsConfig(e,n),this.workspaceControl.updateMovable()})),HS(US,(({el:t,values:e})=>{t.elementWrapper.setEventsConfig(e)})),HS(qS,(()=>{this.saveCurrentPage()})),HS("*",(()=>{}))}saveCurrentPage(){if(this.pageElementManager){const t=this.pageElementManager.getPageJSON();Object.assign(this.pageConfig,t),uQ("Save Page",this.pageConfig),this.ridge.appService.saveUpdatePage(this.pageConfig)}}loadPage(t){uQ("loadPage",t),this.pageConfig=t,this.pageElementManager=this.ridge.createPageManager(t),this.pageElementManager.setMode("edit"),window.pageManager=this.pageElementManager,this.workspaceControl.setPageManager(this.pageElementManager),this.setState({variables:this.pageElementManager.getVariableConfig(),properties:this.pageElementManager.getPageProperties()}),this.pageElementManager.mount(this.viewPortRef.current),FS(ZS,{pageProperties:this.pageElementManager.getPageProperties(),pageVariables:this.pageElementManager.getVariableConfig(),elements:this.pageElementManager.getPageElements()}),this.workspaceControl.fitToCenter()}loadPageRun(t){uQ("runPage",t),this.pageElementManager&&this.pageElementManager.unmount(),this.pageElementManager=new cQ(t,this.ridge),this.pageElementManager.mount(this.viewPortRef.current),this.pageElementManager.forceUpdate()}componentDidMount(){this.workspaceControl=new sC({workspaceEl:this.workspaceRef.current,viewPortEl:this.viewPortRef.current,ridge:this.ridge,zoomable:!0})}render(){const{viewPortRef:t,rightPanelRef:n,dataPanelRef:r,workspaceRef:i,pageVariableConfigChange:o,state:s}=this,{componentPanelVisible:a,dataPanelVisible:l,propPanelVisible:c,outlinePanelVisible:h,pagesPanelVisible:u,modeRun:f,variables:d,editorLang:p,editorVisible:g,panelPosition:m,editorCode:O}=s;return e().createElement(e().Fragment,null,e().createElement(wk,hQ({},s,{toggleVisible:t=>{this.setState({[t]:!this.state[t]})},toggoleRunMode:this.toggoleRunMode.bind(this)})),e().createElement(fk,{position:m.ADD,visible:!f&&a,onClose:()=>{this.setState({componentPanelVisible:!1})}}),e().createElement(pk,{position:m.OUTLINE,visible:!f&&h}),e().createElement(sk,{title:"页面变量",variableChange:o.bind(this),position:m.DATA,variables:d,ref:r,visible:!f&&l,onClose:()=>{this.setState({dataPanelVisible:!1})}}),e().createElement(JS,{position:m.PROP,ref:n,visible:!f&&c,onClose:()=>{this.setState({propPanelVisible:!1})}}),e().createElement(Ck,{visible:g,onCancel:()=>{this.setState({editorVisible:!1})},value:O,lang:p,output:this.onCodeEditorCompleted.bind(this)}),e().createElement("div",{className:"workspace",ref:i},e().createElement("div",{ref:t,className:"viewport-container active"})))}openCodeEditor({lang:t,code:e,completed:n}){this.setState({editorVisible:!0,editorCode:e,editorLang:t}),this.codeEditComplete=n}onCodeEditorCompleted(t){this.setState({editorVisible:!1}),this.codeEditComplete&&this.codeEditComplete(t)}togglePanel(t){this.setState({[t]:!this.state[t]})}onNodeSelected(t){t?this.rightPanelRef.current?.elementSelected(t):this.rightPanelRef.current?.elementSelected(null)}pagePropertiesConfigChange(t){this.setState({properties:t}),this.pageElementManager.updatePageProperties(t),this.debouncedSaveUpdatePage()}pageVariableConfigChange(t){this.setState({variables:t}),FS(NS,t)}toggoleRunMode(){this.setState({modeRun:!this.state.modeRun},(()=>{this.state.modeRun?(this.workspaceControl.disable(),this.saveCurrentPage(),this.pageElementManager.setMode("run")):(this.pageElementManager.updateVariableConfigFromValue(),this.pageElementManager.setMode("edit"),this.workspaceControl.init())}))}zoomChange(t){t?(this.setState({zoom:t}),this.selectMove.setZoom(1/t)):this.fitToCenter()}}var dQ=n(1171),pQ={};pQ.styleTagTransform=F(),pQ.setAttributes=z(),pQ.insert=U().bind(null,"head"),pQ.domAPI=I(),pQ.insertStyleElement=L(),B()(dQ.Z,pQ),dQ.Z&&dQ.Z.locals&&dQ.Z.locals;const gQ=document.getElementById("root");gQ&&(0,r.s)(gQ).render(e().createElement(fQ,null))})()})();